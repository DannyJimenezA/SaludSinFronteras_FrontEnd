function uD(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Tb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fv={exports:{}},Tu={},Uv={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS;function dD(){if(mS)return lt;mS=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function S(F,ie,pe){this.props=F,this.context=ie,this.refs=x,this.updater=pe||b}S.prototype.isReactComponent={},S.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},S.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function E(){}E.prototype=S.prototype;function T(F,ie,pe){this.props=F,this.context=ie,this.refs=x,this.updater=pe||b}var P=T.prototype=new E;P.constructor=T,k(P,S.prototype),P.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,R={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function I(F,ie,pe){var oe,Se={},Ae=null,ae=null;if(ie!=null)for(oe in ie.ref!==void 0&&(ae=ie.ref),ie.key!==void 0&&(Ae=""+ie.key),ie)N.call(ie,oe)&&!A.hasOwnProperty(oe)&&(Se[oe]=ie[oe]);var ke=arguments.length-2;if(ke===1)Se.children=pe;else if(1<ke){for(var Ue=Array(ke),qe=0;qe<ke;qe++)Ue[qe]=arguments[qe+2];Se.children=Ue}if(F&&F.defaultProps)for(oe in ke=F.defaultProps,ke)Se[oe]===void 0&&(Se[oe]=ke[oe]);return{$$typeof:e,type:F,key:Ae,ref:ae,props:Se,_owner:R.current}}function D(F,ie){return{$$typeof:e,type:F.type,key:ie,ref:F.ref,props:F.props,_owner:F._owner}}function z(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function q(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(pe){return ie[pe]})}var V=/\/+/g;function te(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):ie.toString(36)}function J(F,ie,pe,oe,Se){var Ae=typeof F;(Ae==="undefined"||Ae==="boolean")&&(F=null);var ae=!1;if(F===null)ae=!0;else switch(Ae){case"string":case"number":ae=!0;break;case"object":switch(F.$$typeof){case e:case t:ae=!0}}if(ae)return ae=F,Se=Se(ae),F=oe===""?"."+te(ae,0):oe,j(Se)?(pe="",F!=null&&(pe=F.replace(V,"$&/")+"/"),J(Se,ie,pe,"",function(qe){return qe})):Se!=null&&(z(Se)&&(Se=D(Se,pe+(!Se.key||ae&&ae.key===Se.key?"":(""+Se.key).replace(V,"$&/")+"/")+F)),ie.push(Se)),1;if(ae=0,oe=oe===""?".":oe+":",j(F))for(var ke=0;ke<F.length;ke++){Ae=F[ke];var Ue=oe+te(Ae,ke);ae+=J(Ae,ie,pe,Ue,Se)}else if(Ue=y(F),typeof Ue=="function")for(F=Ue.call(F),ke=0;!(Ae=F.next()).done;)Ae=Ae.value,Ue=oe+te(Ae,ke++),ae+=J(Ae,ie,pe,Ue,Se);else if(Ae==="object")throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return ae}function we(F,ie,pe){if(F==null)return F;var oe=[],Se=0;return J(F,oe,"","",function(Ae){return ie.call(pe,Ae,Se++)}),oe}function X(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(pe){(F._status===0||F._status===-1)&&(F._status=1,F._result=pe)},function(pe){(F._status===0||F._status===-1)&&(F._status=2,F._result=pe)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var me={current:null},U={transition:null},ue={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:U,ReactCurrentOwner:R};function fe(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:we,forEach:function(F,ie,pe){we(F,function(){ie.apply(this,arguments)},pe)},count:function(F){var ie=0;return we(F,function(){ie++}),ie},toArray:function(F){return we(F,function(ie){return ie})||[]},only:function(F){if(!z(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},lt.Component=S,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=T,lt.StrictMode=r,lt.Suspense=d,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,lt.act=fe,lt.cloneElement=function(F,ie,pe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var oe=k({},F.props),Se=F.key,Ae=F.ref,ae=F._owner;if(ie!=null){if(ie.ref!==void 0&&(Ae=ie.ref,ae=R.current),ie.key!==void 0&&(Se=""+ie.key),F.type&&F.type.defaultProps)var ke=F.type.defaultProps;for(Ue in ie)N.call(ie,Ue)&&!A.hasOwnProperty(Ue)&&(oe[Ue]=ie[Ue]===void 0&&ke!==void 0?ke[Ue]:ie[Ue])}var Ue=arguments.length-2;if(Ue===1)oe.children=pe;else if(1<Ue){ke=Array(Ue);for(var qe=0;qe<Ue;qe++)ke[qe]=arguments[qe+2];oe.children=ke}return{$$typeof:e,type:F.type,key:Se,ref:Ae,props:oe,_owner:ae}},lt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},lt.createElement=I,lt.createFactory=function(F){var ie=I.bind(null,F);return ie.type=F,ie},lt.createRef=function(){return{current:null}},lt.forwardRef=function(F){return{$$typeof:l,render:F}},lt.isValidElement=z,lt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:X}},lt.memo=function(F,ie){return{$$typeof:h,type:F,compare:ie===void 0?null:ie}},lt.startTransition=function(F){var ie=U.transition;U.transition={};try{F()}finally{U.transition=ie}},lt.unstable_act=fe,lt.useCallback=function(F,ie){return me.current.useCallback(F,ie)},lt.useContext=function(F){return me.current.useContext(F)},lt.useDebugValue=function(){},lt.useDeferredValue=function(F){return me.current.useDeferredValue(F)},lt.useEffect=function(F,ie){return me.current.useEffect(F,ie)},lt.useId=function(){return me.current.useId()},lt.useImperativeHandle=function(F,ie,pe){return me.current.useImperativeHandle(F,ie,pe)},lt.useInsertionEffect=function(F,ie){return me.current.useInsertionEffect(F,ie)},lt.useLayoutEffect=function(F,ie){return me.current.useLayoutEffect(F,ie)},lt.useMemo=function(F,ie){return me.current.useMemo(F,ie)},lt.useReducer=function(F,ie,pe){return me.current.useReducer(F,ie,pe)},lt.useRef=function(F){return me.current.useRef(F)},lt.useState=function(F){return me.current.useState(F)},lt.useSyncExternalStore=function(F,ie,pe){return me.current.useSyncExternalStore(F,ie,pe)},lt.useTransition=function(){return me.current.useTransition()},lt.version="18.3.1",lt}var pS;function Km(){return pS||(pS=1,Uv.exports=dD()),Uv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS;function hD(){if(gS)return Tu;gS=1;var e=Km(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,h){var f,p={},y=null,b=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(b=d.ref);for(f in d)r.call(d,f)&&!s.hasOwnProperty(f)&&(p[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:l,key:y,ref:b,props:p,_owner:i.current}}return Tu.Fragment=n,Tu.jsx=o,Tu.jsxs=o,Tu}var vS;function fD(){return vS||(vS=1,Fv.exports=hD()),Fv.exports}var c=fD(),g=Km();const ye=Tb(g),NN=uD({__proto__:null,default:ye},[g]);var Zh={},Bv={exports:{}},Sr={},zv={exports:{}},$v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS;function mD(){return yS||(yS=1,(function(e){function t(U,ue){var fe=U.length;U.push(ue);e:for(;0<fe;){var F=fe-1>>>1,ie=U[F];if(0<i(ie,ue))U[F]=ue,U[fe]=ie,fe=F;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ue=U[0],fe=U.pop();if(fe!==ue){U[0]=fe;e:for(var F=0,ie=U.length,pe=ie>>>1;F<pe;){var oe=2*(F+1)-1,Se=U[oe],Ae=oe+1,ae=U[Ae];if(0>i(Se,fe))Ae<ie&&0>i(ae,Se)?(U[F]=ae,U[Ae]=fe,F=Ae):(U[F]=Se,U[oe]=fe,F=oe);else if(Ae<ie&&0>i(ae,fe))U[F]=ae,U[Ae]=fe,F=Ae;else break e}}return ue}function i(U,ue){var fe=U.sortIndex-ue.sortIndex;return fe!==0?fe:U.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],h=[],f=1,p=null,y=3,b=!1,k=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(U){for(var ue=n(h);ue!==null;){if(ue.callback===null)r(h);else if(ue.startTime<=U)r(h),ue.sortIndex=ue.expirationTime,t(d,ue);else break;ue=n(h)}}function j(U){if(x=!1,P(U),!k)if(n(d)!==null)k=!0,X(N);else{var ue=n(h);ue!==null&&me(j,ue.startTime-U)}}function N(U,ue){k=!1,x&&(x=!1,E(I),I=-1),b=!0;var fe=y;try{for(P(ue),p=n(d);p!==null&&(!(p.expirationTime>ue)||U&&!q());){var F=p.callback;if(typeof F=="function"){p.callback=null,y=p.priorityLevel;var ie=F(p.expirationTime<=ue);ue=e.unstable_now(),typeof ie=="function"?p.callback=ie:p===n(d)&&r(d),P(ue)}else r(d);p=n(d)}if(p!==null)var pe=!0;else{var oe=n(h);oe!==null&&me(j,oe.startTime-ue),pe=!1}return pe}finally{p=null,y=fe,b=!1}}var R=!1,A=null,I=-1,D=5,z=-1;function q(){return!(e.unstable_now()-z<D)}function V(){if(A!==null){var U=e.unstable_now();z=U;var ue=!0;try{ue=A(!0,U)}finally{ue?te():(R=!1,A=null)}}else R=!1}var te;if(typeof T=="function")te=function(){T(V)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,we=J.port2;J.port1.onmessage=V,te=function(){we.postMessage(null)}}else te=function(){S(V,0)};function X(U){A=U,R||(R=!0,te())}function me(U,ue){I=S(function(){U(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){k||b||(k=!0,X(N))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(U){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var fe=y;y=ue;try{return U()}finally{y=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,ue){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var fe=y;y=U;try{return ue()}finally{y=fe}},e.unstable_scheduleCallback=function(U,ue,fe){var F=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?F+fe:F):fe=F,U){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=fe+ie,U={id:f++,callback:ue,priorityLevel:U,startTime:fe,expirationTime:ie,sortIndex:-1},fe>F?(U.sortIndex=fe,t(h,U),n(d)===null&&U===n(h)&&(x?(E(I),I=-1):x=!0,me(j,fe-F))):(U.sortIndex=ie,t(d,U),k||b||(k=!0,X(N))),U},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(U){var ue=y;return function(){var fe=y;y=ue;try{return U.apply(this,arguments)}finally{y=fe}}}})($v)),$v}var bS;function pD(){return bS||(bS=1,zv.exports=mD()),zv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xS;function gD(){if(xS)return Sr;xS=1;var e=Km(),t=pD();function n(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(i[a]=u,a=0;a<u.length;a++)r.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(a){return d.call(p,a)?!0:d.call(f,a)?!1:h.test(a)?p[a]=!0:(f[a]=!0,!1)}function b(a,u,m,v){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return v?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function k(a,u,m,v){if(u===null||typeof u>"u"||b(a,u,m,v))return!0;if(v)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function x(a,u,m,v,w,C,_){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=v,this.attributeNamespace=w,this.mustUseProperty=m,this.propertyName=a,this.type=u,this.sanitizeURL=C,this.removeEmptyString=_}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new x(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];S[u]=new x(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new x(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new x(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new x(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new x(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new x(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new x(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new x(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function T(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(E,T);S[u]=new x(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(E,T);S[u]=new x(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(E,T);S[u]=new x(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new x(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new x(a,1,!1,a.toLowerCase(),null,!0,!0)});function P(a,u,m,v){var w=S.hasOwnProperty(u)?S[u]:null;(w!==null?w.type!==0:v||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(k(u,m,w,v)&&(m=null),v||w===null?y(u)&&(m===null?a.removeAttribute(u):a.setAttribute(u,""+m)):w.mustUseProperty?a[w.propertyName]=m===null?w.type===3?!1:"":m:(u=w.attributeName,v=w.attributeNamespace,m===null?a.removeAttribute(u):(w=w.type,m=w===3||w===4&&m===!0?"":""+m,v?a.setAttributeNS(v,u,m):a.setAttribute(u,m))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),R=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),U=Symbol.iterator;function ue(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var fe=Object.assign,F;function ie(a){if(F===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);F=u&&u[1]||""}return`
`+F+a}var pe=!1;function oe(a,u){if(!a||pe)return"";pe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Y){var v=Y}Reflect.construct(a,[],u)}else{try{u.call()}catch(Y){v=Y}a.call(u.prototype)}else{try{throw Error()}catch(Y){v=Y}a()}}catch(Y){if(Y&&v&&typeof Y.stack=="string"){for(var w=Y.stack.split(`
`),C=v.stack.split(`
`),_=w.length-1,O=C.length-1;1<=_&&0<=O&&w[_]!==C[O];)O--;for(;1<=_&&0<=O;_--,O--)if(w[_]!==C[O]){if(_!==1||O!==1)do if(_--,O--,0>O||w[_]!==C[O]){var B=`
`+w[_].replace(" at new "," at ");return a.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",a.displayName)),B}while(1<=_&&0<=O);break}}}finally{pe=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ie(a):""}function Se(a){switch(a.tag){case 5:return ie(a.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return a=oe(a.type,!1),a;case 11:return a=oe(a.type.render,!1),a;case 1:return a=oe(a.type,!0),a;default:return""}}function Ae(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case A:return"Fragment";case R:return"Portal";case D:return"Profiler";case I:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case q:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case V:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case we:return u=a.displayName||null,u!==null?u:Ae(a.type)||"Memo";case X:u=a._payload,a=a._init;try{return Ae(a(u))}catch{}}return null}function ae(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(u);case 8:return u===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ke(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ue(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function qe(a){var u=Ue(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),v=""+a[u];if(!a.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,C=m.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return w.call(this)},set:function(_){v=""+_,C.call(this,_)}}),Object.defineProperty(a,u,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(_){v=""+_},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function nt(a){a._valueTracker||(a._valueTracker=qe(a))}function ct(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var m=u.getValue(),v="";return a&&(v=Ue(a)?a.checked?"true":"false":a.value),a=v,a!==m?(u.setValue(a),!0):!1}function Yt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function An(a,u){var m=u.checked;return fe({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function yi(a,u){var m=u.defaultValue==null?"":u.defaultValue,v=u.checked!=null?u.checked:u.defaultChecked;m=ke(u.value!=null?u.value:m),a._wrapperState={initialChecked:v,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function bi(a,u){u=u.checked,u!=null&&P(a,"checked",u,!1)}function or(a,u){bi(a,u);var m=ke(u.value),v=u.type;if(m!=null)v==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(v==="submit"||v==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?Zn(a,u.type,m):u.hasOwnProperty("defaultValue")&&Zn(a,u.type,ke(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function mc(a,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var v=u.type;if(!(v!=="submit"&&v!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,m||u===a.value||(a.value=u),a.defaultValue=u}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function Zn(a,u,m){(u!=="number"||Yt(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var L=Array.isArray;function W(a,u,m,v){if(a=a.options,u){u={};for(var w=0;w<m.length;w++)u["$"+m[w]]=!0;for(m=0;m<a.length;m++)w=u.hasOwnProperty("$"+a[m].value),a[m].selected!==w&&(a[m].selected=w),w&&v&&(a[m].defaultSelected=!0)}else{for(m=""+ke(m),u=null,w=0;w<a.length;w++){if(a[w].value===m){a[w].selected=!0,v&&(a[w].defaultSelected=!0);return}u!==null||a[w].disabled||(u=a[w])}u!==null&&(u.selected=!0)}}function ne(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return fe({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Pe(a,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(n(92));if(L(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),m=u}a._wrapperState={initialValue:ke(m)}}function Ne(a,u){var m=ke(u.value),v=ke(u.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),u.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),v!=null&&(a.defaultValue=""+v)}function Ce(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Be(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Be(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var vt,wn=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,v,w){MSApp.execUnsafeLocalFunction(function(){return a(u,m,v,w)})}:a})(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(vt=vt||document.createElement("div"),vt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=vt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function $n(a,u){if(u){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=u;return}}a.textContent=u}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},es=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(a){es.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),Vn[u]=Vn[a]})});function po(a,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||Vn.hasOwnProperty(a)&&Vn[a]?(""+u).trim():u+"px"}function go(a,u){a=a.style;for(var m in u)if(u.hasOwnProperty(m)){var v=m.indexOf("--")===0,w=po(m,u[m],v);m==="float"&&(m="cssFloat"),v?a.setProperty(m,w):a[m]=w}}var pc=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Os(a,u){if(u){if(pc[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function ga(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ts=null;function Xr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ql=null,vo=null,Ms=null;function Hl(a){if(a=du(a)){if(typeof ql!="function")throw Error(n(280));var u=a.stateNode;u&&(u=uh(u),ql(a.stateNode,a.type,u))}}function et(a){vo?Ms?Ms.push(a):Ms=[a]:vo=a}function Xt(){if(vo){var a=vo,u=Ms;if(Ms=vo=null,Hl(a),u)for(a=0;a<u.length;a++)Hl(u[a])}}function kn(a,u){return a(u)}function Jn(){}var yo=!1;function hn(a,u,m){if(yo)return a(u,m);yo=!0;try{return kn(a,u,m)}finally{yo=!1,(vo!==null||Ms!==null)&&(Jn(),Xt())}}function In(a,u){var m=a.stateNode;if(m===null)return null;var v=uh(m);if(v===null)return null;m=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(a=a.type,v=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!v;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,u,typeof m));return m}var bo=!1;if(l)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){bo=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{bo=!1}function Lr(a,u,m,v,w,C,_,O,B){var Y=Array.prototype.slice.call(arguments,3);try{u.apply(m,Y)}catch(be){this.onError(be)}}var xo=!1,ei=null,Wl=!1,rg=null,v5={onError:function(a){xo=!0,ei=a}};function y5(a,u,m,v,w,C,_,O,B){xo=!1,ei=null,Lr.apply(v5,arguments)}function b5(a,u,m,v,w,C,_,O,B){if(y5.apply(this,arguments),xo){if(xo){var Y=ei;xo=!1,ei=null}else throw Error(n(198));Wl||(Wl=!0,rg=Y)}}function va(a){var u=a,m=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(m=u.return),a=u.return;while(a)}return u.tag===3?m:null}function Lw(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function Fw(a){if(va(a)!==a)throw Error(n(188))}function x5(a){var u=a.alternate;if(!u){if(u=va(a),u===null)throw Error(n(188));return u!==a?null:a}for(var m=a,v=u;;){var w=m.return;if(w===null)break;var C=w.alternate;if(C===null){if(v=w.return,v!==null){m=v;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===m)return Fw(w),a;if(C===v)return Fw(w),u;C=C.sibling}throw Error(n(188))}if(m.return!==v.return)m=w,v=C;else{for(var _=!1,O=w.child;O;){if(O===m){_=!0,m=w,v=C;break}if(O===v){_=!0,v=w,m=C;break}O=O.sibling}if(!_){for(O=C.child;O;){if(O===m){_=!0,m=C,v=w;break}if(O===v){_=!0,v=C,m=w;break}O=O.sibling}if(!_)throw Error(n(189))}}if(m.alternate!==v)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:u}function Uw(a){return a=x5(a),a!==null?Bw(a):null}function Bw(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Bw(a);if(u!==null)return u;a=a.sibling}return null}var zw=t.unstable_scheduleCallback,$w=t.unstable_cancelCallback,w5=t.unstable_shouldYield,k5=t.unstable_requestPaint,en=t.unstable_now,S5=t.unstable_getCurrentPriorityLevel,ig=t.unstable_ImmediatePriority,Vw=t.unstable_UserBlockingPriority,qd=t.unstable_NormalPriority,C5=t.unstable_LowPriority,qw=t.unstable_IdlePriority,Hd=null,ns=null;function E5(a){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(Hd,a,void 0,(a.current.flags&128)===128)}catch{}}var xi=Math.clz32?Math.clz32:j5,T5=Math.log,N5=Math.LN2;function j5(a){return a>>>=0,a===0?32:31-(T5(a)/N5|0)|0}var Wd=64,Kd=4194304;function Kl(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Gd(a,u){var m=a.pendingLanes;if(m===0)return 0;var v=0,w=a.suspendedLanes,C=a.pingedLanes,_=m&268435455;if(_!==0){var O=_&~w;O!==0?v=Kl(O):(C&=_,C!==0&&(v=Kl(C)))}else _=m&~w,_!==0?v=Kl(_):C!==0&&(v=Kl(C));if(v===0)return 0;if(u!==0&&u!==v&&(u&w)===0&&(w=v&-v,C=u&-u,w>=C||w===16&&(C&4194240)!==0))return u;if((v&4)!==0&&(v|=m&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=v;0<u;)m=31-xi(u),w=1<<m,v|=a[m],u&=~w;return v}function P5(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _5(a,u){for(var m=a.suspendedLanes,v=a.pingedLanes,w=a.expirationTimes,C=a.pendingLanes;0<C;){var _=31-xi(C),O=1<<_,B=w[_];B===-1?((O&m)===0||(O&v)!==0)&&(w[_]=P5(O,u)):B<=u&&(a.expiredLanes|=O),C&=~O}}function sg(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Hw(){var a=Wd;return Wd<<=1,(Wd&4194240)===0&&(Wd=64),a}function og(a){for(var u=[],m=0;31>m;m++)u.push(a);return u}function Gl(a,u,m){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-xi(u),a[u]=m}function R5(a,u){var m=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var v=a.eventTimes;for(a=a.expirationTimes;0<m;){var w=31-xi(m),C=1<<w;u[w]=0,v[w]=-1,a[w]=-1,m&=~C}}function ag(a,u){var m=a.entangledLanes|=u;for(a=a.entanglements;m;){var v=31-xi(m),w=1<<v;w&u|a[v]&u&&(a[v]|=u),m&=~w}}var Nt=0;function Ww(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Kw,cg,Gw,Zw,Jw,lg=!1,Zd=[],wo=null,ko=null,So=null,Zl=new Map,Jl=new Map,Co=[],A5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qw(a,u){switch(a){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":Zl.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(u.pointerId)}}function Ql(a,u,m,v,w,C){return a===null||a.nativeEvent!==C?(a={blockedOn:u,domEventName:m,eventSystemFlags:v,nativeEvent:C,targetContainers:[w]},u!==null&&(u=du(u),u!==null&&cg(u)),a):(a.eventSystemFlags|=v,u=a.targetContainers,w!==null&&u.indexOf(w)===-1&&u.push(w),a)}function I5(a,u,m,v,w){switch(u){case"focusin":return wo=Ql(wo,a,u,m,v,w),!0;case"dragenter":return ko=Ql(ko,a,u,m,v,w),!0;case"mouseover":return So=Ql(So,a,u,m,v,w),!0;case"pointerover":var C=w.pointerId;return Zl.set(C,Ql(Zl.get(C)||null,a,u,m,v,w)),!0;case"gotpointercapture":return C=w.pointerId,Jl.set(C,Ql(Jl.get(C)||null,a,u,m,v,w)),!0}return!1}function Yw(a){var u=ya(a.target);if(u!==null){var m=va(u);if(m!==null){if(u=m.tag,u===13){if(u=Lw(m),u!==null){a.blockedOn=u,Jw(a.priority,function(){Gw(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Jd(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var m=dg(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var v=new m.constructor(m.type,m);ts=v,m.target.dispatchEvent(v),ts=null}else return u=du(m),u!==null&&cg(u),a.blockedOn=m,!1;u.shift()}return!0}function Xw(a,u,m){Jd(a)&&m.delete(u)}function O5(){lg=!1,wo!==null&&Jd(wo)&&(wo=null),ko!==null&&Jd(ko)&&(ko=null),So!==null&&Jd(So)&&(So=null),Zl.forEach(Xw),Jl.forEach(Xw)}function Yl(a,u){a.blockedOn===u&&(a.blockedOn=null,lg||(lg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,O5)))}function Xl(a){function u(w){return Yl(w,a)}if(0<Zd.length){Yl(Zd[0],a);for(var m=1;m<Zd.length;m++){var v=Zd[m];v.blockedOn===a&&(v.blockedOn=null)}}for(wo!==null&&Yl(wo,a),ko!==null&&Yl(ko,a),So!==null&&Yl(So,a),Zl.forEach(u),Jl.forEach(u),m=0;m<Co.length;m++)v=Co[m],v.blockedOn===a&&(v.blockedOn=null);for(;0<Co.length&&(m=Co[0],m.blockedOn===null);)Yw(m),m.blockedOn===null&&Co.shift()}var gc=j.ReactCurrentBatchConfig,Qd=!0;function M5(a,u,m,v){var w=Nt,C=gc.transition;gc.transition=null;try{Nt=1,ug(a,u,m,v)}finally{Nt=w,gc.transition=C}}function D5(a,u,m,v){var w=Nt,C=gc.transition;gc.transition=null;try{Nt=4,ug(a,u,m,v)}finally{Nt=w,gc.transition=C}}function ug(a,u,m,v){if(Qd){var w=dg(a,u,m,v);if(w===null)jg(a,u,v,Yd,m),Qw(a,v);else if(I5(w,a,u,m,v))v.stopPropagation();else if(Qw(a,v),u&4&&-1<A5.indexOf(a)){for(;w!==null;){var C=du(w);if(C!==null&&Kw(C),C=dg(a,u,m,v),C===null&&jg(a,u,v,Yd,m),C===w)break;w=C}w!==null&&v.stopPropagation()}else jg(a,u,v,null,m)}}var Yd=null;function dg(a,u,m,v){if(Yd=null,a=Xr(v),a=ya(a),a!==null)if(u=va(a),u===null)a=null;else if(m=u.tag,m===13){if(a=Lw(u),a!==null)return a;a=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Yd=a,null}function e1(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S5()){case ig:return 1;case Vw:return 4;case qd:case C5:return 16;case qw:return 536870912;default:return 16}default:return 16}}var Eo=null,hg=null,Xd=null;function t1(){if(Xd)return Xd;var a,u=hg,m=u.length,v,w="value"in Eo?Eo.value:Eo.textContent,C=w.length;for(a=0;a<m&&u[a]===w[a];a++);var _=m-a;for(v=1;v<=_&&u[m-v]===w[C-v];v++);return Xd=w.slice(a,1<v?1-v:void 0)}function eh(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function th(){return!0}function n1(){return!1}function Fr(a){function u(m,v,w,C,_){this._reactName=m,this._targetInst=w,this.type=v,this.nativeEvent=C,this.target=_,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(m=a[O],this[O]=m?m(C):C[O]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?th:n1,this.isPropagationStopped=n1,this}return fe(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),u}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=Fr(vc),eu=fe({},vc,{view:0,detail:0}),L5=Fr(eu),mg,pg,tu,nh=fe({},eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==tu&&(tu&&a.type==="mousemove"?(mg=a.screenX-tu.screenX,pg=a.screenY-tu.screenY):pg=mg=0,tu=a),mg)},movementY:function(a){return"movementY"in a?a.movementY:pg}}),r1=Fr(nh),F5=fe({},nh,{dataTransfer:0}),U5=Fr(F5),B5=fe({},eu,{relatedTarget:0}),gg=Fr(B5),z5=fe({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),$5=Fr(z5),V5=fe({},vc,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),q5=Fr(V5),H5=fe({},vc,{data:0}),i1=Fr(H5),W5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z5(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=G5[a])?!!u[a]:!1}function vg(){return Z5}var J5=fe({},eu,{key:function(a){if(a.key){var u=W5[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=eh(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?K5[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vg,charCode:function(a){return a.type==="keypress"?eh(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?eh(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Q5=Fr(J5),Y5=fe({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s1=Fr(Y5),X5=fe({},eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vg}),eM=Fr(X5),tM=fe({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nM=Fr(tM),rM=fe({},nh,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),iM=Fr(rM),sM=[9,13,27,32],yg=l&&"CompositionEvent"in window,nu=null;l&&"documentMode"in document&&(nu=document.documentMode);var oM=l&&"TextEvent"in window&&!nu,o1=l&&(!yg||nu&&8<nu&&11>=nu),a1=" ",c1=!1;function l1(a,u){switch(a){case"keyup":return sM.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var yc=!1;function aM(a,u){switch(a){case"compositionend":return u1(u);case"keypress":return u.which!==32?null:(c1=!0,a1);case"textInput":return a=u.data,a===a1&&c1?null:a;default:return null}}function cM(a,u){if(yc)return a==="compositionend"||!yg&&l1(a,u)?(a=t1(),Xd=hg=Eo=null,yc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return o1&&u.locale!=="ko"?null:u.data;default:return null}}var lM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d1(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!lM[a.type]:u==="textarea"}function h1(a,u,m,v){et(v),u=ah(u,"onChange"),0<u.length&&(m=new fg("onChange","change",null,m,v),a.push({event:m,listeners:u}))}var ru=null,iu=null;function uM(a){_1(a,0)}function rh(a){var u=Sc(a);if(ct(u))return a}function dM(a,u){if(a==="change")return u}var f1=!1;if(l){var bg;if(l){var xg="oninput"in document;if(!xg){var m1=document.createElement("div");m1.setAttribute("oninput","return;"),xg=typeof m1.oninput=="function"}bg=xg}else bg=!1;f1=bg&&(!document.documentMode||9<document.documentMode)}function p1(){ru&&(ru.detachEvent("onpropertychange",g1),iu=ru=null)}function g1(a){if(a.propertyName==="value"&&rh(iu)){var u=[];h1(u,iu,a,Xr(a)),hn(uM,u)}}function hM(a,u,m){a==="focusin"?(p1(),ru=u,iu=m,ru.attachEvent("onpropertychange",g1)):a==="focusout"&&p1()}function fM(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return rh(iu)}function mM(a,u){if(a==="click")return rh(u)}function pM(a,u){if(a==="input"||a==="change")return rh(u)}function gM(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var wi=typeof Object.is=="function"?Object.is:gM;function su(a,u){if(wi(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var m=Object.keys(a),v=Object.keys(u);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var w=m[v];if(!d.call(u,w)||!wi(a[w],u[w]))return!1}return!0}function v1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function y1(a,u){var m=v1(a);a=0;for(var v;m;){if(m.nodeType===3){if(v=a+m.textContent.length,a<=u&&v>=u)return{node:m,offset:u-a};a=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=v1(m)}}function b1(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?b1(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function x1(){for(var a=window,u=Yt();u instanceof a.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)a=u.contentWindow;else break;u=Yt(a.document)}return u}function wg(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function vM(a){var u=x1(),m=a.focusedElem,v=a.selectionRange;if(u!==m&&m&&m.ownerDocument&&b1(m.ownerDocument.documentElement,m)){if(v!==null&&wg(m)){if(u=v.start,a=v.end,a===void 0&&(a=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(a,m.value.length);else if(a=(u=m.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var w=m.textContent.length,C=Math.min(v.start,w);v=v.end===void 0?C:Math.min(v.end,w),!a.extend&&C>v&&(w=v,v=C,C=w),w=y1(m,C);var _=y1(m,v);w&&_&&(a.rangeCount!==1||a.anchorNode!==w.node||a.anchorOffset!==w.offset||a.focusNode!==_.node||a.focusOffset!==_.offset)&&(u=u.createRange(),u.setStart(w.node,w.offset),a.removeAllRanges(),C>v?(a.addRange(u),a.extend(_.node,_.offset)):(u.setEnd(_.node,_.offset),a.addRange(u)))}}for(u=[],a=m;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)a=u[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var yM=l&&"documentMode"in document&&11>=document.documentMode,bc=null,kg=null,ou=null,Sg=!1;function w1(a,u,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Sg||bc==null||bc!==Yt(v)||(v=bc,"selectionStart"in v&&wg(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ou&&su(ou,v)||(ou=v,v=ah(kg,"onSelect"),0<v.length&&(u=new fg("onSelect","select",null,u,m),a.push({event:u,listeners:v}),u.target=bc)))}function ih(a,u){var m={};return m[a.toLowerCase()]=u.toLowerCase(),m["Webkit"+a]="webkit"+u,m["Moz"+a]="moz"+u,m}var xc={animationend:ih("Animation","AnimationEnd"),animationiteration:ih("Animation","AnimationIteration"),animationstart:ih("Animation","AnimationStart"),transitionend:ih("Transition","TransitionEnd")},Cg={},k1={};l&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function sh(a){if(Cg[a])return Cg[a];if(!xc[a])return a;var u=xc[a],m;for(m in u)if(u.hasOwnProperty(m)&&m in k1)return Cg[a]=u[m];return a}var S1=sh("animationend"),C1=sh("animationiteration"),E1=sh("animationstart"),T1=sh("transitionend"),N1=new Map,j1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(a,u){N1.set(a,u),s(u,[a])}for(var Eg=0;Eg<j1.length;Eg++){var Tg=j1[Eg],bM=Tg.toLowerCase(),xM=Tg[0].toUpperCase()+Tg.slice(1);To(bM,"on"+xM)}To(S1,"onAnimationEnd"),To(C1,"onAnimationIteration"),To(E1,"onAnimationStart"),To("dblclick","onDoubleClick"),To("focusin","onFocus"),To("focusout","onBlur"),To(T1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wM=new Set("cancel close invalid load scroll toggle".split(" ").concat(au));function P1(a,u,m){var v=a.type||"unknown-event";a.currentTarget=m,b5(v,u,void 0,a),a.currentTarget=null}function _1(a,u){u=(u&4)!==0;for(var m=0;m<a.length;m++){var v=a[m],w=v.event;v=v.listeners;e:{var C=void 0;if(u)for(var _=v.length-1;0<=_;_--){var O=v[_],B=O.instance,Y=O.currentTarget;if(O=O.listener,B!==C&&w.isPropagationStopped())break e;P1(w,O,Y),C=B}else for(_=0;_<v.length;_++){if(O=v[_],B=O.instance,Y=O.currentTarget,O=O.listener,B!==C&&w.isPropagationStopped())break e;P1(w,O,Y),C=B}}}if(Wl)throw a=rg,Wl=!1,rg=null,a}function Lt(a,u){var m=u[Og];m===void 0&&(m=u[Og]=new Set);var v=a+"__bubble";m.has(v)||(R1(u,a,2,!1),m.add(v))}function Ng(a,u,m){var v=0;u&&(v|=4),R1(m,a,v,u)}var oh="_reactListening"+Math.random().toString(36).slice(2);function cu(a){if(!a[oh]){a[oh]=!0,r.forEach(function(m){m!=="selectionchange"&&(wM.has(m)||Ng(m,!1,a),Ng(m,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[oh]||(u[oh]=!0,Ng("selectionchange",!1,u))}}function R1(a,u,m,v){switch(e1(u)){case 1:var w=M5;break;case 4:w=D5;break;default:w=ug}m=w.bind(null,u,m,a),w=void 0,!bo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(w=!0),v?w!==void 0?a.addEventListener(u,m,{capture:!0,passive:w}):a.addEventListener(u,m,!0):w!==void 0?a.addEventListener(u,m,{passive:w}):a.addEventListener(u,m,!1)}function jg(a,u,m,v,w){var C=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var _=v.tag;if(_===3||_===4){var O=v.stateNode.containerInfo;if(O===w||O.nodeType===8&&O.parentNode===w)break;if(_===4)for(_=v.return;_!==null;){var B=_.tag;if((B===3||B===4)&&(B=_.stateNode.containerInfo,B===w||B.nodeType===8&&B.parentNode===w))return;_=_.return}for(;O!==null;){if(_=ya(O),_===null)return;if(B=_.tag,B===5||B===6){v=C=_;continue e}O=O.parentNode}}v=v.return}hn(function(){var Y=C,be=Xr(m),xe=[];e:{var ve=N1.get(a);if(ve!==void 0){var Re=fg,Me=a;switch(a){case"keypress":if(eh(m)===0)break e;case"keydown":case"keyup":Re=Q5;break;case"focusin":Me="focus",Re=gg;break;case"focusout":Me="blur",Re=gg;break;case"beforeblur":case"afterblur":Re=gg;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=r1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=U5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=eM;break;case S1:case C1:case E1:Re=$5;break;case T1:Re=nM;break;case"scroll":Re=L5;break;case"wheel":Re=iM;break;case"copy":case"cut":case"paste":Re=q5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=s1}var ze=(u&4)!==0,tn=!ze&&a==="scroll",H=ze?ve!==null?ve+"Capture":null:ve;ze=[];for(var $=Y,Z;$!==null;){Z=$;var Ee=Z.stateNode;if(Z.tag===5&&Ee!==null&&(Z=Ee,H!==null&&(Ee=In($,H),Ee!=null&&ze.push(lu($,Ee,Z)))),tn)break;$=$.return}0<ze.length&&(ve=new Re(ve,Me,null,m,be),xe.push({event:ve,listeners:ze}))}}if((u&7)===0){e:{if(ve=a==="mouseover"||a==="pointerover",Re=a==="mouseout"||a==="pointerout",ve&&m!==ts&&(Me=m.relatedTarget||m.fromElement)&&(ya(Me)||Me[Ds]))break e;if((Re||ve)&&(ve=be.window===be?be:(ve=be.ownerDocument)?ve.defaultView||ve.parentWindow:window,Re?(Me=m.relatedTarget||m.toElement,Re=Y,Me=Me?ya(Me):null,Me!==null&&(tn=va(Me),Me!==tn||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Re=null,Me=Y),Re!==Me)){if(ze=r1,Ee="onMouseLeave",H="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(ze=s1,Ee="onPointerLeave",H="onPointerEnter",$="pointer"),tn=Re==null?ve:Sc(Re),Z=Me==null?ve:Sc(Me),ve=new ze(Ee,$+"leave",Re,m,be),ve.target=tn,ve.relatedTarget=Z,Ee=null,ya(be)===Y&&(ze=new ze(H,$+"enter",Me,m,be),ze.target=Z,ze.relatedTarget=tn,Ee=ze),tn=Ee,Re&&Me)t:{for(ze=Re,H=Me,$=0,Z=ze;Z;Z=wc(Z))$++;for(Z=0,Ee=H;Ee;Ee=wc(Ee))Z++;for(;0<$-Z;)ze=wc(ze),$--;for(;0<Z-$;)H=wc(H),Z--;for(;$--;){if(ze===H||H!==null&&ze===H.alternate)break t;ze=wc(ze),H=wc(H)}ze=null}else ze=null;Re!==null&&A1(xe,ve,Re,ze,!1),Me!==null&&tn!==null&&A1(xe,tn,Me,ze,!0)}}e:{if(ve=Y?Sc(Y):window,Re=ve.nodeName&&ve.nodeName.toLowerCase(),Re==="select"||Re==="input"&&ve.type==="file")var Ve=dM;else if(d1(ve))if(f1)Ve=pM;else{Ve=fM;var We=hM}else(Re=ve.nodeName)&&Re.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(Ve=mM);if(Ve&&(Ve=Ve(a,Y))){h1(xe,Ve,m,be);break e}We&&We(a,ve,Y),a==="focusout"&&(We=ve._wrapperState)&&We.controlled&&ve.type==="number"&&Zn(ve,"number",ve.value)}switch(We=Y?Sc(Y):window,a){case"focusin":(d1(We)||We.contentEditable==="true")&&(bc=We,kg=Y,ou=null);break;case"focusout":ou=kg=bc=null;break;case"mousedown":Sg=!0;break;case"contextmenu":case"mouseup":case"dragend":Sg=!1,w1(xe,m,be);break;case"selectionchange":if(yM)break;case"keydown":case"keyup":w1(xe,m,be)}var Ke;if(yg)e:{switch(a){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else yc?l1(a,m)&&(Ye="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(Ye="onCompositionStart");Ye&&(o1&&m.locale!=="ko"&&(yc||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&yc&&(Ke=t1()):(Eo=be,hg="value"in Eo?Eo.value:Eo.textContent,yc=!0)),We=ah(Y,Ye),0<We.length&&(Ye=new i1(Ye,a,null,m,be),xe.push({event:Ye,listeners:We}),Ke?Ye.data=Ke:(Ke=u1(m),Ke!==null&&(Ye.data=Ke)))),(Ke=oM?aM(a,m):cM(a,m))&&(Y=ah(Y,"onBeforeInput"),0<Y.length&&(be=new i1("onBeforeInput","beforeinput",null,m,be),xe.push({event:be,listeners:Y}),be.data=Ke))}_1(xe,u)})}function lu(a,u,m){return{instance:a,listener:u,currentTarget:m}}function ah(a,u){for(var m=u+"Capture",v=[];a!==null;){var w=a,C=w.stateNode;w.tag===5&&C!==null&&(w=C,C=In(a,m),C!=null&&v.unshift(lu(a,C,w)),C=In(a,u),C!=null&&v.push(lu(a,C,w))),a=a.return}return v}function wc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function A1(a,u,m,v,w){for(var C=u._reactName,_=[];m!==null&&m!==v;){var O=m,B=O.alternate,Y=O.stateNode;if(B!==null&&B===v)break;O.tag===5&&Y!==null&&(O=Y,w?(B=In(m,C),B!=null&&_.unshift(lu(m,B,O))):w||(B=In(m,C),B!=null&&_.push(lu(m,B,O)))),m=m.return}_.length!==0&&a.push({event:u,listeners:_})}var kM=/\r\n?/g,SM=/\u0000|\uFFFD/g;function I1(a){return(typeof a=="string"?a:""+a).replace(kM,`
`).replace(SM,"")}function ch(a,u,m){if(u=I1(u),I1(a)!==u&&m)throw Error(n(425))}function lh(){}var Pg=null,_g=null;function Rg(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ag=typeof setTimeout=="function"?setTimeout:void 0,CM=typeof clearTimeout=="function"?clearTimeout:void 0,O1=typeof Promise=="function"?Promise:void 0,EM=typeof queueMicrotask=="function"?queueMicrotask:typeof O1<"u"?function(a){return O1.resolve(null).then(a).catch(TM)}:Ag;function TM(a){setTimeout(function(){throw a})}function Ig(a,u){var m=u,v=0;do{var w=m.nextSibling;if(a.removeChild(m),w&&w.nodeType===8)if(m=w.data,m==="/$"){if(v===0){a.removeChild(w),Xl(u);return}v--}else m!=="$"&&m!=="$?"&&m!=="$!"||v++;m=w}while(m);Xl(u)}function No(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function M1(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return a;u--}else m==="/$"&&u++}a=a.previousSibling}return null}var kc=Math.random().toString(36).slice(2),rs="__reactFiber$"+kc,uu="__reactProps$"+kc,Ds="__reactContainer$"+kc,Og="__reactEvents$"+kc,NM="__reactListeners$"+kc,jM="__reactHandles$"+kc;function ya(a){var u=a[rs];if(u)return u;for(var m=a.parentNode;m;){if(u=m[Ds]||m[rs]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(a=M1(a);a!==null;){if(m=a[rs])return m;a=M1(a)}return u}a=m,m=a.parentNode}return null}function du(a){return a=a[rs]||a[Ds],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Sc(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function uh(a){return a[uu]||null}var Mg=[],Cc=-1;function jo(a){return{current:a}}function Ft(a){0>Cc||(a.current=Mg[Cc],Mg[Cc]=null,Cc--)}function Rt(a,u){Cc++,Mg[Cc]=a.current,a.current=u}var Po={},Qn=jo(Po),yr=jo(!1),ba=Po;function Ec(a,u){var m=a.type.contextTypes;if(!m)return Po;var v=a.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===u)return v.__reactInternalMemoizedMaskedChildContext;var w={},C;for(C in m)w[C]=u[C];return v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=w),w}function br(a){return a=a.childContextTypes,a!=null}function dh(){Ft(yr),Ft(Qn)}function D1(a,u,m){if(Qn.current!==Po)throw Error(n(168));Rt(Qn,u),Rt(yr,m)}function L1(a,u,m){var v=a.stateNode;if(u=u.childContextTypes,typeof v.getChildContext!="function")return m;v=v.getChildContext();for(var w in v)if(!(w in u))throw Error(n(108,ae(a)||"Unknown",w));return fe({},m,v)}function hh(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Po,ba=Qn.current,Rt(Qn,a),Rt(yr,yr.current),!0}function F1(a,u,m){var v=a.stateNode;if(!v)throw Error(n(169));m?(a=L1(a,u,ba),v.__reactInternalMemoizedMergedChildContext=a,Ft(yr),Ft(Qn),Rt(Qn,a)):Ft(yr),Rt(yr,m)}var Ls=null,fh=!1,Dg=!1;function U1(a){Ls===null?Ls=[a]:Ls.push(a)}function PM(a){fh=!0,U1(a)}function _o(){if(!Dg&&Ls!==null){Dg=!0;var a=0,u=Nt;try{var m=Ls;for(Nt=1;a<m.length;a++){var v=m[a];do v=v(!0);while(v!==null)}Ls=null,fh=!1}catch(w){throw Ls!==null&&(Ls=Ls.slice(a+1)),zw(ig,_o),w}finally{Nt=u,Dg=!1}}return null}var Tc=[],Nc=0,mh=null,ph=0,ti=[],ni=0,xa=null,Fs=1,Us="";function wa(a,u){Tc[Nc++]=ph,Tc[Nc++]=mh,mh=a,ph=u}function B1(a,u,m){ti[ni++]=Fs,ti[ni++]=Us,ti[ni++]=xa,xa=a;var v=Fs;a=Us;var w=32-xi(v)-1;v&=~(1<<w),m+=1;var C=32-xi(u)+w;if(30<C){var _=w-w%5;C=(v&(1<<_)-1).toString(32),v>>=_,w-=_,Fs=1<<32-xi(u)+w|m<<w|v,Us=C+a}else Fs=1<<C|m<<w|v,Us=a}function Lg(a){a.return!==null&&(wa(a,1),B1(a,1,0))}function Fg(a){for(;a===mh;)mh=Tc[--Nc],Tc[Nc]=null,ph=Tc[--Nc],Tc[Nc]=null;for(;a===xa;)xa=ti[--ni],ti[ni]=null,Us=ti[--ni],ti[ni]=null,Fs=ti[--ni],ti[ni]=null}var Ur=null,Br=null,Ut=!1,ki=null;function z1(a,u){var m=oi(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=a,u=a.deletions,u===null?(a.deletions=[m],a.flags|=16):u.push(m)}function $1(a,u){switch(a.tag){case 5:var m=a.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,Ur=a,Br=No(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,Ur=a,Br=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=xa!==null?{id:Fs,overflow:Us}:null,a.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=oi(18,null,null,0),m.stateNode=u,m.return=a,a.child=m,Ur=a,Br=null,!0):!1;default:return!1}}function Ug(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Bg(a){if(Ut){var u=Br;if(u){var m=u;if(!$1(a,u)){if(Ug(a))throw Error(n(418));u=No(m.nextSibling);var v=Ur;u&&$1(a,u)?z1(v,m):(a.flags=a.flags&-4097|2,Ut=!1,Ur=a)}}else{if(Ug(a))throw Error(n(418));a.flags=a.flags&-4097|2,Ut=!1,Ur=a}}}function V1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ur=a}function gh(a){if(a!==Ur)return!1;if(!Ut)return V1(a),Ut=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!Rg(a.type,a.memoizedProps)),u&&(u=Br)){if(Ug(a))throw q1(),Error(n(418));for(;u;)z1(a,u),u=No(u.nextSibling)}if(V1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(u===0){Br=No(a.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}a=a.nextSibling}Br=null}}else Br=Ur?No(a.stateNode.nextSibling):null;return!0}function q1(){for(var a=Br;a;)a=No(a.nextSibling)}function jc(){Br=Ur=null,Ut=!1}function zg(a){ki===null?ki=[a]:ki.push(a)}var _M=j.ReactCurrentBatchConfig;function hu(a,u,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var v=m.stateNode}if(!v)throw Error(n(147,a));var w=v,C=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(_){var O=w.refs;_===null?delete O[C]:O[C]=_},u._stringRef=C,u)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function vh(a,u){throw a=Object.prototype.toString.call(u),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function H1(a){var u=a._init;return u(a._payload)}function W1(a){function u(H,$){if(a){var Z=H.deletions;Z===null?(H.deletions=[$],H.flags|=16):Z.push($)}}function m(H,$){if(!a)return null;for(;$!==null;)u(H,$),$=$.sibling;return null}function v(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function w(H,$){return H=Fo(H,$),H.index=0,H.sibling=null,H}function C(H,$,Z){return H.index=Z,a?(Z=H.alternate,Z!==null?(Z=Z.index,Z<$?(H.flags|=2,$):Z):(H.flags|=2,$)):(H.flags|=1048576,$)}function _(H){return a&&H.alternate===null&&(H.flags|=2),H}function O(H,$,Z,Ee){return $===null||$.tag!==6?($=Av(Z,H.mode,Ee),$.return=H,$):($=w($,Z),$.return=H,$)}function B(H,$,Z,Ee){var Ve=Z.type;return Ve===A?be(H,$,Z.props.children,Ee,Z.key):$!==null&&($.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===X&&H1(Ve)===$.type)?(Ee=w($,Z.props),Ee.ref=hu(H,$,Z),Ee.return=H,Ee):(Ee=zh(Z.type,Z.key,Z.props,null,H.mode,Ee),Ee.ref=hu(H,$,Z),Ee.return=H,Ee)}function Y(H,$,Z,Ee){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=Iv(Z,H.mode,Ee),$.return=H,$):($=w($,Z.children||[]),$.return=H,$)}function be(H,$,Z,Ee,Ve){return $===null||$.tag!==7?($=Pa(Z,H.mode,Ee,Ve),$.return=H,$):($=w($,Z),$.return=H,$)}function xe(H,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Av(""+$,H.mode,Z),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case N:return Z=zh($.type,$.key,$.props,null,H.mode,Z),Z.ref=hu(H,null,$),Z.return=H,Z;case R:return $=Iv($,H.mode,Z),$.return=H,$;case X:var Ee=$._init;return xe(H,Ee($._payload),Z)}if(L($)||ue($))return $=Pa($,H.mode,Z,null),$.return=H,$;vh(H,$)}return null}function ve(H,$,Z,Ee){var Ve=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Ve!==null?null:O(H,$,""+Z,Ee);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return Z.key===Ve?B(H,$,Z,Ee):null;case R:return Z.key===Ve?Y(H,$,Z,Ee):null;case X:return Ve=Z._init,ve(H,$,Ve(Z._payload),Ee)}if(L(Z)||ue(Z))return Ve!==null?null:be(H,$,Z,Ee,null);vh(H,Z)}return null}function Re(H,$,Z,Ee,Ve){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return H=H.get(Z)||null,O($,H,""+Ee,Ve);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case N:return H=H.get(Ee.key===null?Z:Ee.key)||null,B($,H,Ee,Ve);case R:return H=H.get(Ee.key===null?Z:Ee.key)||null,Y($,H,Ee,Ve);case X:var We=Ee._init;return Re(H,$,Z,We(Ee._payload),Ve)}if(L(Ee)||ue(Ee))return H=H.get(Z)||null,be($,H,Ee,Ve,null);vh($,Ee)}return null}function Me(H,$,Z,Ee){for(var Ve=null,We=null,Ke=$,Ye=$=0,Dn=null;Ke!==null&&Ye<Z.length;Ye++){Ke.index>Ye?(Dn=Ke,Ke=null):Dn=Ke.sibling;var xt=ve(H,Ke,Z[Ye],Ee);if(xt===null){Ke===null&&(Ke=Dn);break}a&&Ke&&xt.alternate===null&&u(H,Ke),$=C(xt,$,Ye),We===null?Ve=xt:We.sibling=xt,We=xt,Ke=Dn}if(Ye===Z.length)return m(H,Ke),Ut&&wa(H,Ye),Ve;if(Ke===null){for(;Ye<Z.length;Ye++)Ke=xe(H,Z[Ye],Ee),Ke!==null&&($=C(Ke,$,Ye),We===null?Ve=Ke:We.sibling=Ke,We=Ke);return Ut&&wa(H,Ye),Ve}for(Ke=v(H,Ke);Ye<Z.length;Ye++)Dn=Re(Ke,H,Ye,Z[Ye],Ee),Dn!==null&&(a&&Dn.alternate!==null&&Ke.delete(Dn.key===null?Ye:Dn.key),$=C(Dn,$,Ye),We===null?Ve=Dn:We.sibling=Dn,We=Dn);return a&&Ke.forEach(function(Uo){return u(H,Uo)}),Ut&&wa(H,Ye),Ve}function ze(H,$,Z,Ee){var Ve=ue(Z);if(typeof Ve!="function")throw Error(n(150));if(Z=Ve.call(Z),Z==null)throw Error(n(151));for(var We=Ve=null,Ke=$,Ye=$=0,Dn=null,xt=Z.next();Ke!==null&&!xt.done;Ye++,xt=Z.next()){Ke.index>Ye?(Dn=Ke,Ke=null):Dn=Ke.sibling;var Uo=ve(H,Ke,xt.value,Ee);if(Uo===null){Ke===null&&(Ke=Dn);break}a&&Ke&&Uo.alternate===null&&u(H,Ke),$=C(Uo,$,Ye),We===null?Ve=Uo:We.sibling=Uo,We=Uo,Ke=Dn}if(xt.done)return m(H,Ke),Ut&&wa(H,Ye),Ve;if(Ke===null){for(;!xt.done;Ye++,xt=Z.next())xt=xe(H,xt.value,Ee),xt!==null&&($=C(xt,$,Ye),We===null?Ve=xt:We.sibling=xt,We=xt);return Ut&&wa(H,Ye),Ve}for(Ke=v(H,Ke);!xt.done;Ye++,xt=Z.next())xt=Re(Ke,H,Ye,xt.value,Ee),xt!==null&&(a&&xt.alternate!==null&&Ke.delete(xt.key===null?Ye:xt.key),$=C(xt,$,Ye),We===null?Ve=xt:We.sibling=xt,We=xt);return a&&Ke.forEach(function(lD){return u(H,lD)}),Ut&&wa(H,Ye),Ve}function tn(H,$,Z,Ee){if(typeof Z=="object"&&Z!==null&&Z.type===A&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:e:{for(var Ve=Z.key,We=$;We!==null;){if(We.key===Ve){if(Ve=Z.type,Ve===A){if(We.tag===7){m(H,We.sibling),$=w(We,Z.props.children),$.return=H,H=$;break e}}else if(We.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===X&&H1(Ve)===We.type){m(H,We.sibling),$=w(We,Z.props),$.ref=hu(H,We,Z),$.return=H,H=$;break e}m(H,We);break}else u(H,We);We=We.sibling}Z.type===A?($=Pa(Z.props.children,H.mode,Ee,Z.key),$.return=H,H=$):(Ee=zh(Z.type,Z.key,Z.props,null,H.mode,Ee),Ee.ref=hu(H,$,Z),Ee.return=H,H=Ee)}return _(H);case R:e:{for(We=Z.key;$!==null;){if($.key===We)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){m(H,$.sibling),$=w($,Z.children||[]),$.return=H,H=$;break e}else{m(H,$);break}else u(H,$);$=$.sibling}$=Iv(Z,H.mode,Ee),$.return=H,H=$}return _(H);case X:return We=Z._init,tn(H,$,We(Z._payload),Ee)}if(L(Z))return Me(H,$,Z,Ee);if(ue(Z))return ze(H,$,Z,Ee);vh(H,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,$!==null&&$.tag===6?(m(H,$.sibling),$=w($,Z),$.return=H,H=$):(m(H,$),$=Av(Z,H.mode,Ee),$.return=H,H=$),_(H)):m(H,$)}return tn}var Pc=W1(!0),K1=W1(!1),yh=jo(null),bh=null,_c=null,$g=null;function Vg(){$g=_c=bh=null}function qg(a){var u=yh.current;Ft(yh),a._currentValue=u}function Hg(a,u,m){for(;a!==null;){var v=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),a===m)break;a=a.return}}function Rc(a,u){bh=a,$g=_c=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(xr=!0),a.firstContext=null)}function ri(a){var u=a._currentValue;if($g!==a)if(a={context:a,memoizedValue:u,next:null},_c===null){if(bh===null)throw Error(n(308));_c=a,bh.dependencies={lanes:0,firstContext:a}}else _c=_c.next=a;return u}var ka=null;function Wg(a){ka===null?ka=[a]:ka.push(a)}function G1(a,u,m,v){var w=u.interleaved;return w===null?(m.next=m,Wg(u)):(m.next=w.next,w.next=m),u.interleaved=m,Bs(a,v)}function Bs(a,u){a.lanes|=u;var m=a.alternate;for(m!==null&&(m.lanes|=u),m=a,a=a.return;a!==null;)a.childLanes|=u,m=a.alternate,m!==null&&(m.childLanes|=u),m=a,a=a.return;return m.tag===3?m.stateNode:null}var Ro=!1;function Kg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z1(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zs(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Ao(a,u,m){var v=a.updateQueue;if(v===null)return null;if(v=v.shared,(yt&2)!==0){var w=v.pending;return w===null?u.next=u:(u.next=w.next,w.next=u),v.pending=u,Bs(a,m)}return w=v.interleaved,w===null?(u.next=u,Wg(v)):(u.next=w.next,w.next=u),v.interleaved=u,Bs(a,m)}function xh(a,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var v=u.lanes;v&=a.pendingLanes,m|=v,u.lanes=m,ag(a,m)}}function J1(a,u){var m=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var w=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var _={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};C===null?w=C=_:C=C.next=_,m=m.next}while(m!==null);C===null?w=C=u:C=C.next=u}else w=C=u;m={baseState:v.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:v.shared,effects:v.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=u:a.next=u,m.lastBaseUpdate=u}function wh(a,u,m,v){var w=a.updateQueue;Ro=!1;var C=w.firstBaseUpdate,_=w.lastBaseUpdate,O=w.shared.pending;if(O!==null){w.shared.pending=null;var B=O,Y=B.next;B.next=null,_===null?C=Y:_.next=Y,_=B;var be=a.alternate;be!==null&&(be=be.updateQueue,O=be.lastBaseUpdate,O!==_&&(O===null?be.firstBaseUpdate=Y:O.next=Y,be.lastBaseUpdate=B))}if(C!==null){var xe=w.baseState;_=0,be=Y=B=null,O=C;do{var ve=O.lane,Re=O.eventTime;if((v&ve)===ve){be!==null&&(be=be.next={eventTime:Re,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Me=a,ze=O;switch(ve=u,Re=m,ze.tag){case 1:if(Me=ze.payload,typeof Me=="function"){xe=Me.call(Re,xe,ve);break e}xe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=ze.payload,ve=typeof Me=="function"?Me.call(Re,xe,ve):Me,ve==null)break e;xe=fe({},xe,ve);break e;case 2:Ro=!0}}O.callback!==null&&O.lane!==0&&(a.flags|=64,ve=w.effects,ve===null?w.effects=[O]:ve.push(O))}else Re={eventTime:Re,lane:ve,tag:O.tag,payload:O.payload,callback:O.callback,next:null},be===null?(Y=be=Re,B=xe):be=be.next=Re,_|=ve;if(O=O.next,O===null){if(O=w.shared.pending,O===null)break;ve=O,O=ve.next,ve.next=null,w.lastBaseUpdate=ve,w.shared.pending=null}}while(!0);if(be===null&&(B=xe),w.baseState=B,w.firstBaseUpdate=Y,w.lastBaseUpdate=be,u=w.shared.interleaved,u!==null){w=u;do _|=w.lane,w=w.next;while(w!==u)}else C===null&&(w.shared.lanes=0);Ea|=_,a.lanes=_,a.memoizedState=xe}}function Q1(a,u,m){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var v=a[u],w=v.callback;if(w!==null){if(v.callback=null,v=m,typeof w!="function")throw Error(n(191,w));w.call(v)}}}var fu={},is=jo(fu),mu=jo(fu),pu=jo(fu);function Sa(a){if(a===fu)throw Error(n(174));return a}function Gg(a,u){switch(Rt(pu,u),Rt(mu,a),Rt(is,fu),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:pt(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=pt(u,a)}Ft(is),Rt(is,u)}function Ac(){Ft(is),Ft(mu),Ft(pu)}function Y1(a){Sa(pu.current);var u=Sa(is.current),m=pt(u,a.type);u!==m&&(Rt(mu,a),Rt(is,m))}function Zg(a){mu.current===a&&(Ft(is),Ft(mu))}var Vt=jo(0);function kh(a){for(var u=a;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Jg=[];function Qg(){for(var a=0;a<Jg.length;a++)Jg[a]._workInProgressVersionPrimary=null;Jg.length=0}var Sh=j.ReactCurrentDispatcher,Yg=j.ReactCurrentBatchConfig,Ca=0,qt=null,Sn=null,On=null,Ch=!1,gu=!1,vu=0,RM=0;function Yn(){throw Error(n(321))}function Xg(a,u){if(u===null)return!1;for(var m=0;m<u.length&&m<a.length;m++)if(!wi(a[m],u[m]))return!1;return!0}function ev(a,u,m,v,w,C){if(Ca=C,qt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Sh.current=a===null||a.memoizedState===null?MM:DM,a=m(v,w),gu){C=0;do{if(gu=!1,vu=0,25<=C)throw Error(n(301));C+=1,On=Sn=null,u.updateQueue=null,Sh.current=LM,a=m(v,w)}while(gu)}if(Sh.current=Nh,u=Sn!==null&&Sn.next!==null,Ca=0,On=Sn=qt=null,Ch=!1,u)throw Error(n(300));return a}function tv(){var a=vu!==0;return vu=0,a}function ss(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?qt.memoizedState=On=a:On=On.next=a,On}function ii(){if(Sn===null){var a=qt.alternate;a=a!==null?a.memoizedState:null}else a=Sn.next;var u=On===null?qt.memoizedState:On.next;if(u!==null)On=u,Sn=a;else{if(a===null)throw Error(n(310));Sn=a,a={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},On===null?qt.memoizedState=On=a:On=On.next=a}return On}function yu(a,u){return typeof u=="function"?u(a):u}function nv(a){var u=ii(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var v=Sn,w=v.baseQueue,C=m.pending;if(C!==null){if(w!==null){var _=w.next;w.next=C.next,C.next=_}v.baseQueue=w=C,m.pending=null}if(w!==null){C=w.next,v=v.baseState;var O=_=null,B=null,Y=C;do{var be=Y.lane;if((Ca&be)===be)B!==null&&(B=B.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),v=Y.hasEagerState?Y.eagerState:a(v,Y.action);else{var xe={lane:be,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};B===null?(O=B=xe,_=v):B=B.next=xe,qt.lanes|=be,Ea|=be}Y=Y.next}while(Y!==null&&Y!==C);B===null?_=v:B.next=O,wi(v,u.memoizedState)||(xr=!0),u.memoizedState=v,u.baseState=_,u.baseQueue=B,m.lastRenderedState=v}if(a=m.interleaved,a!==null){w=a;do C=w.lane,qt.lanes|=C,Ea|=C,w=w.next;while(w!==a)}else w===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function rv(a){var u=ii(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var v=m.dispatch,w=m.pending,C=u.memoizedState;if(w!==null){m.pending=null;var _=w=w.next;do C=a(C,_.action),_=_.next;while(_!==w);wi(C,u.memoizedState)||(xr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),m.lastRenderedState=C}return[C,v]}function X1(){}function ek(a,u){var m=qt,v=ii(),w=u(),C=!wi(v.memoizedState,w);if(C&&(v.memoizedState=w,xr=!0),v=v.queue,iv(rk.bind(null,m,v,a),[a]),v.getSnapshot!==u||C||On!==null&&On.memoizedState.tag&1){if(m.flags|=2048,bu(9,nk.bind(null,m,v,w,u),void 0,null),Mn===null)throw Error(n(349));(Ca&30)!==0||tk(m,u,w)}return w}function tk(a,u,m){a.flags|=16384,a={getSnapshot:u,value:m},u=qt.updateQueue,u===null?(u={lastEffect:null,stores:null},qt.updateQueue=u,u.stores=[a]):(m=u.stores,m===null?u.stores=[a]:m.push(a))}function nk(a,u,m,v){u.value=m,u.getSnapshot=v,ik(u)&&sk(a)}function rk(a,u,m){return m(function(){ik(u)&&sk(a)})}function ik(a){var u=a.getSnapshot;a=a.value;try{var m=u();return!wi(a,m)}catch{return!0}}function sk(a){var u=Bs(a,1);u!==null&&Ti(u,a,1,-1)}function ok(a){var u=ss();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yu,lastRenderedState:a},u.queue=a,a=a.dispatch=OM.bind(null,qt,a),[u.memoizedState,a]}function bu(a,u,m,v){return a={tag:a,create:u,destroy:m,deps:v,next:null},u=qt.updateQueue,u===null?(u={lastEffect:null,stores:null},qt.updateQueue=u,u.lastEffect=a.next=a):(m=u.lastEffect,m===null?u.lastEffect=a.next=a:(v=m.next,m.next=a,a.next=v,u.lastEffect=a)),a}function ak(){return ii().memoizedState}function Eh(a,u,m,v){var w=ss();qt.flags|=a,w.memoizedState=bu(1|u,m,void 0,v===void 0?null:v)}function Th(a,u,m,v){var w=ii();v=v===void 0?null:v;var C=void 0;if(Sn!==null){var _=Sn.memoizedState;if(C=_.destroy,v!==null&&Xg(v,_.deps)){w.memoizedState=bu(u,m,C,v);return}}qt.flags|=a,w.memoizedState=bu(1|u,m,C,v)}function ck(a,u){return Eh(8390656,8,a,u)}function iv(a,u){return Th(2048,8,a,u)}function lk(a,u){return Th(4,2,a,u)}function uk(a,u){return Th(4,4,a,u)}function dk(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function hk(a,u,m){return m=m!=null?m.concat([a]):null,Th(4,4,dk.bind(null,u,a),m)}function sv(){}function fk(a,u){var m=ii();u=u===void 0?null:u;var v=m.memoizedState;return v!==null&&u!==null&&Xg(u,v[1])?v[0]:(m.memoizedState=[a,u],a)}function mk(a,u){var m=ii();u=u===void 0?null:u;var v=m.memoizedState;return v!==null&&u!==null&&Xg(u,v[1])?v[0]:(a=a(),m.memoizedState=[a,u],a)}function pk(a,u,m){return(Ca&21)===0?(a.baseState&&(a.baseState=!1,xr=!0),a.memoizedState=m):(wi(m,u)||(m=Hw(),qt.lanes|=m,Ea|=m,a.baseState=!0),u)}function AM(a,u){var m=Nt;Nt=m!==0&&4>m?m:4,a(!0);var v=Yg.transition;Yg.transition={};try{a(!1),u()}finally{Nt=m,Yg.transition=v}}function gk(){return ii().memoizedState}function IM(a,u,m){var v=Do(a);if(m={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null},vk(a))yk(u,m);else if(m=G1(a,u,m,v),m!==null){var w=cr();Ti(m,a,v,w),bk(m,u,v)}}function OM(a,u,m){var v=Do(a),w={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null};if(vk(a))yk(u,w);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var _=u.lastRenderedState,O=C(_,m);if(w.hasEagerState=!0,w.eagerState=O,wi(O,_)){var B=u.interleaved;B===null?(w.next=w,Wg(u)):(w.next=B.next,B.next=w),u.interleaved=w;return}}catch{}finally{}m=G1(a,u,w,v),m!==null&&(w=cr(),Ti(m,a,v,w),bk(m,u,v))}}function vk(a){var u=a.alternate;return a===qt||u!==null&&u===qt}function yk(a,u){gu=Ch=!0;var m=a.pending;m===null?u.next=u:(u.next=m.next,m.next=u),a.pending=u}function bk(a,u,m){if((m&4194240)!==0){var v=u.lanes;v&=a.pendingLanes,m|=v,u.lanes=m,ag(a,m)}}var Nh={readContext:ri,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},MM={readContext:ri,useCallback:function(a,u){return ss().memoizedState=[a,u===void 0?null:u],a},useContext:ri,useEffect:ck,useImperativeHandle:function(a,u,m){return m=m!=null?m.concat([a]):null,Eh(4194308,4,dk.bind(null,u,a),m)},useLayoutEffect:function(a,u){return Eh(4194308,4,a,u)},useInsertionEffect:function(a,u){return Eh(4,2,a,u)},useMemo:function(a,u){var m=ss();return u=u===void 0?null:u,a=a(),m.memoizedState=[a,u],a},useReducer:function(a,u,m){var v=ss();return u=m!==void 0?m(u):u,v.memoizedState=v.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},v.queue=a,a=a.dispatch=IM.bind(null,qt,a),[v.memoizedState,a]},useRef:function(a){var u=ss();return a={current:a},u.memoizedState=a},useState:ok,useDebugValue:sv,useDeferredValue:function(a){return ss().memoizedState=a},useTransition:function(){var a=ok(!1),u=a[0];return a=AM.bind(null,a[1]),ss().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,m){var v=qt,w=ss();if(Ut){if(m===void 0)throw Error(n(407));m=m()}else{if(m=u(),Mn===null)throw Error(n(349));(Ca&30)!==0||tk(v,u,m)}w.memoizedState=m;var C={value:m,getSnapshot:u};return w.queue=C,ck(rk.bind(null,v,C,a),[a]),v.flags|=2048,bu(9,nk.bind(null,v,C,m,u),void 0,null),m},useId:function(){var a=ss(),u=Mn.identifierPrefix;if(Ut){var m=Us,v=Fs;m=(v&~(1<<32-xi(v)-1)).toString(32)+m,u=":"+u+"R"+m,m=vu++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=RM++,u=":"+u+"r"+m.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},DM={readContext:ri,useCallback:fk,useContext:ri,useEffect:iv,useImperativeHandle:hk,useInsertionEffect:lk,useLayoutEffect:uk,useMemo:mk,useReducer:nv,useRef:ak,useState:function(){return nv(yu)},useDebugValue:sv,useDeferredValue:function(a){var u=ii();return pk(u,Sn.memoizedState,a)},useTransition:function(){var a=nv(yu)[0],u=ii().memoizedState;return[a,u]},useMutableSource:X1,useSyncExternalStore:ek,useId:gk,unstable_isNewReconciler:!1},LM={readContext:ri,useCallback:fk,useContext:ri,useEffect:iv,useImperativeHandle:hk,useInsertionEffect:lk,useLayoutEffect:uk,useMemo:mk,useReducer:rv,useRef:ak,useState:function(){return rv(yu)},useDebugValue:sv,useDeferredValue:function(a){var u=ii();return Sn===null?u.memoizedState=a:pk(u,Sn.memoizedState,a)},useTransition:function(){var a=rv(yu)[0],u=ii().memoizedState;return[a,u]},useMutableSource:X1,useSyncExternalStore:ek,useId:gk,unstable_isNewReconciler:!1};function Si(a,u){if(a&&a.defaultProps){u=fe({},u),a=a.defaultProps;for(var m in a)u[m]===void 0&&(u[m]=a[m]);return u}return u}function ov(a,u,m,v){u=a.memoizedState,m=m(v,u),m=m==null?u:fe({},u,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var jh={isMounted:function(a){return(a=a._reactInternals)?va(a)===a:!1},enqueueSetState:function(a,u,m){a=a._reactInternals;var v=cr(),w=Do(a),C=zs(v,w);C.payload=u,m!=null&&(C.callback=m),u=Ao(a,C,w),u!==null&&(Ti(u,a,w,v),xh(u,a,w))},enqueueReplaceState:function(a,u,m){a=a._reactInternals;var v=cr(),w=Do(a),C=zs(v,w);C.tag=1,C.payload=u,m!=null&&(C.callback=m),u=Ao(a,C,w),u!==null&&(Ti(u,a,w,v),xh(u,a,w))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var m=cr(),v=Do(a),w=zs(m,v);w.tag=2,u!=null&&(w.callback=u),u=Ao(a,w,v),u!==null&&(Ti(u,a,v,m),xh(u,a,v))}};function xk(a,u,m,v,w,C,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,C,_):u.prototype&&u.prototype.isPureReactComponent?!su(m,v)||!su(w,C):!0}function wk(a,u,m){var v=!1,w=Po,C=u.contextType;return typeof C=="object"&&C!==null?C=ri(C):(w=br(u)?ba:Qn.current,v=u.contextTypes,C=(v=v!=null)?Ec(a,w):Po),u=new u(m,C),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=jh,a.stateNode=u,u._reactInternals=a,v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=w,a.__reactInternalMemoizedMaskedChildContext=C),u}function kk(a,u,m,v){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,v),u.state!==a&&jh.enqueueReplaceState(u,u.state,null)}function av(a,u,m,v){var w=a.stateNode;w.props=m,w.state=a.memoizedState,w.refs={},Kg(a);var C=u.contextType;typeof C=="object"&&C!==null?w.context=ri(C):(C=br(u)?ba:Qn.current,w.context=Ec(a,C)),w.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(ov(a,u,C,m),w.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(u=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),u!==w.state&&jh.enqueueReplaceState(w,w.state,null),wh(a,m,w,v),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308)}function Ic(a,u){try{var m="",v=u;do m+=Se(v),v=v.return;while(v);var w=m}catch(C){w=`
Error generating stack: `+C.message+`
`+C.stack}return{value:a,source:u,stack:w,digest:null}}function cv(a,u,m){return{value:a,source:null,stack:m??null,digest:u??null}}function lv(a,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var FM=typeof WeakMap=="function"?WeakMap:Map;function Sk(a,u,m){m=zs(-1,m),m.tag=3,m.payload={element:null};var v=u.value;return m.callback=function(){Mh||(Mh=!0,Cv=v),lv(a,u)},m}function Ck(a,u,m){m=zs(-1,m),m.tag=3;var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var w=u.value;m.payload=function(){return v(w)},m.callback=function(){lv(a,u)}}var C=a.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(m.callback=function(){lv(a,u),typeof v!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})}),m}function Ek(a,u,m){var v=a.pingCache;if(v===null){v=a.pingCache=new FM;var w=new Set;v.set(u,w)}else w=v.get(u),w===void 0&&(w=new Set,v.set(u,w));w.has(m)||(w.add(m),a=YM.bind(null,a,u,m),u.then(a,a))}function Tk(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Nk(a,u,m,v,w){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=zs(-1,1),u.tag=2,Ao(m,u,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=w,a)}var UM=j.ReactCurrentOwner,xr=!1;function ar(a,u,m,v){u.child=a===null?K1(u,null,m,v):Pc(u,a.child,m,v)}function jk(a,u,m,v,w){m=m.render;var C=u.ref;return Rc(u,w),v=ev(a,u,m,v,C,w),m=tv(),a!==null&&!xr?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~w,$s(a,u,w)):(Ut&&m&&Lg(u),u.flags|=1,ar(a,u,v,w),u.child)}function Pk(a,u,m,v,w){if(a===null){var C=m.type;return typeof C=="function"&&!Rv(C)&&C.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=C,_k(a,u,C,v,w)):(a=zh(m.type,null,v,u,u.mode,w),a.ref=u.ref,a.return=u,u.child=a)}if(C=a.child,(a.lanes&w)===0){var _=C.memoizedProps;if(m=m.compare,m=m!==null?m:su,m(_,v)&&a.ref===u.ref)return $s(a,u,w)}return u.flags|=1,a=Fo(C,v),a.ref=u.ref,a.return=u,u.child=a}function _k(a,u,m,v,w){if(a!==null){var C=a.memoizedProps;if(su(C,v)&&a.ref===u.ref)if(xr=!1,u.pendingProps=v=C,(a.lanes&w)!==0)(a.flags&131072)!==0&&(xr=!0);else return u.lanes=a.lanes,$s(a,u,w)}return uv(a,u,m,v,w)}function Rk(a,u,m){var v=u.pendingProps,w=v.children,C=a!==null?a.memoizedState:null;if(v.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Mc,zr),zr|=m;else{if((m&1073741824)===0)return a=C!==null?C.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Rt(Mc,zr),zr|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=C!==null?C.baseLanes:m,Rt(Mc,zr),zr|=v}else C!==null?(v=C.baseLanes|m,u.memoizedState=null):v=m,Rt(Mc,zr),zr|=v;return ar(a,u,w,m),u.child}function Ak(a,u){var m=u.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function uv(a,u,m,v,w){var C=br(m)?ba:Qn.current;return C=Ec(u,C),Rc(u,w),m=ev(a,u,m,v,C,w),v=tv(),a!==null&&!xr?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~w,$s(a,u,w)):(Ut&&v&&Lg(u),u.flags|=1,ar(a,u,m,w),u.child)}function Ik(a,u,m,v,w){if(br(m)){var C=!0;hh(u)}else C=!1;if(Rc(u,w),u.stateNode===null)_h(a,u),wk(u,m,v),av(u,m,v,w),v=!0;else if(a===null){var _=u.stateNode,O=u.memoizedProps;_.props=O;var B=_.context,Y=m.contextType;typeof Y=="object"&&Y!==null?Y=ri(Y):(Y=br(m)?ba:Qn.current,Y=Ec(u,Y));var be=m.getDerivedStateFromProps,xe=typeof be=="function"||typeof _.getSnapshotBeforeUpdate=="function";xe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==v||B!==Y)&&kk(u,_,v,Y),Ro=!1;var ve=u.memoizedState;_.state=ve,wh(u,v,_,w),B=u.memoizedState,O!==v||ve!==B||yr.current||Ro?(typeof be=="function"&&(ov(u,m,be,v),B=u.memoizedState),(O=Ro||xk(u,m,O,v,ve,B,Y))?(xe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=B),_.props=v,_.state=B,_.context=Y,v=O):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{_=u.stateNode,Z1(a,u),O=u.memoizedProps,Y=u.type===u.elementType?O:Si(u.type,O),_.props=Y,xe=u.pendingProps,ve=_.context,B=m.contextType,typeof B=="object"&&B!==null?B=ri(B):(B=br(m)?ba:Qn.current,B=Ec(u,B));var Re=m.getDerivedStateFromProps;(be=typeof Re=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==xe||ve!==B)&&kk(u,_,v,B),Ro=!1,ve=u.memoizedState,_.state=ve,wh(u,v,_,w);var Me=u.memoizedState;O!==xe||ve!==Me||yr.current||Ro?(typeof Re=="function"&&(ov(u,m,Re,v),Me=u.memoizedState),(Y=Ro||xk(u,m,Y,v,ve,Me,B)||!1)?(be||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(v,Me,B),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(v,Me,B)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||O===a.memoizedProps&&ve===a.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&ve===a.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=Me),_.props=v,_.state=Me,_.context=B,v=Y):(typeof _.componentDidUpdate!="function"||O===a.memoizedProps&&ve===a.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&ve===a.memoizedState||(u.flags|=1024),v=!1)}return dv(a,u,m,v,C,w)}function dv(a,u,m,v,w,C){Ak(a,u);var _=(u.flags&128)!==0;if(!v&&!_)return w&&F1(u,m,!1),$s(a,u,C);v=u.stateNode,UM.current=u;var O=_&&typeof m.getDerivedStateFromError!="function"?null:v.render();return u.flags|=1,a!==null&&_?(u.child=Pc(u,a.child,null,C),u.child=Pc(u,null,O,C)):ar(a,u,O,C),u.memoizedState=v.state,w&&F1(u,m,!0),u.child}function Ok(a){var u=a.stateNode;u.pendingContext?D1(a,u.pendingContext,u.pendingContext!==u.context):u.context&&D1(a,u.context,!1),Gg(a,u.containerInfo)}function Mk(a,u,m,v,w){return jc(),zg(w),u.flags|=256,ar(a,u,m,v),u.child}var hv={dehydrated:null,treeContext:null,retryLane:0};function fv(a){return{baseLanes:a,cachePool:null,transitions:null}}function Dk(a,u,m){var v=u.pendingProps,w=Vt.current,C=!1,_=(u.flags&128)!==0,O;if((O=_)||(O=a!==null&&a.memoizedState===null?!1:(w&2)!==0),O?(C=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(w|=1),Rt(Vt,w&1),a===null)return Bg(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(_=v.children,a=v.fallback,C?(v=u.mode,C=u.child,_={mode:"hidden",children:_},(v&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=_):C=$h(_,v,0,null),a=Pa(a,v,m,null),C.return=u,a.return=u,C.sibling=a,u.child=C,u.child.memoizedState=fv(m),u.memoizedState=hv,a):mv(u,_));if(w=a.memoizedState,w!==null&&(O=w.dehydrated,O!==null))return BM(a,u,_,v,O,w,m);if(C){C=v.fallback,_=u.mode,w=a.child,O=w.sibling;var B={mode:"hidden",children:v.children};return(_&1)===0&&u.child!==w?(v=u.child,v.childLanes=0,v.pendingProps=B,u.deletions=null):(v=Fo(w,B),v.subtreeFlags=w.subtreeFlags&14680064),O!==null?C=Fo(O,C):(C=Pa(C,_,m,null),C.flags|=2),C.return=u,v.return=u,v.sibling=C,u.child=v,v=C,C=u.child,_=a.child.memoizedState,_=_===null?fv(m):{baseLanes:_.baseLanes|m,cachePool:null,transitions:_.transitions},C.memoizedState=_,C.childLanes=a.childLanes&~m,u.memoizedState=hv,v}return C=a.child,a=C.sibling,v=Fo(C,{mode:"visible",children:v.children}),(u.mode&1)===0&&(v.lanes=m),v.return=u,v.sibling=null,a!==null&&(m=u.deletions,m===null?(u.deletions=[a],u.flags|=16):m.push(a)),u.child=v,u.memoizedState=null,v}function mv(a,u){return u=$h({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function Ph(a,u,m,v){return v!==null&&zg(v),Pc(u,a.child,null,m),a=mv(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function BM(a,u,m,v,w,C,_){if(m)return u.flags&256?(u.flags&=-257,v=cv(Error(n(422))),Ph(a,u,_,v)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(C=v.fallback,w=u.mode,v=$h({mode:"visible",children:v.children},w,0,null),C=Pa(C,w,_,null),C.flags|=2,v.return=u,C.return=u,v.sibling=C,u.child=v,(u.mode&1)!==0&&Pc(u,a.child,null,_),u.child.memoizedState=fv(_),u.memoizedState=hv,C);if((u.mode&1)===0)return Ph(a,u,_,null);if(w.data==="$!"){if(v=w.nextSibling&&w.nextSibling.dataset,v)var O=v.dgst;return v=O,C=Error(n(419)),v=cv(C,v,void 0),Ph(a,u,_,v)}if(O=(_&a.childLanes)!==0,xr||O){if(v=Mn,v!==null){switch(_&-_){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(v.suspendedLanes|_))!==0?0:w,w!==0&&w!==C.retryLane&&(C.retryLane=w,Bs(a,w),Ti(v,a,w,-1))}return _v(),v=cv(Error(n(421))),Ph(a,u,_,v)}return w.data==="$?"?(u.flags|=128,u.child=a.child,u=XM.bind(null,a),w._reactRetry=u,null):(a=C.treeContext,Br=No(w.nextSibling),Ur=u,Ut=!0,ki=null,a!==null&&(ti[ni++]=Fs,ti[ni++]=Us,ti[ni++]=xa,Fs=a.id,Us=a.overflow,xa=u),u=mv(u,v.children),u.flags|=4096,u)}function Lk(a,u,m){a.lanes|=u;var v=a.alternate;v!==null&&(v.lanes|=u),Hg(a.return,u,m)}function pv(a,u,m,v,w){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:w}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=v,C.tail=m,C.tailMode=w)}function Fk(a,u,m){var v=u.pendingProps,w=v.revealOrder,C=v.tail;if(ar(a,u,v.children,m),v=Vt.current,(v&2)!==0)v=v&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Lk(a,m,u);else if(a.tag===19)Lk(a,m,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}v&=1}if(Rt(Vt,v),(u.mode&1)===0)u.memoizedState=null;else switch(w){case"forwards":for(m=u.child,w=null;m!==null;)a=m.alternate,a!==null&&kh(a)===null&&(w=m),m=m.sibling;m=w,m===null?(w=u.child,u.child=null):(w=m.sibling,m.sibling=null),pv(u,!1,w,m,C);break;case"backwards":for(m=null,w=u.child,u.child=null;w!==null;){if(a=w.alternate,a!==null&&kh(a)===null){u.child=w;break}a=w.sibling,w.sibling=m,m=w,w=a}pv(u,!0,m,null,C);break;case"together":pv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function _h(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function $s(a,u,m){if(a!==null&&(u.dependencies=a.dependencies),Ea|=u.lanes,(m&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(n(153));if(u.child!==null){for(a=u.child,m=Fo(a,a.pendingProps),u.child=m,m.return=u;a.sibling!==null;)a=a.sibling,m=m.sibling=Fo(a,a.pendingProps),m.return=u;m.sibling=null}return u.child}function zM(a,u,m){switch(u.tag){case 3:Ok(u),jc();break;case 5:Y1(u);break;case 1:br(u.type)&&hh(u);break;case 4:Gg(u,u.stateNode.containerInfo);break;case 10:var v=u.type._context,w=u.memoizedProps.value;Rt(yh,v._currentValue),v._currentValue=w;break;case 13:if(v=u.memoizedState,v!==null)return v.dehydrated!==null?(Rt(Vt,Vt.current&1),u.flags|=128,null):(m&u.child.childLanes)!==0?Dk(a,u,m):(Rt(Vt,Vt.current&1),a=$s(a,u,m),a!==null?a.sibling:null);Rt(Vt,Vt.current&1);break;case 19:if(v=(m&u.childLanes)!==0,(a.flags&128)!==0){if(v)return Fk(a,u,m);u.flags|=128}if(w=u.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Rt(Vt,Vt.current),v)break;return null;case 22:case 23:return u.lanes=0,Rk(a,u,m)}return $s(a,u,m)}var Uk,gv,Bk,zk;Uk=function(a,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},gv=function(){},Bk=function(a,u,m,v){var w=a.memoizedProps;if(w!==v){a=u.stateNode,Sa(is.current);var C=null;switch(m){case"input":w=An(a,w),v=An(a,v),C=[];break;case"select":w=fe({},w,{value:void 0}),v=fe({},v,{value:void 0}),C=[];break;case"textarea":w=ne(a,w),v=ne(a,v),C=[];break;default:typeof w.onClick!="function"&&typeof v.onClick=="function"&&(a.onclick=lh)}Os(m,v);var _;m=null;for(Y in w)if(!v.hasOwnProperty(Y)&&w.hasOwnProperty(Y)&&w[Y]!=null)if(Y==="style"){var O=w[Y];for(_ in O)O.hasOwnProperty(_)&&(m||(m={}),m[_]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?C||(C=[]):(C=C||[]).push(Y,null));for(Y in v){var B=v[Y];if(O=w?.[Y],v.hasOwnProperty(Y)&&B!==O&&(B!=null||O!=null))if(Y==="style")if(O){for(_ in O)!O.hasOwnProperty(_)||B&&B.hasOwnProperty(_)||(m||(m={}),m[_]="");for(_ in B)B.hasOwnProperty(_)&&O[_]!==B[_]&&(m||(m={}),m[_]=B[_])}else m||(C||(C=[]),C.push(Y,m)),m=B;else Y==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,O=O?O.__html:void 0,B!=null&&O!==B&&(C=C||[]).push(Y,B)):Y==="children"?typeof B!="string"&&typeof B!="number"||(C=C||[]).push(Y,""+B):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(i.hasOwnProperty(Y)?(B!=null&&Y==="onScroll"&&Lt("scroll",a),C||O===B||(C=[])):(C=C||[]).push(Y,B))}m&&(C=C||[]).push("style",m);var Y=C;(u.updateQueue=Y)&&(u.flags|=4)}},zk=function(a,u,m,v){m!==v&&(u.flags|=4)};function xu(a,u){if(!Ut)switch(a.tailMode){case"hidden":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function Xn(a){var u=a.alternate!==null&&a.alternate.child===a.child,m=0,v=0;if(u)for(var w=a.child;w!==null;)m|=w.lanes|w.childLanes,v|=w.subtreeFlags&14680064,v|=w.flags&14680064,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)m|=w.lanes|w.childLanes,v|=w.subtreeFlags,v|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=v,a.childLanes=m,u}function $M(a,u,m){var v=u.pendingProps;switch(Fg(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(u),null;case 1:return br(u.type)&&dh(),Xn(u),null;case 3:return v=u.stateNode,Ac(),Ft(yr),Ft(Qn),Qg(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(a===null||a.child===null)&&(gh(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ki!==null&&(Nv(ki),ki=null))),gv(a,u),Xn(u),null;case 5:Zg(u);var w=Sa(pu.current);if(m=u.type,a!==null&&u.stateNode!=null)Bk(a,u,m,v,w),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Xn(u),null}if(a=Sa(is.current),gh(u)){v=u.stateNode,m=u.type;var C=u.memoizedProps;switch(v[rs]=u,v[uu]=C,a=(u.mode&1)!==0,m){case"dialog":Lt("cancel",v),Lt("close",v);break;case"iframe":case"object":case"embed":Lt("load",v);break;case"video":case"audio":for(w=0;w<au.length;w++)Lt(au[w],v);break;case"source":Lt("error",v);break;case"img":case"image":case"link":Lt("error",v),Lt("load",v);break;case"details":Lt("toggle",v);break;case"input":yi(v,C),Lt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!C.multiple},Lt("invalid",v);break;case"textarea":Pe(v,C),Lt("invalid",v)}Os(m,C),w=null;for(var _ in C)if(C.hasOwnProperty(_)){var O=C[_];_==="children"?typeof O=="string"?v.textContent!==O&&(C.suppressHydrationWarning!==!0&&ch(v.textContent,O,a),w=["children",O]):typeof O=="number"&&v.textContent!==""+O&&(C.suppressHydrationWarning!==!0&&ch(v.textContent,O,a),w=["children",""+O]):i.hasOwnProperty(_)&&O!=null&&_==="onScroll"&&Lt("scroll",v)}switch(m){case"input":nt(v),mc(v,C,!0);break;case"textarea":nt(v),Ce(v);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(v.onclick=lh)}v=w,u.updateQueue=v,v!==null&&(u.flags|=4)}else{_=w.nodeType===9?w:w.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Be(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof v.is=="string"?a=_.createElement(m,{is:v.is}):(a=_.createElement(m),m==="select"&&(_=a,v.multiple?_.multiple=!0:v.size&&(_.size=v.size))):a=_.createElementNS(a,m),a[rs]=u,a[uu]=v,Uk(a,u,!1,!1),u.stateNode=a;e:{switch(_=ga(m,v),m){case"dialog":Lt("cancel",a),Lt("close",a),w=v;break;case"iframe":case"object":case"embed":Lt("load",a),w=v;break;case"video":case"audio":for(w=0;w<au.length;w++)Lt(au[w],a);w=v;break;case"source":Lt("error",a),w=v;break;case"img":case"image":case"link":Lt("error",a),Lt("load",a),w=v;break;case"details":Lt("toggle",a),w=v;break;case"input":yi(a,v),w=An(a,v),Lt("invalid",a);break;case"option":w=v;break;case"select":a._wrapperState={wasMultiple:!!v.multiple},w=fe({},v,{value:void 0}),Lt("invalid",a);break;case"textarea":Pe(a,v),w=ne(a,v),Lt("invalid",a);break;default:w=v}Os(m,w),O=w;for(C in O)if(O.hasOwnProperty(C)){var B=O[C];C==="style"?go(a,B):C==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&wn(a,B)):C==="children"?typeof B=="string"?(m!=="textarea"||B!=="")&&$n(a,B):typeof B=="number"&&$n(a,""+B):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(i.hasOwnProperty(C)?B!=null&&C==="onScroll"&&Lt("scroll",a):B!=null&&P(a,C,B,_))}switch(m){case"input":nt(a),mc(a,v,!1);break;case"textarea":nt(a),Ce(a);break;case"option":v.value!=null&&a.setAttribute("value",""+ke(v.value));break;case"select":a.multiple=!!v.multiple,C=v.value,C!=null?W(a,!!v.multiple,C,!1):v.defaultValue!=null&&W(a,!!v.multiple,v.defaultValue,!0);break;default:typeof w.onClick=="function"&&(a.onclick=lh)}switch(m){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Xn(u),null;case 6:if(a&&u.stateNode!=null)zk(a,u,a.memoizedProps,v);else{if(typeof v!="string"&&u.stateNode===null)throw Error(n(166));if(m=Sa(pu.current),Sa(is.current),gh(u)){if(v=u.stateNode,m=u.memoizedProps,v[rs]=u,(C=v.nodeValue!==m)&&(a=Ur,a!==null))switch(a.tag){case 3:ch(v.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ch(v.nodeValue,m,(a.mode&1)!==0)}C&&(u.flags|=4)}else v=(m.nodeType===9?m:m.ownerDocument).createTextNode(v),v[rs]=u,u.stateNode=v}return Xn(u),null;case 13:if(Ft(Vt),v=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Ut&&Br!==null&&(u.mode&1)!==0&&(u.flags&128)===0)q1(),jc(),u.flags|=98560,C=!1;else if(C=gh(u),v!==null&&v.dehydrated!==null){if(a===null){if(!C)throw Error(n(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[rs]=u}else jc(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Xn(u),C=!1}else ki!==null&&(Nv(ki),ki=null),C=!0;if(!C)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=m,u):(v=v!==null,v!==(a!==null&&a.memoizedState!==null)&&v&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(Vt.current&1)!==0?Cn===0&&(Cn=3):_v())),u.updateQueue!==null&&(u.flags|=4),Xn(u),null);case 4:return Ac(),gv(a,u),a===null&&cu(u.stateNode.containerInfo),Xn(u),null;case 10:return qg(u.type._context),Xn(u),null;case 17:return br(u.type)&&dh(),Xn(u),null;case 19:if(Ft(Vt),C=u.memoizedState,C===null)return Xn(u),null;if(v=(u.flags&128)!==0,_=C.rendering,_===null)if(v)xu(C,!1);else{if(Cn!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(_=kh(a),_!==null){for(u.flags|=128,xu(C,!1),v=_.updateQueue,v!==null&&(u.updateQueue=v,u.flags|=4),u.subtreeFlags=0,v=m,m=u.child;m!==null;)C=m,a=v,C.flags&=14680066,_=C.alternate,_===null?(C.childLanes=0,C.lanes=a,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=_.childLanes,C.lanes=_.lanes,C.child=_.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=_.memoizedProps,C.memoizedState=_.memoizedState,C.updateQueue=_.updateQueue,C.type=_.type,a=_.dependencies,C.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return Rt(Vt,Vt.current&1|2),u.child}a=a.sibling}C.tail!==null&&en()>Dc&&(u.flags|=128,v=!0,xu(C,!1),u.lanes=4194304)}else{if(!v)if(a=kh(_),a!==null){if(u.flags|=128,v=!0,m=a.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),xu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!_.alternate&&!Ut)return Xn(u),null}else 2*en()-C.renderingStartTime>Dc&&m!==1073741824&&(u.flags|=128,v=!0,xu(C,!1),u.lanes=4194304);C.isBackwards?(_.sibling=u.child,u.child=_):(m=C.last,m!==null?m.sibling=_:u.child=_,C.last=_)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=en(),u.sibling=null,m=Vt.current,Rt(Vt,v?m&1|2:m&1),u):(Xn(u),null);case 22:case 23:return Pv(),v=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==v&&(u.flags|=8192),v&&(u.mode&1)!==0?(zr&1073741824)!==0&&(Xn(u),u.subtreeFlags&6&&(u.flags|=8192)):Xn(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function VM(a,u){switch(Fg(u),u.tag){case 1:return br(u.type)&&dh(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ac(),Ft(yr),Ft(Qn),Qg(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return Zg(u),null;case 13:if(Ft(Vt),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(n(340));jc()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Ft(Vt),null;case 4:return Ac(),null;case 10:return qg(u.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var Rh=!1,er=!1,qM=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Oc(a,u){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(v){Kt(a,u,v)}else m.current=null}function vv(a,u,m){try{m()}catch(v){Kt(a,u,v)}}var $k=!1;function HM(a,u){if(Pg=Qd,a=x1(),wg(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var w=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var _=0,O=-1,B=-1,Y=0,be=0,xe=a,ve=null;t:for(;;){for(var Re;xe!==m||w!==0&&xe.nodeType!==3||(O=_+w),xe!==C||v!==0&&xe.nodeType!==3||(B=_+v),xe.nodeType===3&&(_+=xe.nodeValue.length),(Re=xe.firstChild)!==null;)ve=xe,xe=Re;for(;;){if(xe===a)break t;if(ve===m&&++Y===w&&(O=_),ve===C&&++be===v&&(B=_),(Re=xe.nextSibling)!==null)break;xe=ve,ve=xe.parentNode}xe=Re}m=O===-1||B===-1?null:{start:O,end:B}}else m=null}m=m||{start:0,end:0}}else m=null;for(_g={focusedElem:a,selectionRange:m},Qd=!1,Ie=u;Ie!==null;)if(u=Ie,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,Ie=a;else for(;Ie!==null;){u=Ie;try{var Me=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var ze=Me.memoizedProps,tn=Me.memoizedState,H=u.stateNode,$=H.getSnapshotBeforeUpdate(u.elementType===u.type?ze:Si(u.type,ze),tn);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Z=u.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ee){Kt(u,u.return,Ee)}if(a=u.sibling,a!==null){a.return=u.return,Ie=a;break}Ie=u.return}return Me=$k,$k=!1,Me}function wu(a,u,m){var v=u.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var w=v=v.next;do{if((w.tag&a)===a){var C=w.destroy;w.destroy=void 0,C!==void 0&&vv(u,m,C)}w=w.next}while(w!==v)}}function Ah(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&a)===a){var v=m.create;m.destroy=v()}m=m.next}while(m!==u)}}function yv(a){var u=a.ref;if(u!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof u=="function"?u(a):u.current=a}}function Vk(a){var u=a.alternate;u!==null&&(a.alternate=null,Vk(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[rs],delete u[uu],delete u[Og],delete u[NM],delete u[jM])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function qk(a){return a.tag===5||a.tag===3||a.tag===4}function Hk(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||qk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function bv(a,u,m){var v=a.tag;if(v===5||v===6)a=a.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(a,u):m.insertBefore(a,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(a,m)):(u=m,u.appendChild(a)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=lh));else if(v!==4&&(a=a.child,a!==null))for(bv(a,u,m),a=a.sibling;a!==null;)bv(a,u,m),a=a.sibling}function xv(a,u,m){var v=a.tag;if(v===5||v===6)a=a.stateNode,u?m.insertBefore(a,u):m.appendChild(a);else if(v!==4&&(a=a.child,a!==null))for(xv(a,u,m),a=a.sibling;a!==null;)xv(a,u,m),a=a.sibling}var Hn=null,Ci=!1;function Io(a,u,m){for(m=m.child;m!==null;)Wk(a,u,m),m=m.sibling}function Wk(a,u,m){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(Hd,m)}catch{}switch(m.tag){case 5:er||Oc(m,u);case 6:var v=Hn,w=Ci;Hn=null,Io(a,u,m),Hn=v,Ci=w,Hn!==null&&(Ci?(a=Hn,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):Hn.removeChild(m.stateNode));break;case 18:Hn!==null&&(Ci?(a=Hn,m=m.stateNode,a.nodeType===8?Ig(a.parentNode,m):a.nodeType===1&&Ig(a,m),Xl(a)):Ig(Hn,m.stateNode));break;case 4:v=Hn,w=Ci,Hn=m.stateNode.containerInfo,Ci=!0,Io(a,u,m),Hn=v,Ci=w;break;case 0:case 11:case 14:case 15:if(!er&&(v=m.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){w=v=v.next;do{var C=w,_=C.destroy;C=C.tag,_!==void 0&&((C&2)!==0||(C&4)!==0)&&vv(m,u,_),w=w.next}while(w!==v)}Io(a,u,m);break;case 1:if(!er&&(Oc(m,u),v=m.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=m.memoizedProps,v.state=m.memoizedState,v.componentWillUnmount()}catch(O){Kt(m,u,O)}Io(a,u,m);break;case 21:Io(a,u,m);break;case 22:m.mode&1?(er=(v=er)||m.memoizedState!==null,Io(a,u,m),er=v):Io(a,u,m);break;default:Io(a,u,m)}}function Kk(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new qM),u.forEach(function(v){var w=eD.bind(null,a,v);m.has(v)||(m.add(v),v.then(w,w))})}}function Ei(a,u){var m=u.deletions;if(m!==null)for(var v=0;v<m.length;v++){var w=m[v];try{var C=a,_=u,O=_;e:for(;O!==null;){switch(O.tag){case 5:Hn=O.stateNode,Ci=!1;break e;case 3:Hn=O.stateNode.containerInfo,Ci=!0;break e;case 4:Hn=O.stateNode.containerInfo,Ci=!0;break e}O=O.return}if(Hn===null)throw Error(n(160));Wk(C,_,w),Hn=null,Ci=!1;var B=w.alternate;B!==null&&(B.return=null),w.return=null}catch(Y){Kt(w,u,Y)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Gk(u,a),u=u.sibling}function Gk(a,u){var m=a.alternate,v=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ei(u,a),os(a),v&4){try{wu(3,a,a.return),Ah(3,a)}catch(ze){Kt(a,a.return,ze)}try{wu(5,a,a.return)}catch(ze){Kt(a,a.return,ze)}}break;case 1:Ei(u,a),os(a),v&512&&m!==null&&Oc(m,m.return);break;case 5:if(Ei(u,a),os(a),v&512&&m!==null&&Oc(m,m.return),a.flags&32){var w=a.stateNode;try{$n(w,"")}catch(ze){Kt(a,a.return,ze)}}if(v&4&&(w=a.stateNode,w!=null)){var C=a.memoizedProps,_=m!==null?m.memoizedProps:C,O=a.type,B=a.updateQueue;if(a.updateQueue=null,B!==null)try{O==="input"&&C.type==="radio"&&C.name!=null&&bi(w,C),ga(O,_);var Y=ga(O,C);for(_=0;_<B.length;_+=2){var be=B[_],xe=B[_+1];be==="style"?go(w,xe):be==="dangerouslySetInnerHTML"?wn(w,xe):be==="children"?$n(w,xe):P(w,be,xe,Y)}switch(O){case"input":or(w,C);break;case"textarea":Ne(w,C);break;case"select":var ve=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!C.multiple;var Re=C.value;Re!=null?W(w,!!C.multiple,Re,!1):ve!==!!C.multiple&&(C.defaultValue!=null?W(w,!!C.multiple,C.defaultValue,!0):W(w,!!C.multiple,C.multiple?[]:"",!1))}w[uu]=C}catch(ze){Kt(a,a.return,ze)}}break;case 6:if(Ei(u,a),os(a),v&4){if(a.stateNode===null)throw Error(n(162));w=a.stateNode,C=a.memoizedProps;try{w.nodeValue=C}catch(ze){Kt(a,a.return,ze)}}break;case 3:if(Ei(u,a),os(a),v&4&&m!==null&&m.memoizedState.isDehydrated)try{Xl(u.containerInfo)}catch(ze){Kt(a,a.return,ze)}break;case 4:Ei(u,a),os(a);break;case 13:Ei(u,a),os(a),w=a.child,w.flags&8192&&(C=w.memoizedState!==null,w.stateNode.isHidden=C,!C||w.alternate!==null&&w.alternate.memoizedState!==null||(Sv=en())),v&4&&Kk(a);break;case 22:if(be=m!==null&&m.memoizedState!==null,a.mode&1?(er=(Y=er)||be,Ei(u,a),er=Y):Ei(u,a),os(a),v&8192){if(Y=a.memoizedState!==null,(a.stateNode.isHidden=Y)&&!be&&(a.mode&1)!==0)for(Ie=a,be=a.child;be!==null;){for(xe=Ie=be;Ie!==null;){switch(ve=Ie,Re=ve.child,ve.tag){case 0:case 11:case 14:case 15:wu(4,ve,ve.return);break;case 1:Oc(ve,ve.return);var Me=ve.stateNode;if(typeof Me.componentWillUnmount=="function"){v=ve,m=ve.return;try{u=v,Me.props=u.memoizedProps,Me.state=u.memoizedState,Me.componentWillUnmount()}catch(ze){Kt(v,m,ze)}}break;case 5:Oc(ve,ve.return);break;case 22:if(ve.memoizedState!==null){Qk(xe);continue}}Re!==null?(Re.return=ve,Ie=Re):Qk(xe)}be=be.sibling}e:for(be=null,xe=a;;){if(xe.tag===5){if(be===null){be=xe;try{w=xe.stateNode,Y?(C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(O=xe.stateNode,B=xe.memoizedProps.style,_=B!=null&&B.hasOwnProperty("display")?B.display:null,O.style.display=po("display",_))}catch(ze){Kt(a,a.return,ze)}}}else if(xe.tag===6){if(be===null)try{xe.stateNode.nodeValue=Y?"":xe.memoizedProps}catch(ze){Kt(a,a.return,ze)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===a)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===a)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===a)break e;be===xe&&(be=null),xe=xe.return}be===xe&&(be=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:Ei(u,a),os(a),v&4&&Kk(a);break;case 21:break;default:Ei(u,a),os(a)}}function os(a){var u=a.flags;if(u&2){try{e:{for(var m=a.return;m!==null;){if(qk(m)){var v=m;break e}m=m.return}throw Error(n(160))}switch(v.tag){case 5:var w=v.stateNode;v.flags&32&&($n(w,""),v.flags&=-33);var C=Hk(a);xv(a,C,w);break;case 3:case 4:var _=v.stateNode.containerInfo,O=Hk(a);bv(a,O,_);break;default:throw Error(n(161))}}catch(B){Kt(a,a.return,B)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function WM(a,u,m){Ie=a,Zk(a)}function Zk(a,u,m){for(var v=(a.mode&1)!==0;Ie!==null;){var w=Ie,C=w.child;if(w.tag===22&&v){var _=w.memoizedState!==null||Rh;if(!_){var O=w.alternate,B=O!==null&&O.memoizedState!==null||er;O=Rh;var Y=er;if(Rh=_,(er=B)&&!Y)for(Ie=w;Ie!==null;)_=Ie,B=_.child,_.tag===22&&_.memoizedState!==null?Yk(w):B!==null?(B.return=_,Ie=B):Yk(w);for(;C!==null;)Ie=C,Zk(C),C=C.sibling;Ie=w,Rh=O,er=Y}Jk(a)}else(w.subtreeFlags&8772)!==0&&C!==null?(C.return=w,Ie=C):Jk(a)}}function Jk(a){for(;Ie!==null;){var u=Ie;if((u.flags&8772)!==0){var m=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:er||Ah(5,u);break;case 1:var v=u.stateNode;if(u.flags&4&&!er)if(m===null)v.componentDidMount();else{var w=u.elementType===u.type?m.memoizedProps:Si(u.type,m.memoizedProps);v.componentDidUpdate(w,m.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&Q1(u,C,v);break;case 3:var _=u.updateQueue;if(_!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}Q1(u,_,m)}break;case 5:var O=u.stateNode;if(m===null&&u.flags&4){m=O;var B=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&m.focus();break;case"img":B.src&&(m.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Y=u.alternate;if(Y!==null){var be=Y.memoizedState;if(be!==null){var xe=be.dehydrated;xe!==null&&Xl(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}er||u.flags&512&&yv(u)}catch(ve){Kt(u,u.return,ve)}}if(u===a){Ie=null;break}if(m=u.sibling,m!==null){m.return=u.return,Ie=m;break}Ie=u.return}}function Qk(a){for(;Ie!==null;){var u=Ie;if(u===a){Ie=null;break}var m=u.sibling;if(m!==null){m.return=u.return,Ie=m;break}Ie=u.return}}function Yk(a){for(;Ie!==null;){var u=Ie;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{Ah(4,u)}catch(B){Kt(u,m,B)}break;case 1:var v=u.stateNode;if(typeof v.componentDidMount=="function"){var w=u.return;try{v.componentDidMount()}catch(B){Kt(u,w,B)}}var C=u.return;try{yv(u)}catch(B){Kt(u,C,B)}break;case 5:var _=u.return;try{yv(u)}catch(B){Kt(u,_,B)}}}catch(B){Kt(u,u.return,B)}if(u===a){Ie=null;break}var O=u.sibling;if(O!==null){O.return=u.return,Ie=O;break}Ie=u.return}}var KM=Math.ceil,Ih=j.ReactCurrentDispatcher,wv=j.ReactCurrentOwner,si=j.ReactCurrentBatchConfig,yt=0,Mn=null,fn=null,Wn=0,zr=0,Mc=jo(0),Cn=0,ku=null,Ea=0,Oh=0,kv=0,Su=null,wr=null,Sv=0,Dc=1/0,Vs=null,Mh=!1,Cv=null,Oo=null,Dh=!1,Mo=null,Lh=0,Cu=0,Ev=null,Fh=-1,Uh=0;function cr(){return(yt&6)!==0?en():Fh!==-1?Fh:Fh=en()}function Do(a){return(a.mode&1)===0?1:(yt&2)!==0&&Wn!==0?Wn&-Wn:_M.transition!==null?(Uh===0&&(Uh=Hw()),Uh):(a=Nt,a!==0||(a=window.event,a=a===void 0?16:e1(a.type)),a)}function Ti(a,u,m,v){if(50<Cu)throw Cu=0,Ev=null,Error(n(185));Gl(a,m,v),((yt&2)===0||a!==Mn)&&(a===Mn&&((yt&2)===0&&(Oh|=m),Cn===4&&Lo(a,Wn)),kr(a,v),m===1&&yt===0&&(u.mode&1)===0&&(Dc=en()+500,fh&&_o()))}function kr(a,u){var m=a.callbackNode;_5(a,u);var v=Gd(a,a===Mn?Wn:0);if(v===0)m!==null&&$w(m),a.callbackNode=null,a.callbackPriority=0;else if(u=v&-v,a.callbackPriority!==u){if(m!=null&&$w(m),u===1)a.tag===0?PM(eS.bind(null,a)):U1(eS.bind(null,a)),EM(function(){(yt&6)===0&&_o()}),m=null;else{switch(Ww(v)){case 1:m=ig;break;case 4:m=Vw;break;case 16:m=qd;break;case 536870912:m=qw;break;default:m=qd}m=cS(m,Xk.bind(null,a))}a.callbackPriority=u,a.callbackNode=m}}function Xk(a,u){if(Fh=-1,Uh=0,(yt&6)!==0)throw Error(n(327));var m=a.callbackNode;if(Lc()&&a.callbackNode!==m)return null;var v=Gd(a,a===Mn?Wn:0);if(v===0)return null;if((v&30)!==0||(v&a.expiredLanes)!==0||u)u=Bh(a,v);else{u=v;var w=yt;yt|=2;var C=nS();(Mn!==a||Wn!==u)&&(Vs=null,Dc=en()+500,Na(a,u));do try{JM();break}catch(O){tS(a,O)}while(!0);Vg(),Ih.current=C,yt=w,fn!==null?u=0:(Mn=null,Wn=0,u=Cn)}if(u!==0){if(u===2&&(w=sg(a),w!==0&&(v=w,u=Tv(a,w))),u===1)throw m=ku,Na(a,0),Lo(a,v),kr(a,en()),m;if(u===6)Lo(a,v);else{if(w=a.current.alternate,(v&30)===0&&!GM(w)&&(u=Bh(a,v),u===2&&(C=sg(a),C!==0&&(v=C,u=Tv(a,C))),u===1))throw m=ku,Na(a,0),Lo(a,v),kr(a,en()),m;switch(a.finishedWork=w,a.finishedLanes=v,u){case 0:case 1:throw Error(n(345));case 2:ja(a,wr,Vs);break;case 3:if(Lo(a,v),(v&130023424)===v&&(u=Sv+500-en(),10<u)){if(Gd(a,0)!==0)break;if(w=a.suspendedLanes,(w&v)!==v){cr(),a.pingedLanes|=a.suspendedLanes&w;break}a.timeoutHandle=Ag(ja.bind(null,a,wr,Vs),u);break}ja(a,wr,Vs);break;case 4:if(Lo(a,v),(v&4194240)===v)break;for(u=a.eventTimes,w=-1;0<v;){var _=31-xi(v);C=1<<_,_=u[_],_>w&&(w=_),v&=~C}if(v=w,v=en()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*KM(v/1960))-v,10<v){a.timeoutHandle=Ag(ja.bind(null,a,wr,Vs),v);break}ja(a,wr,Vs);break;case 5:ja(a,wr,Vs);break;default:throw Error(n(329))}}}return kr(a,en()),a.callbackNode===m?Xk.bind(null,a):null}function Tv(a,u){var m=Su;return a.current.memoizedState.isDehydrated&&(Na(a,u).flags|=256),a=Bh(a,u),a!==2&&(u=wr,wr=m,u!==null&&Nv(u)),a}function Nv(a){wr===null?wr=a:wr.push.apply(wr,a)}function GM(a){for(var u=a;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var v=0;v<m.length;v++){var w=m[v],C=w.getSnapshot;w=w.value;try{if(!wi(C(),w))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Lo(a,u){for(u&=~kv,u&=~Oh,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var m=31-xi(u),v=1<<m;a[m]=-1,u&=~v}}function eS(a){if((yt&6)!==0)throw Error(n(327));Lc();var u=Gd(a,0);if((u&1)===0)return kr(a,en()),null;var m=Bh(a,u);if(a.tag!==0&&m===2){var v=sg(a);v!==0&&(u=v,m=Tv(a,v))}if(m===1)throw m=ku,Na(a,0),Lo(a,u),kr(a,en()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,ja(a,wr,Vs),kr(a,en()),null}function jv(a,u){var m=yt;yt|=1;try{return a(u)}finally{yt=m,yt===0&&(Dc=en()+500,fh&&_o())}}function Ta(a){Mo!==null&&Mo.tag===0&&(yt&6)===0&&Lc();var u=yt;yt|=1;var m=si.transition,v=Nt;try{if(si.transition=null,Nt=1,a)return a()}finally{Nt=v,si.transition=m,yt=u,(yt&6)===0&&_o()}}function Pv(){zr=Mc.current,Ft(Mc)}function Na(a,u){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,CM(m)),fn!==null)for(m=fn.return;m!==null;){var v=m;switch(Fg(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&dh();break;case 3:Ac(),Ft(yr),Ft(Qn),Qg();break;case 5:Zg(v);break;case 4:Ac();break;case 13:Ft(Vt);break;case 19:Ft(Vt);break;case 10:qg(v.type._context);break;case 22:case 23:Pv()}m=m.return}if(Mn=a,fn=a=Fo(a.current,null),Wn=zr=u,Cn=0,ku=null,kv=Oh=Ea=0,wr=Su=null,ka!==null){for(u=0;u<ka.length;u++)if(m=ka[u],v=m.interleaved,v!==null){m.interleaved=null;var w=v.next,C=m.pending;if(C!==null){var _=C.next;C.next=w,v.next=_}m.pending=v}ka=null}return a}function tS(a,u){do{var m=fn;try{if(Vg(),Sh.current=Nh,Ch){for(var v=qt.memoizedState;v!==null;){var w=v.queue;w!==null&&(w.pending=null),v=v.next}Ch=!1}if(Ca=0,On=Sn=qt=null,gu=!1,vu=0,wv.current=null,m===null||m.return===null){Cn=1,ku=u,fn=null;break}e:{var C=a,_=m.return,O=m,B=u;if(u=Wn,O.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Y=B,be=O,xe=be.tag;if((be.mode&1)===0&&(xe===0||xe===11||xe===15)){var ve=be.alternate;ve?(be.updateQueue=ve.updateQueue,be.memoizedState=ve.memoizedState,be.lanes=ve.lanes):(be.updateQueue=null,be.memoizedState=null)}var Re=Tk(_);if(Re!==null){Re.flags&=-257,Nk(Re,_,O,C,u),Re.mode&1&&Ek(C,Y,u),u=Re,B=Y;var Me=u.updateQueue;if(Me===null){var ze=new Set;ze.add(B),u.updateQueue=ze}else Me.add(B);break e}else{if((u&1)===0){Ek(C,Y,u),_v();break e}B=Error(n(426))}}else if(Ut&&O.mode&1){var tn=Tk(_);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),Nk(tn,_,O,C,u),zg(Ic(B,O));break e}}C=B=Ic(B,O),Cn!==4&&(Cn=2),Su===null?Su=[C]:Su.push(C),C=_;do{switch(C.tag){case 3:C.flags|=65536,u&=-u,C.lanes|=u;var H=Sk(C,B,u);J1(C,H);break e;case 1:O=B;var $=C.type,Z=C.stateNode;if((C.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Oo===null||!Oo.has(Z)))){C.flags|=65536,u&=-u,C.lanes|=u;var Ee=Ck(C,O,u);J1(C,Ee);break e}}C=C.return}while(C!==null)}iS(m)}catch(Ve){u=Ve,fn===m&&m!==null&&(fn=m=m.return);continue}break}while(!0)}function nS(){var a=Ih.current;return Ih.current=Nh,a===null?Nh:a}function _v(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Mn===null||(Ea&268435455)===0&&(Oh&268435455)===0||Lo(Mn,Wn)}function Bh(a,u){var m=yt;yt|=2;var v=nS();(Mn!==a||Wn!==u)&&(Vs=null,Na(a,u));do try{ZM();break}catch(w){tS(a,w)}while(!0);if(Vg(),yt=m,Ih.current=v,fn!==null)throw Error(n(261));return Mn=null,Wn=0,Cn}function ZM(){for(;fn!==null;)rS(fn)}function JM(){for(;fn!==null&&!w5();)rS(fn)}function rS(a){var u=aS(a.alternate,a,zr);a.memoizedProps=a.pendingProps,u===null?iS(a):fn=u,wv.current=null}function iS(a){var u=a;do{var m=u.alternate;if(a=u.return,(u.flags&32768)===0){if(m=$M(m,u,zr),m!==null){fn=m;return}}else{if(m=VM(m,u),m!==null){m.flags&=32767,fn=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Cn=6,fn=null;return}}if(u=u.sibling,u!==null){fn=u;return}fn=u=a}while(u!==null);Cn===0&&(Cn=5)}function ja(a,u,m){var v=Nt,w=si.transition;try{si.transition=null,Nt=1,QM(a,u,m,v)}finally{si.transition=w,Nt=v}return null}function QM(a,u,m,v){do Lc();while(Mo!==null);if((yt&6)!==0)throw Error(n(327));m=a.finishedWork;var w=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var C=m.lanes|m.childLanes;if(R5(a,C),a===Mn&&(fn=Mn=null,Wn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Dh||(Dh=!0,cS(qd,function(){return Lc(),null})),C=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||C){C=si.transition,si.transition=null;var _=Nt;Nt=1;var O=yt;yt|=4,wv.current=null,HM(a,m),Gk(m,a),vM(_g),Qd=!!Pg,_g=Pg=null,a.current=m,WM(m),k5(),yt=O,Nt=_,si.transition=C}else a.current=m;if(Dh&&(Dh=!1,Mo=a,Lh=w),C=a.pendingLanes,C===0&&(Oo=null),E5(m.stateNode),kr(a,en()),u!==null)for(v=a.onRecoverableError,m=0;m<u.length;m++)w=u[m],v(w.value,{componentStack:w.stack,digest:w.digest});if(Mh)throw Mh=!1,a=Cv,Cv=null,a;return(Lh&1)!==0&&a.tag!==0&&Lc(),C=a.pendingLanes,(C&1)!==0?a===Ev?Cu++:(Cu=0,Ev=a):Cu=0,_o(),null}function Lc(){if(Mo!==null){var a=Ww(Lh),u=si.transition,m=Nt;try{if(si.transition=null,Nt=16>a?16:a,Mo===null)var v=!1;else{if(a=Mo,Mo=null,Lh=0,(yt&6)!==0)throw Error(n(331));var w=yt;for(yt|=4,Ie=a.current;Ie!==null;){var C=Ie,_=C.child;if((Ie.flags&16)!==0){var O=C.deletions;if(O!==null){for(var B=0;B<O.length;B++){var Y=O[B];for(Ie=Y;Ie!==null;){var be=Ie;switch(be.tag){case 0:case 11:case 15:wu(8,be,C)}var xe=be.child;if(xe!==null)xe.return=be,Ie=xe;else for(;Ie!==null;){be=Ie;var ve=be.sibling,Re=be.return;if(Vk(be),be===Y){Ie=null;break}if(ve!==null){ve.return=Re,Ie=ve;break}Ie=Re}}}var Me=C.alternate;if(Me!==null){var ze=Me.child;if(ze!==null){Me.child=null;do{var tn=ze.sibling;ze.sibling=null,ze=tn}while(ze!==null)}}Ie=C}}if((C.subtreeFlags&2064)!==0&&_!==null)_.return=C,Ie=_;else e:for(;Ie!==null;){if(C=Ie,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:wu(9,C,C.return)}var H=C.sibling;if(H!==null){H.return=C.return,Ie=H;break e}Ie=C.return}}var $=a.current;for(Ie=$;Ie!==null;){_=Ie;var Z=_.child;if((_.subtreeFlags&2064)!==0&&Z!==null)Z.return=_,Ie=Z;else e:for(_=$;Ie!==null;){if(O=Ie,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Ah(9,O)}}catch(Ve){Kt(O,O.return,Ve)}if(O===_){Ie=null;break e}var Ee=O.sibling;if(Ee!==null){Ee.return=O.return,Ie=Ee;break e}Ie=O.return}}if(yt=w,_o(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(Hd,a)}catch{}v=!0}return v}finally{Nt=m,si.transition=u}}return!1}function sS(a,u,m){u=Ic(m,u),u=Sk(a,u,1),a=Ao(a,u,1),u=cr(),a!==null&&(Gl(a,1,u),kr(a,u))}function Kt(a,u,m){if(a.tag===3)sS(a,a,m);else for(;u!==null;){if(u.tag===3){sS(u,a,m);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Oo===null||!Oo.has(v))){a=Ic(m,a),a=Ck(u,a,1),u=Ao(u,a,1),a=cr(),u!==null&&(Gl(u,1,a),kr(u,a));break}}u=u.return}}function YM(a,u,m){var v=a.pingCache;v!==null&&v.delete(u),u=cr(),a.pingedLanes|=a.suspendedLanes&m,Mn===a&&(Wn&m)===m&&(Cn===4||Cn===3&&(Wn&130023424)===Wn&&500>en()-Sv?Na(a,0):kv|=m),kr(a,u)}function oS(a,u){u===0&&((a.mode&1)===0?u=1:(u=Kd,Kd<<=1,(Kd&130023424)===0&&(Kd=4194304)));var m=cr();a=Bs(a,u),a!==null&&(Gl(a,u,m),kr(a,m))}function XM(a){var u=a.memoizedState,m=0;u!==null&&(m=u.retryLane),oS(a,m)}function eD(a,u){var m=0;switch(a.tag){case 13:var v=a.stateNode,w=a.memoizedState;w!==null&&(m=w.retryLane);break;case 19:v=a.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(u),oS(a,m)}var aS;aS=function(a,u,m){if(a!==null)if(a.memoizedProps!==u.pendingProps||yr.current)xr=!0;else{if((a.lanes&m)===0&&(u.flags&128)===0)return xr=!1,zM(a,u,m);xr=(a.flags&131072)!==0}else xr=!1,Ut&&(u.flags&1048576)!==0&&B1(u,ph,u.index);switch(u.lanes=0,u.tag){case 2:var v=u.type;_h(a,u),a=u.pendingProps;var w=Ec(u,Qn.current);Rc(u,m),w=ev(null,u,v,a,w,m);var C=tv();return u.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,br(v)?(C=!0,hh(u)):C=!1,u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Kg(u),w.updater=jh,u.stateNode=w,w._reactInternals=u,av(u,v,a,m),u=dv(null,u,v,!0,C,m)):(u.tag=0,Ut&&C&&Lg(u),ar(null,u,w,m),u=u.child),u;case 16:v=u.elementType;e:{switch(_h(a,u),a=u.pendingProps,w=v._init,v=w(v._payload),u.type=v,w=u.tag=nD(v),a=Si(v,a),w){case 0:u=uv(null,u,v,a,m);break e;case 1:u=Ik(null,u,v,a,m);break e;case 11:u=jk(null,u,v,a,m);break e;case 14:u=Pk(null,u,v,Si(v.type,a),m);break e}throw Error(n(306,v,""))}return u;case 0:return v=u.type,w=u.pendingProps,w=u.elementType===v?w:Si(v,w),uv(a,u,v,w,m);case 1:return v=u.type,w=u.pendingProps,w=u.elementType===v?w:Si(v,w),Ik(a,u,v,w,m);case 3:e:{if(Ok(u),a===null)throw Error(n(387));v=u.pendingProps,C=u.memoizedState,w=C.element,Z1(a,u),wh(u,v,null,m);var _=u.memoizedState;if(v=_.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){w=Ic(Error(n(423)),u),u=Mk(a,u,v,m,w);break e}else if(v!==w){w=Ic(Error(n(424)),u),u=Mk(a,u,v,m,w);break e}else for(Br=No(u.stateNode.containerInfo.firstChild),Ur=u,Ut=!0,ki=null,m=K1(u,null,v,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(jc(),v===w){u=$s(a,u,m);break e}ar(a,u,v,m)}u=u.child}return u;case 5:return Y1(u),a===null&&Bg(u),v=u.type,w=u.pendingProps,C=a!==null?a.memoizedProps:null,_=w.children,Rg(v,w)?_=null:C!==null&&Rg(v,C)&&(u.flags|=32),Ak(a,u),ar(a,u,_,m),u.child;case 6:return a===null&&Bg(u),null;case 13:return Dk(a,u,m);case 4:return Gg(u,u.stateNode.containerInfo),v=u.pendingProps,a===null?u.child=Pc(u,null,v,m):ar(a,u,v,m),u.child;case 11:return v=u.type,w=u.pendingProps,w=u.elementType===v?w:Si(v,w),jk(a,u,v,w,m);case 7:return ar(a,u,u.pendingProps,m),u.child;case 8:return ar(a,u,u.pendingProps.children,m),u.child;case 12:return ar(a,u,u.pendingProps.children,m),u.child;case 10:e:{if(v=u.type._context,w=u.pendingProps,C=u.memoizedProps,_=w.value,Rt(yh,v._currentValue),v._currentValue=_,C!==null)if(wi(C.value,_)){if(C.children===w.children&&!yr.current){u=$s(a,u,m);break e}}else for(C=u.child,C!==null&&(C.return=u);C!==null;){var O=C.dependencies;if(O!==null){_=C.child;for(var B=O.firstContext;B!==null;){if(B.context===v){if(C.tag===1){B=zs(-1,m&-m),B.tag=2;var Y=C.updateQueue;if(Y!==null){Y=Y.shared;var be=Y.pending;be===null?B.next=B:(B.next=be.next,be.next=B),Y.pending=B}}C.lanes|=m,B=C.alternate,B!==null&&(B.lanes|=m),Hg(C.return,m,u),O.lanes|=m;break}B=B.next}}else if(C.tag===10)_=C.type===u.type?null:C.child;else if(C.tag===18){if(_=C.return,_===null)throw Error(n(341));_.lanes|=m,O=_.alternate,O!==null&&(O.lanes|=m),Hg(_,m,u),_=C.sibling}else _=C.child;if(_!==null)_.return=C;else for(_=C;_!==null;){if(_===u){_=null;break}if(C=_.sibling,C!==null){C.return=_.return,_=C;break}_=_.return}C=_}ar(a,u,w.children,m),u=u.child}return u;case 9:return w=u.type,v=u.pendingProps.children,Rc(u,m),w=ri(w),v=v(w),u.flags|=1,ar(a,u,v,m),u.child;case 14:return v=u.type,w=Si(v,u.pendingProps),w=Si(v.type,w),Pk(a,u,v,w,m);case 15:return _k(a,u,u.type,u.pendingProps,m);case 17:return v=u.type,w=u.pendingProps,w=u.elementType===v?w:Si(v,w),_h(a,u),u.tag=1,br(v)?(a=!0,hh(u)):a=!1,Rc(u,m),wk(u,v,w),av(u,v,w,m),dv(null,u,v,!0,a,m);case 19:return Fk(a,u,m);case 22:return Rk(a,u,m)}throw Error(n(156,u.tag))};function cS(a,u){return zw(a,u)}function tD(a,u,m,v){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(a,u,m,v){return new tD(a,u,m,v)}function Rv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function nD(a){if(typeof a=="function")return Rv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===we)return 14}return 2}function Fo(a,u){var m=a.alternate;return m===null?(m=oi(a.tag,u,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=u,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,u=a.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function zh(a,u,m,v,w,C){var _=2;if(v=a,typeof a=="function")Rv(a)&&(_=1);else if(typeof a=="string")_=5;else e:switch(a){case A:return Pa(m.children,w,C,u);case I:_=8,w|=8;break;case D:return a=oi(12,m,u,w|2),a.elementType=D,a.lanes=C,a;case te:return a=oi(13,m,u,w),a.elementType=te,a.lanes=C,a;case J:return a=oi(19,m,u,w),a.elementType=J,a.lanes=C,a;case me:return $h(m,w,C,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:_=10;break e;case q:_=9;break e;case V:_=11;break e;case we:_=14;break e;case X:_=16,v=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return u=oi(_,m,u,w),u.elementType=a,u.type=v,u.lanes=C,u}function Pa(a,u,m,v){return a=oi(7,a,v,u),a.lanes=m,a}function $h(a,u,m,v){return a=oi(22,a,v,u),a.elementType=me,a.lanes=m,a.stateNode={isHidden:!1},a}function Av(a,u,m){return a=oi(6,a,null,u),a.lanes=m,a}function Iv(a,u,m){return u=oi(4,a.children!==null?a.children:[],a.key,u),u.lanes=m,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function rD(a,u,m,v,w){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=og(0),this.expirationTimes=og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=og(0),this.identifierPrefix=v,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Ov(a,u,m,v,w,C,_,O,B){return a=new rD(a,u,m,O,B),u===1?(u=1,C===!0&&(u|=8)):u=0,C=oi(3,null,null,u),a.current=C,C.stateNode=a,C.memoizedState={element:v,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kg(C),a}function iD(a,u,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:v==null?null:""+v,children:a,containerInfo:u,implementation:m}}function lS(a){if(!a)return Po;a=a._reactInternals;e:{if(va(a)!==a||a.tag!==1)throw Error(n(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(br(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(br(m))return L1(a,m,u)}return u}function uS(a,u,m,v,w,C,_,O,B){return a=Ov(m,v,!0,a,w,C,_,O,B),a.context=lS(null),m=a.current,v=cr(),w=Do(m),C=zs(v,w),C.callback=u??null,Ao(m,C,w),a.current.lanes=w,Gl(a,w,v),kr(a,v),a}function Vh(a,u,m,v){var w=u.current,C=cr(),_=Do(w);return m=lS(m),u.context===null?u.context=m:u.pendingContext=m,u=zs(C,_),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=Ao(w,u,_),a!==null&&(Ti(a,w,_,C),xh(a,w,_)),_}function qh(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function dS(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<u?m:u}}function Mv(a,u){dS(a,u),(a=a.alternate)&&dS(a,u)}function sD(){return null}var hS=typeof reportError=="function"?reportError:function(a){console.error(a)};function Dv(a){this._internalRoot=a}Hh.prototype.render=Dv.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(n(409));Vh(a,u,null,null)},Hh.prototype.unmount=Dv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;Ta(function(){Vh(null,a,null,null)}),u[Ds]=null}};function Hh(a){this._internalRoot=a}Hh.prototype.unstable_scheduleHydration=function(a){if(a){var u=Zw();a={blockedOn:null,target:a,priority:u};for(var m=0;m<Co.length&&u!==0&&u<Co[m].priority;m++);Co.splice(m,0,a),m===0&&Yw(a)}};function Lv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Wh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function fS(){}function oD(a,u,m,v,w){if(w){if(typeof v=="function"){var C=v;v=function(){var Y=qh(_);C.call(Y)}}var _=uS(u,v,a,0,null,!1,!1,"",fS);return a._reactRootContainer=_,a[Ds]=_.current,cu(a.nodeType===8?a.parentNode:a),Ta(),_}for(;w=a.lastChild;)a.removeChild(w);if(typeof v=="function"){var O=v;v=function(){var Y=qh(B);O.call(Y)}}var B=Ov(a,0,!1,null,null,!1,!1,"",fS);return a._reactRootContainer=B,a[Ds]=B.current,cu(a.nodeType===8?a.parentNode:a),Ta(function(){Vh(u,B,m,v)}),B}function Kh(a,u,m,v,w){var C=m._reactRootContainer;if(C){var _=C;if(typeof w=="function"){var O=w;w=function(){var B=qh(_);O.call(B)}}Vh(u,_,a,w)}else _=oD(m,u,a,w,v);return qh(_)}Kw=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var m=Kl(u.pendingLanes);m!==0&&(ag(u,m|1),kr(u,en()),(yt&6)===0&&(Dc=en()+500,_o()))}break;case 13:Ta(function(){var v=Bs(a,1);if(v!==null){var w=cr();Ti(v,a,1,w)}}),Mv(a,1)}},cg=function(a){if(a.tag===13){var u=Bs(a,134217728);if(u!==null){var m=cr();Ti(u,a,134217728,m)}Mv(a,134217728)}},Gw=function(a){if(a.tag===13){var u=Do(a),m=Bs(a,u);if(m!==null){var v=cr();Ti(m,a,u,v)}Mv(a,u)}},Zw=function(){return Nt},Jw=function(a,u){var m=Nt;try{return Nt=a,u()}finally{Nt=m}},ql=function(a,u,m){switch(u){case"input":if(or(a,m),u=m.name,m.type==="radio"&&u!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var v=m[u];if(v!==a&&v.form===a.form){var w=uh(v);if(!w)throw Error(n(90));ct(v),or(v,w)}}}break;case"textarea":Ne(a,m);break;case"select":u=m.value,u!=null&&W(a,!!m.multiple,u,!1)}},kn=jv,Jn=Ta;var aD={usingClientEntryPoint:!1,Events:[du,Sc,uh,et,Xt,jv]},Eu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cD={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Uw(a),a===null?null:a.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||sD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Hd=Gh.inject(cD),ns=Gh}catch{}}return Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aD,Sr.createPortal=function(a,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lv(u))throw Error(n(200));return iD(a,u,null,m)},Sr.createRoot=function(a,u){if(!Lv(a))throw Error(n(299));var m=!1,v="",w=hS;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),u=Ov(a,1,!1,null,null,m,!1,v,w),a[Ds]=u.current,cu(a.nodeType===8?a.parentNode:a),new Dv(u)},Sr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Uw(u),a=a===null?null:a.stateNode,a},Sr.flushSync=function(a){return Ta(a)},Sr.hydrate=function(a,u,m){if(!Wh(u))throw Error(n(200));return Kh(null,a,u,!0,m)},Sr.hydrateRoot=function(a,u,m){if(!Lv(a))throw Error(n(405));var v=m!=null&&m.hydratedSources||null,w=!1,C="",_=hS;if(m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onRecoverableError!==void 0&&(_=m.onRecoverableError)),u=uS(u,null,a,1,m??null,w,!1,C,_),a[Ds]=u.current,cu(a),v)for(a=0;a<v.length;a++)m=v[a],w=m._getVersion,w=w(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,w]:u.mutableSourceEagerHydrationData.push(m,w);return new Hh(u)},Sr.render=function(a,u,m){if(!Wh(u))throw Error(n(200));return Kh(null,a,u,!1,m)},Sr.unmountComponentAtNode=function(a){if(!Wh(a))throw Error(n(40));return a._reactRootContainer?(Ta(function(){Kh(null,null,a,!1,function(){a._reactRootContainer=null,a[Ds]=null})}),!0):!1},Sr.unstable_batchedUpdates=jv,Sr.unstable_renderSubtreeIntoContainer=function(a,u,m,v){if(!Wh(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Kh(a,u,m,!1,v)},Sr.version="18.3.1-next-f1338f8080-20240426",Sr}var wS;function jN(){if(wS)return Bv.exports;wS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Bv.exports=gD(),Bv.exports}var kS;function vD(){if(kS)return Zh;kS=1;var e=jN();return Zh.createRoot=e.createRoot,Zh.hydrateRoot=e.hydrateRoot,Zh}var yD=vD();const bD=Tb(yD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SS="popstate";function xD(e={}){function t(r,i){let{pathname:s,search:o,hash:l}=r.location;return Hy("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ju(i)}return kD(t,n,null,e)}function zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wD(){return Math.random().toString(36).substring(2,10)}function CS(e,t){return{usr:e.state,key:e.key,idx:t}}function Hy(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Cl(t):t,state:n,key:t&&t.key||r||wD()}}function Ju({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Cl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function kD(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l="POP",d=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let S=f(),E=S==null?null:S-h;h=S,d&&d({action:l,location:x.location,delta:E})}function y(S,E){l="PUSH";let T=Hy(x.location,S,E);h=f()+1;let P=CS(T,h),j=x.createHref(T);try{o.pushState(P,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(j)}s&&d&&d({action:l,location:x.location,delta:1})}function b(S,E){l="REPLACE";let T=Hy(x.location,S,E);h=f();let P=CS(T,h),j=x.createHref(T);o.replaceState(P,"",j),s&&d&&d({action:l,location:x.location,delta:0})}function k(S){return SD(S)}let x={get action(){return l},get location(){return e(i,o)},listen(S){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(SS,p),d=S,()=>{i.removeEventListener(SS,p),d=null}},createHref(S){return t(i,S)},createURL:k,encodeLocation(S){let E=k(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:b,go(S){return o.go(S)}};return x}function SD(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Ju(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function PN(e,t,n="/"){return CD(e,t,n,!1)}function CD(e,t,n,r){let i=typeof t=="string"?Cl(t):t,s=io(i.pathname||"/",n);if(s==null)return null;let o=_N(e);ED(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=DD(s);l=OD(o[d],h,r)}return l}function _N(e,t=[],n=[],r="",i=!1){let s=(o,l,d=i,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&d)return;zt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=eo([r,f.relativePath]),y=n.concat(f);o.children&&o.children.length>0&&(zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),_N(o.children,t,y,p,d)),!(o.path==null&&!o.index)&&t.push({path:p,score:AD(p,o.index),routesMeta:y})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))s(o,l);else for(let d of RN(o.path))s(o,l,!0,d)}),t}function RN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=RN(r.join("/")),l=[];return l.push(...o.map(d=>d===""?s:[s,d].join("/"))),i&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function ED(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ID(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var TD=/^:[\w-]+$/,ND=3,jD=2,PD=1,_D=10,RD=-2,ES=e=>e==="*";function AD(e,t){let n=e.split("/"),r=n.length;return n.some(ES)&&(r+=RD),t&&(r+=jD),n.filter(i=>!ES(i)).reduce((i,s)=>i+(TD.test(s)?ND:s===""?PD:_D),r)}function ID(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function OD(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=Jf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),y=d.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=Jf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:eo([s,p.pathname]),pathnameBase:BD(eo([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=eo([s,p.pathnameBase]))}return o}function Jf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=MD(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,{paramName:f,isOptional:p},y)=>{if(f==="*"){let k=l[y]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const b=l[y];return p&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:e}}function MD(e,t=!1,n=!0){hi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function DD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function io(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function LD(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Cl(e):e;return{pathname:n?n.startsWith("/")?n:FD(n,t):t,search:zD(r),hash:$D(i)}}function FD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vv(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UD(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Nb(e){let t=UD(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function jb(e,t,n,r=!1){let i;typeof e=="string"?i=Cl(e):(i={...e},zt(!i.pathname||!i.pathname.includes("?"),Vv("?","pathname","search",i)),zt(!i.pathname||!i.pathname.includes("#"),Vv("#","pathname","hash",i)),zt(!i.search||!i.search.includes("#"),Vv("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}l=p>=0?t[p]:"/"}let d=LD(i,l),h=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var eo=e=>e.join("/").replace(/\/\/+/g,"/"),BD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$D=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var AN=["POST","PUT","PATCH","DELETE"];new Set(AN);var qD=["GET",...AN];new Set(qD);var El=g.createContext(null);El.displayName="DataRouter";var Gm=g.createContext(null);Gm.displayName="DataRouterState";g.createContext(!1);var IN=g.createContext({isTransitioning:!1});IN.displayName="ViewTransition";var HD=g.createContext(new Map);HD.displayName="Fetchers";var WD=g.createContext(null);WD.displayName="Await";var Ki=g.createContext(null);Ki.displayName="Navigation";var yd=g.createContext(null);yd.displayName="Location";var Gi=g.createContext({outlet:null,matches:[],isDataRoute:!1});Gi.displayName="Route";var Pb=g.createContext(null);Pb.displayName="RouteError";function KD(e,{relative:t}={}){zt(Tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(Ki),{hash:i,pathname:s,search:o}=bd(e,{relative:t}),l=s;return n!=="/"&&(l=s==="/"?n:eo([n,s])),r.createHref({pathname:l,search:o,hash:i})}function Tl(){return g.useContext(yd)!=null}function js(){return zt(Tl(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(yd).location}var ON="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function MN(e){g.useContext(Ki).static||g.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=g.useContext(Gi);return e?o4():GD()}function GD(){zt(Tl(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(El),{basename:t,navigator:n}=g.useContext(Ki),{matches:r}=g.useContext(Gi),{pathname:i}=js(),s=JSON.stringify(Nb(r)),o=g.useRef(!1);return MN(()=>{o.current=!0}),g.useCallback((d,h={})=>{if(hi(o.current,ON),!o.current)return;if(typeof d=="number"){n.go(d);return}let f=jb(d,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:eo([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,s,i,e])}g.createContext(null);function Zm(){let{matches:e}=g.useContext(Gi),t=e[e.length-1];return t?t.params:{}}function bd(e,{relative:t}={}){let{matches:n}=g.useContext(Gi),{pathname:r}=js(),i=JSON.stringify(Nb(n));return g.useMemo(()=>jb(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function ZD(e,t){return DN(e,t)}function DN(e,t,n,r,i){zt(Tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=g.useContext(Ki),{matches:o}=g.useContext(Gi),l=o[o.length-1],d=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let T=p&&p.path||"";LN(h,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=js(),b;if(t){let T=typeof t=="string"?Cl(t):t;zt(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),b=T}else b=y;let k=b.pathname||"/",x=k;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+k.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=PN(e,{pathname:x});hi(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),hi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=e4(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:eo([f,s.encodeLocation?s.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:eo([f,s.encodeLocation?s.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),o,n,r,i);return t&&E?g.createElement(yd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},E):E}function JD(){let e=s4(),t=VD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:i},n):null,o)}var QD=g.createElement(JD,null),YD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Gi.Provider,{value:this.props.routeContext},g.createElement(Pb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XD({routeContext:e,match:t,children:n}){let r=g.useContext(El);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Gi.Provider,{value:e},n)}function e4(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n?.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);zt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,d=-1;if(n)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:y}=n,b=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||b){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,f,p)=>{let y,b=!1,k=null,x=null;n&&(y=o&&f.route.id?o[f.route.id]:void 0,k=f.route.errorElement||QD,l&&(d<0&&p===0?(LN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):d===p&&(b=!0,x=f.route.hydrateFallbackElement||null)));let S=t.concat(s.slice(0,p+1)),E=()=>{let T;return y?T=k:b?T=x:f.route.Component?T=g.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=h,g.createElement(XD,{match:f,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(YD,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):E()},null)}function _b(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t4(e){let t=g.useContext(El);return zt(t,_b(e)),t}function n4(e){let t=g.useContext(Gm);return zt(t,_b(e)),t}function r4(e){let t=g.useContext(Gi);return zt(t,_b(e)),t}function Rb(e){let t=r4(e),n=t.matches[t.matches.length-1];return zt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function i4(){return Rb("useRouteId")}function s4(){let e=g.useContext(Pb),t=n4("useRouteError"),n=Rb("useRouteError");return e!==void 0?e:t.errors?.[n]}function o4(){let{router:e}=t4("useNavigate"),t=Rb("useNavigate"),n=g.useRef(!1);return MN(()=>{n.current=!0}),g.useCallback(async(i,s={})=>{hi(n.current,ON),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var TS={};function LN(e,t,n){!t&&!TS[e]&&(TS[e]=!0,hi(!1,n))}g.memo(a4);function a4({routes:e,future:t,state:n,unstable_onError:r}){return DN(e,void 0,n,r,t)}function FN({to:e,replace:t,state:n,relative:r}){zt(Tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=g.useContext(Ki);hi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(Gi),{pathname:o}=js(),l=_t(),d=jb(e,Nb(s),o,r==="path"),h=JSON.stringify(d);return g.useEffect(()=>{l(JSON.parse(h),{replace:t,state:n,relative:r})},[l,h,r,t,n]),null}function Et(e){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c4({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){zt(!Tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Cl(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=n,b=g.useMemo(()=>{let k=io(d,o);return k==null?null:{location:{pathname:k,search:h,hash:f,state:p,key:y},navigationType:r}},[o,d,h,f,p,y,r]);return hi(b!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:g.createElement(Ki.Provider,{value:l},g.createElement(yd.Provider,{children:t,value:b}))}function l4({children:e,location:t}){return ZD(Wy(e),t)}function Wy(e,t=[]){let n=[];return g.Children.forEach(e,(r,i)=>{if(!g.isValidElement(r))return;let s=[...t,i];if(r.type===g.Fragment){n.push.apply(n,Wy(r.props.children,s));return}zt(r.type===Et,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wy(r.props.children,s)),n.push(o)}),n}var kf="get",Sf="application/x-www-form-urlencoded";function Jm(e){return e!=null&&typeof e.tagName=="string"}function u4(e){return Jm(e)&&e.tagName.toLowerCase()==="button"}function d4(e){return Jm(e)&&e.tagName.toLowerCase()==="form"}function h4(e){return Jm(e)&&e.tagName.toLowerCase()==="input"}function f4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m4(e,t){return e.button===0&&(!t||t==="_self")&&!f4(e)}function Ky(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function p4(e,t){let n=Ky(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var Jh=null;function g4(){if(Jh===null)try{new FormData(document.createElement("form"),0),Jh=!1}catch{Jh=!0}return Jh}var v4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qv(e){return e!=null&&!v4.has(e)?(hi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sf}"`),null):e}function y4(e,t){let n,r,i,s,o;if(d4(e)){let l=e.getAttribute("action");r=l?io(l,t):null,n=e.getAttribute("method")||kf,i=qv(e.getAttribute("enctype"))||Sf,s=new FormData(e)}else if(u4(e)||h4(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||l.getAttribute("action");if(r=d?io(d,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||kf,i=qv(e.getAttribute("formenctype"))||qv(l.getAttribute("enctype"))||Sf,s=new FormData(l,e),!g4()){let{name:h,type:f,value:p}=e;if(f==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,p)}}else{if(Jm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=kf,r=null,i=Sf,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ab(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function b4(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&io(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function x4(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w4(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function k4(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await x4(s,n);return o.links?o.links():[]}return[]}));return T4(r.flat(1).filter(w4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function NS(e,t,n,r,i,s){let o=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,l=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return s==="assets"?t.filter((d,h)=>o(d,h)||l(d,h)):s==="data"?t.filter((d,h)=>{let f=r.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,h)||l(d,h))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function S4(e,t,{includeHydrateFallback:n}={}){return C4(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function C4(e){return[...new Set(e)]}function E4(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function T4(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(E4(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function UN(){let e=g.useContext(El);return Ab(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function N4(){let e=g.useContext(Gm);return Ab(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ib=g.createContext(void 0);Ib.displayName="FrameworkContext";function BN(){let e=g.useContext(Ib);return Ab(e,"You must render this element inside a <HydratedRouter> element"),e}function j4(e,t){let n=g.useContext(Ib),[r,i]=g.useState(!1),[s,o]=g.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=t,y=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let x=E=>{E.forEach(T=>{o(T.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),g.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let b=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,y,{}]:[s,y,{onFocus:Nu(l,b),onBlur:Nu(d,k),onMouseEnter:Nu(h,b),onMouseLeave:Nu(f,k),onTouchStart:Nu(p,b)}]:[!1,y,{}]}function Nu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function P4({page:e,...t}){let{router:n}=UN(),r=g.useMemo(()=>PN(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(R4,{page:e,matches:r,...t}):null}function _4(e){let{manifest:t,routeModules:n}=BN(),[r,i]=g.useState([]);return g.useEffect(()=>{let s=!1;return k4(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function R4({page:e,matches:t,...n}){let r=js(),{manifest:i,routeModules:s}=BN(),{basename:o}=UN(),{loaderData:l,matches:d}=N4(),h=g.useMemo(()=>NS(e,t,d,i,r,"data"),[e,t,d,i,r]),f=g.useMemo(()=>NS(e,t,d,i,r,"assets"),[e,t,d,i,r]),p=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,x=!1;if(t.forEach(E=>{let T=i.routes[E.route.id];!T||!T.hasLoader||(!h.some(P=>P.route.id===E.route.id)&&E.route.id in l&&s[E.route.id]?.shouldRevalidate||T.hasClientLoader?x=!0:k.add(E.route.id))}),k.size===0)return[];let S=b4(e,o,"data");return x&&k.size>0&&S.searchParams.set("_routes",t.filter(E=>k.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[o,l,r,i,h,t,e,s]),y=g.useMemo(()=>S4(f,i),[f,i]),b=_4(f);return g.createElement(g.Fragment,null,p.map(k=>g.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),y.map(k=>g.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),b.map(({key:k,link:x})=>g.createElement("link",{key:k,nonce:n.nonce,...x})))}function A4(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var zN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zN&&(window.__reactRouterVersion="7.9.4")}catch{}function I4({basename:e,children:t,window:n}){let r=g.useRef();r.current==null&&(r.current=xD({window:n,v5Compat:!0}));let i=r.current,[s,o]=g.useState({action:i.action,location:i.location}),l=g.useCallback(d=>{g.startTransition(()=>o(d))},[o]);return g.useLayoutEffect(()=>i.listen(l),[i,l]),g.createElement(c4,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var $N=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VN=g.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:l,target:d,to:h,preventScrollReset:f,viewTransition:p,...y},b){let{basename:k}=g.useContext(Ki),x=typeof h=="string"&&$N.test(h),S,E=!1;if(typeof h=="string"&&x&&(S=h,zN))try{let D=new URL(window.location.href),z=h.startsWith("//")?new URL(D.protocol+h):new URL(h),q=io(z.pathname,k);z.origin===D.origin&&q!=null?h=q+z.search+z.hash:E=!0}catch{hi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=KD(h,{relative:i}),[P,j,N]=j4(r,y),R=L4(h,{replace:o,state:l,target:d,preventScrollReset:f,relative:i,viewTransition:p});function A(D){t&&t(D),D.defaultPrevented||R(D)}let I=g.createElement("a",{...y,...N,href:S||T,onClick:E||s?t:A,ref:A4(b,j),target:d,"data-discover":!x&&n==="render"?"true":void 0});return P&&!x?g.createElement(g.Fragment,null,I,g.createElement(P4,{page:T})):I});VN.displayName="Link";var O4=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:l,children:d,...h},f){let p=bd(o,{relative:h.relative}),y=js(),b=g.useContext(Gm),{navigator:k,basename:x}=g.useContext(Ki),S=b!=null&&$4(p)&&l===!0,E=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,T=y.pathname,P=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),P=P?P.toLowerCase():null,E=E.toLowerCase()),P&&x&&(P=io(P,x)||P);const j=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let N=T===E||!i&&T.startsWith(E)&&T.charAt(j)==="/",R=P!=null&&(P===E||!i&&P.startsWith(E)&&P.charAt(E.length)==="/"),A={isActive:N,isPending:R,isTransitioning:S},I=N?t:void 0,D;typeof r=="function"?D=r(A):D=[r,N?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof s=="function"?s(A):s;return g.createElement(VN,{...h,"aria-current":I,className:D,ref:f,style:z,to:o,viewTransition:l},typeof d=="function"?d(A):d)});O4.displayName="NavLink";var M4=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=kf,action:l,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:p,...y},b)=>{let k=B4(),x=z4(l,{relative:h}),S=o.toLowerCase()==="get"?"get":"post",E=typeof l=="string"&&$N.test(l),T=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let j=P.nativeEvent.submitter,N=j?.getAttribute("formmethod")||o;k(j||P.currentTarget,{fetcherKey:t,method:N,navigate:n,replace:i,state:s,relative:h,preventScrollReset:f,viewTransition:p})};return g.createElement("form",{ref:b,method:S,action:x,onSubmit:r?d:T,...y,"data-discover":!E&&e==="render"?"true":void 0})});M4.displayName="Form";function D4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qN(e){let t=g.useContext(El);return zt(t,D4(e)),t}function L4(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=_t(),d=js(),h=bd(e,{relative:s});return g.useCallback(f=>{if(m4(f,t)){f.preventDefault();let p=n!==void 0?n:Ju(d)===Ju(h);l(e,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[d,l,h,n,r,t,e,i,s,o])}function HN(e){hi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(Ky(e)),n=g.useRef(!1),r=js(),i=g.useMemo(()=>p4(r.search,n.current?null:t.current),[r.search]),s=_t(),o=g.useCallback((l,d)=>{const h=Ky(typeof l=="function"?l(new URLSearchParams(i)):l);n.current=!0,s("?"+h,d)},[s,i]);return[i,o]}var F4=0,U4=()=>`__${String(++F4)}__`;function B4(){let{router:e}=qN("useSubmit"),{basename:t}=g.useContext(Ki),n=i4();return g.useCallback(async(r,i={})=>{let{action:s,method:o,encType:l,formData:d,body:h}=y4(r,t);if(i.navigate===!1){let f=i.fetcherKey||U4();await e.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function z4(e,{relative:t}={}){let{basename:n}=g.useContext(Ki),r=g.useContext(Gi);zt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...bd(e||".",{relative:t})},o=js();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search),d=l.getAll("index");if(d.some(f=>f==="")){l.delete("index"),d.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:eo([n,s.pathname])),Ju(s)}function $4(e,{relative:t}={}){let n=g.useContext(IN);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qN("useViewTransitionState"),i=bd(e,{relative:t});if(!n.isTransitioning)return!1;let s=io(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=io(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Jf(i.pathname,o)!=null||Jf(i.pathname,s)!=null}var xd=jN();const WN=Tb(xd);var Nl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},V4={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},q4=class{#e=V4;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Oa=new q4;function H4(e){setTimeout(e,0)}var Va=typeof window>"u"||"Deno"in globalThis;function ur(){}function W4(e,t){return typeof e=="function"?e(t):e}function Gy(e){return typeof e=="number"&&e>=0&&e!==1/0}function KN(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Yo(e,t){return typeof e=="function"?e(t):e}function li(e,t){return typeof e=="function"?e(t):e}function jS(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Ob(o,t.options))return!1}else if(!Qu(t.queryKey,o))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||s&&!s(t))}function PS(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(qa(t.options.mutationKey)!==qa(s))return!1}else if(!Qu(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Ob(e,t){return(t?.queryKeyHashFn||qa)(e)}function qa(e){return JSON.stringify(e,(t,n)=>Zy(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Qu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Qu(e[n],t[n])):!1}var K4=Object.prototype.hasOwnProperty;function GN(e,t){if(e===t)return e;const n=_S(e)&&_S(t);if(!n&&!(Zy(e)&&Zy(t)))return t;const i=(n?e:Object.keys(e)).length,s=n?t:Object.keys(t),o=s.length,l=n?new Array(o):{};let d=0;for(let h=0;h<o;h++){const f=n?h:s[h],p=e[f],y=t[f];if(p===y){l[f]=p,(n?h<i:K4.call(e,f))&&d++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){l[f]=y;continue}const b=GN(p,y);l[f]=b,b===p&&d++}return i===o&&d===i?e:l}function Qf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function _S(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zy(e){if(!RS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!RS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function RS(e){return Object.prototype.toString.call(e)==="[object Object]"}function G4(e){return new Promise(t=>{Oa.setTimeout(t,e)})}function Jy(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?GN(e,t):t}function Z4(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function J4(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Mb=Symbol();function ZN(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Mb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function JN(e,t){return typeof e=="function"?e(...t):!!e}var Q4=class extends Nl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Va&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Db=new Q4;function Qy(){let e,t;const n=new Promise((i,s)=>{e=i,t=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}var Y4=H4;function X4(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=Y4;const s=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(d=>{n(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{s(()=>{l(...d)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Nn=X4(),eL=class extends Nl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Va&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},Yf=new eL;function tL(e){return Math.min(1e3*2**e,3e4)}function QN(e){return(e??"online")==="online"?Yf.isOnline():!0}var Yy=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function YN(e){let t=!1,n=0,r;const i=Qy(),s=()=>i.status!=="pending",o=x=>{if(!s()){const S=new Yy(x);y(S),e.onCancel?.(S)}},l=()=>{t=!0},d=()=>{t=!1},h=()=>Db.isFocused()&&(e.networkMode==="always"||Yf.isOnline())&&e.canRun(),f=()=>QN(e.networkMode)&&e.canRun(),p=x=>{s()||(r?.(),i.resolve(x))},y=x=>{s()||(r?.(),i.reject(x))},b=()=>new Promise(x=>{r=S=>{(s()||h())&&x(S)},e.onPause?.()}).then(()=>{r=void 0,s()||e.onContinue?.()}),k=()=>{if(s())return;let x;const S=n===0?e.initialPromise:void 0;try{x=S??e.fn()}catch(E){x=Promise.reject(E)}Promise.resolve(x).then(p).catch(E=>{if(s())return;const T=e.retry??(Va?0:3),P=e.retryDelay??tL,j=typeof P=="function"?P(n,E):P,N=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,E);if(t||!N){y(E);return}n++,e.onFail?.(n,E),G4(j).then(()=>h()?void 0:b()).then(()=>{t?y(E):k()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r?.(),i),cancelRetry:l,continueRetry:d,canStart:f,start:()=>(f()?k():b().then(k),i)}}var XN=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gy(this.gcTime)&&(this.#e=Oa.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Va?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Oa.clearTimeout(this.#e),this.#e=void 0)}},nL=class extends XN{#e;#t;#n;#i;#r;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=AS(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=AS(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=Jy(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(ur).catch(ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>li(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Yo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!KN(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(d=>d.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},i=()=>{const l=ZN(this.options,t),h=(()=>{const f={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(f),f})();return this.#a=!1,this.options.persister?this.options.persister(l,h,this):l(h)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=YN({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof Yy&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,d)=>{this.#s({type:"failed",failureCount:l,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Yy){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...e2(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const i=e.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Nn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function e2(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QN(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function AS(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rL=class extends Nl{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#a=Qy(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#o;#a;#s;#p;#h;#f;#l;#u;#c;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),IS(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xy(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xy(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof li(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#k(),this.#t.setOptions(this.options),t._defaulted&&!Qf(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&OS(this.#t,n,this.options,t)&&this.#d(),this.updateResult(),r&&(this.#t!==n||li(this.options.enabled,this.#t)!==li(t.enabled,this.#t)||Yo(this.options.staleTime,this.#t)!==Yo(t.staleTime,this.#t))&&this.#g();const i=this.#v();r&&(this.#t!==n||li(this.options.enabled,this.#t)!==li(t.enabled,this.#t)||i!==this.#c)&&this.#y(i)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return sL(this,n)&&(this.#i=n,this.#o=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,r))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(e){this.#k();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(ur)),t}#g(){this.#x();const e=Yo(this.options.staleTime,this.#t);if(Va||this.#i.isStale||!Gy(e))return;const n=KN(this.#i.dataUpdatedAt,e)+1;this.#l=Oa.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#c=e,!(Va||li(this.options.enabled,this.#t)===!1||!Gy(this.#c)||this.#c===0)&&(this.#u=Oa.setInterval(()=>{(this.options.refetchIntervalInBackground||Db.isFocused())&&this.#d()},this.#c))}#b(){this.#g(),this.#y(this.#v())}#x(){this.#l&&(Oa.clearTimeout(this.#l),this.#l=void 0)}#w(){this.#u&&(Oa.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,r=this.options,i=this.#i,s=this.#r,o=this.#o,d=e!==n?e.state:this.#n,{state:h}=e;let f={...h},p=!1,y;if(t._optimisticResults){const I=this.hasListeners(),D=!I&&IS(e,t),z=I&&OS(e,n,t,r);(D||z)&&(f={...f,...e2(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:k,status:x}=f;y=f.data;let S=!1;if(t.placeholderData!==void 0&&y===void 0&&x==="pending"){let I;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(I=i.data,S=!0):I=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,I!==void 0&&(x="success",y=Jy(i?.data,I,t),p=!0)}if(t.select&&y!==void 0&&!S)if(i&&y===s?.data&&t.select===this.#p)y=this.#h;else try{this.#p=t.select,y=t.select(y),y=Jy(i?.data,y,t),this.#h=y,this.#s=null}catch(I){this.#s=I}this.#s&&(b=this.#s,y=this.#h,k=Date.now(),x="error");const E=f.fetchStatus==="fetching",T=x==="pending",P=x==="error",j=T&&E,N=y!==void 0,A={status:x,fetchStatus:f.fetchStatus,isPending:T,isSuccess:x==="success",isError:P,isInitialLoading:j,isLoading:j,data:y,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:k,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:E,isRefetching:E&&!T,isLoadingError:P&&!N,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:P&&N,isStale:Lb(e,t),refetch:this.refetch,promise:this.#a,isEnabled:li(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=q=>{A.status==="error"?q.reject(A.error):A.data!==void 0&&q.resolve(A.data)},D=()=>{const q=this.#a=A.promise=Qy();I(q)},z=this.#a;switch(z.status){case"pending":e.queryHash===n.queryHash&&I(z);break;case"fulfilled":(A.status==="error"||A.data!==z.value)&&D();break;case"rejected":(A.status!=="error"||A.error!==z.reason)&&D();break}}return A}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#f=this.#t),Qf(t,e))return;this.#i=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#m.size)return!0;const s=new Set(i??this.#m);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(o=>{const l=o;return this.#i[l]!==e[l]&&s.has(l)})};this.#S({listeners:n()})}#k(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){Nn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function iL(e,t){return li(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function IS(e,t){return iL(e,t)||e.state.data!==void 0&&Xy(e,t,t.refetchOnMount)}function Xy(e,t,n){if(li(t.enabled,e)!==!1&&Yo(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Lb(e,t)}return!1}function OS(e,t,n,r){return(e!==t||li(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Lb(e,n)}function Lb(e,t){return li(t.enabled,e)!==!1&&e.isStaleByTime(Yo(t.staleTime,e))}function sL(e,t){return!Qf(e.getCurrentResult(),t)}function MS(e){return{onFetch:(t,n)=>{const r=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},d=0;const h=async()=>{let f=!1;const p=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},y=ZN(t.options,t.fetchOptions),b=async(k,x,S)=>{if(f)return Promise.reject();if(x==null&&k.pages.length)return Promise.resolve(k);const T=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:x,direction:S?"backward":"forward",meta:t.options.meta};return p(R),R})(),P=await y(T),{maxPages:j}=t.options,N=S?J4:Z4;return{pages:N(k.pages,P,j),pageParams:N(k.pageParams,x,j)}};if(i&&s.length){const k=i==="backward",x=k?oL:DS,S={pages:s,pageParams:o},E=x(r,S);l=await b(S,E,k)}else{const k=e??s.length;do{const x=d===0?o[0]??r.initialPageParam:DS(r,l);if(d>0&&x==null)break;l=await b(l,x),d++}while(d<k)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=h}}}function DS(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function oL(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var aL=class extends XN{#e;#t;#n;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||t2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=YN({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,o)=>{this.#r({type:"failed",failureCount:s,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:i}),await this.#n.config.onMutate?.(e,this,n);const o=await this.options.onMutate?.(e,n);o!==this.state.context&&this.#r({type:"pending",context:o,variables:e,isPaused:i})}const s=await this.#i.start();return await this.#n.config.onSuccess?.(s,e,this.state.context,this,n),await this.options.onSuccess?.(s,e,this.state.context,n),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,e,this.state.context,n),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,e,this.state.context,this,n),await this.options.onError?.(s,e,this.state.context,n),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,s,e,this.state.context,n),s}finally{this.#r({type:"error",error:s})}}finally{this.#n.runNext(this)}}#r(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Nn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function t2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cL=class extends Nl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new aL({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=Qh(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Qh(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Qh(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Qh(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Nn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>PS(t,n))}findAll(e={}){return this.getAll().filter(t=>PS(e,t))}notify(e){Nn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Nn.batch(()=>Promise.all(e.map(t=>t.continue().catch(ur))))}};function Qh(e){return e.options.scope?.id}var lL=class extends Nl{#e;#t=void 0;#n;#i;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),Qf(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&qa(n.mutationKey)!==qa(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#o()}mutate(t,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??t2();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){Nn.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#i.onSuccess?.(t.data,n,r,i),this.#i.onSettled?.(t.data,null,n,r,i)):t?.type==="error"&&(this.#i.onError?.(t.error,n,r,i),this.#i.onSettled?.(void 0,t.error,n,r,i))}this.listeners.forEach(n=>{n(this.#t)})})}},uL=class extends Nl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,i=t.queryHash??Ob(r,t);let s=this.get(i);return s||(s=new nL({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(s)),s}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Nn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>jS(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>jS(e,n)):t}notify(e){Nn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Nn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Nn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},dL=class{#e;#t;#n;#i;#r;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new uL,this.#t=e.mutationCache||new cL,this.#n=e.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Db.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Yf.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Yo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=this.#e.get(r.queryHash)?.state.data,o=W4(t,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Nn.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Nn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Nn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Nn.batch(()=>this.#e.findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(ur).catch(ur)}invalidateQueries(e,t={}){return Nn.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Nn.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ur)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ur)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(Yo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ur).catch(ur)}fetchInfiniteQuery(e){return e.behavior=MS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ur).catch(ur)}ensureInfiniteQueryData(e){return e.behavior=MS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Yf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#i.set(qa(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(r=>{Qu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(qa(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{Qu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ob(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Mb&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},n2=g.createContext(void 0),Jr=e=>{const t=g.useContext(n2);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},hL=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(n2.Provider,{value:e,children:t})),r2=g.createContext(!1),fL=()=>g.useContext(r2);r2.Provider;function mL(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var pL=g.createContext(mL()),gL=()=>g.useContext(pL),vL=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},yL=e=>{g.useEffect(()=>{e.clearReset()},[e])},bL=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||JN(n,[e.error,r])),xL=e=>{if(e.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wL=(e,t)=>e.isLoading&&e.isFetching&&!t,kL=(e,t)=>e?.suspense&&t.isPending,LS=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function SL(e,t,n){const r=fL(),i=gL(),s=Jr(),o=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",xL(o),vL(o,i),yL(i);const l=!s.getQueryCache().get(o.queryHash),[d]=g.useState(()=>new t(s,o)),h=d.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(p=>{const y=f?d.subscribe(Nn.batchCalls(p)):ur;return d.updateResult(),y},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g.useEffect(()=>{d.setOptions(o)},[o,d]),kL(o,h))throw LS(o,d,i);if(bL({result:h,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!Va&&wL(h,r)&&(l?LS(o,d,i):s.getQueryCache().get(o.queryHash)?.promise)?.catch(ur).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?h:d.trackResult(h)}function Ot(e,t){return SL(e,rL)}function mi(e,t){const n=Jr(),[r]=g.useState(()=>new lL(n,e));g.useEffect(()=>{r.setOptions(e)},[r,e]);const i=g.useSyncExternalStore(g.useCallback(o=>r.subscribe(Nn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=g.useCallback((o,l)=>{r.mutate(o,l).catch(ur)},[r]);if(i.error&&JN(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const CL=new dL({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}});function i2(e,t){return function(){return e.apply(t,arguments)}}const{toString:EL}=Object.prototype,{getPrototypeOf:Fb}=Object,{iterator:Qm,toStringTag:s2}=Symbol,Ym=(e=>t=>{const n=EL.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zi=e=>(e=e.toLowerCase(),t=>Ym(t)===e),Xm=e=>t=>typeof t===e,{isArray:jl}=Array,ll=Xm("undefined");function wd(e){return e!==null&&!ll(e)&&e.constructor!==null&&!ll(e.constructor)&&Pr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const o2=Zi("ArrayBuffer");function TL(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&o2(e.buffer),t}const NL=Xm("string"),Pr=Xm("function"),a2=Xm("number"),kd=e=>e!==null&&typeof e=="object",jL=e=>e===!0||e===!1,Cf=e=>{if(Ym(e)!=="object")return!1;const t=Fb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(s2 in e)&&!(Qm in e)},PL=e=>{if(!kd(e)||wd(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},_L=Zi("Date"),RL=Zi("File"),AL=Zi("Blob"),IL=Zi("FileList"),OL=e=>kd(e)&&Pr(e.pipe),ML=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Pr(e.append)&&((t=Ym(e))==="formdata"||t==="object"&&Pr(e.toString)&&e.toString()==="[object FormData]"))},DL=Zi("URLSearchParams"),[LL,FL,UL,BL]=["ReadableStream","Request","Response","Headers"].map(Zi),zL=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),jl(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(wd(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let l;for(r=0;r<o;r++)l=s[r],t.call(null,e[l],l,e)}}function c2(e,t){if(wd(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Ma=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,l2=e=>!ll(e)&&e!==Ma;function e0(){const{caseless:e,skipUndefined:t}=l2(this)&&this||{},n={},r=(i,s)=>{const o=e&&c2(n,s)||s;Cf(n[o])&&Cf(i)?n[o]=e0(n[o],i):Cf(i)?n[o]=e0({},i):jl(i)?n[o]=i.slice():(!t||!ll(i))&&(n[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Sd(arguments[i],r);return n}const $L=(e,t,n,{allOwnKeys:r}={})=>(Sd(t,(i,s)=>{n&&Pr(i)?e[s]=i2(i,n):e[s]=i},{allOwnKeys:r}),e),VL=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),qL=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},HL=(e,t,n,r)=>{let i,s,o;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&Fb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},WL=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},KL=e=>{if(!e)return null;if(jl(e))return e;let t=e.length;if(!a2(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},GL=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fb(Uint8Array)),ZL=(e,t)=>{const r=(e&&e[Qm]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},JL=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},QL=Zi("HTMLFormElement"),YL=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),FS=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),XL=Zi("RegExp"),u2=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sd(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},e3=e=>{u2(e,(t,n)=>{if(Pr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Pr(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},t3=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return jl(e)?r(e):r(String(e).split(t)),n},n3=()=>{},r3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function i3(e){return!!(e&&Pr(e.append)&&e[s2]==="FormData"&&e[Qm])}const s3=e=>{const t=new Array(10),n=(r,i)=>{if(kd(r)){if(t.indexOf(r)>=0)return;if(wd(r))return r;if(!("toJSON"in r)){t[i]=r;const s=jl(r)?[]:{};return Sd(r,(o,l)=>{const d=n(o,i+1);!ll(d)&&(s[l]=d)}),t[i]=void 0,s}}return r};return n(e,0)},o3=Zi("AsyncFunction"),a3=e=>e&&(kd(e)||Pr(e))&&Pr(e.then)&&Pr(e.catch),d2=((e,t)=>e?setImmediate:t?((n,r)=>(Ma.addEventListener("message",({source:i,data:s})=>{i===Ma&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ma.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Pr(Ma.postMessage)),c3=typeof queueMicrotask<"u"?queueMicrotask.bind(Ma):typeof process<"u"&&process.nextTick||d2,l3=e=>e!=null&&Pr(e[Qm]),ee={isArray:jl,isArrayBuffer:o2,isBuffer:wd,isFormData:ML,isArrayBufferView:TL,isString:NL,isNumber:a2,isBoolean:jL,isObject:kd,isPlainObject:Cf,isEmptyObject:PL,isReadableStream:LL,isRequest:FL,isResponse:UL,isHeaders:BL,isUndefined:ll,isDate:_L,isFile:RL,isBlob:AL,isRegExp:XL,isFunction:Pr,isStream:OL,isURLSearchParams:DL,isTypedArray:GL,isFileList:IL,forEach:Sd,merge:e0,extend:$L,trim:zL,stripBOM:VL,inherits:qL,toFlatObject:HL,kindOf:Ym,kindOfTest:Zi,endsWith:WL,toArray:KL,forEachEntry:ZL,matchAll:JL,isHTMLForm:QL,hasOwnProperty:FS,hasOwnProp:FS,reduceDescriptors:u2,freezeMethods:e3,toObjectSet:t3,toCamelCase:YL,noop:n3,toFiniteNumber:r3,findKey:c2,global:Ma,isContextDefined:l2,isSpecCompliantForm:i3,toJSONObject:s3,isAsyncFn:o3,isThenable:a3,setImmediate:d2,asap:c3,isIterable:l3};function tt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ee.inherits(tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const h2=tt.prototype,f2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{f2[e]={value:e}});Object.defineProperties(tt,f2);Object.defineProperty(h2,"isAxiosError",{value:!0});tt.from=(e,t,n,r,i,s)=>{const o=Object.create(h2);ee.toFlatObject(e,o,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const l=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return tt.call(o,l,d,n,r,i),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const u3=null;function t0(e){return ee.isPlainObject(e)||ee.isArray(e)}function m2(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function US(e,t,n){return e?e.concat(t).map(function(i,s){return i=m2(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function d3(e){return ee.isArray(e)&&!e.some(t0)}const h3=ee.toFlatObject(ee,{},null,function(t){return/^is[A-Z]/.test(t)});function ep(e,t,n){if(!ee.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ee.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,S){return!ee.isUndefined(S[x])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(t);if(!ee.isFunction(i))throw new TypeError("visitor must be a function");function h(k){if(k===null)return"";if(ee.isDate(k))return k.toISOString();if(ee.isBoolean(k))return k.toString();if(!d&&ee.isBlob(k))throw new tt("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(k)||ee.isTypedArray(k)?d&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function f(k,x,S){let E=k;if(k&&!S&&typeof k=="object"){if(ee.endsWith(x,"{}"))x=r?x:x.slice(0,-2),k=JSON.stringify(k);else if(ee.isArray(k)&&d3(k)||(ee.isFileList(k)||ee.endsWith(x,"[]"))&&(E=ee.toArray(k)))return x=m2(x),E.forEach(function(P,j){!(ee.isUndefined(P)||P===null)&&t.append(o===!0?US([x],j,s):o===null?x:x+"[]",h(P))}),!1}return t0(k)?!0:(t.append(US(S,x,s),h(k)),!1)}const p=[],y=Object.assign(h3,{defaultVisitor:f,convertValue:h,isVisitable:t0});function b(k,x){if(!ee.isUndefined(k)){if(p.indexOf(k)!==-1)throw Error("Circular reference detected in "+x.join("."));p.push(k),ee.forEach(k,function(E,T){(!(ee.isUndefined(E)||E===null)&&i.call(t,E,ee.isString(T)?T.trim():T,x,y))===!0&&b(E,x?x.concat(T):[T])}),p.pop()}}if(!ee.isObject(e))throw new TypeError("data must be an object");return b(e),t}function BS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ub(e,t){this._pairs=[],e&&ep(e,this,t)}const p2=Ub.prototype;p2.append=function(t,n){this._pairs.push([t,n])};p2.toString=function(t){const n=t?function(r){return t.call(this,r,BS)}:BS;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function f3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function g2(e,t,n){if(!t)return e;const r=n&&n.encode||f3;ee.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=ee.isURLSearchParams(t)?t.toString():new Ub(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class zS{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ee.forEach(this.handlers,function(r){r!==null&&t(r)})}}const v2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m3=typeof URLSearchParams<"u"?URLSearchParams:Ub,p3=typeof FormData<"u"?FormData:null,g3=typeof Blob<"u"?Blob:null,v3={isBrowser:!0,classes:{URLSearchParams:m3,FormData:p3,Blob:g3},protocols:["http","https","file","blob","url","data"]},Bb=typeof window<"u"&&typeof document<"u",n0=typeof navigator=="object"&&navigator||void 0,y3=Bb&&(!n0||["ReactNative","NativeScript","NS"].indexOf(n0.product)<0),b3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",x3=Bb&&window.location.href||"http://localhost",w3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bb,hasStandardBrowserEnv:y3,hasStandardBrowserWebWorkerEnv:b3,navigator:n0,origin:x3},Symbol.toStringTag,{value:"Module"})),nr={...w3,...v3};function k3(e,t){return ep(e,new nr.classes.URLSearchParams,{visitor:function(n,r,i,s){return nr.isNode&&ee.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function S3(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function C3(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function y2(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),d=s>=n.length;return o=!o&&ee.isArray(i)?i.length:o,d?(ee.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!ee.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&ee.isArray(i[o])&&(i[o]=C3(i[o])),!l)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const n={};return ee.forEachEntry(e,(r,i)=>{t(S3(r),i,n,0)}),n}return null}function E3(e,t,n){if(ee.isString(e))try{return(t||JSON.parse)(e),ee.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Cd={transitional:v2,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=ee.isObject(t);if(s&&ee.isHTMLForm(t)&&(t=new FormData(t)),ee.isFormData(t))return i?JSON.stringify(y2(t)):t;if(ee.isArrayBuffer(t)||ee.isBuffer(t)||ee.isStream(t)||ee.isFile(t)||ee.isBlob(t)||ee.isReadableStream(t))return t;if(ee.isArrayBufferView(t))return t.buffer;if(ee.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return k3(t,this.formSerializer).toString();if((l=ee.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return ep(l?{"files[]":t}:t,d&&new d,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),E3(t)):t}],transformResponse:[function(t){const n=this.transitional||Cd.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(ee.isResponse(t)||ee.isReadableStream(t))return t;if(t&&ee.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?tt.from(l,tt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nr.classes.FormData,Blob:nr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],e=>{Cd.headers[e]={}});const T3=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),N3=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&T3[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$S=Symbol("internals");function ju(e){return e&&String(e).trim().toLowerCase()}function Ef(e){return e===!1||e==null?e:ee.isArray(e)?e.map(Ef):String(e)}function j3(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const P3=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Hv(e,t,n,r,i){if(ee.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!ee.isString(t)){if(ee.isString(r))return t.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(t)}}function _3(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function R3(e,t){const n=ee.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let _r=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(l,d,h){const f=ju(d);if(!f)throw new Error("header name must be a non-empty string");const p=ee.findKey(i,f);(!p||i[p]===void 0||h===!0||h===void 0&&i[p]!==!1)&&(i[p||d]=Ef(l))}const o=(l,d)=>ee.forEach(l,(h,f)=>s(h,f,d));if(ee.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ee.isString(t)&&(t=t.trim())&&!P3(t))o(N3(t),n);else if(ee.isObject(t)&&ee.isIterable(t)){let l={},d,h;for(const f of t){if(!ee.isArray(f))throw TypeError("Object iterator must return a key-value pair");l[h=f[0]]=(d=l[h])?ee.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}o(l,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=ju(t),t){const r=ee.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return j3(i);if(ee.isFunction(n))return n.call(this,i,r);if(ee.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ju(t),t){const r=ee.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Hv(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=ju(o),o){const l=ee.findKey(r,o);l&&(!n||Hv(r,r[l],l,n))&&(delete r[l],i=!0)}}return ee.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Hv(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return ee.forEach(this,(i,s)=>{const o=ee.findKey(r,s);if(o){n[o]=Ef(i),delete n[s];return}const l=t?_3(s):String(s).trim();l!==s&&delete n[s],n[l]=Ef(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ee.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&ee.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[$S]=this[$S]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=ju(o);r[l]||(R3(i,o),r[l]=!0)}return ee.isArray(t)?t.forEach(s):s(t),this}};_r.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(_r.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ee.freezeMethods(_r);function Wv(e,t){const n=this||Cd,r=t||n,i=_r.from(r.headers);let s=r.data;return ee.forEach(e,function(l){s=l.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function b2(e){return!!(e&&e.__CANCEL__)}function Pl(e,t,n){tt.call(this,e??"canceled",tt.ERR_CANCELED,t,n),this.name="CanceledError"}ee.inherits(Pl,tt,{__CANCEL__:!0});function x2(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new tt("Request failed with status code "+n.status,[tt.ERR_BAD_REQUEST,tt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function A3(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function I3(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(d){const h=Date.now(),f=r[s];o||(o=h),n[i]=d,r[i]=h;let p=s,y=0;for(;p!==i;)y+=n[p++],p=p%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),h-o<t)return;const b=f&&h-f;return b?Math.round(y*1e3/b):void 0}}function O3(e,t){let n=0,r=1e3/t,i,s;const o=(h,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),e(...h)};return[(...h)=>{const f=Date.now(),p=f-n;p>=r?o(h,f):(i=h,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Xf=(e,t,n=3)=>{let r=0;const i=I3(50,250);return O3(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,d=o-r,h=i(d),f=o<=l;r=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:h||void 0,estimated:h&&l&&f?(l-o)/h:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},VS=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},qS=e=>(...t)=>ee.asap(()=>e(...t)),M3=nr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,nr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(nr.origin),nr.navigator&&/(msie|trident)/i.test(nr.navigator.userAgent)):()=>!0,D3=nr.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];ee.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ee.isString(r)&&o.push("path="+r),ee.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function L3(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function F3(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function w2(e,t,n){let r=!L3(t);return e&&(r||n==!1)?F3(e,t):t}const HS=e=>e instanceof _r?{...e}:e;function Ha(e,t){t=t||{};const n={};function r(h,f,p,y){return ee.isPlainObject(h)&&ee.isPlainObject(f)?ee.merge.call({caseless:y},h,f):ee.isPlainObject(f)?ee.merge({},f):ee.isArray(f)?f.slice():f}function i(h,f,p,y){if(ee.isUndefined(f)){if(!ee.isUndefined(h))return r(void 0,h,p,y)}else return r(h,f,p,y)}function s(h,f){if(!ee.isUndefined(f))return r(void 0,f)}function o(h,f){if(ee.isUndefined(f)){if(!ee.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function l(h,f,p){if(p in t)return r(h,f);if(p in e)return r(void 0,h)}const d={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(h,f,p)=>i(HS(h),HS(f),p,!0)};return ee.forEach(Object.keys({...e,...t}),function(f){const p=d[f]||i,y=p(e[f],t[f],f);ee.isUndefined(y)&&p!==l||(n[f]=y)}),n}const k2=e=>{const t=Ha({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=_r.from(o),t.url=g2(w2(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ee.isFormData(n)){if(nr.hasStandardBrowserEnv||nr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(n.getHeaders)){const d=n.getHeaders(),h=["content-type","content-length"];Object.entries(d).forEach(([f,p])=>{h.includes(f.toLowerCase())&&o.set(f,p)})}}if(nr.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(t)),r||r!==!1&&M3(t.url))){const d=i&&s&&D3.read(s);d&&o.set(i,d)}return t},U3=typeof XMLHttpRequest<"u",B3=U3&&function(e){return new Promise(function(n,r){const i=k2(e);let s=i.data;const o=_r.from(i.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:h}=i,f,p,y,b,k;function x(){b&&b(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function E(){if(!S)return;const P=_r.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:P,config:e,request:S};x2(function(A){n(A),x()},function(A){r(A),x()},N),S=null}"onloadend"in S?S.onloadend=E:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(E)},S.onabort=function(){S&&(r(new tt("Request aborted",tt.ECONNABORTED,e,S)),S=null)},S.onerror=function(j){const N=j&&j.message?j.message:"Network Error",R=new tt(N,tt.ERR_NETWORK,e,S);R.event=j||null,r(R),S=null},S.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||v2;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new tt(j,N.clarifyTimeoutError?tt.ETIMEDOUT:tt.ECONNABORTED,e,S)),S=null},s===void 0&&o.setContentType(null),"setRequestHeader"in S&&ee.forEach(o.toJSON(),function(j,N){S.setRequestHeader(N,j)}),ee.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),l&&l!=="json"&&(S.responseType=i.responseType),h&&([y,k]=Xf(h,!0),S.addEventListener("progress",y)),d&&S.upload&&([p,b]=Xf(d),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(f=P=>{S&&(r(!P||P.type?new Pl(null,e,S):P),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const T=A3(i.url);if(T&&nr.protocols.indexOf(T)===-1){r(new tt("Unsupported protocol "+T+":",tt.ERR_BAD_REQUEST,e));return}S.send(s||null)})},z3=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(h){if(!i){i=!0,l();const f=h instanceof Error?h:this.reason;r.abort(f instanceof tt?f:new Pl(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,s(new tt(`timeout ${t} of ms exceeded`,tt.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),e=null)};e.forEach(h=>h.addEventListener("abort",s));const{signal:d}=r;return d.unsubscribe=()=>ee.asap(l),d}},$3=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},V3=async function*(e,t){for await(const n of q3(e))yield*$3(n,t)},q3=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},WS=(e,t,n,r)=>{const i=V3(e,t);let s=0,o,l=d=>{o||(o=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:h,value:f}=await i.next();if(h){l(),d.close();return}let p=f.byteLength;if(n){let y=s+=p;n(y)}d.enqueue(new Uint8Array(f))}catch(h){throw l(h),h}},cancel(d){return l(d),i.return()}},{highWaterMark:2})},KS=64*1024,{isFunction:Yh}=ee,H3=(({Request:e,Response:t})=>({Request:e,Response:t}))(ee.global),{ReadableStream:GS,TextEncoder:ZS}=ee.global,JS=(e,...t)=>{try{return!!e(...t)}catch{return!1}},W3=e=>{e=ee.merge.call({skipUndefined:!0},H3,e);const{fetch:t,Request:n,Response:r}=e,i=t?Yh(t):typeof fetch=="function",s=Yh(n),o=Yh(r);if(!i)return!1;const l=i&&Yh(GS),d=i&&(typeof ZS=="function"?(k=>x=>k.encode(x))(new ZS):async k=>new Uint8Array(await new n(k).arrayBuffer())),h=s&&l&&JS(()=>{let k=!1;const x=new n(nr.origin,{body:new GS,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!x}),f=o&&l&&JS(()=>ee.isReadableStream(new r("").body)),p={stream:f&&(k=>k.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!p[k]&&(p[k]=(x,S)=>{let E=x&&x[k];if(E)return E.call(x);throw new tt(`Response type '${k}' is not supported`,tt.ERR_NOT_SUPPORT,S)})});const y=async k=>{if(k==null)return 0;if(ee.isBlob(k))return k.size;if(ee.isSpecCompliantForm(k))return(await new n(nr.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(k)||ee.isArrayBuffer(k))return k.byteLength;if(ee.isURLSearchParams(k)&&(k=k+""),ee.isString(k))return(await d(k)).byteLength},b=async(k,x)=>{const S=ee.toFiniteNumber(k.getContentLength());return S??y(x)};return async k=>{let{url:x,method:S,data:E,signal:T,cancelToken:P,timeout:j,onDownloadProgress:N,onUploadProgress:R,responseType:A,headers:I,withCredentials:D="same-origin",fetchOptions:z}=k2(k),q=t||fetch;A=A?(A+"").toLowerCase():"text";let V=z3([T,P&&P.toAbortSignal()],j),te=null;const J=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let we;try{if(R&&h&&S!=="get"&&S!=="head"&&(we=await b(I,E))!==0){let F=new n(x,{method:"POST",body:E,duplex:"half"}),ie;if(ee.isFormData(E)&&(ie=F.headers.get("content-type"))&&I.setContentType(ie),F.body){const[pe,oe]=VS(we,Xf(qS(R)));E=WS(F.body,KS,pe,oe)}}ee.isString(D)||(D=D?"include":"omit");const X=s&&"credentials"in n.prototype,me={...z,signal:V,method:S.toUpperCase(),headers:I.normalize().toJSON(),body:E,duplex:"half",credentials:X?D:void 0};te=s&&new n(x,me);let U=await(s?q(te,z):q(x,me));const ue=f&&(A==="stream"||A==="response");if(f&&(N||ue&&J)){const F={};["status","statusText","headers"].forEach(Se=>{F[Se]=U[Se]});const ie=ee.toFiniteNumber(U.headers.get("content-length")),[pe,oe]=N&&VS(ie,Xf(qS(N),!0))||[];U=new r(WS(U.body,KS,pe,()=>{oe&&oe(),J&&J()}),F)}A=A||"text";let fe=await p[ee.findKey(p,A)||"text"](U,k);return!ue&&J&&J(),await new Promise((F,ie)=>{x2(F,ie,{data:fe,headers:_r.from(U.headers),status:U.status,statusText:U.statusText,config:k,request:te})})}catch(X){throw J&&J(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new tt("Network Error",tt.ERR_NETWORK,k,te),{cause:X.cause||X}):tt.from(X,X&&X.code,k,te)}}},K3=new Map,S2=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let o=s.length,l=o,d,h,f=K3;for(;l--;)d=s[l],h=f.get(d),h===void 0&&f.set(d,h=l?new Map:W3(t)),f=h;return h};S2();const r0={http:u3,xhr:B3,fetch:{get:S2}};ee.forEach(r0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const QS=e=>`- ${e}`,G3=e=>ee.isFunction(e)||e===null||e===!1,C2={getAdapter:(e,t)=>{e=ee.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let o=0;o<n;o++){r=e[o];let l;if(i=r,!G3(r)&&(i=r0[(l=String(r)).toLowerCase()],i===void 0))throw new tt(`Unknown adapter '${l}'`);if(i&&(ee.isFunction(i)||(i=i.get(t))))break;s[l||"#"+o]=i}if(!i){const o=Object.entries(s).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(QS).join(`
`):" "+QS(o[0]):"as no adapter specified";throw new tt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:r0};function Kv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pl(null,e)}function YS(e){return Kv(e),e.headers=_r.from(e.headers),e.data=Wv.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),C2.getAdapter(e.adapter||Cd.adapter,e)(e).then(function(r){return Kv(e),r.data=Wv.call(e,e.transformResponse,r),r.headers=_r.from(r.headers),r},function(r){return b2(r)||(Kv(e),r&&r.response&&(r.response.data=Wv.call(e,e.transformResponse,r.response),r.response.headers=_r.from(r.response.headers))),Promise.reject(r)})}const E2="1.12.2",tp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tp[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const XS={};tp.transitional=function(t,n,r){function i(s,o){return"[Axios v"+E2+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(t===!1)throw new tt(i(o," has been removed"+(n?" in "+n:"")),tt.ERR_DEPRECATED);return n&&!XS[o]&&(XS[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,l):!0}};tp.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Z3(e,t,n){if(typeof e!="object")throw new tt("options must be an object",tt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const l=e[s],d=l===void 0||o(l,s,e);if(d!==!0)throw new tt("option "+s+" must be "+d,tt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new tt("Unknown option "+s,tt.ERR_BAD_OPTION)}}const Tf={assertOptions:Z3,validators:tp},as=Tf.validators;let Fa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zS,response:new zS}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ha(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Tf.assertOptions(r,{silentJSONParsing:as.transitional(as.boolean),forcedJSONParsing:as.transitional(as.boolean),clarifyTimeoutError:as.transitional(as.boolean)},!1),i!=null&&(ee.isFunction(i)?n.paramsSerializer={serialize:i}:Tf.assertOptions(i,{encode:as.function,serialize:as.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Tf.assertOptions(n,{baseUrl:as.spelling("baseURL"),withXsrfToken:as.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&ee.merge(s.common,s[n.method]);s&&ee.forEach(["delete","get","head","post","put","patch","common"],k=>{delete s[k]}),n.headers=_r.concat(o,s);const l=[];let d=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(d=d&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const h=[];this.interceptors.response.forEach(function(x){h.push(x.fulfilled,x.rejected)});let f,p=0,y;if(!d){const k=[YS.bind(this),void 0];for(k.unshift(...l),k.push(...h),y=k.length,f=Promise.resolve(n);p<y;)f=f.then(k[p++],k[p++]);return f}y=l.length;let b=n;for(;p<y;){const k=l[p++],x=l[p++];try{b=k(b)}catch(S){x.call(this,S);break}}try{f=YS.call(this,b)}catch(k){return Promise.reject(k)}for(p=0,y=h.length;p<y;)f=f.then(h[p++],h[p++]);return f}getUri(t){t=Ha(this.defaults,t);const n=w2(t.baseURL,t.url,t.allowAbsoluteUrls);return g2(n,t.params,t.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(t){Fa.prototype[t]=function(n,r){return this.request(Ha(r||{},{method:t,url:n,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,l){return this.request(Ha(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Fa.prototype[t]=n(),Fa.prototype[t+"Form"]=n(!0)});let J3=class T2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,l){r.reason||(r.reason=new Pl(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new T2(function(i){t=i}),cancel:t}}};function Q3(e){return function(n){return e.apply(null,n)}}function Y3(e){return ee.isObject(e)&&e.isAxiosError===!0}const i0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(i0).forEach(([e,t])=>{i0[t]=e});function N2(e){const t=new Fa(e),n=i2(Fa.prototype.request,t);return ee.extend(n,Fa.prototype,t,{allOwnKeys:!0}),ee.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return N2(Ha(e,i))},n}const ln=N2(Cd);ln.Axios=Fa;ln.CanceledError=Pl;ln.CancelToken=J3;ln.isCancel=b2;ln.VERSION=E2;ln.toFormData=ep;ln.AxiosError=tt;ln.Cancel=ln.CanceledError;ln.all=function(t){return Promise.all(t)};ln.spread=Q3;ln.isAxiosError=Y3;ln.mergeConfig=Ha;ln.AxiosHeaders=_r;ln.formToJSON=e=>y2(ee.isHTMLForm(e)?new FormData(e):e);ln.getAdapter=C2.getAdapter;ln.HttpStatusCode=i0;ln.default=ln;const{Axios:fce,AxiosError:mce,CanceledError:pce,isCancel:gce,CancelToken:vce,VERSION:yce,all:bce,Cancel:xce,isAxiosError:wce,spread:kce,toFormData:Sce,AxiosHeaders:Cce,HttpStatusCode:Ece,formToJSON:Tce,getAdapter:Nce,mergeConfig:jce}=ln,X3="";throw new Error("[API] VITE_API_URL no está definido. Configúralo en tu .env (p.ej. http://localhost:3000)");const eF=(e,t)=>e.replace(/\/+$/,""),tF=eF(X3),Xe=ln.create({baseURL:tF,withCredentials:!1,timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"}}),s0="access_token";function nF(e){e?localStorage.setItem(s0,e):localStorage.removeItem(s0)}function rF(){return localStorage.getItem(s0)}const j2="/users/me";function P2(e){const t=e?.id??e?.Id??e?.userId??e?.UserId??"";return{id:typeof t=="bigint"?t.toString():String(t),role:e?.role??e?.Role,email:e?.email??e?.Email,phone:e?.phone??e?.Phone??void 0,phonePrefix:e?.phonePrefix??e?.PhonePrefix??void 0,fullName:e?.fullName??e?.FullName??void 0,firstName1:e?.firstName1??e?.FirstName1??void 0,lastName1:e?.lastName1??e?.LastName1??void 0,lastName2:e?.lastName2??e?.LastName2??void 0,dateOfBirth:e?.dateOfBirth??e?.DateOfBirth??void 0,gender:e?.gender??e?.Gender??void 0,primaryLanguage:e?.primaryLanguage??e?.PrimaryLanguage??void 0,nativeLanguage:e?.nativeLanguage??e?.NativeLanguage??null,timezone:e?.timezone??e?.Timezone??void 0,status:e?.status??e?.Status,countryId:e?.countryId??e?.CountryId??void 0,nationalityCountryId:e?.nationalityCountryId??e?.NationalityCountryId??null,residenceCountryId:e?.residenceCountryId??e?.ResidenceCountryId??null,isActive:!!(e?.isActive??e?.IsActive??!0),createdAt:e?.createdAt??e?.CreatedAt,updatedAt:e?.updatedAt??e?.UpdatedAt,avatarFileId:e?.avatarFileId??e?.AvatarFileId??void 0}}async function Yu(){const{data:e}=await Xe.get(j2);if(!e)throw new Error("Respuesta vacía de /users/me");return P2(e)}async function iF(e){const t={};e.fullName!==void 0&&(t.FullName=e.fullName),e.phone!==void 0&&(t.Phone=e.phone),e.gender!==void 0&&(t.Gender=String(e.gender));const{data:n}=await Xe.patch(j2,t);if(!n)throw new Error("Respuesta vacía de PATCH /users/me");return P2(n)}const _2=g.createContext(void 0);function sF({children:e,currentUser:t}){const n=()=>t==="doctor"?"/doctor-dashboard":t==="admin"?"/admin-panel":t==="patient"?"/patient-dashboard":"/";return c.jsx(_2.Provider,{value:{currentUser:t,getDashboardRoute:n},children:e})}function cc(){const e=g.useContext(_2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function oF(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const aF=e=>{switch(e){case"success":return uF;case"info":return hF;case"warning":return dF;case"error":return fF;default:return null}},cF=Array(12).fill(0),lF=({visible:e,className:t})=>ye.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ye.createElement("div",{className:"sonner-spinner"},cF.map((n,r)=>ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),uF=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),dF=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),hF=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fF=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),mF=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pF=()=>{const[e,t]=ye.useState(document.hidden);return ye.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let o0=1;class gF{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...i}=t,s=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:o0++,o=this.toasts.find(d=>d.id===s),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(d=>d.id===s?(this.publish({...d,...t,id:s,title:r}),{...d,...t,id:s,dismissible:l,title:r}):d):this.addToast({title:r,...i,dismissible:l,id:s}),s},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(t instanceof Function?t():t);let s=r!==void 0,o;const l=i.then(async h=>{if(o=["resolve",h],ye.isValidElement(h))s=!1,this.create({id:r,type:"default",message:h});else if(yF(h)&&!h.ok){s=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,k=typeof p=="object"&&!ye.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...k})}else if(h instanceof Error){s=!1;const p=typeof n.error=="function"?await n.error(h):n.error,y=typeof n.description=="function"?await n.description(h):n.description,k=typeof p=="object"&&!ye.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...k})}else if(n.success!==void 0){s=!1;const p=typeof n.success=="function"?await n.success(h):n.success,y=typeof n.description=="function"?await n.description(h):n.description,k=typeof p=="object"&&!ye.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:y,...k})}}).catch(async h=>{if(o=["reject",h],n.error!==void 0){s=!1;const f=typeof n.error=="function"?await n.error(h):n.error,p=typeof n.description=="function"?await n.description(h):n.description,b=typeof f=="object"&&!ye.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...b})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((h,f)=>l.then(()=>o[0]==="reject"?f(o[1]):h(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(t,n)=>{const r=n?.id||o0++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Er=new gF,vF=(e,t)=>{const n=t?.id||o0++;return Er.addToast({title:e,...t,id:n}),n},yF=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",bF=vF,xF=()=>Er.toasts,wF=()=>Er.getActiveToasts(),Tt=Object.assign(bF,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:xF,getToasts:wF});oF("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Xh(e){return e.label!==void 0}const kF=3,SF="24px",CF="16px",eC=4e3,EF=356,TF=14,NF=45,jF=200;function cs(...e){return e.filter(Boolean).join(" ")}function PF(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const _F=e=>{var t,n,r,i,s,o,l,d,h;const{invert:f,toast:p,unstyled:y,interacting:b,setHeights:k,visibleToasts:x,heights:S,index:E,toasts:T,expanded:P,removeToast:j,defaultRichColors:N,closeButton:R,style:A,cancelButtonStyle:I,actionButtonStyle:D,className:z="",descriptionClassName:q="",duration:V,position:te,gap:J,expandByDefault:we,classNames:X,icons:me,closeButtonAriaLabel:U="Close toast"}=e,[ue,fe]=ye.useState(null),[F,ie]=ye.useState(null),[pe,oe]=ye.useState(!1),[Se,Ae]=ye.useState(!1),[ae,ke]=ye.useState(!1),[Ue,qe]=ye.useState(!1),[nt,ct]=ye.useState(!1),[Yt,An]=ye.useState(0),[yi,bi]=ye.useState(0),or=ye.useRef(p.duration||V||eC),mc=ye.useRef(null),Zn=ye.useRef(null),L=E===0,W=E+1<=x,ne=p.type,Pe=p.dismissible!==!1,Ne=p.className||"",Ce=p.descriptionClassName||"",Be=ye.useMemo(()=>S.findIndex(et=>et.toastId===p.id)||0,[S,p.id]),pt=ye.useMemo(()=>{var et;return(et=p.closeButton)!=null?et:R},[p.closeButton,R]),vt=ye.useMemo(()=>p.duration||V||eC,[p.duration,V]),wn=ye.useRef(0),$n=ye.useRef(0),Vn=ye.useRef(0),es=ye.useRef(null),[po,go]=te.split("-"),pc=ye.useMemo(()=>S.reduce((et,Xt,kn)=>kn>=Be?et:et+Xt.height,0),[S,Be]),Os=pF(),ga=p.invert||f,ts=ne==="loading";$n.current=ye.useMemo(()=>Be*J+pc,[Be,pc]),ye.useEffect(()=>{or.current=vt},[vt]),ye.useEffect(()=>{oe(!0)},[]),ye.useEffect(()=>{const et=Zn.current;if(et){const Xt=et.getBoundingClientRect().height;return bi(Xt),k(kn=>[{toastId:p.id,height:Xt,position:p.position},...kn]),()=>k(kn=>kn.filter(Jn=>Jn.toastId!==p.id))}},[k,p.id]),ye.useLayoutEffect(()=>{if(!pe)return;const et=Zn.current,Xt=et.style.height;et.style.height="auto";const kn=et.getBoundingClientRect().height;et.style.height=Xt,bi(kn),k(Jn=>Jn.find(hn=>hn.toastId===p.id)?Jn.map(hn=>hn.toastId===p.id?{...hn,height:kn}:hn):[{toastId:p.id,height:kn,position:p.position},...Jn])},[pe,p.title,p.description,k,p.id,p.jsx,p.action,p.cancel]);const Xr=ye.useCallback(()=>{Ae(!0),An($n.current),k(et=>et.filter(Xt=>Xt.toastId!==p.id)),setTimeout(()=>{j(p)},jF)},[p,j,k,$n]);ye.useEffect(()=>{if(p.promise&&ne==="loading"||p.duration===1/0||p.type==="loading")return;let et;return P||b||Os?(()=>{if(Vn.current<wn.current){const Jn=new Date().getTime()-wn.current;or.current=or.current-Jn}Vn.current=new Date().getTime()})():(()=>{or.current!==1/0&&(wn.current=new Date().getTime(),et=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Xr()},or.current))})(),()=>clearTimeout(et)},[P,b,p,ne,Os,Xr]),ye.useEffect(()=>{p.delete&&(Xr(),p.onDismiss==null||p.onDismiss.call(p,p))},[Xr,p.delete]);function ql(){var et;if(me?.loading){var Xt;return ye.createElement("div",{className:cs(X?.loader,p==null||(Xt=p.classNames)==null?void 0:Xt.loader,"sonner-loader"),"data-visible":ne==="loading"},me.loading)}return ye.createElement(lF,{className:cs(X?.loader,p==null||(et=p.classNames)==null?void 0:et.loader),visible:ne==="loading"})}const vo=p.icon||me?.[ne]||aF(ne);var Ms,Hl;return ye.createElement("li",{tabIndex:0,ref:Zn,className:cs(z,Ne,X?.toast,p==null||(t=p.classNames)==null?void 0:t.toast,X?.default,X?.[ne],p==null||(n=p.classNames)==null?void 0:n[ne]),"data-sonner-toast":"","data-rich-colors":(Ms=p.richColors)!=null?Ms:N,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":pe,"data-promise":!!p.promise,"data-swiped":nt,"data-removed":Se,"data-visible":W,"data-y-position":po,"data-x-position":go,"data-index":E,"data-front":L,"data-swiping":ae,"data-dismissible":Pe,"data-type":ne,"data-invert":ga,"data-swipe-out":Ue,"data-swipe-direction":F,"data-expanded":!!(P||we&&pe),"data-testid":p.testId,style:{"--index":E,"--toasts-before":E,"--z-index":T.length-E,"--offset":`${Se?Yt:$n.current}px`,"--initial-height":we?"auto":`${yi}px`,...A,...p.style},onDragEnd:()=>{ke(!1),fe(null),es.current=null},onPointerDown:et=>{et.button!==2&&(ts||!Pe||(mc.current=new Date,An($n.current),et.target.setPointerCapture(et.pointerId),et.target.tagName!=="BUTTON"&&(ke(!0),es.current={x:et.clientX,y:et.clientY})))},onPointerUp:()=>{var et,Xt,kn;if(Ue||!Pe)return;es.current=null;const Jn=Number(((et=Zn.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yo=Number(((Xt=Zn.current)==null?void 0:Xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),hn=new Date().getTime()-((kn=mc.current)==null?void 0:kn.getTime()),In=ue==="x"?Jn:yo,bo=Math.abs(In)/hn;if(Math.abs(In)>=NF||bo>.11){An($n.current),p.onDismiss==null||p.onDismiss.call(p,p),ie(ue==="x"?Jn>0?"right":"left":yo>0?"down":"up"),Xr(),qe(!0);return}else{var qn,Lr;(qn=Zn.current)==null||qn.style.setProperty("--swipe-amount-x","0px"),(Lr=Zn.current)==null||Lr.style.setProperty("--swipe-amount-y","0px")}ct(!1),ke(!1),fe(null)},onPointerMove:et=>{var Xt,kn,Jn;if(!es.current||!Pe||((Xt=window.getSelection())==null?void 0:Xt.toString().length)>0)return;const hn=et.clientY-es.current.y,In=et.clientX-es.current.x;var bo;const qn=(bo=e.swipeDirections)!=null?bo:PF(te);!ue&&(Math.abs(In)>1||Math.abs(hn)>1)&&fe(Math.abs(In)>Math.abs(hn)?"x":"y");let Lr={x:0,y:0};const xo=ei=>1/(1.5+Math.abs(ei)/20);if(ue==="y"){if(qn.includes("top")||qn.includes("bottom"))if(qn.includes("top")&&hn<0||qn.includes("bottom")&&hn>0)Lr.y=hn;else{const ei=hn*xo(hn);Lr.y=Math.abs(ei)<Math.abs(hn)?ei:hn}}else if(ue==="x"&&(qn.includes("left")||qn.includes("right")))if(qn.includes("left")&&In<0||qn.includes("right")&&In>0)Lr.x=In;else{const ei=In*xo(In);Lr.x=Math.abs(ei)<Math.abs(In)?ei:In}(Math.abs(Lr.x)>0||Math.abs(Lr.y)>0)&&ct(!0),(kn=Zn.current)==null||kn.style.setProperty("--swipe-amount-x",`${Lr.x}px`),(Jn=Zn.current)==null||Jn.style.setProperty("--swipe-amount-y",`${Lr.y}px`)}},pt&&!p.jsx&&ne!=="loading"?ye.createElement("button",{"aria-label":U,"data-disabled":ts,"data-close-button":!0,onClick:ts||!Pe?()=>{}:()=>{Xr(),p.onDismiss==null||p.onDismiss.call(p,p)},className:cs(X?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Hl=me?.close)!=null?Hl:mF):null,(ne||p.icon||p.promise)&&p.icon!==null&&(me?.[ne]!==null||p.icon)?ye.createElement("div",{"data-icon":"",className:cs(X?.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ql():null,p.type!=="loading"?vo:null):null,ye.createElement("div",{"data-content":"",className:cs(X?.content,p==null||(s=p.classNames)==null?void 0:s.content)},ye.createElement("div",{"data-title":"",className:cs(X?.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?ye.createElement("div",{"data-description":"",className:cs(q,Ce,X?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),ye.isValidElement(p.cancel)?p.cancel:p.cancel&&Xh(p.cancel)?ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:et=>{Xh(p.cancel)&&Pe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,et),Xr())},className:cs(X?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,ye.isValidElement(p.action)?p.action:p.action&&Xh(p.action)?ye.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||D,onClick:et=>{Xh(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,et),!et.defaultPrevented&&Xr())},className:cs(X?.actionButton,p==null||(h=p.classNames)==null?void 0:h.actionButton)},p.action.label):null)};function tC(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function RF(e,t){const n={};return[e,t].forEach((r,i)=>{const s=i===1,o=s?"--mobile-offset":"--offset",l=s?CF:SF;function d(h){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${o}-${h}`]=l:n[`${o}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(l)}),n}const AF=ye.forwardRef(function(t,n){const{id:r,invert:i,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:d,className:h,offset:f,mobileOffset:p,theme:y="light",richColors:b,duration:k,style:x,visibleToasts:S=kF,toastOptions:E,dir:T=tC(),gap:P=TF,icons:j,containerAriaLabel:N="Notifications"}=t,[R,A]=ye.useState([]),I=ye.useMemo(()=>r?R.filter(pe=>pe.toasterId===r):R.filter(pe=>!pe.toasterId),[R,r]),D=ye.useMemo(()=>Array.from(new Set([s].concat(I.filter(pe=>pe.position).map(pe=>pe.position)))),[I,s]),[z,q]=ye.useState([]),[V,te]=ye.useState(!1),[J,we]=ye.useState(!1),[X,me]=ye.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=ye.useRef(null),ue=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),fe=ye.useRef(null),F=ye.useRef(!1),ie=ye.useCallback(pe=>{A(oe=>{var Se;return(Se=oe.find(Ae=>Ae.id===pe.id))!=null&&Se.delete||Er.dismiss(pe.id),oe.filter(({id:Ae})=>Ae!==pe.id)})},[]);return ye.useEffect(()=>Er.subscribe(pe=>{if(pe.dismiss){requestAnimationFrame(()=>{A(oe=>oe.map(Se=>Se.id===pe.id?{...Se,delete:!0}:Se))});return}setTimeout(()=>{WN.flushSync(()=>{A(oe=>{const Se=oe.findIndex(Ae=>Ae.id===pe.id);return Se!==-1?[...oe.slice(0,Se),{...oe[Se],...pe},...oe.slice(Se+1)]:[pe,...oe]})})})}),[R]),ye.useEffect(()=>{if(y!=="system"){me(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?me("dark"):me("light")),typeof window>"u")return;const pe=window.matchMedia("(prefers-color-scheme: dark)");try{pe.addEventListener("change",({matches:oe})=>{me(oe?"dark":"light")})}catch{pe.addListener(({matches:Se})=>{try{me(Se?"dark":"light")}catch(Ae){console.error(Ae)}})}},[y]),ye.useEffect(()=>{R.length<=1&&te(!1)},[R]),ye.useEffect(()=>{const pe=oe=>{var Se;if(o.every(ke=>oe[ke]||oe.code===ke)){var ae;te(!0),(ae=U.current)==null||ae.focus()}oe.code==="Escape"&&(document.activeElement===U.current||(Se=U.current)!=null&&Se.contains(document.activeElement))&&te(!1)};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[o]),ye.useEffect(()=>{if(U.current)return()=>{fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null,F.current=!1)}},[U.current]),ye.createElement("section",{ref:n,"aria-label":`${N} ${ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((pe,oe)=>{var Se;const[Ae,ae]=pe.split("-");return I.length?ye.createElement("ol",{key:pe,dir:T==="auto"?tC():T,tabIndex:-1,ref:U,className:h,"data-sonner-toaster":!0,"data-sonner-theme":X,"data-y-position":Ae,"data-x-position":ae,style:{"--front-toast-height":`${((Se=z[0])==null?void 0:Se.height)||0}px`,"--width":`${EF}px`,"--gap":`${P}px`,...x,...RF(f,p)},onBlur:ke=>{F.current&&!ke.currentTarget.contains(ke.relatedTarget)&&(F.current=!1,fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null))},onFocus:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||F.current||(F.current=!0,fe.current=ke.relatedTarget)},onMouseEnter:()=>te(!0),onMouseMove:()=>te(!0),onMouseLeave:()=>{J||te(!1)},onDragEnd:()=>te(!1),onPointerDown:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||we(!0)},onPointerUp:()=>we(!1)},I.filter(ke=>!ke.position&&oe===0||ke.position===pe).map((ke,Ue)=>{var qe,nt;return ye.createElement(_F,{key:ke.id,icons:j,index:Ue,toast:ke,defaultRichColors:b,duration:(qe=E?.duration)!=null?qe:k,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:i,visibleToasts:S,closeButton:(nt=E?.closeButton)!=null?nt:d,interacting:J,position:pe,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:ie,toasts:I.filter(ct=>ct.position==ke.position),heights:z.filter(ct=>ct.position==ke.position),setHeights:q,expandByDefault:l,gap:P,expanded:V,swipeDirections:t.swipeDirections})})):null}))});function nC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function R2(...e){return t=>{let n=!1;const r=e.map(i=>{const s=nC(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():nC(e[i],null)}}}}function bt(...e){return g.useCallback(R2(...e),e)}function Wa(e){const t=IF(e),n=g.forwardRef((r,i)=>{const{children:s,...o}=r,l=g.Children.toArray(s),d=l.find(MF);if(d){const h=d.props.children,f=l.map(p=>p===d?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:p);return c.jsx(t,{...o,ref:i,children:g.isValidElement(h)?g.cloneElement(h,void 0,f):null})}return c.jsx(t,{...o,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var A2=Wa("Slot");function IF(e){const t=g.forwardRef((n,r)=>{const{children:i,...s}=n;if(g.isValidElement(i)){const o=LF(i),l=DF(s,i.props);return i.type!==g.Fragment&&(l.ref=r?R2(r,o):o),g.cloneElement(i,l)}return g.Children.count(i)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var OF=Symbol("radix.slottable");function MF(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===OF}function DF(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{const d=s(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function LF(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function I2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=I2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function O2(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=I2(e))&&(r&&(r+=" "),r+=t);return r}const rC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,iC=O2,zb=(e,t)=>n=>{var r;if(t?.variants==null)return iC(e,n?.class,n?.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(h=>{const f=n?.[h],p=s?.[h];if(f===null)return null;const y=rC(f)||rC(p);return i[h][y]}),l=n&&Object.entries(n).reduce((h,f)=>{let[p,y]=f;return y===void 0||(h[p]=y),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:p,className:y,...b}=f;return Object.entries(b).every(k=>{let[x,S]=k;return Array.isArray(S)?S.includes({...s,...l}[x]):{...s,...l}[x]===S})?[...h,p,y]:h},[]);return iC(e,o,d,n?.class,n?.className)},$b="-",FF=e=>{const t=BF(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split($b);return l[0]===""&&l.length!==1&&l.shift(),M2(l,t)||UF(o)},getConflictingClassGroupIds:(o,l)=>{const d=n[o]||[];return l&&r[o]?[...d,...r[o]]:d}}},M2=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?M2(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join($b);return t.validators.find(({validator:o})=>o(s))?.classGroupId},sC=/^\[(.+)\]$/,UF=e=>{if(sC.test(e)){const t=sC.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},BF=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)a0(n[i],r,i,t);return r},a0=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:oC(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(zF(i)){a0(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{a0(o,oC(t,s),n,r)})})},oC=(e,t)=>{let n=e;return t.split($b).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zF=e=>e.isThemeGetter,$F=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},c0="!",l0=":",VF=l0.length,qF=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let o=0,l=0,d=0,h;for(let k=0;k<i.length;k++){let x=i[k];if(o===0&&l===0){if(x===l0){s.push(i.slice(d,k)),d=k+VF;continue}if(x==="/"){h=k;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const f=s.length===0?i:i.substring(d),p=HF(f),y=p!==f,b=h&&h>d?h-d:void 0;return{modifiers:s,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:b}};if(t){const i=t+l0,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},HF=e=>e.endsWith(c0)?e.substring(0,e.length-1):e.startsWith(c0)?e.substring(1):e,WF=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||t[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},KF=e=>({cache:$F(e.cacheSize),parseClassName:qF(e),sortModifiers:WF(e),...FF(e)}),GF=/\s+/,ZF=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,o=[],l=e.trim().split(GF);let d="";for(let h=l.length-1;h>=0;h-=1){const f=l[h],{isExternal:p,modifiers:y,hasImportantModifier:b,baseClassName:k,maybePostfixModifierPosition:x}=n(f);if(p){d=f+(d.length>0?" "+d:d);continue}let S=!!x,E=r(S?k.substring(0,x):k);if(!E){if(!S){d=f+(d.length>0?" "+d:d);continue}if(E=r(k),!E){d=f+(d.length>0?" "+d:d);continue}S=!1}const T=s(y).join(":"),P=b?T+c0:T,j=P+E;if(o.includes(j))continue;o.push(j);const N=i(E,S);for(let R=0;R<N.length;++R){const A=N[R];o.push(P+A)}d=f+(d.length>0?" "+d:d)}return d};function JF(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=D2(t))&&(r&&(r+=" "),r+=n);return r}const D2=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=D2(e[r]))&&(n&&(n+=" "),n+=t);return n};function QF(e,...t){let n,r,i,s=o;function o(d){const h=t.reduce((f,p)=>p(f),e());return n=KF(h),r=n.cache.get,i=n.cache.set,s=l,l(d)}function l(d){const h=r(d);if(h)return h;const f=ZF(d,n);return i(d,f),f}return function(){return s(JF.apply(null,arguments))}}const En=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},L2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,F2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,YF=/^\d+\/\d+$/,XF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,n6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fc=e=>YF.test(e),ot=e=>!!e&&!Number.isNaN(Number(e)),Bo=e=>!!e&&Number.isInteger(Number(e)),Gv=e=>e.endsWith("%")&&ot(e.slice(0,-1)),qs=e=>XF.test(e),i6=()=>!0,s6=e=>e6.test(e)&&!t6.test(e),U2=()=>!1,o6=e=>n6.test(e),a6=e=>r6.test(e),c6=e=>!De(e)&&!Le(e),l6=e=>_l(e,$2,U2),De=e=>L2.test(e),_a=e=>_l(e,V2,s6),Zv=e=>_l(e,m6,ot),aC=e=>_l(e,B2,U2),u6=e=>_l(e,z2,a6),ef=e=>_l(e,q2,o6),Le=e=>F2.test(e),Pu=e=>Rl(e,V2),d6=e=>Rl(e,p6),cC=e=>Rl(e,B2),h6=e=>Rl(e,$2),f6=e=>Rl(e,z2),tf=e=>Rl(e,q2,!0),_l=(e,t,n)=>{const r=L2.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Rl=(e,t,n=!1)=>{const r=F2.exec(e);return r?r[1]?t(r[1]):n:!1},B2=e=>e==="position"||e==="percentage",z2=e=>e==="image"||e==="url",$2=e=>e==="length"||e==="size"||e==="bg-size",V2=e=>e==="length",m6=e=>e==="number",p6=e=>e==="family-name",q2=e=>e==="shadow",g6=()=>{const e=En("color"),t=En("font"),n=En("text"),r=En("font-weight"),i=En("tracking"),s=En("leading"),o=En("breakpoint"),l=En("container"),d=En("spacing"),h=En("radius"),f=En("shadow"),p=En("inset-shadow"),y=En("text-shadow"),b=En("drop-shadow"),k=En("blur"),x=En("perspective"),S=En("aspect"),E=En("ease"),T=En("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...j(),Le,De],R=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],I=()=>[Le,De,d],D=()=>[Fc,"full","auto",...I()],z=()=>[Bo,"none","subgrid",Le,De],q=()=>["auto",{span:["full",Bo,Le,De]},Bo,Le,De],V=()=>[Bo,"auto",Le,De],te=()=>["auto","min","max","fr",Le,De],J=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],we=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...I()],me=()=>[Fc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],U=()=>[e,Le,De],ue=()=>[...j(),cC,aC,{position:[Le,De]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",h6,l6,{size:[Le,De]}],ie=()=>[Gv,Pu,_a],pe=()=>["","none","full",h,Le,De],oe=()=>["",ot,Pu,_a],Se=()=>["solid","dashed","dotted","double"],Ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[ot,Gv,cC,aC],ke=()=>["","none",k,Le,De],Ue=()=>["none",ot,Le,De],qe=()=>["none",ot,Le,De],nt=()=>[ot,Le,De],ct=()=>[Fc,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qs],breakpoint:[qs],color:[i6],container:[qs],"drop-shadow":[qs],ease:["in","out","in-out"],font:[c6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qs],shadow:[qs],spacing:["px",ot],text:[qs],"text-shadow":[qs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fc,De,Le,S]}],container:["container"],columns:[{columns:[ot,De,Le,l]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Bo,"auto",Le,De]}],basis:[{basis:[Fc,"full","auto",l,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,Fc,"auto","initial","none",De]}],grow:[{grow:["",ot,Le,De]}],shrink:[{shrink:["",ot,Le,De]}],order:[{order:[Bo,"first","last","none",Le,De]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":te()}],"auto-rows":[{"auto-rows":te()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...J(),"normal"]}],"justify-items":[{"justify-items":[...we(),"normal"]}],"justify-self":[{"justify-self":["auto",...we()]}],"align-content":[{content:["normal",...J()]}],"align-items":[{items:[...we(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...we(),{baseline:["","last"]}]}],"place-content":[{"place-content":J()}],"place-items":[{"place-items":[...we(),"baseline"]}],"place-self":[{"place-self":["auto",...we()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:me()}],w:[{w:[l,"screen",...me()]}],"min-w":[{"min-w":[l,"screen","none",...me()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...me()]}],h:[{h:["screen","lh",...me()]}],"min-h":[{"min-h":["screen","lh","none",...me()]}],"max-h":[{"max-h":["screen","lh",...me()]}],"font-size":[{text:["base",n,Pu,_a]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,Zv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Gv,De]}],"font-family":[{font:[d6,De,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Le,De]}],"line-clamp":[{"line-clamp":[ot,"none",Le,Zv]}],leading:[{leading:[s,...I()]}],"list-image":[{"list-image":["none",Le,De]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,De]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Se(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",Le,_a]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[ot,"auto",Le,De]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bo,Le,De],radial:["",Le,De],conic:[Bo,Le,De]},f6,u6]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Se(),"hidden","none"]}],"divide-style":[{divide:[...Se(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...Se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,Le,De]}],"outline-w":[{outline:["",ot,Pu,_a]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",f,tf,ef]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",p,tf,ef]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[ot,_a]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",y,tf,ef]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[ot,Le,De]}],"mix-blend":[{"mix-blend":[...Ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Le,De]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,De]}],filter:[{filter:["","none",Le,De]}],blur:[{blur:ke()}],brightness:[{brightness:[ot,Le,De]}],contrast:[{contrast:[ot,Le,De]}],"drop-shadow":[{"drop-shadow":["","none",b,tf,ef]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",ot,Le,De]}],"hue-rotate":[{"hue-rotate":[ot,Le,De]}],invert:[{invert:["",ot,Le,De]}],saturate:[{saturate:[ot,Le,De]}],sepia:[{sepia:["",ot,Le,De]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,De]}],"backdrop-blur":[{"backdrop-blur":ke()}],"backdrop-brightness":[{"backdrop-brightness":[ot,Le,De]}],"backdrop-contrast":[{"backdrop-contrast":[ot,Le,De]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,Le,De]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,Le,De]}],"backdrop-invert":[{"backdrop-invert":["",ot,Le,De]}],"backdrop-opacity":[{"backdrop-opacity":[ot,Le,De]}],"backdrop-saturate":[{"backdrop-saturate":[ot,Le,De]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,Le,De]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,De]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",Le,De]}],ease:[{ease:["linear","initial",E,Le,De]}],delay:[{delay:[ot,Le,De]}],animate:[{animate:["none",T,Le,De]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Le,De]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:Ue()}],"rotate-x":[{"rotate-x":Ue()}],"rotate-y":[{"rotate-y":Ue()}],"rotate-z":[{"rotate-z":Ue()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:nt()}],"skew-x":[{"skew-x":nt()}],"skew-y":[{"skew-y":nt()}],transform:[{transform:[Le,De,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ct()}],"translate-x":[{"translate-x":ct()}],"translate-y":[{"translate-y":ct()}],"translate-z":[{"translate-z":ct()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,De]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,De]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[ot,Pu,_a,Zv]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},v6=QF(g6);function ut(...e){return v6(O2(e))}const y6=zb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Q=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const o=r?A2:"button";return c.jsx(o,{"data-slot":"button",className:ut(y6({variant:t,size:n,className:e})),ref:s,...i})});Q.displayName="Button";function le({className:e,...t}){return c.jsx("div",{"data-slot":"card",className:ut("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Oe({className:e,...t}){return c.jsx("div",{"data-slot":"card-header",className:ut("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function $e({className:e,...t}){return c.jsx("h4",{"data-slot":"card-title",className:ut("leading-none",e),...t})}function tr({className:e,...t}){return c.jsx("p",{"data-slot":"card-description",className:ut("text-muted-foreground",e),...t})}function de({className:e,...t}){return c.jsx("div",{"data-slot":"card-content",className:ut("px-6 [&:last-child]:pb-6",e),...t})}function H2({className:e,...t}){return c.jsx("div",{"data-slot":"card-footer",className:ut("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})}const b6=zb("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ze({className:e,variant:t,asChild:n=!1,...r}){const i=n?A2:"span";return c.jsx(i,{"data-slot":"badge",className:ut(b6({variant:t}),e),...r})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w6=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),lC=e=>{const t=w6(e);return t.charAt(0).toUpperCase()+t.slice(1)},W2=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},d)=>g.createElement("svg",{ref:d,...k6,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:W2("lucide",i),...l},[...o.map(([h,f])=>g.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(e,t)=>{const n=g.forwardRef(({className:r,...i},s)=>g.createElement(S6,{ref:s,iconNode:t,className:W2(`lucide-${x6(lC(e))}`,`lucide-${e}`,r),...i}));return n.displayName=lC(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],em=_e("activity",C6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Di=_e("arrow-left",E6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jv=_e("arrow-right",T6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],j6=_e("arrow-up-down",N6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_6=_e("award",P6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]],A6=_e("baby",R6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Qv=_e("bell",I6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],uC=_e("brain",O6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],K2=_e("building",M6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pn=_e("calendar",D6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],F6=_e("camera",L6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],B6=_e("chart-column",U6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xo=_e("check",z6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vb=_e("chevron-down",$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],q6=_e("chevron-left",V6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W6=_e("chevron-right",H6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],G2=_e("chevron-up",K6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],so=_e("circle-alert",G6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tm=_e("circle-check-big",Z6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ko=_e("circle-check",J6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Go=_e("circle-x",Q6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],X6=_e("circle",Y6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Z2=_e("clipboard-list",eU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ir=_e("clock",tU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Nf=_e("credit-card",nU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],J2=_e("crown",rU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Q2=_e("dollar-sign",iU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Li=_e("download",sU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Y2=_e("external-link",oU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ua=_e("eye-off",aU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],to=_e("eye",cU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ir=_e("file-text",lU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],dU=_e("funnel",uU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],fU=_e("gift",hU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ul=_e("globe",mU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],gU=_e("graduation-cap",pU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],jf=_e("heart",vU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],bU=_e("key",yU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],dC=_e("languages",xU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],kU=_e("lightbulb",wU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Kn=_e("loader-circle",SU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qb=_e("lock",CU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],TU=_e("log-out",EU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Xu=_e("mail",NU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],X2=_e("map-pin",jU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],dl=_e("message-square",PU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],RU=_e("mic-off",_U);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],IU=_e("mic",AU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],MU=_e("monitor",OU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ej=_e("pencil",DU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],FU=_e("phone-off",LU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],nm=_e("phone",UU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Hb=_e("pill",BU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rm=_e("plus",zU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],VU=_e("save",$U);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ed=_e("search",qU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],np=_e("send",HU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tj=_e("settings",WU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],GU=_e("share",KU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JU=_e("shield-check",ZU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],im=_e("shield",QU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],u0=_e("star",YU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],d0=_e("stethoscope",XU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],nj=_e("trash-2",eB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Wb=_e("trending-up",tB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Wc=_e("triangle-alert",nB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],h0=_e("upload",rB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sB=_e("user-plus",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hl=_e("user",oB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Kb=_e("users",aB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Yv=_e("video-off",cB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Wr=_e("video",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],dB=_e("volume-2",uB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],fB=_e("volume-x",hB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pB=_e("wifi-off",mB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],vB=_e("wifi",gB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ka=_e("x",yB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xB=_e("zap",bB);function wB(){const e=_t(),[t,n]=g.useState(null),r=[{id:"free",name:"Gratuito",price:"$0",period:"/mes",description:"Perfecto para comenzar tu cuidado de salud",features:["1 consulta al mes","Videollamadas básicas","Chat con traducción","Historial médico básico","Soporte por email"],color:"border-gray-200",buttonVariant:"outline",popular:!1},{id:"basic",name:"Básico",price:"$29",period:"/mes",description:"Ideal para cuidado médico regular",features:["5 consultas al mes","Videollamadas HD","Traducción en tiempo real","Historial médico completo","Recetas digitales","Análisis básicos","Soporte prioritario 24/7"],color:"border-teal-500",buttonVariant:"default",popular:!0},{id:"premium",name:"Premium",price:"$79",period:"/mes",description:"Acceso completo a todos los servicios",features:["Consultas ilimitadas","Videollamadas 4K","Traducción AI avanzada","Grabación de consultas","Especialistas premium","Análisis completos","Consultas de emergencia","Planes familiares"],color:"border-yellow-400",buttonVariant:"default",popular:!1}],i=[{name:"Cardiología",icon:jf,color:"text-red-500"},{name:"Neurología",icon:uC,color:"text-purple-500"},{name:"Medicina General",icon:d0,color:"text-blue-500"},{name:"Oftalmología",icon:to,color:"text-green-500"},{name:"Pediatría",icon:A6,color:"text-pink-500"},{name:"Dermatología",icon:em,color:"text-orange-500"}],s=[{code:"ES",name:"Español",flag:"🇪🇸"},{code:"EN",name:"English",flag:"🇬🇧"},{code:"FR",name:"Français",flag:"🇫🇷"},{code:"DE",name:"Deutsch",flag:"🇩🇪"},{code:"PT",name:"Português",flag:"🇵🇹"},{code:"ZH",name:"中文",flag:"🇨🇳"}],o=[{name:"LiveKit",description:"Videollamadas de alta calidad en tiempo real",icon:Wr},{name:"OpenAI",description:"Traducción inteligente con IA",icon:uC},{name:"React",description:"Interfaz moderna y rápida",icon:xB},{name:"Node.js",description:"Backend robusto y escalable",icon:im}],l=[{value:"50K+",label:"Usuarios Activos",icon:Kb},{value:"4.9/5",label:"Rating Promedio",icon:u0},{value:"100+",label:"Médicos Certificados",icon:d0},{value:"24/7",label:"Soporte Disponible",icon:ir}],d="rounded-full px-6 !bg-emerald-700 !text-white !hover:bg-emerald-800 shadow-md hover:shadow-lg focus-visible:ring-2 !focus-visible:ring-emerald-400 disabled:opacity-100 disabled:pointer-events-auto";return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-blue-50",children:[c.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-lg border-b border-gray-200",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-blue-600 rounded-lg flex items-center justify-center",children:c.jsx(jf,{className:"h-6 w-6 text-white"})}),c.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-teal-600 to-blue-600 bg-clip-text text-transparent",children:"Salud Sin Fronteras"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{className:d,onClick:()=>e("/login"),children:"Iniciar Sesión"}),c.jsx(Q,{className:d,onClick:()=>e("/login"),children:"Registrarse"})]})]})})}),c.jsx("section",{className:"relative overflow-hidden py-20 px-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsx(Ze,{className:"bg-teal-100 text-teal-700 hover:bg-teal-200",children:"🌍 Telemedicina Sin Fronteras"}),c.jsxs("h1",{className:"text-5xl md:text-6xl font-bold leading-tight",children:["Tu salud,"," ",c.jsx("span",{className:"bg-gradient-to-r from-teal-600 to-blue-600 bg-clip-text text-transparent",children:"sin fronteras"})]}),c.jsx("p",{className:"text-xl text-gray-600",children:"Conectamos pacientes con médicos certificados de todo el mundo. Consultas médicas profesionales con traducción en tiempo real, disponible 24/7 desde cualquier lugar."}),c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsxs(Q,{size:"lg",className:d,onClick:()=>e("/login"),children:["Comenzar Ahora",c.jsx(Jv,{className:"ml-2 h-5 w-5"})]}),c.jsxs(Q,{size:"lg",className:d,onClick:()=>e("/login"),children:["Ver Demo",c.jsx(Wr,{className:"ml-2 h-5 w-5"})]})]}),c.jsxs("div",{className:"flex items-center gap-6 pt-4",children:[c.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4].map(h=>c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-blue-500 border-2 border-white flex items-center justify-center text-white font-semibold",children:String.fromCharCode(64+h)},h))}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:"50,000+ usuarios activos"}),c.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(h=>c.jsx(u0,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},h)),c.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"4.9/5 Rating"})]})]})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative z-10",children:c.jsx("img",{src:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=600&fit=crop",alt:"Doctor consultation",className:"rounded-2xl shadow-2xl"})}),c.jsx("div",{className:"absolute -top-4 -right-4 w-72 h-72 bg-gradient-to-br from-teal-400 to-blue-500 rounded-full blur-3xl opacity-20"}),c.jsx("div",{className:"absolute -bottom-4 -left-4 w-72 h-72 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full blur-3xl opacity-20"})]})]})})}),c.jsx("section",{className:"py-16 bg-white",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4",children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:l.map((h,f)=>c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-100 to-blue-100 rounded-full mb-4",children:c.jsx(h.icon,{className:"h-8 w-8 text-teal-600"})}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:h.value}),c.jsx("p",{className:"text-gray-600",children:h.label})]},f))})})}),c.jsx("section",{className:"py-20 px-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx(Ze,{className:"bg-blue-100 text-blue-700 mb-4",children:"✨ Características"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"¿Por qué elegirnos?"}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Ofrecemos la mejor experiencia de telemedicina con tecnología de punta"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[c.jsx(le,{className:"border-2 hover:border-teal-500 transition-all hover:shadow-lg",children:c.jsxs(Oe,{children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-100 to-blue-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(ul,{className:"h-6 w-6 text-teal-600"})}),c.jsx($e,{children:"Sin Barreras de Idioma"}),c.jsx(tr,{children:"Traducción en tiempo real en más de 100 idiomas con IA avanzada"})]})}),c.jsx(le,{className:"border-2 hover:border-blue-500 transition-all hover:shadow-lg",children:c.jsxs(Oe,{children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(Wr,{className:"h-6 w-6 text-blue-600"})}),c.jsx($e,{children:"Videollamadas HD/4K"}),c.jsx(tr,{children:"Consultas médicas con calidad de imagen superior usando LiveKit"})]})}),c.jsx(le,{className:"border-2 hover:border-purple-500 transition-all hover:shadow-lg",children:c.jsxs(Oe,{children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(im,{className:"h-6 w-6 text-purple-600"})}),c.jsx($e,{children:"100% Seguro"}),c.jsx(tr,{children:"Encriptación de extremo a extremo y cumplimiento HIPAA"})]})}),c.jsx(le,{className:"border-2 hover:border-green-500 transition-all hover:shadow-lg",children:c.jsxs(Oe,{children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-teal-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(ir,{className:"h-6 w-6 text-green-600"})}),c.jsx($e,{children:"Disponible 24/7"}),c.jsx(tr,{children:"Médicos disponibles las 24 horas, todos los días del año"})]})}),c.jsx(le,{className:"border-2 hover:border-yellow-500 transition-all hover:shadow-lg",children:c.jsxs(Oe,{children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(_6,{className:"h-6 w-6 text-yellow-600"})}),c.jsx($e,{children:"Médicos Certificados"}),c.jsx(tr,{children:"Solo profesionales verificados con años de experiencia"})]})}),c.jsx(le,{className:"border-2 hover:border-pink-500 transition-all hover:shadow-lg",children:c.jsxs(Oe,{children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-100 to-red-100 rounded-lg flex items-center justify-center mb-4",children:c.jsx(Wb,{className:"h-6 w-6 text-pink-600"})}),c.jsx($e,{children:"Historial Médico"}),c.jsx(tr,{children:"Toda tu información médica en un solo lugar, siempre accesible"})]})})]})]})}),c.jsx("section",{className:"py-20 px-4 bg-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx(Ze,{className:"bg-purple-100 text-purple-700 mb-4",children:"🏥 Especialidades"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Nuestras Especialidades Médicas"}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Conectamos con especialistas en diversas áreas de la medicina"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:i.map((h,f)=>c.jsx(le,{className:"text-center hover:shadow-lg transition-all cursor-pointer border-2 hover:border-teal-500",children:c.jsxs(de,{className:"p-6",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-100 to-blue-100 rounded-full flex items-center justify-center",children:c.jsx(h.icon,{className:`h-8 w-8 ${h.color}`})})}),c.jsx("p",{className:"font-semibold text-sm",children:h.name})]})},f))})]})}),c.jsx("section",{className:"py-20 px-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx(Ze,{className:"bg-green-100 text-green-700 mb-4",children:"🌐 Idiomas"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Hablamos tu Idioma"}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Traducción en tiempo real en más de 100 idiomas"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:s.map((h,f)=>c.jsx(le,{className:"hover:shadow-lg transition-all",children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx("div",{className:"text-4xl mb-2",children:h.flag}),c.jsx("p",{className:"font-semibold",children:h.code}),c.jsx("p",{className:"text-sm text-gray-600",children:h.name})]})},f))})]})}),c.jsx("section",{className:"py-20 px-4 bg-gradient-to-br from-gray-50 to-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx(Ze,{className:"bg-yellow-100 text-yellow-700 mb-4",children:"💰 Precios"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Planes para Todos"}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Elige el plan que mejor se adapte a tus necesidades"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map(h=>c.jsxs(le,{className:`relative transition-all hover:shadow-2xl ${h.popular?"border-4 border-teal-500 scale-105":"border-2 "+h.color}`,onMouseEnter:()=>n(h.id),onMouseLeave:()=>n(null),children:[h.popular&&c.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2"}),c.jsxs(Oe,{className:`text-center pb-8 ${h.popular?"pt-12":"pt-8"}`,children:[c.jsx($e,{className:"text-2xl mb-2",children:h.name}),c.jsxs("div",{className:"mb-4",children:[c.jsx("span",{className:"text-5xl font-bold",children:h.price}),c.jsx("span",{className:"text-gray-600",children:h.period})]}),c.jsx(tr,{className:"text-base",children:h.description})]}),c.jsxs(de,{className:"space-y-6",children:[c.jsx("ul",{className:"space-y-3",children:h.features.map((f,p)=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(Xo,{className:"h-5 w-5 text-teal-600 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:"text-sm",children:f})]},p))}),c.jsxs(Q,{className:`w-full ${d}`,size:"lg",onClick:()=>e("/login"),children:[t===h.id?"¡Comienza Ahora!":"Seleccionar Plan",c.jsx(Jv,{className:"ml-2 h-4 w-4"})]})]})]},h.id))})]})}),c.jsx("section",{className:"py-20 px-4 bg-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx(Ze,{className:"bg-indigo-100 text-indigo-700 mb-4",children:"⚡ Tecnología"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Potenciado por la Mejor Tecnología"}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Utilizamos las herramientas más avanzadas para brindarte la mejor experiencia"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:o.map((h,f)=>c.jsx(le,{className:"text-center hover:shadow-lg transition-all border-2 hover:border-indigo-500",children:c.jsxs(de,{className:"p-8",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(h.icon,{className:"h-8 w-8 text-indigo-600"})}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:h.name}),c.jsx("p",{className:"text-sm text-gray-600",children:h.description})]})},f))})]})}),c.jsx("section",{className:"py-20 px-4 bg-white border-y-2",children:c.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-black",children:"¿Listo para Transformar tu Salud?"}),c.jsx("p",{className:"text-xl mb-8 text-gray-700",children:"Únete a miles de usuarios que ya confían en Salud Sin Fronteras"}),c.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[c.jsxs(Q,{size:"lg",className:d,onClick:()=>e("/login"),children:["Comenzar Gratis",c.jsx(Jv,{className:"ml-2 h-5 w-5"})]}),c.jsxs(Q,{size:"lg",className:d,onClick:()=>e("/login"),children:["Hablar con Ventas",c.jsx(nm,{className:"ml-2 h-5 w-5"})]})]})]})}),c.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12 px-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-teal-500 to-blue-600 rounded-lg flex items-center justify-center",children:c.jsx(jf,{className:"h-5 w-5 text-white"})}),c.jsx("span",{className:"text-white font-bold",children:"Salud Sin Fronteras"})]}),c.jsx("p",{className:"text-sm",children:"Conectando pacientes con médicos de todo el mundo, sin barreras de idioma."})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold mb-4",children:"Producto"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Características"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Precios"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Especialidades"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Médicos"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold mb-4",children:"Compañía"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Sobre Nosotros"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Blog"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Carreras"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contacto"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold mb-4",children:"Contacto"}),c.jsxs("ul",{className:"space-y-3 text-sm",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(Xu,{className:"h-4 w-4"}),c.jsx("span",{children:"info@saludsinfronteras.com"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(nm,{className:"h-4 w-4"}),c.jsx("span",{children:"+1 (555) 123-4567"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(ul,{className:"h-4 w-4"}),c.jsx("span",{children:"24/7 Soporte"})]})]})]})]}),c.jsx("div",{className:"border-t border-gray-800 pt-8 text-center text-sm",children:c.jsxs("p",{children:["© 2025 Salud Sin Fronteras. Todos los derechos reservados. |"," ",c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Privacidad"})," ","|"," ",c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Términos"})]})})]})})]})}function At({className:e,type:t,...n}){return c.jsx("input",{type:t,"data-slot":"input",className:ut("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var kB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=kB.reduce((e,t)=>{const n=Wa(`Primitive.${t}`),r=g.forwardRef((i,s)=>{const{asChild:o,...l}=i,d=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(d,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function SB(e,t){e&&xd.flushSync(()=>e.dispatchEvent(t))}var CB="Label",rj=g.forwardRef((e,t)=>c.jsx(Qe.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));rj.displayName=CB;var EB=rj;function wt({className:e,...t}){return c.jsx(EB,{"data-slot":"label",className:ut("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function f0(e,[t,n]){return Math.min(n,Math.max(t,e))}function Je(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function TB(e,t){const n=g.createContext(t),r=s=>{const{children:o,...l}=s,d=g.useMemo(()=>l,Object.values(l));return c.jsx(n.Provider,{value:d,children:o})};r.displayName=e+"Provider";function i(s){const o=g.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function Ji(e,t=[]){let n=[];function r(s,o){const l=g.createContext(o),d=n.length;n=[...n,o];const h=p=>{const{scope:y,children:b,...k}=p,x=y?.[e]?.[d]||l,S=g.useMemo(()=>k,Object.values(k));return c.jsx(x.Provider,{value:S,children:b})};h.displayName=s+"Provider";function f(p,y){const b=y?.[e]?.[d]||l,k=g.useContext(b);if(k)return k;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[h,f]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(l){const d=l?.[e]||s;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return i.scopeName=e,[r,NB(i,...t)]}function NB(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:d,scopeName:h})=>{const p=d(s)[`__scope${h}`];return{...l,...p}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function ij(e){const t=e+"CollectionProvider",[n,r]=Ji(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:S,children:E}=x,T=ye.useRef(null),P=ye.useRef(new Map).current;return c.jsx(i,{scope:S,itemMap:P,collectionRef:T,children:E})};o.displayName=t;const l=e+"CollectionSlot",d=Wa(l),h=ye.forwardRef((x,S)=>{const{scope:E,children:T}=x,P=s(l,E),j=bt(S,P.collectionRef);return c.jsx(d,{ref:j,children:T})});h.displayName=l;const f=e+"CollectionItemSlot",p="data-radix-collection-item",y=Wa(f),b=ye.forwardRef((x,S)=>{const{scope:E,children:T,...P}=x,j=ye.useRef(null),N=bt(S,j),R=s(f,E);return ye.useEffect(()=>(R.itemMap.set(j,{ref:j,...P}),()=>void R.itemMap.delete(j))),c.jsx(y,{[p]:"",ref:N,children:T})});b.displayName=f;function k(x){const S=s(e+"CollectionConsumer",x);return ye.useCallback(()=>{const T=S.collectionRef.current;if(!T)return[];const P=Array.from(T.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((R,A)=>P.indexOf(R.ref.current)-P.indexOf(A.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:h,ItemSlot:b},k,r]}var jB=g.createContext(void 0);function Ed(e){const t=g.useContext(jB);return e||t||"ltr"}function rr(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>t.current?.(...n),[])}function PB(e,t=globalThis?.document){const n=rr(e);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var _B="DismissableLayer",m0="dismissableLayer.update",RB="dismissableLayer.pointerDownOutside",AB="dismissableLayer.focusOutside",hC,sj=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rp=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...d}=e,h=g.useContext(sj),[f,p]=g.useState(null),y=f?.ownerDocument??globalThis?.document,[,b]=g.useState({}),k=bt(t,A=>p(A)),x=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=x.indexOf(S),T=f?x.indexOf(f):-1,P=h.layersWithOutsidePointerEventsDisabled.size>0,j=T>=E,N=MB(A=>{const I=A.target,D=[...h.branches].some(z=>z.contains(I));!j||D||(i?.(A),o?.(A),A.defaultPrevented||l?.())},y),R=DB(A=>{const I=A.target;[...h.branches].some(z=>z.contains(I))||(s?.(A),o?.(A),A.defaultPrevented||l?.())},y);return PB(A=>{T===h.layers.size-1&&(r?.(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},y),g.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(hC=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),fC(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=hC)}},[f,y,n,h]),g.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),fC())},[f,h]),g.useEffect(()=>{const A=()=>b({});return document.addEventListener(m0,A),()=>document.removeEventListener(m0,A)},[]),c.jsx(Qe.div,{...d,ref:k,style:{pointerEvents:P?j?"auto":"none":void 0,...e.style},onFocusCapture:Je(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Je(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Je(e.onPointerDownCapture,N.onPointerDownCapture)})});rp.displayName=_B;var IB="DismissableLayerBranch",OB=g.forwardRef((e,t)=>{const n=g.useContext(sj),r=g.useRef(null),i=bt(t,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),c.jsx(Qe.div,{...e,ref:i})});OB.displayName=IB;function MB(e,t=globalThis?.document){const n=rr(e),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let d=function(){oj(RB,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function DB(e,t=globalThis?.document){const n=rr(e),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&oj(AB,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fC(){const e=new CustomEvent(m0);document.dispatchEvent(e)}function oj(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?SB(i,s):i.dispatchEvent(s)}var Xv=0;function Gb(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??mC()),document.body.insertAdjacentElement("beforeend",e[1]??mC()),Xv++,()=>{Xv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Xv--}},[])}function mC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ey="focusScope.autoFocusOnMount",ty="focusScope.autoFocusOnUnmount",pC={bubbles:!1,cancelable:!0},LB="FocusScope",ip=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[l,d]=g.useState(null),h=rr(i),f=rr(s),p=g.useRef(null),y=bt(t,x=>d(x)),b=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let x=function(P){if(b.paused||!l)return;const j=P.target;l.contains(j)?p.current=j:Vo(p.current,{select:!0})},S=function(P){if(b.paused||!l)return;const j=P.relatedTarget;j!==null&&(l.contains(j)||Vo(p.current,{select:!0}))},E=function(P){if(document.activeElement===document.body)for(const N of P)N.removedNodes.length>0&&Vo(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",S);const T=new MutationObserver(E);return l&&T.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",S),T.disconnect()}}},[r,l,b.paused]),g.useEffect(()=>{if(l){vC.add(b);const x=document.activeElement;if(!l.contains(x)){const E=new CustomEvent(ey,pC);l.addEventListener(ey,h),l.dispatchEvent(E),E.defaultPrevented||(FB(VB(aj(l)),{select:!0}),document.activeElement===x&&Vo(l))}return()=>{l.removeEventListener(ey,h),setTimeout(()=>{const E=new CustomEvent(ty,pC);l.addEventListener(ty,f),l.dispatchEvent(E),E.defaultPrevented||Vo(x??document.body,{select:!0}),l.removeEventListener(ty,f),vC.remove(b)},0)}}},[l,h,f,b]);const k=g.useCallback(x=>{if(!n&&!r||b.paused)return;const S=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,E=document.activeElement;if(S&&E){const T=x.currentTarget,[P,j]=UB(T);P&&j?!x.shiftKey&&E===j?(x.preventDefault(),n&&Vo(P,{select:!0})):x.shiftKey&&E===P&&(x.preventDefault(),n&&Vo(j,{select:!0})):E===T&&x.preventDefault()}},[n,r,b.paused]);return c.jsx(Qe.div,{tabIndex:-1,...o,ref:y,onKeyDown:k})});ip.displayName=LB;function FB(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Vo(r,{select:t}),document.activeElement!==n)return}function UB(e){const t=aj(e),n=gC(t,e),r=gC(t.reverse(),e);return[n,r]}function aj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gC(e,t){for(const n of e)if(!BB(n,{upTo:t}))return n}function BB(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zB(e){return e instanceof HTMLInputElement&&"select"in e}function Vo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&zB(e)&&t&&e.select()}}var vC=$B();function $B(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=yC(e,t),e.unshift(t)},remove(t){e=yC(e,t),e[0]?.resume()}}}function yC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function VB(e){return e.filter(t=>t.tagName!=="A")}var yn=globalThis?.document?g.useLayoutEffect:()=>{},qB=NN[" useId ".trim().toString()]||(()=>{}),HB=0;function no(e){const[t,n]=g.useState(qB());return yn(()=>{n(r=>r??String(HB++))},[e]),e||(t?`radix-${t}`:"")}const WB=["top","right","bottom","left"],sa=Math.min,$r=Math.max,sm=Math.round,nf=Math.floor,gs=e=>({x:e,y:e}),KB={left:"right",right:"left",bottom:"top",top:"bottom"},GB={start:"end",end:"start"};function p0(e,t,n){return $r(e,sa(t,n))}function oo(e,t){return typeof e=="function"?e(t):e}function ao(e){return e.split("-")[0]}function Al(e){return e.split("-")[1]}function Zb(e){return e==="x"?"y":"x"}function Jb(e){return e==="y"?"height":"width"}const ZB=new Set(["top","bottom"]);function ps(e){return ZB.has(ao(e))?"y":"x"}function Qb(e){return Zb(ps(e))}function JB(e,t,n){n===void 0&&(n=!1);const r=Al(e),i=Qb(e),s=Jb(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=om(o)),[o,om(o)]}function QB(e){const t=om(e);return[g0(e),t,g0(t)]}function g0(e){return e.replace(/start|end/g,t=>GB[t])}const bC=["left","right"],xC=["right","left"],YB=["top","bottom"],XB=["bottom","top"];function ez(e,t,n){switch(e){case"top":case"bottom":return n?t?xC:bC:t?bC:xC;case"left":case"right":return t?YB:XB;default:return[]}}function tz(e,t,n,r){const i=Al(e);let s=ez(ao(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(g0)))),s}function om(e){return e.replace(/left|right|bottom|top/g,t=>KB[t])}function nz(e){return{top:0,right:0,bottom:0,left:0,...e}}function cj(e){return typeof e!="number"?nz(e):{top:e,right:e,bottom:e,left:e}}function am(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function wC(e,t,n){let{reference:r,floating:i}=e;const s=ps(t),o=Qb(t),l=Jb(o),d=ao(t),h=s==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,y=r[l]/2-i[l]/2;let b;switch(d){case"top":b={x:f,y:r.y-i.height};break;case"bottom":b={x:f,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:p};break;case"left":b={x:r.x-i.width,y:p};break;default:b={x:r.x,y:r.y}}switch(Al(t)){case"start":b[o]-=y*(n&&h?-1:1);break;case"end":b[o]+=y*(n&&h?-1:1);break}return b}const rz=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:p}=wC(h,r,d),y=r,b={},k=0;for(let x=0;x<l.length;x++){const{name:S,fn:E}=l[x],{x:T,y:P,data:j,reset:N}=await E({x:f,y:p,initialPlacement:r,placement:y,strategy:i,middlewareData:b,rects:h,platform:o,elements:{reference:e,floating:t}});f=T??f,p=P??p,b={...b,[S]:{...b[S],...j}},N&&k<=50&&(k++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(h=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):N.rects),{x:f,y:p}=wC(h,y,d)),x=-1)}return{x:f,y:p,placement:y,strategy:i,middlewareData:b}};async function td(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:b=0}=oo(t,e),k=cj(b),S=l[y?p==="floating"?"reference":"floating":p],E=am(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),T=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(P))?await(s.getScale==null?void 0:s.getScale(P))||{x:1,y:1}:{x:1,y:1},N=am(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:T,offsetParent:P,strategy:d}):T);return{top:(E.top-N.top+k.top)/j.y,bottom:(N.bottom-E.bottom+k.bottom)/j.y,left:(E.left-N.left+k.left)/j.x,right:(N.right-E.right+k.right)/j.x}}const iz=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:d}=t,{element:h,padding:f=0}=oo(e,t)||{};if(h==null)return{};const p=cj(f),y={x:n,y:r},b=Qb(i),k=Jb(b),x=await o.getDimensions(h),S=b==="y",E=S?"top":"left",T=S?"bottom":"right",P=S?"clientHeight":"clientWidth",j=s.reference[k]+s.reference[b]-y[b]-s.floating[k],N=y[b]-s.reference[b],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let A=R?R[P]:0;(!A||!await(o.isElement==null?void 0:o.isElement(R)))&&(A=l.floating[P]||s.floating[k]);const I=j/2-N/2,D=A/2-x[k]/2-1,z=sa(p[E],D),q=sa(p[T],D),V=z,te=A-x[k]-q,J=A/2-x[k]/2+I,we=p0(V,J,te),X=!d.arrow&&Al(i)!=null&&J!==we&&s.reference[k]/2-(J<V?z:q)-x[k]/2<0,me=X?J<V?J-V:J-te:0;return{[b]:y[b]+me,data:{[b]:we,centerOffset:J-we-me,...X&&{alignmentOffset:me}},reset:X}}}),sz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:d,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:x=!0,...S}=oo(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=ao(i),T=ps(l),P=ao(l)===l,j=await(d.isRTL==null?void 0:d.isRTL(h.floating)),N=y||(P||!x?[om(l)]:QB(l)),R=k!=="none";!y&&R&&N.push(...tz(l,x,k,j));const A=[l,...N],I=await td(t,S),D=[];let z=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&D.push(I[E]),p){const J=JB(i,o,j);D.push(I[J[0]],I[J[1]])}if(z=[...z,{placement:i,overflows:D}],!D.every(J=>J<=0)){var q,V;const J=(((q=s.flip)==null?void 0:q.index)||0)+1,we=A[J];if(we&&(!(p==="alignment"?T!==ps(we):!1)||z.every(U=>ps(U.placement)===T?U.overflows[0]>0:!0)))return{data:{index:J,overflows:z},reset:{placement:we}};let X=(V=z.filter(me=>me.overflows[0]<=0).sort((me,U)=>me.overflows[1]-U.overflows[1])[0])==null?void 0:V.placement;if(!X)switch(b){case"bestFit":{var te;const me=(te=z.filter(U=>{if(R){const ue=ps(U.placement);return ue===T||ue==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(ue=>ue>0).reduce((ue,fe)=>ue+fe,0)]).sort((U,ue)=>U[1]-ue[1])[0])==null?void 0:te[0];me&&(X=me);break}case"initialPlacement":X=l;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function kC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function SC(e){return WB.some(t=>e[t]>=0)}const oz=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=oo(e,t);switch(r){case"referenceHidden":{const s=await td(t,{...i,elementContext:"reference"}),o=kC(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:SC(o)}}}case"escaped":{const s=await td(t,{...i,altBoundary:!0}),o=kC(s,n.floating);return{data:{escapedOffsets:o,escaped:SC(o)}}}default:return{}}}}},lj=new Set(["left","top"]);async function az(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ao(n),l=Al(n),d=ps(n)==="y",h=lj.has(o)?-1:1,f=s&&d?-1:1,p=oo(t,e);let{mainAxis:y,crossAxis:b,alignmentAxis:k}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof k=="number"&&(b=l==="end"?k*-1:k),d?{x:b*f,y:y*h}:{x:y*h,y:b*f}}const cz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=t,d=await az(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:s+d.y,data:{...d,placement:o}}}}},lz=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:S=>{let{x:E,y:T}=S;return{x:E,y:T}}},...d}=oo(e,t),h={x:n,y:r},f=await td(t,d),p=ps(ao(i)),y=Zb(p);let b=h[y],k=h[p];if(s){const S=y==="y"?"top":"left",E=y==="y"?"bottom":"right",T=b+f[S],P=b-f[E];b=p0(T,b,P)}if(o){const S=p==="y"?"top":"left",E=p==="y"?"bottom":"right",T=k+f[S],P=k-f[E];k=p0(T,k,P)}const x=l.fn({...t,[y]:b,[p]:k});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[y]:s,[p]:o}}}}}},uz=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=oo(e,t),f={x:n,y:r},p=ps(i),y=Zb(p);let b=f[y],k=f[p];const x=oo(l,t),S=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const P=y==="y"?"height":"width",j=s.reference[y]-s.floating[P]+S.mainAxis,N=s.reference[y]+s.reference[P]-S.mainAxis;b<j?b=j:b>N&&(b=N)}if(h){var E,T;const P=y==="y"?"width":"height",j=lj.has(ao(i)),N=s.reference[p]-s.floating[P]+(j&&((E=o.offset)==null?void 0:E[p])||0)+(j?0:S.crossAxis),R=s.reference[p]+s.reference[P]+(j?0:((T=o.offset)==null?void 0:T[p])||0)-(j?S.crossAxis:0);k<N?k=N:k>R&&(k=R)}return{[y]:b,[p]:k}}}},dz=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:l}=t,{apply:d=()=>{},...h}=oo(e,t),f=await td(t,h),p=ao(i),y=Al(i),b=ps(i)==="y",{width:k,height:x}=s.floating;let S,E;p==="top"||p==="bottom"?(S=p,E=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(E=p,S=y==="end"?"top":"bottom");const T=x-f.top-f.bottom,P=k-f.left-f.right,j=sa(x-f[S],T),N=sa(k-f[E],P),R=!t.middlewareData.shift;let A=j,I=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=P),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=T),R&&!y){const z=$r(f.left,0),q=$r(f.right,0),V=$r(f.top,0),te=$r(f.bottom,0);b?I=k-2*(z!==0||q!==0?z+q:$r(f.left,f.right)):A=x-2*(V!==0||te!==0?V+te:$r(f.top,f.bottom))}await d({...t,availableWidth:I,availableHeight:A});const D=await o.getDimensions(l.floating);return k!==D.width||x!==D.height?{reset:{rects:!0}}:{}}}};function sp(){return typeof window<"u"}function Il(e){return uj(e)?(e.nodeName||"").toLowerCase():"#document"}function Kr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ps(e){var t;return(t=(uj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function uj(e){return sp()?e instanceof Node||e instanceof Kr(e).Node:!1}function Ui(e){return sp()?e instanceof Element||e instanceof Kr(e).Element:!1}function ws(e){return sp()?e instanceof HTMLElement||e instanceof Kr(e).HTMLElement:!1}function CC(e){return!sp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Kr(e).ShadowRoot}const hz=new Set(["inline","contents"]);function Td(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Bi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!hz.has(i)}const fz=new Set(["table","td","th"]);function mz(e){return fz.has(Il(e))}const pz=[":popover-open",":modal"];function op(e){return pz.some(t=>{try{return e.matches(t)}catch{return!1}})}const gz=["transform","translate","scale","rotate","perspective"],vz=["transform","translate","scale","rotate","perspective","filter"],yz=["paint","layout","strict","content"];function Yb(e){const t=Xb(),n=Ui(e)?Bi(e):e;return gz.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||vz.some(r=>(n.willChange||"").includes(r))||yz.some(r=>(n.contain||"").includes(r))}function bz(e){let t=oa(e);for(;ws(t)&&!fl(t);){if(Yb(t))return t;if(op(t))return null;t=oa(t)}return null}function Xb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xz=new Set(["html","body","#document"]);function fl(e){return xz.has(Il(e))}function Bi(e){return Kr(e).getComputedStyle(e)}function ap(e){return Ui(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function oa(e){if(Il(e)==="html")return e;const t=e.assignedSlot||e.parentNode||CC(e)&&e.host||Ps(e);return CC(t)?t.host:t}function dj(e){const t=oa(e);return fl(t)?e.ownerDocument?e.ownerDocument.body:e.body:ws(t)&&Td(t)?t:dj(t)}function nd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=dj(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Kr(i);if(s){const l=v0(o);return t.concat(o,o.visualViewport||[],Td(i)?i:[],l&&n?nd(l):[])}return t.concat(i,nd(i,[],n))}function v0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hj(e){const t=Bi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ws(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,l=sm(n)!==s||sm(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function ex(e){return Ui(e)?e:e.contextElement}function Qc(e){const t=ex(e);if(!ws(t))return gs(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=hj(t);let o=(s?sm(n.width):n.width)/r,l=(s?sm(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const wz=gs(0);function fj(e){const t=Kr(e);return!Xb()||!t.visualViewport?wz:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kz(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Kr(e)?!1:t}function Ga(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=ex(e);let o=gs(1);t&&(r?Ui(r)&&(o=Qc(r)):o=Qc(e));const l=kz(s,n,r)?fj(s):gs(0);let d=(i.left+l.x)/o.x,h=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const y=Kr(s),b=r&&Ui(r)?Kr(r):r;let k=y,x=v0(k);for(;x&&r&&b!==k;){const S=Qc(x),E=x.getBoundingClientRect(),T=Bi(x),P=E.left+(x.clientLeft+parseFloat(T.paddingLeft))*S.x,j=E.top+(x.clientTop+parseFloat(T.paddingTop))*S.y;d*=S.x,h*=S.y,f*=S.x,p*=S.y,d+=P,h+=j,k=Kr(x),x=v0(k)}}return am({width:f,height:p,x:d,y:h})}function cp(e,t){const n=ap(e).scrollLeft;return t?t.left+n:Ga(Ps(e)).left+n}function mj(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-cp(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function Sz(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Ps(r),l=t?op(t.floating):!1;if(r===o||l&&s)return n;let d={scrollLeft:0,scrollTop:0},h=gs(1);const f=gs(0),p=ws(r);if((p||!p&&!s)&&((Il(r)!=="body"||Td(o))&&(d=ap(r)),ws(r))){const b=Ga(r);h=Qc(r),f.x=b.x+r.clientLeft,f.y=b.y+r.clientTop}const y=o&&!p&&!s?mj(o,d):gs(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+f.x+y.x,y:n.y*h.y-d.scrollTop*h.y+f.y+y.y}}function Cz(e){return Array.from(e.getClientRects())}function Ez(e){const t=Ps(e),n=ap(e),r=e.ownerDocument.body,i=$r(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=$r(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cp(e);const l=-n.scrollTop;return Bi(r).direction==="rtl"&&(o+=$r(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}const EC=25;function Tz(e,t){const n=Kr(e),r=Ps(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,d=0;if(i){s=i.width,o=i.height;const f=Xb();(!f||f&&t==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}const h=cp(r);if(h<=0){const f=r.ownerDocument,p=f.body,y=getComputedStyle(p),b=f.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,k=Math.abs(r.clientWidth-p.clientWidth-b);k<=EC&&(s-=k)}else h<=EC&&(s+=h);return{width:s,height:o,x:l,y:d}}const Nz=new Set(["absolute","fixed"]);function jz(e,t){const n=Ga(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=ws(e)?Qc(e):gs(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,d=i*s.x,h=r*s.y;return{width:o,height:l,x:d,y:h}}function TC(e,t,n){let r;if(t==="viewport")r=Tz(e,n);else if(t==="document")r=Ez(Ps(e));else if(Ui(t))r=jz(t,n);else{const i=fj(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return am(r)}function pj(e,t){const n=oa(e);return n===t||!Ui(n)||fl(n)?!1:Bi(n).position==="fixed"||pj(n,t)}function Pz(e,t){const n=t.get(e);if(n)return n;let r=nd(e,[],!1).filter(l=>Ui(l)&&Il(l)!=="body"),i=null;const s=Bi(e).position==="fixed";let o=s?oa(e):e;for(;Ui(o)&&!fl(o);){const l=Bi(o),d=Yb(o);!d&&l.position==="fixed"&&(i=null),(s?!d&&!i:!d&&l.position==="static"&&!!i&&Nz.has(i.position)||Td(o)&&!d&&pj(e,o))?r=r.filter(f=>f!==o):i=l,o=oa(o)}return t.set(e,r),r}function _z(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?op(t)?[]:Pz(t,this._c):[].concat(n),r],l=o[0],d=o.reduce((h,f)=>{const p=TC(t,f,i);return h.top=$r(p.top,h.top),h.right=sa(p.right,h.right),h.bottom=sa(p.bottom,h.bottom),h.left=$r(p.left,h.left),h},TC(t,l,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Rz(e){const{width:t,height:n}=hj(e);return{width:t,height:n}}function Az(e,t,n){const r=ws(t),i=Ps(t),s=n==="fixed",o=Ga(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const d=gs(0);function h(){d.x=cp(i)}if(r||!r&&!s)if((Il(t)!=="body"||Td(i))&&(l=ap(t)),r){const b=Ga(t,!0,s,t);d.x=b.x+t.clientLeft,d.y=b.y+t.clientTop}else i&&h();s&&!r&&i&&h();const f=i&&!r&&!s?mj(i,l):gs(0),p=o.left+l.scrollLeft-d.x-f.x,y=o.top+l.scrollTop-d.y-f.y;return{x:p,y,width:o.width,height:o.height}}function ny(e){return Bi(e).position==="static"}function NC(e,t){if(!ws(e)||Bi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ps(e)===n&&(n=n.ownerDocument.body),n}function gj(e,t){const n=Kr(e);if(op(e))return n;if(!ws(e)){let i=oa(e);for(;i&&!fl(i);){if(Ui(i)&&!ny(i))return i;i=oa(i)}return n}let r=NC(e,t);for(;r&&mz(r)&&ny(r);)r=NC(r,t);return r&&fl(r)&&ny(r)&&!Yb(r)?n:r||bz(e)||n}const Iz=async function(e){const t=this.getOffsetParent||gj,n=this.getDimensions,r=await n(e.floating);return{reference:Az(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Oz(e){return Bi(e).direction==="rtl"}const Mz={convertOffsetParentRelativeRectToViewportRelativeRect:Sz,getDocumentElement:Ps,getClippingRect:_z,getOffsetParent:gj,getElementRects:Iz,getClientRects:Cz,getDimensions:Rz,getScale:Qc,isElement:Ui,isRTL:Oz};function vj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Dz(e,t){let n=null,r;const i=Ps(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),s();const h=e.getBoundingClientRect(),{left:f,top:p,width:y,height:b}=h;if(l||t(),!y||!b)return;const k=nf(p),x=nf(i.clientWidth-(f+y)),S=nf(i.clientHeight-(p+b)),E=nf(f),P={rootMargin:-k+"px "+-x+"px "+-S+"px "+-E+"px",threshold:$r(0,sa(1,d))||1};let j=!0;function N(R){const A=R[0].intersectionRatio;if(A!==d){if(!j)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!vj(h,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(N,{...P,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,P)}n.observe(e)}return o(!0),s}function Lz(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=ex(e),f=i||s?[...h?nd(h):[],...nd(t)]:[];f.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const p=h&&l?Dz(h,n):null;let y=-1,b=null;o&&(b=new ResizeObserver(E=>{let[T]=E;T&&T.target===h&&b&&(b.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var P;(P=b)==null||P.observe(t)})),n()}),h&&!d&&b.observe(h),b.observe(t));let k,x=d?Ga(e):null;d&&S();function S(){const E=Ga(e);x&&!vj(x,E)&&n(),x=E,k=requestAnimationFrame(S)}return n(),()=>{var E;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p?.(),(E=b)==null||E.disconnect(),b=null,d&&cancelAnimationFrame(k)}}const Fz=cz,Uz=lz,Bz=sz,zz=dz,$z=oz,jC=iz,Vz=uz,qz=(e,t,n)=>{const r=new Map,i={platform:Mz,...n},s={...i.platform,_c:r};return rz(e,t,{...i,platform:s})};var Hz=typeof document<"u",Wz=function(){},Pf=Hz?g.useLayoutEffect:Wz;function cm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!cm(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function yj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function PC(e,t){const n=yj(e);return Math.round(t*n)/n}function ry(e){const t=g.useRef(e);return Pf(()=>{t.current=e}),t}function Kz(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:d,open:h}=e,[f,p]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,b]=g.useState(r);cm(y,r)||b(r);const[k,x]=g.useState(null),[S,E]=g.useState(null),T=g.useCallback(U=>{U!==R.current&&(R.current=U,x(U))},[]),P=g.useCallback(U=>{U!==A.current&&(A.current=U,E(U))},[]),j=s||k,N=o||S,R=g.useRef(null),A=g.useRef(null),I=g.useRef(f),D=d!=null,z=ry(d),q=ry(i),V=ry(h),te=g.useCallback(()=>{if(!R.current||!A.current)return;const U={placement:t,strategy:n,middleware:y};q.current&&(U.platform=q.current),qz(R.current,A.current,U).then(ue=>{const fe={...ue,isPositioned:V.current!==!1};J.current&&!cm(I.current,fe)&&(I.current=fe,xd.flushSync(()=>{p(fe)}))})},[y,t,n,q,V]);Pf(()=>{h===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[h]);const J=g.useRef(!1);Pf(()=>(J.current=!0,()=>{J.current=!1}),[]),Pf(()=>{if(j&&(R.current=j),N&&(A.current=N),j&&N){if(z.current)return z.current(j,N,te);te()}},[j,N,te,z,D]);const we=g.useMemo(()=>({reference:R,floating:A,setReference:T,setFloating:P}),[T,P]),X=g.useMemo(()=>({reference:j,floating:N}),[j,N]),me=g.useMemo(()=>{const U={position:n,left:0,top:0};if(!X.floating)return U;const ue=PC(X.floating,f.x),fe=PC(X.floating,f.y);return l?{...U,transform:"translate("+ue+"px, "+fe+"px)",...yj(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:fe}},[n,l,X.floating,f.x,f.y]);return g.useMemo(()=>({...f,update:te,refs:we,elements:X,floatingStyles:me}),[f,te,we,X,me])}const Gz=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?jC({element:r.current,padding:i}).fn(n):{}:r?jC({element:r,padding:i}).fn(n):{}}}},Zz=(e,t)=>({...Fz(e),options:[e,t]}),Jz=(e,t)=>({...Uz(e),options:[e,t]}),Qz=(e,t)=>({...Vz(e),options:[e,t]}),Yz=(e,t)=>({...Bz(e),options:[e,t]}),Xz=(e,t)=>({...zz(e),options:[e,t]}),e7=(e,t)=>({...$z(e),options:[e,t]}),t7=(e,t)=>({...Gz(e),options:[e,t]});var n7="Arrow",bj=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return c.jsx(Qe.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});bj.displayName=n7;var r7=bj;function xj(e){const[t,n]=g.useState(void 0);return yn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const d=s.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,l=h.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var tx="Popper",[wj,lp]=Ji(tx),[i7,kj]=wj(tx),Sj=e=>{const{__scopePopper:t,children:n}=e,[r,i]=g.useState(null);return c.jsx(i7,{scope:t,anchor:r,onAnchorChange:i,children:n})};Sj.displayName=tx;var Cj="PopperAnchor",Ej=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=kj(Cj,n),o=g.useRef(null),l=bt(t,o),d=g.useRef(null);return g.useEffect(()=>{const h=d.current;d.current=r?.current||o.current,h!==d.current&&s.onAnchorChange(d.current)}),r?null:c.jsx(Qe.div,{...i,ref:l})});Ej.displayName=Cj;var nx="PopperContent",[s7,o7]=wj(nx),Tj=g.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:k,...x}=e,S=kj(nx,n),[E,T]=g.useState(null),P=bt(t,ae=>T(ae)),[j,N]=g.useState(null),R=xj(j),A=R?.width??0,I=R?.height??0,D=r+(s!=="center"?"-"+s:""),z=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},q=Array.isArray(h)?h:[h],V=q.length>0,te={padding:z,boundary:q.filter(c7),altBoundary:V},{refs:J,floatingStyles:we,placement:X,isPositioned:me,middlewareData:U}=Kz({strategy:"fixed",placement:D,whileElementsMounted:(...ae)=>Lz(...ae,{animationFrame:b==="always"}),elements:{reference:S.anchor},middleware:[Zz({mainAxis:i+I,alignmentAxis:o}),d&&Jz({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Qz():void 0,...te}),d&&Yz({...te}),Xz({...te,apply:({elements:ae,rects:ke,availableWidth:Ue,availableHeight:qe})=>{const{width:nt,height:ct}=ke.reference,Yt=ae.floating.style;Yt.setProperty("--radix-popper-available-width",`${Ue}px`),Yt.setProperty("--radix-popper-available-height",`${qe}px`),Yt.setProperty("--radix-popper-anchor-width",`${nt}px`),Yt.setProperty("--radix-popper-anchor-height",`${ct}px`)}}),j&&t7({element:j,padding:l}),l7({arrowWidth:A,arrowHeight:I}),y&&e7({strategy:"referenceHidden",...te})]}),[ue,fe]=Pj(X),F=rr(k);yn(()=>{me&&F?.()},[me,F]);const ie=U.arrow?.x,pe=U.arrow?.y,oe=U.arrow?.centerOffset!==0,[Se,Ae]=g.useState();return yn(()=>{E&&Ae(window.getComputedStyle(E).zIndex)},[E]),c.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...we,transform:me?we.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(s7,{scope:n,placedSide:ue,onArrowChange:N,arrowX:ie,arrowY:pe,shouldHideArrow:oe,children:c.jsx(Qe.div,{"data-side":ue,"data-align":fe,...x,ref:P,style:{...x.style,animation:me?void 0:"none"}})})})});Tj.displayName=nx;var Nj="PopperArrow",a7={top:"bottom",right:"left",bottom:"top",left:"right"},jj=g.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=o7(Nj,r),o=a7[s.placedSide];return c.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:c.jsx(r7,{...i,ref:n,style:{...i.style,display:"block"}})})});jj.displayName=Nj;function c7(e){return e!==null}var l7=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[h,f]=Pj(n),p={start:"0%",center:"50%",end:"100%"}[f],y=(i.arrow?.x??0)+l/2,b=(i.arrow?.y??0)+d/2;let k="",x="";return h==="bottom"?(k=o?p:`${y}px`,x=`${-d}px`):h==="top"?(k=o?p:`${y}px`,x=`${r.floating.height+d}px`):h==="right"?(k=`${-d}px`,x=o?p:`${b}px`):h==="left"&&(k=`${r.floating.width+d}px`,x=o?p:`${b}px`),{data:{x:k,y:x}}}});function Pj(e){const[t,n="center"]=e.split("-");return[t,n]}var _j=Sj,rx=Ej,Rj=Tj,Aj=jj,u7="Portal",up=g.forwardRef((e,t)=>{const{container:n,...r}=e,[i,s]=g.useState(!1);yn(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?WN.createPortal(c.jsx(Qe.div,{...r,ref:t}),o):null});up.displayName=u7;var d7=NN[" useInsertionEffect ".trim().toString()]||yn;function Za({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,o]=h7({defaultProp:t,onChange:n}),l=e!==void 0,d=l?e:i;{const f=g.useRef(e!==void 0);g.useEffect(()=>{const p=f.current;p!==l&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=g.useCallback(f=>{if(l){const p=f7(f)?f(e):f;p!==e&&o.current?.(p)}else s(f)},[l,e,s,o]);return[d,h]}function h7({defaultProp:e,onChange:t}){const[n,r]=g.useState(e),i=g.useRef(n),s=g.useRef(t);return d7(()=>{s.current=t},[t]),g.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function f7(e){return typeof e=="function"}function Ij(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Oj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),m7="VisuallyHidden",p7=g.forwardRef((e,t)=>c.jsx(Qe.span,{...e,ref:t,style:{...Oj,...e.style}}));p7.displayName=m7;var g7=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Uc=new WeakMap,rf=new WeakMap,sf={},iy=0,Mj=function(e){return e&&(e.host||Mj(e.parentNode))},v7=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Mj(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},y7=function(e,t,n,r){var i=v7(t,Array.isArray(e)?e:[e]);sf[n]||(sf[n]=new WeakMap);var s=sf[n],o=[],l=new Set,d=new Set(i),h=function(p){!p||l.has(p)||(l.add(p),h(p.parentNode))};i.forEach(h);var f=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(y){if(l.has(y))f(y);else try{var b=y.getAttribute(r),k=b!==null&&b!=="false",x=(Uc.get(y)||0)+1,S=(s.get(y)||0)+1;Uc.set(y,x),s.set(y,S),o.push(y),x===1&&k&&rf.set(y,!0),S===1&&y.setAttribute(n,"true"),k||y.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",y,E)}})};return f(t),l.clear(),iy++,function(){o.forEach(function(p){var y=Uc.get(p)-1,b=s.get(p)-1;Uc.set(p,y),s.set(p,b),y||(rf.has(p)||p.removeAttribute(r),rf.delete(p)),b||p.removeAttribute(n)}),iy--,iy||(Uc=new WeakMap,Uc=new WeakMap,rf=new WeakMap,sf={})}},ix=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=g7(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),y7(r,i,n,"aria-hidden")):function(){return null}},fs=function(){return fs=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},fs.apply(this,arguments)};function Dj(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function b7(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var _f="right-scroll-bar-position",Rf="width-before-scroll-bar",x7="with-scroll-bars-hidden",w7="--removed-body-scroll-bar-size";function sy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function k7(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var S7=typeof window<"u"?g.useLayoutEffect:g.useEffect,_C=new WeakMap;function C7(e,t){var n=k7(null,function(r){return e.forEach(function(i){return sy(i,r)})});return S7(function(){var r=_C.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(l){s.has(l)||sy(l,null)}),s.forEach(function(l){i.has(l)||sy(l,o)})}_C.set(n,e)},[e]),n}function E7(e){return e}function T7(e,t){t===void 0&&(t=E7);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var d=function(){var f=o;o=[],f.forEach(s)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return i}function N7(e){e===void 0&&(e={});var t=T7(null);return t.options=fs({async:!0,ssr:!1},e),t}var Lj=function(e){var t=e.sideCar,n=Dj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,fs({},n))};Lj.isSideCarExport=!0;function j7(e,t){return e.useMedium(t),Lj}var Fj=N7(),oy=function(){},dp=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:oy,onWheelCapture:oy,onTouchMoveCapture:oy}),i=r[0],s=r[1],o=e.forwardProps,l=e.children,d=e.className,h=e.removeScrollBar,f=e.enabled,p=e.shards,y=e.sideCar,b=e.noRelative,k=e.noIsolation,x=e.inert,S=e.allowPinchZoom,E=e.as,T=E===void 0?"div":E,P=e.gapMode,j=Dj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=y,R=C7([n,t]),A=fs(fs({},j),i);return g.createElement(g.Fragment,null,f&&g.createElement(N,{sideCar:Fj,removeScrollBar:h,shards:p,noRelative:b,noIsolation:k,inert:x,setCallbacks:s,allowPinchZoom:!!S,lockRef:n,gapMode:P}),o?g.cloneElement(g.Children.only(l),fs(fs({},A),{ref:R})):g.createElement(T,fs({},A,{className:d,ref:R}),l))});dp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dp.classNames={fullWidth:Rf,zeroRight:_f};var P7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _7(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=P7();return t&&e.setAttribute("nonce",t),e}function R7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function A7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var I7=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_7())&&(R7(t,n),A7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},O7=function(){var e=I7();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Uj=function(){var e=O7(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},M7={left:0,top:0,right:0,gap:0},ay=function(e){return parseInt(e||"",10)||0},D7=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[ay(n),ay(r),ay(i)]},L7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return M7;var t=D7(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},F7=Uj(),Yc="data-scroll-locked",U7=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(x7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Yc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_f,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(_f," .").concat(_f,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rf," .").concat(Rf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yc,`] {
    `).concat(w7,": ").concat(l,`px;
  }
`)},RC=function(){var e=parseInt(document.body.getAttribute(Yc)||"0",10);return isFinite(e)?e:0},B7=function(){g.useEffect(function(){return document.body.setAttribute(Yc,(RC()+1).toString()),function(){var e=RC()-1;e<=0?document.body.removeAttribute(Yc):document.body.setAttribute(Yc,e.toString())}},[])},z7=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;B7();var s=g.useMemo(function(){return L7(i)},[i]);return g.createElement(F7,{styles:U7(s,!t,i,n?"":"!important")})},y0=!1;if(typeof window<"u")try{var of=Object.defineProperty({},"passive",{get:function(){return y0=!0,!0}});window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{y0=!1}var Bc=y0?{passive:!1}:!1,$7=function(e){return e.tagName==="TEXTAREA"},Bj=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!$7(e)&&n[t]==="visible")},V7=function(e){return Bj(e,"overflowY")},q7=function(e){return Bj(e,"overflowX")},AC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=zj(e,r);if(i){var s=$j(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},H7=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},W7=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},zj=function(e,t){return e==="v"?V7(t):q7(t)},$j=function(e,t){return e==="v"?H7(t):W7(t)},K7=function(e,t){return e==="h"&&t==="rtl"?-1:1},G7=function(e,t,n,r,i){var s=K7(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,d=t.contains(l),h=!1,f=o>0,p=0,y=0;do{if(!l)break;var b=$j(e,l),k=b[0],x=b[1],S=b[2],E=x-S-s*k;(k||E)&&zj(e,l)&&(p+=E,y+=k);var T=l.parentNode;l=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(f&&Math.abs(p)<1||!f&&Math.abs(y)<1)&&(h=!0),h},af=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},IC=function(e){return[e.deltaX,e.deltaY]},OC=function(e){return e&&"current"in e?e.current:e},Z7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},J7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Q7=0,zc=[];function Y7(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(Q7++)[0],s=g.useState(Uj)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var x=b7([e.lockRef.current],(e.shards||[]).map(OC),!0).filter(Boolean);return x.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(x,S){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var E=af(x),T=n.current,P="deltaX"in x?x.deltaX:T[0]-E[0],j="deltaY"in x?x.deltaY:T[1]-E[1],N,R=x.target,A=Math.abs(P)>Math.abs(j)?"h":"v";if("touches"in x&&A==="h"&&R.type==="range")return!1;var I=AC(A,R);if(!I)return!0;if(I?N=A:(N=A==="v"?"h":"v",I=AC(A,R)),!I)return!1;if(!r.current&&"changedTouches"in x&&(P||j)&&(r.current=N),!N)return!0;var D=r.current||N;return G7(D,S,x,D==="h"?P:j)},[]),d=g.useCallback(function(x){var S=x;if(!(!zc.length||zc[zc.length-1]!==s)){var E="deltaY"in S?IC(S):af(S),T=t.current.filter(function(N){return N.name===S.type&&(N.target===S.target||S.target===N.shadowParent)&&Z7(N.delta,E)})[0];if(T&&T.should){S.cancelable&&S.preventDefault();return}if(!T){var P=(o.current.shards||[]).map(OC).filter(Boolean).filter(function(N){return N.contains(S.target)}),j=P.length>0?l(S,P[0]):!o.current.noIsolation;j&&S.cancelable&&S.preventDefault()}}},[]),h=g.useCallback(function(x,S,E,T){var P={name:x,delta:S,target:E,should:T,shadowParent:X7(E)};t.current.push(P),setTimeout(function(){t.current=t.current.filter(function(j){return j!==P})},1)},[]),f=g.useCallback(function(x){n.current=af(x),r.current=void 0},[]),p=g.useCallback(function(x){h(x.type,IC(x),x.target,l(x,e.lockRef.current))},[]),y=g.useCallback(function(x){h(x.type,af(x),x.target,l(x,e.lockRef.current))},[]);g.useEffect(function(){return zc.push(s),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",d,Bc),document.addEventListener("touchmove",d,Bc),document.addEventListener("touchstart",f,Bc),function(){zc=zc.filter(function(x){return x!==s}),document.removeEventListener("wheel",d,Bc),document.removeEventListener("touchmove",d,Bc),document.removeEventListener("touchstart",f,Bc)}},[]);var b=e.removeScrollBar,k=e.inert;return g.createElement(g.Fragment,null,k?g.createElement(s,{styles:J7(i)}):null,b?g.createElement(z7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function X7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const e8=j7(Fj,Y7);var hp=g.forwardRef(function(e,t){return g.createElement(dp,fs({},e,{ref:t,sideCar:e8}))});hp.classNames=dp.classNames;var t8=[" ","Enter","ArrowUp","ArrowDown"],n8=[" ","Enter"],Ja="Select",[fp,mp,r8]=ij(Ja),[Ol,Pce]=Ji(Ja,[r8,lp]),pp=lp(),[i8,ua]=Ol(Ja),[s8,o8]=Ol(Ja),Vj=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:p,disabled:y,required:b,form:k}=e,x=pp(t),[S,E]=g.useState(null),[T,P]=g.useState(null),[j,N]=g.useState(!1),R=Ed(h),[A,I]=Za({prop:r,defaultProp:i??!1,onChange:s,caller:Ja}),[D,z]=Za({prop:o,defaultProp:l,onChange:d,caller:Ja}),q=g.useRef(null),V=S?k||!!S.closest("form"):!0,[te,J]=g.useState(new Set),we=Array.from(te).map(X=>X.props.value).join(";");return c.jsx(_j,{...x,children:c.jsxs(i8,{required:b,scope:t,trigger:S,onTriggerChange:E,valueNode:T,onValueNodeChange:P,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:no(),value:D,onValueChange:z,open:A,onOpenChange:I,dir:R,triggerPointerDownPosRef:q,disabled:y,children:[c.jsx(fp.Provider,{scope:t,children:c.jsx(s8,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(X=>{J(me=>new Set(me).add(X))},[]),onNativeOptionRemove:g.useCallback(X=>{J(me=>{const U=new Set(me);return U.delete(X),U})},[]),children:n})}),V?c.jsxs(dP,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:p,value:D,onChange:X=>z(X.target.value),disabled:y,form:k,children:[D===void 0?c.jsx("option",{value:""}):null,Array.from(te)]},we):null]})})};Vj.displayName=Ja;var qj="SelectTrigger",Hj=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=pp(n),o=ua(qj,n),l=o.disabled||r,d=bt(t,o.onTriggerChange),h=mp(n),f=g.useRef("touch"),[p,y,b]=fP(x=>{const S=h().filter(P=>!P.disabled),E=S.find(P=>P.value===o.value),T=mP(S,x,E);T!==void 0&&o.onValueChange(T.value)}),k=x=>{l||(o.onOpenChange(!0),b()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return c.jsx(rx,{asChild:!0,...s,children:c.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":hP(o.value)?"":void 0,...i,ref:d,onClick:Je(i.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&k(x)}),onPointerDown:Je(i.onPointerDown,x=>{f.current=x.pointerType;const S=x.target;S.hasPointerCapture(x.pointerId)&&S.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(k(x),x.preventDefault())}),onKeyDown:Je(i.onKeyDown,x=>{const S=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&y(x.key),!(S&&x.key===" ")&&t8.includes(x.key)&&(k(),x.preventDefault())})})})});Hj.displayName=qj;var Wj="SelectValue",Kj=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...l}=e,d=ua(Wj,n),{onValueNodeHasChildrenChange:h}=d,f=s!==void 0,p=bt(t,d.onValueNodeChange);return yn(()=>{h(f)},[h,f]),c.jsx(Qe.span,{...l,ref:p,style:{pointerEvents:"none"},children:hP(d.value)?c.jsx(c.Fragment,{children:o}):s})});Kj.displayName=Wj;var a8="SelectIcon",Gj=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return c.jsx(Qe.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});Gj.displayName=a8;var c8="SelectPortal",Zj=e=>c.jsx(up,{asChild:!0,...e});Zj.displayName=c8;var Qa="SelectContent",Jj=g.forwardRef((e,t)=>{const n=ua(Qa,e.__scopeSelect),[r,i]=g.useState();if(yn(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?xd.createPortal(c.jsx(Qj,{scope:e.__scopeSelect,children:c.jsx(fp.Slot,{scope:e.__scopeSelect,children:c.jsx("div",{children:e.children})})}),s):null}return c.jsx(Yj,{...e,ref:t})});Jj.displayName=Qa;var ji=10,[Qj,da]=Ol(Qa),l8="SelectContentImpl",u8=Wa("SelectContent.RemoveScroll"),Yj=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:b,sticky:k,hideWhenDetached:x,avoidCollisions:S,...E}=e,T=ua(Qa,n),[P,j]=g.useState(null),[N,R]=g.useState(null),A=bt(t,ae=>j(ae)),[I,D]=g.useState(null),[z,q]=g.useState(null),V=mp(n),[te,J]=g.useState(!1),we=g.useRef(!1);g.useEffect(()=>{if(P)return ix(P)},[P]),Gb();const X=g.useCallback(ae=>{const[ke,...Ue]=V().map(ct=>ct.ref.current),[qe]=Ue.slice(-1),nt=document.activeElement;for(const ct of ae)if(ct===nt||(ct?.scrollIntoView({block:"nearest"}),ct===ke&&N&&(N.scrollTop=0),ct===qe&&N&&(N.scrollTop=N.scrollHeight),ct?.focus(),document.activeElement!==nt))return},[V,N]),me=g.useCallback(()=>X([I,P]),[X,I,P]);g.useEffect(()=>{te&&me()},[te,me]);const{onOpenChange:U,triggerPointerDownPosRef:ue}=T;g.useEffect(()=>{if(P){let ae={x:0,y:0};const ke=qe=>{ae={x:Math.abs(Math.round(qe.pageX)-(ue.current?.x??0)),y:Math.abs(Math.round(qe.pageY)-(ue.current?.y??0))}},Ue=qe=>{ae.x<=10&&ae.y<=10?qe.preventDefault():P.contains(qe.target)||U(!1),document.removeEventListener("pointermove",ke),ue.current=null};return ue.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",Ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",Ue,{capture:!0})}}},[P,U,ue]),g.useEffect(()=>{const ae=()=>U(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[U]);const[fe,F]=fP(ae=>{const ke=V().filter(nt=>!nt.disabled),Ue=ke.find(nt=>nt.ref.current===document.activeElement),qe=mP(ke,ae,Ue);qe&&setTimeout(()=>qe.ref.current.focus())}),ie=g.useCallback((ae,ke,Ue)=>{const qe=!we.current&&!Ue;(T.value!==void 0&&T.value===ke||qe)&&(D(ae),qe&&(we.current=!0))},[T.value]),pe=g.useCallback(()=>P?.focus(),[P]),oe=g.useCallback((ae,ke,Ue)=>{const qe=!we.current&&!Ue;(T.value!==void 0&&T.value===ke||qe)&&q(ae)},[T.value]),Se=r==="popper"?b0:Xj,Ae=Se===b0?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:b,sticky:k,hideWhenDetached:x,avoidCollisions:S}:{};return c.jsx(Qj,{scope:n,content:P,viewport:N,onViewportChange:R,itemRefCallback:ie,selectedItem:I,onItemLeave:pe,itemTextRefCallback:oe,focusSelectedItem:me,selectedItemText:z,position:r,isPositioned:te,searchRef:fe,children:c.jsx(hp,{as:u8,allowPinchZoom:!0,children:c.jsx(ip,{asChild:!0,trapped:T.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:Je(i,ae=>{T.trigger?.focus({preventScroll:!0}),ae.preventDefault()}),children:c.jsx(rp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:c.jsx(Se,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ae=>ae.preventDefault(),...E,...Ae,onPlaced:()=>J(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Je(E.onKeyDown,ae=>{const ke=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ke&&ae.key.length===1&&F(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let qe=V().filter(nt=>!nt.disabled).map(nt=>nt.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const nt=ae.target,ct=qe.indexOf(nt);qe=qe.slice(ct+1)}setTimeout(()=>X(qe)),ae.preventDefault()}})})})})})})});Yj.displayName=l8;var d8="SelectItemAlignedPosition",Xj=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=ua(Qa,n),o=da(Qa,n),[l,d]=g.useState(null),[h,f]=g.useState(null),p=bt(t,A=>f(A)),y=mp(n),b=g.useRef(!1),k=g.useRef(!0),{viewport:x,selectedItem:S,selectedItemText:E,focusSelectedItem:T}=o,P=g.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&h&&x&&S&&E){const A=s.trigger.getBoundingClientRect(),I=h.getBoundingClientRect(),D=s.valueNode.getBoundingClientRect(),z=E.getBoundingClientRect();if(s.dir!=="rtl"){const nt=z.left-I.left,ct=D.left-nt,Yt=A.left-ct,An=A.width+Yt,yi=Math.max(An,I.width),bi=window.innerWidth-ji,or=f0(ct,[ji,Math.max(ji,bi-yi)]);l.style.minWidth=An+"px",l.style.left=or+"px"}else{const nt=I.right-z.right,ct=window.innerWidth-D.right-nt,Yt=window.innerWidth-A.right-ct,An=A.width+Yt,yi=Math.max(An,I.width),bi=window.innerWidth-ji,or=f0(ct,[ji,Math.max(ji,bi-yi)]);l.style.minWidth=An+"px",l.style.right=or+"px"}const q=y(),V=window.innerHeight-ji*2,te=x.scrollHeight,J=window.getComputedStyle(h),we=parseInt(J.borderTopWidth,10),X=parseInt(J.paddingTop,10),me=parseInt(J.borderBottomWidth,10),U=parseInt(J.paddingBottom,10),ue=we+X+te+U+me,fe=Math.min(S.offsetHeight*5,ue),F=window.getComputedStyle(x),ie=parseInt(F.paddingTop,10),pe=parseInt(F.paddingBottom,10),oe=A.top+A.height/2-ji,Se=V-oe,Ae=S.offsetHeight/2,ae=S.offsetTop+Ae,ke=we+X+ae,Ue=ue-ke;if(ke<=oe){const nt=q.length>0&&S===q[q.length-1].ref.current;l.style.bottom="0px";const ct=h.clientHeight-x.offsetTop-x.offsetHeight,Yt=Math.max(Se,Ae+(nt?pe:0)+ct+me),An=ke+Yt;l.style.height=An+"px"}else{const nt=q.length>0&&S===q[0].ref.current;l.style.top="0px";const Yt=Math.max(oe,we+x.offsetTop+(nt?ie:0)+Ae)+Ue;l.style.height=Yt+"px",x.scrollTop=ke-oe+x.offsetTop}l.style.margin=`${ji}px 0`,l.style.minHeight=fe+"px",l.style.maxHeight=V+"px",r?.(),requestAnimationFrame(()=>b.current=!0)}},[y,s.trigger,s.valueNode,l,h,x,S,E,s.dir,r]);yn(()=>P(),[P]);const[j,N]=g.useState();yn(()=>{h&&N(window.getComputedStyle(h).zIndex)},[h]);const R=g.useCallback(A=>{A&&k.current===!0&&(P(),T?.(),k.current=!1)},[P,T]);return c.jsx(f8,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:R,children:c.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:c.jsx(Qe.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Xj.displayName=d8;var h8="SelectPopperPosition",b0=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ji,...s}=e,o=pp(n);return c.jsx(Rj,{...o,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});b0.displayName=h8;var[f8,sx]=Ol(Qa,{}),x0="SelectViewport",eP=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=da(x0,n),o=sx(x0,n),l=bt(t,s.onViewportChange),d=g.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(fp.Slot,{scope:n,children:c.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Je(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=o;if(y?.current&&p){const b=Math.abs(d.current-f.scrollTop);if(b>0){const k=window.innerHeight-ji*2,x=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),E=Math.max(x,S);if(E<k){const T=E+b,P=Math.min(k,T),j=T-P;p.style.height=P+"px",p.style.bottom==="0px"&&(f.scrollTop=j>0?j:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});eP.displayName=x0;var tP="SelectGroup",[m8,p8]=Ol(tP),g8=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=no();return c.jsx(m8,{scope:n,id:i,children:c.jsx(Qe.div,{role:"group","aria-labelledby":i,...r,ref:t})})});g8.displayName=tP;var nP="SelectLabel",v8=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=p8(nP,n);return c.jsx(Qe.div,{id:i.id,...r,ref:t})});v8.displayName=nP;var lm="SelectItem",[y8,rP]=Ol(lm),iP=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=e,l=ua(lm,n),d=da(lm,n),h=l.value===r,[f,p]=g.useState(s??""),[y,b]=g.useState(!1),k=bt(t,T=>d.itemRefCallback?.(T,r,i)),x=no(),S=g.useRef("touch"),E=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(y8,{scope:n,value:r,disabled:i,textId:x,isSelected:h,onItemTextChange:g.useCallback(T=>{p(P=>P||(T?.textContent??"").trim())},[]),children:c.jsx(fp.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:c.jsx(Qe.div,{role:"option","aria-labelledby":x,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:k,onFocus:Je(o.onFocus,()=>b(!0)),onBlur:Je(o.onBlur,()=>b(!1)),onClick:Je(o.onClick,()=>{S.current!=="mouse"&&E()}),onPointerUp:Je(o.onPointerUp,()=>{S.current==="mouse"&&E()}),onPointerDown:Je(o.onPointerDown,T=>{S.current=T.pointerType}),onPointerMove:Je(o.onPointerMove,T=>{S.current=T.pointerType,i?d.onItemLeave?.():S.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Je(o.onPointerLeave,T=>{T.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Je(o.onKeyDown,T=>{d.searchRef?.current!==""&&T.key===" "||(n8.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});iP.displayName=lm;var Bu="SelectItemText",sP=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,o=ua(Bu,n),l=da(Bu,n),d=rP(Bu,n),h=o8(Bu,n),[f,p]=g.useState(null),y=bt(t,E=>p(E),d.onItemTextChange,E=>l.itemTextRefCallback?.(E,d.value,d.disabled)),b=f?.textContent,k=g.useMemo(()=>c.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:x,onNativeOptionRemove:S}=h;return yn(()=>(x(k),()=>S(k)),[x,S,k]),c.jsxs(c.Fragment,{children:[c.jsx(Qe.span,{id:d.textId,...s,ref:y}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?xd.createPortal(s.children,o.valueNode):null]})});sP.displayName=Bu;var oP="SelectItemIndicator",aP=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return rP(oP,n).isSelected?c.jsx(Qe.span,{"aria-hidden":!0,...r,ref:t}):null});aP.displayName=oP;var w0="SelectScrollUpButton",cP=g.forwardRef((e,t)=>{const n=da(w0,e.__scopeSelect),r=sx(w0,e.__scopeSelect),[i,s]=g.useState(!1),o=bt(t,r.onScrollButtonChange);return yn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollTop>0;s(h)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?c.jsx(uP,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});cP.displayName=w0;var k0="SelectScrollDownButton",lP=g.forwardRef((e,t)=>{const n=da(k0,e.__scopeSelect),r=sx(k0,e.__scopeSelect),[i,s]=g.useState(!1),o=bt(t,r.onScrollButtonChange);return yn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;s(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?c.jsx(uP,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});lP.displayName=k0;var uP=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=da("SelectScrollButton",n),o=g.useRef(null),l=mp(n),d=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>d(),[d]),yn(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),c.jsx(Qe.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Je(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Je(i.onPointerMove,()=>{s.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Je(i.onPointerLeave,()=>{d()})})}),b8="SelectSeparator",x8=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return c.jsx(Qe.div,{"aria-hidden":!0,...r,ref:t})});x8.displayName=b8;var S0="SelectArrow",w8=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=pp(n),s=ua(S0,n),o=da(S0,n);return s.open&&o.position==="popper"?c.jsx(Aj,{...i,...r,ref:t}):null});w8.displayName=S0;var k8="SelectBubbleInput",dP=g.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=g.useRef(null),s=bt(r,i),o=Ij(t);return g.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&f){const p=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(p)}},[o,t]),c.jsx(Qe.select,{...n,style:{...Oj,...n.style},ref:s,defaultValue:t})});dP.displayName=k8;function hP(e){return e===""||e===void 0}function fP(e){const t=rr(e),n=g.useRef(""),r=g.useRef(0),i=g.useCallback(o=>{const l=n.current+o;t(l),(function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(l)},[t]),s=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function mP(e,t,n){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=S8(e,Math.max(s,0));i.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function S8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var C8=Vj,E8=Hj,T8=Kj,N8=Gj,j8=Zj,P8=Jj,_8=eP,R8=iP,A8=sP,I8=aP,O8=cP,M8=lP;function rd({...e}){return c.jsx(C8,{"data-slot":"select",...e})}function id({...e}){return c.jsx(T8,{"data-slot":"select-value",...e})}function sd({className:e,size:t="default",children:n,...r}){return c.jsxs(E8,{"data-slot":"select-trigger","data-size":t,className:ut("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,c.jsx(N8,{asChild:!0,children:c.jsx(Vb,{className:"size-4 opacity-50"})})]})}function od({className:e,children:t,position:n="popper",...r}){return c.jsx(j8,{children:c.jsxs(P8,{"data-slot":"select-content",className:ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[c.jsx(D8,{}),c.jsx(_8,{className:ut("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),c.jsx(L8,{})]})})}function qr({className:e,children:t,...n}){return c.jsxs(R8,{"data-slot":"select-item",className:ut("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[c.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:c.jsx(I8,{children:c.jsx(Xo,{className:"size-4"})})}),c.jsx(A8,{children:t})]})}function D8({className:e,...t}){return c.jsx(O8,{"data-slot":"select-scroll-up-button",className:ut("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(G2,{className:"size-4"})})}function L8({className:e,...t}){return c.jsx(M8,{"data-slot":"select-scroll-down-button",className:ut("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(Vb,{className:"size-4"})})}var cy="rovingFocusGroup.onEntryFocus",F8={bubbles:!1,cancelable:!0},Nd="RovingFocusGroup",[C0,pP,U8]=ij(Nd),[B8,gp]=Ji(Nd,[U8]),[z8,$8]=B8(Nd),gP=g.forwardRef((e,t)=>c.jsx(C0.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(C0.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(V8,{...e,ref:t})})}));gP.displayName=Nd;var V8=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=e,y=g.useRef(null),b=bt(t,y),k=Ed(s),[x,S]=Za({prop:o,defaultProp:l??null,onChange:d,caller:Nd}),[E,T]=g.useState(!1),P=rr(h),j=pP(n),N=g.useRef(!1),[R,A]=g.useState(0);return g.useEffect(()=>{const I=y.current;if(I)return I.addEventListener(cy,P),()=>I.removeEventListener(cy,P)},[P]),c.jsx(z8,{scope:n,orientation:r,dir:k,loop:i,currentTabStopId:x,onItemFocus:g.useCallback(I=>S(I),[S]),onItemShiftTab:g.useCallback(()=>T(!0),[]),onFocusableItemAdd:g.useCallback(()=>A(I=>I+1),[]),onFocusableItemRemove:g.useCallback(()=>A(I=>I-1),[]),children:c.jsx(Qe.div,{tabIndex:E||R===0?-1:0,"data-orientation":r,...p,ref:b,style:{outline:"none",...e.style},onMouseDown:Je(e.onMouseDown,()=>{N.current=!0}),onFocus:Je(e.onFocus,I=>{const D=!N.current;if(I.target===I.currentTarget&&D&&!E){const z=new CustomEvent(cy,F8);if(I.currentTarget.dispatchEvent(z),!z.defaultPrevented){const q=j().filter(X=>X.focusable),V=q.find(X=>X.active),te=q.find(X=>X.id===x),we=[V,te,...q].filter(Boolean).map(X=>X.ref.current);bP(we,f)}}N.current=!1}),onBlur:Je(e.onBlur,()=>T(!1))})})}),vP="RovingFocusGroupItem",yP=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...l}=e,d=no(),h=s||d,f=$8(vP,n),p=f.currentTabStopId===h,y=pP(n),{onFocusableItemAdd:b,onFocusableItemRemove:k,currentTabStopId:x}=f;return g.useEffect(()=>{if(r)return b(),()=>k()},[r,b,k]),c.jsx(C0.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:c.jsx(Qe.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Je(e.onMouseDown,S=>{r?f.onItemFocus(h):S.preventDefault()}),onFocus:Je(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:Je(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=W8(S,f.orientation,f.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let P=y().filter(j=>j.focusable).map(j=>j.ref.current);if(E==="last")P.reverse();else if(E==="prev"||E==="next"){E==="prev"&&P.reverse();const j=P.indexOf(S.currentTarget);P=f.loop?K8(P,j+1):P.slice(j+1)}setTimeout(()=>bP(P))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:x!=null}):o})})});yP.displayName=vP;var q8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function H8(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function W8(e,t,n){const r=H8(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return q8[r]}function bP(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function K8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var xP=gP,wP=yP;function G8(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var pi=e=>{const{present:t,children:n}=e,r=Z8(t),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=bt(r.ref,J8(i));return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};pi.displayName="Presence";function Z8(e){const[t,n]=g.useState(),r=g.useRef(null),i=g.useRef(e),s=g.useRef("none"),o=e?"mounted":"unmounted",[l,d]=G8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=cf(r.current);s.current=l==="mounted"?h:"none"},[l]),yn(()=>{const h=r.current,f=i.current;if(f!==e){const y=s.current,b=cf(h);e?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&y!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),yn(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,p=b=>{const x=cf(r.current).includes(CSS.escape(b.animationName));if(b.target===t&&x&&(d("ANIMATION_END"),!i.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},y=b=>{b.target===t&&(s.current=cf(r.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function cf(e){return e?.animationName||"none"}function J8(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var vp="Tabs",[Q8,_ce]=Ji(vp,[gp]),kP=gp(),[Y8,ox]=Q8(vp),SP=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:d="automatic",...h}=e,f=Ed(l),[p,y]=Za({prop:r,onChange:i,defaultProp:s??"",caller:vp});return c.jsx(Y8,{scope:n,baseId:no(),value:p,onValueChange:y,orientation:o,dir:f,activationMode:d,children:c.jsx(Qe.div,{dir:f,"data-orientation":o,...h,ref:t})})});SP.displayName=vp;var CP="TabsList",EP=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=ox(CP,n),o=kP(n);return c.jsx(xP,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:c.jsx(Qe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});EP.displayName=CP;var TP="TabsTrigger",NP=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,o=ox(TP,n),l=kP(n),d=_P(o.baseId,r),h=RP(o.baseId,r),f=r===o.value;return c.jsx(wP,{asChild:!0,...l,focusable:!i,active:f,children:c.jsx(Qe.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...s,ref:t,onMouseDown:Je(e.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:Je(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:Je(e.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!i&&p&&o.onValueChange(r)})})})});NP.displayName=TP;var jP="TabsContent",PP=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=e,l=ox(jP,n),d=_P(l.baseId,r),h=RP(l.baseId,r),f=r===l.value,p=g.useRef(f);return g.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),c.jsx(pi,{present:i||f,children:({present:y})=>c.jsx(Qe.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:y&&s})})});PP.displayName=jP;function _P(e,t){return`${e}-trigger-${t}`}function RP(e,t){return`${e}-content-${t}`}var X8=SP,e9=EP,t9=NP,n9=PP;function Ml({className:e,...t}){return c.jsx(X8,{"data-slot":"tabs",className:ut("flex flex-col gap-2",e),...t})}function Dl({className:e,...t}){return c.jsx(e9,{"data-slot":"tabs-list",className:ut("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function an({className:e,...t}){return c.jsx(t9,{"data-slot":"tabs-trigger",className:ut("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function cn({className:e,...t}){return c.jsx(n9,{"data-slot":"tabs-content",className:ut("flex-1 outline-none",e),...t})}/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function AP(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function r9(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function MC(e,t){return e.get(AP(e,t))}function i9(e,t,n){r9(e,t),t.set(e,n)}function s9(e,t,n){return e.set(AP(e,t),n),n}const o9=100,Ge={},a9=()=>{Ge.previousActiveElement instanceof HTMLElement?(Ge.previousActiveElement.focus(),Ge.previousActiveElement=null):document.body&&document.body.focus()},c9=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;Ge.restoreFocusTimeout=setTimeout(()=>{a9(),t()},o9),window.scrollTo(n,r)}),IP="swal2-",l9=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],se=l9.reduce((e,t)=>(e[t]=IP+t,e),{}),u9=["success","warning","info","question","error"],um=u9.reduce((e,t)=>(e[t]=IP+t,e),{}),OP="SweetAlert2:",ax=e=>e.charAt(0).toUpperCase()+e.slice(1),mr=e=>{console.warn(`${OP} ${typeof e=="object"?e.join(" "):e}`)},lc=e=>{console.error(`${OP} ${e}`)},DC=[],d9=e=>{DC.includes(e)||(DC.push(e),mr(e))},MP=(e,t=null)=>{d9(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},yp=e=>typeof e=="function"?e():e,cx=e=>e&&typeof e.toPromise=="function",jd=e=>cx(e)?e.toPromise():Promise.resolve(e),lx=e=>e&&Promise.resolve(e)===e,pr=()=>document.body.querySelector(`.${se.container}`),Pd=e=>{const t=pr();return t?t.querySelector(e):null},Qr=e=>Pd(`.${e}`),kt=()=>Qr(se.popup),Ll=()=>Qr(se.icon),h9=()=>Qr(se["icon-content"]),DP=()=>Qr(se.title),ux=()=>Qr(se["html-container"]),LP=()=>Qr(se.image),dx=()=>Qr(se["progress-steps"]),bp=()=>Qr(se["validation-message"]),ks=()=>Pd(`.${se.actions} .${se.confirm}`),Fl=()=>Pd(`.${se.actions} .${se.cancel}`),uc=()=>Pd(`.${se.actions} .${se.deny}`),f9=()=>Qr(se["input-label"]),Ul=()=>Pd(`.${se.loader}`),_d=()=>Qr(se.actions),FP=()=>Qr(se.footer),xp=()=>Qr(se["timer-progress-bar"]),hx=()=>Qr(se.close),m9=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,fx=()=>{const e=kt();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((s,o)=>{const l=parseInt(s.getAttribute("tabindex")||"0"),d=parseInt(o.getAttribute("tabindex")||"0");return l>d?1:l<d?-1:0}),r=e.querySelectorAll(m9),i=Array.from(r).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(s=>Rr(s))},mx=()=>ro(document.body,se.shown)&&!ro(document.body,se["toast-shown"])&&!ro(document.body,se["no-backdrop"]),wp=()=>{const e=kt();return e?ro(e,se.toast):!1},p9=()=>{const e=kt();return e?e.hasAttribute("data-loading"):!1},Yr=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),i=r.querySelector("head");i&&Array.from(i.childNodes).forEach(o=>{e.appendChild(o)});const s=r.querySelector("body");s&&Array.from(s.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},ro=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},g9=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(se).includes(n)&&!Object.values(um).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},Zr=(e,t,n)=>{if(g9(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){mr(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Ct(e,r)}},kp=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${se.popup} > .${se[t]}`);case"checkbox":return e.querySelector(`.${se.popup} > .${se.checkbox} input`);case"radio":return e.querySelector(`.${se.popup} > .${se.radio} input:checked`)||e.querySelector(`.${se.popup} > .${se.radio} input:first-child`);case"range":return e.querySelector(`.${se.popup} > .${se.range} input`);default:return e.querySelector(`.${se.popup} > .${se.input}`)}},UP=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},BP=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(i=>{n?i.classList.add(r):i.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Ct=(e,t)=>{BP(e,t,!0)},fi=(e,t)=>{BP(e,t,!1)},Zo=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const i=n[r];if(i instanceof HTMLElement&&ro(i,t))return i}},Ba=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},zn=(e,t="flex")=>{e&&(e.style.display=t)},sr=e=>{e&&(e.style.display="none")},px=(e,t="block")=>{e&&new MutationObserver(()=>{Rd(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},LC=(e,t,n,r)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,r)},Rd=(e,t,n="flex")=>{t?zn(e,n):sr(e)},Rr=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),v9=()=>!Rr(ks())&&!Rr(uc())&&!Rr(Fl()),E0=e=>e.scrollHeight>e.clientHeight,y9=(e,t)=>{let n=e;for(;n&&n!==t;){if(E0(n))return!0;n=n.parentElement}return!1},zP=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},gx=(e,t=!1)=>{const n=xp();n&&Rr(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},b9=()=>{const e=xp();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},x9=()=>typeof window>"u"||typeof document>"u",w9=`
 <div aria-labelledby="${se.title}" aria-describedby="${se["html-container"]}" class="${se.popup}" tabindex="-1">
   <button type="button" class="${se.close}"></button>
   <ul class="${se["progress-steps"]}"></ul>
   <div class="${se.icon}"></div>
   <img class="${se.image}" />
   <h2 class="${se.title}" id="${se.title}"></h2>
   <div class="${se["html-container"]}" id="${se["html-container"]}"></div>
   <input class="${se.input}" id="${se.input}" />
   <input type="file" class="${se.file}" />
   <div class="${se.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${se.select}" id="${se.select}"></select>
   <div class="${se.radio}"></div>
   <label class="${se.checkbox}">
     <input type="checkbox" id="${se.checkbox}" />
     <span class="${se.label}"></span>
   </label>
   <textarea class="${se.textarea}" id="${se.textarea}"></textarea>
   <div class="${se["validation-message"]}" id="${se["validation-message"]}"></div>
   <div class="${se.actions}">
     <div class="${se.loader}"></div>
     <button type="button" class="${se.confirm}"></button>
     <button type="button" class="${se.deny}"></button>
     <button type="button" class="${se.cancel}"></button>
   </div>
   <div class="${se.footer}"></div>
   <div class="${se["timer-progress-bar-container"]}">
     <div class="${se["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),k9=()=>{const e=pr();return e?(e.remove(),fi([document.documentElement,document.body],[se["no-backdrop"],se["toast-shown"],se["has-column"]]),!0):!1},Ra=()=>{Ge.currentInstance.resetValidationMessage()},S9=()=>{const e=kt(),t=Zo(e,se.input),n=Zo(e,se.file),r=e.querySelector(`.${se.range} input`),i=e.querySelector(`.${se.range} output`),s=Zo(e,se.select),o=e.querySelector(`.${se.checkbox} input`),l=Zo(e,se.textarea);t.oninput=Ra,n.onchange=Ra,s.onchange=Ra,o.onchange=Ra,l.oninput=Ra,r.oninput=()=>{Ra(),i.value=r.value},r.onchange=()=>{Ra(),i.value=r.value}},C9=e=>typeof e=="string"?document.querySelector(e):e,E9=e=>{const t=kt();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},T9=e=>{window.getComputedStyle(e).direction==="rtl"&&Ct(pr(),se.rtl)},N9=e=>{const t=k9();if(x9()){lc("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=se.container,t&&Ct(n,se["no-transition"]),Yr(n,w9),n.dataset.swal2Theme=e.theme;const r=C9(e.target);r.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),E9(e),T9(r),S9()},vx=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?j9(e,t):e&&Yr(t,e)},j9=(e,t)=>{e.jquery?P9(t,e):Yr(t,e.toString())},P9=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},_9=(e,t)=>{const n=_d(),r=Ul();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?sr(n):zn(n),Zr(n,t,"actions"),R9(n,r,t),Yr(r,t.loaderHtml||""),Zr(r,t,"loader"))};function R9(e,t,n){const r=ks(),i=uc(),s=Fl();!r||!i||!s||(uy(r,"confirm",n),uy(i,"deny",n),uy(s,"cancel",n),A9(r,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,r),e.insertBefore(i,r)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(r,t))))}function A9(e,t,n,r){if(!r.buttonsStyling){fi([e,t,n],se.styled);return}Ct([e,t,n],se.styled),r.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),ly(e),ly(t),ly(n)}function ly(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function uy(e,t,n){const r=ax(t);Rd(e,n[`show${r}Button`],"inline-block"),Yr(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=se[t],Zr(e,n,`${t}Button`)}const I9=(e,t)=>{const n=hx();n&&(Yr(n,t.closeButtonHtml||""),Zr(n,t,"closeButton"),Rd(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},O9=(e,t)=>{const n=pr();n&&(M9(n,t.backdrop),D9(n,t.position),L9(n,t.grow),Zr(n,t,"container"))};function M9(e,t){typeof t=="string"?e.style.background=t:t||Ct([document.documentElement,document.body],se["no-backdrop"])}function D9(e,t){t&&(t in se?Ct(e,se[t]):(mr('The "position" parameter is not valid, defaulting to "center"'),Ct(e,se.center)))}function L9(e,t){t&&Ct(e,se[`grow-${t}`])}var Dt={innerParams:new WeakMap,domCache:new WeakMap};const F9=["input","file","range","select","radio","checkbox","textarea"],U9=(e,t)=>{const n=kt();if(!n)return;const r=Dt.innerParams.get(e),i=!r||t.input!==r.input;F9.forEach(s=>{const o=Zo(n,se[s]);o&&($9(s,t.inputAttributes),o.className=se[s],i&&sr(o))}),t.input&&(i&&B9(t),V9(t))},B9=e=>{if(!e.input)return;if(!nn[e.input]){lc(`Unexpected type of input! Expected ${Object.keys(nn).join(" | ")}, got "${e.input}"`);return}const t=$P(e.input);if(!t)return;const n=nn[e.input](t,e);zn(t),e.inputAutoFocus&&setTimeout(()=>{UP(n)})},z9=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},$9=(e,t)=>{const n=kt();if(!n)return;const r=kp(n,e);if(r){z9(r);for(const i in t)r.setAttribute(i,t[i])}},V9=e=>{if(!e.input)return;const t=$P(e.input);t&&Zr(t,e,"input")},yx=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Ad=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=se["input-label"];r.setAttribute("for",e.id),r.className=i,typeof n.customClass=="object"&&Ct(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},$P=e=>{const t=kt();if(t)return Zo(t,se[e]||se.input)},dm=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:lx(t)||mr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},nn={};nn.text=nn.email=nn.password=nn.number=nn.tel=nn.url=nn.search=nn.date=nn["datetime-local"]=nn.time=nn.week=nn.month=(e,t)=>(dm(e,t.inputValue),Ad(e,e,t),yx(e,t),e.type=t.input,e);nn.file=(e,t)=>(Ad(e,e,t),yx(e,t),e);nn.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return dm(n,t.inputValue),n.type=t.input,dm(r,t.inputValue),Ad(n,e,t),e};nn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Yr(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ad(e,e,t),e};nn.radio=e=>(e.textContent="",e);nn.checkbox=(e,t)=>{const n=kp(kt(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return Yr(r,t.inputPlaceholder||t.inputLabel),n};nn.textarea=(e,t)=>{dm(e,t.inputValue),yx(e,t),Ad(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(kt()).width),i=()=>{if(!document.body.contains(e))return;const s=e.offsetWidth+n(e);s>r?kt().style.width=`${s}px`:Ba(kt(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const q9=(e,t)=>{const n=ux();n&&(px(n),Zr(n,t,"htmlContainer"),t.html?(vx(t.html,n),zn(n,"block")):t.text?(n.textContent=t.text,zn(n,"block")):sr(n),U9(e,t))},H9=(e,t)=>{const n=FP();n&&(px(n),Rd(n,t.footer,"block"),t.footer&&vx(t.footer,n),Zr(n,t,"footer"))},W9=(e,t)=>{const n=Dt.innerParams.get(e),r=Ll();if(!r)return;if(n&&t.icon===n.icon){UC(r,t),FC(r,t);return}if(!t.icon&&!t.iconHtml){sr(r);return}if(t.icon&&Object.keys(um).indexOf(t.icon)===-1){lc(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),sr(r);return}zn(r),UC(r,t),FC(r,t),Ct(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",VP)},FC=(e,t)=>{for(const[n,r]of Object.entries(um))t.icon!==n&&fi(e,r);Ct(e,t.icon&&um[t.icon]),Z9(e,t),VP(),Zr(e,t,"icon")},VP=()=>{const e=kt();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},K9=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,G9=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,UC=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=BC(t.iconHtml):t.icon==="success"?(r=K9(t),n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=G9:t.icon&&(r=BC({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&Yr(e,r)},Z9=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])LC(e,n,"background-color",t.iconColor);LC(e,".swal2-success-ring","border-color",t.iconColor)}},BC=e=>`<div class="${se["icon-content"]}">${e}</div>`,J9=(e,t)=>{const n=LP();if(n){if(!t.imageUrl){sr(n);return}zn(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),Ba(n,"width",t.imageWidth),Ba(n,"height",t.imageHeight),n.className=se.image,Zr(n,t,"image")}};let bx=!1,qP=0,HP=0,WP=0,KP=0;const Q9=e=>{e.addEventListener("mousedown",hm),document.body.addEventListener("mousemove",fm),e.addEventListener("mouseup",mm),e.addEventListener("touchstart",hm),document.body.addEventListener("touchmove",fm),e.addEventListener("touchend",mm)},Y9=e=>{e.removeEventListener("mousedown",hm),document.body.removeEventListener("mousemove",fm),e.removeEventListener("mouseup",mm),e.removeEventListener("touchstart",hm),document.body.removeEventListener("touchmove",fm),e.removeEventListener("touchend",mm)},hm=e=>{const t=kt();if(e.target===t||Ll().contains(e.target)){bx=!0;const n=GP(e);qP=n.clientX,HP=n.clientY,WP=parseInt(t.style.insetInlineStart)||0,KP=parseInt(t.style.insetBlockStart)||0,Ct(t,"swal2-dragging")}},fm=e=>{const t=kt();if(bx){let{clientX:n,clientY:r}=GP(e);t.style.insetInlineStart=`${WP+(n-qP)}px`,t.style.insetBlockStart=`${KP+(r-HP)}px`}},mm=()=>{const e=kt();bx=!1,fi(e,"swal2-dragging")},GP=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},X9=(e,t)=>{const n=pr(),r=kt();if(!(!n||!r)){if(t.toast){Ba(n,"width",t.width),r.style.width="100%";const i=Ul();i&&r.insertBefore(i,Ll())}else Ba(r,"width",t.width);Ba(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),sr(bp()),e$(r,t),t.draggable&&!t.toast?(Ct(r,se.draggable),Q9(r)):(fi(r,se.draggable),Y9(r))}},e$=(e,t)=>{const n=t.showClass||{};e.className=`${se.popup} ${Rr(e)?n.popup:""}`,t.toast?(Ct([document.documentElement,document.body],se["toast-shown"]),Ct(e,se.toast)):Ct(e,se.modal),Zr(e,t,"popup"),typeof t.customClass=="string"&&Ct(e,t.customClass),t.icon&&Ct(e,se[`icon-${t.icon}`])},t$=(e,t)=>{const n=dx();if(!n)return;const{progressSteps:r,currentProgressStep:i}=t;if(!r||r.length===0||i===void 0){sr(n);return}zn(n),n.textContent="",i>=r.length&&mr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((s,o)=>{const l=n$(s);if(n.appendChild(l),o===i&&Ct(l,se["active-progress-step"]),o!==r.length-1){const d=r$(t);n.appendChild(d)}})},n$=e=>{const t=document.createElement("li");return Ct(t,se["progress-step"]),Yr(t,e),t},r$=e=>{const t=document.createElement("li");return Ct(t,se["progress-step-line"]),e.progressStepsDistance&&Ba(t,"width",e.progressStepsDistance),t},i$=(e,t)=>{const n=DP();n&&(px(n),Rd(n,t.title||t.titleText,"block"),t.title&&vx(t.title,n),t.titleText&&(n.innerText=t.titleText),Zr(n,t,"title"))},ZP=(e,t)=>{X9(e,t),O9(e,t),t$(e,t),W9(e,t),J9(e,t),i$(e,t),I9(e,t),q9(e,t),_9(e,t),H9(e,t);const n=kt();typeof t.didRender=="function"&&n&&t.didRender(n),Ge.eventEmitter.emit("didRender",n)},s$=()=>Rr(kt()),JP=()=>{var e;return(e=ks())===null||e===void 0?void 0:e.click()},o$=()=>{var e;return(e=uc())===null||e===void 0?void 0:e.click()},a$=()=>{var e;return(e=Fl())===null||e===void 0?void 0:e.click()},Bl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),QP=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},c$=(e,t,n)=>{QP(e),t.toast||(e.keydownHandler=r=>u$(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:kt(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},T0=(e,t)=>{var n;const r=fx();if(r.length){e=e+t,e===-2&&(e=r.length-1),e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=kt())===null||n===void 0||n.focus()},YP=["ArrowRight","ArrowDown"],l$=["ArrowLeft","ArrowUp"],u$=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?d$(t,e):t.key==="Tab"?h$(t):[...YP,...l$].includes(t.key)?f$(t.key):t.key==="Escape"&&m$(t,e,n)))},d$=(e,t)=>{if(!yp(t.allowEnterKey))return;const n=kp(kt(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;JP(),e.preventDefault()}},h$=e=>{const t=e.target,n=fx();let r=-1;for(let i=0;i<n.length;i++)if(t===n[i]){r=i;break}e.shiftKey?T0(r,-1):T0(r,1),e.stopPropagation(),e.preventDefault()},f$=e=>{const t=_d(),n=ks(),r=uc(),i=Fl();if(!t||!n||!r||!i)return;const s=[n,r,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const o=YP.includes(e)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let d=0;d<t.children.length;d++){if(l=l[o],!l)return;if(l instanceof HTMLButtonElement&&Rr(l))break}l instanceof HTMLButtonElement&&l.focus()}},m$=(e,t,n)=>{e.preventDefault(),yp(t.allowEscapeKey)&&n(Bl.esc)};var ml={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const p$=()=>{const e=pr();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},XP=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},e_=typeof window<"u"&&!!window.GestureEvent,g$=()=>{if(e_&&!ro(document.body,se.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Ct(document.body,se.iosfix),v$()}},v$=()=>{const e=pr();if(!e)return;let t;e.ontouchstart=n=>{t=y$(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},y$=e=>{const t=e.target,n=pr(),r=ux();return!n||!r||b$(e)||x$(e)?!1:t===n||!E0(n)&&t instanceof HTMLElement&&!y9(t,r)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(E0(r)&&r.contains(t))},b$=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",x$=e=>e.touches&&e.touches.length>1,w$=()=>{if(ro(document.body,se.iosfix)){const e=parseInt(document.body.style.top,10);fi(document.body,se.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},k$=()=>{const e=document.createElement("div");e.className=se["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Xc=null;const S$=e=>{Xc===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Xc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Xc+k$()}px`)},C$=()=>{Xc!==null&&(document.body.style.paddingRight=`${Xc}px`,Xc=null)};function t_(e,t,n,r){wp()?zC(e,r):(c9(n).then(()=>zC(e,r)),QP(Ge)),e_?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),mx()&&(C$(),w$(),XP()),E$()}function E$(){fi([document.documentElement,document.body],[se.shown,se["height-auto"],se["no-backdrop"],se["toast-shown"]])}function Jo(e){e=N$(e);const t=ml.swalPromiseResolve.get(this),n=T$(this);this.isAwaitingPromise?e.isDismissed||(Id(this),t(e)):n&&t(e)}const T$=e=>{const t=kt();if(!t)return!1;const n=Dt.innerParams.get(e);if(!n||ro(t,n.hideClass.popup))return!1;fi(t,n.showClass.popup),Ct(t,n.hideClass.popup);const r=pr();return fi(r,n.showClass.backdrop),Ct(r,n.hideClass.backdrop),j$(e,t,n),!0};function n_(e){const t=ml.swalPromiseReject.get(this);Id(this),t&&t(e)}const Id=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Dt.innerParams.get(e)||e._destroy())},N$=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),j$=(e,t,n)=>{var r;const i=pr(),s=zP(t);typeof n.willClose=="function"&&n.willClose(t),(r=Ge.eventEmitter)===null||r===void 0||r.emit("willClose",t),s?P$(e,t,i,n.returnFocus,n.didClose):t_(e,i,n.returnFocus,n.didClose)},P$=(e,t,n,r,i)=>{Ge.swalCloseEventFinishedCallback=t_.bind(null,e,n,r,i);const s=function(o){if(o.target===t){var l;(l=Ge.swalCloseEventFinishedCallback)===null||l===void 0||l.call(Ge),delete Ge.swalCloseEventFinishedCallback,t.removeEventListener("animationend",s),t.removeEventListener("transitionend",s)}};t.addEventListener("animationend",s),t.addEventListener("transitionend",s)},zC=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=Ge.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},pl=e=>{let t=kt();if(t||new vs,t=kt(),!t)return;const n=Ul();wp()?sr(Ll()):_$(t,e),zn(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},_$=(e,t)=>{const n=_d(),r=Ul();!n||!r||(!t&&Rr(ks())&&(t=ks()),zn(n),t&&(sr(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Ct([e,n],se.loading))},R$=(e,t)=>{t.input==="select"||t.input==="radio"?D$(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(cx(t.inputValue)||lx(t.inputValue))&&(pl(ks()),L$(e,t))},A$=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return I$(n);case"radio":return O$(n);case"file":return M$(n);default:return t.inputAutoTrim?n.value.trim():n.value}},I$=e=>e.checked?1:0,O$=e=>e.checked?e.value:null,M$=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,D$=(e,t)=>{const n=kt();if(!n)return;const r=i=>{t.input==="select"?F$(n,pm(i),t):t.input==="radio"&&U$(n,pm(i),t)};cx(t.inputOptions)||lx(t.inputOptions)?(pl(ks()),jd(t.inputOptions).then(i=>{e.hideLoading(),r(i)})):typeof t.inputOptions=="object"?r(t.inputOptions):lc(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},L$=(e,t)=>{const n=e.getInput();n&&(sr(n),jd(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,zn(n),n.focus(),e.hideLoading()}).catch(r=>{lc(`Error in inputValue promise: ${r}`),n.value="",zn(n),n.focus(),e.hideLoading()}))};function F$(e,t,n){const r=Zo(e,se.select);if(!r)return;const i=(s,o,l)=>{const d=document.createElement("option");d.value=l,Yr(d,o),d.selected=r_(l,n.inputValue),s.appendChild(d)};t.forEach(s=>{const o=s[0],l=s[1];if(Array.isArray(l)){const d=document.createElement("optgroup");d.label=o,d.disabled=!1,r.appendChild(d),l.forEach(h=>i(d,h[1],h[0]))}else i(r,l,o)}),r.focus()}function U$(e,t,n){const r=Zo(e,se.radio);if(!r)return;t.forEach(s=>{const o=s[0],l=s[1],d=document.createElement("input"),h=document.createElement("label");d.type="radio",d.name=se.radio,d.value=o,r_(o,n.inputValue)&&(d.checked=!0);const f=document.createElement("span");Yr(f,l),f.className=se.label,h.appendChild(d),h.appendChild(f),r.appendChild(h)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}const pm=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let i=n;typeof i=="object"&&(i=pm(i)),t.push([r,i])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=pm(r)),t.push([n,r])}),t},r_=(e,t)=>!!t&&t.toString()===e.toString(),B$=e=>{const t=Dt.innerParams.get(e);e.disableButtons(),t.input?i_(e,"confirm"):wx(e,!0)},z$=e=>{const t=Dt.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?i_(e,"deny"):xx(e,!1)},$$=(e,t)=>{e.disableButtons(),t(Bl.cancel)},i_=(e,t)=>{const n=Dt.innerParams.get(e);if(!n.input){lc(`The "input" parameter is needed to be set when using returnInputValueOn${ax(t)}`);return}const r=e.getInput(),i=A$(e,n);n.inputValidator?V$(e,i,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?xx(e,i):wx(e,i)},V$=(e,t,n)=>{const r=Dt.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>jd(r.inputValidator(t,r.validationMessage))).then(s=>{e.enableButtons(),e.enableInput(),s?e.showValidationMessage(s):n==="deny"?xx(e,t):wx(e,t)})},xx=(e,t)=>{const n=Dt.innerParams.get(e||void 0);n.showLoaderOnDeny&&pl(uc()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>jd(n.preDeny(t,n.validationMessage))).then(i=>{i===!1?(e.hideLoading(),Id(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>s_(e||void 0,i))):e.close({isDenied:!0,value:t})},$C=(e,t)=>{e.close({isConfirmed:!0,value:t})},s_=(e,t)=>{e.rejectPromise(t)},wx=(e,t)=>{const n=Dt.innerParams.get(e||void 0);n.showLoaderOnConfirm&&pl(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>jd(n.preConfirm(t,n.validationMessage))).then(i=>{Rr(bp())||i===!1?(e.hideLoading(),Id(e)):$C(e,typeof i>"u"?t:i)}).catch(i=>s_(e||void 0,i))):$C(e,t)};function gm(){const e=Dt.innerParams.get(this);if(!e)return;const t=Dt.domCache.get(this);sr(t.loader),wp()?e.icon&&zn(Ll()):q$(t),fi([t.popup,t.actions],se.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const q$=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?zn(t[0],"inline-block"):v9()&&sr(e.actions)};function o_(){const e=Dt.innerParams.get(this),t=Dt.domCache.get(this);return t?kp(t.popup,e.input):null}function a_(e,t,n){const r=Dt.domCache.get(e);t.forEach(i=>{r[i].disabled=n})}function c_(e,t){const n=kt();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${se.radio}"]`);for(let i=0;i<r.length;i++)r[i].disabled=t}else e.disabled=t}function l_(){a_(this,["confirmButton","denyButton","cancelButton"],!1)}function u_(){a_(this,["confirmButton","denyButton","cancelButton"],!0)}function d_(){c_(this.getInput(),!1)}function h_(){c_(this.getInput(),!0)}function f_(e){const t=Dt.domCache.get(this),n=Dt.innerParams.get(this);Yr(t.validationMessage,e),t.validationMessage.className=se["validation-message"],n.customClass&&n.customClass.validationMessage&&Ct(t.validationMessage,n.customClass.validationMessage),zn(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",se["validation-message"]),UP(r),Ct(r,se.inputerror))}function m_(){const e=Dt.domCache.get(this);e.validationMessage&&sr(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),fi(t,se.inputerror))}const el={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},H$=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],W$={allowEnterKey:void 0},K$=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],p_=e=>Object.prototype.hasOwnProperty.call(el,e),g_=e=>H$.indexOf(e)!==-1,v_=e=>W$[e],G$=e=>{p_(e)||mr(`Unknown parameter "${e}"`)},Z$=e=>{K$.includes(e)&&mr(`The parameter "${e}" is incompatible with toasts`)},J$=e=>{const t=v_(e);t&&MP(e,t)},y_=e=>{e.backdrop===!1&&e.allowOutsideClick&&mr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&mr(`Invalid theme "${e.theme}"`);for(const t in e)G$(t),e.toast&&Z$(t),J$(t)};function b_(e){const t=pr(),n=kt(),r=Dt.innerParams.get(this);if(!n||ro(n,r.hideClass.popup)){mr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=Q$(e),s=Object.assign({},r,i);y_(s),t.dataset.swal2Theme=s.theme,ZP(this,s),Dt.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const Q$=e=>{const t={};return Object.keys(e).forEach(n=>{g_(n)?t[n]=e[n]:mr(`Invalid parameter to update: ${n}`)}),t};function x_(){const e=Dt.domCache.get(this),t=Dt.innerParams.get(this);if(!t){w_(this);return}e.popup&&Ge.swalCloseEventFinishedCallback&&(Ge.swalCloseEventFinishedCallback(),delete Ge.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),Ge.eventEmitter.emit("didDestroy"),Y$(this)}const Y$=e=>{w_(e),delete e.params,delete Ge.keydownHandler,delete Ge.keydownTarget,delete Ge.currentInstance},w_=e=>{e.isAwaitingPromise?(dy(Dt,e),e.isAwaitingPromise=!0):(dy(ml,e),dy(Dt,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},dy=(e,t)=>{for(const n in e)e[n].delete(t)};var X$=Object.freeze({__proto__:null,_destroy:x_,close:Jo,closeModal:Jo,closePopup:Jo,closeToast:Jo,disableButtons:u_,disableInput:h_,disableLoading:gm,enableButtons:l_,enableInput:d_,getInput:o_,handleAwaitingPromise:Id,hideLoading:gm,rejectPromise:n_,resetValidationMessage:m_,showValidationMessage:f_,update:b_});const eV=(e,t,n)=>{e.toast?tV(e,t,n):(rV(t),iV(t),sV(e,t,n))},tV=(e,t,n)=>{t.popup.onclick=()=>{e&&(nV(e)||e.timer||e.input)||n(Bl.close)}},nV=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let vm=!1;const rV=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(vm=!0)}}},iV=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(vm=!0)}}},sV=(e,t,n)=>{t.container.onclick=r=>{if(vm){vm=!1;return}r.target===t.container&&yp(e.allowOutsideClick)&&n(Bl.backdrop)}},oV=e=>typeof e=="object"&&e.jquery,VC=e=>e instanceof Element||oV(e),aV=e=>{const t={};return typeof e[0]=="object"&&!VC(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const i=e[r];typeof i=="string"||VC(i)?t[n]=i:i!==void 0&&lc(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),t};function cV(...e){return new this(...e)}function lV(e){class t extends this{_main(r,i){return super._main(r,Object.assign({},e,i))}}return t}const uV=()=>Ge.timeout&&Ge.timeout.getTimerLeft(),k_=()=>{if(Ge.timeout)return b9(),Ge.timeout.stop()},S_=()=>{if(Ge.timeout){const e=Ge.timeout.start();return gx(e),e}},dV=()=>{const e=Ge.timeout;return e&&(e.running?k_():S_())},hV=e=>{if(Ge.timeout){const t=Ge.timeout.increase(e);return gx(t,!0),t}},fV=()=>!!(Ge.timeout&&Ge.timeout.isRunning());let qC=!1;const N0={};function mV(e="data-swal-template"){N0[e]=this,qC||(document.body.addEventListener("click",pV),qC=!0)}const pV=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in N0){const r=t.getAttribute(n);if(r){N0[n].fire({template:r});return}}};class gV{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){const r=(...i)=>{this.removeListener(t,r),n.apply(this,i)};this.on(t,r)}emit(t,...n){this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,n)}catch(i){console.error(i)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),i=r.indexOf(n);i>-1&&r.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}Ge.eventEmitter=new gV;const vV=(e,t)=>{Ge.eventEmitter.on(e,t)},yV=(e,t)=>{Ge.eventEmitter.once(e,t)},bV=(e,t)=>{if(!e){Ge.eventEmitter.reset();return}t?Ge.eventEmitter.removeListener(e,t):Ge.eventEmitter.removeAllListeners(e)};var xV=Object.freeze({__proto__:null,argsToParams:aV,bindClickHandler:mV,clickCancel:a$,clickConfirm:JP,clickDeny:o$,enableLoading:pl,fire:cV,getActions:_d,getCancelButton:Fl,getCloseButton:hx,getConfirmButton:ks,getContainer:pr,getDenyButton:uc,getFocusableElements:fx,getFooter:FP,getHtmlContainer:ux,getIcon:Ll,getIconContent:h9,getImage:LP,getInputLabel:f9,getLoader:Ul,getPopup:kt,getProgressSteps:dx,getTimerLeft:uV,getTimerProgressBar:xp,getTitle:DP,getValidationMessage:bp,increaseTimer:hV,isDeprecatedParameter:v_,isLoading:p9,isTimerRunning:fV,isUpdatableParameter:g_,isValidParameter:p_,isVisible:s$,mixin:lV,off:bV,on:vV,once:yV,resumeTimer:S_,showLoading:pl,stopTimer:k_,toggleTimer:dV});class wV{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const C_=["swal-title","swal-html","swal-footer"],kV=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return _V(n),Object.assign(SV(n),CV(n),EV(n),TV(n),NV(n),jV(n),PV(n,C_))},SV=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{Ya(r,["name","value"]);const i=r.getAttribute("name"),s=r.getAttribute("value");!i||!s||(typeof el[i]=="boolean"?t[i]=s!=="false":typeof el[i]=="object"?t[i]=JSON.parse(s):t[i]=s)}),t},CV=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const i=r.getAttribute("name"),s=r.getAttribute("value");!i||!s||(t[i]=new Function(`return ${s}`)())}),t},EV=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{Ya(r,["type","color","aria-label"]);const i=r.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=r.innerHTML,t[`show${ax(i)}Button`]=!0,r.hasAttribute("color")&&(t[`${i}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},TV=e=>{const t={},n=e.querySelector("swal-image");return n&&(Ya(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},NV=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Ya(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},jV=e=>{const t={},n=e.querySelector("swal-input");n&&(Ya(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(i=>{Ya(i,["value"]);const s=i.getAttribute("value");if(!s)return;const o=i.innerHTML;t.inputOptions[s]=o})),t},PV=(e,t)=>{const n={};for(const r in t){const i=t[r],s=e.querySelector(i);s&&(Ya(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},_V=e=>{const t=C_.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||mr(`Unrecognized element <${r}>`)})},Ya=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&mr([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},E_=10,RV=e=>{const t=pr(),n=kt();typeof e.willOpen=="function"&&e.willOpen(n),Ge.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;OV(t,n,e),setTimeout(()=>{AV(t,n)},E_),mx()&&(IV(t,e.scrollbarPadding,i),p$()),!wp()&&!Ge.previousActiveElement&&(Ge.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),Ge.eventEmitter.emit("didOpen",n),fi(t,se["no-transition"])},ym=e=>{const t=kt();if(e.target!==t)return;const n=pr();t.removeEventListener("animationend",ym),t.removeEventListener("transitionend",ym),n.style.overflowY="auto"},AV=(e,t)=>{zP(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",ym),t.addEventListener("transitionend",ym)):e.style.overflowY="auto"},IV=(e,t,n)=>{g$(),t&&n!=="hidden"&&S$(n),setTimeout(()=>{e.scrollTop=0})},OV=(e,t,n)=>{Ct(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),zn(t,"grid"),setTimeout(()=>{Ct(t,n.showClass.popup),t.style.removeProperty("opacity")},E_)):zn(t,"grid"),Ct([document.documentElement,document.body],se.shown),n.heightAuto&&n.backdrop&&!n.toast&&Ct([document.documentElement,document.body],se["height-auto"])};var HC={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function MV(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=HC.email),e.input==="url"&&(e.inputValidator=HC.url))}function DV(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(mr('Target parameter is not valid, defaulting to "body"'),e.target="body")}function LV(e){MV(e),e.showLoaderOnConfirm&&!e.preConfirm&&mr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),DV(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),N9(e)}let us;var lf=new WeakMap;class un{constructor(...t){if(i9(this,lf,void 0),typeof window>"u")return;us=this;const n=Object.freeze(this.constructor.argsToParams(t));this.params=n,this.isAwaitingPromise=!1,s9(lf,this,this._main(us.params))}_main(t,n={}){if(y_(Object.assign({},n,t)),Ge.currentInstance){const s=ml.swalPromiseResolve.get(Ge.currentInstance),{isAwaitingPromise:o}=Ge.currentInstance;Ge.currentInstance._destroy(),o||s({isDismissed:!0}),mx()&&XP()}Ge.currentInstance=us;const r=UV(t,n);LV(r),Object.freeze(r),Ge.timeout&&(Ge.timeout.stop(),delete Ge.timeout),clearTimeout(Ge.restoreFocusTimeout);const i=BV(us);return ZP(us,r),Dt.innerParams.set(us,r),FV(us,i,r)}then(t){return MC(lf,this).then(t)}finally(t){return MC(lf,this).finally(t)}}const FV=(e,t,n)=>new Promise((r,i)=>{const s=o=>{e.close({isDismissed:!0,dismiss:o})};ml.swalPromiseResolve.set(e,r),ml.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{B$(e)},t.denyButton.onclick=()=>{z$(e)},t.cancelButton.onclick=()=>{$$(e,s)},t.closeButton.onclick=()=>{s(Bl.close)},eV(n,t,s),c$(Ge,n,s),R$(e,n),RV(n),zV(Ge,n,s),$V(t,n),setTimeout(()=>{t.container.scrollTop=0})}),UV=(e,t)=>{const n=kV(e),r=Object.assign({},el,t,n,e);return r.showClass=Object.assign({},el.showClass,r.showClass),r.hideClass=Object.assign({},el.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},BV=e=>{const t={popup:kt(),container:pr(),actions:_d(),confirmButton:ks(),denyButton:uc(),cancelButton:Fl(),loader:Ul(),closeButton:hx(),validationMessage:bp(),progressSteps:dx()};return Dt.domCache.set(e,t),t},zV=(e,t,n)=>{const r=xp();sr(r),t.timer&&(e.timeout=new wV(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(zn(r),Zr(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&gx(t.timer)})))},$V=(e,t)=>{if(!t.toast){if(!yp(t.allowEnterKey)){MP("allowEnterKey"),HV();return}VV(e)||qV(e,t)||T0(-1,1)}},VV=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&Rr(n))return n.focus(),!0;return!1},qV=(e,t)=>t.focusDeny&&Rr(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Rr(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Rr(e.confirmButton)?(e.confirmButton.focus(),!0):!1,HV=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};un.prototype.disableButtons=u_;un.prototype.enableButtons=l_;un.prototype.getInput=o_;un.prototype.disableInput=h_;un.prototype.enableInput=d_;un.prototype.hideLoading=gm;un.prototype.disableLoading=gm;un.prototype.showValidationMessage=f_;un.prototype.resetValidationMessage=m_;un.prototype.close=Jo;un.prototype.closePopup=Jo;un.prototype.closeModal=Jo;un.prototype.closeToast=Jo;un.prototype.rejectPromise=n_;un.prototype.update=b_;un.prototype._destroy=x_;Object.assign(un,xV);Object.keys(X$).forEach(e=>{un[e]=function(...t){return us&&us[e]?us[e](...t):null}});un.DismissReason=Bl;un.version="11.23.0";const vs=un;vs.default=vs;typeof document<"u"&&(function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const WV="/auth/login",KV="/auth/register",GV="/auth/forgot-password",ZV="/auth/verify-email",JV="/auth/reset-password";async function WC({email:e,password:t}){const n={Email:e,Password:t};try{const{data:r}=await Xe.post(WV,n);if(!r.access_token)throw new Error("No se recibió token de acceso");return nF(r.access_token),r.refresh_token&&localStorage.setItem("refresh_token",r.refresh_token),r.access_token}catch(r){const i=r?.response?.status;if(i===404)throw new Error("Endpoint no encontrado (404). Verifica que el backend exponga /auth/login.");if(i===401){const o=r?.response?.data?.message;throw o?.includes("no activada")||o?.includes("not activated")?new Error("Cuenta no activada. Por favor verifica tu correo electrónico."):new Error("Credenciales inválidas")}const s=r?.response?.data?.message??r?.response?.data?.error??r?.message??"No se pudo iniciar sesión";throw new Error(String(s))}}async function T_(e){try{const{data:t}=await Xe.post(KV,e);return t}catch(t){if(t?.response?.status===400){const i=t?.response?.data?.message;throw Array.isArray(i)?new Error(i.join(". ")):new Error(i||"Datos de registro inválidos")}const r=t?.response?.data?.message??t?.response?.data?.error??t?.message??"No se pudo registrar el usuario";throw new Error(String(r))}}async function QV(e){return T_({FirstName:e.firstName,LastName1:e.lastName1,LastName2:e.lastName2,Email:e.email,Password:e.password,PasswordConfirm:e.password,Phone:e.phone,Role:"PATIENT"})}async function YV(e){return T_({FirstName:e.firstName,LastName1:e.lastName1,LastName2:e.lastName2,Email:e.email,Password:e.password,PasswordConfirm:e.password,Phone:e.phone,Role:"DOCTOR"})}async function XV(e){try{await Xe.post(ZV,{token:e})}catch(t){const n=t?.response?.status;if(n===404)throw new Error("Endpoint no encontrado (404). Verifica que el backend exponga /auth/verify-email.");if(n===400)throw new Error("Token de verificación inválido o expirado");const r=t?.response?.data?.message??t?.response?.data?.error??t?.message??"No se pudo verificar el email";throw new Error(String(r))}}async function eq(e){const t={Email:e};try{await Xe.post(GV,t)}catch(n){if(n?.response?.status===404){console.warn("[AUTH] Endpoint /auth/forgot-password no encontrado. Simulando éxito.");return}console.warn("[AUTH] Error en forgot-password, pero simulando éxito por seguridad:",n)}}async function tq({token:e,newPassword:t}){try{await Xe.post(JV,{token:e,newPassword:t})}catch(n){const r=n?.response?.status;if(r===404)throw new Error("Endpoint no encontrado (404). Verifica que el backend exponga /auth/reset-password.");if(r===400)throw new Error("Token de recuperación inválido o expirado");const i=n?.response?.data?.message??n?.response?.data?.error??n?.message??"No se pudo restablecer la contraseña";throw new Error(String(i))}}function nq({onLogin:e}){const t=_t(),[n,r]=g.useState("es"),[i,s]=g.useState("patient"),[o,l]=g.useState(""),[d,h]=g.useState(""),[f,p]=g.useState(!1),[y,b]=g.useState(""),[k,x]=g.useState(""),[S,E]=g.useState(""),[T,P]=g.useState(""),[j,N]=g.useState(""),[R,A]=g.useState(""),[I,D]=g.useState(!1),[z,q]=g.useState(!1),[V,te]=g.useState(!1),[J,we]=g.useState(!1),[X,me]=g.useState(null),[U,ue]=g.useState(null),fe=g.useMemo(()=>[{code:"es",name:"Español"},{code:"en",name:"English"},{code:"fr",name:"Français"},{code:"pt",name:"Português"},{code:"de",name:"Deutsch"}],[]),F=oe=>{const Se=(oe.role||"").toString().toUpperCase();return Se==="ADMIN"?"admin":Se==="DOCTOR"?"doctor":"patient"},ie=async()=>{me(null),te(!0);try{await WC({email:o.trim(),password:d});const oe=await Yu(),Se=F(oe);if(!["patient","doctor","admin"].includes(Se)){me("Tu cuenta no tiene un rol válido para acceder.");return}const Ae=Se==="doctor"?"doctor":Se==="admin"?"administrador":"paciente";await vs.fire({icon:"success",title:`¡Bienvenido, ${Ae}!`,text:`Inicio de sesión exitoso${oe.fullName?`, ${oe.fullName}`:""}.`,confirmButtonText:"Continuar",confirmButtonColor:"#0f766e",timer:3e3,timerProgressBar:!0}),e(Se)}catch(oe){const Se=oe?.response?.data?.message??oe?.message??"No se pudo iniciar sesión. Verifica tus credenciales.";me(Se)}finally{te(!1)}},pe=async()=>{if(ue(null),j!==R){ue("Las contraseñas no coinciden.");return}we(!0);try{i==="doctor"?await YV({firstName:y.trim(),lastName1:k.trim(),lastName2:S?S.trim():void 0,email:T.trim(),password:j}):await QV({firstName:y.trim(),lastName1:k.trim(),lastName2:S?S.trim():void 0,email:T.trim(),password:j}),await WC({email:T.trim(),password:j});const oe=await Yu(),Se=F(oe);await vs.fire({icon:"success",title:"¡Cuenta creada!",text:`Bienvenido${oe.fullName?`, ${oe.fullName}`:""}.`,confirmButtonText:"Continuar",confirmButtonColor:"#0f766e",timer:3e3,timerProgressBar:!0}),e(Se)}catch(oe){ue(oe?.response?.data?.message??oe?.message??"No se pudo crear la cuenta. Revisa los datos e inténtalo de nuevo.")}finally{we(!1)}};return c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md space-y-6",children:[c.jsx("div",{className:"flex justify-start",children:c.jsxs(Q,{variant:"outline",onClick:()=>t("/"),className:"flex items-center gap-2",children:[c.jsx(Di,{className:"h-4 w-4"}),"Volver al Inicio"]})}),c.jsx("div",{className:"flex justify-end",children:c.jsxs(rd,{value:n,onValueChange:r,children:[c.jsx(sd,{className:"w-40 bg-white",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ul,{className:"h-4 w-4"}),c.jsx(id,{placeholder:"Idioma"})]})}),c.jsx(od,{children:fe.map(oe=>c.jsx(qr,{value:oe.code,children:oe.name},oe.code))})]})}),c.jsxs(le,{className:"bg-white shadow-lg",children:[c.jsxs(Oe,{className:"text-center",children:[c.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:c.jsx("div",{className:"text-white text-2xl font-bold",children:"SSF"})}),c.jsx($e,{className:"text-2xl text-primary",children:"Salud Sin Fronteras"}),c.jsx("p",{className:"text-muted-foreground",children:"Médicos y pacientes unidos, sin barreras."})]}),c.jsx(de,{children:c.jsxs(Ml,{defaultValue:"login",className:"space-y-4",children:[c.jsxs(Dl,{className:"grid w-full grid-cols-2",children:[c.jsx(an,{value:"login",children:"Iniciar Sesión"}),c.jsx(an,{value:"register",children:"Registrarse"})]}),c.jsx(cn,{value:"login",className:"space-y-4",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"loginEmail",children:"Correo Electrónico"}),c.jsx(At,{id:"loginEmail",type:"email",placeholder:"tu@email.com",value:o,onChange:oe=>l(oe.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(wt,{htmlFor:"loginPassword",children:"Contraseña"}),c.jsx(Q,{variant:"link",className:"text-xs text-primary p-0 h-auto",onClick:()=>t("/forgot-password"),children:"¿Olvidaste tu contraseña?"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"loginPassword",type:f?"text":"password",placeholder:"••••••••",value:d,onChange:oe=>h(oe.target.value),className:"pr-10"}),c.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]}),X&&c.jsx("p",{className:"text-red-600 text-sm",children:X}),c.jsx(Q,{className:"w-full bg-primary hover:bg-primary/90",onClick:ie,disabled:V||!o||!d,children:V?"Ingresando...":"Iniciar Sesión"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("span",{className:"w-full border-t"})}),c.jsx("div",{className:"relative flex justify-center text-xs uppercase"})]})]})}),c.jsx(cn,{value:"register",className:"space-y-4",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{children:"Tipo de Usuario"}),c.jsxs(rd,{value:i,onValueChange:oe=>s(oe),children:[c.jsx(sd,{children:c.jsx(id,{placeholder:"Selecciona un tipo"})}),c.jsxs(od,{children:[c.jsx(qr,{value:"patient",children:"Paciente"}),c.jsx(qr,{value:"doctor",children:"Médico"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rFirstName",children:"Nombre"}),c.jsx(At,{id:"rFirstName",placeholder:"Juan",value:y,onChange:oe=>b(oe.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rLastName1",children:"Primer Apellido"}),c.jsx(At,{id:"rLastName1",placeholder:"Pérez",value:k,onChange:oe=>x(oe.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rLastName2",children:"Segundo Apellido"}),c.jsx(At,{id:"rLastName2",placeholder:"Rodríguez",value:S,onChange:oe=>E(oe.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rEmail",children:"Correo Electrónico"}),c.jsx(At,{id:"rEmail",type:"email",placeholder:"tu@email.com",value:T,onChange:oe=>P(oe.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rPassword",children:"Contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"rPassword",type:I?"text":"password",placeholder:"••••••••",value:j,onChange:oe=>N(oe.target.value),className:"pr-10"}),c.jsx("button",{type:"button",onClick:()=>D(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:I?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rPassword2",children:"Confirmar Contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"rPassword2",type:z?"text":"password",placeholder:"••••••••",value:R,onChange:oe=>A(oe.target.value),className:"pr-10"}),c.jsx("button",{type:"button",onClick:()=>q(!z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:z?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]})]}),U&&c.jsx("p",{className:"text-red-600 text-sm",children:U}),c.jsx(Q,{className:"w-full bg-primary hover:bg-primary/90",onClick:pe,disabled:J||!T||!j||!R||!y||!k,children:J?"Creando cuenta...":"Crear Cuenta"})]})})]})})]})]})})}function rq(){const e=_t(),[t,n]=g.useState(""),[r,i]=g.useState(!1),[s,o]=g.useState(""),l=h=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h),d=async h=>{if(h.preventDefault(),o(""),!t.trim()){o("Por favor ingresa tu correo electrónico");return}if(!l(t)){o("Por favor ingresa un correo electrónico válido");return}i(!0);try{await eq(t),await vs.fire({icon:"success",title:"¡Correo enviado!",html:`
          <p>Se ha enviado un enlace de recuperación a:</p>
          <p class="font-semibold text-primary mt-2">${t}</p>
          <p class="text-sm text-muted-foreground mt-2">
            Por favor revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña.
          </p>
        `,confirmButtonText:"Ir al Login",confirmButtonColor:"#0f766e"}),e("/login")}catch(f){i(!1);const p=f?.response?.data?.message||f?.response?.data?.error||"No se pudo enviar el correo de recuperación. Intenta de nuevo.";await vs.fire({icon:"error",title:"Error",text:p,confirmButtonColor:"#dc2626"})}finally{i(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-teal-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs(Q,{variant:"ghost",onClick:()=>e("/login"),className:"mb-4",children:[c.jsx(Di,{className:"h-4 w-4 mr-2"}),"Volver al Login"]}),c.jsxs(le,{className:"shadow-xl border-2 border-teal-100",children:[c.jsxs(Oe,{className:"text-center space-y-2",children:[c.jsx("div",{className:"mx-auto w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mb-2",children:c.jsx(Xu,{className:"h-8 w-8 text-teal-600"})}),c.jsx($e,{className:"text-2xl font-bold text-teal-900",children:"¿Olvidaste tu contraseña?"}),c.jsx(tr,{className:"text-base",children:"No te preocupes. Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),c.jsx(de,{children:c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"email",className:"text-sm font-medium",children:"Correo Electrónico"}),c.jsxs("div",{className:"relative",children:[c.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx(At,{id:"email",type:"email",placeholder:"tu@email.com",value:t,onChange:h=>{n(h.target.value),o("")},className:`pl-10 ${s?"border-red-500 focus:border-red-500":""}`,disabled:r,autoFocus:!0})]}),s&&c.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[c.jsx("span",{className:"inline-block w-1 h-1 bg-red-600 rounded-full"}),s]})]}),c.jsx(Q,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700",disabled:r,children:r?c.jsxs(c.Fragment,{children:[c.jsx(Kn,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):c.jsxs(c.Fragment,{children:[c.jsx(np,{className:"h-4 w-4 mr-2"}),"Enviar enlace de recuperación"]})}),c.jsx("div",{className:"pt-4 border-t",children:c.jsxs("p",{className:"text-xs text-center text-gray-600",children:["El enlace de recuperación expirará en 24 horas.",c.jsx("br",{}),"Si no recibes el correo, revisa tu carpeta de spam."]})})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-600",children:["¿Necesitas ayuda?"," ",c.jsx("button",{onClick:()=>{vs.fire({icon:"info",title:"Contacta con Soporte",html:`
                    <p>Si tienes problemas para recuperar tu cuenta, contáctanos:</p>
                    <p class="font-semibold mt-2">soporte@saludSinFronteras.com</p>
                    <p class="text-sm text-muted-foreground mt-2">Horario: Lun-Vie 9:00 AM - 6:00 PM</p>
                  `,confirmButtonColor:"#0f766e"})},className:"text-teal-600 hover:text-teal-700 font-medium hover:underline",children:"Contacta con soporte"})]})})]})})}function iq(){const[e]=HN(),t=_t(),[n,r]=g.useState("loading"),[i,s]=g.useState(""),o=e.get("token");g.useEffect(()=>{if(!o){r("error"),s("Token de verificación no encontrado en la URL");return}(async()=>{try{await XV(o),r("success"),s("Tu cuenta ha sido verificada exitosamente. Ya puedes iniciar sesión.")}catch(f){r("error"),s(f?.message||"No se pudo verificar la cuenta. El token puede haber expirado o ser inválido.")}})()},[o]);const l=()=>{t("/login")},d=()=>{t("/")};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsxs(le,{className:"w-full max-w-md",children:[c.jsxs(Oe,{className:"text-center",children:[c.jsxs("div",{className:"flex justify-center mb-4",children:[n==="loading"&&c.jsx(Kn,{className:"h-16 w-16 text-blue-500 animate-spin"}),n==="success"&&c.jsx(Ko,{className:"h-16 w-16 text-green-500"}),n==="error"&&c.jsx(Go,{className:"h-16 w-16 text-red-500"})]}),c.jsxs($e,{className:"text-2xl",children:[n==="loading"&&"Verificando tu cuenta",n==="success"&&"Cuenta verificada",n==="error"&&"Error de verificación"]}),c.jsxs(tr,{className:"mt-2",children:[n==="loading"&&"Por favor espera mientras verificamos tu cuenta...",n==="success"&&i,n==="error"&&i]})]}),c.jsxs(de,{className:"flex flex-col gap-3",children:[n==="success"&&c.jsx(Q,{onClick:l,className:"w-full",children:"Ir al inicio de sesión"}),n==="error"&&c.jsxs(c.Fragment,{children:[c.jsx(Q,{onClick:l,className:"w-full",children:"Ir al inicio de sesión"}),c.jsx(Q,{onClick:d,variant:"outline",className:"w-full",children:"Volver al inicio"})]})]})]})})}const sq=zb("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ss({className:e,variant:t,...n}){return c.jsx("div",{"data-slot":"alert",role:"alert",className:ut(sq({variant:t}),e),...n})}function Cs({className:e,...t}){return c.jsx("div",{"data-slot":"alert-description",className:ut("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function oq(){const[e]=HN(),t=_t(),n=e.get("token"),[r,i]=g.useState(""),[s,o]=g.useState(""),[l,d]=g.useState(!1),[h,f]=g.useState(!1),[p,y]=g.useState(!1),[b,k]=g.useState(""),[x,S]=g.useState(!1),E=async T=>{if(T.preventDefault(),k(""),!n){k("Token de recuperación no encontrado en la URL");return}if(r.length<8){k("La contraseña debe tener al menos 8 caracteres");return}if(r!==s){k("Las contraseñas no coinciden");return}y(!0);try{await tq({token:n,newPassword:r}),S(!0),setTimeout(()=>{t("/login")},2e3)}catch(P){k(P?.message||"No se pudo restablecer la contraseña")}finally{y(!1)}};return n?x?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsx(le,{className:"w-full max-w-md",children:c.jsxs(Oe,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx(Ko,{className:"h-16 w-16 text-green-500"})}),c.jsx($e,{className:"text-2xl",children:"Contraseña actualizada"}),c.jsx(tr,{className:"mt-2",children:"Tu contraseña ha sido actualizada exitosamente. Serás redirigido al inicio de sesión..."})]})})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsxs(le,{className:"w-full max-w-md",children:[c.jsxs(Oe,{className:"text-center",children:[c.jsx($e,{className:"text-2xl",children:"Restablecer contraseña"}),c.jsx(tr,{className:"mt-2",children:"Ingresa tu nueva contraseña"})]}),c.jsx(de,{children:c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[b&&c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsx(Cs,{children:b})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"newPassword",children:"Nueva contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"newPassword",type:l?"text":"password",placeholder:"Mínimo 8 caracteres",value:r,onChange:T=>i(T.target.value),required:!0,minLength:8,disabled:p,className:"pr-10"}),c.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:p,children:l?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"confirmPassword",children:"Confirmar contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"confirmPassword",type:h?"text":"password",placeholder:"Confirma tu nueva contraseña",value:s,onChange:T=>o(T.target.value),required:!0,minLength:8,disabled:p,className:"pr-10"}),c.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:p,children:h?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]}),c.jsx(Q,{type:"submit",className:"w-full",disabled:p,children:p?c.jsxs(c.Fragment,{children:[c.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Restableciendo..."]}):"Restablecer contraseña"}),c.jsx(Q,{type:"button",variant:"outline",className:"w-full",onClick:()=>t("/login"),disabled:p,children:"Volver al inicio de sesión"})]})})]})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsxs(le,{className:"w-full max-w-md",children:[c.jsxs(Oe,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx(so,{className:"h-16 w-16 text-red-500"})}),c.jsx($e,{className:"text-2xl",children:"Token no encontrado"}),c.jsx(tr,{className:"mt-2",children:"No se encontró el token de recuperación en la URL. Por favor verifica el enlace que recibiste por correo."})]}),c.jsx(de,{children:c.jsx(Q,{onClick:()=>t("/login"),className:"w-full",children:"Volver al inicio de sesión"})})]})})}async function aq(){const e=await Xe.get("/appointments/upcoming",{params:{limit:10}}),n=(Array.isArray(e.data)?e.data:[]).map(d=>{const h=new Date(d.scheduledAt),f=h.getFullYear(),p=String(h.getMonth()+1).padStart(2,"0"),y=String(h.getDate()).padStart(2,"0"),b=String(h.getHours()).padStart(2,"0"),k=String(h.getMinutes()).padStart(2,"0");return{id:Number(d.id),doctor:d.doctor?.name||"Médico",specialty:d.doctor?.specialty||"General",date:`${f}-${p}-${y}`,time:`${b}:${k}`,type:String(d.modality).toLowerCase()==="online"?"videollamada":"presencial"}}),i=(await Xe.get("/conversations/mine")).data,o=(Array.isArray(i?.items)?i.items:Array.isArray(i)?i:[]).slice(0,5).map(d=>({id:Number(d.Id??d.id),from:d.FromName??d.fromName??"Contacto",preview:d.Preview??d.preview??d.Text??d.text??"",at:d.CreatedAt??d.createdAt}));return{upcomingAppointments:n,recommendedDoctors:[],recentMessages:o}}function cq(e){return Ot({queryKey:["patient_dashboard"],queryFn:aq,refetchOnWindowFocus:!1})}var Sp="Popover",[N_,Rce]=Ji(Sp,[lp]),Od=lp(),[lq,ha]=N_(Sp),j_=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,l=Od(t),d=g.useRef(null),[h,f]=g.useState(!1),[p,y]=Za({prop:r,defaultProp:i??!1,onChange:s,caller:Sp});return c.jsx(_j,{...l,children:c.jsx(lq,{scope:t,contentId:no(),triggerRef:d,open:p,onOpenChange:y,onOpenToggle:g.useCallback(()=>y(b=>!b),[y]),hasCustomAnchor:h,onCustomAnchorAdd:g.useCallback(()=>f(!0),[]),onCustomAnchorRemove:g.useCallback(()=>f(!1),[]),modal:o,children:n})})};j_.displayName=Sp;var P_="PopoverAnchor",uq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ha(P_,n),s=Od(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return g.useEffect(()=>(o(),()=>l()),[o,l]),c.jsx(rx,{...s,...r,ref:t})});uq.displayName=P_;var __="PopoverTrigger",R_=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ha(__,n),s=Od(n),o=bt(t,i.triggerRef),l=c.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":D_(i.open),...r,ref:o,onClick:Je(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:c.jsx(rx,{asChild:!0,...s,children:l})});R_.displayName=__;var kx="PopoverPortal",[dq,hq]=N_(kx,{forceMount:void 0}),A_=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=ha(kx,t);return c.jsx(dq,{scope:t,forceMount:n,children:c.jsx(pi,{present:n||s.open,children:c.jsx(up,{asChild:!0,container:i,children:r})})})};A_.displayName=kx;var gl="PopoverContent",I_=g.forwardRef((e,t)=>{const n=hq(gl,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=ha(gl,e.__scopePopover);return c.jsx(pi,{present:r||s.open,children:s.modal?c.jsx(mq,{...i,ref:t}):c.jsx(pq,{...i,ref:t})})});I_.displayName=gl;var fq=Wa("PopoverContent.RemoveScroll"),mq=g.forwardRef((e,t)=>{const n=ha(gl,e.__scopePopover),r=g.useRef(null),i=bt(t,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return ix(o)},[]),c.jsx(hp,{as:fq,allowPinchZoom:!0,children:c.jsx(O_,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(e.onCloseAutoFocus,o=>{o.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Je(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,h=l.button===2||d;s.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Je(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),pq=g.forwardRef((e,t)=>{const n=ha(gl,e.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return c.jsx(O_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),O_=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,...p}=e,y=ha(gl,n),b=Od(n);return Gb(),c.jsx(ip,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:c.jsx(rp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>y.onOpenChange(!1),children:c.jsx(Rj,{"data-state":D_(y.open),role:"dialog",id:y.contentId,...b,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),M_="PopoverClose",gq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ha(M_,n);return c.jsx(Qe.button,{type:"button",...r,ref:t,onClick:Je(e.onClick,()=>i.onOpenChange(!1))})});gq.displayName=M_;var vq="PopoverArrow",yq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Od(n);return c.jsx(Aj,{...i,...r,ref:t})});yq.displayName=vq;function D_(e){return e?"open":"closed"}var bq=j_,xq=R_,wq=A_,kq=I_;function Sq({...e}){return c.jsx(bq,{"data-slot":"popover",...e})}function Cq({...e}){return c.jsx(xq,{"data-slot":"popover-trigger",...e})}function Eq({className:e,align:t="center",sideOffset:n=4,...r}){return c.jsx(wq,{children:c.jsx(kq,{"data-slot":"popover-content",align:t,sideOffset:n,className:ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function Tq(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var Sx="ScrollArea",[L_,Ace]=Ji(Sx),[Nq,gi]=L_(Sx),F_=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[l,d]=g.useState(null),[h,f]=g.useState(null),[p,y]=g.useState(null),[b,k]=g.useState(null),[x,S]=g.useState(null),[E,T]=g.useState(0),[P,j]=g.useState(0),[N,R]=g.useState(!1),[A,I]=g.useState(!1),D=bt(t,q=>d(q)),z=Ed(i);return c.jsx(Nq,{scope:n,type:r,dir:z,scrollHideDelay:s,scrollArea:l,viewport:h,onViewportChange:f,content:p,onContentChange:y,scrollbarX:b,onScrollbarXChange:k,scrollbarXEnabled:N,onScrollbarXEnabledChange:R,scrollbarY:x,onScrollbarYChange:S,scrollbarYEnabled:A,onScrollbarYEnabledChange:I,onCornerWidthChange:T,onCornerHeightChange:j,children:c.jsx(Qe.div,{dir:z,...o,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":P+"px",...e.style}})})});F_.displayName=Sx;var U_="ScrollAreaViewport",B_=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=e,o=gi(U_,n),l=g.useRef(null),d=bt(t,l,o.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),c.jsx(Qe.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:c.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});B_.displayName=U_;var _s="ScrollAreaScrollbar",z_=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gi(_s,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return g.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),i.type==="hover"?c.jsx(jq,{...r,ref:t,forceMount:n}):i.type==="scroll"?c.jsx(Pq,{...r,ref:t,forceMount:n}):i.type==="auto"?c.jsx($_,{...r,ref:t,forceMount:n}):i.type==="always"?c.jsx(Cx,{...r,ref:t}):null});z_.displayName=_s;var jq=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gi(_s,e.__scopeScrollArea),[s,o]=g.useState(!1);return g.useEffect(()=>{const l=i.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),o(!0)},f=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),c.jsx(pi,{present:n||s,children:c.jsx($_,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Pq=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gi(_s,e.__scopeScrollArea),s=e.orientation==="horizontal",o=Ep(()=>d("SCROLL_END"),100),[l,d]=Tq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,i.scrollHideDelay,d]),g.useEffect(()=>{const h=i.viewport,f=s?"scrollLeft":"scrollTop";if(h){let p=h[f];const y=()=>{const b=h[f];p!==b&&(d("SCROLL"),o()),p=b};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[i.viewport,s,d,o]),c.jsx(pi,{present:n||l!=="hidden",children:c.jsx(Cx,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Je(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Je(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),$_=g.forwardRef((e,t)=>{const n=gi(_s,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=g.useState(!1),l=e.orientation==="horizontal",d=Ep(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?h:f)}},10);return vl(n.viewport,d),vl(n.content,d),c.jsx(pi,{present:r||s,children:c.jsx(Cx,{"data-state":s?"visible":"hidden",...i,ref:t})})}),Cx=g.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=gi(_s,e.__scopeScrollArea),s=g.useRef(null),o=g.useRef(0),[l,d]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=K_(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:y=>s.current=y,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:y=>o.current=y};function p(y,b){return Mq(y,o.current,l,b)}return n==="horizontal"?c.jsx(_q,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const y=i.viewport.scrollLeft,b=KC(y,l,i.dir);s.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=p(y,i.dir))}}):n==="vertical"?c.jsx(Rq,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const y=i.viewport.scrollTop,b=KC(y,l);s.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=p(y))}}):null}),_q=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=gi(_s,e.__scopeScrollArea),[o,l]=g.useState(),d=g.useRef(null),h=bt(t,d,s.onScrollbarXChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),c.jsx(q_,{"data-orientation":"horizontal",...i,ref:h,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Cp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(s.viewport){const y=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(y),Z_(y,p)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:xm(o.paddingLeft),paddingEnd:xm(o.paddingRight)}})}})}),Rq=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=gi(_s,e.__scopeScrollArea),[o,l]=g.useState(),d=g.useRef(null),h=bt(t,d,s.onScrollbarYChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),c.jsx(q_,{"data-orientation":"vertical",...i,ref:h,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Cp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(s.viewport){const y=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(y),Z_(y,p)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:xm(o.paddingTop),paddingEnd:xm(o.paddingBottom)}})}})}),[Aq,V_]=L_(_s),q_=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:p,...y}=e,b=gi(_s,n),[k,x]=g.useState(null),S=bt(t,D=>x(D)),E=g.useRef(null),T=g.useRef(""),P=b.viewport,j=r.content-r.viewport,N=rr(f),R=rr(d),A=Ep(p,10);function I(D){if(E.current){const z=D.clientX-E.current.left,q=D.clientY-E.current.top;h({x:z,y:q})}}return g.useEffect(()=>{const D=z=>{const q=z.target;k?.contains(q)&&N(z,j)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[P,k,j,N]),g.useEffect(R,[r,R]),vl(k,A),vl(b.content,A),c.jsx(Aq,{scope:n,scrollbar:k,hasThumb:i,onThumbChange:rr(s),onThumbPointerUp:rr(o),onThumbPositionChange:R,onThumbPointerDown:rr(l),children:c.jsx(Qe.div,{...y,ref:S,style:{position:"absolute",...y.style},onPointerDown:Je(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),E.current=k.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),I(D))}),onPointerMove:Je(e.onPointerMove,I),onPointerUp:Je(e.onPointerUp,D=>{const z=D.target;z.hasPointerCapture(D.pointerId)&&z.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=T.current,b.viewport&&(b.viewport.style.scrollBehavior=""),E.current=null})})})}),bm="ScrollAreaThumb",H_=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=V_(bm,e.__scopeScrollArea);return c.jsx(pi,{present:n||i.hasThumb,children:c.jsx(Iq,{ref:t,...r})})}),Iq=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=gi(bm,n),o=V_(bm,n),{onThumbPositionChange:l}=o,d=bt(t,p=>o.onThumbChange(p)),h=g.useRef(void 0),f=Ep(()=>{h.current&&(h.current(),h.current=void 0)},100);return g.useEffect(()=>{const p=s.viewport;if(p){const y=()=>{if(f(),!h.current){const b=Dq(p,l);h.current=b,l()}};return l(),p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[s.viewport,f,l]),c.jsx(Qe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Je(e.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),k=p.clientX-b.left,x=p.clientY-b.top;o.onThumbPointerDown({x:k,y:x})}),onPointerUp:Je(e.onPointerUp,o.onThumbPointerUp)})});H_.displayName=bm;var Ex="ScrollAreaCorner",W_=g.forwardRef((e,t)=>{const n=gi(Ex,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?c.jsx(Oq,{...e,ref:t}):null});W_.displayName=Ex;var Oq=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=gi(Ex,n),[s,o]=g.useState(0),[l,d]=g.useState(0),h=!!(s&&l);return vl(i.scrollbarX,()=>{const f=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(f),d(f)}),vl(i.scrollbarY,()=>{const f=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(f),o(f)}),h?c.jsx(Qe.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function xm(e){return e?parseInt(e,10):0}function K_(e,t){const n=e/t;return isNaN(n)?0:n}function Cp(e){const t=K_(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Mq(e,t,n,r="ltr"){const i=Cp(n),s=i/2,o=t||s,l=i-o,d=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return G_([d,h],p)(e)}function KC(e,t,n="ltr"){const r=Cp(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,l=s-r,d=n==="ltr"?[0,o]:[o*-1,0],h=f0(e,d);return G_([0,o],[0,l])(h)}function G_(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Z_(e,t){return e>0&&e<t}var Dq=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function Ep(e,t){const n=rr(e),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function vl(e,t){const n=rr(t);yn(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var Lq=F_,Fq=B_,Uq=W_;function Bq({className:e,children:t,...n}){return c.jsxs(Lq,{"data-slot":"scroll-area",className:ut("relative",e),...n,children:[c.jsx(Fq,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),c.jsx(zq,{}),c.jsx(Uq,{})]})}function zq({className:e,orientation:t="vertical",...n}){return c.jsx(z_,{"data-slot":"scroll-area-scrollbar",orientation:t,className:ut("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:c.jsx(H_,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var $q="Separator",GC="horizontal",Vq=["horizontal","vertical"],J_=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=GC,...i}=e,s=qq(r)?r:GC,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return c.jsx(Qe.div,{"data-orientation":s,...l,...i,ref:t})});J_.displayName=$q;function qq(e){return Vq.includes(e)}var Hq=J_;function Q_({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return c.jsx(Hq,{"data-slot":"separator-root",decorative:n,orientation:t,className:ut("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function Y_(){const e=_t(),[t,n]=g.useState([]),[r,i]=g.useState(!1),[s,o]=g.useState(!1),l=[];g.useEffect(()=>{if(l.length===0)return;const E=l[l.length-1],T={id:E.MessageId||`notification-${Date.now()}`,type:"message",title:"Nuevo Mensaje",message:E.Content||"Tienes un nuevo mensaje",timestamp:E.CreatedAt||new Date().toISOString(),read:!1,actionUrl:E.ConversationId?`/chat/${E.ConversationId}`:void 0};n(P=>[T,...P]),Tt.info(T.title,{description:T.message.substring(0,50)+"...",action:T.actionUrl?{label:"Ver",onClick:()=>e(T.actionUrl)}:void 0}),d()},[l,e]);const d=()=>{try{const E=new(window.AudioContext||window.webkitAudioContext),T=E.createOscillator(),P=E.createGain();T.connect(P),P.connect(E.destination),T.frequency.value=800,T.type="sine",P.gain.setValueAtTime(.1,E.currentTime),P.gain.exponentialRampToValueAtTime(.01,E.currentTime+.1),T.start(E.currentTime),T.stop(E.currentTime+.1)}catch(E){console.log("Could not play notification sound:",E)}},h=t.filter(E=>!E.read).length,f=E=>{n(T=>T.map(P=>P.id===E?{...P,read:!0}:P))},p=()=>{n(E=>E.map(T=>({...T,read:!0})))},y=E=>{n(T=>T.filter(P=>P.id!==E))},b=()=>{n([])},k=E=>{f(E.id),E.actionUrl&&(e(E.actionUrl),i(!1))},x=E=>{switch(E){case"message":return c.jsx(dl,{className:"h-4 w-4"});case"appointment":return c.jsx(Pn,{className:"h-4 w-4"});case"medical_record":return c.jsx(Ir,{className:"h-4 w-4"});case"verification":return c.jsx(Ko,{className:"h-4 w-4"});default:return c.jsx(Qv,{className:"h-4 w-4"})}},S=E=>{const T=new Date(E),j=new Date().getTime()-T.getTime(),N=Math.floor(j/6e4);return N<1?"Ahora":N<60?`Hace ${N} min`:N<1440?`Hace ${Math.floor(N/60)} h`:T.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})};return c.jsxs(Sq,{open:r,onOpenChange:i,children:[c.jsx(Cq,{asChild:!0,children:c.jsxs(Q,{variant:"ghost",size:"icon",className:"relative",children:[c.jsx(Qv,{className:"h-5 w-5"}),h>0&&c.jsx(Ze,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:h>9?"9+":h}),s&&c.jsx("span",{className:"absolute bottom-1 right-1 h-2 w-2 bg-green-500 rounded-full"})]})}),c.jsxs(Eq,{className:"w-96 p-0",align:"end",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:"Notificaciones"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:s?"Conectado en tiempo real":"Desconectado"})]}),t.length>0&&c.jsxs("div",{className:"flex gap-2",children:[h>0&&c.jsx(Q,{variant:"ghost",size:"sm",onClick:p,className:"text-xs",children:"Marcar todo"}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:b,className:"text-xs",children:"Limpiar"})]})]}),c.jsx(Bq,{className:"h-[400px]",children:t.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-muted-foreground",children:[c.jsx(Qv,{className:"h-12 w-12 mb-4 opacity-50"}),c.jsx("p",{className:"text-sm",children:"No hay notificaciones"}),c.jsx("p",{className:"text-xs mt-1",children:"Te notificaremos sobre mensajes y eventos"})]}):c.jsx("div",{className:"divide-y",children:t.map(E=>c.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors cursor-pointer ${E.read?"":"bg-muted/30"}`,onClick:()=>k(E),children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`mt-1 ${E.read?"text-muted-foreground":"text-primary"}`,children:x(E.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("p",{className:`text-sm font-medium ${E.read?"text-muted-foreground":""}`,children:E.title}),!E.read&&c.jsx("span",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 mt-1"})]}),c.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:E.message}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:S(E.timestamp)})]}),c.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:T=>{T.stopPropagation(),y(E.id)},children:c.jsx(Ka,{className:"h-3 w-3"})})]})},E.id))})}),t.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(Q_,{}),c.jsx("div",{className:"p-3 text-center",children:c.jsx(Q,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>{i(!1)},children:"Ver todas las notificaciones"})})]})]})]})}function Wq({patientId:e,patientName:t="Andrey"}){const n=_t(),{data:r,isLoading:i,error:s,refetch:o,isFetching:l}=cq(),d=r?.upcomingAppointments??[];return i&&!r?c.jsx("div",{className:"min-h-screen grid place-items-center p-6 bg-background",children:c.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando panel…"})}):s?c.jsx("div",{className:"min-h-screen grid place-items-center p-6 bg-background",children:c.jsxs("div",{className:"space-y-3 text-center",children:[c.jsx("p",{className:"text-red-600 font-medium",children:"Ocurrió un error al cargar tu panel."}),c.jsx(Q,{onClick:()=>o(),disabled:l,children:"Reintentar"})]})}):c.jsx("div",{className:"min-h-screen bg-background p-6",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Bienvenido, ",t]}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestiona tus citas y consultas médicas"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Y_,{}),c.jsx(Q,{variant:"outline",onClick:()=>n("/settings"),children:"Configuración"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(le,{className:"border-2 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>n("/nueva-cita"),children:c.jsx(de,{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:c.jsx(rm,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg mb-1 text-foreground",children:"Nueva cita"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Agenda una consulta con un médico"}),c.jsx(Q,{className:"w-full bg-primary hover:bg-primary/90",onClick:h=>{h.stopPropagation(),n("/nueva-cita")},children:"Buscar médicos"})]})]})})}),c.jsx(le,{className:"border-2 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>n("/mensajes"),children:c.jsx(de,{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:c.jsx(dl,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg mb-1 text-foreground",children:"Mensajes"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Consulta con tus médicos"}),c.jsx(Q,{variant:"outline",className:"w-full",onClick:h=>{h.stopPropagation(),n("/mensajes")},children:"Ver mensajes"})]})]})})}),c.jsx(le,{className:"border-2 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>n("/mis-citas"),children:c.jsx(de,{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:c.jsx(Pn,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg mb-1 text-foreground",children:"Mis citas"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Revisa tus próximas consultas"}),c.jsx(Q,{variant:"outline",className:"w-full",onClick:h=>{h.stopPropagation(),n("/mis-citas")},children:"Ver citas"})]})]})})})]}),c.jsxs(le,{children:[c.jsxs(Oe,{children:[c.jsx($e,{className:"text-xl text-foreground",children:"Próximas citas"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Tus consultas programadas"})]}),c.jsx(de,{className:"space-y-4",children:d.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Pn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"No tienes más citas programadas"}),c.jsx(Q,{className:"bg-primary hover:bg-primary/90",onClick:()=>n("/nueva-cita"),children:"Agendar nueva cita"})]}):c.jsx(c.Fragment,{children:d.map(h=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:c.jsx(Wr,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-lg text-foreground",children:h.doctor}),c.jsx("p",{className:"text-sm text-muted-foreground",children:h.specialty}),c.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[c.jsx(ir,{className:"h-4 w-4"}),c.jsxs("span",{children:[h.date,", ",h.time]}),c.jsx("span",{className:"ml-2",children:"30 minutos"})]})]})]}),h.type==="videollamada"&&c.jsx(Q,{className:"bg-primary hover:bg-primary/90",onClick:()=>n("/video-call"),children:"Unirse"})]},h.id))})})]})]})})}var hy={exports:{}},fy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function Kq(){if(ZC)return fy;ZC=1;var e=Km();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,y){var b=y(),k=r({inst:{value:b,getSnapshot:y}}),x=k[0].inst,S=k[1];return s(function(){x.value=b,x.getSnapshot=y,d(x)&&S({inst:x})},[p,b,y]),i(function(){return d(x)&&S({inst:x}),p(function(){d(x)&&S({inst:x})})},[p]),o(b),b}function d(p){var y=p.getSnapshot;p=p.value;try{var b=y();return!n(p,b)}catch{return!0}}function h(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return fy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,fy}var JC;function Gq(){return JC||(JC=1,hy.exports=Kq()),hy.exports}var Zq=Gq();function Jq(){return Zq.useSyncExternalStore(Qq,()=>!0,()=>!1)}function Qq(){return()=>{}}var Tx="Avatar",[Yq,Ice]=Ji(Tx),[Xq,X_]=Yq(Tx),eR=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,s]=g.useState("idle");return c.jsx(Xq,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:c.jsx(Qe.span,{...r,ref:t})})});eR.displayName=Tx;var tR="AvatarImage",eH=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=e,o=X_(tR,n),l=tH(r,s),d=rr(h=>{i(h),o.onImageLoadingStatusChange(h)});return yn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?c.jsx(Qe.img,{...s,ref:t,src:r}):null});eH.displayName=tR;var nR="AvatarFallback",rR=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,s=X_(nR,n),[o,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&s.imageLoadingStatus!=="loaded"?c.jsx(Qe.span,{...i,ref:t}):null});rR.displayName=nR;function QC(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function tH(e,{referrerPolicy:t,crossOrigin:n}){const r=Jq(),i=g.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=g.useState(()=>QC(s,e));return yn(()=>{l(QC(s,e))},[s,e]),yn(()=>{const d=p=>()=>{l(p)};if(!s)return;const h=d("loaded"),f=d("error");return s.addEventListener("load",h),s.addEventListener("error",f),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",h),s.removeEventListener("error",f)}},[s,n,t]),o}var nH=eR,rH=rR;function Ys({className:e,...t}){return c.jsx(nH,{"data-slot":"avatar",className:ut("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function Xs({className:e,...t}){return c.jsx(rH,{"data-slot":"avatar-fallback",className:ut("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}async function iH(){const{data:e}=await Xe.get("/doctors/me/profile");return e}async function sH(){const{data:e}=await Xe.get("/appointments");return Array.isArray(e)?e:[]}async function oH(){const{data:e}=await Xe.get("/conversations/mine");return Array.isArray(e)?e:[]}function YC(e){const t=new Date(e),n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}function aH(){const e=Ot({queryKey:["doctor","me","profile"],queryFn:iH,staleTime:6e4}),t=Ot({queryKey:["doctor","appointments"],queryFn:sH,staleTime:2e4}),n=Ot({queryKey:["doctor","conversations","mine"],queryFn:oH,staleTime:3e4}),r=e.data?.FullName??"Doctor/a",i=e.data?.Specialty??"—",s=e.data?.UserId,o=(t.data??[]).filter(f=>YC(f.ScheduledAt)).filter(f=>s?String(f.DoctorUserId)===String(s):!0).sort((f,p)=>+new Date(f.ScheduledAt)-+new Date(p.ScheduledAt)).map(f=>({id:f.Id,patient:"",time:new Date(f.ScheduledAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:f.Modality==="online"?"videollamada":"presencial",condition:"Consulta",urgent:!1})),l=o.length,d=(t.data??[]).filter(f=>YC(f.ScheduledAt)&&f.Modality==="online").length,h=(n.data??[]).slice(0,5).map(f=>({id:f.Id,from:f.WithUserName??f.Title??"Paciente",message:f.Preview??"Nuevo mensaje",time:"",unread:!1}));return{profile:e,appointments:t,conversations:n,doctorName:r,doctorSpecialty:i,todaysAppointments:o,stat_today:l,stat_online:d,messages:h}}function cH(){const e=_t(),{profile:t,appointments:n,conversations:r,doctorName:i,doctorSpecialty:s,todaysAppointments:o,stat_today:l,stat_online:d,messages:h}=aH(),f=t.isLoading||n.isLoading||r.isLoading;return c.jsx("div",{className:"min-h-screen bg-background p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-primary",children:f?"Cargando…":i}),c.jsx("p",{className:"text-muted-foreground",children:f?"—":s})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Y_,{}),c.jsx(Q,{variant:"outline",onClick:()=>e("/settings"),children:"Configuración"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Citas Hoy"}),c.jsx("p",{className:"text-2xl font-bold",children:f?"…":l})]}),c.jsx(Pn,{className:"h-8 w-8 text-primary"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Pacientes Activos"}),c.jsx("p",{className:"text-2xl font-bold",children:"—"})]}),c.jsx(Kb,{className:"h-8 w-8 text-primary"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultas Online (hoy)"}),c.jsx("p",{className:"text-2xl font-bold",children:f?"…":d})]}),c.jsx(Wr,{className:"h-8 w-8 text-primary"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Satisfacción"}),c.jsx("p",{className:"text-2xl font-bold",children:"—"})]}),c.jsx(Wb,{className:"h-8 w-8 text-primary"})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(d0,{className:"h-5 w-5"}),"Acciones Rápidas"]})}),c.jsx(de,{children:c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs(Q,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/video-call"),children:[c.jsx(Wr,{className:"h-6 w-6"}),"Iniciar Consulta"]}),c.jsxs(Q,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/appointments"),children:[c.jsx(Pn,{className:"h-6 w-6"}),"Ver Agenda"]}),c.jsxs(Q,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/verification"),children:[c.jsx(JU,{className:"h-6 w-6"}),"Verificación"]}),c.jsxs(Q,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/history"),children:[c.jsx(Ir,{className:"h-6 w-6"}),"Historiales"]}),c.jsxs(Q,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/prescriptions"),children:[c.jsx(Z2,{className:"h-6 w-6"}),"Recetas"]})]})})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(Pn,{className:"h-5 w-5"}),"Citas de Hoy"]})}),c.jsxs(de,{className:"space-y-4",children:[f&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando…"}),!f&&o.length===0&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"No tienes citas para hoy."}),o.map(p=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(ir,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:p.patient||"Paciente"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:p.condition}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-xs font-medium",children:p.time}),p.urgent&&c.jsx(Ze,{variant:"destructive",className:"text-xs",children:"Urgente"})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx(Ze,{variant:p.type==="videollamada"?"default":"secondary",children:p.type}),c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx(Q,{size:"sm",variant:"outline",onClick:()=>e("/history"),children:"Ver Historial"}),p.type==="videollamada"&&c.jsx(Q,{size:"sm",onClick:()=>e("/video-call"),children:"Iniciar"})]})]})]},String(p.id))),c.jsx(Q,{variant:"outline",className:"w-full",onClick:()=>e("/appointments"),children:"Ver Agenda Completa"})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(dl,{className:"h-5 w-5"}),"Mensajes"]})}),c.jsxs(de,{className:"space-y-3",children:[f&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando…"}),!f&&h.length===0&&c.jsx("p",{className:"text-sm text-muted-foreground",children:"Sin mensajes recientes."}),h.map(p=>c.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsx(Ys,{className:"h-8 w-8",children:c.jsx(Xs,{children:p.from.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase()})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm font-medium",children:p.from}),p.time&&c.jsx("span",{className:"text-xs text-muted-foreground",children:p.time})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.message}),p.unread&&c.jsx(Ze,{className:"mt-2 bg-blue-500",children:"Nuevo"})]})]},String(p.id))),c.jsx(Q,{variant:"outline",className:"w-full",children:"Ver Todos los Mensajes"})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Resumen Semanal"})}),c.jsx(de,{className:"space-y-4 text-sm text-muted-foreground",children:"Conectaremos métricas semanales cuando el backend exponga agregados. Por ahora se derivan de citas del día."})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Estado de Pacientes"})}),c.jsxs(de,{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Casos críticos"}),c.jsx(Ze,{variant:"destructive",children:"—"})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Seguimiento requerido"}),c.jsx(Ze,{variant:"default",children:"—"})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Estables"}),c.jsx(Ze,{variant:"secondary",children:"—"})]})]})]})]})]})]})})}function lH(){return Ot({queryKey:["admin","metrics"],queryFn:async()=>{const{data:e}=await Xe.get("/appointments"),t=Array.isArray(e)?e:[],n=t.length,r=new Date().toISOString().slice(0,10);let i=0,s=0;for(const l of t){const d=String(l.Status??l.status??"").toUpperCase();String(l.ScheduledAt??l.scheduledAt??"").slice(0,10)===r&&i++,d==="COMPLETED"&&s++}const o=n?s*100/n:0;return{totalAppointments:n,todayConsultations:i,completedPct:o,monthlyRevenue:0}},staleTime:6e4})}function uH(e=12){return Ot({queryKey:["admin","recentUsers",e],queryFn:async()=>{try{const{data:t}=await Xe.get("/users",{params:{limit:e}});return(Array.isArray(t)?t:[]).slice(0,e).map(r=>{const i=String(r.role??r.Role??"").toUpperCase(),s=String(r.status??r.Status??"active").toLowerCase(),o=(r.fullName??r.FullName??r.name)||[r.firstName??r.FirstName??"",r.lastName1??r.LastName1??"",r.lastName2??r.LastName2??""].join(" ").trim()||"Usuario",l=["active","pending, blocked"].includes(s)?s:"active";return{id:r.id??r.Id,name:o,email:r.email??r.Email??"",type:i==="DOCTOR"?"doctor":"patient",status:l,country:r.country??r.Country??void 0,joinDate:String(r.createdAt??r.CreatedAt??"").slice(0,10)}})}catch{return[]}},staleTime:6e4})}function dH(){const e=_t(),[t,n]=g.useState(""),[r,i]=g.useState("all"),{data:s,isLoading:o}=lH(),{data:l=[],isLoading:d}=uH(12),h=s?.todayConsultations??0,f=s?.monthlyRevenue??0,p=s?.completedPct??0,y=l.filter(b=>{const k=b.name.toLowerCase().includes(t.toLowerCase())||b.email.toLowerCase().includes(t.toLowerCase()),x=r==="all"||r==="doctors"&&b.type==="doctor"||r==="patients"&&b.type==="patient"||r==="pending"&&b.status==="pending";return k&&x});return c.jsx("div",{className:"min-h-screen bg-background p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Panel de Administración"}),c.jsx("p",{className:"text-muted-foreground",children:"Salud Sin Fronteras – Dashboard"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Q,{variant:"outline",onClick:()=>e("/settings"),children:[c.jsx(tj,{className:"h-4 w-4 mr-2"}),"Configuración"]}),c.jsxs(Q,{variant:"outline",children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Exportar Datos"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultas Hoy"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":h}),c.jsx("p",{className:"text-xs text-green-600",children:"actualizado"})]}),c.jsx(Wr,{className:"h-8 w-8 text-primary"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"% Completadas"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":`${p.toFixed(1)}%`}),c.jsx("p",{className:"text-xs text-green-600",children:"sobre todas las citas"})]}),c.jsx(tm,{className:"h-8 w-8 text-green-600"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Ingresos Mensuales"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":`€${(f/1e3).toFixed(0)}k`}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"requiere módulo de billing"})]}),c.jsx(Q2,{className:"h-8 w-8 text-primary"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Usuarios (muestra)"}),c.jsx("p",{className:"text-2xl font-bold",children:d?"…":l.length}),c.jsx("p",{className:"text-xs text-muted-foreground",children:l.length?"últimos cargados":"requiere GET /users"})]}),c.jsx(Kb,{className:"h-8 w-8 text-primary"})]})})})]}),c.jsxs(Ml,{defaultValue:"overview",className:"space-y-6",children:[c.jsxs(Dl,{className:"grid w-full grid-cols-5",children:[c.jsx(an,{value:"overview",children:"Resumen"}),c.jsx(an,{value:"users",children:"Usuarios"}),c.jsx(an,{value:"consultations",children:"Consultas"}),c.jsx(an,{value:"analytics",children:"Análisis"}),c.jsx(an,{value:"system",children:"Sistema"})]}),c.jsx(cn,{value:"overview",className:"space-y-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(B6,{className:"h-5 w-5"}),"Indicadores rápidos"]})}),c.jsxs(de,{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Citas totales (dataset)"}),c.jsx("span",{className:"font-medium",children:o?"…":s?.totalAppointments??0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"% completadas"}),c.jsx("span",{className:"font-medium",children:o?"…":`${p.toFixed(1)}%`})]})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(ir,{className:"h-5 w-5"}),"Hoy"]})}),c.jsxs(de,{className:"text-center",children:[c.jsx("p",{className:"text-3xl font-bold text-primary",children:o?"…":h}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"consultas programadas"})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(Wb,{className:"h-5 w-5"}),"Próximos pasos"]})}),c.jsxs(de,{className:"space-y-2 text-sm",children:[c.jsxs("p",{children:["• Añadir endpoint ",c.jsx("code",{children:"/users"})," para listado y conteos."]}),c.jsx("p",{children:"• Conectar módulo de billing para ingresos reales."}),c.jsx("p",{children:"• Agregar métricas por país/idioma."})]})]})]})}),c.jsxs(cn,{value:"users",className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx(ed,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(At,{placeholder:"Buscar usuarios por nombre o email…",value:t,onChange:b=>n(b.target.value),className:"pl-10"})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(rd,{value:r,onValueChange:i,children:[c.jsx(sd,{className:"w-40",children:c.jsx(id,{placeholder:"Tipo"})}),c.jsxs(od,{children:[c.jsx(qr,{value:"all",children:"Todos"}),c.jsx(qr,{value:"doctors",children:"Médicos"}),c.jsx(qr,{value:"patients",children:"Pacientes"}),c.jsx(qr,{value:"pending",children:"Pendientes"})]})]}),c.jsxs(Q,{children:[c.jsx(sB,{className:"h-4 w-4 mr-2"}),"Invitar"]})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Usuarios recientes"})}),c.jsx(de,{children:l.length?c.jsx("div",{className:"space-y-4",children:y.map(b=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Ys,{className:"h-10 w-10",children:c.jsx(Xs,{children:b.name.split(" ").map(k=>k[0]).join("").slice(0,2).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:b.name}),c.jsx("p",{className:"text-sm text-muted-foreground",children:b.email}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx(Ze,{variant:b.type==="doctor"?"default":"secondary",children:b.type==="doctor"?"Médico":"Paciente"}),b.country&&c.jsx("span",{className:"text-xs text-muted-foreground",children:b.country})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx(Ze,{variant:b.status==="active"?"default":b.status==="pending"?"secondary":"destructive",children:b.status}),b.joinDate&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.joinDate}),c.jsxs("div",{className:"flex gap-1 mt-2",children:[c.jsx(Q,{variant:"outline",size:"sm",children:"Ver"}),c.jsx(Q,{variant:"outline",size:"sm",children:"Editar"})]})]})]},String(b.id)))}):c.jsxs("div",{className:"p-6 text-sm text-muted-foreground",children:["Aún no hay endpoint ",c.jsx("code",{children:"/users"})," disponible o no devolvió resultados."]})})]})]}),c.jsx(cn,{value:"consultations",className:"space-y-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(Wr,{className:"h-8 w-8 mx-auto text-primary mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Programadas hoy"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":h})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(tm,{className:"h-8 w-8 mx-auto text-green-600 mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"% Completadas"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":`${p.toFixed(1)}%`})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(Go,{className:"h-8 w-8 mx-auto text-red-600 mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"% Canceladas"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":`${(100-p).toFixed(1)}%`})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(em,{className:"h-8 w-8 mx-auto text-primary mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Total citas cargadas"}),c.jsx("p",{className:"text-2xl font-bold",children:o?"…":s?.totalAppointments??0})]})})]})}),c.jsx(cn,{value:"analytics",className:"space-y-6",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Análisis"})}),c.jsx(de,{className:"text-sm text-muted-foreground",children:"Conecta facturación e informes cuando estén disponibles."})]})}),c.jsx(cn,{value:"system",className:"space-y-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(im,{className:"h-8 w-8 mx-auto text-green-600 mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Estado del sistema"}),c.jsx("p",{className:"text-lg font-bold text-green-600",children:"Operativo"})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(ul,{className:"h-8 w-8 mx-auto text-primary mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"APIs externas"}),c.jsx("p",{className:"text-lg font-bold",children:"OK"})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx(ir,{className:"h-8 w-8 mx-auto text-primary mb-2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime"}),c.jsx("p",{className:"text-lg font-bold",children:"99.9%"})]})})]})})]})]})})}function hH(e,t){return Ot({queryKey:["availability",e,t],enabled:!!e&&!!t,queryFn:async()=>{const{data:n}=await Xe.get(`/doctors/${e}/availability`,{params:{date:t}});return(n??[]).map(r=>({id:Number(r.Id??r.id),startAt:String(r.StartAt??r.startAt),endAt:String(r.EndAt??r.endAt),status:String(r.Status??r.status??"FREE").toUpperCase()}))}})}function fH(){const e=Jr();return mi({mutationFn:async t=>{const n={DoctorUserId:t.doctorId,SlotId:t.slotId,Modality:t.modality},{data:r}=await Xe.post("/appointments",n);return r},onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["availability",n.doctorId]}),e.invalidateQueries({queryKey:["meAppointments"]})}})}function mH(e){const t=new Date(e);return isNaN(t.getTime())?"—":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function XC({preselectedDoctorId:e,preselectedDateISO:t}){const n=_t(),{getDashboardRoute:r}=cc(),[i,s]=g.useState(e??""),[o,l]=g.useState(t??new Date().toISOString().slice(0,10)),[d,h]=g.useState("videollamada"),{data:f=[],isLoading:p,isRefetching:y}=hH(typeof i=="number"?i:void 0,o||void 0),b=fH(),k=g.useMemo(()=>typeof i=="number"&&o.length===10,[i,o]);g.useEffect(()=>{},[e]);async function x(S){if(k)try{await b.mutateAsync({doctorId:i,slotId:Number(S),modality:d==="videollamada"?"online":"inperson"}),await vs.fire({icon:"success",title:"¡Cita creada!",text:"Tu cita fue agendada correctamente.",confirmButtonText:"OK",confirmButtonColor:"#0f766e"}),n(r())}catch(E){const T=E?.response?.data?.message||E?.response?.data?.error||"No se pudo agendar. El horario podría estar ocupado.";await vs.fire({icon:"error",title:"No se pudo agendar",text:T})}}return c.jsx("div",{className:"min-h-screen bg-background p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"outline",onClick:()=>n(r()),children:"← Volver"}),c.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Agendar Cita"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"space-y-6",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(Pn,{className:"h-5 w-5"}),"Selección"]})}),c.jsxs(de,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"doctorId",children:"ID del Médico"}),c.jsx(At,{id:"doctorId",placeholder:"Ej: 5",inputMode:"numeric",value:i,onChange:S=>{const E=S.target.value.trim();s(E===""?"":Number(E))}}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"(Mientras no exista un listado/buscador real, ingresa el ID del médico. Ej: 5)"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"date",children:"Fecha"}),c.jsx(At,{id:"date",type:"date",value:o,onChange:S=>l(S.target.value),disabled:i===""})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{children:"Tipo de Consulta"}),c.jsxs(rd,{value:d,onValueChange:S=>h(S),children:[c.jsx(sd,{children:c.jsx(id,{placeholder:"Tipo de consulta"})}),c.jsxs(od,{children:[c.jsx(qr,{value:"videollamada",children:"Videollamada"}),c.jsx(qr,{value:"presencial",children:"Presencial"})]})]})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"El médico debe publicar disponibilidad para que aparezcan horarios."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Horarios disponibles"}),c.jsx(Ze,{variant:"secondary",children:p||y?"Cargando…":Array.isArray(f)?`${f.length} horarios`:"0 horarios"})]}),k?p||y?c.jsx(le,{children:c.jsx(de,{className:"p-8 text-center text-muted-foreground",children:"Consultando disponibilidad…"})}):!f||f.length===0?c.jsx(le,{children:c.jsx(de,{className:"p-8 text-center text-muted-foreground",children:"No hay horarios para esta fecha."})}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(S=>{const E=S.status!=="FREE"||b.isPending;return c.jsx(le,{className:"hover:shadow-sm",children:c.jsxs(de,{className:"p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Pn,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:new Date(S.startAt).toLocaleDateString()}),c.jsx(ir,{className:"h-4 w-4 ml-2"}),c.jsx("span",{className:"font-medium",children:mH(S.startAt)})]}),c.jsx(Q,{variant:E?"outline":"default",size:"sm",onClick:()=>x(S.id),disabled:E,title:S.status==="BOOKED"?"Ya reservado":"Reservar",children:S.status==="BOOKED"?"Ocupado":"Reservar"})]})},S.id)})}):c.jsx(le,{children:c.jsxs(de,{className:"p-8 text-center text-muted-foreground",children:["Ingresa un ",c.jsx("b",{children:"ID de médico"})," y selecciona una ",c.jsx("b",{children:"fecha"})," para ver disponibilidad."]})})]})]})]})})}function pH(){const e=_t(),{getDashboardRoute:t}=cc(),[n,r]=g.useState(!0),[i,s]=g.useState(!0),[o,l]=g.useState(!0),[d,h]=g.useState(!0),[f,p]=g.useState(!1),[y,b]=g.useState(""),[k,x]=g.useState(0),[S,E]=g.useState("English"),T=[{id:1,sender:"doctor",message:"Hola Juan, ¿cómo te encuentras hoy?",translation:"Hello Juan, how are you feeling today?",timestamp:"14:30"},{id:2,sender:"patient",message:"Hello Doctor, I have been feeling chest pain.",translation:"Hola Doctor, he estado sintiendo dolor en el pecho.",timestamp:"14:31"}],P={doctor:"Perfecto, vamos a revisar tus síntomas detalladamente.",translation:"Perfect, let's review your symptoms in detail."};g.useEffect(()=>{const A=setInterval(()=>{x(I=>I+1)},1e3);return()=>clearInterval(A)},[]);const j=A=>{const I=Math.floor(A/60),D=A%60;return`${I.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`},N=()=>{y.trim()&&b("")},R=()=>{e(t())};return c.jsx("div",{className:"min-h-screen bg-black p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-white",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ir,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:j(k)})]}),c.jsx(Ze,{className:"bg-green-600",children:"Conectado"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ul,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"ES ↔ EN"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Q,{variant:d?"default":"secondary",size:"sm",onClick:()=>h(!d),className:"bg-primary hover:bg-primary/90",children:[c.jsx(dC,{className:"h-4 w-4 mr-2"}),"Traducción"]}),c.jsx(Q,{variant:"outline",size:"sm",children:c.jsx(tj,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 h-[calc(100vh-120px)]",children:[c.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[c.jsx(le,{className:"bg-gray-900 border-gray-700 h-[60%]",children:c.jsxs(de,{className:"p-0 h-full relative",children:[c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx(Ys,{className:"h-32 w-32 mx-auto mb-4",children:c.jsx(Xs,{className:"text-4xl bg-primary",children:"AG"})}),c.jsx("h3",{className:"text-xl font-semibold",children:"Dr. Ana García"}),c.jsx("p",{className:"text-gray-400",children:"Cardiología"})]})}),c.jsx("div",{className:"absolute top-4 left-4",children:c.jsx(Ze,{className:"bg-black/70 text-white",children:"Dr. Ana García"})}),c.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-white text-sm",children:"Hablando"})]})]})}),c.jsx(le,{className:"bg-gray-900 border-gray-700 h-[35%] relative",children:c.jsxs(de,{className:"p-0 h-full",children:[c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg flex items-center justify-center",children:n?c.jsxs("div",{className:"text-center text-white",children:[c.jsx(Ys,{className:"h-20 w-20 mx-auto mb-2",children:c.jsx(Xs,{className:"text-xl bg-secondary",children:"JP"})}),c.jsx("p",{className:"text-sm",children:"Juan Pérez (Tú)"})]}):c.jsxs("div",{className:"text-center text-white",children:[c.jsx(Yv,{className:"h-16 w-16 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-sm",children:"Cámara desactivada"})]})}),c.jsx("div",{className:"absolute top-4 right-4 w-32 h-24 bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:c.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n?c.jsx(Ys,{className:"h-12 w-12",children:c.jsx(Xs,{className:"text-sm",children:"JP"})}):c.jsx(Yv,{className:"h-6 w-6 text-gray-400"})})})]})}),d&&c.jsx(le,{className:"bg-black/80 border-gray-700",children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"text-white",children:[c.jsx("span",{className:"text-blue-400 font-medium",children:"Dr. García: "}),P.doctor]}),c.jsxs("div",{className:"text-gray-300 text-sm italic",children:[c.jsx("span",{className:"text-green-400",children:"Traducción: "}),P.translation]})]})})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(le,{className:"bg-gray-900 border-gray-700",children:c.jsxs(de,{className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(Q,{variant:n?"default":"destructive",onClick:()=>r(!n),className:"flex-col gap-1 h-auto py-3",children:[n?c.jsx(Wr,{className:"h-5 w-5"}):c.jsx(Yv,{className:"h-5 w-5"}),c.jsx("span",{className:"text-xs",children:"Cámara"})]}),c.jsxs(Q,{variant:i?"default":"destructive",onClick:()=>s(!i),className:"flex-col gap-1 h-auto py-3",children:[i?c.jsx(IU,{className:"h-5 w-5"}):c.jsx(RU,{className:"h-5 w-5"}),c.jsx("span",{className:"text-xs",children:"Micrófono"})]}),c.jsxs(Q,{variant:o?"default":"secondary",onClick:()=>l(!o),className:"flex-col gap-1 h-auto py-3",children:[o?c.jsx(dB,{className:"h-5 w-5"}):c.jsx(fB,{className:"h-5 w-5"}),c.jsx("span",{className:"text-xs",children:"Altavoz"})]}),c.jsxs(Q,{variant:"outline",className:"flex-col gap-1 h-auto py-3",children:[c.jsx(MU,{className:"h-5 w-5"}),c.jsx("span",{className:"text-xs",children:"Pantalla"})]})]}),c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsxs(Q,{variant:f?"default":"outline",onClick:()=>p(!f),className:"w-full",children:[c.jsx(dl,{className:"h-4 w-4 mr-2"}),"Chat"]}),c.jsxs(Q,{variant:"destructive",onClick:R,className:"w-full",children:[c.jsx(nm,{className:"h-4 w-4 mr-2"}),"Finalizar"]})]})]})}),f&&c.jsx(le,{className:"bg-gray-900 border-gray-700 h-96",children:c.jsxs(de,{className:"p-4 h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-white font-medium",children:"Chat Traducido"}),c.jsxs(Ze,{className:"bg-primary",children:[c.jsx(dC,{className:"h-3 w-3 mr-1"}),"Auto"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:T.map(A=>c.jsxs("div",{className:`p-3 rounded-lg ${A.sender==="patient"?"bg-primary text-white ml-8":"bg-gray-800 text-white mr-8"}`,children:[c.jsx("div",{className:"text-sm",children:A.message}),d&&c.jsx("div",{className:"text-xs text-gray-300 italic mt-1 border-t border-gray-600 pt-1",children:A.translation}),c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:A.timestamp})]},A.id))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(At,{value:y,onChange:A=>b(A.target.value),placeholder:"Escribe un mensaje...",className:"bg-gray-800 border-gray-600 text-white",onKeyPress:A=>A.key==="Enter"&&N()}),c.jsx(Q,{onClick:N,size:"icon",children:c.jsx(np,{className:"h-4 w-4"})})]})]})}),c.jsx(le,{className:"bg-gray-900 border-gray-700",children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ys,{className:"h-10 w-10",children:c.jsx(Xs,{children:"JP"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-medium",children:"Juan Pérez"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Paciente"})]})]}),c.jsxs(Q,{variant:"outline",size:"sm",className:"w-full",onClick:()=>e("/history"),children:[c.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Ver Historial"]})]})})}),c.jsx(le,{className:"bg-gray-900 border-gray-700",children:c.jsxs(de,{className:"p-4",children:[c.jsx("h4",{className:"text-white font-medium mb-3",children:"Notas Rápidas"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-sm text-gray-300 p-2 bg-gray-800 rounded",children:"• Dolor en el pecho desde hace 3 días"}),c.jsx("div",{className:"text-sm text-gray-300 p-2 bg-gray-800 rounded",children:"• Presión arterial: 140/90"}),c.jsx("div",{className:"text-sm text-gray-300 p-2 bg-gray-800 rounded",children:"• Sin antecedentes cardíacos"})]})]})})]})]})]})})}function eE(){const e=_t(),{getDashboardRoute:t}=cc(),[n,r]=g.useState(""),[i,s]=g.useState("all"),o=[{id:1,doctor:"Dr. Ana García",specialty:"Cardiología",date:"2024-08-15",time:"14:30",type:"videollamada",diagnosis:"Hipertensión leve",prescription:"Lisinopril 10mg",notes:"Paciente presenta presión arterial elevada. Se recomienda cambios en la dieta y ejercicio regular.",status:"completed",urgent:!1},{id:2,doctor:"Dr. Luis Chen",specialty:"Medicina General",date:"2024-07-22",time:"09:00",type:"presencial",diagnosis:"Resfriado común",prescription:"Paracetamol 500mg",notes:"Síntomas de resfriado. Descanso y hidratación.",status:"completed",urgent:!1},{id:3,doctor:"Dr. María González",specialty:"Dermatología",date:"2024-06-10",time:"11:00",type:"videollamada",diagnosis:"Dermatitis atópica",prescription:"Crema hidratante",notes:"Dermatitis leve en brazos. Aplicar crema hidratante dos veces al día.",status:"completed",urgent:!1}],l=[{id:1,name:"Lisinopril",dosage:"10mg",frequency:"Una vez al día",prescribed:"2024-08-15",prescriber:"Dr. Ana García",active:!0,endDate:"2024-11-15"},{id:2,name:"Vitamina D3",dosage:"1000 IU",frequency:"Una vez al día",prescribed:"2024-06-01",prescriber:"Dr. Luis Chen",active:!0,endDate:null},{id:3,name:"Paracetamol",dosage:"500mg",frequency:"Según necesidad",prescribed:"2024-07-22",prescriber:"Dr. Luis Chen",active:!1,endDate:"2024-07-29"}],d=[{id:1,test:"Análisis de Sangre Completo",date:"2024-08-10",doctor:"Dr. Ana García",results:{Hemoglobina:{value:"14.5",unit:"g/dL",normal:!0},Glucosa:{value:"95",unit:"mg/dL",normal:!0},"Colesterol Total":{value:"185",unit:"mg/dL",normal:!0},"Presión Arterial":{value:"140/90",unit:"mmHg",normal:!1}},status:"reviewed"},{id:2,test:"Electrocardiograma",date:"2024-08-15",doctor:"Dr. Ana García",results:{Ritmo:{value:"Sinusal normal",unit:"",normal:!0},Frecuencia:{value:"72",unit:"bpm",normal:!0}},status:"pending"}],h=[{id:1,name:"Receta_Lisinopril_20240815.pdf",type:"prescription",date:"2024-08-15",doctor:"Dr. Ana García",size:"245 KB"},{id:2,name:"Análisis_Sangre_20240810.pdf",type:"lab",date:"2024-08-10",doctor:"Dr. Ana García",size:"1.2 MB"},{id:3,name:"ECG_20240815.pdf",type:"imaging",date:"2024-08-15",doctor:"Dr. Ana García",size:"890 KB"}],f={bloodType:"O+",allergies:["Penicilina","Mariscos"],chronicConditions:["Hipertensión"],emergencyContact:{name:"María Pérez",relationship:"Esposa",phone:"+34 666 123 456"}},p=o.filter(b=>{const k=b.doctor.toLowerCase().includes(n.toLowerCase())||b.specialty.toLowerCase().includes(n.toLowerCase())||b.diagnosis.toLowerCase().includes(n.toLowerCase());return i==="all"?k:i==="recent"?new Date(b.date)>new Date("2024-07-01")&&k:i==="cardiology"?b.specialty==="Cardiología"&&k:k});return c.jsx("div",{className:"min-h-screen bg-background p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"outline",onClick:()=>e(t()),children:"← Volver"}),c.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Historial Médico"})]}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Información médica segura y encriptada"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(h0,{className:"h-4 w-4 mr-2"}),"Subir Documento"]}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(GU,{className:"h-4 w-4 mr-2"}),"Compartir"]}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),c.jsx(le,{className:"border-blue-200 bg-blue-50",children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(qb,{className:"h-5 w-5 text-blue-600"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Tu información médica está protegida con cifrado de extremo a extremo"}),c.jsx("p",{className:"text-xs text-blue-600",children:"Solo tú y los médicos autorizados pueden acceder a estos datos"})]})]})})}),c.jsxs(Ml,{defaultValue:"consultations",className:"space-y-6",children:[c.jsxs(Dl,{className:"grid w-full grid-cols-5",children:[c.jsx(an,{value:"consultations",children:"Consultas"}),c.jsx(an,{value:"medications",children:"Medicamentos"}),c.jsx(an,{value:"labs",children:"Análisis"}),c.jsx(an,{value:"documents",children:"Documentos"}),c.jsx(an,{value:"profile",children:"Perfil Médico"})]}),c.jsxs(cn,{value:"consultations",className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx(ed,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(At,{placeholder:"Buscar por médico, especialidad o diagnóstico...",value:n,onChange:b=>r(b.target.value),className:"pl-10"})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Q,{variant:i==="all"?"default":"outline",onClick:()=>s("all"),size:"sm",children:"Todas"}),c.jsx(Q,{variant:i==="recent"?"default":"outline",onClick:()=>s("recent"),size:"sm",children:"Recientes"}),c.jsx(Q,{variant:i==="cardiology"?"default":"outline",onClick:()=>s("cardiology"),size:"sm",children:"Cardiología"})]})]}),c.jsx("div",{className:"space-y-4",children:p.map(b=>c.jsx(le,{className:"hover:shadow-md transition-shadow",children:c.jsx(de,{className:"p-6",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.jsx(Ys,{className:"h-12 w-12",children:c.jsx(Xs,{children:b.doctor.split(" ").map(k=>k[0]).join("")})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h3",{className:"font-semibold",children:b.doctor}),c.jsx(Ze,{variant:"secondary",children:b.specialty})]}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Pn,{className:"h-4 w-4"}),b.date]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ir,{className:"h-4 w-4"}),b.time]}),c.jsx(Ze,{variant:b.type==="videollamada"?"default":"outline",children:b.type})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("p",{className:"text-sm",children:[c.jsx("span",{className:"font-medium",children:"Diagnóstico:"})," ",b.diagnosis]}),c.jsxs("p",{className:"text-sm",children:[c.jsx("span",{className:"font-medium",children:"Prescripción:"})," ",b.prescription]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:b.notes})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-2 lg:min-w-[120px]",children:[c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Ver Detalles"]}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})]})})},b.id))})]}),c.jsx(cn,{value:"medications",className:"space-y-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(Hb,{className:"h-5 w-5 text-green-600"}),"Medicamentos Activos"]})}),c.jsx(de,{className:"space-y-4",children:l.filter(b=>b.active).map(b=>c.jsxs("div",{className:"p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h4",{className:"font-semibold",children:b.name}),c.jsx(Ze,{className:"bg-green-100 text-green-800",children:"Activo"})]}),c.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Dosis:"})," ",b.dosage]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Frecuencia:"})," ",b.frequency]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Prescrito por:"})," ",b.prescriber]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Desde:"})," ",b.prescribed]}),b.endDate&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Hasta:"})," ",b.endDate]})]})]},b.id))})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(ir,{className:"h-5 w-5 text-gray-600"}),"Historial de Medicamentos"]})}),c.jsx(de,{className:"space-y-4",children:l.filter(b=>!b.active).map(b=>c.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h4",{className:"font-semibold",children:b.name}),c.jsx(Ze,{variant:"secondary",children:"Finalizado"})]}),c.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Dosis:"})," ",b.dosage]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Prescrito por:"})," ",b.prescriber]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Período:"})," ",b.prescribed," - ",b.endDate]})]})]},b.id))})]})]})}),c.jsx(cn,{value:"labs",className:"space-y-6",children:c.jsx("div",{className:"space-y-4",children:d.map(b=>c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(em,{className:"h-5 w-5"}),b.test]}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[c.jsx("span",{children:b.date}),c.jsx("span",{children:b.doctor}),c.jsx(Ze,{variant:b.status==="reviewed"?"default":"secondary",children:b.status==="reviewed"?"Revisado":"Pendiente"})]})]}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})}),c.jsx(de,{children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(b.results).map(([k,x])=>c.jsxs("div",{className:"p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("h4",{className:"text-sm font-medium",children:k}),!x.normal&&c.jsx(Wc,{className:"h-4 w-4 text-orange-500"})]}),c.jsxs("p",{className:"text-lg font-semibold",children:[x.value," ",c.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:x.unit})]}),c.jsx(Ze,{variant:x.normal?"secondary":"destructive",className:"text-xs",children:x.normal?"Normal":"Fuera de rango"})]},k))})})]},b.id))})}),c.jsx(cn,{value:"documents",className:"space-y-6",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(b=>c.jsx(le,{className:"hover:shadow-md transition-shadow",children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:c.jsx(Ir,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-medium text-sm mb-1",children:b.name}),c.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[c.jsx("p",{children:b.date}),c.jsx("p",{children:b.doctor}),c.jsx("p",{children:b.size})]}),c.jsxs("div",{className:"flex gap-2 mt-3",children:[c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(to,{className:"h-3 w-3 mr-1"}),"Ver"]}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Li,{className:"h-3 w-3 mr-1"}),"Descargar"]})]})]})]})})},b.id))})}),c.jsx(cn,{value:"profile",className:"space-y-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(jf,{className:"h-5 w-5 text-red-500"}),"Información Médica Básica"]})}),c.jsx(de,{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"Tipo de Sangre"}),c.jsx("p",{className:"text-lg font-semibold text-red-600",children:f.bloodType})]}),c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"Altura"}),c.jsx("p",{className:"text-lg font-semibold",children:"175 cm"})]}),c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"Peso"}),c.jsx("p",{className:"text-lg font-semibold",children:"70 kg"})]}),c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"IMC"}),c.jsx("p",{className:"text-lg font-semibold",children:"22.9"})]})]})})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Alergias"})}),c.jsx(de,{children:c.jsx("div",{className:"space-y-2",children:f.allergies.map((b,k)=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[c.jsx(Wc,{className:"h-4 w-4 text-red-500"}),c.jsx("span",{className:"text-red-700 font-medium",children:b})]},k))})})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Condiciones Crónicas"})}),c.jsx(de,{children:c.jsx("div",{className:"space-y-2",children:f.chronicConditions.map((b,k)=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[c.jsx(em,{className:"h-4 w-4 text-orange-500"}),c.jsx("span",{className:"text-orange-700 font-medium",children:b})]},k))})})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Contacto de Emergencia"})}),c.jsxs(de,{className:"space-y-2",children:[c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"Nombre"}),c.jsx("p",{children:f.emergencyContact.name})]}),c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"Relación"}),c.jsx("p",{children:f.emergencyContact.relationship})]}),c.jsxs("div",{children:[c.jsx(y,{className:"text-sm font-medium",children:"Teléfono"}),c.jsx("p",{children:f.emergencyContact.phone})]})]})]})]})})]})]})});function y({children:b,className:k,...x}){return c.jsx("label",{className:`text-sm font-medium ${k||""}`,...x,children:b})}}const gH=["me"],vH=()=>!!localStorage.getItem("access_token");function yH(){return Ot({queryKey:gH,queryFn:Yu,enabled:vH(),retry:!1,staleTime:6e4})}function bH({onLogout:e}){const t=_t(),{getDashboardRoute:n}=cc(),{data:r,isLoading:i,isError:s}=yH(),[o,l]=g.useState(!1),[d,h]=g.useState(""),[f,p]=g.useState(!1),[y,b]=g.useState(""),[k,x]=g.useState(""),[S,E]=g.useState("undisclosed"),[T,P]=g.useState(""),[j,N]=g.useState(!1),[R,A]=g.useState(!1),[I,D]=g.useState(!1),z=[{id:1,type:"card",last4:"1234",brand:"Visa",expiry:"12/26",isDefault:!0},{id:2,type:"paypal",email:"juan@email.com",isDefault:!1}];g.useEffect(()=>{if(!r)return;x(r.phone??"");const J=r.fullName??[r.firstName1,r.lastName1,r.lastName2].filter(Boolean).join(" ");b(J??"");const we=r.gender?.toLowerCase?.()||"undisclosed";E(["male","female","other","undisclosed"].includes(we)?we:"undisclosed");const X=r?.dateOfBirth?String(r.dateOfBirth).slice(0,10):"";h(X)},[r]);async function q(){try{l(!0),await iF({fullName:y||void 0,phone:k||void 0}),p(!1)}catch(J){console.error(J)}finally{l(!1)}}function V(){if(r){x(r.phone??"");const J=r.fullName??[r.firstName1,r.lastName1,r.lastName2].filter(Boolean).join(" ");b(J??"");const we=r.gender?.toLowerCase?.()||"undisclosed";E(["male","female","other","undisclosed"].includes(we)?we:"undisclosed");const X=r?.dateOfBirth?String(r.dateOfBirth).slice(0,10):"";h(X)}p(!1)}const te=(r?.fullName?.[0]??r?.firstName1?.[0]??r?.email?.[0]??"U")?.toUpperCase?.()||"U";return c.jsx("div",{className:"min-h-screen bg-background p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"outline",onClick:()=>t(n()),children:"← Volver"}),c.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Configuración"})]}),c.jsxs(Ml,{defaultValue:"profile",className:"space-y-6",children:[c.jsxs(Dl,{className:"grid w-full grid-cols-2",children:[c.jsx(an,{value:"profile",children:"Perfil"}),c.jsx(an,{value:"subscriptions",children:"Suscripciones"})]}),c.jsxs(cn,{value:"profile",className:"space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(hl,{className:"h-5 w-5"}),"Información Personal"]}),f?c.jsxs(Q,{variant:"outline",size:"sm",onClick:V,children:[c.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Cancelar"]}):c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>p(!0),children:[c.jsx(ej,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),c.jsxs(de,{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx(Ys,{className:"h-24 w-24",children:c.jsx(Xs,{className:"text-2xl",children:te})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Q,{variant:"outline",children:[c.jsx(F6,{className:"h-4 w-4 mr-2"}),"Cambiar Foto"]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG o GIF. Máximo 5MB."})]})]}),i?c.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando perfil..."}):s?c.jsx("div",{className:"text-sm text-red-600",children:"No se pudo cargar tu perfil."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2 md:col-span-2",children:[c.jsx(wt,{htmlFor:"fullName",children:"Nombre completo"}),c.jsx(At,{id:"fullName",value:y,onChange:J=>b(J.target.value),placeholder:"Tu nombre completo",disabled:!f}),!y&&c.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[c.jsx(Wc,{className:"w-3 h-3"})," Complete la información"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"email",children:"Correo Electrónico"}),c.jsx(At,{id:"email",type:"email",value:r?.email??"",readOnly:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"phone",children:"Teléfono"}),c.jsx(At,{id:"phone",value:k,onChange:J=>x(J.target.value),placeholder:"+506 8888 8888",disabled:!f}),!k&&c.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[c.jsx(Wc,{className:"w-3 h-3"})," Complete la información"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"birthDate",children:"Fecha de Nacimiento"}),c.jsx(At,{id:"birthDate",type:"date",value:d,onChange:J=>h(J.target.value),disabled:!f})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"gender",children:"Género"}),c.jsxs(rd,{value:S,onValueChange:J=>E(J),disabled:!f,children:[c.jsx(sd,{children:c.jsx(id,{placeholder:"Selecciona un género"})}),c.jsxs(od,{children:[c.jsx(qr,{value:"male",children:"Masculino"}),c.jsx(qr,{value:"female",children:"Femenino"}),c.jsx(qr,{value:"other",children:"Otro"}),c.jsx(qr,{value:"undisclosed",children:"Prefiero no decir"})]})]}),!S&&c.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[c.jsx(Wc,{className:"w-3 h-3"})," Complete la información"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"address",children:"Dirección"}),c.jsx(At,{id:"address",value:T,onChange:J=>P(J.target.value),placeholder:"Calle Principal 123, Ciudad, País",disabled:!f}),!T&&c.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[c.jsx(Wc,{className:"w-3 h-3"})," Complete la información"]})]})]}),f&&c.jsxs(Q,{className:"w-full sm:w-auto",onClick:q,disabled:o||i,children:[c.jsx(VU,{className:"h-4 w-4 mr-2"}),o?"Guardando...":"Guardar Cambios"]})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{onClick:()=>D(!I),className:"cursor-pointer select-none",children:c.jsxs($e,{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bU,{className:"h-5 w-5"}),"Cambiar Contraseña"]}),I?c.jsx(G2,{className:"h-5 w-5"}):c.jsx(Vb,{className:"h-5 w-5"})]})}),I&&c.jsxs(de,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"currentPassword",children:"Contraseña Actual"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"currentPassword",type:j?"text":"password",placeholder:"••••••••"}),c.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>N(!j),children:j?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"newPassword",children:"Nueva Contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"newPassword",type:R?"text":"password",placeholder:"••••••••"}),c.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>A(!R),children:R?c.jsx(Ua,{className:"h-4 w-4"}):c.jsx(to,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"confirmPassword",children:"Confirmar Nueva Contraseña"}),c.jsx(At,{id:"confirmPassword",type:"password",placeholder:"••••••••"})]}),c.jsx(Q,{children:"Actualizar Contraseña"})]})]})]}),c.jsxs(cn,{value:"subscriptions",className:"space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(Nf,{className:"h-5 w-5"}),"Mi Suscripción"]})}),c.jsxs(de,{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-accent rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-primary",children:"Plan Actual"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan Gratuito"})]}),c.jsx(Ze,{className:"bg-green-100 text-green-800",children:"Activo"})]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("p",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Citas mensuales:"}),c.jsx("span",{className:"font-medium",children:"2 de 2 usadas"})]}),c.jsxs("p",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Próxima renovación:"}),c.jsx("span",{className:"font-medium",children:"1 de diciembre, 2025"})]}),c.jsxs("p",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Precio:"}),c.jsx("span",{className:"font-medium text-lg",children:"$0.00"})]})]})]}),c.jsxs("div",{className:"pt-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Actualizar Plan"}),c.jsxs("div",{className:"grid gap-4",children:[c.jsxs("div",{className:"border rounded-lg p-4 hover:border-primary transition-colors cursor-pointer",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h5",{className:"font-semibold text-lg",children:"Plan Básico"}),c.jsx(Ze,{variant:"outline",children:"Popular"})]}),c.jsxs("p",{className:"text-2xl font-bold text-primary mb-2",children:["$9.99",c.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/mes"})]}),c.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[c.jsx("li",{children:"✓ 5 citas mensuales"}),c.jsx("li",{children:"✓ Mensajería con médicos"}),c.jsx("li",{children:"✓ Soporte por email"})]}),c.jsx(Q,{className:"w-full",children:"Seleccionar Plan"})]}),c.jsxs("div",{className:"border-2 border-primary rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h5",{className:"font-semibold text-lg",children:"Plan Premium"}),c.jsx(Ze,{className:"bg-primary text-white",children:"Recomendado"})]}),c.jsxs("p",{className:"text-2xl font-bold text-primary mb-2",children:["$19.99",c.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/mes"})]}),c.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[c.jsx("li",{children:"✓ Citas ilimitadas"}),c.jsx("li",{children:"✓ Mensajería con médicos"}),c.jsx("li",{children:"✓ Videollamadas HD"}),c.jsx("li",{children:"✓ Soporte prioritario 24/7"}),c.jsx("li",{children:"✓ Recordatorios automáticos"})]}),c.jsx(Q,{className:"w-full",children:"Seleccionar Plan"})]})]})]})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(Nf,{className:"h-5 w-5"}),"Métodos de Pago"]})}),c.jsxs(de,{className:"space-y-4",children:[z.map(J=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded",children:c.jsx(Nf,{className:"h-4 w-4"})}),c.jsx("div",{children:J.type==="card"?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"font-medium",children:[J.brand," •••• ",J.last4]}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expira ",J.expiry]})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium",children:"PayPal"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:J.email})]})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[J.isDefault&&c.jsx(Ze,{children:"Predeterminado"}),c.jsx(Q,{variant:"outline",size:"sm",children:"Editar"}),c.jsx(Q,{variant:"outline",size:"sm",children:c.jsx(nj,{className:"h-3 w-3"})})]})]},J.id)),c.jsx(Q,{variant:"outline",className:"w-full",children:"Agregar Método de Pago"})]})]})]})]}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Cerrar Sesión"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Cierra la sesión en este dispositivo"})]}),c.jsxs(Q,{variant:"outline",onClick:e,children:[c.jsx(TU,{className:"h-4 w-4 mr-2"}),"Cerrar Sesión"]})]})})})]})})}function xH(){const e=_t(),{getDashboardRoute:t}=cc(),[n,r]=g.useState("basic"),i=[{id:"free",name:"Gratuito",price:0,billing:"Siempre gratis",description:"Perfecto para uso ocasional",features:["1 consulta por mes","Videollamadas básicas","Chat con traducción","Historial básico","Soporte por email"],limitations:["Sin grabación de consultas","Sin análisis médicos","Sin soporte prioritario"],color:"border-gray-200",popular:!1},{id:"basic",name:"Básico",price:29,billing:"por mes",description:"Ideal para cuidado médico regular",features:["5 consultas por mes","Videollamadas HD","Traducción en tiempo real","Historial médico completo","Recetas digitales","Análisis básicos","Soporte prioritario"],limitations:["Sin consultas ilimitadas","Sin especialistas premium"],color:"border-primary",popular:!0},{id:"premium",name:"Premium",price:79,billing:"por mes",description:"Acceso completo a todos los servicios",features:["Consultas ilimitadas","Videollamadas 4K","Traducción AI avanzada","Grabación de consultas","Especialistas premium","Análisis completos","Soporte 24/7","Consultas de emergencia","Planes familiares"],limitations:[],color:"border-yellow-400",popular:!1}],s=[{id:1,date:"2024-09-01",description:"Plan Básico - Septiembre 2024",amount:29,status:"paid",invoice:"INV-2024-09-001"},{id:2,date:"2024-08-01",description:"Plan Básico - Agosto 2024",amount:29,status:"paid",invoice:"INV-2024-08-001"},{id:3,date:"2024-07-01",description:"Plan Básico - Julio 2024",amount:29,status:"paid",invoice:"INV-2024-07-001"},{id:4,date:"2024-06-15",description:"Consulta adicional - Dr. García",amount:15,status:"paid",invoice:"INV-2024-06-015"}],o=[{doctor:"Dr. Ana García",specialty:"Cardiología",date:"2024-08-15",type:"videollamada",amount:60,covered:!0},{doctor:"Dr. Luis Chen",specialty:"Medicina General",date:"2024-08-10",type:"presencial",amount:50,covered:!0},{doctor:"Dr. María González",specialty:"Dermatología",date:"2024-08-05",type:"videollamada",amount:65,covered:!0}],l=i.find(d=>d.id==="basic");return c.jsx("div",{className:"min-h-screen bg-background p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"outline",onClick:()=>e(t()),children:"← Volver"}),c.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Pagos y Facturación"})]}),c.jsxs(Ml,{defaultValue:"subscription",className:"space-y-6",children:[c.jsxs(Dl,{className:"grid w-full grid-cols-4",children:[c.jsx(an,{value:"subscription",children:"Suscripción"}),c.jsx(an,{value:"plans",children:"Cambiar Plan"}),c.jsx(an,{value:"history",children:"Historial"}),c.jsx(an,{value:"usage",children:"Uso"})]}),c.jsxs(cn,{value:"subscription",className:"space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(J2,{className:"h-5 w-5 text-primary"}),"Plan Actual"]})}),c.jsx(de,{children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold",children:l?.name}),c.jsx("p",{className:"text-muted-foreground",children:l?.description}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx(Ze,{className:"bg-green-100 text-green-800",children:"Activo"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"Renovación automática el 1 de octubre, 2024"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-2xl font-bold",children:["€",l?.price]}),c.jsx("p",{className:"text-muted-foreground",children:l?.billing})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(le,{children:c.jsxs(de,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultas Usadas"}),c.jsx("p",{className:"text-2xl font-bold",children:"3 / 5"})]}),c.jsx(Wr,{className:"h-8 w-8 text-primary"})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:c.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:"60%"}})})]})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Próximo Pago"}),c.jsx("p",{className:"text-lg font-bold",children:"1 Oct 2024"})]}),c.jsx(Pn,{className:"h-8 w-8 text-primary"})]})})}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Ahorrado este mes"}),c.jsx("p",{className:"text-lg font-bold text-green-600",children:"€45"})]}),c.jsx(Q2,{className:"h-8 w-8 text-green-600"})]})})})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Beneficios Incluidos"})}),c.jsx(de,{children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l?.features.map((d,h)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Xo,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm",children:d})]},h))})})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx(Q,{variant:"outline",onClick:()=>r("plans"),children:"Cambiar Plan"}),c.jsx(Q,{variant:"outline",children:"Cancelar Suscripción"}),c.jsx(Q,{variant:"outline",children:"Gestionar Pago"})]})]}),c.jsxs(cn,{value:"plans",className:"space-y-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Elige el Plan Perfecto para Ti"}),c.jsx("p",{className:"text-muted-foreground",children:"Todos los planes incluyen traducción automática y acceso 24/7"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(d=>c.jsxs(le,{className:`relative ${d.color} ${d.popular?"ring-2 ring-primary":""}`,children:[d.popular&&c.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:c.jsxs(Ze,{className:"bg-primary px-3 py-1",children:[c.jsx(u0,{className:"h-3 w-3 mr-1"}),"Más Popular"]})}),c.jsxs(Oe,{className:"text-center pb-4",children:[c.jsx($e,{className:"text-xl",children:d.name}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[c.jsxs("span",{className:"text-3xl font-bold",children:["€",d.price]}),d.price>0&&c.jsxs("span",{className:"text-muted-foreground",children:["/",d.billing.split(" ")[1]]})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:d.billing})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]}),c.jsxs(de,{className:"space-y-4",children:[c.jsx("div",{className:"space-y-2",children:d.features.map((h,f)=>c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(Xo,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),c.jsx("span",{children:h})]},f))}),c.jsx(Q,{className:"w-full",variant:d.id==="basic"?"default":"outline",disabled:d.id==="basic",children:d.id==="basic"?"Plan Actual":`Cambiar a ${d.name}`})]})]},d.id))}),c.jsx(le,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:c.jsx(de,{className:"p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:c.jsx(fU,{className:"h-6 w-6 text-purple-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-purple-900",children:"¡Oferta Especial!"}),c.jsx("p",{className:"text-purple-700",children:"Consigue 2 meses gratis al cambiar al plan Premium anual"})]}),c.jsx(Q,{className:"bg-purple-600 hover:bg-purple-700",children:"Aprovechar Oferta"})]})})})]}),c.jsxs(cn,{value:"history",className:"space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx($e,{children:"Historial de Pagos"}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})}),c.jsx(de,{children:c.jsx("div",{className:"space-y-4",children:s.map(d=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:c.jsx(Nf,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:d.description}),c.jsx("p",{className:"text-sm text-muted-foreground",children:d.date})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold",children:["€",d.amount.toFixed(2)]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Ze,{className:"bg-green-100 text-green-800",children:[c.jsx(Xo,{className:"h-3 w-3 mr-1"}),"Pagado"]}),c.jsxs(Q,{variant:"outline",size:"sm",children:[c.jsx(Li,{className:"h-3 w-3 mr-1"}),"PDF"]})]})]})]},d.id))})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Gastado"}),c.jsx("p",{className:"text-2xl font-bold",children:"€133.00"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"En los últimos 6 meses"})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Promedio Mensual"}),c.jsx("p",{className:"text-2xl font-bold",children:"€22.17"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Últimos 6 meses"})]})}),c.jsx(le,{children:c.jsxs(de,{className:"p-4 text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Próximo Pago"}),c.jsx("p",{className:"text-2xl font-bold",children:"€29.00"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"1 de octubre"})]})})]})]}),c.jsxs(cn,{value:"usage",className:"space-y-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Detalles de Uso - Septiembre 2024"})}),c.jsx(de,{children:c.jsx("div",{className:"space-y-4",children:o.map((d,h)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:c.jsx(Wr,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:d.doctor}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.specialty," • ",d.date," • ",d.type]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold",children:["€",d.amount.toFixed(2)]}),c.jsx(Ze,{className:"bg-green-100 text-green-800",children:"Incluido en plan"})]})]},h))})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Resumen del Mes"})}),c.jsxs(de,{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Consultas realizadas"}),c.jsx("span",{className:"font-semibold",children:"3"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Valor total de consultas"}),c.jsx("span",{className:"font-semibold",children:"€175.00"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Costo del plan"}),c.jsx("span",{className:"font-semibold",children:"€29.00"})]}),c.jsx("hr",{}),c.jsxs("div",{className:"flex justify-between text-green-600",children:[c.jsx("span",{className:"font-semibold",children:"Ahorro total"}),c.jsx("span",{className:"font-semibold",children:"€146.00"})]})]})]}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Servicios Utilizados"})}),c.jsxs(de,{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wr,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Videollamadas"})]}),c.jsx("span",{className:"text-sm font-medium",children:"3 / 5"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ul,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Traducción automática"})]}),c.jsx("span",{className:"text-sm font-medium",children:"Ilimitado"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ir,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Recetas digitales"})]}),c.jsx("span",{className:"text-sm font-medium",children:"2"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(im,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Historial médico"})]}),c.jsx("span",{className:"text-sm font-medium",children:"Activo"})]})]})]})]})]})]})]})})}function Gt({children:e,isAllowed:t,redirectTo:n="/"}){return t?c.jsx(c.Fragment,{children:e}):c.jsx(FN,{to:n,replace:!0})}function wH(){const e=_t();return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:c.jsxs(le,{className:"max-w-md w-full",children:[c.jsxs(Oe,{className:"text-center",children:[c.jsx($e,{className:"text-6xl font-bold text-primary",children:"404"}),c.jsx(tr,{className:"text-xl mt-2",children:"Página no encontrada"})]}),c.jsxs(de,{className:"text-center space-y-4",children:[c.jsx("p",{className:"text-muted-foreground",children:"Lo sentimos, la página que estás buscando no existe o ha sido movida."}),c.jsx(Q,{onClick:()=>e("/"),className:"w-full",children:"Volver al inicio"})]})]})})}function sn({className:e,...t}){return c.jsx("div",{"data-slot":"skeleton",className:ut("bg-accent animate-pulse rounded-md",e),...t})}const kH=e=>`/medical-records/patient/${e}`,SH=e=>`/medical-records/${e}`;async function CH(e){try{const{data:t}=await Xe.get(kH(e));return Array.isArray(t)?t:[]}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para ver estos historiales médicos");if(n===404)throw new Error("Paciente no encontrado");const r=t?.response?.data?.message??t?.message??"No se pudieron cargar los historiales médicos";throw new Error(String(r))}}async function EH(){try{const{data:e}=await Xe.get("/users/me"),t=e.UserId||e.userId;if(!t)throw new Error("No se pudo obtener el ID del usuario");return await CH(t)}catch(e){const t=e?.response?.data?.message??e?.message??"No se pudieron cargar tus historiales médicos";throw new Error(String(t))}}async function TH(e){try{const{data:t}=await Xe.get(SH(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para ver este historial médico");if(n===404)throw new Error("Historial médico no encontrado");const r=t?.response?.data?.message??t?.message??"No se pudo cargar el historial médico";throw new Error(String(r))}}function NH(){return Ot({queryKey:["medical-records","mine"],queryFn:EH,staleTime:300*1e3})}function jH(e){return Ot({queryKey:["medical-records","detail",e],queryFn:()=>{if(!e)throw new Error("Record ID is required");return TH(e)},enabled:!!e,staleTime:300*1e3})}function PH(){const e=_t(),{user:t}=cc(),[n,r]=g.useState(""),{data:i,isLoading:s,error:o}=NH(),l=i?.filter(d=>{const h=n.toLowerCase();return d.Diagnosis?.toLowerCase().includes(h)||d.Doctor?.FirstName.toLowerCase().includes(h)||d.Doctor?.LastName1.toLowerCase().includes(h)||d.Doctor?.LicenseNumber?.toLowerCase().includes(h)});return s?c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx(sn,{className:"h-8 w-64"})}),c.jsxs(de,{children:[c.jsx(sn,{className:"h-24 w-full mb-4"}),c.jsx(sn,{className:"h-24 w-full mb-4"}),c.jsx(sn,{className:"h-24 w-full"})]})]})}):o?c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsxs(Cs,{children:["Error al cargar el historial médico: ",o.message]})]})}):c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx($e,{className:"text-2xl",children:"Mi Historial Médico"}),c.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[c.jsx(qb,{className:"inline h-3 w-3 mr-1"}),"Información confidencial cifrada AES-256"]})]}),c.jsx(Q,{onClick:()=>e(-1),variant:"outline",children:"Volver"})]})}),c.jsxs(de,{children:[c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(ed,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(At,{placeholder:"Buscar por diagnóstico, doctor...",value:n,onChange:d=>r(d.target.value),className:"pl-10"})]})}),!l||l.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Ir,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:n?"No se encontraron registros":"Sin historial médico"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Intenta con otros términos de búsqueda":"Tus registros médicos aparecerán aquí después de tus consultas"})]}):c.jsx("div",{className:"space-y-4",children:l.map(d=>c.jsx(le,{className:"hover:shadow-md transition-shadow",children:c.jsxs(de,{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsxs("h3",{className:"text-lg font-semibold",children:[d.Doctor?.FirstName," ",d.Doctor?.LastName1]}),d.Doctor?.LicenseNumber&&c.jsx(Ze,{variant:"secondary",className:"text-xs",children:d.Doctor.LicenseNumber})]}),c.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Pn,{className:"h-4 w-4"}),new Date(d.CreatedAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})})]}),c.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>e(`/medical-records/${d.RecordId}`),children:[c.jsx(Y2,{className:"h-4 w-4 mr-1"}),"Ver detalles"]})]}),d.Diagnosis&&c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(Hb,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-medium",children:"Diagnóstico:"})]}),c.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:d.Diagnosis})]}),d.Files&&d.Files.length>0&&c.jsxs("div",{className:"mt-4 pt-4 border-t",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Ir,{className:"h-4 w-4"}),c.jsxs("span",{className:"text-sm font-medium",children:["Archivos adjuntos (",d.Files.length,")"]})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:d.Files.map((h,f)=>c.jsxs(Ze,{variant:"outline",className:"cursor-pointer",children:[c.jsx(Li,{className:"h-3 w-3 mr-1"}),"Archivo ",f+1]},f))})]})]})},d.RecordId))})]})]})})}function _H(){const{recordId:e}=Zm(),t=_t(),{data:n,isLoading:r,error:i}=jH(e);return r?c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(le,{children:[c.jsxs(Oe,{children:[c.jsx(sn,{className:"h-8 w-64 mb-2"}),c.jsx(sn,{className:"h-4 w-96"})]}),c.jsxs(de,{className:"space-y-6",children:[c.jsx(sn,{className:"h-32 w-full"}),c.jsx(sn,{className:"h-32 w-full"}),c.jsx(sn,{className:"h-32 w-full"})]})]})}):i?c.jsxs("div",{className:"container mx-auto p-6",children:[c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsxs(Cs,{children:["Error al cargar el registro médico: ",i.message]})]}),c.jsx("div",{className:"mt-4",children:c.jsxs(Q,{onClick:()=>t(-1),variant:"outline",children:[c.jsx(Di,{className:"h-4 w-4 mr-2"}),"Volver"]})})]}):n?c.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs(Q,{onClick:()=>t(-1),variant:"ghost",className:"mb-4",children:[c.jsx(Di,{className:"h-4 w-4 mr-2"}),"Volver al historial"]}),c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Detalle de Registro Médico"}),c.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[c.jsx(qb,{className:"h-3 w-3"}),"Información confidencial cifrada AES-256"]})]}),c.jsxs(Ze,{variant:"outline",className:"text-sm",children:["ID: ",n.RecordId]})]})]}),c.jsxs(le,{className:"mb-6",children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2",children:[c.jsx(hl,{className:"h-5 w-5"}),"Información del Doctor"]})}),c.jsx(de,{className:"space-y-3",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Nombre Completo"}),c.jsxs("p",{className:"font-medium",children:[n.Doctor?.FirstName," ",n.Doctor?.LastName1,n.Doctor?.LastName2&&` ${n.Doctor.LastName2}`]})]}),n.Doctor?.Email&&c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[c.jsx(Xu,{className:"h-3 w-3"}),"Email"]}),c.jsx("p",{className:"font-medium",children:n.Doctor.Email})]}),n.Doctor?.LicenseNumber&&c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[c.jsx(K2,{className:"h-3 w-3"}),"Número de Licencia"]}),c.jsx(Ze,{variant:"secondary",children:n.Doctor.LicenseNumber})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[c.jsx(Pn,{className:"h-3 w-3"}),"Fecha de Consulta"]}),c.jsx("p",{className:"font-medium",children:new Date(n.CreatedAt).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})})]}),c.jsxs("div",{className:"space-y-4",children:[n.Diagnosis&&c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2 text-lg",children:[c.jsx(Hb,{className:"h-5 w-5 text-primary"}),"Diagnóstico"]})}),c.jsx(de,{children:c.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.Diagnosis})})]}),n.Prescriptions&&c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2 text-lg",children:[c.jsx(Z2,{className:"h-5 w-5 text-blue-600"}),"Prescripciones"]})}),c.jsx(de,{children:c.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.Prescriptions})})]}),n.Recommendations&&c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2 text-lg",children:[c.jsx(kU,{className:"h-5 w-5 text-yellow-600"}),"Recomendaciones"]})}),c.jsx(de,{children:c.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.Recommendations})})]}),n.Files&&n.Files.length>0&&c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"flex items-center gap-2 text-lg",children:[c.jsx(Ir,{className:"h-5 w-5 text-green-600"}),"Archivos Adjuntos (",n.Files.length,")"]})}),c.jsx(de,{children:c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:n.Files.map((s,o)=>c.jsxs(Q,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(s,"_blank"),children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Archivo ",o+1]},o))})})]}),!n.Diagnosis&&!n.Prescriptions&&!n.Recommendations&&(!n.Files||n.Files.length===0)&&c.jsx(le,{children:c.jsxs(de,{className:"py-12 text-center text-muted-foreground",children:[c.jsx(Ir,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay información médica detallada en este registro"})]})})]}),c.jsx(Q_,{className:"my-6"}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsxs(Q,{onClick:()=>t(-1),variant:"outline",children:[c.jsx(Di,{className:"h-4 w-4 mr-2"}),"Volver al historial"]}),c.jsxs(Q,{onClick:()=>window.print(),children:[c.jsx(Li,{className:"h-4 w-4 mr-2"}),"Imprimir / Exportar PDF"]})]})]}):c.jsxs("div",{className:"container mx-auto p-6",children:[c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsx(Cs,{children:"Registro médico no encontrado"})]}),c.jsx("div",{className:"mt-4",children:c.jsxs(Q,{onClick:()=>t(-1),variant:"outline",children:[c.jsx(Di,{className:"h-4 w-4 mr-2"}),"Volver"]})})]})}function j0({className:e,...t}){return c.jsx("textarea",{"data-slot":"textarea",className:ut("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const RH="/verification/submit",AH="/verification/status",IH="/verification/pending",OH="/verification/approved",MH="/verification/rejected",DH=e=>`/verification/review/${e}`;async function LH(e){if(!e.CertificationDocuments||e.CertificationDocuments.length<1||e.CertificationDocuments.length>10)throw new Error("Debes subir entre 1 y 10 documentos de certificación");try{const{data:t}=await Xe.post(RH,e);return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("Solo los doctores pueden enviar documentos de verificación");if(n===400){const i=t?.response?.data?.message;throw Array.isArray(i)?new Error(i.join(". ")):new Error(i||"Datos de verificación inválidos")}const r=t?.response?.data?.message??t?.message??"No se pudieron enviar los documentos de verificación";throw new Error(String(r))}}async function FH(){try{const{data:e}=await Xe.get(AH);return e}catch(e){const t=e?.response?.status;if(t===403)throw new Error("Solo los doctores pueden consultar su estado de verificación");if(t===404)return{UserId:"",VerificationStatus:"pending",CertificationDocuments:[]};const n=e?.response?.data?.message??e?.message??"No se pudo obtener el estado de verificación";throw new Error(String(n))}}async function UH(){try{const{data:e}=await Xe.get(IH);return Array.isArray(e)?e:[]}catch(e){if(e?.response?.status===403)throw new Error("Solo los administradores pueden ver verificaciones pendientes");const n=e?.response?.data?.message??e?.message??"No se pudieron cargar las verificaciones pendientes";throw new Error(String(n))}}async function BH(){try{const{data:e}=await Xe.get(OH);return Array.isArray(e)?e:[]}catch(e){if(e?.response?.status===403)throw new Error("Solo los administradores pueden ver doctores verificados");const n=e?.response?.data?.message??e?.message??"No se pudieron cargar los doctores verificados";throw new Error(String(n))}}async function zH(){try{const{data:e}=await Xe.get(MH);return Array.isArray(e)?e:[]}catch(e){if(e?.response?.status===403)throw new Error("Solo los administradores pueden ver doctores rechazados");const n=e?.response?.data?.message??e?.message??"No se pudieron cargar los doctores rechazados";throw new Error(String(n))}}async function $H(e,t){if(t.Action==="reject"&&!t.RejectionReason)throw new Error("Debes proporcionar una razón de rechazo");try{const{data:n}=await Xe.post(DH(e),t);return n}catch(n){const r=n?.response?.status;if(r===403)throw new Error("Solo los administradores pueden revisar verificaciones");if(r===404)throw new Error("Doctor o verificación no encontrada");if(r===400){const s=n?.response?.data?.message;throw Array.isArray(s)?new Error(s.join(". ")):new Error(s||"Datos de revisión inválidos")}const i=n?.response?.data?.message??n?.message??"No se pudo procesar la revisión de verificación";throw new Error(String(i))}}function VH(){return Ot({queryKey:["verification","status","mine"],queryFn:FH,staleTime:120*1e3,retry:1})}function qH(){return Ot({queryKey:["verification","pending"],queryFn:UH,staleTime:60*1e3})}function HH(){return Ot({queryKey:["verification","approved"],queryFn:BH,staleTime:300*1e3})}function WH(){return Ot({queryKey:["verification","rejected"],queryFn:zH,staleTime:300*1e3})}function KH(){const e=Jr();return mi({mutationFn:t=>LH(t),onSuccess:()=>{e.invalidateQueries({queryKey:["verification","status","mine"]})}})}function GH(){const e=Jr();return mi({mutationFn:({doctorId:t,payload:n})=>$H(t,n),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["verification","pending"]}),e.invalidateQueries({queryKey:["verification","approved"]}),e.invalidateQueries({queryKey:["verification","rejected"]}),e.invalidateQueries({queryKey:["verification","doctor",n.doctorId]})}})}const ZH={UPLOAD:"/files"};function JH(e,t){const n=new FormData;return n.append("file",e),Xe.post(ZH.UPLOAD,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r=>{if(!t||!r.total)return;const i=Math.round(r.loaded*100/r.total);t(i)}}).then(({data:r})=>({file:r?.data??r}))}function QH(){return mi({mutationKey:["files","upload"],mutationFn:async({file:e,onProgress:t})=>JH(e,t)})}function YH(){const[e,t]=g.useState([]),[n,r]=g.useState(""),[i,s]=g.useState([]),{data:o,isLoading:l,refetch:d}=VH(),h=KH(),f=QH(),p=x=>{const S=Array.from(x.target.files||[]);if(e.length+S.length>10){Tt.error("Máximo 10 documentos permitidos");return}t([...e,...S])},y=x=>{t(e.filter((S,E)=>E!==x))},b=async()=>{if(e.length===0){Tt.error("Debes subir al menos 1 documento");return}try{Tt.info("Subiendo documentos...");const x=[];for(const S of e){const E=await f.mutateAsync({file:S});x.push(E.file.Url)}s(x),await h.mutateAsync({CertificationDocuments:x,Notes:n}),Tt.success("Documentos enviados exitosamente"),t([]),r(""),d()}catch(x){Tt.error(x.message||"Error al enviar documentos")}};if(l)return c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx(sn,{className:"h-8 w-64"})}),c.jsx(de,{children:c.jsx(sn,{className:"h-40 w-full"})})]})});const k=x=>{switch(x){case"approved":return c.jsxs(Ze,{className:"bg-green-500",children:[c.jsx(Ko,{className:"h-3 w-3 mr-1"}),"Verificado"]});case"rejected":return c.jsxs(Ze,{variant:"destructive",children:[c.jsx(Go,{className:"h-3 w-3 mr-1"}),"Rechazado"]});case"pending":default:return c.jsxs(Ze,{variant:"secondary",children:[c.jsx(ir,{className:"h-3 w-3 mr-1"}),"Pendiente"]})}};return c.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx($e,{className:"text-2xl",children:"Verificación de Doctor"}),c.jsx(tr,{className:"mt-2",children:"Sube tus documentos de certificación para ser verificado en la plataforma"})]}),o&&k(o.VerificationStatus)]})}),c.jsxs(de,{className:"space-y-6",children:[o&&o.SubmittedAt&&c.jsxs(Ss,{children:[c.jsx(so,{className:"h-4 w-4"}),c.jsxs(Cs,{children:[o.VerificationStatus==="pending"&&c.jsxs(c.Fragment,{children:["Tu solicitud está siendo revisada. Enviada el"," ",new Date(o.SubmittedAt).toLocaleDateString()]}),o.VerificationStatus==="approved"&&c.jsxs(c.Fragment,{children:["¡Felicitaciones! Tu cuenta ha sido verificada el"," ",o.VerifiedAt&&new Date(o.VerifiedAt).toLocaleDateString(),o.AdminNotes&&c.jsxs("div",{className:"mt-2 text-sm",children:[c.jsx("strong",{children:"Notas:"})," ",o.AdminNotes]})]}),o.VerificationStatus==="rejected"&&c.jsxs(c.Fragment,{children:["Tu solicitud fue rechazada.",o.RejectionReason&&c.jsxs("div",{className:"mt-2 text-sm",children:[c.jsx("strong",{children:"Razón:"})," ",o.RejectionReason]}),c.jsx("div",{className:"mt-2 text-sm",children:"Por favor, corrige los problemas y vuelve a enviar tus documentos."})]})]})]}),(!o||o.VerificationStatus!=="approved")&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Documentos de Certificación (1-10 archivos)"}),c.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[c.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:!0,onChange:p,disabled:e.length>=10}),c.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center",children:[c.jsx(h0,{className:"h-10 w-10 text-muted-foreground mb-2"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"Haz clic para subir o arrastra archivos aquí"}),c.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"PDF, JPG, PNG (máximo 10 archivos)"})]})]}),e.length>0&&c.jsx("div",{className:"mt-4 space-y-2",children:e.map((x,S)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ir,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:x.name}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(x.size/1024).toFixed(1)," KB)"]})]}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(S),children:c.jsx(Go,{className:"h-4 w-4"})})]},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notas adicionales (opcional)"}),c.jsx(j0,{placeholder:"Ej: Licencia médica vigente hasta 2030. Especialidad en medicina interna.",value:n,onChange:x=>r(x.target.value),rows:4})]}),c.jsx(Q,{onClick:b,disabled:e.length===0||h.isPending||f.isPending,className:"w-full",children:h.isPending||f.isPending?c.jsx(c.Fragment,{children:"Enviando..."}):c.jsxs(c.Fragment,{children:[c.jsx(h0,{className:"h-4 w-4 mr-2"}),"Enviar Documentos"]})})]}),o?.CertificationDocuments&&o.CertificationDocuments.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium mb-3",children:"Documentos enviados"}),c.jsx("div",{className:"space-y-2",children:o.CertificationDocuments.map((x,S)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ir,{className:"h-4 w-4"}),c.jsxs("span",{className:"text-sm",children:["Documento ",S+1]})]}),c.jsx(Q,{variant:"ghost",size:"sm",asChild:!0,children:c.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",children:c.jsx(Li,{className:"h-4 w-4"})})})]},S))})]})]})]})})}var tE={};function XH(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}var eW=Object.defineProperty,tW=(e,t,n)=>t in e?eW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nE=(e,t,n)=>tW(e,typeof t!="symbol"?t+"":t,n);class Ar{constructor(){nE(this,"_locking"),nE(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(i=>t=()=>{this._locks-=1,i()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}}function Jt(e,t){if(!e)throw new Error(t)}const nW=34028234663852886e22,rW=-34028234663852886e22,iW=4294967295,sW=2147483647,oW=-2147483648;function Af(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>sW||e<oW)throw new Error("invalid int 32: "+e)}function P0(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>iW||e<0)throw new Error("invalid uint 32: "+e)}function iR(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>nW||e<rW))throw new Error("invalid float 32: "+e)}const sR=Symbol("@bufbuild/protobuf/enum-type");function aW(e){const t=e[sR];return Jt(t,"missing enum type on enum object"),t}function oR(e,t,n,r){e[sR]=aR(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})))}function aR(e,t,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of t){const l=cR(o);s.push(l),r[o.name]=l,i[o.no]=l}return{typeName:e,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function cW(e,t,n){const r={};for(const i of t){const s=cR(i);r[s.localName]=s.no,r[s.no]=s.localName}return oR(r,e,t),r}function cR(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Nx{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(t),t.byteLength,s),this}fromJson(t,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,t,s,this),this}fromJsonString(t,n){let r;try{r=JSON.parse(t)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(t){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(t),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(t){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var n;const r=this.toJson(t);return JSON.stringify(r,null,(n=t?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function lW(e,t,n,r){var i;const s=(i=r?.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),o={[s]:function(l){e.util.initFields(this),e.util.initPartial(l,this)}}[s];return Object.setPrototypeOf(o.prototype,new Nx),Object.assign(o,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(l,d){return new o().fromBinary(l,d)},fromJson(l,d){return new o().fromJson(l,d)},fromJsonString(l,d){return new o().fromJsonString(l,d)},equals(l,d){return e.util.equals(o,l,d)}}),o}function uW(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function my(e,t,n){for(let s=0;s<28;s=s+7){const o=e>>>s,l=!(!(o>>>7)&&t==0),d=(l?o|128:o)&255;if(n.push(d),!l)return}const r=e>>>28&15|(t&7)<<4,i=t>>3!=0;if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=t>>>s,l=!!(o>>>7),d=(l?o|128:o)&255;if(n.push(d),!l)return}n.push(t>>>31&1)}}const If=4294967296;function rE(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(o,l){const d=Number(e.slice(o,l));i*=n,r=r*n+d,r>=If&&(i=i+(r/If|0),r=r%If)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?uR(r,i):jx(r,i)}function dW(e,t){let n=jx(e,t);const r=n.hi&2147483648;r&&(n=uR(n.lo,n.hi));const i=lR(n.lo,n.hi);return r?"-"+i:i}function lR(e,t){if({lo:e,hi:t}=hW(e,t),t<=2097151)return String(If*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,l=i*2;const d=1e7;return s>=d&&(o+=Math.floor(s/d),s%=d),o>=d&&(l+=Math.floor(o/d),o%=d),l.toString()+iE(o)+iE(s)}function hW(e,t){return{lo:e>>>0,hi:t>>>0}}function jx(e,t){return{lo:e|0,hi:t|0}}function uR(e,t){return t=~t,e?e=~e+1:t+=1,jx(e,t)}const iE=e=>{const t=String(e);return"0000000".slice(t.length)+t};function sE(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function fW(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function mW(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof tE!="object"||tE.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>s||h<i)throw new Error("int64 invalid: ".concat(d));return h},uParse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>l||h<o)throw new Error("uint64 invalid: ".concat(d));return h},enc(d){return e.setBigInt64(0,this.parse(d),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(d){return e.setBigInt64(0,this.uParse(d),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(d,h){return e.setInt32(0,d,!0),e.setInt32(4,h,!0),e.getBigInt64(0,!0)},uDec(d,h){return e.setInt32(0,d,!0),e.setInt32(4,h,!0),e.getBigUint64(0,!0)}}}const n=i=>Jt(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Jt(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),rE(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),rE(i)},dec(i,s){return dW(i,s)},uDec(i,s){return lR(i,s)}}}const Bt=mW();var ge;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(ge||(ge={}));var aa;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(aa||(aa={}));function zo(e,t,n){if(t===n)return!0;if(e==ge.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case ge.UINT64:case ge.FIXED64:case ge.INT64:case ge.SFIXED64:case ge.SINT64:return t==n}return!1}function yl(e,t){switch(e){case ge.BOOL:return!1;case ge.UINT64:case ge.FIXED64:case ge.INT64:case ge.SFIXED64:case ge.SINT64:return t==0?Bt.zero:"0";case ge.DOUBLE:case ge.FLOAT:return 0;case ge.BYTES:return new Uint8Array(0);case ge.STRING:return"";default:return 0}}function dR(e,t){switch(e){case ge.BOOL:return t===!1;case ge.STRING:return t==="";case ge.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var on;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(on||(on={}));class pW{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(P0(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Af(t),sE(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){iR(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){P0(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Af(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Af(t),t=(t<<1^t>>31)>>>0,sE(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Bt.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Bt.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=Bt.enc(t);return my(n.lo,n.hi,this.buf),this}sint64(t){let n=Bt.enc(t),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return my(i,s,this.buf),this}uint64(t){let n=Bt.uEnc(t);return my(n.lo,n.hi,this.buf),this}}class gW{constructor(t,n){this.varint64=uW,this.uint32=fW,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case on.Varint:for(;this.buf[this.pos++]&128;);break;case on.Bit64:this.pos+=4;case on.Bit32:this.pos+=4;break;case on.LengthDelimited:let i=this.uint32();this.pos+=i;break;case on.StartGroup:for(;;){const[s,o]=this.tag();if(o===on.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Bt.dec(...this.varint64())}uint64(){return Bt.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,Bt.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Bt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Bt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function vW(e,t,n,r){let i;return{typeName:t,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=t.split(".").pop(),s.jsonName="[".concat(t,"]"),i=e.util.newFieldList([s]).list()[0]}return i},runtime:e}}function hR(e){const t=e.field.localName,n=Object.create(null);return n[t]=yW(e),[n,()=>n[t]]}function yW(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return yl(t.T,t.L);case"message":const n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function bW(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let Gs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Tp=[];for(let e=0;e<Gs.length;e++)Tp[Gs[e].charCodeAt(0)]=e;Tp[45]=Gs.indexOf("+");Tp[95]=Gs.indexOf("/");const fR={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,o=0;for(let l=0;l<e.length;l++){if(s=Tp[e.charCodeAt(l)],s===void 0)switch(e[l]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=Gs[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=Gs[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=Gs[i|r>>6],t+=Gs[r&63],n=0;break}return n&&(t+=Gs[i],t+="=",n==1&&(t+="=")),t}};function xW(e,t,n){pR(t,e);const r=t.runtime.bin.makeReadOptions(n),i=bW(e.getType().runtime.bin.listUnknownFields(e),t.field),[s,o]=hR(t);for(const l of i)t.runtime.bin.readField(s,r.readerFactory(l.data),t.field,l.wireType,r);return o()}function wW(e,t,n,r){pR(t,e);const i=t.runtime.bin.makeReadOptions(r),s=t.runtime.bin.makeWriteOptions(r);if(mR(e,t)){const h=e.getType().runtime.bin.listUnknownFields(e).filter(f=>f.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const f of h)e.getType().runtime.bin.onUnknownField(e,f.no,f.wireType,f.data)}const o=s.writerFactory();let l=t.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(l,n,o,s);const d=i.readerFactory(o.finish());for(;d.pos<d.len;){const[h,f]=d.tag(),p=d.skip(f,h);e.getType().runtime.bin.onUnknownField(e,h,f,p)}}function mR(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}function pR(e,t){Jt(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function gR(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!dR(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function oE(e,t){const n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?yl(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function Zs(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(Nx.prototype).every(r=>r in e&&typeof e[r]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function vR(e,t){return Zs(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}ge.DOUBLE,ge.FLOAT,ge.INT64,ge.UINT64,ge.INT32,ge.UINT32,ge.BOOL,ge.STRING,ge.BYTES;const aE={ignoreUnknownFields:!1},cE={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function kW(e){return e?Object.assign(Object.assign({},aE),e):aE}function SW(e){return e?Object.assign(Object.assign({},cE),e):cE}const wm=Symbol(),Of=Symbol();function CW(){return{makeReadOptions:kW,makeWriteOptions:SW,readMessage(e,t,n,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(ds(t)));r=r??new e;const i=new Map,s=n.typeRegistry;for(const[o,l]of Object.entries(t)){const d=e.fields.findJsonName(o);if(d){if(d.oneof){if(l===null&&d.kind=="scalar")continue;const h=i.get(d.oneof);if(h!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(h,'", "').concat(o,'"'));i.set(d.oneof,o)}lE(r,l,d,n,e)}else{let h=!1;if(s?.findExtension&&o.startsWith("[")&&o.endsWith("]")){const f=s.findExtension(o.substring(1,o.length-1));if(f&&f.extendee.typeName==e.typeName){h=!0;const[p,y]=hR(f);lE(p,l,f.field,n,f),wW(r,f,y(),n)}}if(!h&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(e,t){const n=e.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!gR(i,e)){if(i.req)throw"required field not set";if(!t.emitDefaultValues||!TW(i))continue}const o=i.oneof?e[i.oneof.localName].value:e[i.localName],l=uE(i,o,t);l!==void 0&&(r[t.useProtoFieldName?i.name:i.jsonName]=l)}const s=t.typeRegistry;if(s?.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(e)){const l=s.findExtensionFor(n.typeName,o.no);if(l&&mR(e,l)){const d=xW(e,l,t),h=uE(l.field,d,t);h!==void 0&&(r[l.field.jsonName]=h)}}}catch(s){const o=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=s instanceof Error?s.message:String(s);throw new Error(o+(l.length>0?": ".concat(l):""))}return r},readScalar(e,t,n){return qu(e,t,n??aa.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||dR(e,t)))return Mf(e,t)},debug:ds}}function ds(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function lE(e,t,n,r,i){let s=n.localName;if(n.repeated){if(Jt(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(t)));const o=e[s];for(const l of t){if(l===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(l)));switch(n.kind){case"message":o.push(n.T.fromJson(l,r));break;case"enum":const d=py(n.T,l,r.ignoreUnknownFields,!0);d!==Of&&o.push(d);break;case"scalar":try{o.push(qu(n.T,l,n.L,!0))}catch(h){let f="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(l));throw h instanceof Error&&h.message.length>0&&(f+=": ".concat(h.message)),new Error(f)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(t)));const o=e[s];for(const[l,d]of Object.entries(t)){if(d===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let h;try{h=EW(n.K,l)}catch(f){let p="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(t));throw f instanceof Error&&f.message.length>0&&(p+=": ".concat(f.message)),new Error(p)}switch(n.V.kind){case"message":o[h]=n.V.T.fromJson(d,r);break;case"enum":const f=py(n.V.T,d,r.ignoreUnknownFields,!0);f!==Of&&(o[h]=f);break;case"scalar":try{o[h]=qu(n.V.T,d,aa.BIGINT,!0)}catch(p){let y="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(t));throw p instanceof Error&&p.message.length>0&&(y+=": ".concat(p.message)),new Error(y)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(t===null&&o.typeName!="google.protobuf.Value")return;let l=e[s];Zs(l)?l.fromJson(t,r):(e[s]=l=o.fromJson(t,r),o.fieldWrapper&&!n.oneof&&(e[s]=o.fieldWrapper.unwrapField(l)));break;case"enum":const d=py(n.T,t,r.ignoreUnknownFields,!1);switch(d){case wm:oE(n,e);break;case Of:break;default:e[s]=d;break}break;case"scalar":try{const h=qu(n.T,t,n.L,!1);switch(h){case wm:oE(n,e);break;default:e[s]=h;break}}catch(h){let f="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ds(t));throw h instanceof Error&&h.message.length>0&&(f+=": ".concat(h.message)),new Error(f)}break}}function EW(e,t){if(e===ge.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return qu(e,t,aa.BIGINT,!0).toString()}function qu(e,t,n,r){if(t===null)return r?yl(e,n):wm;switch(e){case ge.DOUBLE:case ge.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return e==ge.FLOAT&&iR(i),i;case ge.INT32:case ge.FIXED32:case ge.SFIXED32:case ge.SINT32:case ge.UINT32:let s;if(typeof t=="number"?s=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(s=Number(t)),s===void 0)break;return e==ge.UINT32||e==ge.FIXED32?P0(s):Af(s),s;case ge.INT64:case ge.SFIXED64:case ge.SINT64:if(typeof t!="number"&&typeof t!="string")break;const o=Bt.parse(t);return n?o.toString():o;case ge.FIXED64:case ge.UINT64:if(typeof t!="number"&&typeof t!="string")break;const l=Bt.uParse(t);return n?l.toString():l;case ge.BOOL:if(typeof t!="boolean")break;return t;case ge.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case ge.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return fR.dec(t)}throw new Error}function py(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].no:wm;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(i!==void 0)return i.no;if(n)return Of;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(ds(t)))}function TW(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function uE(e,t,n){if(e.kind=="map"){Jt(typeof t=="object"&&t!=null);const r={},i=Object.entries(t);switch(e.V.kind){case"scalar":for(const[o,l]of i)r[o.toString()]=Mf(e.V.T,l);break;case"message":for(const[o,l]of i)r[o.toString()]=l.toJson(n);break;case"enum":const s=e.V.T;for(const[o,l]of i)r[o.toString()]=gy(s,l,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(e.repeated){Jt(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let i=0;i<t.length;i++)r.push(Mf(e.T,t[i]));break;case"enum":for(let i=0;i<t.length;i++)r.push(gy(e.T,t[i],n.enumAsInteger));break;case"message":for(let i=0;i<t.length;i++)r.push(t[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return Mf(e.T,t);case"enum":return gy(e.T,t,n.enumAsInteger);case"message":return vR(e.T,t).toJson(n)}}function gy(e,t,n){var r;if(Jt(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const i=e.findNumber(t);return(r=i?.name)!==null&&r!==void 0?r:t}function Mf(e,t){switch(e){case ge.INT32:case ge.SFIXED32:case ge.SINT32:case ge.FIXED32:case ge.UINT32:return Jt(typeof t=="number"),t;case ge.FLOAT:case ge.DOUBLE:return Jt(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case ge.STRING:return Jt(typeof t=="string"),t;case ge.BOOL:return Jt(typeof t=="boolean"),t;case ge.UINT64:case ge.FIXED64:case ge.INT64:case ge.SFIXED64:case ge.SINT64:return Jt(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case ge.BYTES:return Jt(t instanceof Uint8Array),fR.enc(t)}}const $c=Symbol("@bufbuild/protobuf/unknown-fields"),dE={readUnknownFields:!0,readerFactory:e=>new gW(e)},hE={writeUnknownFields:!0,writerFactory:()=>new pW};function NW(e){return e?Object.assign(Object.assign({},dE),e):dE}function jW(e){return e?Object.assign(Object.assign({},hE),e):hE}function PW(){return{makeReadOptions:NW,makeWriteOptions:jW,listUnknownFields(e){var t;return(t=e[$c])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[$c]},writeUnknownFields(e,t){const r=e[$c];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,r){const i=e;Array.isArray(i[$c])||(i[$c]=[]),i[$c].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,i){const s=e.getType(),o=i?t.len:t.pos+n;let l,d;for(;t.pos<o&&([l,d]=t.tag(),!(i===!0&&d==on.EndGroup));){const h=s.fields.find(l);if(!h){const f=t.skip(d,l);r.readUnknownFields&&this.onUnknownField(e,l,d,f);continue}fE(e,t,h,d,r)}if(i&&(d!=on.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:fE,writeMessage(e,t,n){const r=e.getType();for(const i of r.fields.byNumber()){if(!gR(i,e)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?e[i.oneof.localName].value:e[i.localName];mE(i,s,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){t!==void 0&&mE(e,t,n,r)}}}function fE(e,t,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=o&&delete e.value,e.case=o,o="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?ge.INT32:n.T;let d=km;if(n.kind=="scalar"&&n.L>0&&(d=RW),s){let y=e[o];if(r==on.LengthDelimited&&l!=ge.STRING&&l!=ge.BYTES){let k=t.uint32()+t.pos;for(;t.pos<k;)y.push(d(t,l))}else y.push(d(t,l))}else e[o]=d(t,l);break;case"message":const h=n.T;s?e[o].push(Df(t,new h,i,n)):Zs(e[o])?Df(t,e[o],i,n):(e[o]=Df(t,new h,i,n),h.fieldWrapper&&!n.oneof&&!n.repeated&&(e[o]=h.fieldWrapper.unwrapField(e[o])));break;case"map":let[f,p]=_W(n,t,i);e[o][f]=p;break}}function Df(e,t,n,r){const i=t.getType().runtime.bin,s=r?.delimited;return i.readMessage(t,e,s?r.no:e.uint32(),n,s),t}function _W(e,t,n){const r=t.uint32(),i=t.pos+r;let s,o;for(;t.pos<i;){const[l]=t.tag();switch(l){case 1:s=km(t,e.K);break;case 2:switch(e.V.kind){case"scalar":o=km(t,e.V.T);break;case"enum":o=t.int32();break;case"message":o=Df(t,new e.V.T,n,void 0);break}break}}if(s===void 0&&(s=yl(e.K,aa.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(e.V.kind){case"scalar":o=yl(e.V.T,aa.BIGINT);break;case"enum":o=e.V.T.values[0].no;break;case"message":o=new e.V.T;break}return[s,o]}function RW(e,t){const n=km(e,t);return typeof n=="bigint"?n.toString():n}function km(e,t){switch(t){case ge.STRING:return e.string();case ge.BOOL:return e.bool();case ge.DOUBLE:return e.double();case ge.FLOAT:return e.float();case ge.INT32:return e.int32();case ge.INT64:return e.int64();case ge.UINT64:return e.uint64();case ge.FIXED64:return e.fixed64();case ge.BYTES:return e.bytes();case ge.FIXED32:return e.fixed32();case ge.SFIXED32:return e.sfixed32();case ge.SFIXED64:return e.sfixed64();case ge.SINT64:return e.sint64();case ge.UINT32:return e.uint32();case ge.SINT32:return e.sint32()}}function mE(e,t,n,r){Jt(t!==void 0);const i=e.repeated;switch(e.kind){case"scalar":case"enum":let s=e.kind=="enum"?ge.INT32:e.T;if(i)if(Jt(Array.isArray(t)),e.packed)IW(n,s,e.no,t);else for(const o of t)Hu(n,s,e.no,o);else Hu(n,s,e.no,t);break;case"message":if(i){Jt(Array.isArray(t));for(const o of t)pE(n,r,e,o)}else pE(n,r,e,t);break;case"map":Jt(typeof t=="object"&&t!=null);for(const[o,l]of Object.entries(t))AW(n,r,e,o,l);break}}function AW(e,t,n,r,i){e.tag(n.no,on.LengthDelimited),e.fork();let s=r;switch(n.K){case ge.INT32:case ge.FIXED32:case ge.UINT32:case ge.SFIXED32:case ge.SINT32:s=Number.parseInt(r);break;case ge.BOOL:Jt(r=="true"||r=="false"),s=r=="true";break}switch(Hu(e,n.K,1,s),n.V.kind){case"scalar":Hu(e,n.V.T,2,i);break;case"enum":Hu(e,ge.INT32,2,i);break;case"message":Jt(i!==void 0),e.tag(2,on.LengthDelimited).bytes(i.toBinary(t));break}e.join()}function pE(e,t,n,r){const i=vR(n.T,r);n.delimited?e.tag(n.no,on.StartGroup).raw(i.toBinary(t)).tag(n.no,on.EndGroup):e.tag(n.no,on.LengthDelimited).bytes(i.toBinary(t))}function Hu(e,t,n,r){Jt(r!==void 0);let[i,s]=yR(t);e.tag(n,i)[s](r)}function IW(e,t,n,r){if(!r.length)return;e.tag(n,on.LengthDelimited).fork();let[,i]=yR(t);for(let s=0;s<r.length;s++)e[i](r[s]);e.join()}function yR(e){let t=on.Varint;switch(e){case ge.BYTES:case ge.STRING:t=on.LengthDelimited;break;case ge.DOUBLE:case ge.FIXED64:case ge.SFIXED64:t=on.Bit64;break;case ge.FIXED32:case ge.SFIXED32:case ge.FLOAT:t=on.Bit32;break}const n=ge[e].toLowerCase();return[t,n]}function OW(){return{setEnumType:oR,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const r of n.fields.byMember()){const i=r.localName,s=t,o=e;if(o[i]!=null)switch(r.kind){case"oneof":const l=o[i].case;if(l===void 0)continue;const d=r.findField(l);let h=o[i].value;d&&d.kind=="message"&&!Zs(h,d.T)?h=new d.T(h):d&&d.kind==="scalar"&&d.T===ge.BYTES&&(h=_u(h)),s[i]={case:l,value:h};break;case"scalar":case"enum":let f=o[i];r.T===ge.BYTES&&(f=r.repeated?f.map(_u):_u(f)),s[i]=f;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===ge.BYTES)for(const[b,k]of Object.entries(o[i]))s[i][b]=_u(k);else Object.assign(s[i],o[i]);break;case"message":const y=r.V.T;for(const b of Object.keys(o[i])){let k=o[i][b];y.fieldWrapper||(k=new y(k)),s[i][b]=k}break}break;case"message":const p=r.T;if(r.repeated)s[i]=o[i].map(y=>Zs(y,p)?y:new p(y));else{const y=o[i];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?s[i]=_u(y):s[i]=y:s[i]=Zs(y,p)?y:new p(y)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{const i=t[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,l)=>r.T.equals(o,s[l]));case"scalar":return i.every((o,l)=>zo(r.T,o,s[l]));case"enum":return i.every((o,l)=>zo(ge.INT32,o,s[l]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let o=i,l=s;return r.T.fieldWrapper&&(o!==void 0&&!Zs(o)&&(o=r.T.fieldWrapper.wrapField(o)),l!==void 0&&!Zs(l)&&(l=r.T.fieldWrapper.wrapField(l))),r.T.equals(o,l);case"enum":return zo(ge.INT32,i,s);case"scalar":return zo(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const d=r.findField(i.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(i.value,s.value);case"enum":return zo(ge.INT32,i.value,s.value);case"scalar":return zo(d.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const h=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const f=r.V.T;return h.every(y=>f.equals(i[y],s[y]));case"enum":return h.every(y=>zo(ge.INT32,i[y],s[y]));case"scalar":const p=r.V.T;return h.every(y=>zo(p,i[y],s[y]))}break}})},clone(e){const t=e.getType(),n=new t,r=n;for(const i of t.fields.byMember()){const s=e[i.localName];let o;if(i.repeated)o=s.map(uf);else if(i.kind=="map"){o=r[i.localName];for(const[l,d]of Object.entries(s))o[l]=uf(d)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:uf(s.value)}:{case:void 0}:o=uf(s);r[i.localName]=o}for(const i of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function uf(e){if(e===void 0)return e;if(Zs(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function _u(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function MW(e,t,n){return{syntax:e,json:CW(),bin:PW(),util:Object.assign(Object.assign({},OW()),{newFieldList:t,initFields:n}),makeMessageType(r,i,s){return lW(this,r,i,s)},makeEnum:cW,makeEnumType:aR,getEnumType:aW,makeExtension(r,i,s){return vW(this,r,i,s)}}}class DW{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,t.push(n)):t.push(r)}return this.members}}function bR(e,t){const n=xR(e);return t?n:$W(zW(n))}function LW(e){return bR(e,!1)}const FW=xR;function xR(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const UW=new Set(["constructor","toString","toJSON","valueOf"]),BW=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),wR=e=>"".concat(e,"$"),zW=e=>BW.has(e)?wR(e):e,$W=e=>UW.has(e)?wR(e):e;class VW{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=LW(t)}addField(t){Jt(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function qW(e,t){var n,r,i,s,o,l;const d=[];let h;for(const f of typeof e=="function"?e():e){const p=f;if(p.localName=bR(f.name,f.oneof!==void 0),p.jsonName=(n=f.jsonName)!==null&&n!==void 0?n:FW(f.name),p.repeated=(r=f.repeated)!==null&&r!==void 0?r:!1,f.kind=="scalar"&&(p.L=(i=f.L)!==null&&i!==void 0?i:aa.BIGINT),p.delimited=(s=f.delimited)!==null&&s!==void 0?s:!1,p.req=(o=f.req)!==null&&o!==void 0?o:!1,p.opt=(l=f.opt)!==null&&l!==void 0?l:!1,f.packed===void 0&&(p.packed=f.kind=="enum"||f.kind=="scalar"&&f.T!=ge.BYTES&&f.T!=ge.STRING),f.oneof!==void 0){const y=typeof f.oneof=="string"?f.oneof:f.oneof.name;(!h||h.name!=y)&&(h=new VW(y)),p.oneof=h,h.addField(p)}d.push(p)}return d}const G=MW("proto3",e=>new DW(e,t=>qW(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=yl(t.T,t.L);break}}});class Nr extends Nx{constructor(t){super(),this.seconds=Bt.zero,this.nanos=0,G.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(G.json.debug(t)));const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Bt.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Nr.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new Nr({seconds:Bt.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new Nr().fromBinary(t,n)}static fromJson(t,n){return new Nr().fromJson(t,n)}static fromJsonString(t,n){return new Nr().fromJsonString(t,n)}static equals(t,n){return G.util.equals(Nr,t,n)}}Nr.runtime=G;Nr.typeName="google.protobuf.Timestamp";Nr.fields=G.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const HW=G.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Nr},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:WW,repeated:!0},{no:5,name:"events",kind:"message",T:GW,repeated:!0}]),WW=G.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:KW,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),KW=G.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Nr},{no:3,name:"value",kind:"scalar",T:2}]),GW=G.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Nr},{no:7,name:"normalized_end_timestamp",kind:"message",T:Nr,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),kR=G.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Ri=G.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),pn=G.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Px=G.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),zu=G.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),ad=G.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Fi=G.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Aa=G.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),ZW=G.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Fn=G.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Np=G.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Sm,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:MR}]),Sm=G.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),JW=G.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:G.getEnumType(pn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Xa=G.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:G.getEnumType(tl)},{no:4,name:"tracks",kind:"message",T:Kc,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:JW},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:G.getEnumType(cd)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:G.getEnumType(Fi)},{no:18,name:"kind_details",kind:"enum",T:G.getEnumType(QW),repeated:!0}]),tl=G.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),cd=G.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),QW=G.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),jn=G.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),YW=G.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ea,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:G.getEnumType(SR)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),Kc=G.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:G.getEnumType(Ri)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:G.getEnumType(pn)},{no:10,name:"layers",kind:"message",T:ea,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:YW,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:G.getEnumType(jn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:MR},{no:19,name:"audio_features",kind:"enum",T:G.getEnumType(Fn),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:G.getEnumType(kR)}]),ea=G.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:G.getEnumType(Px)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),SR=G.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),dr=G.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:G.getEnumType(at)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:_x,oneof:"value"},{no:3,name:"speaker",kind:"message",T:XW,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:NR,oneof:"value"},{no:7,name:"transcription",kind:"message",T:eK,oneof:"value"},{no:8,name:"metrics",kind:"message",T:HW,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Cm,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Rx,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Ax,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Ix,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Em,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Tm,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Nm,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:CR,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),at=G.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),CR=G.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:G.getEnumType(jn)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),ER=G.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:_x,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Cm,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:Rx,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:Ax,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:Ix,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:Em,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:Tm,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:Nm,oneof:"value"}]),XW=G.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:TR,repeated:!0}]),TR=G.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),_x=G.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),NR=G.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),eK=G.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:tK,repeated:!0}]),tK=G.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Cm=G.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Rx=G.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Ax=G.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),Ix=G.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:jR,oneof:"value"}]),jR=G.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),PR=G.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),_R=G.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:G.getEnumType(RR)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),RR=G.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),AR=G.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:G.getEnumType(IR)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),IR=G.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),OR=G.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:gE},{no:2,name:"screen",kind:"message",T:gE},{no:3,name:"resume_connection",kind:"enum",T:G.getEnumType(ad)},{no:4,name:"disabled_codecs",kind:"message",T:nK},{no:5,name:"force_relay",kind:"enum",T:G.getEnumType(ad)}]),gE=G.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:G.getEnumType(ad)}]),nK=G.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Sm,repeated:!0},{no:2,name:"publish",kind:"message",T:Sm,repeated:!0}]),MR=G.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),_0=G.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),DR=G.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:G.getEnumType(_0)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),LR=G.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Em=G.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:G.getEnumType(jn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:DR,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:LR,oneof:"content_header"}],{localName:"DataStream_Header"}),Tm=G.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Nm=G.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),rK=G.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),Ai=G.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),R0=G.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),iK=G.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),sK=G.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:ca,oneof:"message"},{no:2,name:"answer",kind:"message",T:ca,oneof:"message"},{no:3,name:"trickle",kind:"message",T:jp,oneof:"message"},{no:4,name:"add_track",kind:"message",T:ld,oneof:"message"},{no:5,name:"mute",kind:"message",T:Pp,oneof:"message"},{no:6,name:"subscription",kind:"message",T:_p,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:FR,oneof:"message"},{no:8,name:"leave",kind:"message",T:Rp,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:BR,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:VR,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Fx,oneof:"message"},{no:13,name:"simulate",kind:"message",T:ls,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Dx,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:WR,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Mx,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:UR,oneof:"message"}]),vE=G.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:oK,oneof:"message"},{no:2,name:"answer",kind:"message",T:ca,oneof:"message"},{no:3,name:"offer",kind:"message",T:ca,oneof:"message"},{no:4,name:"trickle",kind:"message",T:jp,oneof:"message"},{no:5,name:"update",kind:"message",T:lK,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Ox,oneof:"message"},{no:8,name:"leave",kind:"message",T:Rp,oneof:"message"},{no:9,name:"mute",kind:"message",T:Pp,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:uK,oneof:"message"},{no:11,name:"room_update",kind:"message",T:dK,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:fK,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:pK,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:vK,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:bK,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:cK,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:aK,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:wK,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:CK,oneof:"message"},{no:22,name:"request_response",kind:"message",T:EK,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:TK,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:xK,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:_K,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:yK,oneof:"message"}]),A0=G.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ea,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:G.getEnumType(SR)}]),ld=G.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:G.getEnumType(Ri)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:G.getEnumType(pn)},{no:9,name:"layers",kind:"message",T:ea,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:A0,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:G.getEnumType(jn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:G.getEnumType(kR)},{no:17,name:"audio_features",kind:"enum",T:G.getEnumType(Fn),repeated:!0}]),jp=G.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:G.getEnumType(Ai)},{no:3,name:"final",kind:"scalar",T:8}]),Pp=G.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),oK=G.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Np},{no:2,name:"participant",kind:"message",T:Xa},{no:3,name:"other_participants",kind:"message",T:Xa,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:zR,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:OR},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:_R},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Sm,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),aK=G.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:zR,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:OR},{no:3,name:"server_info",kind:"message",T:_R},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),Ox=G.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Kc}]),cK=G.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),ca=G.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),lK=G.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Xa,repeated:!0}]),_p=G.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:PR,repeated:!0}]),FR=G.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:G.getEnumType(Px)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Mx=G.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:G.getEnumType(Fn),repeated:!0}]),UR=G.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Rp=G.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:G.getEnumType(Fi)},{no:3,name:"action",kind:"enum",T:G.getEnumType(nl)},{no:4,name:"regions",kind:"message",T:kK}]),nl=G.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),BR=G.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ea,repeated:!0}]),Dx=G.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),zR=G.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),uK=G.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:TR,repeated:!0}]),dK=G.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Np}]),hK=G.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:G.getEnumType(zu)},{no:3,name:"score",kind:"scalar",T:2}]),fK=G.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:hK,repeated:!0}]),mK=G.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:G.getEnumType(R0)}]),pK=G.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:mK,repeated:!0}]),Lx=G.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:G.getEnumType(Px)},{no:2,name:"enabled",kind:"scalar",T:8}]),gK=G.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Lx,repeated:!0}]),vK=G.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Lx,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:gK,repeated:!0}]),yK=G.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:rK,repeated:!0}]),$R=G.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),VR=G.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:$R,repeated:!0}]),bK=G.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),xK=G.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Np},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Xa},{no:4,name:"other_participants",kind:"message",T:Xa,repeated:!0}]),Fx=G.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:ca},{no:2,name:"subscription",kind:"message",T:_p},{no:3,name:"publish_tracks",kind:"message",T:Ox,repeated:!0},{no:4,name:"data_channels",kind:"message",T:HR,repeated:!0},{no:5,name:"offer",kind:"message",T:ca},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:qR,repeated:!0}]),qR=G.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),HR=G.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:G.getEnumType(Ai)}]),ls=G.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:G.getEnumType(iK),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),WR=G.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),wK=G.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),kK=G.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:SK,repeated:!0}]),SK=G.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),CK=G.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:G.getEnumType(ZW)}]),EK=G.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:G.getEnumType(Ux)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:jp,oneof:"request"},{no:5,name:"add_track",kind:"message",T:ld,oneof:"request"},{no:6,name:"mute",kind:"message",T:Pp,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:Dx,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:Mx,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:UR,oneof:"request"}]),Ux=G.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),TK=G.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),KR=G.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),NK=G.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:AR},{no:2,name:"connection_settings",kind:"message",T:KR},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:ld,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:ca},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:G.getEnumType(Aa)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:Fx}]),jK=G.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:G.getEnumType(PK)},{no:2,name:"join_request",kind:"scalar",T:12}]),PK=G.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),_K=G.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function RK(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lf={exports:{}},AK=Lf.exports,yE;function IK(){return yE||(yE=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(AK,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function l(x,S){var E=x[S];if(typeof E.bind=="function")return E.bind(x);try{return Function.prototype.bind.call(E,x)}catch{return function(){return Function.prototype.apply.apply(E,[x,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(x){return x==="debug"&&(x="log"),typeof console===n?!1:x==="trace"&&r?d:console[x]!==void 0?l(console,x):console.log!==void 0?l(console,"log"):t}function f(){for(var x=this.getLevel(),S=0;S<i.length;S++){var E=i[S];this[E]=S<x?t:this.methodFactory(E,x,this.name)}if(this.log=this.debug,typeof console===n&&x<this.levels.SILENT)return"No console available for logging"}function p(x){return function(){typeof console!==n&&(f.call(this),this[x].apply(this,arguments))}}function y(x,S,E){return h(x)||p.apply(this,arguments)}function b(x,S){var E=this,T,P,j,N="loglevel";typeof x=="string"?N+=":"+x:typeof x=="symbol"&&(N=void 0);function R(q){var V=(i[q]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=V;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+V+";"}catch{}}}function A(){var q;if(!(typeof window===n||!N)){try{q=window.localStorage[N]}catch{}if(typeof q===n)try{var V=window.document.cookie,te=encodeURIComponent(N),J=V.indexOf(te+"=");J!==-1&&(q=/^([^;]+)/.exec(V.slice(J+te.length+1))[1])}catch{}return E.levels[q]===void 0&&(q=void 0),q}}function I(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function D(q){var V=q;if(typeof V=="string"&&E.levels[V.toUpperCase()]!==void 0&&(V=E.levels[V.toUpperCase()]),typeof V=="number"&&V>=0&&V<=E.levels.SILENT)return V;throw new TypeError("log.setLevel() called with invalid level: "+q)}E.name=x,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=S||y,E.getLevel=function(){return j??P??T},E.setLevel=function(q,V){return j=D(q),V!==!1&&R(j),f.call(E)},E.setDefaultLevel=function(q){P=D(q),A()||E.setLevel(q,!1)},E.resetLevel=function(){j=null,I(),f.call(E)},E.enableAll=function(q){E.setLevel(E.levels.TRACE,q)},E.disableAll=function(q){E.setLevel(E.levels.SILENT,q)},E.rebuild=function(){if(o!==E&&(T=D(o.getLevel())),f.call(E),o===E)for(var q in s)s[q].rebuild()},T=D(o?o.getLevel():"WARN");var z=A();z!=null&&(j=D(z)),f.call(E)}o=new b,o.getLogger=function(S){if(typeof S!="symbol"&&typeof S!="string"||S==="")throw new TypeError("You must supply a name when creating a logger.");var E=s[S];return E||(E=s[S]=new b(S,o.methodFactory)),E};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})})(Lf)),Lf.exports}var Ap=IK(),I0;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(I0||(I0={}));var zi;(function(e){e.Default="livekit",e.Room="livekit-room",e.TokenSource="livekit-token-source",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(zi||(zi={}));let rt=Ap.getLogger("livekit");Object.values(zi).map(e=>Ap.getLogger(e));rt.setDefaultLevel(I0.info);function co(e){const t=Ap.getLogger(e);return t.setDefaultLevel(rt.getLevel()),t}const OK=Ap.getLogger("lk-e2ee"),Ru=7e3,MK=[0,300,4*300,9*300,16*300,Ru,Ru,Ru,Ru,Ru];class DK{constructor(t){this._retryDelays=t!==void 0?[...t]:MK}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function LK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function M(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(p){o(p)}}function d(f){try{h(r.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(e,t||[])).next())})}function bE(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Js(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof bE=="function"?bE(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(l,d){o=e[s](o),i(l,d,o.done,o.value)})}}function i(s,o,l,d){Promise.resolve(d).then(function(h){s({value:h,done:l})},o)}}var df={exports:{}},xE;function FK(){if(xE)return df.exports;xE=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(N,R,A){return Function.prototype.apply.call(N,R,A)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function r(j){console&&console.warn&&console.warn(j)}var i=Number.isNaN||function(N){return N!==N};function s(){s.init.call(this)}df.exports=s,df.exports.once=E,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function l(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(j){if(typeof j!="number"||j<0||i(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");o=j}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||i(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function d(j){return j._maxListeners===void 0?s.defaultMaxListeners:j._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(N){for(var R=[],A=1;A<arguments.length;A++)R.push(arguments[A]);var I=N==="error",D=this._events;if(D!==void 0)I=I&&D.error===void 0;else if(!I)return!1;if(I){var z;if(R.length>0&&(z=R[0]),z instanceof Error)throw z;var q=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw q.context=z,q}var V=D[N];if(V===void 0)return!1;if(typeof V=="function")t(V,this,R);else for(var te=V.length,J=k(V,te),A=0;A<te;++A)t(J[A],this,R);return!0};function h(j,N,R,A){var I,D,z;if(l(R),D=j._events,D===void 0?(D=j._events=Object.create(null),j._eventsCount=0):(D.newListener!==void 0&&(j.emit("newListener",N,R.listener?R.listener:R),D=j._events),z=D[N]),z===void 0)z=D[N]=R,++j._eventsCount;else if(typeof z=="function"?z=D[N]=A?[R,z]:[z,R]:A?z.unshift(R):z.push(R),I=d(j),I>0&&z.length>I&&!z.warned){z.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=j,q.type=N,q.count=z.length,r(q)}return j}s.prototype.addListener=function(N,R){return h(this,N,R,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(N,R){return h(this,N,R,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(j,N,R){var A={fired:!1,wrapFn:void 0,target:j,type:N,listener:R},I=f.bind(A);return I.listener=R,A.wrapFn=I,I}s.prototype.once=function(N,R){return l(R),this.on(N,p(this,N,R)),this},s.prototype.prependOnceListener=function(N,R){return l(R),this.prependListener(N,p(this,N,R)),this},s.prototype.removeListener=function(N,R){var A,I,D,z,q;if(l(R),I=this._events,I===void 0)return this;if(A=I[N],A===void 0)return this;if(A===R||A.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[N],I.removeListener&&this.emit("removeListener",N,A.listener||R));else if(typeof A!="function"){for(D=-1,z=A.length-1;z>=0;z--)if(A[z]===R||A[z].listener===R){q=A[z].listener,D=z;break}if(D<0)return this;D===0?A.shift():x(A,D),A.length===1&&(I[N]=A[0]),I.removeListener!==void 0&&this.emit("removeListener",N,q||R)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(N){var R,A,I;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[N]),this;if(arguments.length===0){var D=Object.keys(A),z;for(I=0;I<D.length;++I)z=D[I],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=A[N],typeof R=="function")this.removeListener(N,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(N,R[I]);return this};function y(j,N,R){var A=j._events;if(A===void 0)return[];var I=A[N];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?S(I):k(I,I.length)}s.prototype.listeners=function(N){return y(this,N,!0)},s.prototype.rawListeners=function(N){return y(this,N,!1)},s.listenerCount=function(j,N){return typeof j.listenerCount=="function"?j.listenerCount(N):b.call(j,N)},s.prototype.listenerCount=b;function b(j){var N=this._events;if(N!==void 0){var R=N[j];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function k(j,N){for(var R=new Array(N),A=0;A<N;++A)R[A]=j[A];return R}function x(j,N){for(;N+1<j.length;N++)j[N]=j[N+1];j.pop()}function S(j){for(var N=new Array(j.length),R=0;R<N.length;++R)N[R]=j[R].listener||j[R];return N}function E(j,N){return new Promise(function(R,A){function I(z){j.removeListener(N,D),A(z)}function D(){typeof j.removeListener=="function"&&j.removeListener("error",I),R([].slice.call(arguments))}P(j,N,D,{once:!0}),N!=="error"&&T(j,I,{once:!0})})}function T(j,N,R){typeof j.on=="function"&&P(j,"error",N,R)}function P(j,N,R,A){if(typeof j.on=="function")A.once?j.once(N,R):j.on(N,R);else if(typeof j.addEventListener=="function")j.addEventListener(N,function I(D){A.once&&j.removeEventListener(N,I),R(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return df.exports}var Rs=FK();let GR=!0,ZR=!0;function $u(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function dc(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,l){if(o!==t)return i.apply(this,arguments);const d=h=>{const f=n(h);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,d),i.apply(this,[o,d])};const s=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(l))return s.apply(this,arguments);const d=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,d])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function UK(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(GR=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function BK(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ZR=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function JR(){if(typeof window=="object"){if(GR)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bx(e,t){ZR&&console.warn(e+" is deprecated, please use "+t+" instead.")}function zK(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt($u(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt($u(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt($u(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=$u(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function wE(e){return Object.prototype.toString.call(e)==="[object Object]"}function QR(e){return wE(e)?Object.keys(e).reduce(function(t,n){const r=wE(e[n]),i=r?QR(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function O0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?O0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{O0(e,e.get(i),n)})}))}function kE(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(o=>{e.forEach(l=>{l.type===r&&l.trackId===o.id&&O0(e,l,i)})}),i}const SE=JR;function YR(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const d={};return Object.keys(l).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const f=typeof l[h]=="object"?l[h]:{ideal:l[h]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const p=function(y,b){return y?y+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(f.ideal!==void 0){d.optional=d.optional||[];let y={};typeof f.ideal=="number"?(y[p("min",h)]=f.ideal,d.optional.push(y),y={},y[p("max",h)]=f.ideal,d.optional.push(y)):(y[p("",h)]=f.ideal,d.optional.push(y))}f.exact!==void 0&&typeof f.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[p("",h)]=f.exact):["min","max"].forEach(y=>{f[y]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[p(y,h)]=f[y])})}),l.advanced&&(d.optional=(d.optional||[]).concat(l.advanced)),d},i=function(l,d){if(t.version>=61)return d(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const h=function(f,p,y){p in f&&!(y in f)&&(f[y]=f[p],delete f[p])};l=JSON.parse(JSON.stringify(l)),h(l.audio,"autoGainControl","googAutoGainControl"),h(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let h=l.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const f=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let p;if(h.exact==="environment"||h.ideal==="environment"?p=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(k=>k.kind==="videoinput");let b=y.find(k=>p.some(x=>k.label.toLowerCase().includes(x)));return!b&&y.length&&p.includes("back")&&(b=y[y.length-1]),b&&(l.video.deviceId=h.exact?{exact:b.deviceId}:{ideal:b.deviceId}),l.video=r(l.video),SE("chrome: "+JSON.stringify(l)),d(l)})}l.video=r(l.video)}return SE("chrome: "+JSON.stringify(l)),d(l)},s=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,d,h){i(l,f=>{n.webkitGetUserMedia(f,d,p=>{h&&h(s(p))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,h=>l(h).then(f=>{if(h.audio&&!f.getAudioTracks().length||h.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(s(f))))}}}function XR(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function eA(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else dc(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function tA(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,d){let h=i.apply(this,arguments);return h||(h=t(this,l),this._senders.push(h)),h};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){s.apply(this,arguments);const d=this._senders.indexOf(l);d!==-1&&this._senders.splice(d,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const l=this._senders.find(d=>d.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function nA(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>kE(o,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),dc(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>kE(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(l=>{l.track===r&&(i?o=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(s?o=!0:s=l),l.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function rA(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(d)===-1&&this._shimmedLocalStreams[l.id].push(d):this._shimmedLocalStreams[l.id]=[l,d],d};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(h=>{if(this.getSenders().find(p=>p.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>l.indexOf(h)===-1);this._shimmedLocalStreams[o.id]=[o].concat(d)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const d=this._shimmedLocalStreams[l].indexOf(o);d!==-1&&this._shimmedLocalStreams[l].splice(d,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function iA(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return rA(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(p=>this._reverseStreams[p.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(p=>{if(this.getSenders().find(b=>b.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const p=new e.MediaStream(f.getTracks());this._streams[f.id]=p,this._reverseStreams[p.id]=f,f=p}r.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(x=>x===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const k=this._streams[p.id];if(k)k.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new e.MediaStream([f]);this._streams[p.id]=x,this._reverseStreams[x.id]=p,this.addStream(x)}return this.getSenders().find(x=>x.track===f)};function s(h,f){let p=f.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const b=h._reverseStreams[y],k=h._streams[b.id];p=p.replace(new RegExp(k.id,"g"),b.id)}),new RTCSessionDescription({type:f.type,sdp:p})}function o(h,f){let p=f.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const b=h._reverseStreams[y],k=h._streams[b.id];p=p.replace(new RegExp(b.id,"g"),k.id)}),new RTCSessionDescription({type:f.type,sdp:p})}["createOffer","createAnswer"].forEach(function(h){const f=e.RTCPeerConnection.prototype[h],p={[h](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[k=>{const x=s(this,k);y[0].apply(null,[x])},k=>{y[1]&&y[1].apply(null,k)},arguments[2]]):f.apply(this,arguments).then(k=>s(this,k))}};e.RTCPeerConnection.prototype[h]=p[h]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:s(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(x=>f.track===x)&&(y=this._streams[b])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function M0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function sA(e,t){dc(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var CE=Object.freeze({__proto__:null,fixNegotiationNeeded:sA,shimAddTrackRemoveTrack:iA,shimAddTrackRemoveTrackWithNative:rA,shimGetSendersWithDtmf:tA,shimGetUserMedia:YR,shimMediaStream:XR,shimOnTrack:eA,shimPeerConnection:M0,shimSenderReceiverGetStats:nA});function oA(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Bx("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,l,d){l in o&&!(d in o)&&(o[d]=o[l],delete o[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function $K(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function aA(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function D0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,o,l]=arguments;return r.apply(this,[s||null]).then(d=>{if(t.version<53&&!o)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((f,p)=>{d.set(p,Object.assign({},f,{type:n[f.type]||f.type}))})}return d}).then(o,l)}}function cA(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function lA(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),dc(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function uA(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Bx("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function dA(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function hA(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:o}=s,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function fA(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function mA(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function pA(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var EE=Object.freeze({__proto__:null,shimAddTransceiver:hA,shimCreateAnswer:pA,shimCreateOffer:mA,shimGetDisplayMedia:$K,shimGetParameters:fA,shimGetUserMedia:oA,shimOnTrack:aA,shimPeerConnection:D0,shimRTCDataChannel:dA,shimReceiverGetStats:lA,shimRemoveStream:uA,shimSenderGetStats:cA});function gA(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function vA(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function yA(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(h,f){const p=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[p]);return f?(y.then(h,f),Promise.resolve()):y},t.createAnswer=function(h,f){const p=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[p]);return f?(y.then(h,f),Promise.resolve()):y};let l=function(d,h,f){const p=i.apply(this,[d]);return f?(p.then(h,f),Promise.resolve()):p};t.setLocalDescription=l,l=function(d,h,f){const p=s.apply(this,[d]);return f?(p.then(h,f),Promise.resolve()):p},t.setRemoteDescription=l,l=function(d,h,f){const p=o.apply(this,[d]);return f?(p.then(h,f),Promise.resolve()):p},t.addIceCandidate=l}function bA(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(xA(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}.bind(t))}function xA(e){return e&&e.video!==void 0?Object.assign({},e,{video:QR(e.video)}):e}function wA(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];l.urls===void 0&&l.url?(Bx("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,s.push(l)):s.push(r.iceServers[o])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function kA(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function SA(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function CA(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var TE=Object.freeze({__proto__:null,shimAudioContext:CA,shimCallbacksAPI:yA,shimConstraints:xA,shimCreateOfferLegacy:SA,shimGetUserMedia:bA,shimLocalStreamsAPI:gA,shimRTCIceServerUrls:wA,shimRemoteStreamsAPI:vA,shimTrackEventTransceiver:kA}),vy={exports:{}},NE;function VK(){return NE||(NE=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let l=3;l<s.length;l++){const d=s[l],h=t.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const f=t.parseRtpMap(h),p=t.matchPrefix(n,"a=fmtp:"+d+" ");switch(f.parameters=p.length?t.parseFmtp(p[0]):{},f.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(t.parseRtcpFb),r.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(f.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(t.parseExtmap(l))});const o=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(l=>{o.forEach(d=>{l.rtcpFeedback.find(f=>f.type===d.type&&f.parameter===d.parameter)||l.rtcpFeedback.push(d)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=t.writeRtpMap(o),i+=t.writeFmtp(o),i+=t.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=t.writeExtmap(o)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),d=l.length>0&&l[0].ssrc;let h;const f=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(k=>parseInt(k,10)));f.length>0&&f[0].length>1&&f[0][0]===d&&(h=f[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let b={ssrc:d,codecPayloadType:parseInt(y.parameters.apt,10)};d&&h&&(b.rtx={ssrc:h}),r.push(b),s&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:d,mechanism:o?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&d&&r.push({ssrc:d});let p=t.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-2e3*8:p=void 0,r.forEach(y=>{y.maxBitrate=p})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=t.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=t.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){const d=l[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(vy)),vy.exports}var EA=VK(),rl=RK(EA),qK=XH({__proto__:null,default:rl},[EA]);function Ff(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=rl.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,dc(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function L0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||dc(e,"icecandidate",t=>{if(t.candidate){const n=rl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Uf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const d=rl.splitSections(l.sdp);return d.shift(),d.some(h=>{const f=rl.parseMLine(h);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},r=function(l){const d=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},i=function(l){let d=65536;return t.browser==="firefox"&&(t.version<57?l===-1?d=16384:d=2147483637:t.version<60?d=t.version===57?65535:65536:d=2147483637),d},s=function(l,d){let h=65536;t.browser==="firefox"&&t.version===57&&(h=65535);const f=rl.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?h=parseInt(f[0].substring(19),10):t.browser==="firefox"&&d!==-1&&(h=2147483637),h},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),h=i(d),f=s(arguments[0],d);let p;h===0&&f===0?p=Number.POSITIVE_INFINITY:h===0||f===0?p=Math.max(h,f):p=Math.min(h,f);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return p}}),this._sctp=y}return o.apply(this,arguments)}}function Bf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const l=arguments[0],d=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&d>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},dc(e,"datachannel",r=>(t(r.channel,r.target),r))}function F0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function U0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function zf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function $f(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var HK=Object.freeze({__proto__:null,removeExtmapAllowMixed:U0,shimAddIceCandidateNullOrEmpty:zf,shimConnectionState:F0,shimMaxMessageSize:Uf,shimParameterlessSetLocalDescription:$f,shimRTCIceCandidate:Ff,shimRTCIceCandidateRelayProtocol:L0,shimSendThrowTypeError:Bf});function WK(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=JR,r=zK(e),i={browserDetails:r,commonShim:HK,extractVersion:$u,disableLog:UK,disableWarnings:BK,sdp:qK};switch(r.browser){case"chrome":if(!CE||!M0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=CE,zf(e,r),$f(e),YR(e,r),XR(e),M0(e,r),eA(e),iA(e,r),tA(e),nA(e),sA(e,r),Ff(e),L0(e),F0(e),Uf(e,r),Bf(e),U0(e,r);break;case"firefox":if(!EE||!D0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=EE,zf(e,r),$f(e),oA(e,r),D0(e,r),aA(e),uA(e),cA(e),lA(e),dA(e),hA(e),fA(e),mA(e),pA(e),Ff(e),F0(e),Uf(e,r),Bf(e);break;case"safari":if(!TE||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=TE,zf(e,r),$f(e),wA(e),SA(e),yA(e),gA(e),vA(e),kA(e),bA(e),CA(e),Ff(e),L0(e),Uf(e,r),Bf(e),U0(e,r);break;default:n("Unsupported browser!");break}return i}WK({window:typeof window>"u"?void 0:window});const KK=10,Au="lk_e2ee",GK="LKFrameEncryptionKey",ZK={sharedKey:!1,ratchetSalt:GK,ratchetWindowSize:8,failureTolerance:KK,keyringSize:16};var ta;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(ta||(ta={}));var jE;(function(e){e.KeyRatcheted="keyRatcheted"})(jE||(jE={}));var Qo;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(Qo||(Qo={}));var PE;(function(e){e.Error="cryptorError"})(PE||(PE={}));function JK(){return QK()||B0()}function B0(){return typeof window.RTCRtpScriptTransform<"u"}function QK(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function YK(e){var t,n,r,i,s;if(((t=e.value)===null||t===void 0?void 0:t.case)!=="sipDtmf"&&((n=e.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=e.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((i=e.value)===null||i===void 0?void 0:i.case)!=="transcription"&&((s=e.value)===null||s===void 0?void 0:s.case)!=="encryptedPacket")return new ER({value:e.value})}class Oce extends Rs.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{rt.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},ZK),t),this.on(ta.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,r){const i={key:t,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(ta.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(ta.RatchetRequest,t,n)}}class uo extends Error{constructor(t,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=t}}var mt;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"})(mt||(mt={}));class St extends uo{constructor(t,n,r,i){super(1,t),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=mt[n]}}class zx extends uo{constructor(t){super(21,t??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Qs extends uo{constructor(t){super(20,t??"track is invalid"),this.name="TrackInvalidError"}}class XK extends uo{constructor(t){super(10,t??"unsupported server"),this.name="UnsupportedServer"}}class Tn extends uo{constructor(t){super(12,t??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class z0 extends uo{constructor(t){super(13,t??"unable to negotiate"),this.name="NegotiationError"}}class _E extends uo{constructor(t,n){super(15,t),this.name="PublishTrackError",this.status=n}}class RE extends uo{constructor(t,n){super(15,t),this.reason=n,this.reasonName=typeof n=="string"?n:Ux[n]}}var lr;(function(e){e[e.AlreadyOpened=0]="AlreadyOpened",e[e.AbnormalEnd=1]="AbnormalEnd",e[e.DecodeFailed=2]="DecodeFailed",e[e.LengthExceeded=3]="LengthExceeded",e[e.Incomplete=4]="Incomplete",e[e.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",e[e.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(lr||(lr={}));class ci extends uo{constructor(t,n){super(16,t),this.name="DataStreamError",this.reason=n,this.reasonName=lr[n]}}var ud;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(ud||(ud={}));(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(ud||(ud={}));var AE;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(AE||(AE={}));var re;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.Moved="moved",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.ParticipantActive="participantActive",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(re||(re={}));var ce;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackCpuConstrained="localTrackCpuConstrained",e.LocalSenderCreated="localSenderCreated",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.TrackCpuConstrained="trackCpuConstrained",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage",e.Active="active"})(ce||(ce={}));var je;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected",e.RoomMoved="roomMoved"})(je||(je={}));var Te;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.CpuConstrained="cpuConstrained",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate",e.PreConnectBufferFlushed="preConnectBufferFlushed"})(Te||(Te={}));function eG(e){return typeof e>"u"?e:typeof structuredClone=="function"?typeof e=="object"&&e!==null?structuredClone(Object.assign({},e)):structuredClone(e):JSON.parse(JSON.stringify(e))}const tG=/version\/(\d+(\.?_?\d+)+)/i;let yy;function hr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(yy===void 0||t){const r=nG.find(i=>{let{test:s}=i;return s.test(n)});yy=r?.describe(n)}return yy}const nG=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:Vf(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:by(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:Vf(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:by(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:Vf(tG,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:by(e)}}}];function Vf(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=t.match(e);return r&&r.length>=n&&r[n]||""}function by(e){return e.includes("mac os")?Vf(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var rG="2.15.13";const iG=rG,sG=16;class Gn{}Gn.setTimeout=function(){return setTimeout(...arguments)};Gn.setInterval=function(){return setInterval(...arguments)};Gn.clearTimeout=function(){return clearTimeout(...arguments)};Gn.clearInterval=function(){return clearInterval(...arguments)};const oG=5e3,Iu=[];var Hr;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(Hr||(Hr={}));class K extends Rs.EventEmitter{get streamState(){return this._streamState}setStreamState(t){this._streamState=t}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=K.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=rt,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),oG):this.handleAppVisibilityChanged()},this.log=co((i=r.loggerName)!==null&&i!==void 0?i:zi.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=K.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),dt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===K.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===K.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(Iu.forEach(s=>{s.parentElement===null&&!t&&(t=s)}),t&&Iu.splice(Iu.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),Gc(this.mediaStreamTrack,t);const r=t.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return t.play().then(()=>{this.emit(i?Te.AudioPlaybackStarted:Te.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?Te.AudioPlaybackFailed:Te.VideoPlaybackFailed,s):s.name==="AbortError"?rt.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):rt.warn("could not playback ".concat(i?"audio":"video"),s),i&&t&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(Te.ElementAttached,t),t}detach(t){try{if(t){il(this.mediaStreamTrack,t);const r=this.attachedElements.indexOf(t);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(t),this.emit(Te.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(r=>{il(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(Te.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=co(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),Iu.forEach(r=>{r.parentElement||(n=!1)}),n&&Iu.push(t)}}handleAppVisibilityChanged(){return M(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===K.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){jr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){jr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Gc(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let r;e.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(e)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(e)),(!tc()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(tc()||ec())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function il(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(h){h.Audio="audio",h.Video="video",h.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(h){h.Camera="camera",h.Microphone="microphone",h.ScreenShare="screen_share",h.ScreenShareAudio="screen_share_audio",h.Unknown="unknown"})(n=e.Source||(e.Source={}));let r;(function(h){h.Active="active",h.Paused="paused",h.Unknown="unknown"})(r=e.StreamState||(e.StreamState={}));function i(h){switch(h){case t.Audio:return Ri.AUDIO;case t.Video:return Ri.VIDEO;default:return Ri.DATA}}e.kindToProto=i;function s(h){switch(h){case Ri.AUDIO:return t.Audio;case Ri.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=s;function o(h){switch(h){case n.Camera:return pn.CAMERA;case n.Microphone:return pn.MICROPHONE;case n.ScreenShare:return pn.SCREEN_SHARE;case n.ScreenShareAudio:return pn.SCREEN_SHARE_AUDIO;default:return pn.UNKNOWN}}e.sourceToProto=o;function l(h){switch(h){case pn.CAMERA:return n.Camera;case pn.MICROPHONE:return n.Microphone;case pn.SCREEN_SHARE:return n.ScreenShare;case pn.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=l;function d(h){switch(h){case R0.ACTIVE:return r.Active;case R0.PAUSED:return r.Paused;default:return r.Unknown}}e.streamStateFromProto=d})(K||(K={}));class jt{constructor(t,n,r,i,s){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&r!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const aG=["vp8","h264"],cG=["vp8","h264","vp9","av1","h265"];function lG(e){return!!aG.find(t=>t===e)}const uG=lG;var IE;(function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"})(IE||(IE={}));var $0;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}})($0||($0={}));const dd={h90:new jt(160,90,9e4,20),h180:new jt(320,180,16e4,20),h216:new jt(384,216,18e4,20),h360:new jt(640,360,45e4,20),h540:new jt(960,540,8e5,25),h720:new jt(1280,720,17e5,30),h1080:new jt(1920,1080,3e6,30),h1440:new jt(2560,1440,5e6,30),h2160:new jt(3840,2160,8e6,30)},V0={h120:new jt(160,120,7e4,20),h180:new jt(240,180,125e3,20),h240:new jt(320,240,14e4,20),h360:new jt(480,360,33e4,20),h480:new jt(640,480,5e5,20),h540:new jt(720,540,6e5,25),h720:new jt(960,720,13e5,30),h1080:new jt(1440,1080,23e5,30),h1440:new jt(1920,1440,38e5,30)},$x={h360fps3:new jt(640,360,2e5,3,"medium"),h360fps15:new jt(640,360,4e5,15,"medium"),h720fps5:new jt(1280,720,8e5,5,"medium"),h720fps15:new jt(1280,720,15e5,15,"medium"),h720fps30:new jt(1280,720,2e6,30,"medium"),h1080fps15:new jt(1920,1080,25e5,15,"medium"),h1080fps30:new jt(1920,1080,5e6,30,"medium"),original:new jt(0,0,7e6,30,"medium")},dG="|",OE="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function hG(e){const t=e.split(dG);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function fr(e){return M(this,void 0,void 0,function*(){return new Promise(t=>Gn.setTimeout(t,e))})}function q0(){return"addTransceiver"in RTCPeerConnection.prototype}function H0(){return"addTrack"in RTCPeerConnection.prototype}function fG(){if(!("getCapabilities"in RTCRtpSender)||tc()||ec())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType.toLowerCase()==="video/av1"){t=!0;break}}return t}function mG(){if(!("getCapabilities"in RTCRtpSender)||ec())return!1;if(tc()){const n=hr();if(n?.version&&$i(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&$i(n.osVersion,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){t=!0;break}}return t}function ms(e){return e==="av1"||e==="vp9"}function W0(e){return!document||hd()?!1:(e||(e=document.createElement("audio")),"setSinkId"in e)}function pG(){return typeof RTCPeerConnection>"u"?!1:q0()||H0()}function ec(){var e;return((e=hr())===null||e===void 0?void 0:e.name)==="Firefox"}function ME(){const e=hr();return!!e&&e.name==="Chrome"&&e.os!=="iOS"}function tc(){var e;return((e=hr())===null||e===void 0?void 0:e.name)==="Safari"}function hd(){const e=hr();return e?.name==="Safari"||e?.os==="iOS"}function gG(){const e=hr();return e?.name==="Safari"&&e.version.startsWith("17.")||e?.os==="iOS"&&!!e?.osVersion&&$i(e.osVersion,"17")>=0}function vG(e){return e||(e=hr()),e?.name==="Safari"&&$i(e.version,"18.3")>0||e?.os==="iOS"&&!!e?.osVersion&&$i(e.osVersion,"18.3")>0}function TA(){var e,t;return jr()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function yG(){const e=hr(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&$i(e.osVersion,t)>=0?!0:e.name==="Safari"&&$i(e.version,t)>=0}function jr(){return typeof document<"u"}function Es(){return navigator.product=="ReactNative"}function K0(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function NA(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function jA(){if(!Es())return;let e=NA();if(e)return e.platform}function DE(){if(jr())return window.devicePixelRatio;if(Es()){let e=NA();if(e)return e.devicePixelRatio}return 1}function $i(e,t){const n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),l=parseInt(r[s],10);if(o>l)return 1;if(o<l)return-1;if(s===i-1&&o===l)return 0}return e===""&&t!==""?-1:t===""?1:n.length==r.length?0:n.length<r.length?-1:1}function bG(e){for(const t of e)t.target.handleResize(t)}function xG(e){for(const t of e)t.target.handleVisibilityChanged(t)}let xy=null;const LE=()=>(xy||(xy=new ResizeObserver(bG)),xy);let wy=null;const FE=()=>(wy||(wy=new IntersectionObserver(xG,{root:null,rootMargin:"0px"})),wy);function wG(){var e;const t=new AR({sdk:IR.JS,protocol:sG,version:iG});return Es()&&(t.os=(e=jA())!==null&&e!==void 0?e:""),t}function UE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=e,i.height=t;const s=i.getContext("2d");s?.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(e/2,t/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[l]=o.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let Ou;function ky(){if(!Ou){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const r=e.createMediaStreamDestination();if(t.connect(n),n.connect(r),t.start(),[Ou]=r.stream.getAudioTracks(),!Ou)throw Error("Could not get empty media stream audio track");Ou.enabled=!1}return Ou.clone()}class di{get isResolved(){return this._isResolved}constructor(t,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>M(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,t&&(yield t(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function kG(e){return cG.includes(e)}function na(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact!==void 0)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal!==void 0)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function SG(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function G0(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function CG(e,t){return e.segments.map(n=>{let{id:r,text:i,language:s,startTime:o,endTime:l,final:d}=n;var h;const f=(h=t.get(r))!==null&&h!==void 0?h:Date.now(),p=Date.now();return d?t.delete(r):t.set(r,f),{id:r,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(l.toString()),final:d,language:s,firstReceivedTime:f,lastReceivedTime:p}})}function EG(e){const{id:t,timestamp:n,message:r,editTimestamp:i}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function BE(e){switch(e.reason){case mt.LeaveRequest:return e.context;case mt.Cancelled:return Fi.CLIENT_INITIATED;case mt.NotAllowed:return Fi.USER_REJECTED;case mt.ServerUnreachable:return Fi.JOIN_FAILURE;default:return Fi.UNKNOWN_REASON}}function qf(e){return e!==void 0?Number(e):void 0}function Ia(e){return e!==void 0?BigInt(e):void 0}function za(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function ys(e){return!!e&&e.kind==K.Kind.Audio}function fa(e){return!!e&&e.kind==K.Kind.Video}function $o(e){return za(e)&&fa(e)}function Ws(e){return za(e)&&ys(e)}function Z0(e){return!!e&&!e.isLocal}function TG(e){return!!e&&!e.isLocal}function Sy(e){return Z0(e)&&fa(e)}function NG(e){return e.isLocal}function jG(e,t){const n=[];let r=new TextEncoder().encode(e);for(;r.length>t;){let i=t;for(;i>0;){const s=r[i];if(s!==void 0&&(s&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function PA(e,t,n){var r,i,s,o;const{optionsWithoutProcessor:l,audioProcessor:d,videoProcessor:h}=AA(e??{}),f=t?.processor,p=n?.processor,y=l??{};return y.audio===!0&&(y.audio={}),y.video===!0&&(y.video={}),y.audio&&(J0(y.audio,t),(r=(s=y.audio).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(d||f)&&(y.audio.processor=d??f)),y.video&&(J0(y.video,n),(i=(o=y.video).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(h||p)&&(y.video.processor=h??p)),y}function J0(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function Vx(e){var t,n,r,i;const s={};if(e.video)if(typeof e.video=="object"){const o={},l=o,d=e.video;Object.keys(d).forEach(h=>{switch(h){case"resolution":J0(l,d.resolution);break;default:l[h]=d[h]}}),s.video=o,(t=(r=s.video).deviceId)!==null&&t!==void 0||(r.deviceId={ideal:"default"})}else s.video=e.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return e.audio?typeof e.audio=="object"?(s.audio=e.audio,(n=(i=s.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function _A(e){return M(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const r=RA();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,o=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(i),yield fr(n),i.getByteTimeDomainData(o);const d=o.some(h=>h!==128&&h!==0);return r.close(),!d}return!1})()})}function RA(){var e;const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((e=window.document)===null||e===void 0)&&e.body)){const r=()=>M(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}finally{(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var i;n.state==="closed"&&((i=window.document.body)===null||i===void 0||i.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function PG(e){return e==="audioinput"?K.Source.Microphone:e==="videoinput"?K.Source.Camera:K.Source.Unknown}function Q0(e){return e===K.Source.Microphone?"audioinput":e===K.Source.Camera?"videoinput":void 0}function _G(e){var t,n;let r=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(r=typeof r=="boolean"?{}:r,tc()?r=Object.assign(Object.assign({},r),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:r,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function Wu(e){return e.split("/")[1].toLowerCase()}function RG(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new Ox({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function dt(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?dt(e.track):{})}}function AG(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function IG(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const r=[...Object.keys(t),...Object.keys(e)],i={};for(const s of r)e[s]!==t[s]&&(i[s]=(n=t[s])!==null&&n!==void 0?n:"");return i}function AA(e){const t=Object.assign({},e);let n,r;return typeof t.audio=="object"&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),typeof t.video=="object"&&t.video.processor&&(r=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:eG(t)}}function OG(e){switch(e){case pn.CAMERA:return K.Source.Camera;case pn.MICROPHONE:return K.Source.Microphone;case pn.SCREEN_SHARE:return K.Source.ScreenShare;case pn.SCREEN_SHARE_AUDIO:return K.Source.ScreenShareAudio;default:return K.Source.Unknown}}function zE(e,t){return e.width*e.height<t.width*t.height}function MG(e,t){var n;return(n=e.layers)===null||n===void 0?void 0:n.find(r=>r.quality===t)}class DG extends Rs.EventEmitter{constructor(t,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var i,s;const{kind:o,data:l}=r.data;switch(o){case"error":rt.error(l.error.message),this.emit(Qo.EncryptionError,l.error);break;case"initAck":l.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)});break;case"enable":if(l.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)}),this.encryptionEnabled!==l.enabled&&l.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Qo.ParticipantEncryptionStatusChanged,l.enabled,this.room.localParticipant),this.encryptionEnabled=l.enabled;else if(l.participantIdentity){const f=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(l.participantIdentity);if(!f)throw TypeError("couldn't set encryption status, participant not found".concat(l.participantIdentity));this.emit(Qo.ParticipantEncryptionStatusChanged,l.enabled,f)}break;case"ratchetKey":this.keyProvider.emit(ta.KeyRatcheted,l.ratchetResult,l.participantIdentity,l.keyIndex);break;case"decryptDataResponse":const d=this.decryptDataRequests.get(l.uuid);d?.resolve&&d.resolve(l);break;case"encryptDataResponse":const h=this.encryptDataRequests.get(l.uuid);h?.resolve&&h.resolve(l);break}},this.onWorkerError=r=>{rt.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Qo.EncryptionError,r.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(t){if(!JK())throw new zx("tried to setup end-to-end encryption on an unsupported browser");if(rt.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:OK.getLevel()}};this.worker&&(rt.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){rt.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?rt.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(je.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(re.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==jn.NONE,i.identity)),t.on(re.ConnectionStateChanged,r=>{r===ft.Connected&&t.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==jn.NONE,i.identity)})})}).on(re.TrackUnsubscribed,(r,i,s)=>{var o;const l={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(l)}).on(re.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(re.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on(ce.LocalSenderCreated,(r,i)=>M(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),t.localParticipant.on(ce.LocalTrackPublished,r=>{if(!fa(r.track)||!hd())return;const i={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:Wu(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}),n.on(ta.SetKey,r=>this.postKey(r)).on(ta.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}encryptData(t){return M(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:t,participantIdentity:this.room.localParticipant.identity}},i=new di;return i.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,i),this.worker.postMessage(r),i.promise})}handleEncryptedData(t,n,r,i){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const s=crypto.randomUUID(),o={kind:"decryptDataRequest",data:{uuid:s,payload:t,iv:n,participantIdentity:r,keyIndex:i}},l=new di;return l.onFinally=()=>{this.decryptDataRequests.delete(s)},this.decryptDataRequests.set(s,l),this.worker.postMessage(o),l.promise}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(r)}postKey(t){let{key:n,participantIdentity:r,keyIndex:i}=t;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(t,n){if(this.worker){const r={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,r){if(t.receiver){if(!r?.mimeType||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?Wu(r.mimeType):void 0)}}setupE2EESender(t,n){if(!za(t)||!n){n||rt.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,r,i){return M(this,void 0,void 0,function*(){if(this.worker){if(B0()&&!ME()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Au in t&&i){const d={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(d);return}let s=t.writableStream,o=t.readableStream;if(!s||!o){const d=t.createEncodedStreams();t.writableStream=d.writable,s=d.writable,t.readableStream=d.readable,o=d.readable}const l={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r,isReuse:Au in t}};this.worker.postMessage(l,[o,s])}t[Au]=!0}})}handleSender(t,n,r){var i;if(!(Au in t||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(B0()&&!ME()){rt.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{rt.info("initialize encoded streams");const s=t.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(o,[s.readable,s.writable])}t[Au]=!0}}}const Cy="default";class Un{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Un),this.instance}get previousDevices(){return this._previousDevices}getDevices(t){return M(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;if(((s=Un.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){rt.debug("awaiting getUserMedia promise");try{n?yield Un.userMediaPromiseMap.get(n):yield Promise.all(Un.userMediaPromiseMap.values())}catch{rt.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(i&&!(tc()&&r.hasDeviceInUse(n))&&(o.filter(d=>d.kind===n).length===0||o.some(d=>{const h=d.label==="",f=n?d.kind===n:!0;return h&&f}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},h=yield navigator.mediaDevices.getUserMedia(d);o=yield navigator.mediaDevices.enumerateDevices(),h.getTracks().forEach(f=>{f.stop()})}return r._previousDevices=o,n&&(o=o.filter(l=>l.kind===n)),o})()})}normalizeDeviceId(t,n,r){return M(this,void 0,void 0,function*(){if(n!==Cy)return n;const i=yield this.getDevices(t),s=i.find(l=>l.deviceId===Cy);if(!s){rt.warn("could not reliably determine default device");return}const o=i.find(l=>l.deviceId!==Cy&&l.groupId===(r??s.groupId));if(!o){rt.warn("could not reliably determine default device");return}return o?.deviceId})}hasDeviceInUse(t){return t?Un.userMediaPromiseMap.has(t):Un.userMediaPromiseMap.size>0}}Un.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Un.userMediaPromiseMap=new Map;var Ku;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(Ku||(Ku={}));class LG{constructor(){this.pendingTasks=new Map,this.taskMutex=new Ar,this.nextTaskIndex=0}run(t){return M(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ku.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ku.RUNNING,yield t()}finally{n.status=Ku.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return M(this,void 0,void 0,function*(){return this.run(()=>M(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class FG{get readyState(){return this.ws.readyState}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,i;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=t;const s=new WebSocket(t,(i=n.protocols)!==null&&i!==void 0?i:[]);s.binaryType="arraybuffer",this.ws=s;const o=function(){let{closeCode:l,reason:d}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.close(l,d)};this.opened=new Promise((l,d)=>{s.onopen=()=>{l({readable:new ReadableStream({start(h){s.onmessage=f=>{let{data:p}=f;return h.enqueue(p)},s.onerror=f=>h.error(f)},cancel:o}),writable:new WritableStream({write(h){s.send(h)},abort(){s.close()},close:o}),protocol:s.protocol,extensions:s.extensions}),s.removeEventListener("error",d)},s.addEventListener("error",d)}),this.closed=new Promise((l,d)=>{const h=()=>M(this,void 0,void 0,function*(){const f=new Promise(y=>{s.readyState!==WebSocket.CLOSED&&s.addEventListener("close",b=>{y(b)},{once:!0})}),p=yield Promise.race([fr(250),f]);p?l(p):d(new Error("Encountered unspecified websocket error without a timely close event"))});s.onclose=f=>{let{code:p,reason:y}=f;l({closeCode:p,reason:y}),s.removeEventListener("error",h)},s.addEventListener("error",h)}),n.signal&&(n.signal.onabort=()=>s.close()),this.close=o}}function UG(e,t){const n=new URL(SG(e));return t.forEach((r,i)=>{n.searchParams.set(i,r)}),IA(n,"rtc")}function BG(e){const t=new URL(G0(e));return IA(t,"validate")}function zG(e){return e.endsWith("/")?e:"".concat(e,"/")}function IA(e,t){return e.pathname="".concat(zG(e.pathname)).concat(t),e.toString()}function $E(e){if(typeof e=="string")return vE.fromJson(JSON.parse(e),{ignoreUnknownFields:!0});if(e instanceof ArrayBuffer)return vE.fromBinary(new Uint8Array(e));throw new Error("could not decode websocket message: ".concat(typeof e))}function $G(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(e instanceof AbortSignal))return t;const n=e.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:t;default:return"toString"in n?n.toString():t}}const VG=["syncState","trickle","offer","answer","simulate","leave"];function qG(e){const t=VG.indexOf(e.case)>=0;return rt.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var Ht;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(Ht||(Ht={}));const HG=250;class qx{get currentState(){return this.state}get isDisconnected(){return this.state===Ht.DISCONNECTING||this.state===Ht.DISCONNECTED}get isEstablishingConnection(){return this.state===Ht.CONNECTING||this.state===Ht.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Ht.DISCONNECTED,this.log=rt,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=co((r=n.loggerName)!==null&&r!==void 0?r:zi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new LG,this.queuedRequests=[],this.closingLock=new Ar,this.connectionLock=new Ar,this.state=Ht.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,r,i){return M(this,void 0,void 0,function*(){return this.state=Ht.CONNECTING,this.options=r,yield this.connect(t,n,r,i)})}reconnect(t,n,r,i){return M(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Ht.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(t,n,r,i){return M(this,void 0,void 0,function*(){const s=yield this.connectionLock.lock();this.connectOptions=r;const o=wG(),l=r.singlePeerConnection?KG(n,o,r):WG(n,o,r),d=UG(t,l),h=BG(d);return new Promise((f,p)=>M(this,void 0,void 0,function*(){var y,b;try{let k=!1;const x=j=>M(this,void 0,void 0,function*(){if(k)return;k=!0;const N=j instanceof Event?j.currentTarget:j,R=$G(N,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(R)).catch(A=>{this.log.error(A),this.close()}):this.close(),S(),p(N instanceof AbortSignal?N.reason:N)});i?.addEventListener("abort",x);const S=()=>{clearTimeout(E),i?.removeEventListener("abort",x)},E=setTimeout(()=>{x(new St("room connection has timed out (signal)",mt.ServerUnreachable))},r.websocketTimeout),T=(j,N)=>{this.handleSignalConnected(j,E,N)},P=new URL(d);P.searchParams.has("access_token")&&P.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(P),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new FG(d);try{this.ws.closed.then(z=>{this.isEstablishingConnection&&p(new St("Websocket got closed during a (re)connection attempt: ".concat(z.reason),mt.InternalError)),z.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:z.reason,code:z.closeCode,wasClean:z.closeCode===1e3,state:this.state}))}).catch(z=>{this.isEstablishingConnection&&p(new St("Websocket error during a (re)connection attempt: ".concat(z),mt.InternalError))});const j=yield this.ws.opened.catch(z=>M(this,void 0,void 0,function*(){if(this.state!==Ht.CONNECTED){this.state=Ht.DISCONNECTED,clearTimeout(E);const q=yield this.handleConnectionError(z,h);p(q);return}this.handleWSError(z),p(z)}));if(clearTimeout(E),!j)return;const N=j.readable.getReader();this.streamWriter=j.writable.getWriter();const R=yield N.read();if(N.releaseLock(),!R.value)throw new St("no message received as first message",mt.InternalError);const A=$E(R.value),I=this.validateFirstMessage(A,(y=r.reconnect)!==null&&y!==void 0?y:!1);if(!I.isValid){p(I.error);return}((b=A.message)===null||b===void 0?void 0:b.case)==="join"&&(this.pingTimeoutDuration=A.message.value.pingTimeout,this.pingIntervalDuration=A.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const D=I.shouldProcessFirstMessage?A:void 0;T(j,D),f(I.response)}catch(j){p(j)}finally{S()}}finally{s()}}))})}startReadingLoop(t,n){return M(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield fr(this.signalLatency));const{done:r,value:i}=yield t.read();if(r)break;const s=$E(i);this.handleSignalResponse(s)}})}close(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){const i=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=Ht.DISCONNECTING),t.ws){t.ws.close({closeCode:1e3,reason:r});const s=t.ws.closed;t.ws=void 0,t.streamWriter=void 0,yield Promise.race([s,fr(HG)])}}catch(s){t.log.debug("websocket error while closing",Object.assign(Object.assign({},t.logContext),{error:s}))}finally{n&&(t.state=Ht.DISCONNECTED),i()}})()})}sendOffer(t,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:Zc(t,n)})}sendAnswer(t,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:Zc(t,n)})}sendIceCandidate(t,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new jp({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new Pp({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return M(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const l=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new Dx({requestId:l,metadata:r,name:i,attributes:o})}),l})()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new BR({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new VR({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Bt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new WR({timestamp:Bt.parse(Date.now()),rtt:Bt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new Mx({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Rp({reason:Fi.CLIENT_INITIATED,action:nl.DISCONNECT})})}sendRequest(t){return M(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!i&&!qG(n)&&r.state===Ht.RECONNECTING){r.queuedRequests.push(()=>M(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield fr(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n?.case),r.logContext);return}const o=new sK({message:n});try{r.useJSON?yield r.streamWriter.write(o.toJsonString()):yield r.streamWriter.write(o.toBinary())}catch(l){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:l}))}})()})}handleSignalResponse(t){var n,r;const i=t.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const o=VE(i.value);this.onAnswer&&this.onAnswer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="offer"){const o=VE(i.value);this.onOffer&&this.onOffer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):i.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(i.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return M(this,void 0,void 0,function*(){if(this.state===Ht.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,t),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Gn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Gn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Gn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Gn.clearInterval(this.pingInterval)}handleSignalConnected(t,n,r){this.state=Ht.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(t.readable.getReader(),r)}validateFirstMessage(t,n){var r,i,s,o,l;return((r=t.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:t.message.value}:this.state===Ht.RECONNECTING&&((i=t.message)===null||i===void 0?void 0:i.case)!=="leave"?((s=t.message)===null||s===void 0?void 0:s.case)==="reconnect"?{isValid:!0,response:t.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((o=t.message)===null||o===void 0?void 0:o.case)==="leave"?{isValid:!1,error:new St("Received leave request while trying to (re)connect",mt.LeaveRequest,void 0,t.message.value.reason)}:n?{isValid:!1,error:new St("Unexpected first message",mt.InternalError)}:{isValid:!1,error:new St("did not receive join response, got ".concat((l=t.message)===null||l===void 0?void 0:l.case," instead"),mt.InternalError)}}handleConnectionError(t,n){return M(this,void 0,void 0,function*(){try{const r=yield fetch(n);if(r.status.toFixed(0).startsWith("4")){const i=yield r.text();return new St(i,mt.NotAllowed,r.status)}else return t instanceof St?t:new St("Encountered unknown websocket error during connection: ".concat(t),mt.InternalError,r.status)}catch(r){return r instanceof St?r:new St(r instanceof Error?r.message:"server was not reachable",mt.ServerUnreachable)}})}}function VE(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function Zc(e,t){return new ca({sdp:e.sdp,type:e.type,id:t})}function WG(e,t,n){var r;const i=new URLSearchParams;return i.set("access_token",e),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Es()?"reactnative":"js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel),t.os&&i.set("os",t.os),t.osVersion&&i.set("os_version",t.osVersion),t.browser&&i.set("browser",t.browser),t.browserVersion&&i.set("browser_version",t.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}function KG(e,t,n){const r=new URLSearchParams;r.set("access_token",e);const i=new NK({clientInfo:t,connectionSettings:new KR({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(i.reconnectReason=n.reconnectReason);const s=new jK({joinRequest:i.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(s.toBinary()))),r}class qE{constructor(){this.buffer=[],this._totalSize=0}push(t){this.buffer.push(t),this._totalSize+=t.data.byteLength}pop(){const t=this.buffer.shift();return t&&(this._totalSize-=t.data.byteLength),t}getAll(){return this.buffer.slice()}popToSequence(t){for(;this.buffer.length>0&&this.buffer[0].sequence<=t;)this.pop()}alignBufferedAmount(t){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=t)break;this.pop()}}get length(){return this.buffer.length}}class GG{constructor(t){this._map=new Map,this._lastCleanup=0,this.ttl=t}set(t,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(t,{value:n,expiresAt:i}),this}get(t){const n=this._map.get(t);if(n){if(n.expiresAt<Date.now()){this._map.delete(t);return}return n.value}}has(t){const n=this._map.get(t);return n?n.expiresAt<Date.now()?(this._map.delete(t),!1):!0:!1}delete(t){return this._map.delete(t)}clear(){this._map.clear()}cleanup(){const t=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<t&&this._map.delete(n);this._lastCleanup=t}get size(){return this.cleanup(),this._map.size}forEach(t){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&t(r.value,n,this.asValueMap())}map(t){this.cleanup();const n=[],r=this.asValueMap();for(const[i,s]of r.entries())n.push(t(s,i,r));return n}asValueMap(){const t=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&t.set(n,r.value);return t}}var Ni={},Ey={},Ty={exports:{}},HE;function Hx(){if(HE)return Ty.exports;HE=1;var e=Ty.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Ty.exports}var WE;function ZG(){return WE||(WE=1,(function(e){var t=function(l){return String(Number(l))===l?Number(l):l},n=function(l,d,h,f){if(f&&!h)d[f]=t(l[1]);else for(var p=0;p<h.length;p+=1)l[p+1]!=null&&(d[h[p]]=t(l[p+1]))},r=function(l,d,h){var f=l.name&&l.names;l.push&&!d[l.push]?d[l.push]=[]:f&&!d[l.name]&&(d[l.name]={});var p=l.push?{}:f?d[l.name]:d;n(h.match(l.reg),p,l.names,l.name),l.push&&d[l.push].push(p)},i=Hx(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(l){var d={},h=[],f=d;return l.split(/(\r\n|\r|\n)/).filter(s).forEach(function(p){var y=p[0],b=p.slice(2);y==="m"&&(h.push({rtp:[],fmtp:[]}),f=h[h.length-1]);for(var k=0;k<(i[y]||[]).length;k+=1){var x=i[y][k];if(x.reg.test(b))return r(x,f,b)}}),d.media=h,d};var o=function(l,d){var h=d.split(/=(.+)/,2);return h.length===2?l[h[0]]=t(h[1]):h.length===1&&d.length>1&&(l[h[0]]=void 0),l};e.parseParams=function(l){return l.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(l){return l.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(l){for(var d=[],h=l.split(" ").map(t),f=0;f<h.length;f+=3)d.push({component:h[f],ip:h[f+1],port:h[f+2]});return d},e.parseImageAttributes=function(l){return l.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(l){return l.split(";").map(function(d){return d.split(",").map(function(h){var f,p=!1;return h[0]!=="~"?f=t(h):(f=t(h.substring(1,h.length)),p=!0),{scid:f,paused:p}})})}})(Ey)),Ey}var Ny,KE;function JG(){if(KE)return Ny;KE=1;var e=Hx(),t=/%[sdv%]/g,n=function(o){var l=1,d=arguments,h=d.length;return o.replace(t,function(f){if(l>=h)return f;var p=d[l];switch(l+=1,f){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},r=function(o,l,d){var h=l.format instanceof Function?l.format(l.push?d:d[l.name]):l.format,f=[o+"="+h];if(l.names)for(var p=0;p<l.names.length;p+=1){var y=l.names[p];l.name?f.push(d[l.name][y]):f.push(d[l.names[p]])}else f.push(d[l.name]);return n.apply(null,f)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return Ny=function(o,l){l=l||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var d=l.outerOrder||i,h=l.innerOrder||s,f=[];return d.forEach(function(p){e[p].forEach(function(y){y.name in o&&o[y.name]!=null?f.push(r(p,y,o)):y.push in o&&o[y.push]!=null&&o[y.push].forEach(function(b){f.push(r(p,y,b))})})}),o.media.forEach(function(p){f.push(r("m",e.m[0],p)),h.forEach(function(y){e[y].forEach(function(b){b.name in p&&p[b.name]!=null?f.push(r(y,b,p)):b.push in p&&p[b.push]!=null&&p[b.push].forEach(function(k){f.push(r(y,b,k))})})})}),f.join(`\r
`)+`\r
`},Ny}var GE;function QG(){if(GE)return Ni;GE=1;var e=ZG(),t=JG(),n=Hx();return Ni.grammar=n,Ni.write=t,Ni.parse=e.parse,Ni.parseParams=e.parseParams,Ni.parseFmtpConfig=e.parseFmtpConfig,Ni.parsePayloads=e.parsePayloads,Ni.parseRemoteCandidates=e.parseRemoteCandidates,Ni.parseImageAttributes=e.parseImageAttributes,Ni.parseSimulcastStreamList=e.parseSimulcastStreamList,Ni}var qo=QG();function Wx(e,t,n){var r,i,s;t===void 0&&(t=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,l=(i=n.callback)!=null&&i,d=n.maxWait,h=Date.now(),f=[];function p(){if(d!==void 0){var b=Date.now()-h;if(b+t>=d)return d-b}return t}var y=function(){var b=[].slice.call(arguments),k=this;return new Promise(function(x,S){var E=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,h=Date.now(),!o){var P=e.apply(k,b);l&&l(P),f.forEach(function(j){return(0,j.resolve)(P)}),f=[]}},p()),E){var T=e.apply(k,b);return l&&l(T),x(T)}f.push({resolve:x,reject:S})})};return y.cancel=function(b){s!==void 0&&clearTimeout(s),f.forEach(function(k){return(0,k.reject)(b)}),f=[]},y}const YG=.7,XG=20,sl={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class ZE extends Rs.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=rt,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Wx(i=>M(this,void 0,void 0,function*(){this.emit(sl.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),XG),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=co((r=n.loggerName)!==null&&r!==void 0?r:zi.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC(),this.offerLock=new Ar}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},t.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},t.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return M(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t,n){return M(this,void 0,void 0,function*(){var r;if(t.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(t.type==="offer"){let{stereoMids:s,nackMids:o}=eZ(t);this.remoteStereoMids=s,this.remoteNackMids=o}else if(t.type==="answer"){const s=qo.parse((r=t.sdp)!==null&&r!==void 0?r:"");s.media.forEach(o=>{const l=Kx(o.mid);o.type==="audio"&&this.trackBitrates.some(d=>{if(!d.transceiver||l!=d.transceiver.mid)return!1;let h=0;if(o.rtp.some(p=>p.codec.toUpperCase()===d.codec.toUpperCase()?(h=p.payload,!0):!1),h===0)return!0;let f=!1;for(const p of o.fmtp)if(p.payload===h){p.config=p.config.split(";").filter(y=>!y.includes("maxaveragebitrate")).join(";"),d.maxbr>0&&(p.config+=";maxaveragebitrate=".concat(d.maxbr*1e3)),f=!0;break}return f||d.maxbr>0&&o.fmtp.push({payload:h,config:"maxaveragebitrate=".concat(d.maxbr*1e3)}),!0})}),i=qo.write(s)}return yield this.setMungedSDP(t,i,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(sl.NegotiationComplete),t.sdp&&qo.parse(t.sdp).media.forEach(o=>{o.type==="video"&&this.emit(sl.RTPVideoPayloadTypes,o.rtp)})),!0})}createAndSendOffer(t){return M(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(t?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(t?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const s=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const o=qo.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(o.media.forEach(l=>{QE(l),l.type==="audio"?JE(l,["all"],[]):l.type==="video"&&this.trackBitrates.some(d=>{if(!l.msid||!d.cid||!l.msid.includes(d.cid))return!1;let h=0;if(l.rtp.some(p=>p.codec.toUpperCase()===d.codec.toUpperCase()?(h=p.payload,!0):!1),h===0||(ms(d.codec)&&!tc()&&this.ensureVideoDDExtensionForSVC(l,o),d.codec!=="av1"))return!0;const f=Math.round(d.maxbr*YG);for(const p of l.fmtp)if(p.payload===h){p.config.includes("x-google-start-bitrate")||(p.config+=";x-google-start-bitrate=".concat(f));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(s,qo.write(o)),this.onOffer(s,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return M(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),r=qo.parse((t=n.sdp)!==null&&t!==void 0?t:"");return r.media.forEach(i=>{QE(i),i.type==="audio"&&JE(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,qo.write(r)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTransceiverOfKind(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new Tn("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new Tn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return M(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),r.set(l.id,l);break;case"remote-candidate":i.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const o=(t=r.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(t,n,r){return M(this,void 0,void 0,function*(){if(n){const i=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(s){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),t.sdp=i}}try{r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:t.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new z0(s)}})}ensureVideoDDExtensionForSVC(t,n){var r,i;if(!((r=t.ext)===null||r===void 0?void 0:r.some(o=>o.uri===OE))){if(this.ddExtID===0){let o=0;n.media.forEach(l=>{var d;l.type==="video"&&((d=l.ext)===null||d===void 0||d.forEach(h=>{h.value>o&&(o=h.value)}))}),this.ddExtID=o+1}(i=t.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:OE})}}}function JE(e,t,n){const r=Kx(e.mid);let i=0;e.rtp.some(s=>s.codec==="opus"?(i=s.payload,!0):!1),i>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(r)&&!e.rtcpFb.some(s=>s.payload===i&&s.type==="nack")&&e.rtcpFb.push({payload:i,type:"nack"}),(t.includes(r)||t.length===1&&t[0]==="all")&&e.fmtp.some(s=>s.payload===i?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function eZ(e){var t;const n=[],r=[],i=qo.parse((t=e.sdp)!==null&&t!==void 0?t:"");let s=0;return i.media.forEach(o=>{var l;const d=Kx(o.mid);o.type==="audio"&&(o.rtp.some(h=>h.codec==="opus"?(s=h.payload,!0):!1),!((l=o.rtcpFb)===null||l===void 0)&&l.some(h=>h.payload===s&&h.type==="nack")&&r.push(d),o.fmtp.some(h=>h.payload===s?(h.config.includes("sprop-stereo=1")&&n.push(d),!0):!1))}),{stereoMids:n,nackMids:r}}function QE(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(e.connection.version===4&&t||e.connection.version===6&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}function Kx(e){return typeof e=="number"?e.toFixed(0):e}const Y0="vp8",tZ={audioPreset:$0.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:$x.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Y0,backupCodec:!0,preConnectBuffer:!1},OA={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},MA={deviceId:{ideal:"default"},resolution:dd.h720.resolution},nZ={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DK,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},Gx={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Zt;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(Zt||(Zt={}));class rZ{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,r){var i;this.peerConnectionTimeout=Gx.peerConnectionTimeout,this.log=rt,this.updateState=()=>{var s,o;const l=this.state,d=this.requiredTransports.map(h=>h.getConnectionState());d.every(h=>h==="connected")?this.state=Zt.CONNECTED:d.some(h=>h==="failed")?this.state=Zt.FAILED:d.some(h=>h==="connecting")?this.state=Zt.CONNECTING:d.every(h=>h==="closed")?this.state=Zt.CLOSED:d.some(h=>h==="closed")?this.state=Zt.CLOSING:d.every(h=>h==="new")&&(this.state=Zt.NEW),l!==this.state&&(this.log.debug("pc state change: from ".concat(Zt[l]," to ").concat(Zt[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),(o=this.subscriber)===null||o===void 0?void 0:o.getConnectionState()))},this.log=co((i=r.loggerName)!==null&&i!==void 0?i:zi.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new ZE(t,r),n!=="publisher-only"&&(this.subscriber=new ZE(t,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,Ai.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,s)},this.subscriber.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,Ai.PUBLISHER)},this.publisher.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)},this.publisher.onOffer=(s,o)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,s,o)},this.state=Zt.NEW,this.connectionLock=new Ar,this.remoteOfferLock=new Ar}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t,n){return this.publisher.setRemoteDescription(t,n)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return M(this,void 0,void 0,function*(){var t;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),(t=this.subscriber)===null||t===void 0?void 0:t.close()]),this.updateState()})}triggerIceRestart(){return M(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return M(this,void 0,void 0,function*(){var r;n===Ai.PUBLISHER?yield this.publisher.addIceCandidate(t):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t,n){return M(this,void 0,void 0,function*(){var r,i,s;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const o=yield this.remoteOfferLock.lock();try{return(yield(i=this.subscriber)===null||i===void 0?void 0:i.setRemoteDescription(t,n))?yield(s=this.subscriber)===null||s===void 0?void 0:s.createAndSetAnswer():void 0}finally{o()}})}updateConfiguration(t,n){var r;this.publisher.setConfiguration(t),(r=this.subscriber)===null||r===void 0||r.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return M(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,t,n)))}finally{i()}})}negotiate(t){return M(this,void 0,void 0,function*(){return new Promise((n,r)=>M(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};t.signal.addEventListener("abort",s),this.publisher.once(sl.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(sl.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTransceiverOfKind(t,n){return this.publisher.addTransceiverOfKind(t,n)}getMidForReceiver(t){const r=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(i=>i.receiver===t);return r?.mid}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===Ai.PUBLISHER?this.publisher.getConnectedAddress():t===Ai.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return M(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(r.getConnectionState()!=="connected")return new Promise((d,h)=>M(s,void 0,void 0,function*(){const f=()=>{this.log.warn("abort transport connection",this.logContext),Gn.clearTimeout(p),h(new St("room connection has been cancelled",mt.Cancelled))};i?.signal.aborted&&f(),i?.signal.addEventListener("abort",f);const p=Gn.setTimeout(()=>{i?.signal.removeEventListener("abort",f),h(new St("could not establish pc connection",mt.InternalError))},o);for(;this.state!==Zt.CONNECTED;)if(yield fr(50),i?.signal.aborted){h(new St("room connection has been cancelled",mt.Cancelled));return}Gn.clearTimeout(p),i?.signal.removeEventListener("abort",f),d()}))})()})}}class Qt extends Error{constructor(t,n,r){super(n),this.code=t,this.message=YE(n,Qt.MAX_MESSAGE_BYTES),this.data=r?YE(r,Qt.MAX_DATA_BYTES):void 0}static fromProto(t){return new Qt(t.code,t.message,t.data)}toProto(){return new jR({code:this.code,message:this.message,data:this.data})}static builtIn(t,n){return new Qt(Qt.ErrorCode[t],Qt.ErrorMessage[t],n)}}Qt.MAX_MESSAGE_BYTES=256;Qt.MAX_DATA_BYTES=15360;Qt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Qt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const DA=15360;function Zx(e){return new TextEncoder().encode(e).length}function YE(e,t){if(Zx(e)<=t)return e;let n=0,r=e.length;const i=new TextEncoder;for(;n<r;){const s=Math.floor((n+r+1)/2);i.encode(e.slice(0,s)).length<=t?n=s:r=s-1}return e.slice(0,n)}const Jx=2e3;function Ip(e,t){if(!t)return 0;let n,r;return"bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),n===void 0||r===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-r)*8*1e3/(e.timestamp-t.timestamp)}const Qx=typeof MediaRecorder<"u";class iZ{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const sZ=Qx?MediaRecorder:iZ;class oZ extends sZ{constructor(t,n){if(!Qx)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([t.mediaStreamTrack]),n);let r,i;const s=()=>i===void 0,o=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",l),i?.close(),i=void 0},l=d=>{i?.error(d),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",l),i=void 0};this.byteStream=new ReadableStream({start:d=>{i=d,r=h=>M(this,void 0,void 0,function*(){let f;if(h.data.arrayBuffer){const p=yield h.data.arrayBuffer();f=new Uint8Array(p)}else if(h.data.byteArray)f=h.data.byteArray;else throw new Error("no data available!");s()||d.enqueue(f)}),this.addEventListener("dataavailable",r)},cancel:()=>{o()}}),this.addEventListener("stop",o),this.addEventListener("error",l)}}function aZ(){return Qx}const cZ=1e3,lZ=1e4;class LA extends K{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(t,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Wx(()=>M(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>M(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Te.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Ar,this.pauseUpstreamLock=new Ar,this.trackChangeLock=new Ar,this.trackChangeLock.lock().then(o=>M(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(t,!0)}finally{o()}})),this._constraints=t.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==K.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(t,n){return M(this,void 0,void 0,function*(){var r;if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{il(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let i;if(this.processor&&t){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Gc(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{Gc(i??t,s)}))})}waitForDimensions(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cZ;return(function*(){var r;if(t.kind===K.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=hr())===null||r===void 0?void 0:r.os)==="iOS"&&(yield fr(10));const i=Date.now();for(;Date.now()-i<n;){const s=t.dimensions;if(s)return s;yield fr(50)}throw new Qs("unable to get track dimensions after timeout")})()})}setDeviceId(t){return M(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===na(t)||(this._constraints.deviceId=t,this.isMuted)?!0:(yield this.restartTrack(),na(t)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(t.source===K.Source.ScreenShare)return;const{deviceId:r,groupId:i}=t._mediaStreamTrack.getSettings(),s=t.kind===K.Kind.Audio?"audioinput":"videoinput";return n?Un.getInstance().normalizeDeviceId(s,r,i):r})()})}mute(){return M(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return M(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return M(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Qs("unable to replace an unpublished track");let i,s;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,s=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),s&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(t){return M(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{t||(t=this._constraints);const{deviceId:r,facingMode:i}=t,s=LK(t,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const o={audio:!1,video:!1};this.kind===K.Kind.Video?o.video=r||i?{deviceId:r,facingMode:i}:!0:o.audio=r?Object.assign({deviceId:r},s):!0,this.attachedElements.forEach(h=>{il(this.mediaStreamTrack,h)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return this.kind===K.Kind.Video&&(yield d.applyConstraints(s)),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=t,this.emit(Te.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?Te.Muted:Te.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return M(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),TA()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return M(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Te.UpstreamPaused,this);const r=hr();if(r?.name==="Safari"&&$i(r.version,"12.0")<0)throw new zx("pauseUpstream is not supported on Safari < 12.");((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return M(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Te.UpstreamResumed,this),((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return M(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return M(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var s;const o=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const l=document.createElement(r.kind),d={kind:r.kind,track:r._mediaStreamTrack,element:l,audioContext:r.audioContext};if(yield n.init(d),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Gc(r._mediaStreamTrack,l),l.muted=!0,l.play().catch(h=>{h instanceof DOMException&&h.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:h})),setTimeout(()=>{l.play().catch(f=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:f}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:h}))}),r.processor=n,r.processorElement=l,r.processor.processedTrack){for(const h of r.attachedElements)h!==r.processorElement&&i&&(il(r._mediaStreamTrack,h),Gc(r.processor.processedTrack,h));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(Te.TrackProcessorUpdate,r.processor)}finally{o()}})()})}getProcessor(){return this.processor}stopProcessor(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const r=yield t.trackChangeLock.lock();try{yield t.internalStopProcessor(n)}finally{r()}})()})}internalStopProcessor(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var r,i;t.processor&&(t.log.debug("stopping processor",t.logContext),(r=t.processor.processedTrack)===null||r===void 0||r.stop(),yield t.processor.destroy(),t.processor=void 0,n||((i=t.processorElement)===null||i===void 0||i.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(Te.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!aZ()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new oZ(this,{mimeType:n})}this.localTrackRecorder.start(t),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},lZ)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.byteStream}getPreConnectBufferMimeType(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.mimeType}}class jm extends LA{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(t,K.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>M(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}o&&this.prevStats&&(this._currentBitrate=Ip(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Te.AudioTrackFeatureUpdate,this,Fn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Te.AudioTrackFeatureUpdate,this,Fn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===K.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==na(this._constraints.deviceId);return this.source===K.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return M(this,void 0,void 0,function*(){let n;if(t){const r=Vx({audio:t});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return M(this,void 0,void 0,function*(){const r=yield n.restart.call(this,t);return this.checkForSilence(),r})}startMonitor(){jr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Jx)))}setProcessor(t){return M(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!Es()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(i),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Te.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return M(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return M(this,void 0,void 0,function*(){const t=yield _A(this);return t&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(Te.AudioSilenceDetected)),t})}}function uZ(e,t,n){switch(e.kind){case"audio":return new jm(e,t,!1,void 0,n);case"video":return new Pm(e,t,!1,n);default:throw new Qs("unsupported track type: ".concat(e.kind))}}const dZ=Object.values(dd),hZ=Object.values(V0),fZ=Object.values($x),mZ=[dd.h180,dd.h360],pZ=[V0.h180,V0.h360],gZ=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var r,i;return new jt(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=e.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,e.encoding.priority)}),X0=["q","h","f"];function eb(e,t,n,r){var i,s;let o=r?.videoEncoding;e&&(o=r?.screenShareEncoding);const l=r?.simulcast,d=r?.scalabilityMode,h=r?.videoCodec;if(!o&&!l&&!d||!t||!n)return[{}];o||(o=yZ(e,t,n,h),rt.debug("using video encoding",o));const f=o.maxFramerate,p=new jt(t,n,o.maxBitrate,o.maxFramerate,o.priority);if(d&&ms(h)){const k=new FA(d),x=[];if(k.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const S=hr();if(hd()||Es()||S?.name==="Chrome"&&$i(S?.version,"113")<0){const E=k.suffix=="h"?2:3,T=vG(S);for(let P=0;P<k.spatial;P+=1)x.push({rid:X0[2-P],maxBitrate:o.maxBitrate/Math.pow(E,P),maxFramerate:p.encoding.maxFramerate,scaleResolutionDownBy:T?Math.pow(2,P):void 0});x[0].scalabilityMode=d}else x.push({maxBitrate:o.maxBitrate,maxFramerate:p.encoding.maxFramerate,scalabilityMode:d});return p.encoding.priority&&(x[0].priority=p.encoding.priority,x[0].networkPriority=p.encoding.priority),rt.debug("using svc encoding",{encodings:x}),x}if(!l)return[o];let y=[];e?y=(i=eT(r?.screenShareSimulcastLayers))!==null&&i!==void 0?i:XE(e,p):y=(s=eT(r?.videoSimulcastLayers))!==null&&s!==void 0?s:XE(e,p);let b;if(y.length>0){const k=y[0];y.length>1&&([,b]=y);const x=Math.max(t,n);if(x>=960&&b)return jy(t,n,[k,b,p],f);if(x>=480)return jy(t,n,[k,p],f)}return jy(t,n,[p])}function vZ(e,t,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&rt.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const l=e.mediaStreamTrack.getSettings(),d=(r=l.width)!==null&&r!==void 0?r:(i=e.dimensions)===null||i===void 0?void 0:i.width,h=(s=l.height)!==null&&s!==void 0?s:(o=e.dimensions)===null||o===void 0?void 0:o.height;return e.source===K.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),eb(e.source===K.Source.ScreenShare,d,h,n)}function yZ(e,t,n,r){const i=bZ(e,t,n);let{encoding:s}=i[0];const o=Math.max(t,n);for(let l=0;l<i.length;l+=1){const d=i[l];if(s=d.encoding,d.width>=o)break}if(r)switch(r){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function bZ(e,t,n){if(e)return fZ;const r=t>n?t/n:n/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?dZ:hZ}function XE(e,t){if(e)return gZ(t);const{width:n,height:r}=t,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?mZ:pZ}function jy(e,t,n,r){const i=[];if(n.forEach((s,o)=>{if(o>=X0.length)return;const l=Math.min(e,t),h={rid:X0[o],scaleResolutionDownBy:Math.max(1,l/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},f=r&&s.encoding.maxFramerate?Math.min(r,s.encoding.maxFramerate):s.encoding.maxFramerate;f&&(h.maxFramerate=f);const p=ec()||o===0;s.encoding.priority&&p&&(h.priority=s.encoding.priority,h.networkPriority=s.encoding.priority),i.push(h)}),Es()&&jA()==="ios"){let s;i.forEach(l=>{s?l.maxFramerate&&l.maxFramerate>s&&(s=l.maxFramerate):s=l.maxFramerate});let o=!0;i.forEach(l=>{var d;l.maxFramerate!=s&&(o&&(o=!1,rt.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),rt.info('Setting framerate of encoding "'.concat((d=l.rid)!==null&&d!==void 0?d:"",'" to ').concat(s)),l.maxFramerate=s)})}return i}function eT(e){if(e)return e.sort((t,n)=>{const{encoding:r}=t,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class FA{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function xZ(e){return e.source===K.Source.ScreenShare||e.constraints.height&&na(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const wZ=5e3;class Pm extends LA{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(t,K.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>M(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const o=new Map(s.map(d=>[d.rid,d])),l=s.some(d=>d.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(Te.CpuConstrained)),this.prevStats){let d=0;o.forEach((h,f)=>{var p;const y=(p=this.prevStats)===null||p===void 0?void 0:p.get(f);d+=Ip(h,y)}),this._currentBitrate=d}this.prevStats=o}),this.senderLock=new Ar}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!jr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Jx))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return M(this,void 0,void 0,function*(){var n,r,i,s,o;yield t.pauseUpstream.call(this);try{for(var l=!0,d=Js(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;l=!0)s=h.value,l=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(f){r={error:f}}finally{try{!l&&!n&&(i=d.return)&&(yield i.call(d))}finally{if(r)throw r.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return M(this,void 0,void 0,function*(){var n,r,i,s,o;yield t.resumeUpstream.call(this);try{for(var l=!0,d=Js(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;l=!0){s=h.value,l=!1;const f=s;yield(o=f.sender)===null||o===void 0?void 0:o.replaceTrack(f.mediaStreamTrack)}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=d.return)&&(yield i.call(d))}finally{if(r)throw r.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===K.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===K.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return M(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},l=r.get(i.remoteId);l&&(o.jitter=l.jitter,o.packetsLost=l.packetsLost,o.roundTripTime=l.roundTripTime),n.push(o)}}),n.sort((i,s)=>{var o,l;return((o=s.frameWidth)!==null&&o!==void 0?o:0)-((l=i.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(t){const n=[];for(let r=Hr.LOW;r<=Hr.HIGH;r+=1)n.push(new Lx({quality:r,enabled:r<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(ms(this.codec),n)}restartTrack(t){return M(this,void 0,void 0,function*(){var n,r,i,s,o;let l;if(t){const p=Vx({video:t});typeof p.video!="boolean"&&(l=p.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var d=!0,h=Js(this.simulcastCodecs.values()),f;f=yield h.next(),n=f.done,!n;d=!0){s=f.value,d=!1;const p=s;p.sender&&((o=p.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(p.mediaStreamTrack=this.mediaStreamTrack.clone(),yield p.sender.replaceTrack(p.mediaStreamTrack))}}catch(p){r={error:p}}finally{try{!d&&!n&&(i=h.return)&&(yield i.call(h))}finally{if(r)throw r.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return M(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o,l,d,h,f,p;if(yield n.setProcessor.call(i,r,s),!((f=i.processor)===null||f===void 0)&&f.processedTrack)try{for(var y=!0,b=Js(i.simulcastCodecs.values()),k;k=yield b.next(),o=k.done,!o;y=!0)h=k.value,y=!1,yield(p=h.sender)===null||p===void 0?void 0:p.replaceTrack(i.processor.processedTrack)}catch(x){l={error:x}}finally{try{!y&&!o&&(d=b.return)&&(yield d.call(b))}finally{if(l)throw l.error}}})()})}setDegradationPreference(t){return M(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,r),r}setSimulcastTrackSender(t,n){const r=this.simulcastCodecs.get(t);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},wZ))}setPublishingCodecs(t){return M(this,void 0,void 0,function*(){var n,r,i,s,o,l,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(ms(t[0].codec),t[0].qualities),[];this.subscribedCodecs=t;const h=[];try{for(n=!0,r=Js(t);i=yield r.next(),s=i.done,!s;n=!0){d=i.value,n=!1;const f=d;if(!this.codec||this.codec===f.codec)yield this.setPublishingLayers(ms(f.codec),f.qualities);else{const p=this.simulcastCodecs.get(f.codec);if(this.log.debug("try setPublishingCodec for ".concat(f.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const y of f.qualities)if(y.enabled){h.push(f.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(f.codec),this.logContext),yield tT(p.sender,p.encodings,f.qualities,this.senderLock,ms(f.codec),this.log,this.logContext))}}}catch(f){o={error:f}}finally{try{!n&&!s&&(l=r.return)&&(yield l.call(r))}finally{if(o)throw o.error}}return h})}setPublishingLayers(t,n){return M(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield tT(this.sender,this.encodings,n,this.senderLock,t,this.log,this.logContext))})}prioritizePerformance(){return M(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const t=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var s;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:i===0&&ms(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{t()}})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return M(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),TA()&&this.isInBackground&&this.source===K.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function tT(e,t,n,r,i,s,o){return M(this,void 0,void 0,function*(){const l=yield r.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:e,qualities:n,senderEncodings:t}));try{const d=e.getParameters(),{encodings:h}=d;if(!h)return;if(h.length!==t.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:h,senderEncodings:t}));return}let f=!1;!1&&h[0].scalabilityMode||(i&&n.some(b=>b.enabled)&&n.forEach(b=>b.enabled=!0),h.forEach((y,b)=>{var k;let x=(k=y.rid)!==null&&k!==void 0?k:"";x===""&&(x="q");const S=UA(x),E=n.find(T=>T.quality===S);E&&y.active!==E.enabled&&(f=!0,y.active=E.enabled,s.debug("setting layer ".concat(E.quality," to ").concat(y.active?"enabled":"disabled"),o),ec()&&(E.enabled?(y.scaleResolutionDownBy=t[b].scaleResolutionDownBy,y.maxBitrate=t[b].maxBitrate,y.maxFrameRate=t[b].maxFrameRate):(y.scaleResolutionDownBy=4,y.maxBitrate=10,y.maxFrameRate=2)))})),f&&(d.encodings=h,s.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:d.encodings})),yield e.setParameters(d))}finally{l()}})}function UA(e){switch(e){case"f":return Hr.HIGH;case"h":return Hr.MEDIUM;case"q":return Hr.LOW;default:return Hr.HIGH}}function nT(e,t,n,r){if(!n)return[new ea({quality:Hr.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new FA(i),o=[],l=s.suffix=="h"?1.5:2,d=s.suffix=="h"?2:3;for(let h=0;h<s.spatial;h+=1)o.push(new ea({quality:Math.min(Hr.HIGH,s.spatial-1)-h,width:Math.ceil(e/Math.pow(l,h)),height:Math.ceil(t/Math.pow(l,h)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,h)):0,ssrc:0}));return o}return n.map(i=>{var s,o,l;const d=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let h=UA((o=i.rid)!==null&&o!==void 0?o:"");return new ea({quality:h,width:Math.ceil(e/d),height:Math.ceil(t/d),bitrate:(l=i.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const rT="_lossy",iT="_reliable",kZ=2*1e3,Py="leave-reconnect",SZ=3e4;var ai;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(ai||(ai={}));class CZ extends Rs.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=Gx.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=ai.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=rt,this.reliableDataSequence=1,this.reliableMessageBuffer=new qE,this.reliableReceivedState=new GG(SZ),this.midToTrackId={},this.handleDataChannel=r=>M(this,[r],void 0,function(i){var s=this;let{channel:o}=i;return(function*(){if(o){if(o.label===iT)s.reliableDCSub=o;else if(o.label===rT)s.lossyDCSub=o;else return;s.log.debug("on data channel ".concat(o.id,", ").concat(o.label),s.logContext),o.onmessage=s.handleDataMessage}})()}),this.handleDataMessage=r=>M(this,void 0,void 0,function*(){var i,s,o,l,d;const h=yield this.dataProcessLock.lock();try{let f;if(r.data instanceof ArrayBuffer)f=r.data;else if(r.data instanceof Blob)f=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const p=dr.fromBinary(new Uint8Array(f));if(p.sequence>0&&p.participantSid!==""){const y=this.reliableReceivedState.get(p.participantSid);if(y&&p.sequence<=y)return;this.reliableReceivedState.set(p.participantSid,p.sequence)}if(((i=p.value)===null||i===void 0?void 0:i.case)==="speaker")this.emit(je.ActiveSpeakersUpdate,p.value.value.speakers);else if(((s=p.value)===null||s===void 0?void 0:s.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const y=yield(o=this.e2eeManager)===null||o===void 0?void 0:o.handleEncryptedData(p.value.value.encryptedValue,p.value.value.iv,p.participantIdentity,p.value.value.keyIndex),b=ER.fromBinary(y.payload),k=new dr({value:b.value,participantIdentity:p.participantIdentity,participantSid:p.participantSid});((l=k.value)===null||l===void 0?void 0:l.case)==="user"&&sT(k,k.value.value),this.emit(je.DataPacketReceived,k,p.value.value.encryptionType)}else((d=p.value)===null||d===void 0?void 0:d.case)==="user"&&sT(p,p.value.value),this.emit(je.DataPacketReceived,p,jn.NONE)}finally{h()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?at.LOSSY:at.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(je.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(l===null){s(o);return}r===Py&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Gn.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===ai.Connected&&r();const s=()=>{this.off(je.Disconnected,o),r()},o=()=>{this.off(je.Restarted,s),i()};this.once(je.Restarted,s),this.once(je.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(je.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return r===at.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(i.bufferedAmount),i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Ht.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Aa.RR_SIGNAL_DISCONNECTED))},this.log=co((n=t.loggerName)!==null&&n!==void 0?n:zi.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new qx(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new Ar,this.dataProcessLock=new Ar,this.dcBufferStatus=new Map([[at.LOSSY,!0],[at.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(je.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(je.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(je.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(je.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(je.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(je.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(je.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(je.SignalRequestResponse,r)}get logContext(){var t,n,r,i,s,o;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity,pID:this.participantSid}}join(t,n,r,i){return M(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(t,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate().catch(o=>{rt.error(o,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=s.clientConfiguration,this.emit(je.SignalConnected,s),s}catch(s){if(s instanceof St&&s.reason===mt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,r,i);throw s}})}close(){return M(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(je.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return M(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new qE,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return M(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new Qs("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],r(new St("publication of local track timed out, no response from server",mt.Timeout))},1e4);this.pendingTrackResolvers[t.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return M(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return M(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==Zt.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(t);this.pcManager=new rZ(i,this.options.singlePeerConnection?"publisher-only":t.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(je.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,o)=>{this.client.sendIceCandidate(s,o)},this.pcManager.onPublisherOffer=(s,o)=>{this.client.sendOffer(s,o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,o,l)=>M(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),s===Zt.CONNECTED){const f=this.pcState===ai.New;this.pcState=ai.Connected,f&&this.emit(je.Connected,t)}else s===Zt.FAILED&&(this.pcState===ai.Connected||this.pcState===ai.Reconnecting)&&(this.pcState=ai.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?Aa.RR_SUBSCRIBER_FAILED:Aa.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===Ht.RECONNECTING,h=[Zt.FAILED,Zt.CLOSING,Zt.CLOSED].includes(s);d&&h&&!this._isClosed&&this.emit(je.Offline)}),this.pcManager.onTrack=s=>{s.streams.length!==0&&this.emit(je.MediaTrackAdded,s.track,s.streams[0],s.receiver)},EZ((r=t.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(t,n,r)=>M(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,midToTrackId:r})),this.midToTrackId=r,yield this.pcManager.setPublisherAnswer(t,n))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=(t,n,r)=>M(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=r;const i=yield this.pcManager.createSubscriberAnswerFromOffer(t,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:r}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],r(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(je.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(je.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(je.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(je.SubscribedQualityUpdate,t)},this.client.onRoomMoved=t=>{var n;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=t.room),this.emit(je.RoomMoved,t)},this.client.onMediaSectionsRequirement=t=>{var n,r;const i={direction:"recvonly"};for(let s=0;s<t.numAudios;s++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",i);for(let s=0;s<t.numVideos;s++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",i);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",Aa.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t?.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(t.regions)),t.action){case nl.DISCONNECT:this.emit(je.Disconnected,t?.reason),this.close();break;case nl.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Py);break;case nl.RESUME:this.handleDisconnect(Py)}}}makeRTCConfiguration(t){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),t.iceServers&&!r.iceServers){const i=[];t.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return t.clientConfiguration&&t.clientConfiguration.forceRelay===ad.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(rT,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(iT,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,r){return M(this,void 0,void 0,function*(){if(q0())return yield this.createTransceiverRTCRtpSender(t,n,r);if(H0())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new Tn("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,r,i){return M(this,void 0,void 0,function*(){if(q0())return this.createSimulcastTransceiverSender(t,n,r,i);if(H0())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new Tn("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,r){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tn("publisher is closed");const i=[];t.mediaStream&&i.push(t.mediaStream),fa(t)&&(t.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(t,n,r,i){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tn("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return t.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(t){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tn("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return M(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){rt.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===ad.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Zt.NEW)===Zt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof Tn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof Vc||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",Aa.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(je.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return M(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new Tn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(je.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Vc;s=yield this.join(t??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof St&&o.reason===mt.NotAllowed?new Tn("could not reconnect, token might be expired"):new Vc}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(je.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==Ht.CONNECTED)throw new Vc("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(je.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(t){return M(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Tn("could not reconnect, url or token not saved");if(!this.pcManager)throw new Tn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(je.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof St&&i.reason===mt.NotAllowed?new Tn("could not reconnect, token might be expired"):i instanceof St&&i.reason===mt.LeaveRequest?i:new Vc(s)}if(this.emit(je.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Ht.CONNECTED)throw new Vc("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r?.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(je.Resumed)})}waitForPCInitialConnection(t,n){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return M(this,void 0,void 0,function*(){this.pcState=ai.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield fr(kZ),!this.pcManager)throw new Tn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=ai.Connected}catch(t){throw this.pcState=ai.Disconnected,new St("could not establish PC connection, ".concat(t.message),mt.InternalError)}})}publishRpcResponse(t,n,r,i){return M(this,void 0,void 0,function*(){const s=new dr({destinationIdentities:[t],kind:at.RELIABLE,value:{case:"rpcResponse",value:new Ix({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(s,at.RELIABLE)})}publishRpcAck(t,n){return M(this,void 0,void 0,function*(){const r=new dr({destinationIdentities:[t],kind:at.RELIABLE,value:{case:"rpcAck",value:new Ax({requestId:n})}});yield this.sendDataPacket(r,at.RELIABLE)})}sendDataPacket(t,n){return M(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const s=YK(t);if(s){const o=yield this.e2eeManager.encryptData(s.toBinary());t.value={case:"encryptedPacket",value:new CR({encryptedValue:o.payload,iv:o.iv,keyIndex:o.keyIndex})}}}n===at.RELIABLE&&(t.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=t.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===at.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:t.sequence}),this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(t){return M(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(at.RELIABLE);const n=this.dataChannelForKind(at.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(t),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(at.RELIABLE)})}waitForBufferStatusLow(t){return new Promise((n,r)=>M(this,void 0,void 0,function*(){if(this.isBufferStatusLow(t))n();else{const i=()=>r("Engine closed");for(this.once(je.Closing,i);!this.dcBufferStatus.get(t);)yield fr(10);this.off(je.Closing,i),n()}}))}ensureDataTransportConnected(t){return M(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var s;if(!r.pcManager)throw new Tn("PC manager is closed");const o=i?r.pcManager.subscriber:r.pcManager.publisher,l=i?"Subscriber":"Publisher";if(!o)throw new St("".concat(l," connection not set"),mt.InternalError);let d=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),d=!0),!d&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&r.negotiate().catch(p=>{rt.error(p,r.logContext)});const h=r.dataChannelForKind(n,i);if(h?.readyState==="open")return;const f=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<f;){if(o.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield fr(50)}throw new St("could not establish ".concat(l," connection, state: ").concat(o.getICEConnectionState()),mt.InternalError)})()})}ensurePublisherConnected(t){return M(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Zt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return M(this,void 0,void 0,function*(){return new Promise((t,n)=>M(this,void 0,void 0,function*(){if(!this.pcManager){n(new z0("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(je.Closing,i),this.pcManager.publisher.once(sl.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(l=>{const d=l.codec.toLowerCase();kG(d)&&o.set(l.payload,d)}),this.emit(je.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),t()}catch(s){s instanceof z0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Aa.RR_UNKNOWN),n(s)}finally{this.off(je.Closing,i)}}))})}dataChannelForKind(t,n){if(n){if(t===at.LOSSY)return this.lossyDCSub;if(t===at.RELIABLE)return this.reliableDCSub}else{if(t===at.LOSSY)return this.lossyDC;if(t===at.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var r,i,s,o;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const l=this.pcManager.publisher.getLocalDescription(),d=this.pcManager.publisher.getRemoteDescription(),h=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),f=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getLocalDescription(),p=(o=(s=this.signalOpts)===null||s===void 0?void 0:s.autoSubscribe)!==null&&o!==void 0?o:!0,y=new Array,b=new Array;t.forEach(k=>{k.isDesired!==p&&y.push(k.trackSid),k.isEnabled||b.push(k.trackSid)}),this.client.sendSyncState(new Fx({answer:this.options.singlePeerConnection?d?Zc({sdp:d.sdp,type:d.type}):void 0:f?Zc({sdp:f.sdp,type:f.type}):void 0,offer:this.options.singlePeerConnection?l?Zc({sdp:l.sdp,type:l.type}):void 0:h?Zc({sdp:h.sdp,type:h.type}):void 0,subscription:new _p({trackSids:y,subscribe:!p,participantTracks:[]}),publishTracks:RG(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:b,datachannelReceiveStates:this.reliableReceivedState.map((k,x)=>new qR({publisherSid:x,lastSeq:k}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(r,i)=>{r?.id!==void 0&&r.id!==null&&t.push(new HR({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(at.LOSSY),Ai.PUBLISHER),n(this.dataChannelForKind(at.RELIABLE),Ai.PUBLISHER),n(this.dataChannelForKind(at.LOSSY,!0),Ai.SUBSCRIBER),n(this.dataChannelForKind(at.RELIABLE,!0),Ai.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&Gn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){jr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){jr()&&window.removeEventListener("online",this.handleBrowserOnLine)}getTrackIdForReceiver(t){var n;const r=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(t);if(r){const i=Object.entries(this.midToTrackId).find(s=>{let[o]=s;return o===r});if(i)return i[1]}}}class Vc extends Error{}function EZ(e){return e!==void 0&&e>13}function sT(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const r=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=r,t.destinationIdentities=r}class tb{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return K0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return M(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),rt.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return M(this,void 0,void 0,function*(){const n=yield fetch("".concat(TZ(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new St("Could not fetch region settings: ".concat(n.statusText),n.status===401?mt.NotAllowed:mt.InternalError,n.status)})}setServerReportedRegions(t){this.regionSettings=t,this.lastUpdateAt=Date.now()}}function TZ(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class BA{get info(){return this._info}validateBytesReceived(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(t&&this.bytesReceived<this.totalByteSize)throw new ci("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),lr.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new ci("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),lr.LengthExceeded)}}constructor(t,n,r,i){this.reader=n,this.totalByteSize=r,this._info=t,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=i}}class NZ extends BA{handleChunkReceived(t){var n;this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const t=this.reader.getReader();let n=new di,r=null,i=null;if(this.signal){const o=this.signal;i=()=>{var l;(l=n.reject)===null||l===void 0||l.call(n,o.reason)},o.addEventListener("abort",i),r=o}const s=()=>{t.releaseLock(),r&&i&&r.removeEventListener("abort",i),this.signal=void 0};return{next:()=>M(this,void 0,void 0,function*(){var o,l;try{const{done:d,value:h}=yield Promise.race([t.read(),n.promise,(l=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&l!==void 0?l:new Promise(()=>{})]);return d?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(h),{done:!1,value:h.content})}catch(d){throw s(),d}}),return(){return M(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,i,s,o;let l=new Set;const d=n.signal?t.withAbortSignal(n.signal):t;try{for(var h=!0,f=Js(d),p;p=yield f.next(),r=p.done,!r;h=!0){o=p.value,h=!1;const y=o;l.add(y)}}catch(y){i={error:y}}finally{try{!h&&!r&&(s=f.return)&&(yield s.call(f))}finally{if(i)throw i.error}}return Array.from(l)})()})}}class jZ extends BA{constructor(t,n,r,i){super(t,n,r,i),this.receivedChunks=new Map}handleChunkReceived(t){var n;const r=qf(t.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>t.version)return;this.receivedChunks.set(r,t),this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const t=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new di,i=null,s=null;if(this.signal){const l=this.signal;s=()=>{var d;(d=r.reject)===null||d===void 0||d.call(r,l.reason)},l.addEventListener("abort",s),i=l}const o=()=>{t.releaseLock(),i&&s&&i.removeEventListener("abort",s),this.signal=void 0};return{next:()=>M(this,void 0,void 0,function*(){var l,d;try{const{done:h,value:f}=yield Promise.race([t.read(),r.promise,(d=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&d!==void 0?d:new Promise(()=>{})]);if(h)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(f);let p;try{p=n.decode(f.content)}catch(y){throw new ci("Cannot decode datastream chunk ".concat(f.chunkIndex," as text: ").concat(y),lr.DecodeFailed)}return{done:!1,value:p}}}catch(h){throw o(),h}}),return(){return M(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return M(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,i,s,o;let l="";const d=n.signal?t.withAbortSignal(n.signal):t;try{for(var h=!0,f=Js(d),p;p=yield f.next(),r=p.done,!r;h=!0)o=p.value,h=!1,l+=o}catch(y){i={error:y}}finally{try{!h&&!r&&(s=f.return)&&(yield s.call(f))}finally{if(i)throw i.error}}return l})()})}}class PZ{constructor(){this.log=rt,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(t,n){if(this.textStreamHandlers.has(t))throw new ci('A text stream handler for topic "'.concat(t,'" has already been set.'),lr.HandlerAlreadyRegistered);this.textStreamHandlers.set(t,n)}unregisterTextStreamHandler(t){this.textStreamHandlers.delete(t)}registerByteStreamHandler(t,n){if(this.byteStreamHandlers.has(t))throw new ci('A byte stream handler for topic "'.concat(t,'" has already been set.'),lr.HandlerAlreadyRegistered);this.byteStreamHandlers.set(t,n)}unregisterByteStreamHandler(t){this.byteStreamHandlers.delete(t)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(t){var n,r,i,s;const o=Array.from(this.textStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===t),l=Array.from(this.byteStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===t);if(o.length>0||l.length>0){const d=new ci("Participant ".concat(t," unexpectedly disconnected in the middle of sending data"),lr.AbnormalEnd);for(const[h,f]of l)(r=(n=f.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,d),this.byteStreamControllers.delete(h);for(const[h,f]of o)(s=(i=f.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(i,d),this.textStreamControllers.delete(h)}}handleDataStreamPacket(t,n){return M(this,void 0,void 0,function*(){switch(t.value.case){case"streamHeader":return this.handleStreamHeader(t.value.value,t.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(t.value.value,n);case"streamTrailer":return this.handleStreamTrailer(t.value.value,n);default:throw new Error('DataPacket of value "'.concat(t.value.case,'" is not data stream related!'))}})}handleStreamHeader(t,n,r){return M(this,void 0,void 0,function*(){var i;if(t.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(t.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",t.topic);return}let o;const l=new di;l.promise.catch(f=>{this.log.error(f)});const d={id:t.streamId,name:(i=t.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:qf(t.timestamp),attributes:t.attributes,encryptionType:r},h=new ReadableStream({start:f=>{if(o=f,this.textStreamControllers.has(t.streamId))throw new ci("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),lr.AlreadyOpened);this.byteStreamControllers.set(t.streamId,{info:d,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});s(new NZ(d,h,qf(t.totalLength),l),{identity:n})}else if(t.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(t.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",t.topic);return}let o;const l=new di;l.promise.catch(f=>{this.log.error(f)});const d={id:t.streamId,mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Number(t.timestamp),attributes:t.attributes,encryptionType:r},h=new ReadableStream({start:f=>{if(o=f,this.textStreamControllers.has(t.streamId))throw new ci("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),lr.AlreadyOpened);this.textStreamControllers.set(t.streamId,{info:d,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});s(new jZ(d,h,qf(t.totalLength),l),{identity:n})}})}handleStreamChunk(t,n){const r=this.byteStreamControllers.get(t.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new ci("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),lr.EncryptionTypeMismatch)),this.byteStreamControllers.delete(t.streamId)):t.content.length>0&&r.controller.enqueue(t));const i=this.textStreamControllers.get(t.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new ci("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),lr.EncryptionTypeMismatch)),this.textStreamControllers.delete(t.streamId)):t.content.length>0&&i.controller.enqueue(t))}handleStreamTrailer(t,n){const r=this.textStreamControllers.get(t.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new ci("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),lr.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),t.attributes),r.controller.close(),this.textStreamControllers.delete(t.streamId)));const i=this.byteStreamControllers.get(t.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new ci("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),lr.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),t.attributes),i.controller.close()),this.byteStreamControllers.delete(t.streamId))}}class zA{constructor(t,n,r){this.writableStream=t,this.defaultWriter=t.getWriter(),this.onClose=r,this.info=n}write(t){return this.defaultWriter.write(t)}close(){return M(this,void 0,void 0,function*(){var t;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(t=this.onClose)===null||t===void 0||t.call(this)})}}class _Z extends zA{}class RZ extends zA{}const oT=15e3;class AZ{constructor(t,n){this.engine=t,this.log=n}setupEngine(t){this.engine=t}sendText(t,n){return M(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),o=new TextEncoder().encode(t).byteLength,l=(r=n?.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),d=new Array(l?l.length+1:1).fill(0),h=(p,y)=>{var b;d[y]=p;const k=d.reduce((x,S)=>x+S,0);(b=n?.onProgress)===null||b===void 0||b.call(n,k)},f=yield this.streamText({streamId:i,totalSize:o,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield f.write(t),h(1,0),yield f.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((p,y)=>M(this,void 0,void 0,function*(){return this._sendFile(l[y],p,{topic:n.topic,mimeType:p.type,onProgress:b=>{h(b,y+1)}})})))),f.info})}streamText(t){return M(this,void 0,void 0,function*(){var n,r,i;const s=(n=t?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(r=t?.topic)!==null&&r!==void 0?r:"",size:t?.totalSize,attributes:t?.attributes,encryptionType:!((i=this.engine.e2eeManager)===null||i===void 0)&&i.isDataChannelEncryptionEnabled?jn.GCM:jn.NONE},l=new Em({streamId:s,mimeType:o.mimeType,topic:o.topic,timestamp:Ia(o.timestamp),totalLength:Ia(t?.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new DR({version:t?.version,attachedStreamIds:t?.attachedStreamIds,replyToStreamId:t?.replyToStreamId,operationType:t?.type==="update"?_0.UPDATE:_0.CREATE})}}),d=t?.destinationIdentities,h=new dr({destinationIdentities:d,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(h,at.RELIABLE);let f=0;const p=this.engine,y=new WritableStream({write(x){return M(this,void 0,void 0,function*(){for(const S of jG(x,oT)){yield p.waitForBufferStatusLow(at.RELIABLE);const E=new Tm({content:S,streamId:s,chunkIndex:Ia(f)}),T=new dr({destinationIdentities:d,value:{case:"streamChunk",value:E}});yield p.sendDataPacket(T,at.RELIABLE),f+=1}})},close(){return M(this,void 0,void 0,function*(){const x=new Nm({streamId:s}),S=new dr({destinationIdentities:d,value:{case:"streamTrailer",value:x}});yield p.sendDataPacket(S,at.RELIABLE)})},abort(x){console.log("Sink error:",x)}});let b=()=>M(this,void 0,void 0,function*(){yield k.close()});p.once(je.Closing,b);const k=new _Z(y,o,()=>this.engine.off(je.Closing,b));return k})}sendFile(t,n){return M(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,t,n),{id:r}})}_sendFile(t,n,r){return M(this,void 0,void 0,function*(){var i;const s=yield this.streamBytes({streamId:t,totalSize:n.size,name:n.name,mimeType:(i=r?.mimeType)!==null&&i!==void 0?i:n.type,topic:r?.topic,destinationIdentities:r?.destinationIdentities}),o=n.stream().getReader();for(;;){const{done:l,value:d}=yield o.read();if(l)break;yield s.write(d)}return yield s.close(),s.info})}streamBytes(t){return M(this,void 0,void 0,function*(){var n,r,i,s,o,l;const d=(n=t?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),h=t?.destinationIdentities,f={id:d,mimeType:(r=t?.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=t?.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:t?.attributes,size:t?.totalSize,name:(s=t?.name)!==null&&s!==void 0?s:"unknown",encryptionType:!((o=this.engine.e2eeManager)===null||o===void 0)&&o.isDataChannelEncryptionEnabled?jn.GCM:jn.NONE},p=new Em({totalLength:Ia((l=f.size)!==null&&l!==void 0?l:0),mimeType:f.mimeType,streamId:d,topic:f.topic,timestamp:Ia(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new LR({name:f.name})}}),y=new dr({destinationIdentities:h,value:{case:"streamHeader",value:p}});yield this.engine.sendDataPacket(y,at.RELIABLE);let b=0;const k=new Ar,x=this.engine,S=this.log,E=new WritableStream({write(P){return M(this,void 0,void 0,function*(){const j=yield k.lock();let N=0;try{for(;N<P.byteLength;){const R=P.slice(N,N+oT);yield x.waitForBufferStatusLow(at.RELIABLE);const A=new dr({destinationIdentities:h,value:{case:"streamChunk",value:new Tm({content:R,streamId:d,chunkIndex:Ia(b)})}});yield x.sendDataPacket(A,at.RELIABLE),b+=1,N+=R.byteLength}}finally{j()}})},close(){return M(this,void 0,void 0,function*(){const P=new Nm({streamId:d}),j=new dr({destinationIdentities:h,value:{case:"streamTrailer",value:P}});yield x.sendDataPacket(j,at.RELIABLE)})},abort(P){S.error("Sink error:",P)}});return new RZ(E,f)})}}class $A extends K{constructor(t,n,r,i,s){super(t,r,s),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?Te.Muted:Te.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=r=>{r.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Te.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return M(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Jx)),AG()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(Te.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};t()}}class VA extends $A{constructor(t,n,r,i,s,o){super(t,n,K.Kind.Audio,r,o),this.monitorReceiver=()=>M(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=Ip(l,this.prevStats)),this.prevStats=l}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(t){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):r.volume=t;Es()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(Es())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return M(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(W0(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&W0(t)&&t.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=t.createGain(),r.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(Te.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(Te.AudioPlaybackFailed,i)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return M(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const _y=100;class IZ extends $A{constructor(t,n,r,i,s){super(t,n,K.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>M(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=Ip(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=Wx(()=>{this.updateDimensions()},_y),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(t){super.setStreamState(t),console.log("setStreamState",t),t===K.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?il(this._mediaStreamTrack,n):Gc(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new OZ(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===t);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return M(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,r="",i=new Map;return t.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(r=>r.element===t);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return M(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(t){var n,r;const i=this.elementInfos.reduce((d,h)=>Math.max(d,h.visibilityChangedAt||0),0),s=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,o=this.elementInfos.some(d=>d.pictureInPicture),l=this.elementInfos.some(d=>d.visible)&&!s||o;if(!(this.lastVisible===l&&!t)){if(!l&&Date.now()-i<_y){Gn.setTimeout(()=>{this.updateVisibility()},_y);return}this.lastVisible=l,this.emit(Te.VisibilityChanged,l,this)}}updateDimensions(){var t,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const l=o.width()*s,d=o.height()*s;l+d>r+i&&(r=l,i=d)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(Te.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?DE():n||(DE()>2?2:1)}}class OZ{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.isPiP=Mu(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,s;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Mu(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Mu(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=t,this.isIntersecting=n??nb(t),this.isPiP=jr()&&Mu(t),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var t,n,r;this.isIntersecting=nb(this.element),this.isPiP=Mu(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,FE().observe(this.element),LE().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(t=window.documentPictureInPicture)===null||t===void 0||t.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var t,n,r,i,s;(t=FE())===null||t===void 0||t.unobserve(this.element),(n=LE())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(s=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Mu(e){var t,n;return document.pictureInPictureElement===e?!0:!((t=window.documentPictureInPicture)===null||t===void 0)&&t.window?nb(e,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function nb(e,t){const n=t||window;let r=e.offsetTop,i=e.offsetLeft;const s=e.offsetWidth,o=e.offsetHeight,{hidden:l}=e,{display:d}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,r+=e.offsetTop,i+=e.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+o>n.pageYOffset&&i+s>n.pageXOffset&&!l&&d!=="none"}class Ks extends Rs.EventEmitter{constructor(t,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=jn.NONE,this.log=rt,this.handleMuted=()=>{this.emit(Te.Muted)},this.handleUnmuted=()=>{this.emit(Te.Unmuted)},this.log=co((s=i?.loggerName)!==null&&s!==void 0?s:zi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=r,this.source=K.Source.Unknown}setTrack(t){this.track&&(this.track.off(Te.Muted,this.handleMuted),this.track.off(Te.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(Te.Muted,this.handleMuted),t.on(Te.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),dt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==jn.NONE}get audioTrack(){if(ys(this.track))return this.track}get videoTrack(){if(fa(this.track))return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=K.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===K.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),(function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"})(e.PermissionStatus||(e.PermissionStatus={}))})(Ks||(Ks={}));class _m extends Ks{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Te.Ended)},this.handleCpuConstrained=()=>{this.track&&fa(this.track)&&this.emit(Te.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(t){this.track&&(this.track.off(Te.Ended,this.handleTrackEnded),this.track.off(Te.CpuConstrained,this.handleCpuConstrained)),super.setTrack(t),t&&(t.on(Te.Ended,this.handleTrackEnded),t.on(Te.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return M(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return M(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return M(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return M(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(ys(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(Fn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(Fn.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(Fn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(Fn.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||r.add(Fn.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(Fn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function Op(e,t){return M(this,void 0,void 0,function*(){e??(e={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:s}=AA(e);let o=s.audio,l=s.video;if(r&&typeof s.audio=="object"&&(s.audio.processor=r),i&&typeof s.video=="object"&&(s.video.processor=i),e.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const p=s.audio.deviceId;s.audio.deviceId={exact:p},n=!0,o=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:p}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const p=s.video.deviceId;s.video.deviceId={exact:p},n=!0,l=Object.assign(Object.assign({},s.video),{deviceId:{ideal:p}})}(s.audio===!0||typeof s.audio=="object"&&!s.audio.deviceId)&&(s.audio={deviceId:"default"}),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const d=PA(s,OA,MA),h=Vx(d),f=navigator.mediaDevices.getUserMedia(h);s.audio&&(Un.userMediaPromiseMap.set("audioinput",f),f.catch(()=>Un.userMediaPromiseMap.delete("audioinput"))),s.video&&(Un.userMediaPromiseMap.set("videoinput",f),f.catch(()=>Un.userMediaPromiseMap.delete("videoinput")));try{const p=yield f;return yield Promise.all(p.getTracks().map(y=>M(this,void 0,void 0,function*(){const b=y.kind==="audio";let k=b?d.audio:d.video;(typeof k=="boolean"||!k)&&(k={});let x;const S=b?h.audio:h.video;typeof S!="boolean"&&(x=S);const E=y.getSettings().deviceId;x?.deviceId&&na(x.deviceId)!==E?x.deviceId=E:x||(x={deviceId:E});const T=uZ(y,x,t);return T.kind===K.Kind.Video?T.source=K.Source.Camera:T.kind===K.Kind.Audio&&(T.source=K.Source.Microphone),T.mediaStream=p,ys(T)&&r?yield T.setProcessor(r):fa(T)&&i&&(yield T.setProcessor(i)),T})))}catch(p){if(!n)throw p;return Op(Object.assign(Object.assign({},e),{audio:o,video:l}),t)}})}function MZ(e){return M(this,void 0,void 0,function*(){return(yield Op({audio:!1,video:!0}))[0]})}function DZ(e){return M(this,void 0,void 0,function*(){return(yield Op({audio:!0,video:!1}))[0]})}var Ii;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(Ii||(Ii={}));function LZ(e){switch(e){case zu.EXCELLENT:return Ii.Excellent;case zu.GOOD:return Ii.Good;case zu.POOR:return Ii.Poor;case zu.LOST:return Ii.Lost;default:return Ii.Unknown}}class qA extends Rs.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===cd.AGENT}get isActive(){var t;return((t=this.participantInfo)===null||t===void 0?void 0:t.state)===tl.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,r,i,s,o){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:cd.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Ii.Unknown,this.log=rt,this.log=co((d=o?.loggerName)!==null&&d!==void 0?d:zi.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new di,this.once(ce.Active,()=>{var t,n;(n=(t=this.activeFuture)===null||t===void 0?void 0:t.resolve)===null||n===void 0||n.call(t),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(K.Source.Camera);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(K.Source.Microphone);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(K.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){var n;return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.state===tl.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==tl.ACTIVE&&this.emit(ce.Active),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,!0)}_setMetadata(t){const n=this.metadata!==t,r=this.metadata;this.metadata=t,n&&this.emit(ce.ParticipantMetadataChanged,r)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(ce.ParticipantNameChanged,t)}_setAttributes(t){const n=IG(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit(ce.AttributesChanged,n)}setPermissions(t){var n,r,i,s,o,l;const d=this.permissions,h=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||t.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||t.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||t.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((f,p)=>{var y;return f!==((y=this.permissions)===null||y===void 0?void 0:y.canPublishSources[p])})||t.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=t,h&&this.emit(ce.ParticipantPermissionsChanged,d),h}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(ce.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=LZ(t),n!==this._connectionQuality&&this.emit(ce.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var t,n;this.activeFuture&&((n=(t=this.activeFuture).reject)===null||n===void 0||n.call(t,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>ys(n.track)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(Te.Muted,()=>{this.emit(ce.TrackMuted,t)}),t.on(Te.Unmuted,()=>{this.emit(ce.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case K.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case K.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function FZ(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new $R({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=e.allowAll)!==null&&r!==void 0?r:!1,trackSids:e.allowedTrackSids||[]})}class UZ extends qA{constructor(t,n,r,i,s,o){super(t,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=jn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new di)},this.handleReconnected=()=>{var l,d;(d=(l=this.reconnectFuture)===null||l===void 0?void 0:l.resolve)===null||d===void 0||d.call(l),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var l,d,h,f,p,y;this.reconnectFuture&&(this.reconnectFuture.promise.catch(b=>this.log.warn(b.message,this.logContext)),(d=(l=this.reconnectFuture)===null||l===void 0?void 0:l.reject)===null||d===void 0||d.call(l,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(h=this.signalConnectedFuture).reject)===null||f===void 0||f.call(h,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(y=(p=this.activeAgentFuture)===null||p===void 0?void 0:p.reject)===null||y===void 0||y.call(p,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=l=>{var d,h;l.participant&&this.updateInfo(l.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new di),(h=(d=this.signalConnectedFuture).resolve)===null||h===void 0||h.call(d)},this.handleSignalRequestResponse=l=>{const{requestId:d,reason:h,message:f}=l,p=this.pendingSignalRequests.get(d);p&&(h!==Ux.OK&&p.reject(new RE(f,h)),this.pendingSignalRequests.delete(d))},this.handleDataPacket=l=>{switch(l.value.case){case"rpcResponse":let d=l.value.value,h=null,f=null;d.value.case==="payload"?h=d.value.value:d.value.case==="error"&&(f=Qt.fromProto(d.value.value)),this.handleIncomingRpcResponse(d.requestId,h,f);break;case"rpcAck":let p=l.value.value;this.handleIncomingRpcAck(p.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(l=>FZ(l)))},this.onTrackUnmuted=l=>{this.onTrackMuted(l,l.isUpstreamPaused)},this.onTrackMuted=(l,d)=>{if(d===void 0&&(d=!0),!l.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),dt(l)));return}this.engine.updateMuteStatus(l.sid,d)},this.onTrackUpstreamPaused=l=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),dt(l))),this.onTrackMuted(l,!0)},this.onTrackUpstreamResumed=l=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),dt(l))),this.onTrackMuted(l,l.isMuted)},this.onTrackFeatureUpdate=l=>{const d=this.audioTrackPublications.get(l.sid);if(!d){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(l.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(d.trackSid,d.getTrackFeatures())},this.onTrackCpuConstrained=(l,d)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),dt(d))),this.emit(ce.LocalTrackCpuConstrained,l,d)},this.handleSubscribedQualityUpdate=l=>M(this,void 0,void 0,function*(){var d,h,f,p,y;if(!(!((y=this.roomOptions)===null||y===void 0)&&y.dynacast))return;const b=this.videoTrackPublications.get(l.trackSid);if(!b){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}if(!b.videoTrack)return;const k=yield b.videoTrack.setPublishingCodecs(l.subscribedCodecs);try{for(var x=!0,S=Js(k),E;E=yield S.next(),d=E.done,!d;x=!0){p=E.value,x=!1;const T=p;uG(T)&&(this.log.debug("publish ".concat(T," for ").concat(b.videoTrack.sid),Object.assign(Object.assign({},this.logContext),dt(b))),yield this.publishAdditionalCodecForTrack(b.videoTrack,T,b.options))}}catch(T){h={error:T}}finally{try{!x&&!d&&(f=S.return)&&(yield f.call(S))}finally{if(h)throw h.error}}}),this.handleLocalTrackUnpublished=l=>{const d=this.trackPublications.get(l.trackSid);if(!d){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}this.unpublishTrack(d.track)},this.handleTrackEnded=l=>M(this,void 0,void 0,function*(){if(l.source===K.Source.ScreenShare||l.source===K.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),dt(l))),this.unpublishTrack(l);else if(l.isUserProvided)yield l.mute();else if(Ws(l)||$o(l))try{if(jr())try{const d=yield navigator?.permissions.query({name:l.source===K.Source.Camera?"camera":"microphone"});if(d&&d.state==="denied")throw this.log.warn("user has revoked access to ".concat(l.source),Object.assign(Object.assign({},this.logContext),dt(l))),d.onchange=()=>{d.state!=="denied"&&(l.isMuted||l.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}l.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),dt(l))),Ws(l)?yield l.restartTrack({deviceId:"default"}):yield l.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),dt(l))),yield l.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s,this.roomOutgoingDataStreamManager=o}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==jn.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){var n;this.engine=t,this.engine.on(je.RemoteMute,(r,i)=>{const s=this.trackPublications.get(r);!s||!s.track||(i?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(je.Connected,this.handleReconnected).on(je.SignalConnected,this.handleSignalConnected).on(je.SignalRestarted,this.handleReconnected).on(je.SignalResumed,this.handleReconnected).on(je.Restarting,this.handleReconnecting).on(je.Resuming,this.handleReconnecting).on(je.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(je.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(je.Closing,this.handleClosing).on(je.SignalRequestResponse,this.handleSignalRequestResponse).on(je.DataPacketReceived,this.handleDataPacket)}setMetadata(t){return M(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return M(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return M(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return M(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:o}=n;return(function*(){return new Promise((l,d)=>M(r,void 0,void 0,function*(){var h,f;try{let p=!1;const y=yield this.engine.client.sendUpdateLocalMetadata((h=i??this.metadata)!==null&&h!==void 0?h:"",(f=s??this.name)!==null&&f!==void 0?f:"",o),b=performance.now();for(this.pendingSignalRequests.set(y,{resolve:l,reject:k=>{d(k),p=!0},values:{name:s,metadata:i,attributes:o}});performance.now()-b<5e3&&!p;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!o||Object.entries(o).every(k=>{let[x,S]=k;return this.attributes[x]===S||S===""&&!this.attributes[x]}))){this.pendingSignalRequests.delete(y),l();return}yield fr(50)}d(new RE("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&d(p)}}))})()})}setCameraEnabled(t,n,r){return this.setTrackEnabled(K.Source.Camera,t,n,r)}setMicrophoneEnabled(t,n,r){return this.setTrackEnabled(K.Source.Microphone,t,n,r)}setScreenShareEnabled(t,n,r){return this.setTrackEnabled(K.Source.ScreenShare,t,n,r)}setE2EEEnabled(t){return M(this,void 0,void 0,function*(){this.encryptionType=t?jn.GCM:jn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,r,i){return M(this,void 0,void 0,function*(){var s,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(t);if(n)if(l)yield l.unmute();else{let d;if(this.pendingPublishing.has(t)){const h=yield this.waitForPendingPublicationOfSource(t);return h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t})),yield h?.unmute(),h}this.pendingPublishing.add(t);try{switch(t){case K.Source.Camera:d=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case K.Source.Microphone:d=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case K.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Qs(t)}}catch(h){throw d?.forEach(f=>{f.stop()}),h instanceof Error&&this.emit(ce.MediaDevicesError,h,Q0(t)),this.pendingPublishing.delete(t),h}for(const h of d){const f=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);t===K.Source.Microphone&&ys(h)&&f.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),h.startPreConnectBuffer())}try{const h=[];for(const p of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),dt(p))),h.push(this.publishTrack(p,i));[l]=yield Promise.all(h)}catch(h){throw d?.forEach(f=>{f.stop()}),h}finally{this.pendingPublishing.delete(t)}}else if(!l?.track&&this.pendingPublishing.has(t)&&(l=yield this.waitForPendingPublicationOfSource(t),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t}))),l&&l.track)if(t===K.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const d=this.getTrackPublication(K.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return M(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(K.Source.Camera)||this.pendingPublishing.has(K.Source.Microphone))){this.pendingPublishing.add(K.Source.Camera),this.pendingPublishing.add(K.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(K.Source.Camera),this.pendingPublishing.delete(K.Source.Microphone)}}})}createTracks(t){return M(this,void 0,void 0,function*(){var n,r;t??(t={});const i=PA(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield Op(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(ys(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=K.Source.Microphone,this.emit(ce.AudioStreamAcquired)),fa(l)&&(this.cameraError=void 0,l.source=K.Source.Camera),l))}catch(s){throw s instanceof Error&&(t.audio&&(this.microphoneError=s),t.video&&(this.cameraError=s)),s}})}createScreenTracks(t){return M(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new zx("getDisplayMedia not supported");t.resolution===void 0&&!gG()&&(t.resolution=$x.h1080fps30.resolution);const n=_G(t),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Qs("no video track found");const s=new Pm(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=K.Source.ScreenShare,t.contentHint&&(s.mediaStreamTrack.contentHint=t.contentHint);const o=[s];if(r.getAudioTracks().length>0){this.emit(ce.AudioStreamAcquired);const l=new jm(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=K.Source.ScreenShareAudio,o.push(l)}return o})}publishTrack(t,n){return M(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return M(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var l,d,h,f;Ws(r)&&r.setAudioContext(s.audioContext),yield(l=s.reconnectFuture)===null||l===void 0?void 0:l.promise,s.republishPromise&&!o&&(yield s.republishPromise),za(r)&&s.pendingPublishPromises.has(r)&&(yield s.pendingPublishPromises.get(r));let p;if(r instanceof MediaStreamTrack)p=r.getConstraints();else{p=r.constraints;let E;switch(r.source){case K.Source.Microphone:E="audioinput";break;case K.Source.Camera:E="videoinput"}E&&s.activeDeviceMap.has(E)&&(p=Object.assign(Object.assign({},p),{deviceId:s.activeDeviceMap.get(E)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new jm(r,p,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":r=new Pm(r,p,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new Qs("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let y;if(s.trackPublications.forEach(E=>{E.track&&E.track===r&&(y=E)}),y)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),dt(y))),y;const b=Object.assign(Object.assign({},s.roomOptions.publishDefaults),i),k="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,x=(d=b.forceStereo)!==null&&d!==void 0?d:k;x&&(b.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),dt(r))),b.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=b.dtx)!==null&&h!==void 0||(b.dtx=!1),(f=b.red)!==null&&f!==void 0||(b.red=!1)),!yG()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),b.simulcast=!1),b.source&&(r.source=b.source);const S=new Promise((E,T)=>M(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Ht.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:dt(r)}));const P=setTimeout(()=>{T(new _E("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(P);const j=yield this.publish(r,b,x);E(j)}else try{const P=yield this.publish(r,b,x);E(P)}catch(P){T(P)}}catch(P){T(P)}}));s.pendingPublishPromises.set(r,S);try{return yield S}catch(E){throw E}finally{s.pendingPublishPromises.delete(r)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new di),this.signalConnectedFuture.promise}hasPermissionsToPublish(t){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),dt(t))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>OG(i)).includes(t.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),dt(t))),!1)}publish(t,n,r){return M(this,void 0,void 0,function*(){var i,s,o,l,d,h,f,p,y,b;if(!this.hasPermissionsToPublish(t))throw new _E("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(D=>za(t)&&D.source===t.source)&&t.source!==K.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),dt(t))),n.stopMicTrackOnMute&&ys(t)&&(t.stopOnMute=!0),t.source===K.Source.ScreenShare&&ec()&&(n.simulcast=!1),n.videoCodec==="av1"&&!fG()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!mG()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Y0),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(D=>n.videoCodec===Wu(D.mime))||(n.videoCodec=Wu(this.enabledPublishVideoCodecs[0].mime)));const x=n.videoCodec;t.on(Te.Muted,this.onTrackMuted),t.on(Te.Unmuted,this.onTrackUnmuted),t.on(Te.Ended,this.handleTrackEnded),t.on(Te.UpstreamPaused,this.onTrackUpstreamPaused),t.on(Te.UpstreamResumed,this.onTrackUpstreamResumed),t.on(Te.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const S=[],E=!(!((i=n.dtx)!==null&&i!==void 0)||i),T=t.getSourceTrackSettings();T.autoGainControl&&S.push(Fn.TF_AUTO_GAIN_CONTROL),T.echoCancellation&&S.push(Fn.TF_ECHO_CANCELLATION),T.noiseSuppression&&S.push(Fn.TF_NOISE_SUPPRESSION),T.channelCount&&T.channelCount>1&&S.push(Fn.TF_STEREO),E&&S.push(Fn.TF_NO_DTX),Ws(t)&&t.hasPreConnectBuffer&&S.push(Fn.TF_PRECONNECT_BUFFER);const P=new ld({cid:t.mediaStreamTrack.id,name:n.name,type:K.kindToProto(t.kind),muted:t.isMuted,source:K.sourceToProto(t.source),disableDtx:E,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:S});let j;if(t.kind===K.Kind.Video){let D={width:0,height:0};try{D=yield t.waitForDimensions()}catch{const q=(l=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&l!==void 0?l:dd.h720.resolution;D={width:q.width,height:q.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),dt(t)),{dims:D}))}P.width=D.width,P.height=D.height,$o(t)&&(ms(x)&&(t.source===K.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),dt(t))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),P.simulcastCodecs=[new A0({codec:x,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Y0}),n.backupCodec&&x!==n.backupCodec.codec&&P.encryption===jn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),P.simulcastCodecs.push(new A0({codec:n.backupCodec.codec,cid:""})))),j=eb(t.source===K.Source.ScreenShare,P.width,P.height,n),P.layers=nT(P.width,P.height,j,ms(n.videoCodec))}else t.kind===K.Kind.Audio&&(j=[{maxBitrate:(h=n.audioPreset)===null||h===void 0?void 0:h.maxBitrate,priority:(p=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&p!==void 0?p:"high",networkPriority:(b=(y=n.audioPreset)===null||y===void 0?void 0:y.priority)!==null&&b!==void 0?b:"high"}]);if(!this.engine||this.engine.isClosed)throw new Tn("cannot publish track when not connected");const N=()=>M(this,void 0,void 0,function*(){var D,z,q;if(!this.engine.pcManager)throw new Tn("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,j),this.emit(ce.LocalSenderCreated,t.sender,t),$o(t)&&((D=n.degradationPreference)!==null&&D!==void 0||(n.degradationPreference=xZ(t)),t.setDegradationPreference(n.degradationPreference)),j)if(ec()&&t.kind===K.Kind.Audio){let V;for(const te of this.engine.pcManager.publisher.getTransceivers())if(te.sender===t.sender){V=te;break}V&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:V,codec:"opus",maxbr:!((z=j[0])===null||z===void 0)&&z.maxBitrate?j[0].maxBitrate/1e3:0})}else t.codec&&ms(t.codec)&&(!((q=j[0])===null||q===void 0)&&q.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:P.cid,codec:t.codec,maxbr:j[0].maxBitrate/1e3});yield this.engine.negotiate()});let R;const A=new Promise((D,z)=>M(this,void 0,void 0,function*(){var q;try{R=yield this.engine.addTrack(P),D(R)}catch(V){t.sender&&(!((q=this.engine.pcManager)===null||q===void 0)&&q.publisher)&&(this.engine.pcManager.publisher.removeTrack(t.sender),yield this.engine.negotiate().catch(te=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),dt(t)),{error:te}))})),z(V)}}));if(this.enabledPublishVideoCodecs.length>0)R=(yield Promise.all([A,N()]))[0];else{R=yield A;let D;if(R.codecs.forEach(z=>{D===void 0&&(D=z.mimeType)}),D&&t.kind===K.Kind.Video){const z=Wu(D);z!==x&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),dt(t)),{codec:z})),n.videoCodec=z,j=eb(t.source===K.Source.ScreenShare,P.width,P.height,n))}yield N()}const I=new _m(t.kind,R,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(I.on(Te.CpuConstrained,D=>this.onTrackCpuConstrained(D,I)),I.options=n,t.sid=R.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:j,trackInfo:R})),$o(t)?t.startMonitor(this.engine.client):Ws(t)&&t.startMonitor(),this.addTrackPublication(I),this.emit(ce.LocalTrackPublished,I),Ws(t)&&R.audioFeatures.includes(Fn.TF_PRECONNECT_BUFFER)){const D=t.getPreConnectBuffer(),z=t.getPreConnectBufferMimeType();this.on(ce.LocalTrackSubscribed,q=>{if(q.trackSid===R.sid){if(!t.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),dt(t))),t.stopPreConnectBuffer()}}),D&&new Promise((V,te)=>M(this,void 0,void 0,function*(){var J,we,X,me,U,ue;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),dt(t)));const pe=setTimeout(()=>{te(new Error("agent not active within 10 seconds"))},1e4),oe=yield this.waitUntilActiveAgentPresent();clearTimeout(pe),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),dt(t)));const Se=yield this.streamBytes({name:"preconnect-buffer",mimeType:z,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[oe.identity],attributes:{trackId:I.trackSid,sampleRate:String((U=T.sampleRate)!==null&&U!==void 0?U:"48000"),channels:String((ue=T.channelCount)!==null&&ue!==void 0?ue:"1")}});try{for(var fe=!0,F=Js(D),ie;ie=yield F.next(),J=ie.done,!J;fe=!0){me=ie.value,fe=!1;const Ae=me;yield Se.write(Ae)}}catch(Ae){we={error:Ae}}finally{try{!fe&&!J&&(X=F.return)&&(yield X.call(F))}finally{if(we)throw we.error}}yield Se.close(),V()}catch(pe){te(pe)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),dt(t)))}).catch(V=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),dt(t)),{error:V}))})}return I})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,r){return M(this,void 0,void 0,function*(){var i;if(this.encryptionType!==jn.NONE)return;let s;if(this.trackPublications.forEach(b=>{b.track&&b.track===t&&(s=b)}),!s)throw new Qs("track is not published");if(!$o(t))throw new Qs("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),l=vZ(t,n,o);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),dt(t)));return}const d=t.addSimulcastTrack(n,l);if(!d)return;const h=new ld({cid:d.mediaStreamTrack.id,type:K.kindToProto(t.kind),muted:t.isMuted,source:K.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:o.videoCodec,cid:d.mediaStreamTrack.id}]});if(h.layers=nT(h.width,h.height,l),!this.engine||this.engine.isClosed)throw new Tn("cannot publish track when not connected");const f=()=>M(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,d,o,l),yield this.engine.negotiate()}),y=(yield Promise.all([this.engine.addTrack(h),f()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:y}))})}unpublishTrack(t,n){return M(this,void 0,void 0,function*(){var r,i;if(za(t)){const h=this.pendingPublishPromises.get(t);h&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),dt(t))),yield h)}const s=this.getPublicationForTrack(t),o=s?dt(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}t=s.track,t.off(Te.Muted,this.onTrackMuted),t.off(Te.Unmuted,this.onTrackUnmuted),t.off(Te.Ended,this.handleTrackEnded),t.off(Te.UpstreamPaused,this.onTrackUpstreamPaused),t.off(Te.UpstreamResumed,this.onTrackUpstreamResumed),t.off(Te.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?t.stop():t.stopMonitor();let l=!1;const d=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Zt.FAILED&&d)try{for(const h of this.engine.pcManager.publisher.getTransceivers())h.sender===d&&(h.direction="inactive",l=!0);if(this.engine.removeTrack(d)&&(l=!0),$o(t)){for(const[,h]of t.simulcastCodecs)h.sender&&(this.engine.removeTrack(h.sender)&&(l=!0),h.sender=void 0);t.simulcastCodecs.clear()}}catch(h){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:h}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case K.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case K.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(ce.LocalTrackUnpublished,s),s.setTrack(void 0),l&&(yield this.engine.negotiate()),s})}unpublishTracks(t){return M(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(t){return M(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((s,o)=>M(r,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),l.push(d))}),yield Promise.all(l.map(d=>M(this,void 0,void 0,function*(){const h=d.track;yield this.unpublishTrack(h,!1),i&&!h.isMuted&&h.source!==K.Source.ScreenShare&&h.source!==K.Source.ScreenShareAudio&&(Ws(h)||$o(h))&&!h.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield h.restartTrack()),yield this.publishOrRepublishTrack(h,d.options,!0)}))),s()}catch(l){o(l)}finally{this.republishPromise=void 0}})),yield r.republishPromise})()})}publishData(t){return M(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const s=i.reliable?at.RELIABLE:at.LOSSY,o=i.destinationIdentities,l=i.topic;let d=new _x({participantIdentity:r.identity,payload:n,destinationIdentities:o,topic:l});const h=new dr({kind:s,value:{case:"user",value:d}});yield r.engine.sendDataPacket(h,s)})()})}publishDtmf(t,n){return M(this,void 0,void 0,function*(){const r=new dr({kind:at.RELIABLE,value:{case:"sipDtmf",value:new NR({code:t,digit:n})}});yield this.engine.sendDataPacket(r,at.RELIABLE)})}sendChatMessage(t,n){return M(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:t,timestamp:Date.now(),attachedFiles:n?.attachments},i=new dr({value:{case:"chatMessage",value:new Cm(Object.assign(Object.assign({},r),{timestamp:Bt.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,at.RELIABLE),this.emit(ce.ChatMessage,r),r})}editChatMessage(t,n){return M(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),i=new dr({value:{case:"chatMessage",value:new Cm(Object.assign(Object.assign({},r),{timestamp:Bt.parse(r.timestamp),editTimestamp:Bt.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,at.RELIABLE),this.emit(ce.ChatMessage,r),r})}sendText(t,n){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(t,n)})}streamText(t){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(t)})}sendFile(t,n){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(t,n)})}streamBytes(t){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(t)})}performRpc(t){return M(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:s,payload:o,responseTimeout:l=15e3}=n;return(function*(){return new Promise((f,p)=>M(r,void 0,void 0,function*(){var y,b,k,x;if(Zx(o)>DA){p(Qt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((b=(y=this.engine.latestJoinResponse)===null||y===void 0?void 0:y.serverInfo)===null||b===void 0)&&b.version&&$i((x=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||x===void 0?void 0:x.version,"1.8.0")<0){p(Qt.builtIn("UNSUPPORTED_SERVER"));return}const S=Math.max(l,8e3),E=crypto.randomUUID();yield this.publishRpcRequest(i,E,s,o,S);const T=setTimeout(()=>{this.pendingAcks.delete(E),p(Qt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(E),clearTimeout(P)},7e3);this.pendingAcks.set(E,{resolve:()=>{clearTimeout(T)},participantIdentity:i});const P=setTimeout(()=>{this.pendingResponses.delete(E),p(Qt.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(E,{resolve:(j,N)=>{clearTimeout(P),this.pendingAcks.has(E)&&(console.warn("RPC response received before ack",E),this.pendingAcks.delete(E),clearTimeout(T)),N?p(N):f(j??"")},participantIdentity:i})}))})()})}registerRpcMethod(t,n){this.rpcHandlers.has(t)&&this.log.warn("you're overriding the RPC handler for method ".concat(t,", in the future this will throw an error")),this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(t){const n=this.pendingAcks.get(t);n?(n.resolve(),this.pendingAcks.delete(t)):console.error("Ack received for unexpected RPC request",t)}handleIncomingRpcResponse(t,n,r){const i=this.pendingResponses.get(t);i?(i.resolve(n,r),this.pendingResponses.delete(t)):console.error("Response received for unexpected RPC request",t)}publishRpcRequest(t,n,r,i,s){return M(this,void 0,void 0,function*(){const o=new dr({destinationIdentities:[t],kind:at.RELIABLE,value:{case:"rpcRequest",value:new Rx({id:n,method:r,payload:i,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(o,at.RELIABLE)})}handleParticipantDisconnected(t){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===t&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===t&&(i(null,Qt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return super.updateInfo(t)?(t.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),dt(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0):!1}setActiveAgent(t){var n,r,i,s;this.firstActiveAgent=t,t&&!this.firstActiveAgent&&(this.firstActiveAgent=t),t?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,t):(s=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||s===void 0||s.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new di),this.activeAgentFuture.promise)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(t instanceof MediaStreamTrack?(Ws(i)||$o(i))&&i.mediaStreamTrack===t&&(n=r):t===i&&(n=r))}),n}waitForPendingPublicationOfSource(t){return M(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[o]=s;return o.source===t});if(i)return i[1];yield fr(20)}})}}class Rm extends Ks{constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(Te.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const i=new _p({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new PR({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Te.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Ks.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ks.SubscriptionStatus.Subscribed:Ks.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ks.PermissionStatus.Allowed:Ks.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(t){!this.isManualOperationAllowed()||this.requestedDisabled===!t||(this.requestedDisabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.requestedMaxQuality===t||(this.requestedMaxQuality=t,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===t.height||(Sy(this.track)&&(this.requestedVideoDimensions=t),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&Sy(this.track)&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){var t;return(t=this.requestedMaxQuality)!==null&&t!==void 0?t:Hr.HIGH}setTrack(t){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==t&&(i&&(i.off(Te.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Te.VisibilityChanged,this.handleVisibilityChange),i.off(Te.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Te.Unsubscribed,i)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(Te.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(Te.VisibilityChanged,this.handleVisibilityChange),t.on(Te.Ended,this.handleEnded),this.emit(Te.Subscribed,t)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(Te.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?Te.Muted:Te.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(Te.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(Te.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Sy(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new FR({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===K.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)zE(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=MG(this.trackInfo,this.requestedMaxQuality);r&&zE(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(t.width=Math.ceil(n.width),t.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),t.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Hr.HIGH})),t.quality=Hr.HIGH)}this.emit(Te.UpdateSettings,t)}}class Am extends qA{static fromParticipantInfo(t,n,r){return new Am(t,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,r,i,s,o,l){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:cd.STANDARD;super(n,r||"",i,s,o,l,d),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(Te.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),dt(t)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),t.on(Te.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(Te.SubscriptionPermissionChanged,n=>{this.emit(ce.TrackSubscriptionPermissionChanged,t,n)}),t.on(Te.SubscriptionStatusChanged,n=>{this.emit(ce.TrackSubscriptionStatusChanged,t,n)}),t.on(Te.Subscribed,n=>{this.emit(ce.TrackSubscribed,n,t)}),t.on(Te.Unsubscribed,n=>{this.emit(ce.TrackUnsubscribed,n,t)}),t.on(Te.SubscriptionFailed,n=>{this.emit(ce.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.Source.Microphone;this.volumeMap.set(n,t);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,r,i,s,o){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(f=>{!l&&t.kind===f.kind.toString()&&(l=f)}),!l){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ce.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,r,i,s,o-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),dt(l))),this.emit(ce.TrackSubscriptionFailed,n);return}const d=t.kind==="video";let h;return d?h=new IZ(t,n,i,s):h=new VA(t,n,i,this.audioContext,this.audioOutput),h.source=l.source,h.isMuted=l.isMuted,h.setMediaStream(r),h.start(),l.setTrack(h),this.volumeMap.has(l.source)&&Z0(h)&&ys(h)&&h.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,r=new Map;return t.tracks.forEach(i=>{var s,o;let l=this.getTrackPublicationBySid(i.sid);if(l)l.updateInfo(i);else{const d=K.kindFromProto(i.type);if(!d)return;l=new Rm(d,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),l.updateInfo(i),r.set(i.sid,l);const h=Array.from(this.trackPublications.values()).find(f=>f.source===l?.source);h&&l.source!==K.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:dt(h),newTrack:dt(l)})),this.addTrackPublication(l)}n.set(i.sid,l)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),dt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(ce.TrackPublished,i)}),!0}unpublishTrack(t,n){const r=this.trackPublications.get(t);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(t),r.kind){case K.Kind.Audio:this.audioTrackPublications.delete(t);break;case K.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit(ce.TrackUnpublished,r)}setAudioOutput(t){return M(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(r=>{var i;ys(r.track)&&Z0(r.track)&&n.push(r.track.setSinkId((i=t.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:r})),super.emit(t,...r)}}var ft;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(ft||(ft={}));const BZ=4*1e3;class lo extends Rs.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(t){var n,r,i,s;if(super(),n=this,this.state=ft.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=rt,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(o,l,d)=>M(this,void 0,void 0,function*(){var h;if(!pG())throw Es()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const f=yield this.disconnectLock.lock();if(this.state===ft.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),f(),Promise.resolve();if(this.connectFuture)return f(),this.connectFuture.promise;this.setAndEmitConnectionState(ft.Connecting),((h=this.regionUrlProvider)===null||h===void 0?void 0:h.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),K0(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new tb(o,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(b=>{var k;(k=this.regionUrlProvider)===null||k===void 0||k.setServerReportedRegions(b)}).catch(b=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:b}))}));const p=(b,k,x)=>M(this,void 0,void 0,function*(){var S,E;this.abortController&&this.abortController.abort();const T=new AbortController;this.abortController=T,f?.();try{yield this.attemptConnection(x??o,l,d,T),this.abortController=void 0,b()}catch(P){if(this.regionUrlProvider&&P instanceof St&&P.reason!==mt.Cancelled&&P.reason!==mt.NotAllowed){let j=null;try{j=yield this.regionUrlProvider.getNextBestRegionUrl((S=this.abortController)===null||S===void 0?void 0:S.signal)}catch(N){if(N instanceof St&&(N.status===401||N.reason===mt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),k(N);return}}j&&!(!((E=this.abortController)===null||E===void 0)&&E.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(P.message,". Retrying with another region: ").concat(j),this.logContext),this.recreateEngine(),yield p(b,k,j)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,BE(P)),k(P))}else{let j=Fi.UNKNOWN_REASON;P instanceof St&&(j=BE(P)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,j),k(P)}}}),y=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new di((b,k)=>{p(b,k,y)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,l,d,h,f,p)=>M(this,void 0,void 0,function*(){var y,b,k;const x=yield d.join(o,l,{autoSubscribe:h.autoSubscribe,adaptiveStream:typeof f.adaptiveStream=="object"?!0:f.adaptiveStream,maxRetries:h.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:h.websocketTimeout,singlePeerConnection:f.singlePeerConnection},p.signal);let S=x.serverInfo;if(S||(S={version:x.serverVersion,region:x.serverRegion}),this.serverInfo=S,this.log.debug("connected to Livekit Server ".concat(Object.entries(S).map(E=>{let[T,P]=E;return"".concat(T,": ").concat(P)}).join(", ")),{room:(y=x.room)===null||y===void 0?void 0:y.name,roomSid:(b=x.room)===null||b===void 0?void 0:b.sid,identity:(k=x.participant)===null||k===void 0?void 0:k.identity}),!S.version)throw new XK("unknown server version");return S.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),f.dynacast=!1),x}),this.applyJoinResponse=o=>{const l=o.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([l,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,l,d,h)=>M(this,void 0,void 0,function*(){var f,p;this.state===ft.Reconnecting||this.isResuming||!((f=this.engine)===null||f===void 0)&&f.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((p=this.regionUrlProvider)===null||p===void 0)&&p.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Gx),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const y=yield this.connectSignal(o,l,this.engine,this.connOptions,this.options,h);this.applyJoinResponse(y),this.setupLocalParticipantEvents(),this.emit(re.SignalConnected)}catch(y){yield this.engine.close(),this.recreateEngine();const b=new St("could not establish signal connection",mt.ServerUnreachable);throw y instanceof Error&&(b.message="".concat(b.message,": ").concat(y.message)),y instanceof St&&(b.reason=y.reason,b.status=y.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:y})),b}if(h.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new St("Connection attempt aborted",mt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,h)}catch(y){throw yield this.engine.close(),this.recreateEngine(),y}jr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),jr()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(ft.Connected),this.emit(re.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];return M(n,[...l],void 0,function(){var h=this;let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var p,y,b,k;const x=yield h.disconnectLock.lock();try{if(h.state===ft.Disconnected){h.log.debug("already disconnected",h.logContext);return}if(h.log.info("disconnect from room",Object.assign({},h.logContext)),h.state===ft.Connecting||h.state===ft.Reconnecting||h.isResuming){const S="Abort connection attempt due to user initiated disconnect";h.log.warn(S,h.logContext),(p=h.abortController)===null||p===void 0||p.abort(S),(b=(y=h.connectFuture)===null||y===void 0?void 0:y.reject)===null||b===void 0||b.call(y,new St("Client initiated disconnect",mt.Cancelled)),h.connectFuture=void 0}!((k=h.engine)===null||k===void 0)&&k.client.isDisconnected||(yield h.engine.client.sendLeave()),h.engine&&(yield h.engine.close()),h.handleDisconnect(f,Fi.CLIENT_INITIATED),h.engine=void 0}finally{x()}})()})},this.onPageLeave=()=>M(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>M(this,void 0,void 0,function*(){const o=[],l=hr();if(l&&l.os==="iOS"){const d="livekit-dummy-audio-el";let h=document.getElementById(d);if(!h){h=document.createElement("audio"),h.id=d,h.autoplay=!0,h.hidden=!0;const f=ky();f.enabled=!0;const p=new MediaStream([f]);h.srcObject=p,document.addEventListener("visibilitychange",()=>{h&&(h.srcObject=document.hidden?null:p,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(h),this.once(re.Disconnected,()=>{h?.remove(),h=null})}o.push(h)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(h=>{h.track&&h.track.attachedElements.forEach(f=>{o.push(f)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>M(this,void 0,void 0,function*(){const o=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(d=>{var h;(h=d.track)===null||h===void 0||h.attachedElements.forEach(f=>{o.includes(f)||o.push(f)})});yield Promise.all(o.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(ft.Reconnecting)&&this.emit(re.Reconnecting)},this.handleSignalRestarted=o=>M(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(ft.Connected),this.emit(re.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(l=>{var d;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(d=this.sidToIdentity.get(l.sid))!==null&&d!==void 0?d:"");let h=this.remoteParticipants.get(l.identity);l.state===tl.DISCONNECTED?this.handleParticipantDisconnected(l.identity,h):h=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=o=>{const l=[],d={};o.forEach(h=>{if(d[h.sid]=!0,h.sid===this.localParticipant.sid)this.localParticipant.audioLevel=h.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const f=this.getRemoteParticipantBySid(h.sid);f&&(f.audioLevel=h.level,f.setIsSpeaking(!0),l.push(f))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(h=>{d[h.sid]||(h.audioLevel=0,h.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(re.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=o=>{const l=new Map;this.activeSpeakers.forEach(h=>{const f=this.remoteParticipants.get(h.identity);f&&f.sid!==h.sid||l.set(h.sid,h)}),o.forEach(h=>{let f=this.getRemoteParticipantBySid(h.sid);h.sid===this.localParticipant.sid&&(f=this.localParticipant),f&&(f.audioLevel=h.level,f.setIsSpeaking(h.active),h.active?l.set(h.sid,f):l.delete(h.sid))});const d=Array.from(l.values());d.sort((h,f)=>f.audioLevel-h.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(re.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(l=>{const d=this.getRemoteParticipantBySid(l.participantSid);if(!d)return;const h=d.getTrackPublicationBySid(l.trackSid);if(!h||!h.track)return;const f=K.streamStateFromProto(l.state);h.track.setStreamState(f),f!==h.track.streamState&&(d.emit(ce.TrackStreamStateChanged,h,h.track.streamState),this.emitWhenConnected(re.TrackStreamStateChanged,h,h.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=o=>{const l=this.getRemoteParticipantBySid(o.participantSid);if(!l)return;const d=l.getTrackPublicationBySid(o.trackSid);d&&d.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const l=Array.from(this.remoteParticipants.values()).find(h=>h.trackPublications.has(o.trackSid));if(!l)return;const d=l.getTrackPublicationBySid(o.trackSid);d&&d.setSubscriptionError(o.err)},this.handleDataPacket=(o,l)=>{const d=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(d,o.value.value,o.kind,l);else if(o.value.case==="transcription")this.handleTranscription(d,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(d,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(d,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,d);else if(o.value.case==="streamHeader"||o.value.case==="streamChunk"||o.value.case==="streamTrailer")this.handleDataStream(o,l);else if(o.value.case==="rpcRequest"){const h=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,h.id,h.method,h.payload,h.responseTimeoutMs,h.version)}},this.handleUserPacket=(o,l,d,h)=>{this.emit(re.DataReceived,l.payload,o,d,l.topic,h),o?.emit(ce.DataReceived,l.payload,d,h)},this.handleSipDtmf=(o,l)=>{this.emit(re.SipDTMFReceived,l,o),o?.emit(ce.SipDTMFReceived,l)},this.handleTranscription=(o,l)=>{const d=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),h=d?.trackPublications.get(l.trackId),f=CG(l,this.transcriptionReceivedTimes);h?.emit(Te.TranscriptionReceived,f),d?.emit(ce.TranscriptionReceived,f,h),this.emit(re.TranscriptionReceived,f,d,h)},this.handleChatMessage=(o,l)=>{const d=EG(l);this.emit(re.ChatMessage,d,o)},this.handleMetrics=(o,l)=>{this.emit(re.MetricsReceived,o,l)},this.handleDataStream=(o,l)=>{this.incomingDataStreamManager.handleDataStreamPacket(o,l)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(re.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(re.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(re.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(re.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>M(this,void 0,void 0,function*(){var o;((o=hr())===null||o===void 0?void 0:o.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(re.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const l=this.roomInfo;this.roomInfo=o,l&&l.metadata!==o.metadata&&this.emitWhenConnected(re.RoomMetadataChanged,o.metadata),l?.activeRecording!==o.activeRecording&&this.emitWhenConnected(re.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const d=this.getRemoteParticipantBySid(l.participantSid);d&&d.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(re.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(re.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(re.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(re.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(re.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var l;(l=o?.onPublish)===null||l===void 0||l.call(o,this)},this.onLocalTrackPublished=o=>M(this,void 0,void 0,function*(){var l,d,h,f,p,y;(l=o.track)===null||l===void 0||l.on(Te.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=o.track)===null||d===void 0||d.on(Te.Restarted,this.onLocalTrackRestarted),(p=(f=(h=o.track)===null||h===void 0?void 0:h.getProcessor())===null||f===void 0?void 0:f.onPublish)===null||p===void 0||p.call(f,this),this.emit(re.LocalTrackPublished,o,this.localParticipant),Ws(o.track)&&(yield o.track.checkForSilence())&&this.emit(re.LocalAudioSilenceDetected,o);const b=yield(y=o.track)===null||y===void 0?void 0:y.getDeviceId(!1),k=Q0(o.source);k&&b&&b!==this.localParticipant.activeDeviceMap.get(k)&&(this.localParticipant.activeDeviceMap.set(k,b),this.emit(re.ActiveDeviceChanged,k,b))}),this.onLocalTrackUnpublished=o=>{var l,d;(l=o.track)===null||l===void 0||l.off(Te.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=o.track)===null||d===void 0||d.off(Te.Restarted,this.onLocalTrackRestarted),this.emit(re.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>M(this,void 0,void 0,function*(){const l=yield o.getDeviceId(!1),d=Q0(o.source);d&&l&&l!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,l),this.emit(re.ActiveDeviceChanged,d,l))}),this.onLocalConnectionQualityChanged=o=>{this.emit(re.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=(o,l)=>{this.emit(re.MediaDevicesError,o,l)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(re.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(re.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},nZ),t),this.log=co((r=this.options.loggerName)!==null&&r!==void 0?r:zi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},OA),t?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},MA),t?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},tZ),t?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new PZ,this.outgoingDataStreamManager=new AZ(this.engine,this.log),this.disconnectLock=new Ar,this.localParticipant=new UZ("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",na(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",na(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",na(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),jr()){const o=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),lo.cleanupRegistry&&lo.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(t,n){return this.incomingDataStreamManager.registerTextStreamHandler(t,n)}unregisterTextStreamHandler(t){return this.incomingDataStreamManager.unregisterTextStreamHandler(t)}registerByteStreamHandler(t,n){return this.incomingDataStreamManager.registerByteStreamHandler(t,n)}unregisterByteStreamHandler(t){return this.incomingDataStreamManager.unregisterByteStreamHandler(t)}registerRpcMethod(t,n){if(this.rpcHandlers.has(t))throw Error("RPC handler already registered for method ".concat(t,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setE2EEEnabled(t){return M(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new DG(r,n),this.e2eeManager.on(Qo.ParticipantEncryptionStatusChanged,(i,s)=>{NG(s)&&(this.isE2EEEnabled=i),this.emit(re.ParticipantEncryptionStatusChanged,i,s)}),this.e2eeManager.on(Qo.EncryptionError,i=>this.emit(re.EncryptionError,i)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return M(this,void 0,void 0,function*(){return this.state===ft.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(je.RoomUpdate,r),t(i.sid))};this.engine.on(je.RoomUpdate,r),this.once(re.Disconnected,()=>{this.engine.off(je.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new CZ(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(je.ParticipantUpdate,this.handleParticipantUpdates).on(je.RoomUpdate,this.handleRoomUpdate).on(je.SpeakersChanged,this.handleSpeakersChanged).on(je.StreamStateChanged,this.handleStreamStateUpdate).on(je.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(je.SubscriptionError,this.handleSubscriptionError).on(je.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(je.MediaTrackAdded,(t,n,r)=>{this.onTrackAdded(t,n,r)}).on(je.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(je.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(je.DataPacketReceived,this.handleDataPacket).on(je.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(ft.SignalReconnecting)&&this.emit(re.SignalReconnecting)}).on(je.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(ft.Connected)&&this.emit(re.Reconnected)}).on(je.SignalResumed,()=>{this.bufferedEvents=[],(this.state===ft.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(je.Restarting,this.handleRestarting).on(je.SignalRestarted,this.handleSignalRestarted).on(je.Offline,()=>{this.setAndEmitConnectionState(ft.Reconnecting)&&this.emit(re.Reconnecting)}).on(je.DCBufferStatusChanged,(t,n)=>{this.emit(re.DCBufferStatusChanged,t,n)}).on(je.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ce.LocalTrackSubscribed,n),this.emitWhenConnected(re.LocalTrackSubscribed,n,this.localParticipant)}).on(je.RoomMoved,t=>{this.log.debug("room moved",t),t.room&&this.handleRoomUpdate(t.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(re.Moved,t.room.name),t.participant?this.handleParticipantUpdates([t.participant,...t.otherParticipants]):this.handleParticipantUpdates(t.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Un.getInstance().getDevices(t,n)}prepareConnection(t,n){return M(this,void 0,void 0,function*(){if(this.state===ft.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if(K0(new URL(t))&&n){this.regionUrlProvider=new tb(t,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===ft.Disconnected&&(this.regionUrl=r,yield fetch(G0(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(G0(t),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return M(this,void 0,void 0,function*(){let r=()=>M(this,void 0,void 0,function*(){}),i;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new ls({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new ls({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new ls({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new ls({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>M(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new ls({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>M(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new ls({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new ls({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),r=()=>M(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new Rp({reason:Fi.CLIENT_INITIATED,action:nl.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new ls({scenario:{case:"subscriberBandwidth",value:Ia(n)}});break;case"leave-full-reconnect":i=new ls({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return M(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var l,d,h,f,p,y,b;let k=!0,x=!1;const S=o?{exact:i}:i;if(r==="audioinput"){x=s.localParticipant.audioTrackPublications.size===0;const E=(l=s.getActiveDevice(r))!==null&&l!==void 0?l:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=S;const T=Array.from(s.localParticipant.audioTrackPublications.values()).filter(j=>j.source===K.Source.Microphone);try{k=(yield Promise.all(T.map(j=>{var N;return(N=j.audioTrack)===null||N===void 0?void 0:N.setDeviceId(S)}))).every(j=>j===!0)}catch(j){throw s.options.audioCaptureDefaults.deviceId=E,j}const P=T.some(j=>{var N,R;return(R=(N=j.track)===null||N===void 0?void 0:N.isMuted)!==null&&R!==void 0?R:!1});k&&P&&(x=!0)}else if(r==="videoinput"){x=s.localParticipant.videoTrackPublications.size===0;const E=(d=s.getActiveDevice(r))!==null&&d!==void 0?d:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=S;const T=Array.from(s.localParticipant.videoTrackPublications.values()).filter(j=>j.source===K.Source.Camera);try{k=(yield Promise.all(T.map(j=>{var N;return(N=j.videoTrack)===null||N===void 0?void 0:N.setDeviceId(S)}))).every(j=>j===!0)}catch(j){throw s.options.videoCaptureDefaults.deviceId=E,j}const P=T.some(j=>{var N,R;return(R=(N=j.track)===null||N===void 0?void 0:N.isMuted)!==null&&R!==void 0?R:!1});k&&P&&(x=!0)}else if(r==="audiooutput"){if(x=!0,!W0()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(i=(h=yield Un.getInstance().normalizeDeviceId("audiooutput",i))!==null&&h!==void 0?h:""),(f=(b=s.options).audioOutput)!==null&&f!==void 0||(b.audioOutput={});const E=(p=s.getActiveDevice(r))!==null&&p!==void 0?p:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i;try{s.options.webAudioMix&&((y=s.audioContext)===null||y===void 0||y.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(T=>T.setAudioOutput({deviceId:i})))}catch(T){throw s.options.audioOutput.deviceId=E,T}}return x&&(s.localParticipant.activeDeviceMap.set(r,i),s.emit(re.ActiveDeviceChanged,r,i)),k})()})}setupLocalParticipantEvents(){this.localParticipant.on(ce.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ce.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ce.AttributesChanged,this.onLocalAttributesChanged).on(ce.TrackMuted,this.onLocalTrackMuted).on(ce.TrackUnmuted,this.onLocalTrackUnmuted).on(ce.LocalTrackPublished,this.onLocalTrackPublished).on(ce.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ce.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ce.MediaDevicesError,this.onMediaDevicesError).on(ce.AudioStreamAcquired,this.startAudio).on(ce.ChatMessage,this.onLocalChatMessageSent).on(ce.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,r){if(this.state===ft.Connecting||this.state===ft.Reconnecting){const p=()=>{this.log.debug("deferring on track for later",{mediaTrackId:t.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(b=>b.id)}),this.onTrackAdded(t,n,r),y()},y=()=>{this.off(re.Reconnected,p),this.off(re.Connected,p),this.off(re.Disconnected,y)};this.once(re.Reconnected,p),this.once(re.Connected,p),this.once(re.Disconnected,y);return}if(this.state===ft.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(t.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=hG(n.id),s=i[0];let o=i[1],l=t.id;if(o&&o.startsWith("TR")&&(l=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(p=>p.sid===s);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}if(!l.startsWith("TR")){const p=this.engine.getTrackIdForReceiver(r);if(!p){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(s),this.logContext);return}l=p}l.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(s,", streamId: ").concat(o,", trackId: ").concat(l),Object.assign(Object.assign({},this.logContext),{rpID:s,streamId:o,trackId:l}));let h;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?h=this.options.adaptiveStream:h={});const f=d.addSubscribedMediaTrack(t,l,n,r,h);f?.isEncrypted&&!this.e2eeManager&&this.emit(re.EncryptionError,new Error("Encrypted ".concat(f.source," track received from participant ").concat(d.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==ft.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,o,l;i.track&&this.localParticipant.unpublishTrack(i.track,t),t?((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop()):(l=i.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(ce.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ce.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ce.AttributesChanged,this.onLocalAttributesChanged).off(ce.TrackMuted,this.onLocalTrackMuted).off(ce.TrackUnmuted,this.onLocalTrackUnmuted).off(ce.LocalTrackPublished,this.onLocalTrackPublished).off(ce.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ce.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ce.MediaDevicesError,this.onMediaDevicesError).off(ce.AudioStreamAcquired,this.startAudio).off(ce.ChatMessage,this.onLocalChatMessageSent).off(ce.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),jr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ft.Disconnected),this.emit(re.Disconnected,n)}}}handleParticipantDisconnected(t,n){var r;this.remoteParticipants.delete(t),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(t),n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(re.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(t,n,r,i,s,o){return M(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(t,n),o!==1){yield this.engine.publishRpcResponse(t,n,null,Qt.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(r);if(!l){yield this.engine.publishRpcResponse(t,n,null,Qt.builtIn("UNSUPPORTED_METHOD"));return}let d=null,h=null;try{const f=yield l({requestId:n,callerIdentity:t,payload:i,responseTimeout:s});Zx(f)>DA?(d=Qt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):h=f}catch(f){f instanceof Qt?d=f:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),f),d=Qt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(t,n,h,d)})}selectDefaultDevices(){return M(this,void 0,void 0,function*(){var t,n,r;const i=Un.getInstance().previousDevices,s=yield Un.getInstance().getDevices(void 0,!1),o=hr();if(o?.name==="Chrome"&&o.os!=="iOS")for(let d of s){const h=i.find(f=>f.deviceId===d.deviceId);h&&h.label!==""&&h.kind===d.kind&&h.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(re.ActiveDeviceChanged,d.kind,d.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let d of l){const h=PG(d),f=this.localParticipant.getTrackPublication(h);if(f&&(!((t=f.track)===null||t===void 0)&&t.isUserProvided))continue;const p=s.filter(b=>b.kind===d),y=this.getActiveDevice(d);if(y===((n=i.filter(b=>b.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&p.length>0&&((r=p[0])===null||r===void 0?void 0:r.deviceId)!==y){yield this.switchActiveDevice(d,p[0].deviceId);continue}d==="audioinput"&&!hd()||d==="videoinput"||p.length>0&&!p.find(b=>b.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!hd())&&(yield this.switchActiveDevice(d,p[0].deviceId))}})}acquireAudioContext(){return M(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=RA())!==null&&t!==void 0?t:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),fr(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(re.AudioPlaybackStatusChanged,r))})}createParticipant(t,n){var r;let i;return n?i=Am.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new Am(this.engine.client,"",t,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const i=this.remoteParticipants.get(t);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(t,n);return this.remoteParticipants.set(t,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(re.ParticipantConnected,r),r.on(ce.TrackPublished,i=>{this.emitWhenConnected(re.TrackPublished,i,r)}).on(ce.TrackSubscribed,(i,s)=>{i.kind===K.Kind.Audio?(i.on(Te.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(Te.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===K.Kind.Video&&(i.on(Te.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(Te.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(re.TrackSubscribed,i,s,r)}).on(ce.TrackUnpublished,i=>{this.emit(re.TrackUnpublished,i,r)}).on(ce.TrackUnsubscribed,(i,s)=>{this.emit(re.TrackUnsubscribed,i,s,r)}).on(ce.TrackMuted,i=>{this.emitWhenConnected(re.TrackMuted,i,r)}).on(ce.TrackUnmuted,i=>{this.emitWhenConnected(re.TrackUnmuted,i,r)}).on(ce.ParticipantMetadataChanged,i=>{this.emitWhenConnected(re.ParticipantMetadataChanged,i,r)}).on(ce.ParticipantNameChanged,i=>{this.emitWhenConnected(re.ParticipantNameChanged,i,r)}).on(ce.AttributesChanged,i=>{this.emitWhenConnected(re.ParticipantAttributesChanged,i,r)}).on(ce.ConnectionQualityChanged,i=>{this.emitWhenConnected(re.ConnectionQualityChanged,i,r)}).on(ce.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(re.ParticipantPermissionsChanged,i,r)}).on(ce.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(re.TrackSubscriptionStatusChanged,i,s,r)}).on(ce.TrackSubscriptionFailed,(i,s)=>{this.emit(re.TrackSubscriptionFailed,i,r,s)}).on(ce.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(re.TrackSubscriptionPermissionChanged,i,s,r)}).on(ce.Active,()=>{this.emitWhenConnected(re.ParticipantActive,r),r.kind===cd.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&TG(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=Gn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Fi.STATE_MISMATCH))):t=0},BZ)}clearConnectionReconcile(){this.connectionReconcileInterval&&Gn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(re.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,r]=t;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===ft.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,r]);else if(this.state===ft.Connected)return this.emit(t,...r);return!1}simulateParticipants(t){return M(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new Np({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Bt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Xa({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(re.SignalConnected),this.emit(re.Connected),this.setAndEmitConnectionState(ft.Connected),i.video){const o=new _m(K.Kind.Video,new Kc({source:pn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ri.AUDIO,name:"video-dummy"}),new Pm(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:UE(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(ce.LocalTrackPublished,o)}if(i.audio){const o=new _m(K.Kind.Audio,new Kc({source:pn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ri.AUDIO}),new jm(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:ky(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(ce.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let l=new Xa({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:tl.ACTIVE,tracks:[],joinedAt:Bt.parse(Date.now())});const d=this.getOrCreateParticipant(l.identity,l);if(s.video){const h=UE(160*((r=s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),f=new Kc({source:pn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ri.AUDIO});d.addSubscribedMediaTrack(h,f.sid,new MediaStream([h]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}if(s.audio){const h=ky(),f=new Kc({source:pn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ri.AUDIO});d.addSubscribedMediaTrack(h,f.sid,new MediaStream([h]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}d.updateInfo(l)}})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t!==re.ActiveSpeakersChanged&&t!==re.TranscriptionReceived){const s=HA(r).filter(o=>o!==void 0);(t===re.TrackSubscribed||t===re.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:s})),this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:s}))}return super.emit(t,...r)}}lo.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{e()});function HA(e){return e.map(t=>{if(t)return Array.isArray(t)?HA(t):typeof t=="object"?"logContext"in t?t.logContext:void 0:t})}var Pi;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(Pi||(Pi={}));class ma extends Rs.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Pi.IDLE,this.logs=[],this.options={},this.url=t,this.token=n,this.name=this.constructor.name,this.room=new lo(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(t){return M(this,void 0,void 0,function*(){if(this.status!==Pi.IDLE)throw Error("check is running already");this.setStatus(Pi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Pi.SKIPPED&&this.setStatus(this.isSuccess()?Pi.SUCCESS:Pi.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(t){return M(this,void 0,void 0,function*(){return this.room.state===ft.Connected?this.room:(t||(t=this.url),yield this.room.connect(t,this.token,this.connectOptions),this.room)})}disconnect(){return M(this,void 0,void 0,function*(){this.room&&this.room.state!==ft.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(Pi.SKIPPED)}switchProtocol(t){return M(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(re.Reconnecting,()=>{n=!0}),this.room.once(re.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(t)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield fr(100)}throw new Error("Could not reconnect using ".concat(t," protocol after 10 seconds"))})}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class zZ extends ma{get description(){return"Cloud regions"}perform(){return M(this,void 0,void 0,function*(){const t=new tb(this.url,this.token);if(!t.isCloud()){this.skip();return}const n=[],r=new Set;for(let s=0;s<3;s++){const o=yield t.getNextBestRegionUrl();if(!o)break;if(r.has(o))continue;r.add(o);const l=yield this.checkCloudRegion(o);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((s,o)=>(s.duration-o.duration)*.5+(s.rtt-o.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkCloudRegion(t){return M(this,void 0,void 0,function*(){var n,r;yield this.connect(t),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,d=1e6/o,h="A".repeat(o),f=Date.now();for(let k=0;k<d;k++)yield s.write(h);yield s.close();const p=Date.now(),y=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),b={region:i,rtt:1e4,duration:p-f};return y?.forEach(k=>{k.type==="candidate-pair"&&k.nominated&&(b.rtt=k.currentRoundTripTime*1e3)}),yield this.disconnect(),b})}}const Ry=1e4;class $Z extends ma{get description(){return"Connection via UDP vs TCP"}perform(){return M(this,void 0,void 0,function*(){const t=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=t,t.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(t.packetsLost-n.packetsLost)/t.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(Ry/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(Ry/1e3)*100).toFixed(2),"%"))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkConnectionProtocol(t){return M(this,void 0,void 0,function*(){yield this.connect(),t==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const s=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const l=n.captureStream(30).getVideoTracks()[0],h=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,f={protocol:t,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},p=setInterval(()=>M(this,void 0,void 0,function*(){const y=yield h.getRTCStatsReport();y?.forEach(b=>{b.type==="outbound-rtp"?(f.packetsSent=b.packetsSent,f.qualityLimitationDurations=b.qualityLimitationDurations,f.bitrateTotal+=b.targetBitrate,f.count++):b.type==="remote-inbound-rtp"&&(f.packetsLost=b.packetsLost,f.rttTotal+=b.roundTripTime,f.jitterTotal+=b.jitter)})}),1e3);return yield new Promise(y=>setTimeout(y,Ry)),clearInterval(p),l.stop(),n.remove(),yield this.disconnect(),f})}}class VZ extends ma{get description(){return"Can publish audio"}perform(){return M(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield DZ();if(yield _A(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(l=>setTimeout(l,3e3));const s=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!s)throw new Error("Could not get RTCStats");let o=0;if(s.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(o=l.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class qZ extends ma{get description(){return"Can publish video"}perform(){return M(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield MZ();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(s+=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(t){return M(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(t.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var s,o,l,d;const h=document.createElement("canvas"),f=t.getSettings(),p=(o=(s=f.width)!==null&&s!==void 0?s:r.videoWidth)!==null&&o!==void 0?o:1280,y=(d=(l=f.height)!==null&&l!==void 0?l:r.videoHeight)!==null&&d!==void 0?d:720;h.width=p,h.height=y;const b=h.getContext("2d");b.drawImage(r,0,0);const x=b.getImageData(0,0,h.width,h.height).data;let S=!0;for(let E=0;E<x.length;E+=4)if(x[E]!==0||x[E+1]!==0||x[E+2]!==0){S=!1;break}S?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class HZ extends ma{get description(){return"Resuming connection after interruption"}perform(){return M(this,void 0,void 0,function*(){var t;const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(h=>{setTimeout(h,5e3),s=h}),l=()=>{r=!0};n.on(re.SignalReconnecting,l).on(re.Reconnecting,l).on(re.Reconnected,()=>{i=!0,s(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const d=n.engine.client.onClose;if(d&&d(""),yield o,r){if(!i||n.state!==ft.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class WZ extends ma{get description(){return"Can connect via TURN"}perform(){return M(this,void 0,void 0,function*(){var t,n;const r=new qx,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let s=!1,o=!1,l=!1;for(let d of i.iceServers)for(let h of d.urls)h.startsWith("turn:")?(o=!0,l=!0):h.startsWith("turns:")&&(o=!0,l=!0,s=!0),h.startsWith("stun:")&&(l=!0);l?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class KZ extends ma{get description(){return"Establishing WebRTC connection"}perform(){return M(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(re.SignalConnected,()=>{var r;const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,o)=>{if(s.candidate){const l=new RTCIceCandidate(s);let d="".concat(l.protocol," ").concat(l.address,":").concat(l.port," ").concat(l.type);l.address&&(GZ(l.address)?d+=" (private)":l.protocol==="tcp"&&l.tcpType==="passive"?(t=!0,d+=" (passive)"):l.protocol==="udp"&&(n=!0)),this.appendMessage(d)}i&&i(s,o)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),rt.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function GZ(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class ZZ extends ma{get description(){return"Connecting to signal connection via WebSocket"}perform(){return M(this,void 0,void 0,function*(){var t,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new qx;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((t=s.serverInfo)===null||t===void 0?void 0:t.edition)===RR.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Mce extends Rs.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=r}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:Pi.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==Pi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return M(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new t(this.url,this.token,this.options),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(ZZ)})}checkWebRTC(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(KZ)})}checkTURN(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(WZ)})}checkReconnect(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(HZ)})}checkPublishAudio(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(VZ)})}checkPublishVideo(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(qZ)})}checkConnectionProtocol(){return M(this,void 0,void 0,function*(){const t=yield this.createAndRunCheck($Z);if(t.data&&"protocol"in t.data){const n=t.data;this.options.protocol=n.protocol}return t})}checkCloudRegion(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(zZ)})}}function ht(e,t,n){return(t=QZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QZ(e){var t=JZ(e,"string");return typeof t=="symbol"?t:t+""}new TextEncoder;new TextDecoder;class gr extends Error{constructor(t,n){var r;super(t,n),ht(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}ht(gr,"code","ERR_JOSE_GENERIC");class YZ extends gr{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(t,{cause:{claim:r,reason:i,payload:n}}),ht(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),ht(this,"claim",void 0),ht(this,"reason",void 0),ht(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}ht(YZ,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class XZ extends gr{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(t,{cause:{claim:r,reason:i,payload:n}}),ht(this,"code","ERR_JWT_EXPIRED"),ht(this,"claim",void 0),ht(this,"reason",void 0),ht(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}ht(XZ,"code","ERR_JWT_EXPIRED");class eJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}ht(eJ,"code","ERR_JOSE_ALG_NOT_ALLOWED");class tJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JOSE_NOT_SUPPORTED")}}ht(tJ,"code","ERR_JOSE_NOT_SUPPORTED");class nJ extends gr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(t,n),ht(this,"code","ERR_JWE_DECRYPTION_FAILED")}}ht(nJ,"code","ERR_JWE_DECRYPTION_FAILED");class rJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JWE_INVALID")}}ht(rJ,"code","ERR_JWE_INVALID");class iJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JWS_INVALID")}}ht(iJ,"code","ERR_JWS_INVALID");class sJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JWT_INVALID")}}ht(sJ,"code","ERR_JWT_INVALID");class oJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JWK_INVALID")}}ht(oJ,"code","ERR_JWK_INVALID");class aJ extends gr{constructor(){super(...arguments),ht(this,"code","ERR_JWKS_INVALID")}}ht(aJ,"code","ERR_JWKS_INVALID");class cJ extends gr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(t,n),ht(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}ht(cJ,"code","ERR_JWKS_NO_MATCHING_KEY");class lJ extends gr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(t,n),ht(this,Symbol.asyncIterator,void 0),ht(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}ht(lJ,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class uJ extends gr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(t,n),ht(this,"code","ERR_JWKS_TIMEOUT")}}ht(uJ,"code","ERR_JWKS_TIMEOUT");class dJ extends gr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(t,n),ht(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}ht(dJ,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function hJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=za(e)?e.mediaStreamTrack:e,i=r.getSettings();let s={facingMode:(n=t.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const o=i.facingMode;rt.trace("rawFacingMode",{rawFacingMode:o}),o&&typeof o=="string"&&pJ(o)&&(s={facingMode:o,confidence:"high"})}if(["low","medium"].includes(s.confidence)){rt.trace("Try to get facing mode from device label: (".concat(r.label,")"));const o=mJ(r.label);o!==void 0&&(s=o)}return s}const aT=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),fJ=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function mJ(e){var t;const n=e.trim().toLowerCase();if(n!=="")return aT.has(n)?aT.get(n):(t=Array.from(fJ.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||t===void 0?void 0:t[1]}function pJ(e){return e===void 0||["user","environment","left","right"].includes(e)}const Im=Math.min,$a=Math.max,Om=Math.round,hf=Math.floor,bs=e=>({x:e,y:e}),gJ={left:"right",right:"left",bottom:"top",top:"bottom"},vJ={start:"end",end:"start"};function cT(e,t,n){return $a(e,Im(t,n))}function Mp(e,t){return typeof e=="function"?e(t):e}function nc(e){return e.split("-")[0]}function Dp(e){return e.split("-")[1]}function WA(e){return e==="x"?"y":"x"}function KA(e){return e==="y"?"height":"width"}function bl(e){return["top","bottom"].includes(nc(e))?"y":"x"}function GA(e){return WA(bl(e))}function yJ(e,t,n){n===void 0&&(n=!1);const r=Dp(e),i=GA(e),s=KA(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Mm(o)),[o,Mm(o)]}function bJ(e){const t=Mm(e);return[rb(e),t,rb(t)]}function rb(e){return e.replace(/start|end/g,t=>vJ[t])}function xJ(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function wJ(e,t,n,r){const i=Dp(e);let s=xJ(nc(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(rb)))),s}function Mm(e){return e.replace(/left|right|bottom|top/g,t=>gJ[t])}function kJ(e){return{top:0,right:0,bottom:0,left:0,...e}}function SJ(e){return typeof e!="number"?kJ(e):{top:e,right:e,bottom:e,left:e}}function Dm(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function lT(e,t,n){let{reference:r,floating:i}=e;const s=bl(t),o=GA(t),l=KA(o),d=nc(t),h=s==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,y=r[l]/2-i[l]/2;let b;switch(d){case"top":b={x:f,y:r.y-i.height};break;case"bottom":b={x:f,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:p};break;case"left":b={x:r.x-i.width,y:p};break;default:b={x:r.x,y:r.y}}switch(Dp(t)){case"start":b[o]-=y*(n&&h?-1:1);break;case"end":b[o]+=y*(n&&h?-1:1);break}return b}const CJ=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:p}=lT(h,r,d),y=r,b={},k=0;for(let x=0;x<l.length;x++){const{name:S,fn:E}=l[x],{x:T,y:P,data:j,reset:N}=await E({x:f,y:p,initialPlacement:r,placement:y,strategy:i,middlewareData:b,rects:h,platform:o,elements:{reference:e,floating:t}});f=T??f,p=P??p,b={...b,[S]:{...b[S],...j}},N&&k<=50&&(k++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(h=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):N.rects),{x:f,y:p}=lT(h,y,d)),x=-1)}return{x:f,y:p,placement:y,strategy:i,middlewareData:b}};async function ZA(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:b=0}=Mp(t,e),k=SJ(b),x=l[y?p==="floating"?"reference":"floating":p],S=Dm(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),E=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),P=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},j=Dm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:T,strategy:d}):E);return{top:(S.top-j.top+k.top)/P.y,bottom:(j.bottom-S.bottom+k.bottom)/P.y,left:(S.left-j.left+k.left)/P.x,right:(j.right-S.right+k.right)/P.x}}const EJ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:d,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:x=!0,...S}=Mp(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=nc(i),T=bl(l),P=nc(l)===l,j=await(d.isRTL==null?void 0:d.isRTL(h.floating)),N=y||(P||!x?[Mm(l)]:bJ(l)),R=k!=="none";!y&&R&&N.push(...wJ(l,x,k,j));const A=[l,...N],I=await ZA(t,S),D=[];let z=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&D.push(I[E]),p){const J=yJ(i,o,j);D.push(I[J[0]],I[J[1]])}if(z=[...z,{placement:i,overflows:D}],!D.every(J=>J<=0)){var q,V;const J=(((q=s.flip)==null?void 0:q.index)||0)+1,we=A[J];if(we)return{data:{index:J,overflows:z},reset:{placement:we}};let X=(V=z.filter(me=>me.overflows[0]<=0).sort((me,U)=>me.overflows[1]-U.overflows[1])[0])==null?void 0:V.placement;if(!X)switch(b){case"bestFit":{var te;const me=(te=z.filter(U=>{if(R){const ue=bl(U.placement);return ue===T||ue==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(ue=>ue>0).reduce((ue,fe)=>ue+fe,0)]).sort((U,ue)=>U[1]-ue[1])[0])==null?void 0:te[0];me&&(X=me);break}case"initialPlacement":X=l;break}if(i!==X)return{reset:{placement:X}}}return{}}}};async function TJ(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=nc(n),l=Dp(n),d=bl(n)==="y",h=["left","top"].includes(o)?-1:1,f=s&&d?-1:1,p=Mp(t,e);let{mainAxis:y,crossAxis:b,alignmentAxis:k}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof k=="number"&&(b=l==="end"?k*-1:k),d?{x:b*f,y:y*h}:{x:y*h,y:b*f}}const NJ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=t,d=await TJ(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:s+d.y,data:{...d,placement:o}}}}},jJ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:S=>{let{x:E,y:T}=S;return{x:E,y:T}}},...d}=Mp(e,t),h={x:n,y:r},f=await ZA(t,d),p=bl(nc(i)),y=WA(p);let b=h[y],k=h[p];if(s){const S=y==="y"?"top":"left",E=y==="y"?"bottom":"right",T=b+f[S],P=b-f[E];b=cT(T,b,P)}if(o){const S=p==="y"?"top":"left",E=p==="y"?"bottom":"right",T=k+f[S],P=k-f[E];k=cT(T,k,P)}const x=l.fn({...t,[y]:b,[p]:k});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[y]:s,[p]:o}}}}}};function Lp(){return typeof window<"u"}function zl(e){return JA(e)?(e.nodeName||"").toLowerCase():"#document"}function Gr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function As(e){var t;return(t=(JA(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function JA(e){return Lp()?e instanceof Node||e instanceof Gr(e).Node:!1}function Vi(e){return Lp()?e instanceof Element||e instanceof Gr(e).Element:!1}function Ts(e){return Lp()?e instanceof HTMLElement||e instanceof Gr(e).HTMLElement:!1}function uT(e){return!Lp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gr(e).ShadowRoot}function Md(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=qi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function PJ(e){return["table","td","th"].includes(zl(e))}function Fp(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Yx(e){const t=Xx(),n=Vi(e)?qi(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _J(e){let t=la(e);for(;Ts(t)&&!xl(t);){if(Yx(t))return t;if(Fp(t))return null;t=la(t)}return null}function Xx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xl(e){return["html","body","#document"].includes(zl(e))}function qi(e){return Gr(e).getComputedStyle(e)}function Up(e){return Vi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function la(e){if(zl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||uT(e)&&e.host||As(e);return uT(t)?t.host:t}function QA(e){const t=la(e);return xl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ts(t)&&Md(t)?t:QA(t)}function fd(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=QA(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Gr(i);if(s){const l=ib(o);return t.concat(o,o.visualViewport||[],Md(i)?i:[],l&&n?fd(l):[])}return t.concat(i,fd(i,[],n))}function ib(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function YA(e){const t=qi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ts(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,l=Om(n)!==s||Om(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function ew(e){return Vi(e)?e:e.contextElement}function ol(e){const t=ew(e);if(!Ts(t))return bs(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=YA(t);let o=(s?Om(n.width):n.width)/r,l=(s?Om(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const RJ=bs(0);function XA(e){const t=Gr(e);return!Xx()||!t.visualViewport?RJ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function AJ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gr(e)?!1:t}function rc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=ew(e);let o=bs(1);t&&(r?Vi(r)&&(o=ol(r)):o=ol(e));const l=AJ(s,n,r)?XA(s):bs(0);let d=(i.left+l.x)/o.x,h=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const y=Gr(s),b=r&&Vi(r)?Gr(r):r;let k=y,x=ib(k);for(;x&&r&&b!==k;){const S=ol(x),E=x.getBoundingClientRect(),T=qi(x),P=E.left+(x.clientLeft+parseFloat(T.paddingLeft))*S.x,j=E.top+(x.clientTop+parseFloat(T.paddingTop))*S.y;d*=S.x,h*=S.y,f*=S.x,p*=S.y,d+=P,h+=j,k=Gr(x),x=ib(k)}}return Dm({width:f,height:p,x:d,y:h})}function tw(e,t){const n=Up(e).scrollLeft;return t?t.left+n:rc(As(e)).left+n}function eI(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:tw(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function IJ(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=As(r),l=t?Fp(t.floating):!1;if(r===o||l&&s)return n;let d={scrollLeft:0,scrollTop:0},h=bs(1);const f=bs(0),p=Ts(r);if((p||!p&&!s)&&((zl(r)!=="body"||Md(o))&&(d=Up(r)),Ts(r))){const b=rc(r);h=ol(r),f.x=b.x+r.clientLeft,f.y=b.y+r.clientTop}const y=o&&!p&&!s?eI(o,d,!0):bs(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+f.x+y.x,y:n.y*h.y-d.scrollTop*h.y+f.y+y.y}}function OJ(e){return Array.from(e.getClientRects())}function MJ(e){const t=As(e),n=Up(e),r=e.ownerDocument.body,i=$a(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=$a(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+tw(e);const l=-n.scrollTop;return qi(r).direction==="rtl"&&(o+=$a(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function DJ(e,t){const n=Gr(e),r=As(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,d=0;if(i){s=i.width,o=i.height;const h=Xx();(!h||h&&t==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}return{width:s,height:o,x:l,y:d}}function LJ(e,t){const n=rc(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ts(e)?ol(e):bs(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,d=i*s.x,h=r*s.y;return{width:o,height:l,x:d,y:h}}function dT(e,t,n){let r;if(t==="viewport")r=DJ(e,n);else if(t==="document")r=MJ(As(e));else if(Vi(t))r=LJ(t,n);else{const i=XA(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Dm(r)}function tI(e,t){const n=la(e);return n===t||!Vi(n)||xl(n)?!1:qi(n).position==="fixed"||tI(n,t)}function FJ(e,t){const n=t.get(e);if(n)return n;let r=fd(e,[],!1).filter(l=>Vi(l)&&zl(l)!=="body"),i=null;const s=qi(e).position==="fixed";let o=s?la(e):e;for(;Vi(o)&&!xl(o);){const l=qi(o),d=Yx(o);!d&&l.position==="fixed"&&(i=null),(s?!d&&!i:!d&&l.position==="static"&&i&&["absolute","fixed"].includes(i.position)||Md(o)&&!d&&tI(e,o))?r=r.filter(h=>h!==o):i=l,o=la(o)}return t.set(e,r),r}function UJ(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?Fp(t)?[]:FJ(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((d,h)=>{const f=dT(t,h,i);return d.top=$a(f.top,d.top),d.right=Im(f.right,d.right),d.bottom=Im(f.bottom,d.bottom),d.left=$a(f.left,d.left),d},dT(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function BJ(e){const{width:t,height:n}=YA(e);return{width:t,height:n}}function zJ(e,t,n){const r=Ts(t),i=As(t),s=n==="fixed",o=rc(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const d=bs(0);if(r||!r&&!s)if((zl(t)!=="body"||Md(i))&&(l=Up(t)),r){const y=rc(t,!0,s,t);d.x=y.x+t.clientLeft,d.y=y.y+t.clientTop}else i&&(d.x=tw(i));const h=i&&!r&&!s?eI(i,l):bs(0),f=o.left+l.scrollLeft-d.x-h.x,p=o.top+l.scrollTop-d.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function Ay(e){return qi(e).position==="static"}function hT(e,t){if(!Ts(e)||qi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return As(e)===n&&(n=n.ownerDocument.body),n}function nI(e,t){const n=Gr(e);if(Fp(e))return n;if(!Ts(e)){let i=la(e);for(;i&&!xl(i);){if(Vi(i)&&!Ay(i))return i;i=la(i)}return n}let r=hT(e,t);for(;r&&PJ(r)&&Ay(r);)r=hT(r,t);return r&&xl(r)&&Ay(r)&&!Yx(r)?n:r||_J(e)||n}const $J=async function(e){const t=this.getOffsetParent||nI,n=this.getDimensions,r=await n(e.floating);return{reference:zJ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VJ(e){return qi(e).direction==="rtl"}const qJ={convertOffsetParentRelativeRectToViewportRelativeRect:IJ,getDocumentElement:As,getClippingRect:UJ,getOffsetParent:nI,getElementRects:$J,getClientRects:OJ,getDimensions:BJ,getScale:ol,isElement:Vi,isRTL:VJ};function rI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function HJ(e,t){let n=null,r;const i=As(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),s();const h=e.getBoundingClientRect(),{left:f,top:p,width:y,height:b}=h;if(l||t(),!y||!b)return;const k=hf(p),x=hf(i.clientWidth-(f+y)),S=hf(i.clientHeight-(p+b)),E=hf(f),T={rootMargin:-k+"px "+-x+"px "+-S+"px "+-E+"px",threshold:$a(0,Im(1,d))||1};let P=!0;function j(N){const R=N[0].intersectionRatio;if(R!==d){if(!P)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!rI(h,e.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(j,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(j,T)}n.observe(e)}return o(!0),s}function WJ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=ew(e),f=i||s?[...h?fd(h):[],...fd(t)]:[];f.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const p=h&&l?HJ(h,n):null;let y=-1,b=null;o&&(b=new ResizeObserver(E=>{let[T]=E;T&&T.target===h&&b&&(b.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var P;(P=b)==null||P.observe(t)})),n()}),h&&!d&&b.observe(h),b.observe(t));let k,x=d?rc(e):null;d&&S();function S(){const E=rc(e);x&&!rI(x,E)&&n(),x=E,k=requestAnimationFrame(S)}return n(),()=>{var E;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p?.(),(E=b)==null||E.disconnect(),b=null,d&&cancelAnimationFrame(k)}}const KJ=NJ,GJ=jJ,ZJ=EJ,JJ=(e,t,n)=>{const r=new Map,i={platform:qJ,...n},s={...i.platform,_c:r};return CJ(e,t,{...i,platform:s})};var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sb={exports:{}},QJ=sb.exports,fT;function YJ(){return fT||(fT=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(QJ,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function l(x,S){var E=x[S];if(typeof E.bind=="function")return E.bind(x);try{return Function.prototype.bind.call(E,x)}catch{return function(){return Function.prototype.apply.apply(E,[x,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(x){return x==="debug"&&(x="log"),typeof console===n?!1:x==="trace"&&r?d:console[x]!==void 0?l(console,x):console.log!==void 0?l(console,"log"):t}function f(){for(var x=this.getLevel(),S=0;S<i.length;S++){var E=i[S];this[E]=S<x?t:this.methodFactory(E,x,this.name)}if(this.log=this.debug,typeof console===n&&x<this.levels.SILENT)return"No console available for logging"}function p(x){return function(){typeof console!==n&&(f.call(this),this[x].apply(this,arguments))}}function y(x,S,E){return h(x)||p.apply(this,arguments)}function b(x,S){var E=this,T,P,j,N="loglevel";typeof x=="string"?N+=":"+x:typeof x=="symbol"&&(N=void 0);function R(q){var V=(i[q]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=V;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+V+";"}catch{}}}function A(){var q;if(!(typeof window===n||!N)){try{q=window.localStorage[N]}catch{}if(typeof q===n)try{var V=window.document.cookie,te=encodeURIComponent(N),J=V.indexOf(te+"=");J!==-1&&(q=/^([^;]+)/.exec(V.slice(J+te.length+1))[1])}catch{}return E.levels[q]===void 0&&(q=void 0),q}}function I(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function D(q){var V=q;if(typeof V=="string"&&E.levels[V.toUpperCase()]!==void 0&&(V=E.levels[V.toUpperCase()]),typeof V=="number"&&V>=0&&V<=E.levels.SILENT)return V;throw new TypeError("log.setLevel() called with invalid level: "+q)}E.name=x,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=S||y,E.getLevel=function(){return j??P??T},E.setLevel=function(q,V){return j=D(q),V!==!1&&R(j),f.call(E)},E.setDefaultLevel=function(q){P=D(q),A()||E.setLevel(q,!1)},E.resetLevel=function(){j=null,I(),f.call(E)},E.enableAll=function(q){E.setLevel(E.levels.TRACE,q)},E.disableAll=function(q){E.setLevel(E.levels.SILENT,q)},E.rebuild=function(){if(o!==E&&(T=D(o.getLevel())),f.call(E),o===E)for(var q in s)s[q].rebuild()},T=D(o?o.getLevel():"WARN");var z=A();z!=null&&(j=D(z)),f.call(E)}o=new b,o.getLogger=function(x){if(typeof x!="symbol"&&typeof x!="string"||x==="")throw new TypeError("You must supply a name when creating a logger.");var S=s[x];return S||(S=s[x]=new b(x,o.methodFactory)),S};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})})(sb)),sb.exports}var XJ=YJ();const eQ=iI(XJ);var ob=function(e,t){return ob=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ob(e,t)};function ho(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ob(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function tQ(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(p){o(p)}}function d(f){try{h(r.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(e,[])).next())})}function sI(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(f){return d([h,f])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(f){h=[6,f],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function wl(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function kl(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function md(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function al(e){return this instanceof al?(this.v=e,this):new al(e)}function nQ(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(b){return function(k){return Promise.resolve(k).then(b,p)}}function l(b,k){r[b]&&(i[b]=function(x){return new Promise(function(S,E){s.push([b,x,S,E])>1||d(b,x)})},k&&(i[b]=k(i[b])))}function d(b,k){try{h(r[b](k))}catch(x){y(s[0][3],x)}}function h(b){b.value instanceof al?Promise.resolve(b.value.v).then(f,p):y(s[0][2],b)}function f(b){d("next",b)}function p(b){d("throw",b)}function y(b,k){b(k),s.shift(),s.length&&d(s[0][0],s[0][1])}}function rQ(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof wl=="function"?wl(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(l,d){o=e[s](o),i(l,d,o.done,o.value)})}}function i(s,o,l,d){Promise.resolve(d).then(function(h){s({value:h,done:l})},o)}}function Mt(e){return typeof e=="function"}function nw(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Iy=nw(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Lm(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Dd=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=wl(o),d=l.next();!d.done;d=l.next()){var h=d.value;h.remove(this)}}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else o.remove(this);var f=this.initialTeardown;if(Mt(f))try{f()}catch(x){s=x instanceof Iy?x.errors:[x]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var y=wl(p),b=y.next();!b.done;b=y.next()){var k=b.value;try{mT(k)}catch(x){s=s??[],x instanceof Iy?s=md(md([],kl(s)),kl(x.errors)):s.push(x)}}}catch(x){r={error:x}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(s)throw new Iy(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)mT(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Lm(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Lm(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),oI=Dd.EMPTY;function aI(e){return e instanceof Dd||e&&"closed"in e&&Mt(e.remove)&&Mt(e.add)&&Mt(e.unsubscribe)}function mT(e){Mt(e)?e():e.unsubscribe()}var iQ={Promise:void 0},sQ={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,md([e,t],kl(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function cI(e){sQ.setTimeout(function(){throw e})}function Fm(){}function Hf(e){e()}var rw=(function(e){ho(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,aI(n)&&n.add(r)):r.destination=cQ,r}return t.create=function(n,r,i){return new ab(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(Dd),oQ=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){mf(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){mf(r)}else mf(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){mf(n)}},e})(),ab=(function(e){ho(t,e);function t(n,r,i){var s=e.call(this)||this,o;return Mt(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,s.destination=new oQ(o),s}return t})(rw);function mf(e){cI(e)}function aQ(e){throw e}var cQ={closed:!0,next:Fm,error:aQ,complete:Fm},iw=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function sw(e){return e}function lQ(e){return e.length===0?sw:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var Rn=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,s=dQ(t)?t:new ab(t,n,r);return Hf(function(){var o=i,l=o.operator,d=o.source;s.add(l?l.call(s,d):d?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=pT(n),new n(function(i,s){var o=new ab({next:function(l){try{t(l)}catch(d){s(d),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[iw]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return lQ(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=pT(t),new t(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},e.create=function(t){return new e(t)},e})();function pT(e){var t;return(t=e??iQ.Promise)!==null&&t!==void 0?t:Promise}function uQ(e){return e&&Mt(e.next)&&Mt(e.error)&&Mt(e.complete)}function dQ(e){return e&&e instanceof rw||uQ(e)&&aI(e)}function hQ(e){return Mt(e?.lift)}function Qi(e){return function(t){if(hQ(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Hi(e,t,n,r,i){return new fQ(e,t,n,r,i)}var fQ=(function(e){ho(t,e);function t(n,r,i,s,o,l){var d=e.call(this,n)||this;return d.onFinalize=o,d.shouldUnsubscribe=l,d._next=r?function(h){try{r(h)}catch(f){n.error(f)}}:e.prototype._next,d._error=s?function(h){try{s(h)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(rw),mQ=nw(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ic=(function(e){ho(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new gT(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new mQ},t.prototype.next=function(n){var r=this;Hf(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=wl(r.currentObservers),l=o.next();!l.done;l=o.next()){var d=l.value;d.next(n)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Hf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Hf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,l=i.observers;return s||o?oI:(this.currentObservers=null,l.push(n),new Dd(function(){r.currentObservers=null,Lm(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},t.prototype.asObservable=function(){var n=new Rn;return n.source=this,n},t.create=function(n,r){return new gT(n,r)},t})(Rn),gT=(function(e){ho(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:oI},t})(ic),lI=(function(e){ho(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t})(ic),pQ={now:function(){return Date.now()}},gQ=(function(e){ho(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t})(Dd),vT={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,md([e,t],kl(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},vQ=(function(e){ho(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),vT.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&vT.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Lm(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(gQ),yT=(function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=pQ.now,e})(),yQ=(function(e){ho(t,e);function t(n,r){r===void 0&&(r=yT.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t})(yT),bQ=new yQ(vQ);function xQ(e){return e&&Mt(e.schedule)}function wQ(e){return e[e.length-1]}function ow(e){return xQ(wQ(e))?e.pop():void 0}var aw=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function uI(e){return Mt(e?.then)}function dI(e){return Mt(e[iw])}function hI(e){return Symbol.asyncIterator&&Mt(e?.[Symbol.asyncIterator])}function fI(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function kQ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mI=kQ();function pI(e){return Mt(e?.[mI])}function gI(e){return nQ(this,arguments,function(){var t,n,r,i;return sI(this,function(s){switch(s.label){case 0:t=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,al(t.read())];case 3:return n=s.sent(),r=n.value,i=n.done,i?[4,al(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,al(r)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function vI(e){return Mt(e?.getReader)}function fo(e){if(e instanceof Rn)return e;if(e!=null){if(dI(e))return SQ(e);if(aw(e))return CQ(e);if(uI(e))return EQ(e);if(hI(e))return yI(e);if(pI(e))return TQ(e);if(vI(e))return NQ(e)}throw fI(e)}function SQ(e){return new Rn(function(t){var n=e[iw]();if(Mt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CQ(e){return new Rn(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function EQ(e){return new Rn(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,cI)})}function TQ(e){return new Rn(function(t){var n,r;try{for(var i=wl(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(t.next(o),t.closed)return}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function yI(e){return new Rn(function(t){jQ(e,t).catch(function(n){return t.error(n)})})}function NQ(e){return yI(gI(e))}function jQ(e,t){var n,r,i,s;return tQ(this,void 0,void 0,function(){var o,l;return sI(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=rQ(e),d.label=1;case 1:return[4,n.next()];case 2:if(r=d.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),i={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ra(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function bI(e,t){return t===void 0&&(t=0),Qi(function(n,r){n.subscribe(Hi(r,function(i){return ra(r,e,function(){return r.next(i)},t)},function(){return ra(r,e,function(){return r.complete()},t)},function(i){return ra(r,e,function(){return r.error(i)},t)}))})}function xI(e,t){return t===void 0&&(t=0),Qi(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function PQ(e,t){return fo(e).pipe(xI(t),bI(t))}function _Q(e,t){return fo(e).pipe(xI(t),bI(t))}function RQ(e,t){return new Rn(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function AQ(e,t){return new Rn(function(n){var r;return ra(n,t,function(){r=e[mI](),ra(n,t,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(l){n.error(l);return}o?n.complete():n.next(s)},0,!0)}),function(){return Mt(r?.return)&&r.return()}})}function wI(e,t){if(!e)throw new Error("Iterable cannot be null");return new Rn(function(n){ra(n,t,function(){var r=e[Symbol.asyncIterator]();ra(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function IQ(e,t){return wI(gI(e),t)}function OQ(e,t){if(e!=null){if(dI(e))return PQ(e,t);if(aw(e))return RQ(e,t);if(uI(e))return _Q(e,t);if(hI(e))return wI(e,t);if(pI(e))return AQ(e,t);if(vI(e))return IQ(e,t)}throw fI(e)}function cw(e,t){return t?OQ(e,t):fo(e)}function bT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ow(e);return cw(e,n)}function MQ(e){return e instanceof Date&&!isNaN(e)}var DQ=nw(function(e){return function(t){t===void 0&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function LQ(e,t){var n=MQ(e)?{first:e}:typeof e=="number"?{each:e}:e,r=n.first,i=n.each,s=n.with,o=s===void 0?FQ:s,l=n.scheduler,d=l===void 0?bQ:l,h=n.meta,f=h===void 0?null:h;if(r==null&&i==null)throw new TypeError("No timeout provided.");return Qi(function(p,y){var b,k,x=null,S=0,E=function(T){k=ra(y,d,function(){try{b.unsubscribe(),fo(o({meta:f,lastValue:x,seen:S})).subscribe(y)}catch(P){y.error(P)}},T)};b=p.subscribe(Hi(y,function(T){k?.unsubscribe(),S++,y.next(x=T),i>0&&E(i)},void 0,void 0,function(){k!=null&&k.closed||k==null||k.unsubscribe(),x=null})),!S&&E(r!=null?typeof r=="number"?r:+r-d.now():i)})}function FQ(e){throw new DQ(e)}function bn(e,t){return Qi(function(n,r){var i=0;n.subscribe(Hi(r,function(s){r.next(e.call(t,s,i++))}))})}var UQ=Array.isArray;function BQ(e,t){return UQ(t)?e.apply(void 0,md([],kl(t))):e(t)}function zQ(e){return bn(function(t){return BQ(e,t)})}function $Q(e,t,n,r,i,s,o,l){var d=[],h=0,f=0,p=!1,y=function(){p&&!d.length&&!h&&t.complete()},b=function(x){return h<r?k(x):d.push(x)},k=function(x){h++;var S=!1;fo(n(x,f++)).subscribe(Hi(t,function(E){t.next(E)},function(){S=!0},void 0,function(){if(S)try{h--;for(var E=function(){var T=d.shift();o||k(T)};d.length&&h<r;)E();y()}catch(T){t.error(T)}}))};return e.subscribe(Hi(t,b,function(){p=!0,y()})),function(){}}function lw(e,t,n){return n===void 0&&(n=1/0),Mt(t)?lw(function(r,i){return bn(function(s,o){return t(r,s,i,o)})(fo(e(r,i)))},n):(typeof t=="number"&&(n=t),Qi(function(r,i){return $Q(r,i,e,n)}))}function VQ(e){return lw(sw,e)}function qQ(){return VQ(1)}function Um(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qQ()(cw(e,ow(e)))}var HQ=["addListener","removeListener"],WQ=["addEventListener","removeEventListener"],KQ=["on","off"];function cb(e,t,n,r){if(Mt(n)&&(r=n,n=void 0),r)return cb(e,t,n).pipe(zQ(r));var i=kl(JQ(e)?WQ.map(function(l){return function(d){return e[l](t,d,n)}}):GQ(e)?HQ.map(xT(e,t)):ZQ(e)?KQ.map(xT(e,t)):[],2),s=i[0],o=i[1];if(!s&&aw(e))return lw(function(l){return cb(l,t,n)})(fo(e));if(!s)throw new TypeError("Invalid event target");return new Rn(function(l){var d=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return l.next(1<h.length?h:h[0])};return s(d),function(){return o(d)}})}function xT(e,t){return function(n){return function(r){return e[n](t,r)}}}function GQ(e){return Mt(e.addListener)&&Mt(e.removeListener)}function ZQ(e){return Mt(e.on)&&Mt(e.off)}function JQ(e){return Mt(e.addEventListener)&&Mt(e.removeEventListener)}function Bp(e,t){return Qi(function(n,r){var i=0;n.subscribe(Hi(r,function(s){return e.call(t,s,i++)&&r.next(s)}))})}function QQ(e,t,n,r,i){return function(s,o){var l=n,d=t,h=0;s.subscribe(Hi(o,function(f){var p=h++;d=l?e(d,f,p):(l=!0,f),o.next(d)},i))}}function YQ(e,t){return t===void 0&&(t=sw),e=e??XQ,Qi(function(n,r){var i,s=!0;n.subscribe(Hi(r,function(o){var l=t(o);(s||!e(i,l))&&(s=!1,i=l,r.next(o))}))})}function XQ(e,t){return e===t}function wT(e,t){return Qi(QQ(e,t,arguments.length>=2,!0))}function eY(e){return Qi(function(t,n){var r=!1,i=Hi(n,function(){i?.unsubscribe(),r=!0},Fm);fo(e).subscribe(i),t.subscribe(Hi(n,function(s){return r&&n.next(s)}))})}function Yi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ow(e);return Qi(function(r,i){(n?Um(e,r,n):Um(e,r)).subscribe(i)})}function kT(e){return Qi(function(t,n){fo(e).subscribe(Hi(n,function(){return n.complete()},Fm)),!n.closed&&t.subscribe(n)})}var tY=Object.defineProperty,nY=Object.defineProperties,rY=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,iY=Object.prototype.hasOwnProperty,sY=Object.prototype.propertyIsEnumerable,CT=(e,t,n)=>t in e?tY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ho=(e,t)=>{for(var n in t||(t={}))iY.call(t,n)&&CT(e,n,t[n]);if(ST)for(var n of ST(t))sY.call(t,n)&&CT(e,n,t[n]);return e},Du=(e,t)=>nY(e,rY(t)),Wi=(e,t,n)=>new Promise((r,i)=>{var s=d=>{try{l(n.next(d))}catch(h){i(h)}},o=d=>{try{l(n.throw(d))}catch(h){i(h)}},l=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,o);l((n=n.apply(e,t)).next())}),kI="lk";function _n(e){return typeof e>"u"?!1:oY(e)||aY(e)}function oY(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function aY(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function pd(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function Bn(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if(pd(e))return`${e.participant.identity}_${e.source}_placeholder`;if(_n(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}function cY(e,t){return e===void 0||t===void 0?!1:_n(e)&&_n(t)?e.publication.trackSid===t.publication.trackSid:Bn(e)===Bn(t)}function SI(e,t){return typeof t>"u"?!1:_n(e)?t.some(n=>n.participant.identity===e.participant.identity&&_n(n)&&n.publication.trackSid===e.publication.trackSid):pd(e)?t.some(n=>n.participant.identity===e.participant.identity&&pd(n)&&n.source===e.source):!1}function lY(e,t){return pd(e)&&_n(t)&&t.participant.identity===e.participant.identity&&t.source===e.source}function uY(){const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}function dY(){return typeof document<"u"}function hY(e,t,n){return WJ(e,t,()=>Wi(this,null,function*(){const{x:r,y:i}=yield JJ(e,t,{placement:"top",middleware:[KJ(6),ZJ(),GJ({padding:5})]});n?.(r,i)}))}function fY(e,t){return!e.contains(t.target)}var mY=[re.ConnectionStateChanged,re.RoomMetadataChanged,re.ActiveSpeakersChanged,re.ConnectionQualityChanged,re.ParticipantConnected,re.ParticipantDisconnected,re.ParticipantPermissionsChanged,re.ParticipantMetadataChanged,re.ParticipantNameChanged,re.ParticipantAttributesChanged,re.TrackMuted,re.TrackUnmuted,re.TrackPublished,re.TrackUnpublished,re.TrackStreamStateChanged,re.TrackSubscriptionFailed,re.TrackSubscriptionPermissionChanged,re.TrackSubscriptionStatusChanged],pY=[...mY,re.LocalTrackPublished,re.LocalTrackUnpublished];ce.TrackPublished,ce.TrackUnpublished,ce.TrackMuted,ce.TrackUnmuted,ce.TrackStreamStateChanged,ce.TrackSubscribed,ce.TrackUnsubscribed,ce.TrackSubscriptionPermissionChanged,ce.TrackSubscriptionFailed,ce.LocalTrackPublished,ce.LocalTrackUnpublished;var gY=[ce.ConnectionQualityChanged,ce.IsSpeakingChanged,ce.ParticipantMetadataChanged,ce.ParticipantPermissionsChanged,ce.TrackMuted,ce.TrackUnmuted,ce.TrackPublished,ce.TrackUnpublished,ce.TrackStreamStateChanged,ce.TrackSubscriptionFailed,ce.TrackSubscriptionPermissionChanged,ce.TrackSubscriptionStatusChanged];[...gY,ce.LocalTrackPublished,ce.LocalTrackUnpublished];var it=eQ.getLogger("lk-components-js");it.setDefaultLevel("WARN");var vY=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function CI(e,t,n,r){if(e.length<1)throw new Error("At least one grid layout definition must be provided.");const i=yY(e);if(n<=0||r<=0)return i[0];let s=0;const o=n/r>1?"landscape":"portrait";let l=i.find((d,h,f)=>{s=h;const p=f.findIndex((y,b)=>{const k=!y.orientation||y.orientation===o,x=b>h,S=y.maxTiles===d.maxTiles;return x&&S&&k})!==-1;return d.maxTiles>=t&&!p});if(l===void 0)if(l=i[i.length-1],l)it.warn(`No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${l}).`);else throw new Error("No layout or fallback layout found.");if((n<l.minWidth||r<l.minHeight)&&s>0){const d=i[s-1];l=CI(i.slice(0,s),d.maxTiles,n,r)}return l}function yY(e){return[...e].map(t=>{var n,r;return{name:`${t.columns}x${t.rows}`,columns:t.columns,rows:t.rows,maxTiles:t.columns*t.rows,minWidth:(n=t.minWidth)!=null?n:0,minHeight:(r=t.minHeight)!=null?r:0,orientation:t.orientation}}).sort((t,n)=>t.maxTiles!==n.maxTiles?t.maxTiles-n.maxTiles:t.minWidth!==0||n.minWidth!==0?t.minWidth-n.minWidth:t.minHeight!==0||n.minHeight!==0?t.minHeight-n.minHeight:0)}function bY(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var EI=[],TI={showChat:!1,unreadMessages:0,showSettings:!1};function NI(e){return typeof e=="object"}function jI(e){return Array.isArray(e)&&e.filter(NI).length>0}function xY(e,t){return t.audioLevel-e.audioLevel}function wY(e,t){return e.isSpeaking===t.isSpeaking?0:e.isSpeaking?-1:1}function kY(e,t){var n,r,i,s;return e.lastSpokeAt!==void 0||t.lastSpokeAt!==void 0?((r=(n=t.lastSpokeAt)==null?void 0:n.getTime())!=null?r:0)-((s=(i=e.lastSpokeAt)==null?void 0:i.getTime())!=null?s:0):0}function lb(e,t){var n,r,i,s;return((r=(n=e.joinedAt)==null?void 0:n.getTime())!=null?r:0)-((s=(i=t.joinedAt)==null?void 0:i.getTime())!=null?s:0)}function SY(e,t){return _n(e)?_n(t)?0:-1:_n(t)?1:0}function CY(e,t){const n=e.participant.isCameraEnabled,r=t.participant.isCameraEnabled;return n!==r?n?-1:1:0}function EY(e){const t=[],n=[],r=[],i=[];e.forEach(l=>{l.participant.isLocal&&l.source===K.Source.Camera?t.push(l):l.source===K.Source.ScreenShare?n.push(l):l.source===K.Source.Camera?r.push(l):i.push(l)});const s=TY(n),o=NY(r);return[...t,...s,...o,...i]}function TY(e){const t=[],n=[];return e.forEach(r=>{r.participant.isLocal?t.push(r):n.push(r)}),t.sort((r,i)=>lb(r.participant,i.participant)),n.sort((r,i)=>lb(r.participant,i.participant)),[...n,...t]}function NY(e){const t=[],n=[];return e.forEach(r=>{r.participant.isLocal?t.push(r):n.push(r)}),n.sort((r,i)=>r.participant.isSpeaking&&i.participant.isSpeaking?xY(r.participant,i.participant):r.participant.isSpeaking!==i.participant.isSpeaking?wY(r.participant,i.participant):r.participant.lastSpokeAt!==i.participant.lastSpokeAt?kY(r.participant,i.participant):_n(r)!==_n(i)?SY(r,i):r.participant.isCameraEnabled!==i.participant.isCameraEnabled?CY(r,i):lb(r.participant,i.participant)),[...t,...n]}function jY(e,t){return e.reduce((n,r,i)=>i%t===0?[...n,[r]]:[...n.slice(0,-1),[...n.slice(-1)[0],r]],[])}function ET(e,t){const n=Math.max(e.length,t.length);return new Array(n).fill([]).map((r,i)=>[e[i],t[i]])}function Bm(e,t,n){return e.filter(r=>!t.map(i=>n(i)).includes(n(r)))}function ub(e){return e.map(t=>typeof t=="string"||typeof t=="number"?`${t}`:Bn(t))}function PY(e,t){return{dropped:Bm(e,t,Bn),added:Bm(t,e,Bn)}}function _Y(e){return e.added.length!==0||e.dropped.length!==0}function db(e,t){const n=t.findIndex(r=>Bn(r)===Bn(e));if(n===-1)throw new Error(`Element not part of the array: ${Bn(e)} not in ${ub(t)}`);return n}function RY(e,t,n){const r=db(e,n),i=db(t,n);return n.splice(r,1,t),n.splice(i,1,e),n}function AY(e,t){const n=db(e,t);return t.splice(n,1),t}function IY(e,t){return[...t,e]}function Oy(e,t){return jY(e,t)}function OY(e,t,n){let r=MY(e,t);if(r.length<t.length){const o=Bm(t,r,Bn);r=[...r,...o]}const i=Oy(r,n),s=Oy(t,n);if(ET(i,s).forEach(([o,l],d)=>{if(o&&l){const h=Oy(r,n)[d],f=PY(h,l);_Y(f)&&(it.debug(`Detected visual changes on page: ${d}, current: ${ub(o)}, next: ${ub(l)}`,{changes:f}),f.added.length===f.dropped.length&&ET(f.added,f.dropped).forEach(([p,y])=>{if(p&&y)r=RY(p,y,r);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${p}, ${y}`)}),f.added.length===0&&f.dropped.length>0&&f.dropped.forEach(p=>{r=AY(p,r)}),f.added.length>0&&f.dropped.length===0&&f.added.forEach(p=>{r=IY(p,r)}))}}),r.length>t.length){const o=Bm(r,t,Bn);r=r.filter(l=>!o.map(Bn).includes(Bn(l)))}return r}function MY(e,t){return e.map(n=>t.find(i=>Bn(n)===Bn(i)||typeof n!="number"&&pd(n)&&_n(i)&&lY(n,i))??n)}function Or(e){return`${kI}-${e}`}function DY(e){const t=hb(e),n=PI(e.participant).pipe(bn(()=>hb(e)),Yi(t));return{className:Or(e.source===K.Source.Camera||e.source===K.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function hb(e){if(_n(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(i=>i.source===t&&i.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw new Error("At least one of source and name needs to be defined")}}function uw(e,...t){return new Rn(n=>{const r=()=>{n.next(e)};return t.forEach(i=>{e.on(i,r)}),()=>{t.forEach(i=>{e.off(i,r)})}}).pipe(Yi(e))}function zp(e,t){return new Rn(n=>{const r=(...i)=>{n.next(i)};return e.on(t,r),()=>{e.off(t,r)}})}function LY(e){return zp(e,re.ConnectionStateChanged).pipe(bn(([t])=>t),Yi(e.state))}function FY(e,t,n=!0){const r=new Rn(s=>{lo.getLocalDevices(e,n).then(o=>{s.next(o),s.complete()}).catch(o=>{t?.(o),s.next([]),s.complete()})}),i=new Rn(s=>{var o;const l=()=>Wi(this,null,function*(){try{const d=yield lo.getLocalDevices(e,n);s.next(d)}catch(d){t?.(d)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(o=navigator?.mediaDevices)==null||o.addEventListener("devicechange",l)}return()=>{var d;(d=navigator?.mediaDevices)==null||d.removeEventListener("devicechange",l)}});return Um(r,i)}function UY(e){return zp(e,re.DataReceived)}function BY(e){return uw(e,re.AudioPlaybackStatusChanged).pipe(bn(t=>({canPlayAudio:t.canPlaybackAudio})))}function zY(e){return uw(e,re.VideoPlaybackStatusChanged).pipe(bn(t=>({canPlayVideo:t.canPlaybackVideo})))}function $Y(e,t){return zp(e,re.ActiveDeviceChanged).pipe(Bp(([n])=>n===t),bn(([n,r])=>(it.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)))}function VY(e,t){return zp(e,re.ParticipantEncryptionStatusChanged).pipe(Bp(([,n])=>t?.identity===n?.identity||!n&&t?.identity===e.localParticipant.identity),bn(([n])=>n),Yi(t!=null&&t.isLocal?t.isE2EEEnabled:!!(t!=null&&t.isEncrypted)))}function dw(e,...t){return new Rn(n=>{const r=()=>{n.next(e)};return t.forEach(i=>{e.on(i,r)}),()=>{t.forEach(i=>{e.off(i,r)})}}).pipe(Yi(e))}function PI(e){return dw(e,ce.TrackMuted,ce.TrackUnmuted,ce.ParticipantPermissionsChanged,ce.TrackPublished,ce.TrackUnpublished,ce.LocalTrackPublished,ce.LocalTrackUnpublished,ce.MediaDevicesError,ce.TrackSubscriptionStatusChanged).pipe(bn(t=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:i}=t,s=t.getTrackPublication(K.Source.Microphone),o=t.getTrackPublication(K.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:i,cameraTrack:o,microphoneTrack:s,participant:t}}))}function qY(e){return e?dw(e,ce.ParticipantMetadataChanged,ce.ParticipantNameChanged).pipe(bn(({name:t,identity:n,metadata:r})=>({name:t,identity:n,metadata:r})),Yi({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}function HY(e){return hw(e,ce.ConnectionQualityChanged).pipe(bn(([t])=>t),Yi(e.connectionQuality))}function hw(e,t){return new Rn(n=>{const r=(...i)=>{n.next(i)};return e.on(t,r),()=>{e.off(t,r)}})}function _I(e){var t,n,r,i;return dw(e.participant,ce.TrackMuted,ce.TrackUnmuted,ce.TrackSubscribed,ce.TrackUnsubscribed,ce.LocalTrackPublished,ce.LocalTrackUnpublished).pipe(bn(s=>{var o,l;const d=(o=e.publication)!=null?o:s.getTrackPublication(e.source);return(l=d?.isMuted)!=null?l:!0}),Yi((i=(r=(t=e.publication)==null?void 0:t.isMuted)!=null?r:(n=e.participant.getTrackPublication(e.source))==null?void 0:n.isMuted)!=null?i:!0))}function WY(e){return hw(e,ce.IsSpeakingChanged).pipe(bn(([t])=>t))}function KY(e){return hw(e,ce.ParticipantPermissionsChanged).pipe(bn(()=>e.permissions),Yi(e.permissions))}function GY(e,t,n,r,i){const{localParticipant:s}=t,o=(f,p)=>{let y=!1;switch(f){case K.Source.Camera:y=p.isCameraEnabled;break;case K.Source.Microphone:y=p.isMicrophoneEnabled;break;case K.Source.ScreenShare:y=p.isScreenShareEnabled;break}return y},l=PI(s).pipe(bn(f=>o(e,f.participant)),Yi(o(e,s))),d=new ic,h=(f,p)=>Wi(this,null,function*(){try{switch(p??(p=n),d.next(!0),e){case K.Source.Camera:return yield s.setCameraEnabled(f??!s.isCameraEnabled,p,r),s.isCameraEnabled;case K.Source.Microphone:return yield s.setMicrophoneEnabled(f??!s.isMicrophoneEnabled,p,r),s.isMicrophoneEnabled;case K.Source.ScreenShare:return yield s.setScreenShareEnabled(f??!s.isScreenShareEnabled,p,r),s.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(y){if(i&&y instanceof Error){i?.(y);return}else throw y}finally{d.next(!1)}});return{className:Or("button"),toggle:h,enabledObserver:l,pendingObserver:d.asObservable()}}function ZY(){let e=!1;const t=new ic,n=new ic,r=i=>Wi(this,null,function*(){n.next(!0),e=i??!e,t.next(e),n.next(!1)});return{className:Or("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function JY(e,t,n){const r=new lI(void 0),i=$Y(t,e),s=(o,...l)=>Wi(this,[o,...l],function*(d,h={}){var f,p,y;if(t){const b=hr();if(e==="audiooutput"&&(b?.name==="Safari"||b?.os==="iOS")){it.warn("Switching audio output device is not supported on Safari and iOS.");return}it.debug(`Switching active device of kind "${e}" with id ${d}.`),yield t.switchActiveDevice(e,d,h.exact);const k=(f=t.getActiveDevice(e))!=null?f:d;k!==d&&d!=="default"&&it.info(`We tried to select the device with id (${d}), but the browser decided to select the device with id (${k}) instead.`);let x;e==="audioinput"?x=(p=t.localParticipant.getTrackPublication(K.Source.Microphone))==null?void 0:p.track:e==="videoinput"&&(x=(y=t.localParticipant.getTrackPublication(K.Source.Camera))==null?void 0:y.track);const S=d==="default"&&!x||d==="default"&&x?.mediaStreamTrack.label.startsWith("Default");r.next(S?d:k)}});return{className:Or("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:s}}function QY(e){const t=n=>{e.disconnect(n)};return{className:Or("disconnect-button"),disconnect:t}}function YY(e){const t=Or("connection-quality"),n=HY(e);return{className:t,connectionQualityObserver:n}}function XY(e){let t="track-muted-indicator-camera";switch(e.source){case K.Source.Camera:t="track-muted-indicator-camera";break;case K.Source.Microphone:t="track-muted-indicator-microphone";break}const n=Or(t),r=_I(e);return{className:n,mediaMutedObserver:r}}function eX(e){return{className:"lk-participant-name",infoObserver:qY(e)}}function tX(){return{className:Or("participant-tile")}}var nX={CHAT:"lk.chat"},rX={CHAT:"lk-chat-topic"};function RI(e,t){return Wi(this,arguments,function*(n,r,i={}){const{reliable:s,destinationIdentities:o,topic:l}=i;yield n.publishData(r,{destinationIdentities:o,topic:l,reliable:s})})}function iX(e,t,n){const r=Array.isArray(t)?t:[t],i=UY(e).pipe(Bp(([,,,l])=>t===void 0||l!==void 0&&r.includes(l)),bn(([l,d,,h])=>({payload:l,topic:h,from:d})));let s;const o=new Rn(l=>{s=l});return{messageObservable:i,isSendingObservable:o,send:(l,...d)=>Wi(this,[l,...d],function*(h,f={}){s.next(!0);try{yield RI(e.localParticipant,h,Ho({topic:r[0]},f))}finally{s.next(!1)}})}}var pf=new WeakMap;function sX(e){return e.ignoreLegacy==!0}var oX=e=>JSON.parse(new TextDecoder().decode(e)),aX=e=>new TextEncoder().encode(JSON.stringify(e));function cX(e,t){var n,r,i,s,o,l;const d=()=>{var N,R,A;return((N=e.serverInfo)==null?void 0:N.edition)===1||!!((R=e.serverInfo)!=null&&R.version)&&$i((A=e.serverInfo)==null?void 0:A.version,"1.8.2")>0},h=new ic,f=(n=t?.channelTopic)!=null?n:nX.CHAT,p=(r=t?.channelTopic)!=null?r:rX.CHAT;let y=!1;pf.has(e)||(y=!0);const b=(i=pf.get(e))!=null?i:new Map,k=(s=b.get(f))!=null?s:new ic;b.set(f,k),pf.set(e,b);const x=(o=t?.messageDecoder)!=null?o:oX;if(y){e.registerTextStreamHandler(f,(R,A)=>Wi(this,null,function*(){const{id:I,timestamp:D}=R.info;cw(R).pipe(wT((z,q)=>z+q),bn(z=>({id:I,timestamp:D,message:z,from:e.getParticipantByIdentity(A.identity)}))).subscribe({next:z=>k.next(z)})}));const{messageObservable:N}=iX(e,[p]);N.pipe(bn(R=>{const A=x(R.payload);return sX(A)?void 0:Du(Ho({},A),{from:R.from})}),Bp(R=>!!R),kT(h)).subscribe(k)}const S=k.pipe(wT((N,R)=>{if("id"in R&&N.find(A=>{var I,D;return((I=A.from)==null?void 0:I.identity)===((D=R.from)==null?void 0:D.identity)&&A.id===R.id})){const A=N.findIndex(I=>I.id===R.id);if(A>-1){const I=N[A];N[A]=Du(Ho({},R),{timestamp:I.timestamp,editTimestamp:R.timestamp})}return[...N]}return[...N,R]},[]),kT(h)),E=new lI(!1),T=(l=t?.messageEncoder)!=null?l:aX,P=(N,R)=>Wi(this,null,function*(){R||(R={}),R.topic!=null||(R.topic=f),E.next(!0);try{const A={id:(yield e.localParticipant.sendText(N,R)).id,timestamp:Date.now(),message:N},I=Du(Ho({},A),{attachedFiles:R.attachments}),D=Du(Ho({},I),{from:e.localParticipant,attributes:R.attributes});k.next(D);const z=T(Du(Ho({},A),{ignoreLegacy:d()}));try{yield RI(e.localParticipant,z,{reliable:!0,topic:p})}catch(q){it.info("could not send message in legacy chat format",q)}return D}finally{E.next(!1)}});function j(){h.next(),h.complete(),k.complete(),pf.delete(e),e.unregisterTextStreamHandler(f)}return e.once(re.Disconnected,j),{messageObservable:S,isSendingObservable:E,send:P}}function lX(){const e=t=>Wi(this,null,function*(){it.info("Start Audio for room: ",t),yield t.startAudio()});return{className:Or("start-audio-button"),roomAudioPlaybackAllowedObservable:BY,handleStartAudioPlayback:e}}function uX(){const e=t=>Wi(this,null,function*(){it.info("Start Video for room: ",t),yield t.startVideo()});return{className:Or("start-audio-button"),roomVideoPlaybackAllowedObservable:zY,handleStartVideoPlayback:e}}function dX(){return{className:[Or("button"),Or("chat-toggle")].join(" ")}}function hX(){return{className:[Or("button"),Or("focus-toggle-button")].join(" ")}}function fX(){return{className:"lk-room-container"}}function TT(e,t,n=!0){const r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],i=[];return r.forEach(s=>{t.forEach(o=>{const l=Array.from(s.trackPublications.values()).filter(d=>d.source===o&&(!n||d.track)).map(d=>({participant:s,publication:d,source:d.source}));i.push(...l)})}),{trackReferences:i,participants:r}}function mX(e,t,n){var r,i;const s=(r=n.additionalRoomEvents)!=null?r:pY,o=(i=n.onlySubscribed)!=null?i:!0,l=Array.from(new Set([re.ParticipantConnected,re.ParticipantDisconnected,re.ConnectionStateChanged,re.LocalTrackPublished,re.LocalTrackUnpublished,re.TrackPublished,re.TrackUnpublished,re.TrackSubscriptionStatusChanged,...s]).values());return uw(e,...l).pipe(bn(d=>{const h=TT(d,t,o);return it.debug(`TrackReference[] was updated. (length ${h.trackReferences.length})`,h),h}),Yi(TT(e,t,o)))}function pX(e,t=1e3){if(e===null)return bT(!1);const n=cb(e,"mousemove",{passive:!0}).pipe(bn(()=>!0)),r=n.pipe(LQ({each:t,with:()=>Um(bT(!1),r.pipe(eY(n)))}),YQ());return r}function gX(e,t){if(typeof localStorage>"u"){it.error("Local storage is not available.");return}try{if(t){const n=Object.fromEntries(Object.entries(t).filter(([,r])=>r!==""));localStorage.setItem(e,JSON.stringify(n))}}catch(n){it.error(`Error setting item to local storage: ${n}`)}}function vX(e){if(typeof localStorage>"u"){it.error("Local storage is not available.");return}try{const t=localStorage.getItem(e);if(!t){it.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(t){it.error(`Error getting item from local storage: ${t}`);return}}function yX(e){return{load:()=>vX(e),save:t=>gX(e,t)}}var bX=`${kI}-user-choices`,Lu={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:xX,save:wX}=yX(bX);function kX(e,t=!1){t!==!0&&wX(e)}function SX(e,t=!1){var n,r,i,s,o;const l={videoEnabled:(n=e?.videoEnabled)!=null?n:Lu.videoEnabled,audioEnabled:(r=e?.audioEnabled)!=null?r:Lu.audioEnabled,videoDeviceId:(i=e?.videoDeviceId)!=null?i:Lu.videoDeviceId,audioDeviceId:(s=e?.audioDeviceId)!=null?s:Lu.audioDeviceId,username:(o=e?.username)!=null?o:Lu.username};if(t)return l;{const d=xX();return Ho(Ho({},l),d??{})}}function AI(e,t){if(t.msg==="show_chat")return{...e,showChat:!0,unreadMessages:0};if(t.msg==="hide_chat")return{...e,showChat:!1};if(t.msg==="toggle_chat"){const n={...e,showChat:!e.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return t.msg==="unread_msg"?{...e,unreadMessages:t.count}:t.msg==="toggle_settings"?{...e,showSettings:!e.showSettings}:{...e}}function II(e,t){return t.msg==="set_pin"?[t.trackReference]:t.msg==="clear_pin"?[]:{...e}}const $p=g.createContext(void 0);function OI(){const e=g.useContext($p);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function CX(e){const t=Ld();if(e??(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function EX(){const[e,t]=g.useReducer(II,EI),[n,r]=g.useReducer(AI,TI);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}function TX(e){const[t,n]=g.useReducer(II,EI),[r,i]=g.useReducer(AI,TI);return e??{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}function Ld(){return g.useContext($p)}const fw=g.createContext(void 0);function Vp(){return g.useContext(fw)}function $l(e){const t=Vp(),n=e??t;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const MI=g.createContext(void 0);function DI(){return g.useContext(MI)}function Fd(e){const t=DI(),n=Vp(),r=e??t??n?.participant;if(!r)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}const mw=g.createContext(void 0);function qp(){const e=g.useContext(mw);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function Hp(){return g.useContext(mw)}function Ud(e){const t=Hp(),n=e??t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const LI=g.createContext(void 0);function NX(e){return g.useContext(LI)}var NT={};function FI(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=FI(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function UI(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=FI(e))&&(r&&(r+=" "),r+=t);return r}function jX(...e){return(...t)=>{for(const n of e)if(typeof n=="function")try{n(...t)}catch(r){console.error(r)}}}function Is(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const r=e[n];for(const i in r){const s=t[i],o=r[i];typeof s=="function"&&typeof o=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?t[i]=jX(s,o):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?t[i]=UI(s,o):t[i]=o!==void 0?o:s}}return t}function PX(e){return e!==void 0}function mo(...e){return Is(...e.filter(PX))}function BI(e,t,n){return g.Children.map(e,r=>g.isValidElement(r)&&g.Children.only(e)?(r.props.className&&(t??(t={}),t.className=UI(r.props.className,t.className),t.style={...r.props.style,...t.style}),g.cloneElement(r,{...t,key:n})):r)}function _X(e){var t,n;if(typeof window<"u"&&typeof process<"u"&&(((t=process==null?void 0:NT)==null?void 0:t.NODE_ENV)==="dev"||((n=process==null?void 0:NT)==null?void 0:n.NODE_ENV)==="development")){const r=document.querySelector(".lk-room-container");r&&!getComputedStyle(r).getPropertyValue("--lk-has-imported-styles")&&it.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function RX(e,t){return e==="processor"&&t&&typeof t=="object"&&"name"in t?t.name:e==="e2ee"&&t?"e2ee-enabled":t}const AX={connect:!0,audio:!1,video:!1};function IX(e){const{token:t,serverUrl:n,options:r,room:i,connectOptions:s,connect:o,audio:l,video:d,screen:h,onConnected:f,onDisconnected:p,onError:y,onMediaDeviceFailure:b,onEncryptionError:k,simulateParticipants:x,...S}={...AX,...e};r&&i&&it.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[E,T]=g.useState(),P=g.useRef(o);g.useEffect(()=>{T(i??new lo(r))},[i,JSON.stringify(r,RX)]);const j=g.useMemo(()=>{const{className:N}=fX();return Is(S,{className:N})},[S]);return g.useEffect(()=>{if(!E)return;const N=()=>{const z=E.localParticipant;it.debug("trying to publish local tracks"),Promise.all([z.setMicrophoneEnabled(!!l,typeof l!="boolean"?l:void 0),z.setCameraEnabled(!!d,typeof d!="boolean"?d:void 0),z.setScreenShareEnabled(!!h,typeof h!="boolean"?h:void 0)]).catch(q=>{it.warn(q),y?.(q)})},R=(z,q)=>{const V=ud.getFailure(z);b?.(V,q)},A=z=>{k?.(z)},I=z=>{p?.(z)},D=()=>{f?.()};return E.on(re.SignalConnected,N).on(re.MediaDevicesError,R).on(re.EncryptionError,A).on(re.Disconnected,I).on(re.Connected,D),()=>{E.off(re.SignalConnected,N).off(re.MediaDevicesError,R).off(re.EncryptionError,A).off(re.Disconnected,I).off(re.Connected,D)}},[E,l,d,h,y,k,b,f,p]),g.useEffect(()=>{if(E){if(x){E.simulateParticipants({participants:{count:x},publish:{audio:!0,useRealTracks:!0}});return}if(o){if(P.current=!0,it.debug("connecting"),!t){it.debug("no token yet");return}if(!n){it.warn("no livekit url provided"),y?.(Error("no livekit url provided"));return}E.connect(n,t,s).catch(N=>{it.warn(N),P.current===!0&&y?.(N)})}else it.debug("disconnecting because connect is false"),P.current=!1,E.disconnect()}},[o,t,JSON.stringify(s),E,y,n,x]),g.useEffect(()=>{if(E)return()=>{it.info("disconnecting on onmount"),E.disconnect()}},[E]),{room:E,htmlProps:j}}const OX=g.forwardRef(function(e,t){const{room:n,htmlProps:r}=IX(e);return g.createElement("div",{ref:t,...r},n&&g.createElement(mw.Provider,{value:n},g.createElement(LI.Provider,{value:e.featureFlags},e.children)))}),MX=e=>{const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),t};function DX(e,t){const n=FX(),r=MX(t);return g.useLayoutEffect(()=>{let i=!1;const s=e.current;if(!s)return;function o(l,d){i||r.current(l,d)}return n?.subscribe(s,o),()=>{i=!0,n?.unsubscribe(s,o)}},[e.current,n,r]),n?.observer}function LX(){let e=!1,t=[];const n=new Map;if(typeof window>"u")return;const r=new ResizeObserver((i,s)=>{t=t.concat(i),e||window.requestAnimationFrame(()=>{const o=new Set;for(let l=0;l<t.length;l++){if(o.has(t[l].target))continue;o.add(t[l].target);const d=n.get(t[l].target);d?.forEach(h=>h(t[l],s))}t=[],e=!1}),e=!0});return{observer:r,subscribe(i,s){r.observe(i);const o=n.get(i)??[];o.push(s),n.set(i,o)},unsubscribe(i,s){const o=n.get(i)??[];if(o.length===1){r.unobserve(i),n.delete(i);return}const l=o.indexOf(s);l!==-1&&o.splice(l,1),n.set(i,o)}}}let jT;const FX=()=>jT||(jT=LX()),zI=e=>{const[t,n]=g.useState({width:0,height:0});g.useLayoutEffect(()=>{if(e.current){const{width:i,height:s}=e.current.getBoundingClientRect();n({width:i,height:s})}},[e.current]);const r=g.useCallback(i=>n(i.contentRect),[]);return DX(e,r),t};function Mr(e,t,n=!0){const[r,i]=g.useState(t);return g.useEffect(()=>{if(n&&i(t),typeof window>"u"||!e)return;const s=e.subscribe(i);return()=>s.unsubscribe()},[e,n]),r}function UX(e){const t=s=>typeof window<"u"?window.matchMedia(s).matches:!1,[n,r]=g.useState(t(e));function i(){r(t(e))}return g.useEffect(()=>{const s=window.matchMedia(e);return i(),s.addListener?s.addListener(i):s.addEventListener("change",i),()=>{s.removeListener?s.removeListener(i):s.removeEventListener("change",i)}},[e]),n}function BX(e={}){const t=Fd(e.participant),{className:n,connectionQualityObserver:r}=g.useMemo(()=>YY(t),[t]),i=Mr(r,t.connectionQuality);return{className:n,quality:i}}function pw(e){const t=Ud(e),n=g.useMemo(()=>LY(t),[t]);return Mr(n,t.state)}function zX(e){const t=qp(),n=pw(t);return{buttonProps:g.useMemo(()=>{const{className:r,disconnect:i}=QY(t);return Is(e,{className:r,onClick:()=>i(e.stopTracks??!0),disabled:n===ft.Disconnected})},[t,e,n])}}function $X(e){if(e.publication instanceof _m){const t=e.publication.track;if(t){const{facingMode:n}=hJ(t);return n}}return"undefined"}function VX({trackRef:e,props:t}){const n=$l(e),r=Ld(),{className:i}=g.useMemo(()=>hX(),[]),s=g.useMemo(()=>SI(n,r?.pin.state),[n,r?.pin.state]);return{mergedProps:g.useMemo(()=>Is(t,{className:i,onClick:o=>{var l,d,h,f,p;(l=t.onClick)==null||l.call(t,o),s?(h=r==null?void 0:(d=r.pin).dispatch)==null||h.call(d,{msg:"clear_pin"}):(p=r==null?void 0:(f=r.pin).dispatch)==null||p.call(f,{msg:"set_pin",trackReference:n})}}),[t,i,n,s,r?.pin]),inFocus:s}}function qX(e,t,n={}){const r=n.gridLayouts??vY,{width:i,height:s}=zI(e),o=CI(r,t,i,s);return g.useEffect(()=>{e.current&&o&&(e.current.style.setProperty("--lk-col-count",o?.columns.toString()),e.current.style.setProperty("--lk-row-count",o?.rows.toString()))},[e,o]),{layout:o,containerWidth:i,containerHeight:s}}function PT(e,t={}){var n,r;const i=typeof e=="string"?t.participant:e.participant,s=Fd(i),o=typeof e=="string"?{participant:s,source:e}:e,[l,d]=g.useState(!!((n=o.publication)!=null&&n.isMuted||(r=s.getTrackPublication(o.source))!=null&&r.isMuted));return g.useEffect(()=>{const h=_I(o).subscribe(d);return()=>h.unsubscribe()},[Bn(o)]),l}function HX(e){const t=Fd(e),n=g.useMemo(()=>WY(t),[t]);return Mr(n,t.isSpeaking)}function WX(){const e=qp(),t=g.useMemo(()=>KY(e.localParticipant),[e]);return Mr(t,e.localParticipant.permissions)}function KX({kind:e,room:t,track:n,requestPermissions:r,onError:i}){const s=Hp(),o=g.useMemo(()=>t??s??new lo,[t,s]),l=g.useMemo(()=>FY(e,i,r),[e,r,i]),d=Mr(l,[]),[h,f]=g.useState(o?.getActiveDevice(e)??"default"),{className:p,activeDeviceObservable:y,setActiveMediaDevice:b}=g.useMemo(()=>JY(e,o),[e,o,n]);return g.useEffect(()=>{const k=y.subscribe(x=>{x&&(it.info("setCurrentDeviceId",x),f(x))});return()=>{k?.unsubscribe()}},[y]),{devices:d,className:p,activeDeviceId:h,setActiveMediaDevice:b}}function $I(e,t,n={}){const r=g.useRef([]),i=g.useRef(-1),s=t!==i.current,o=typeof n.customSortFunction=="function"?n.customSortFunction(e):EY(e);let l=[...o];if(s===!1)try{l=OY(r.current,o,t)}catch(d){it.error("Error while running updatePages(): ",d)}return s?r.current=o:r.current=l,i.current=t,l}function GX(e,t){const[n,r]=g.useState(1),i=Math.max(Math.ceil(t.length/e),1);n>i&&r(i);const s=n*e,o=s-e,l=f=>{r(p=>f==="next"?p===i?p:p+1:p===1?p:p-1)},d=f=>{f>i?r(i):f<1?r(1):r(f)},h=$I(t,e).slice(o,s);return{totalPageCount:i,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:d,firstItemIndex:o,lastItemIndex:s,tracks:h,currentPage:n}}function ZX({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){const i=$l(e),s=g.useMemo(()=>{const{className:y}=tX();return Is(r,{className:y,onClick:b=>{var k;if((k=r.onClick)==null||k.call(r,b),typeof t=="function"){const x=i.publication??i.participant.getTrackPublication(i.source);t({participant:i.participant,track:x})}}})},[r,t,i.publication,i.source,i.participant]),o=i.participant.getTrackPublication(K.Source.Microphone),l=g.useMemo(()=>({participant:i.participant,source:K.Source.Microphone,publication:o}),[o,i.participant]),d=PT(i),h=PT(l),f=HX(i.participant),p=$X(i);return{elementProps:{"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":n===!0?!1:f,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":p,...s}}}function JX(e){return e=CX(e),g.useMemo(()=>e?.pin.state!==void 0&&e.pin.state.length>=1?e.pin.state:[],[e.pin.state])}function QX({room:e,props:t}){const n=Ud(e),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:s}=g.useMemo(()=>lX(),[]),o=g.useMemo(()=>i(n),[n,i]),{canPlayAudio:l}=Mr(o,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:g.useMemo(()=>Is(t,{className:r,onClick:()=>{s(n)},style:{display:l?"none":"block"}}),[t,r,l,s,n]),canPlayAudio:l}}function YX({room:e,props:t}){const n=Ud(e),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:s}=g.useMemo(()=>uX(),[]),o=g.useMemo(()=>i(n),[n,i]),{canPlayVideo:l}=Mr(o,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:g.useMemo(()=>Is(t,{className:r,onClick:()=>{s(n)},style:{display:l?"none":"block"}}),[t,r,l,s,n]),canPlayVideo:l}}function XX(e,t={}){const n=g.useRef(null),r=g.useRef(null),i=t.minSwipeDistance??50,s=d=>{r.current=null,n.current=d.targetTouches[0].clientX},o=d=>{r.current=d.targetTouches[0].clientX},l=g.useCallback(()=>{if(!n.current||!r.current)return;const d=n.current-r.current,h=d>i,f=d<-i;h&&t.onLeftSwipe&&t.onLeftSwipe(),f&&t.onRightSwipe&&t.onRightSwipe()},[i,t]);g.useEffect(()=>{const d=e.current;return d&&(d.addEventListener("touchstart",s,{passive:!0}),d.addEventListener("touchmove",o,{passive:!0}),d.addEventListener("touchend",l,{passive:!0})),()=>{d&&(d.removeEventListener("touchstart",s),d.removeEventListener("touchmove",o),d.removeEventListener("touchend",l))}},[e,l])}function eee({props:e}){const{dispatch:t,state:n}=OI().widget,{className:r}=g.useMemo(()=>dX(),[]);return{mergedProps:g.useMemo(()=>Is(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function tee(e){var t,n;const r=$l(e),{className:i,mediaMutedObserver:s}=g.useMemo(()=>XY(r),[Bn(r)]);return{isMuted:Mr(s,!!((t=r.publication)!=null&&t.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:i}}function nee({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:i,onDeviceError:s,...o}){var l;const d=Hp(),h=(l=d?.localParticipant)==null?void 0:l.getTrackPublication(e),f=g.useRef(!1),{toggle:p,className:y,pendingObserver:b,enabledObserver:k}=g.useMemo(()=>d?GY(e,d,r,i,s):ZY(),[d,e,JSON.stringify(r),i]),x=Mr(b,!1),S=Mr(k,n??!!(h!=null&&h.isEnabled));g.useEffect(()=>{t?.(S,f.current),f.current=!1},[S,t]),g.useEffect(()=>{n!==void 0&&(it.debug("forcing initial toggle state",e,n),p(n))},[]);const E=g.useMemo(()=>Is(o,{className:y}),[o,y]),T=g.useCallback(P=>{var j;f.current=!0,p().catch(()=>f.current=!1),(j=o.onClick)==null||j.call(o,P)},[o,p]);return{toggle:p,enabled:S,pending:x,track:h,buttonProps:{...E,"aria-pressed":S,"data-lk-source":e,"data-lk-enabled":S,disabled:x,onClick:T}}}function VI(e=[K.Source.Camera,K.Source.Microphone,K.Source.ScreenShare,K.Source.ScreenShareAudio,K.Source.Unknown],t={}){const n=Ud(t.room),[r,i]=g.useState([]),[s,o]=g.useState([]),l=g.useMemo(()=>e.map(d=>NI(d)?d.source:d),[JSON.stringify(e)]);return g.useEffect(()=>{const d=mX(n,l,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:h,participants:f})=>{it.debug("setting track bundles",h,f),i(h),o(f)});return()=>d.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),g.useMemo(()=>{if(jI(e)){const d=iee(e,s),h=Array.from(r);return s.forEach(f=>{d.has(f.identity)&&(d.get(f.identity)??[]).forEach(p=>{if(r.find(({participant:b,publication:k})=>f.identity===b.identity&&k.source===p))return;it.debug(`Add ${p} placeholder for participant ${f.identity}.`);const y={participant:f,source:p};h.push(y)})}),h}else return r},[r,s,e])}function ree(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function iee(e,t){const n=new Map;if(jI(e)){const r=e.filter(i=>i.withPlaceholder).map(i=>i.source);t.forEach(i=>{const s=i.getTrackPublications().map(l=>{var d;return(d=l.track)==null?void 0:d.source}).filter(l=>l!==void 0),o=Array.from(ree(new Set(r),new Set(s)));o.length>0&&n.set(i.identity,o)})}return n}function see(e){const t=qp(),n=pw(t),r=g.useMemo(()=>n===ft.Disconnected,[n]),i=g.useMemo(()=>cX(t,e),[t,e,r]),s=Mr(i.isSendingObservable,!1),o=Mr(i.messageObservable,[]);return{send:i.send,chatMessages:o,isSending:s}}function oee(e={}){const[t,n]=g.useState(SX(e.defaults,e.preventLoad??!1)),r=g.useCallback(d=>{n(h=>({...h,audioEnabled:d}))},[]),i=g.useCallback(d=>{n(h=>({...h,videoEnabled:d}))},[]),s=g.useCallback(d=>{n(h=>({...h,audioDeviceId:d}))},[]),o=g.useCallback(d=>{n(h=>({...h,videoDeviceId:d}))},[]),l=g.useCallback(d=>{n(h=>({...h,username:d}))},[]);return g.useEffect(()=>{kX(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:i,saveAudioInputDeviceId:s,saveVideoInputDeviceId:o,saveUsername:l}}function aee(e,t={}){const n=Fd(e),r=Ud(t.room),i=g.useMemo(()=>VY(r,n),[r,n]);return Mr(i,n.isLocal?n.isE2EEEnabled:!!(n!=null&&n.isEncrypted))}const qI=g.forwardRef(function(e,t){const{mergedProps:n}=eee({props:e});return g.createElement("button",{ref:t,...n},e.children)}),cee=g.forwardRef(function(e,t){const{buttonProps:n}=zX(e);return g.createElement("button",{ref:t,...n},e.children)}),lee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),g.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),uee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),dee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},g.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),hee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),_T=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),fee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),mee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),pee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),gee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),vee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),g.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),yee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),g.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),bee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),xee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),wee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),kee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("g",{opacity:.25},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),HI=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),See=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},g.createElement("g",{fill:"currentColor"},g.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),g.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),RT=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),Cee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),Eee=g.forwardRef(function({trackRef:e,...t},n){const r=Vp(),{mergedProps:i,inFocus:s}=VX({trackRef:e??r,props:t});return g.createElement($p.Consumer,null,o=>o!==void 0&&g.createElement("button",{ref:n,...i},t.children?t.children:s?g.createElement(Cee,null):g.createElement(fee,null)))}),My=g.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:i,exactMatch:s,track:o,requestPermissions:l,onError:d,...h},f){const p=Hp(),y=g.useRef("default"),b=g.useCallback(R=>{p&&p.emit(re.MediaDevicesError,R),d?.(R)},[p,d]),{devices:k,activeDeviceId:x,setActiveMediaDevice:S,className:E}=KX({kind:e,room:p,track:o,requestPermissions:l,onError:b});g.useEffect(()=>{t!==void 0&&S(t)},[S]),g.useEffect(()=>{typeof r=="function"&&r(k)},[r,k]),g.useEffect(()=>{x!==y.current&&n?.(x),y.current=x},[x]);const T=async R=>{try{await S(R,{exact:s??!0})}catch(A){if(A instanceof Error)i?.(A);else throw A}},P=g.useMemo(()=>mo(h,{className:E},{className:"lk-list"}),[E,h]),j=!!k.find(R=>R.label.toLowerCase().startsWith("default"));function N(R,A,I){return R===A||!j&&I===0&&A==="default"}return g.createElement("ul",{ref:f,...P},k.map((R,A)=>g.createElement("li",{key:R.deviceId,id:R.deviceId,"data-lk-active":N(R.deviceId,x,A),"aria-selected":N(R.deviceId,x,A),role:"option"},g.createElement("button",{className:"lk-button",onClick:()=>T(R.deviceId)},R.label))))}),Tee=g.forwardRef(function({label:e,...t},n){const r=qp(),{mergedProps:i,canPlayAudio:s}=QX({room:r,props:t}),{mergedProps:o,canPlayVideo:l}=YX({room:r,props:i}),{style:d,...h}=o;return d.display=s&&l?"none":"block",g.createElement("button",{ref:n,style:d,...h},e??`Start ${s?"Video":"Audio"}`)});function WI(e,t){switch(e){case K.Source.Microphone:return t?g.createElement(yee,null):g.createElement(vee,null);case K.Source.Camera:return t?g.createElement(uee,null):g.createElement(lee,null);case K.Source.ScreenShare:return t?g.createElement(See,null):g.createElement(HI,null);default:return}}function Nee(e){switch(e){case Ii.Excellent:return g.createElement(bee,null);case Ii.Good:return g.createElement(xee,null);case Ii.Poor:return g.createElement(wee,null);default:return g.createElement(kee,null)}}const Dy=g.forwardRef(function({showIcon:e,...t},n){const{buttonProps:r,enabled:i}=nee(t),[s,o]=g.useState(!1);return g.useEffect(()=>{o(!0)},[]),s&&g.createElement("button",{ref:n,...r},(e??!0)&&WI(t.source,i),t.children)}),jee=g.forwardRef(function(e,t){const{className:n,quality:r}=BX(e),i=g.useMemo(()=>({...mo(e,{className:n}),"data-lk-quality":r}),[r,e,n]);return g.createElement("div",{ref:t,...i},e.children??Nee(r))}),AT=g.forwardRef(function({participant:e,...t},n){const r=Fd(e),{className:i,infoObserver:s}=g.useMemo(()=>eX(r),[r]),{identity:o,name:l}=Mr(s,{name:r.name,identity:r.identity,metadata:r.metadata}),d=g.useMemo(()=>mo(t,{className:i,"data-lk-participant-name":l}),[t,i,l]);return g.createElement("span",{ref:n,...d},l!==""?l:o,t.children)}),Pee=g.forwardRef(function({trackRef:e,show:t="always",...n},r){const{className:i,isMuted:s}=tee(e),o=t==="always"||t==="muted"&&s||t==="unmuted"&&!s,l=g.useMemo(()=>mo(n,{className:i}),[i,n]);return o?g.createElement("div",{ref:r,...l,"data-lk-muted":s},n.children??WI(e.source,!s)):null}),_ee=e=>g.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),g.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function KI(e,t={}){const[n,r]=g.useState(hb(e)),[i,s]=g.useState(n?.isMuted),[o,l]=g.useState(n?.isSubscribed),[d,h]=g.useState(n?.track),[f,p]=g.useState("landscape"),y=g.useRef(),{className:b,trackObserver:k}=g.useMemo(()=>DY(e),[e.participant.sid??e.participant.identity,e.source,_n(e)&&e.publication.trackSid]);return g.useEffect(()=>{const x=k.subscribe(S=>{it.debug("update track",S),r(S),s(S?.isMuted),l(S?.isSubscribed),h(S?.track)});return()=>x?.unsubscribe()},[k]),g.useEffect(()=>{var x,S;return d&&(y.current&&d.detach(y.current),(x=t.element)!=null&&x.current&&!(e.participant.isLocal&&d?.kind==="audio")&&d.attach(t.element.current)),y.current=(S=t.element)==null?void 0:S.current,()=>{y.current&&d?.detach(y.current)}},[d,t.element]),g.useEffect(()=>{var x,S;if(typeof((x=n?.dimensions)==null?void 0:x.width)=="number"&&typeof((S=n?.dimensions)==null?void 0:S.height)=="number"){const E=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(E)}},[n]),{publication:n,isMuted:i,isSubscribed:o,track:d,elementProps:mo(t.props,{className:b,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":f}})}}var Ly,IT;function Ree(){if(IT)return Ly;IT=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,d=typeof ff=="object"&&ff&&ff.Object===Object&&ff,h=typeof self=="object"&&self&&self.Object===Object&&self,f=d||h||Function("return this")(),p=Object.prototype,y=p.toString,b=Math.max,k=Math.min,x=function(){return f.Date.now()};function S(N,R,A){var I,D,z,q,V,te,J=0,we=!1,X=!1,me=!0;if(typeof N!="function")throw new TypeError(e);R=j(R)||0,E(A)&&(we=!!A.leading,X="maxWait"in A,z=X?b(j(A.maxWait)||0,R):z,me="trailing"in A?!!A.trailing:me);function U(ae){var ke=I,Ue=D;return I=D=void 0,J=ae,q=N.apply(Ue,ke),q}function ue(ae){return J=ae,V=setTimeout(ie,R),we?U(ae):q}function fe(ae){var ke=ae-te,Ue=ae-J,qe=R-ke;return X?k(qe,z-Ue):qe}function F(ae){var ke=ae-te,Ue=ae-J;return te===void 0||ke>=R||ke<0||X&&Ue>=z}function ie(){var ae=x();if(F(ae))return pe(ae);V=setTimeout(ie,fe(ae))}function pe(ae){return V=void 0,me&&I?U(ae):(I=D=void 0,q)}function oe(){V!==void 0&&clearTimeout(V),J=0,I=te=D=V=void 0}function Se(){return V===void 0?q:pe(x())}function Ae(){var ae=x(),ke=F(ae);if(I=arguments,D=this,te=ae,ke){if(V===void 0)return ue(te);if(X)return V=setTimeout(ie,R),U(te)}return V===void 0&&(V=setTimeout(ie,R)),q}return Ae.cancel=oe,Ae.flush=Se,Ae}function E(N){var R=typeof N;return!!N&&(R=="object"||R=="function")}function T(N){return!!N&&typeof N=="object"}function P(N){return typeof N=="symbol"||T(N)&&y.call(N)==n}function j(N){if(typeof N=="number")return N;if(P(N))return t;if(E(N)){var R=typeof N.valueOf=="function"?N.valueOf():N;N=E(R)?R+"":R}if(typeof N!="string")return N===0?N:+N;N=N.replace(r,"");var A=s.test(N);return A||o.test(N)?l(N.slice(2),A?2:8):i.test(N)?t:+N}return Ly=S,Ly}var Aee=Ree();const OT=iI(Aee);function Iee(e){const t=g.useRef(e);t.current=e,g.useEffect(()=>()=>{t.current()},[])}function Oee(e,t=500,n){const r=g.useRef();Iee(()=>{r.current&&r.current.cancel()});const i=g.useMemo(()=>{const s=OT(e,t,n),o=(...l)=>s(...l);return o.cancel=()=>{s.cancel()},o.isPending=()=>!!r.current,o.flush=()=>s.flush(),o},[e,t,n]);return g.useEffect(()=>{r.current=OT(e,t,n)},[e,t,n]),i}function Mee(e,t,n){const r=((h,f)=>h===f),i=e instanceof Function?e():e,[s,o]=g.useState(i),l=g.useRef(i),d=Oee(o,t,n);return r(l.current,i)||(d(i),l.current=i),[s,d]}function Dee({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:s}={}){var o;const[l,d]=g.useState(null),[h,f]=g.useState(()=>({isIntersecting:i,entry:void 0})),p=g.useRef();p.current=s;const y=((o=h.entry)==null?void 0:o.isIntersecting)&&r;g.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||y)return;const x=new IntersectionObserver(S=>{const E=Array.isArray(x.thresholds)?x.thresholds:[x.thresholds];S.forEach(T=>{const P=T.isIntersecting&&E.some(j=>T.intersectionRatio>=j);f({isIntersecting:P,entry:T}),p.current&&p.current(P,T)})},{threshold:e,root:t,rootMargin:n});return x.observe(l),()=>{x.disconnect()}},[l,JSON.stringify(e),t,n,y,r]);const b=g.useRef(null);g.useEffect(()=>{var x;!l&&(x=h.entry)!=null&&x.target&&!r&&!y&&b.current!==h.entry.target&&(b.current=h.entry.target,f({isIntersecting:i,entry:void 0}))},[l,h.entry,r,y,i]);const k=[d,!!h.isIntersecting,h.entry];return k.ref=k[0],k.isIntersecting=k[1],k.entry=k[2],k}const Lee=g.forwardRef(function({onTrackClick:e,onClick:t,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:i,...s},o){const l=$l(r),d=g.useRef(null);g.useImperativeHandle(o,()=>d.current);const h=Dee({root:d.current}),[f]=Mee(h,3e3);g.useEffect(()=>{i&&l.publication instanceof Rm&&f?.isIntersecting===!1&&h?.isIntersecting===!1&&l.publication.setSubscribed(!1)},[f,l,i]),g.useEffect(()=>{i&&l.publication instanceof Rm&&h?.isIntersecting===!0&&l.publication.setSubscribed(!0)},[h,l,i]);const{elementProps:p,publication:y,isSubscribed:b}=KI(l,{element:d,props:s});g.useEffect(()=>{n?.(!!b)},[b,n]);const k=x=>{t?.(x),e?.({participant:l?.participant,track:y})};return g.createElement("video",{ref:d,...p,muted:!0,onClick:k})}),GI=g.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...r},i){const s=$l(e),o=g.useRef(null);g.useImperativeHandle(i,()=>o.current);const{elementProps:l,isSubscribed:d,track:h,publication:f}=KI(s,{element:o,props:r});return g.useEffect(()=>{t?.(!!d)},[d,t]),g.useEffect(()=>{h===void 0||n===void 0||(h instanceof VA?h.setVolume(n):it.warn("Volume can only be set on remote audio tracks."))},[n,h]),g.useEffect(()=>{f===void 0||r.muted===void 0||(f instanceof Rm?f.setEnabled(!r.muted):it.warn("Can only call setEnabled on remote track publications."))},[r.muted,f,h]),g.createElement("audio",{ref:o,...l})});function Fee(e){const t=!!DI();return e.participant&&!t?g.createElement(MI.Provider,{value:e.participant},e.children):g.createElement(g.Fragment,null,e.children)}function Uee(e){const t=!!Vp();return e.trackRef&&!t?g.createElement(fw.Provider,{value:e.trackRef},e.children):g.createElement(g.Fragment,null,e.children)}const fb=g.forwardRef(function({trackRef:e,children:t,onParticipantClick:n,disableSpeakingIndicator:r,...i},s){var o,l;const d=$l(e),{elementProps:h}=ZX({htmlProps:i,disableSpeakingIndicator:r,onParticipantClick:n,trackRef:d}),f=aee(d.participant),p=Ld(),y=(o=NX())==null?void 0:o.autoSubscription,b=g.useCallback(k=>{d.source&&!k&&p&&p.pin.dispatch&&SI(d,p.pin.state)&&p.pin.dispatch({msg:"clear_pin"})},[d,p]);return g.createElement("div",{ref:s,style:{position:"relative"},...h},g.createElement(Uee,{trackRef:d},g.createElement(Fee,{participant:d.participant},t??g.createElement(g.Fragment,null,_n(d)&&(((l=d.publication)==null?void 0:l.kind)==="video"||d.source===K.Source.Camera||d.source===K.Source.ScreenShare)?g.createElement(Lee,{trackRef:d,onSubscriptionStatusChanged:b,manageSubscription:y}):_n(d)&&g.createElement(GI,{trackRef:d,onSubscriptionStatusChanged:b}),g.createElement("div",{className:"lk-participant-placeholder"},g.createElement(_ee,null)),g.createElement("div",{className:"lk-participant-metadata"},g.createElement("div",{className:"lk-participant-metadata-item"},d.source===K.Source.Camera?g.createElement(g.Fragment,null,f&&g.createElement(gee,{style:{marginRight:"0.25rem"}}),g.createElement(Pee,{trackRef:{participant:d.participant,source:K.Source.Microphone},show:"muted"}),g.createElement(AT,null)):g.createElement(g.Fragment,null,g.createElement(HI,{style:{marginRight:"0.25rem"}}),g.createElement(AT,null,"'s screen"))),g.createElement(jee,{className:"lk-participant-metadata-item"}))),g.createElement(Eee,{trackRef:d}))))});function Bee(e){const t=mo(e,{className:"lk-focus-layout"});return g.createElement("div",{...t},e.children)}function zee({trackRef:e,...t}){return g.createElement(fb,{trackRef:e,...t})}function ZI({tracks:e,...t}){return g.createElement(g.Fragment,null,e.map(n=>g.createElement(fw.Provider,{value:n,key:Bn(n)},BI(t.children))))}function $ee({totalPageCount:e,nextPage:t,prevPage:n,currentPage:r,pagesContainer:i}){const[s,o]=g.useState(!1);return g.useEffect(()=>{let l;return i&&(l=pX(i.current,2e3).subscribe(o)),()=>{l&&l.unsubscribe()}},[i]),g.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":s},g.createElement("button",{className:"lk-button",onClick:n},g.createElement(_T,null)),g.createElement("span",{className:"lk-pagination-count"},`${r} of ${e}`),g.createElement("button",{className:"lk-button",onClick:t},g.createElement(_T,null)))}const Vee=g.forwardRef(function({totalPageCount:e,currentPage:t},n){const r=new Array(e).fill("").map((i,s)=>s+1===t?g.createElement("span",{"data-lk-active":!0,key:s}):g.createElement("span",{key:s}));return g.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function qee({tracks:e,...t}){const n=g.createRef(),r=g.useMemo(()=>mo(t,{className:"lk-grid-layout"}),[t]),{layout:i}=qX(n,e.length),s=GX(i.maxTiles,e);return XX(n,{onLeftSwipe:s.nextPage,onRightSwipe:s.prevPage}),g.createElement("div",{ref:n,"data-lk-pagination":s.totalPageCount>1,...r},g.createElement(ZI,{tracks:s.tracks},t.children),e.length>i.maxTiles&&g.createElement(g.Fragment,null,g.createElement(Vee,{totalPageCount:s.totalPageCount,currentPage:s.currentPage}),g.createElement($ee,{pagesContainer:n,...s})))}const Hee=130,Wee=140,Kee=1,JI=16/10,Gee=(1-JI)*-1;function Zee({tracks:e,orientation:t,...n}){const r=g.useRef(null),[i,s]=g.useState(0),{width:o,height:l}=zI(r),d=t||(l>=o?"vertical":"horizontal"),h=d==="vertical"?Math.max(o*Gee,Hee):Math.max(l*JI,Wee),f=uY(),p=Math.max(d==="vertical"?(l-f)/h:(o-f)/h,Kee);let y=Math.round(p);Math.abs(p-i)<.5?y=Math.round(i):i!==p&&s(p);const b=$I(e,y);return g.useLayoutEffect(()=>{r.current&&(r.current.dataset.lkOrientation=d,r.current.style.setProperty("--lk-max-visible-tiles",y.toString()))},[y,d]),g.createElement("aside",{key:d,className:"lk-carousel",ref:r,...n},g.createElement(ZI,{tracks:b},n.children))}function Jee({value:e,onPinChange:t,onWidgetChange:n,children:r}){const i=TX(e);return g.useEffect(()=>{it.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),g.useEffect(()=>{it.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),g.createElement($p.Provider,{value:i},r)}function QI({volume:e,muted:t}){const n=VI([K.Source.Microphone,K.Source.ScreenShareAudio,K.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(r=>!r.participant.isLocal&&r.publication.kind===K.Kind.Audio);return g.createElement("div",{style:{display:"none"}},n.map(r=>g.createElement(GI,{key:Bn(r),trackRef:r,volume:e,muted:t})))}function Qee(e){const t=g.useMemo(()=>mo(e,{className:"lk-toast"}),[e]);return g.createElement("div",{...t},e.children)}function Yee(e){const[t,n]=g.useState(void 0),r=pw(e.room);return g.useEffect(()=>{switch(r){case ft.Reconnecting:n(g.createElement(g.Fragment,null,g.createElement(RT,{className:"lk-spinner"})," Reconnecting"));break;case ft.Connecting:n(g.createElement(g.Fragment,null,g.createElement(RT,{className:"lk-spinner"})," Connecting"));break;case ft.Disconnected:n(g.createElement(g.Fragment,null,"Disconnected"));break;default:n(void 0);break}},[r]),t?g.createElement(Qee,{className:"lk-toast-connection-state"},t):g.createElement(g.Fragment,null)}const Xee=g.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:r,...i},s){var o,l,d,h;const f=g.useMemo(()=>r?r(e.message):e.message,[e.message,r]),p=!!e.editTimestamp,y=new Date(e.timestamp),b=typeof navigator<"u"?navigator.language:"en-US",k=((o=e.from)==null?void 0:o.name)??((l=e.from)==null?void 0:l.identity);return g.createElement("li",{ref:s,className:"lk-chat-entry",title:y.toLocaleTimeString(b,{timeStyle:"full"}),"data-lk-message-origin":(d=e.from)!=null&&d.isLocal?"local":"remote",...i},(!n||!t||p)&&g.createElement("span",{className:"lk-meta-data"},!t&&g.createElement("strong",{className:"lk-participant-name"},k),(!n||p)&&g.createElement("span",{className:"lk-timestamp"},p&&"edited ",y.toLocaleTimeString(b,{timeStyle:"short"}))),g.createElement("span",{className:"lk-message-body"},f),g.createElement("span",{className:"lk-message-attachements"},(h=e.attachedFiles)==null?void 0:h.map(x=>x.type.startsWith("image/")&&g.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:x.name,src:URL.createObjectURL(x),alt:x.name}))))});function ete({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:r,...i}){const s=g.useRef(null),o=g.useRef(null),l=g.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:r}),[t,n,r]),{chatMessages:d,send:h,isSending:f}=see(l),p=Ld(),y=g.useRef(0);async function b(k){k.preventDefault(),o.current&&o.current.value.trim()!==""&&(await h(o.current.value),o.current.value="",o.current.focus())}return g.useEffect(()=>{var k;s&&((k=s.current)==null||k.scrollTo({top:s.current.scrollHeight}))},[s,d]),g.useEffect(()=>{var k,x,S,E,T;if(!p||d.length===0)return;if((k=p.widget.state)!=null&&k.showChat&&d.length>0&&y.current!==((x=d[d.length-1])==null?void 0:x.timestamp)){y.current=(S=d[d.length-1])==null?void 0:S.timestamp;return}const P=d.filter(N=>!y.current||N.timestamp>y.current).length,{widget:j}=p;P>0&&((E=j.state)==null?void 0:E.unreadMessages)!==P&&((T=j.dispatch)==null||T.call(j,{msg:"unread_msg",count:P}))},[d,p?.widget]),g.createElement("div",{...i,className:"lk-chat"},g.createElement("div",{className:"lk-chat-header"},"Messages",p&&g.createElement(qI,{className:"lk-close-button"},g.createElement(dee,null))),g.createElement("ul",{className:"lk-list lk-chat-messages",ref:s},i.children?d.map((k,x)=>BI(i.children,{entry:k,key:k.id??x,messageFormatter:e})):d.map((k,x,S)=>{const E=x>=1&&S[x-1].from===k.from,T=x>=1&&k.timestamp-S[x-1].timestamp<6e4;return g.createElement(Xee,{key:k.id??x,hideName:E,hideTimestamp:E===!1?!1:T,entry:k,messageFormatter:e})})),g.createElement("form",{className:"lk-chat-form",onSubmit:b},g.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:f,ref:o,type:"text",placeholder:"Enter a message...",onInput:k=>k.stopPropagation(),onKeyDown:k=>k.stopPropagation(),onKeyUp:k=>k.stopPropagation()}),g.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:f},"Send")))}function MT({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:r,requestPermissions:i=!1,...s}){const[o,l]=g.useState(!1),[d,h]=g.useState([]),[f,p]=g.useState(!0),[y,b]=g.useState(i),k=(T,P)=>{it.debug("handle device change"),l(!1),n?.(T,P)},x=g.useRef(null),S=g.useRef(null);g.useLayoutEffect(()=>{o&&b(!0)},[o]),g.useLayoutEffect(()=>{let T;return x.current&&S.current&&(d||f)&&(T=hY(x.current,S.current,(P,j)=>{S.current&&Object.assign(S.current.style,{left:`${P}px`,top:`${j}px`})})),p(!1),()=>{T?.()}},[x,S,d,f]);const E=g.useCallback(T=>{S.current&&T.target!==x.current&&o&&fY(S.current,T)&&l(!1)},[o,S,x]);return g.useEffect(()=>(document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}),[E]),g.createElement(g.Fragment,null,g.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":o,...s,onClick:()=>l(!o),ref:x},s.children),!s.disabled&&g.createElement("div",{className:"lk-device-menu",ref:S,style:{visibility:o?"visible":"hidden"}},e?g.createElement(My,{initialSelection:t,onActiveDeviceChange:T=>k(e,T),onDeviceListChange:h,kind:e,track:r?.[e],requestPermissions:y}):g.createElement(g.Fragment,null,g.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),g.createElement(My,{kind:"audioinput",onActiveDeviceChange:T=>k("audioinput",T),onDeviceListChange:h,track:r?.audioinput,requestPermissions:y}),g.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),g.createElement(My,{kind:"videoinput",onActiveDeviceChange:T=>k("videoinput",T),onDeviceListChange:h,track:r?.videoinput,requestPermissions:y}))))}function tte(){g.useEffect(()=>{_X()},[])}function nte({props:e}){const{dispatch:t,state:n}=OI().widget,r="lk-button lk-settings-toggle";return{mergedProps:g.useMemo(()=>Is(e,{className:r,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[e,r,t,n])}}const rte=g.forwardRef(function(e,t){const{mergedProps:n}=nte({props:e});return g.createElement("button",{ref:t,...n},e.children)}),ite=e=>{switch(e){case K.Source.Camera:return 1;case K.Source.Microphone:return 2;case K.Source.ScreenShare:return 3;default:return 0}};function ste({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:r,...i}){var s;const[o,l]=g.useState(!1),d=Ld();g.useEffect(()=>{var D,z;((D=d?.widget.state)==null?void 0:D.showChat)!==void 0&&l((z=d?.widget.state)==null?void 0:z.showChat)},[(s=d?.widget.state)==null?void 0:s.showChat]);const h=UX(`(max-width: ${o?1e3:760}px)`)?"minimal":"verbose";e??(e=h);const f={leave:!0,...t},p=WX();if(!p)f.camera=!1,f.chat=!1,f.microphone=!1,f.screenShare=!1;else{const D=z=>p.canPublish&&(p.canPublishSources.length===0||p.canPublishSources.includes(ite(z)));f.camera??(f.camera=D(K.Source.Camera)),f.microphone??(f.microphone=D(K.Source.Microphone)),f.screenShare??(f.screenShare=D(K.Source.ScreenShare)),f.chat??(f.chat=p.canPublishData&&t?.chat)}const y=g.useMemo(()=>e==="minimal"||e==="verbose",[e]),b=g.useMemo(()=>e==="textOnly"||e==="verbose",[e]),k=bY(),[x,S]=g.useState(!1),E=g.useCallback(D=>{S(D)},[S]),T=mo({className:"lk-control-bar"},i),{saveAudioInputEnabled:P,saveVideoInputEnabled:j,saveAudioInputDeviceId:N,saveVideoInputDeviceId:R}=oee({preventSave:!n}),A=g.useCallback((D,z)=>z?P(D):null,[P]),I=g.useCallback((D,z)=>z?j(D):null,[j]);return g.createElement("div",{...T},f.microphone&&g.createElement("div",{className:"lk-button-group"},g.createElement(Dy,{source:K.Source.Microphone,showIcon:y,onChange:A,onDeviceError:D=>r?.({source:K.Source.Microphone,error:D})},b&&"Microphone"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(MT,{kind:"audioinput",onActiveDeviceChange:(D,z)=>N(z??"default")}))),f.camera&&g.createElement("div",{className:"lk-button-group"},g.createElement(Dy,{source:K.Source.Camera,showIcon:y,onChange:I,onDeviceError:D=>r?.({source:K.Source.Camera,error:D})},b&&"Camera"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(MT,{kind:"videoinput",onActiveDeviceChange:(D,z)=>R(z??"default")}))),f.screenShare&&k&&g.createElement(Dy,{source:K.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:y,onChange:E,onDeviceError:D=>r?.({source:K.Source.ScreenShare,error:D})},b&&(x?"Stop screen share":"Share screen")),f.chat&&g.createElement(qI,null,y&&g.createElement(hee,null),b&&"Chat"),f.settings&&g.createElement(rte,null,y&&g.createElement(mee,null),b&&"Settings"),f.leave&&g.createElement(cee,null,y&&g.createElement(pee,null),b&&"Leave"),g.createElement(Tee,null))}function ote({chatMessageFormatter:e,chatMessageDecoder:t,chatMessageEncoder:n,SettingsComponent:r,...i}){var s,o;const[l,d]=g.useState({showChat:!1,unreadMessages:0,showSettings:!1}),h=g.useRef(null),f=VI([{source:K.Source.Camera,withPlaceholder:!0},{source:K.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[re.ActiveSpeakersChanged],onlySubscribed:!1}),p=S=>{it.debug("updating widget state",S),d(S)},y=EX(),b=f.filter(_n).filter(S=>S.publication.source===K.Source.ScreenShare),k=(s=JX(y))==null?void 0:s[0],x=f.filter(S=>!cY(S,k));return g.useEffect(()=>{var S,E,T,P,j,N;if(b.some(R=>R.publication.isSubscribed)&&h.current===null?(it.debug("Auto set screen share focus:",{newScreenShareTrack:b[0]}),(E=(S=y.pin).dispatch)==null||E.call(S,{msg:"set_pin",trackReference:b[0]}),h.current=b[0]):h.current&&!b.some(R=>{var A,I;return R.publication.trackSid===((I=(A=h.current)==null?void 0:A.publication)==null?void 0:I.trackSid)})&&(it.debug("Auto clearing screen share focus."),(P=(T=y.pin).dispatch)==null||P.call(T,{msg:"clear_pin"}),h.current=null),k&&!_n(k)){const R=f.find(A=>A.participant.identity===k.participant.identity&&A.source===k.source);R!==k&&_n(R)&&((N=(j=y.pin).dispatch)==null||N.call(j,{msg:"set_pin",trackReference:R}))}},[b.map(S=>`${S.publication.trackSid}_${S.publication.isSubscribed}`).join(),(o=k?.publication)==null?void 0:o.trackSid,f]),tte(),g.createElement("div",{className:"lk-video-conference",...i},dY()&&g.createElement(Jee,{value:y,onWidgetChange:p},g.createElement("div",{className:"lk-video-conference-inner"},k?g.createElement("div",{className:"lk-focus-layout-wrapper"},g.createElement(Bee,null,g.createElement(Zee,{tracks:x},g.createElement(fb,null)),k&&g.createElement(zee,{trackRef:k}))):g.createElement("div",{className:"lk-grid-layout-wrapper"},g.createElement(qee,{tracks:f},g.createElement(fb,null))),g.createElement(ste,{controls:{chat:!0,settings:!!r}})),g.createElement(ete,{style:{display:l.showChat?"grid":"none"},messageFormatter:e,messageEncoder:n,messageDecoder:t}),r&&g.createElement("div",{className:"lk-settings-menu-modal",style:{display:l.showSettings?"block":"none"}},g.createElement(r,null))),g.createElement(QI,null),g.createElement(Yee,null))}const ate=e=>`/appointments/${e}/video`,cte=e=>`/appointments/${e}/video/token`;async function lte(e){try{const{data:t}=await Xe.post(ate(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para crear una sala de video para esta cita");if(n===404)throw new Error("Cita no encontrada");if(n===400){const i=t?.response?.data?.message;throw new Error(i||"No se puede crear sala de video para esta cita")}const r=t?.response?.data?.message??t?.message??"No se pudo crear la sala de video";throw new Error(String(r))}}async function ute(e){try{const{data:t}=await Xe.get(cte(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para unirte a esta videollamada");if(n===404)throw new Error("Sala de video no encontrada. Asegúrate de que la sala haya sido creada primero.");const r=t?.response?.data?.message??t?.message??"No se pudo obtener el token de video";throw new Error(String(r))}}async function dte(e){try{const t=await lte(e),n=await ute(e);return{room:t,token:n}}catch(t){throw new Error(t?.message??"No se pudo configurar la videollamada")}}function hte(e){return Ot({queryKey:["video","setup",e],queryFn:()=>{if(!e)throw new Error("Appointment ID is required");return dte(e)},enabled:!!e,staleTime:300*1e3,retry:2})}function fte(){const{appointmentId:e}=Zm(),t=_t(),[n,r]=g.useState(!1),{data:i,isLoading:s,error:o,refetch:l}=hte(e);g.useEffect(()=>{i&&(r(!0),Tt.success("Conectado a la videollamada"))},[i]);const d=()=>{r(!1),Tt.info("Llamada finalizada"),t(-1)};return e?s?c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsx($e,{children:"Conectando a videollamada..."})}),c.jsx(de,{children:c.jsx(sn,{className:"h-96 w-full"})})]})}):o?c.jsxs("div",{className:"container mx-auto p-6",children:[c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsxs(Cs,{children:["Error al conectar: ",o.message]})]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs(Q,{onClick:()=>l(),children:[c.jsx(nm,{className:"h-4 w-4 mr-2"}),"Reintentar"]}),c.jsx(Q,{variant:"outline",onClick:()=>t(-1),children:"Volver"})]})]}):i?c.jsxs("div",{className:"h-screen flex flex-col bg-black",children:[c.jsxs("div",{className:"bg-gray-900 text-white p-4 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-semibold",children:"Videollamada Médica"}),c.jsxs("p",{className:"text-sm text-gray-400",children:["Sala: ",i.token.roomName]})]}),c.jsxs(Q,{variant:"destructive",onClick:d,children:[c.jsx(FU,{className:"h-4 w-4 mr-2"}),"Finalizar llamada"]})]}),c.jsx("div",{className:"flex-1",children:c.jsxs(OX,{token:i.token.token,serverUrl:i.token.url,connect:n,video:!0,audio:!0,onDisconnected:d,style:{height:"100%"},children:[c.jsx(ote,{}),c.jsx(QI,{})]})})]}):null:c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsx(Cs,{children:"ID de cita no proporcionado"})]})})}const mte="/subscriptions/plans",pte="/subscriptions/checkout",gte="/subscriptions/my-subscription",vte="/subscriptions/cancel";async function yte(){try{const{data:e}=await Xe.get(mte);return Array.isArray(e)?e:e?.data??[]}catch(e){const t=e?.response?.data?.message??e?.message??"No se pudieron cargar los planes disponibles";throw new Error(String(t))}}async function bte(e){try{const{data:t}=await Xe.post(pte,e);return t}catch(t){const n=t?.response?.status;if(n===400){const i=t?.response?.data?.message;throw Array.isArray(i)?new Error(i.join(". ")):new Error(i||"Datos de suscripción inválidos")}if(n===404)throw new Error("Plan de suscripción no encontrado");if(n===409)throw new Error("Ya tienes una suscripción activa");const r=t?.response?.data?.message??t?.message??"No se pudo crear la suscripción";throw new Error(String(r))}}async function xte(){try{const{data:e}=await Xe.get(gte);return e}catch(e){if(e?.response?.status===404)return null;const n=e?.response?.data?.message??e?.message??"No se pudo obtener tu suscripción";throw new Error(String(n))}}async function wte(){try{const{data:e}=await Xe.post(vte);return e}catch(e){const t=e?.response?.status;if(t===404)throw new Error("No tienes una suscripción activa para cancelar");if(t===400){const r=e?.response?.data?.message;throw new Error(r||"No se puede cancelar esta suscripción")}const n=e?.response?.data?.message??e?.message??"No se pudo cancelar la suscripción";throw new Error(String(n))}}function kte(){return Ot({queryKey:["subscriptions","plans"],queryFn:yte,staleTime:1800*1e3})}function Ste(){return Ot({queryKey:["subscriptions","mine"],queryFn:xte,staleTime:120*1e3})}function Cte(){const e=Jr();return mi({mutationFn:t=>bte(t),onSuccess:()=>{e.invalidateQueries({queryKey:["subscriptions","mine"]}),e.invalidateQueries({queryKey:["subscriptions","limit"]}),e.invalidateQueries({queryKey:["subscriptions","history"]})}})}function Ete(){const e=Jr();return mi({mutationFn:()=>wte(),onSuccess:()=>{e.invalidateQueries({queryKey:["subscriptions"]})}})}function Tte(){const[e,t]=g.useState(null),{data:n,isLoading:r}=kte(),{data:i,refetch:s}=Ste(),o=Cte(),l=Ete(),d=async f=>{try{await o.mutateAsync({PlanId:f}),Tt.success("¡Suscripción creada exitosamente!"),s()}catch(p){Tt.error(p.message||"Error al crear suscripción")}},h=async()=>{if(confirm("¿Estás seguro de que deseas cancelar tu suscripción?"))try{await l.mutateAsync(),Tt.success("Suscripción cancelada"),s()}catch(f){Tt.error(f.message||"Error al cancelar suscripción")}};return r?c.jsx("div",{className:"container mx-auto p-6",children:c.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(f=>c.jsxs(le,{children:[c.jsxs(Oe,{children:[c.jsx(sn,{className:"h-6 w-32"}),c.jsx(sn,{className:"h-4 w-24 mt-2"})]}),c.jsx(de,{children:c.jsx(sn,{className:"h-40 w-full"})})]},f))})}):c.jsxs("div",{className:"container mx-auto p-6",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Planes de Suscripción"}),c.jsx("p",{className:"text-lg text-muted-foreground",children:"Elige el plan que mejor se adapte a tus necesidades"})]}),i&&i.Status==="ACTIVE"&&c.jsxs(Ss,{className:"mb-8",children:[c.jsx(J2,{className:"h-4 w-4"}),c.jsx(Cs,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:["Plan actual: ",c.jsx("strong",{children:i.Plan?.Name})," -"," ",i.AppointmentsUsed,"/",i.AppointmentsLimit," ","citas utilizadas",i.NextBillingDate&&c.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["(Renueva el"," ",new Date(i.NextBillingDate).toLocaleDateString(),")"]})]}),c.jsx(Q,{variant:"outline",size:"sm",onClick:h,disabled:l.isPending,children:l.isPending?c.jsx(Kn,{className:"h-4 w-4 animate-spin"}):"Cancelar plan"})]})})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n?.map(f=>{const p=i?.Status==="ACTIVE"&&i?.PlanId===f.PlanId,y=f.Interval==="MONTHLY";return c.jsxs(le,{className:`relative ${p?"border-primary shadow-lg":""}`,children:[p&&c.jsx(Ze,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:"Plan Actual"}),c.jsxs(Oe,{children:[c.jsx($e,{className:"text-2xl",children:f.Name}),c.jsx(tr,{children:f.Description})]}),c.jsxs(de,{className:"space-y-4",children:[c.jsxs("div",{className:"text-center py-4",children:[c.jsxs("div",{className:"text-4xl font-bold",children:[f.Currency==="USD"?"$":f.Currency," ",f.Price]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["/ ",y?"mes":"año"]})]}),c.jsxs("div",{className:"text-center py-2 bg-secondary rounded-lg",children:[c.jsx("div",{className:"text-2xl font-semibold",children:f.AppointmentsPerMonth}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["citas por ",y?"mes":"año"]})]}),f.Features&&f.Features.length>0&&c.jsx("ul",{className:"space-y-2",children:f.Features.map((b,k)=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(Xo,{className:"h-5 w-5 text-green-500 shrink-0 mt-0.5"}),c.jsx("span",{className:"text-sm",children:b})]},k))})]}),c.jsx(H2,{children:c.jsx(Q,{className:"w-full",disabled:p||o.isPending||!f.IsActive||i?.Status==="ACTIVE"&&!p,onClick:()=>d(f.PlanId),children:o.isPending&&e===f.PlanId?c.jsxs(c.Fragment,{children:[c.jsx(Kn,{className:"h-4 w-4 animate-spin mr-2"}),"Procesando..."]}):p?"Plan Actual":i?.Status==="ACTIVE"?"Cambiar Plan":"Suscribirse"})})]},f.PlanId)})}),!i&&c.jsx("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:"Sin suscripción activa. Elige un plan para acceder a consultas médicas."})]})}const Ns=Object.create(null);Ns.open="0";Ns.close="1";Ns.ping="2";Ns.pong="3";Ns.message="4";Ns.upgrade="5";Ns.noop="6";const Wf=Object.create(null);Object.keys(Ns).forEach(e=>{Wf[Ns[e]]=e});const mb={type:"error",data:"parser error"},YI=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",XI=typeof ArrayBuffer=="function",eO=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,gw=({type:e,data:t},n,r)=>YI&&t instanceof Blob?n?r(t):DT(t,r):XI&&(t instanceof ArrayBuffer||eO(t))?n?r(t):DT(new Blob([t]),r):r(Ns[e]+(t||"")),DT=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function LT(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Fy;function Nte(e,t){if(YI&&e.data instanceof Blob)return e.data.arrayBuffer().then(LT).then(t);if(XI&&(e.data instanceof ArrayBuffer||eO(e.data)))return t(LT(e.data));gw(e,!1,n=>{Fy||(Fy=new TextEncoder),t(Fy.encode(n))})}const FT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<FT.length;e++)Vu[FT.charCodeAt(e)]=e;const jte=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),f=new Uint8Array(h);for(r=0;r<n;r+=4)s=Vu[e.charCodeAt(r)],o=Vu[e.charCodeAt(r+1)],l=Vu[e.charCodeAt(r+2)],d=Vu[e.charCodeAt(r+3)],f[i++]=s<<2|o>>4,f[i++]=(o&15)<<4|l>>2,f[i++]=(l&3)<<6|d&63;return h},Pte=typeof ArrayBuffer=="function",vw=(e,t)=>{if(typeof e!="string")return{type:"message",data:tO(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:_te(e.substring(1),t)}:Wf[n]?e.length>1?{type:Wf[n],data:e.substring(1)}:{type:Wf[n]}:mb},_te=(e,t)=>{if(Pte){const n=jte(e);return tO(n,t)}else return{base64:!0,data:e}},tO=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},nO="",Rte=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{gw(s,!1,l=>{r[o]=l,++i===n&&t(r.join(nO))})})},Ate=(e,t)=>{const n=e.split(nO),r=[];for(let i=0;i<n.length;i++){const s=vw(n[i],t);if(r.push(s),s.type==="error")break}return r};function Ite(){return new TransformStream({transform(e,t){Nte(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Uy;function gf(e){return e.reduce((t,n)=>t+n.length,0)}function vf(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Ote(e,t){Uy||(Uy=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(gf(n)<1)break;const d=vf(n,1);s=(d[0]&128)===128,i=d[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(gf(n)<2)break;const d=vf(n,2);i=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),r=3}else if(r===2){if(gf(n)<8)break;const d=vf(n,8),h=new DataView(d.buffer,d.byteOffset,d.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(mb);break}i=f*Math.pow(2,32)+h.getUint32(4),r=3}else{if(gf(n)<i)break;const d=vf(n,i);l.enqueue(vw(s?d:Uy.decode(d),t)),r=0}if(i===0||i>e){l.enqueue(mb);break}}}})}const rO=4;function gn(e){if(e)return Mte(e)}function Mte(e){for(var t in gn.prototype)e[t]=gn.prototype[t];return e}gn.prototype.on=gn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};gn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};gn.prototype.off=gn.prototype.removeListener=gn.prototype.removeAllListeners=gn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};gn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};gn.prototype.emitReserved=gn.prototype.emit;gn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};gn.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Wp=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ui=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Dte="arraybuffer";function iO(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const Lte=ui.setTimeout,Fte=ui.clearTimeout;function Kp(e,t){t.useNativeTimers?(e.setTimeoutFn=Lte.bind(ui),e.clearTimeoutFn=Fte.bind(ui)):(e.setTimeoutFn=ui.setTimeout.bind(ui),e.clearTimeoutFn=ui.clearTimeout.bind(ui))}const Ute=1.33;function Bte(e){return typeof e=="string"?zte(e):Math.ceil((e.byteLength||e.size)*Ute)}function zte(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function sO(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $te(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Vte(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class qte extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class yw extends gn{constructor(t){super(),this.writable=!1,Kp(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new qte(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=vw(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=$te(t);return n.length?"?"+n:""}}class Hte extends yw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ate(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Rte(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=sO()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let oO=!1;try{oO=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wte=oO;function Kte(){}class Gte extends Hte{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class xs extends gn{constructor(t,n,r){super(),this.createRequest=t,Kp(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=iO(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=xs.requestsCount++,xs.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Kte,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete xs.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}xs.requestsCount=0;xs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",UT);else if(typeof addEventListener=="function"){const e="onpagehide"in ui?"pagehide":"unload";addEventListener(e,UT,!1)}}function UT(){for(let e in xs.requests)xs.requests.hasOwnProperty(e)&&xs.requests[e].abort()}const Zte=(function(){const e=aO({xdomain:!1});return e&&e.responseType!==null})();class Jte extends Gte{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Zte&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new xs(aO,this.uri(),t)}}function aO(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Wte))return new XMLHttpRequest}catch{}if(!t)try{return new ui[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const cO=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qte extends yw{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=cO?{}:iO(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;gw(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Wp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=sO()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const By=ui.WebSocket||ui.MozWebSocket;class Yte extends Qte{createSocket(t,n,r){return cO?new By(t,n,r):n?new By(t,n):new By(t)}doWrite(t,n){this.ws.send(n)}}class Xte extends yw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Ote(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=Ite();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:d})=>{l||(this.onPacket(d),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&Wp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ene={websocket:Yte,webtransport:Xte,polling:Jte},tne=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nne=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pb(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=tne.exec(e||""),s={},o=14;for(;o--;)s[nne[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=rne(s,s.path),s.queryKey=ine(s,s.query),s}function rne(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ine(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const gb=typeof addEventListener=="function"&&typeof removeEventListener=="function",Kf=[];gb&&addEventListener("offline",()=>{Kf.forEach(e=>e())},!1);class ia extends gn{constructor(t,n){if(super(),this.binaryType=Dte,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=pb(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=pb(n.host).host);Kp(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vte(this.opts.query)),gb&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Kf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=rO,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ia.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ia.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Bte(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Wp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(ia.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),gb&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Kf.indexOf(this._offlineEventListener);r!==-1&&Kf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}ia.protocol=rO;class sne extends ia{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;ia.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ia.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function s(){r||(r=!0,f(),n.close(),n=null)}const o=p=>{const y=new Error("probe error: "+p);y.transport=n.name,s(),this.emitReserved("upgradeError",y)};function l(){o("transport closed")}function d(){o("socket closed")}function h(p){n&&p.name!==n.name&&s()}const f=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",d),this.off("upgrading",h)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",d),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let one=class extends sne{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>ene[i]).filter(i=>!!i)),super(t,r)}};function ane(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=pb(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const cne=typeof ArrayBuffer=="function",lne=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,lO=Object.prototype.toString,une=typeof Blob=="function"||typeof Blob<"u"&&lO.call(Blob)==="[object BlobConstructor]",dne=typeof File=="function"||typeof File<"u"&&lO.call(File)==="[object FileConstructor]";function bw(e){return cne&&(e instanceof ArrayBuffer||lne(e))||une&&e instanceof Blob||dne&&e instanceof File}function Gf(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Gf(e[n]))return!0;return!1}if(bw(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Gf(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Gf(e[n]))return!0;return!1}function hne(e){const t=[],n=e.data,r=e;return r.data=vb(n,t),r.attachments=t.length,{packet:r,buffers:t}}function vb(e,t){if(!e)return e;if(bw(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=vb(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=vb(e[r],t));return n}return e}function fne(e,t){return e.data=yb(e.data,t),delete e.attachments,e}function yb(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=yb(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=yb(e[n],t));return e}const mne=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pne=5;var gt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(gt||(gt={}));class gne{constructor(t){this.replacer=t}encode(t){return(t.type===gt.EVENT||t.type===gt.ACK)&&Gf(t)?this.encodeAsBinary({type:t.type===gt.EVENT?gt.BINARY_EVENT:gt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===gt.BINARY_EVENT||t.type===gt.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=hne(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function BT(e){return Object.prototype.toString.call(e)==="[object Object]"}class xw extends gn{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===gt.BINARY_EVENT;r||n.type===gt.BINARY_ACK?(n.type=r?gt.EVENT:gt.ACK,this.reconstructor=new vne(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(bw(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(gt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===gt.BINARY_EVENT||r.type===gt.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(xw.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case gt.CONNECT:return BT(n);case gt.DISCONNECT:return n===void 0;case gt.CONNECT_ERROR:return typeof n=="string"||BT(n);case gt.EVENT:case gt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&mne.indexOf(n[0])===-1);case gt.ACK:case gt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vne{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=fne(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const yne=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xw,Encoder:gne,get PacketType(){return gt},protocol:pne},Symbol.toStringTag,{value:"Module"}));function _i(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const bne=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class uO extends gn{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[_i(t,"open",this.onopen.bind(this)),_i(t,"packet",this.onpacket.bind(this)),_i(t,"error",this.onerror.bind(this)),_i(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(bne.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:gt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,p=n.pop();this._registerAckCallback(f,p),o.id=f}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,d=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(d?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:gt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case gt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case gt.EVENT:case gt.BINARY_EVENT:this.onevent(t);break;case gt.ACK:case gt.BINARY_ACK:this.onack(t);break;case gt.DISCONNECT:this.ondisconnect();break;case gt.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:gt.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Vl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Vl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};Vl.prototype.reset=function(){this.attempts=0};Vl.prototype.setMin=function(e){this.ms=e};Vl.prototype.setMax=function(e){this.max=e};Vl.prototype.setJitter=function(e){this.jitter=e};class bb extends gn{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Kp(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Vl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||yne;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new one(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=_i(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=_i(n,"error",s);if(this._timeout!==!1){const l=this._timeout,d=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(_i(t,"ping",this.onping.bind(this)),_i(t,"data",this.ondata.bind(this)),_i(t,"error",this.onerror.bind(this)),_i(t,"close",this.onclose.bind(this)),_i(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Wp(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new uO(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Fu={};function Zf(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=ane(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Fu[i]&&s in Fu[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let d;return l?d=new bb(r,t):(Fu[i]||(Fu[i]=new bb(r,t)),d=Fu[i]),n.query&&!t.query&&(t.query=n.queryKey),d.socket(n.path,t)}Object.assign(Zf,{Manager:bb,Socket:uO,io:Zf,connect:Zf});class xne{socket=null;url;constructor(t){this.url=t||void 0||"http://localhost:3000"}connect(){if(this.socket?.connected)return console.warn("[WEBSOCKET] Already connected"),this.socket;const t=rF();if(!t)throw new Error("No authentication token found. Please login first.");return this.socket=Zf(this.url,{auth:{token:t},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{}),this.socket.on("disconnect",n=>{}),this.socket.on("connect_error",n=>{console.error("[WEBSOCKET] Connection error:",n.message)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}joinConversation(t){if(!this.socket?.connected)throw new Error("WebSocket not connected. Call connect() first.");this.socket.emit("joinConversation",{conversationId:t})}leaveConversation(t){this.socket?.connected&&this.socket.emit("leaveConversation",{conversationId:t})}sendMessage(t){if(!this.socket?.connected)throw new Error("WebSocket not connected. Call connect() first.");this.socket.emit("sendMessage",{conversationId:t.conversationId,content:t.content,language:t.language||"es"})}onNewMessage(t){if(!this.socket)throw new Error("WebSocket not initialized. Call connect() first.");this.socket.on("newMessage",t)}onMessageSent(t){if(!this.socket)throw new Error("WebSocket not initialized. Call connect() first.");this.socket.on("messageSent",t)}onError(t){if(!this.socket)throw new Error("WebSocket not initialized. Call connect() first.");this.socket.on("error",t)}off(t,n){this.socket&&this.socket.off(t,n)}isConnected(){return this.socket?.connected??!1}getSocket(){return this.socket}}let zy=null;function wne(){return zy||(zy=new xne),zy}function kne(e){const{conversationId:t,autoConnect:n=!0,onNewMessage:r,onMessageSent:i,onError:s}=e,[o,l]=g.useState(!1),[d,h]=g.useState([]),f=g.useRef(null);g.useEffect(()=>(f.current=wne(),()=>{f.current&&f.current.leaveConversation(t)}),[t]);const p=g.useCallback(()=>{if(f.current)try{const x=f.current.connect();x.on("connect",()=>{l(!0),f.current?.joinConversation(t)}),x.on("disconnect",()=>{l(!1)}),f.current.onNewMessage(S=>{S.ConversationId===t&&(h(E=>[...E,S]),r?.(S))}),f.current.onMessageSent(S=>{i?.(S)}),f.current.onError(S=>{console.error("[WEBSOCKET] Error:",S.message),s?.(S)})}catch(x){console.error("[WEBSOCKET] Connection failed:",x.message)}},[t,r,i,s]),y=g.useCallback(()=>{f.current&&(f.current.leaveConversation(t),f.current.disconnect(),l(!1))},[t]),b=g.useCallback((x,S)=>{if(!f.current?.isConnected()){console.error("[WEBSOCKET] Cannot send message: not connected");return}f.current.sendMessage({conversationId:t,content:x,language:S})},[t]),k=g.useCallback(()=>{h([])},[]);return g.useEffect(()=>(n&&p(),()=>{y()}),[n,p,y]),{isConnected:o,messages:d,sendMessage:b,connect:p,disconnect:y,clearMessages:k}}function Sne(){const{conversationId:e}=Zm(),{user:t}=cc(),[n,r]=g.useState(""),i=g.useRef(null),{messages:s,sendMessage:o,isConnected:l,connect:d}=kne({conversationId:e||"",autoConnect:!0,onNewMessage:p=>{p.SenderUserId!==t?.userId&&Tt.info(`Nuevo mensaje de ${p.Sender.FirstName}`)},onError:p=>{Tt.error(`Error: ${p.message}`)}});g.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[s]);const h=()=>{if(n.trim()){if(!l){Tt.error("No estás conectado. Reconectando..."),d();return}o(n.trim()),r("")}},f=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),h())};return e?c.jsxs(le,{className:"h-[600px] flex flex-col",children:[c.jsx(Oe,{className:"border-b",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx($e,{children:"Chat en Tiempo Real"}),c.jsx(Ze,{variant:l?"default":"destructive",children:l?c.jsxs(c.Fragment,{children:[c.jsx(vB,{className:"h-3 w-3 mr-1"}),"Conectado"]}):c.jsxs(c.Fragment,{children:[c.jsx(pB,{className:"h-3 w-3 mr-1"}),"Desconectado"]})})]})}),c.jsxs(de,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.length===0?c.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[c.jsx("p",{children:"No hay mensajes aún"}),c.jsx("p",{className:"text-sm mt-2",children:"Envía un mensaje para comenzar la conversación"})]}):s.map(p=>{const y=p.SenderUserId===t?.userId;return c.jsx("div",{className:`flex ${y?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`flex gap-2 max-w-[70%] ${y?"flex-row-reverse":""}`,children:[c.jsx(Ys,{className:"h-8 w-8",children:c.jsxs(Xs,{children:[p.Sender.FirstName[0],p.Sender.LastName1[0]]})}),c.jsxs("div",{children:[c.jsxs("div",{className:`rounded-lg p-3 ${y?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:[!y&&c.jsxs("div",{className:"text-xs font-medium mb-1",children:[p.Sender.FirstName," ",p.Sender.LastName1]}),c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.Content})]}),c.jsx("div",{className:"text-xs text-muted-foreground mt-1 px-1",children:new Date(p.CreatedAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]})},p.MessageId)}),c.jsx("div",{ref:i})]}),c.jsx(H2,{className:"border-t p-4",children:c.jsxs("div",{className:"flex gap-2 w-full",children:[c.jsx(At,{placeholder:"Escribe un mensaje...",value:n,onChange:p=>r(p.target.value),onKeyPress:f,disabled:!l}),c.jsx(Q,{onClick:h,disabled:!l||!n.trim(),children:l?c.jsx(np,{className:"h-4 w-4"}):c.jsx(Kn,{className:"h-4 w-4 animate-spin"})})]})})]}):c.jsx(Ss,{variant:"destructive",children:c.jsx(Cs,{children:"ID de conversación no proporcionado"})})}var Bd=e=>e.type==="checkbox",Da=e=>e instanceof Date,Tr=e=>e==null;const dO=e=>typeof e=="object";var vn=e=>!Tr(e)&&!Array.isArray(e)&&dO(e)&&!Da(e),Cne=e=>vn(e)&&e.target?Bd(e.target)?e.target.checked:e.target.value:e,Ene=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Tne=(e,t)=>e.has(Ene(t)),Nne=e=>{const t=e.constructor&&e.constructor.prototype;return vn(t)&&t.hasOwnProperty("isPrototypeOf")},ww=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ln(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ww&&(e instanceof Blob||r))&&(n||vn(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!Nne(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Ln(e[i]));else return e;return t}var Gp=e=>/^\w*$/.test(e),rn=e=>e===void 0,kw=e=>Array.isArray(e)?e.filter(Boolean):[],Sw=e=>kw(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Fe=(e,t,n)=>{if(!t||!vn(e))return n;const r=(Gp(t)?[t]:Sw(t)).reduce((i,s)=>Tr(i)?i:i[s],e);return rn(r)||r===e?rn(e[t])?n:e[t]:r},hs=e=>typeof e=="boolean",Pt=(e,t,n)=>{let r=-1;const i=Gp(t)?[t]:Sw(t),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let d=n;if(r!==o){const h=e[l];d=vn(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=d,e=e[l]}};const zT={BLUR:"blur",FOCUS_OUT:"focusout"},Oi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Hs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jne=ye.createContext(null);jne.displayName="HookFormContext";var Pne=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Oi.all&&(t._proxyFormState[o]=!r||Oi.all),e[o]}});return i};const _ne=typeof window<"u"?ye.useLayoutEffect:ye.useEffect;var Vr=e=>typeof e=="string",Rne=(e,t,n,r,i)=>Vr(e)?(r&&t.watch.add(e),Fe(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),Fe(n,s))):(r&&(t.watchAll=!0),n),xb=e=>Tr(e)||!dO(e);function Wo(e,t,n=new WeakSet){if(xb(e)||xb(t))return e===t;if(Da(e)&&Da(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const o=e[s];if(!i.includes(s))return!1;if(s!=="ref"){const l=t[s];if(Da(o)&&Da(l)||vn(o)&&vn(l)||Array.isArray(o)&&Array.isArray(l)?!Wo(o,l,n):o!==l)return!1}}return!0}var Cw=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},Gu=e=>Array.isArray(e)?e:[e],$T=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}};function hO(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r],s=t[r];if(i&&vn(i)&&s){const o=hO(i,s);vn(o)&&(n[r]=o)}else e[r]&&(n[r]=s)}return n}var Cr=e=>vn(e)&&!Object.keys(e).length,Ew=e=>e.type==="file",Mi=e=>typeof e=="function",zm=e=>{if(!ww)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},fO=e=>e.type==="select-multiple",Tw=e=>e.type==="radio",Ane=e=>Tw(e)||Bd(e),$y=e=>zm(e)&&e.isConnected;function Ine(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=rn(e)?r++:e[t[r++]];return e}function One(e){for(const t in e)if(e.hasOwnProperty(t)&&!rn(e[t]))return!1;return!0}function mn(e,t){const n=Array.isArray(t)?t:Gp(t)?[t]:Sw(t),r=n.length===1?e:Ine(e,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(vn(r)&&Cr(r)||Array.isArray(r)&&One(r))&&mn(e,n.slice(0,-1)),e}var Mne=e=>{for(const t in e)if(Mi(e[t]))return!0;return!1};function mO(e){return Array.isArray(e)||vn(e)&&!Mne(e)}function wb(e,t={}){for(const n in e)mO(e[n])?(t[n]=Array.isArray(e[n])?[]:{},wb(e[n],t[n])):rn(e[n])||(t[n]=!0);return t}function Hc(e,t,n){n||(n=wb(t));for(const r in e)mO(e[r])?rn(t)||xb(n[r])?n[r]=wb(e[r],Array.isArray(e[r])?[]:{}):Hc(e[r],Tr(t)?{}:t[r],n[r]):n[r]=!Wo(e[r],t[r]);return n}const VT={value:!1,isValid:!1},qT={value:!0,isValid:!0};var pO=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rn(e[0].attributes.value)?rn(e[0].value)||e[0].value===""?qT:{value:e[0].value,isValid:!0}:qT:VT}return VT},gO=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>rn(e)?e:t?e===""?NaN:e&&+e:n&&Vr(e)?new Date(e):r?r(e):e;const HT={isValid:!1,value:null};var vO=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,HT):HT;function WT(e){const t=e.ref;return Ew(t)?t.files:Tw(t)?vO(e.refs).value:fO(t)?[...t.selectedOptions].map(({value:n})=>n):Bd(t)?pO(e.refs).value:gO(rn(t.value)?e.ref.value:t.value,e)}var Dne=(e,t,n,r)=>{const i={};for(const s of e){const o=Fe(t,s);o&&Pt(i,s,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},$m=e=>e instanceof RegExp,Uu=e=>rn(e)?e:$m(e)?e.source:vn(e)?$m(e.value)?e.value.source:e.value:e,KT=e=>({isOnSubmit:!e||e===Oi.onSubmit,isOnBlur:e===Oi.onBlur,isOnChange:e===Oi.onChange,isOnAll:e===Oi.all,isOnTouch:e===Oi.onTouched});const GT="AsyncFunction";var Lne=e=>!!e&&!!e.validate&&!!(Mi(e.validate)&&e.validate.constructor.name===GT||vn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===GT)),Fne=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ZT=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Zu=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const s=Fe(e,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Zu(l,t))break}else if(vn(l)&&Zu(l,t))break}}};function JT(e,t,n){const r=Fe(e,n);if(r||Gp(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Fe(t,s),l=Fe(e,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};i.pop()}return{name:n}}var Une=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return Cr(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!r||Oi.all))},Bne=(e,t,n)=>!e||!t||e===t||Gu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),zne=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,$ne=(e,t)=>!kw(Fe(e,t)).length&&mn(e,t),Vne=(e,t,n)=>{const r=Gu(Fe(e,n));return Pt(r,"root",t[n]),Pt(e,n,r),e};function QT(e,t,n="validate"){if(Vr(e)||Array.isArray(e)&&e.every(Vr)||hs(e)&&!e)return{type:n,message:Vr(e)?e:"",ref:t}}var qc=e=>vn(e)&&!$m(e)?e:{value:e,message:""},YT=async(e,t,n,r,i,s)=>{const{ref:o,refs:l,required:d,maxLength:h,minLength:f,min:p,max:y,pattern:b,validate:k,name:x,valueAsNumber:S,mount:E}=e._f,T=Fe(n,x);if(!E||t.has(x))return{};const P=l?l[0]:o,j=V=>{i&&P.reportValidity&&(P.setCustomValidity(hs(V)?"":V||""),P.reportValidity())},N={},R=Tw(o),A=Bd(o),I=R||A,D=(S||Ew(o))&&rn(o.value)&&rn(T)||zm(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,z=Cw.bind(null,x,r,N),q=(V,te,J,we=Hs.maxLength,X=Hs.minLength)=>{const me=V?te:J;N[x]={type:V?we:X,message:me,ref:o,...z(V?we:X,me)}};if(s?!Array.isArray(T)||!T.length:d&&(!I&&(D||Tr(T))||hs(T)&&!T||A&&!pO(l).isValid||R&&!vO(l).isValid)){const{value:V,message:te}=Vr(d)?{value:!!d,message:d}:qc(d);if(V&&(N[x]={type:Hs.required,message:te,ref:P,...z(Hs.required,te)},!r))return j(te),N}if(!D&&(!Tr(p)||!Tr(y))){let V,te;const J=qc(y),we=qc(p);if(!Tr(T)&&!isNaN(T)){const X=o.valueAsNumber||T&&+T;Tr(J.value)||(V=X>J.value),Tr(we.value)||(te=X<we.value)}else{const X=o.valueAsDate||new Date(T),me=fe=>new Date(new Date().toDateString()+" "+fe),U=o.type=="time",ue=o.type=="week";Vr(J.value)&&T&&(V=U?me(T)>me(J.value):ue?T>J.value:X>new Date(J.value)),Vr(we.value)&&T&&(te=U?me(T)<me(we.value):ue?T<we.value:X<new Date(we.value))}if((V||te)&&(q(!!V,J.message,we.message,Hs.max,Hs.min),!r))return j(N[x].message),N}if((h||f)&&!D&&(Vr(T)||s&&Array.isArray(T))){const V=qc(h),te=qc(f),J=!Tr(V.value)&&T.length>+V.value,we=!Tr(te.value)&&T.length<+te.value;if((J||we)&&(q(J,V.message,te.message),!r))return j(N[x].message),N}if(b&&!D&&Vr(T)){const{value:V,message:te}=qc(b);if($m(V)&&!T.match(V)&&(N[x]={type:Hs.pattern,message:te,ref:o,...z(Hs.pattern,te)},!r))return j(te),N}if(k){if(Mi(k)){const V=await k(T,n),te=QT(V,P);if(te&&(N[x]={...te,...z(Hs.validate,te.message)},!r))return j(te.message),N}else if(vn(k)){let V={};for(const te in k){if(!Cr(V)&&!r)break;const J=QT(await k[te](T,n),P,te);J&&(V={...J,...z(te,J.message)},j(J.message),r&&(N[x]=V))}if(!Cr(V)&&(N[x]={ref:P,...V},!r))return N}}return j(!0),N};const qne={mode:Oi.onSubmit,reValidateMode:Oi.onChange,shouldFocusError:!0};function Hne(e={}){let t={...qne,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Mi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=vn(t.defaultValues)||vn(t.values)?Ln(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ln(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:$T(),state:$T()},b=t.criteriaMode===Oi.all,k=L=>W=>{clearTimeout(h),h=setTimeout(L,W)},x=async L=>{if(!t.disabled&&(f.isValid||p.isValid||L)){const W=t.resolver?Cr((await A()).errors):await D(r,!0);W!==n.isValid&&y.state.next({isValid:W})}},S=(L,W)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((L||Array.from(l.mount)).forEach(ne=>{ne&&(W?Pt(n.validatingFields,ne,W):mn(n.validatingFields,ne))}),y.state.next({validatingFields:n.validatingFields,isValidating:!Cr(n.validatingFields)}))},E=(L,W=[],ne,Pe,Ne=!0,Ce=!0)=>{if(Pe&&ne&&!t.disabled){if(o.action=!0,Ce&&Array.isArray(Fe(r,L))){const Be=ne(Fe(r,L),Pe.argA,Pe.argB);Ne&&Pt(r,L,Be)}if(Ce&&Array.isArray(Fe(n.errors,L))){const Be=ne(Fe(n.errors,L),Pe.argA,Pe.argB);Ne&&Pt(n.errors,L,Be),$ne(n.errors,L)}if((f.touchedFields||p.touchedFields)&&Ce&&Array.isArray(Fe(n.touchedFields,L))){const Be=ne(Fe(n.touchedFields,L),Pe.argA,Pe.argB);Ne&&Pt(n.touchedFields,L,Be)}(f.dirtyFields||p.dirtyFields)&&(n.dirtyFields=Hc(i,s)),y.state.next({name:L,isDirty:q(L,W),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Pt(s,L,W)},T=(L,W)=>{Pt(n.errors,L,W),y.state.next({errors:n.errors})},P=L=>{n.errors=L,y.state.next({errors:n.errors,isValid:!1})},j=(L,W,ne,Pe)=>{const Ne=Fe(r,L);if(Ne){const Ce=Fe(s,L,rn(ne)?Fe(i,L):ne);rn(Ce)||Pe&&Pe.defaultChecked||W?Pt(s,L,W?Ce:WT(Ne._f)):J(L,Ce),o.mount&&x()}},N=(L,W,ne,Pe,Ne)=>{let Ce=!1,Be=!1;const pt={name:L};if(!t.disabled){if(!ne||Pe){(f.isDirty||p.isDirty)&&(Be=n.isDirty,n.isDirty=pt.isDirty=q(),Ce=Be!==pt.isDirty);const vt=Wo(Fe(i,L),W);Be=!!Fe(n.dirtyFields,L),vt?mn(n.dirtyFields,L):Pt(n.dirtyFields,L,!0),pt.dirtyFields=n.dirtyFields,Ce=Ce||(f.dirtyFields||p.dirtyFields)&&Be!==!vt}if(ne){const vt=Fe(n.touchedFields,L);vt||(Pt(n.touchedFields,L,ne),pt.touchedFields=n.touchedFields,Ce=Ce||(f.touchedFields||p.touchedFields)&&vt!==ne)}Ce&&Ne&&y.state.next(pt)}return Ce?pt:{}},R=(L,W,ne,Pe)=>{const Ne=Fe(n.errors,L),Ce=(f.isValid||p.isValid)&&hs(W)&&n.isValid!==W;if(t.delayError&&ne?(d=k(()=>T(L,ne)),d(t.delayError)):(clearTimeout(h),d=null,ne?Pt(n.errors,L,ne):mn(n.errors,L)),(ne?!Wo(Ne,ne):Ne)||!Cr(Pe)||Ce){const Be={...Pe,...Ce&&hs(W)?{isValid:W}:{},errors:n.errors,name:L};n={...n,...Be},y.state.next(Be)}},A=async L=>{S(L,!0);const W=await t.resolver(s,t.context,Dne(L||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return S(L),W},I=async L=>{const{errors:W}=await A(L);if(L)for(const ne of L){const Pe=Fe(W,ne);Pe?Pt(n.errors,ne,Pe):mn(n.errors,ne)}else n.errors=W;return W},D=async(L,W,ne={valid:!0})=>{for(const Pe in L){const Ne=L[Pe];if(Ne){const{_f:Ce,...Be}=Ne;if(Ce){const pt=l.array.has(Ce.name),vt=Ne._f&&Lne(Ne._f);vt&&f.validatingFields&&S([Ce.name],!0);const wn=await YT(Ne,l.disabled,s,b,t.shouldUseNativeValidation&&!W,pt);if(vt&&f.validatingFields&&S([Ce.name]),wn[Ce.name]&&(ne.valid=!1,W))break;!W&&(Fe(wn,Ce.name)?pt?Vne(n.errors,wn,Ce.name):Pt(n.errors,Ce.name,wn[Ce.name]):mn(n.errors,Ce.name))}!Cr(Be)&&await D(Be,W,ne)}}return ne.valid},z=()=>{for(const L of l.unMount){const W=Fe(r,L);W&&(W._f.refs?W._f.refs.every(ne=>!$y(ne)):!$y(W._f.ref))&&ae(L)}l.unMount=new Set},q=(L,W)=>!t.disabled&&(L&&W&&Pt(s,L,W),!Wo(fe(),i)),V=(L,W,ne)=>Rne(L,l,{...o.mount?s:rn(W)?i:Vr(L)?{[L]:W}:W},ne,W),te=L=>kw(Fe(o.mount?s:i,L,t.shouldUnregister?Fe(i,L,[]):[])),J=(L,W,ne={})=>{const Pe=Fe(r,L);let Ne=W;if(Pe){const Ce=Pe._f;Ce&&(!Ce.disabled&&Pt(s,L,gO(W,Ce)),Ne=zm(Ce.ref)&&Tr(W)?"":W,fO(Ce.ref)?[...Ce.ref.options].forEach(Be=>Be.selected=Ne.includes(Be.value)):Ce.refs?Bd(Ce.ref)?Ce.refs.forEach(Be=>{(!Be.defaultChecked||!Be.disabled)&&(Array.isArray(Ne)?Be.checked=!!Ne.find(pt=>pt===Be.value):Be.checked=Ne===Be.value||!!Ne)}):Ce.refs.forEach(Be=>Be.checked=Be.value===Ne):Ew(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Ne,Ce.ref.type||y.state.next({name:L,values:Ln(s)})))}(ne.shouldDirty||ne.shouldTouch)&&N(L,Ne,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&ue(L)},we=(L,W,ne)=>{for(const Pe in W){if(!W.hasOwnProperty(Pe))return;const Ne=W[Pe],Ce=L+"."+Pe,Be=Fe(r,Ce);(l.array.has(L)||vn(Ne)||Be&&!Be._f)&&!Da(Ne)?we(Ce,Ne,ne):J(Ce,Ne,ne)}},X=(L,W,ne={})=>{const Pe=Fe(r,L),Ne=l.array.has(L),Ce=Ln(W);Pt(s,L,Ce),Ne?(y.array.next({name:L,values:Ln(s)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ne.shouldDirty&&y.state.next({name:L,dirtyFields:Hc(i,s),isDirty:q(L,Ce)})):Pe&&!Pe._f&&!Tr(Ce)?we(L,Ce,ne):J(L,Ce,ne),ZT(L,l)&&y.state.next({...n,name:L}),y.state.next({name:o.mount?L:void 0,values:Ln(s)})},me=async L=>{o.mount=!0;const W=L.target;let ne=W.name,Pe=!0;const Ne=Fe(r,ne),Ce=vt=>{Pe=Number.isNaN(vt)||Da(vt)&&isNaN(vt.getTime())||Wo(vt,Fe(s,ne,vt))},Be=KT(t.mode),pt=KT(t.reValidateMode);if(Ne){let vt,wn;const $n=W.type?WT(Ne._f):Cne(L),Vn=L.type===zT.BLUR||L.type===zT.FOCUS_OUT,es=!Fne(Ne._f)&&!t.resolver&&!Fe(n.errors,ne)&&!Ne._f.deps||zne(Vn,Fe(n.touchedFields,ne),n.isSubmitted,pt,Be),po=ZT(ne,l,Vn);Pt(s,ne,$n),Vn?(!W||!W.readOnly)&&(Ne._f.onBlur&&Ne._f.onBlur(L),d&&d(0)):Ne._f.onChange&&Ne._f.onChange(L);const go=N(ne,$n,Vn),pc=!Cr(go)||po;if(!Vn&&y.state.next({name:ne,type:L.type,values:Ln(s)}),es)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Vn&&x():Vn||x()),pc&&y.state.next({name:ne,...po?{}:go});if(!Vn&&po&&y.state.next({...n}),t.resolver){const{errors:Os}=await A([ne]);if(Ce($n),Pe){const ga=JT(n.errors,r,ne),ts=JT(Os,r,ga.name||ne);vt=ts.error,ne=ts.name,wn=Cr(Os)}}else S([ne],!0),vt=(await YT(Ne,l.disabled,s,b,t.shouldUseNativeValidation))[ne],S([ne]),Ce($n),Pe&&(vt?wn=!1:(f.isValid||p.isValid)&&(wn=await D(r,!0)));Pe&&(Ne._f.deps&&(!Array.isArray(Ne._f.deps)||Ne._f.deps.length>0)&&ue(Ne._f.deps),R(ne,wn,vt,go))}},U=(L,W)=>{if(Fe(n.errors,W)&&L.focus)return L.focus(),1},ue=async(L,W={})=>{let ne,Pe;const Ne=Gu(L);if(t.resolver){const Ce=await I(rn(L)?L:Ne);ne=Cr(Ce),Pe=L?!Ne.some(Be=>Fe(Ce,Be)):ne}else L?(Pe=(await Promise.all(Ne.map(async Ce=>{const Be=Fe(r,Ce);return await D(Be&&Be._f?{[Ce]:Be}:Be)}))).every(Boolean),!(!Pe&&!n.isValid)&&x()):Pe=ne=await D(r);return y.state.next({...!Vr(L)||(f.isValid||p.isValid)&&ne!==n.isValid?{}:{name:L},...t.resolver||!L?{isValid:ne}:{},errors:n.errors}),W.shouldFocus&&!Pe&&Zu(r,U,L?Ne:l.mount),Pe},fe=(L,W)=>{let ne={...o.mount?s:i};return W&&(ne=hO(W.dirtyFields?n.dirtyFields:n.touchedFields,ne)),rn(L)?ne:Vr(L)?Fe(ne,L):L.map(Pe=>Fe(ne,Pe))},F=(L,W)=>({invalid:!!Fe((W||n).errors,L),isDirty:!!Fe((W||n).dirtyFields,L),error:Fe((W||n).errors,L),isValidating:!!Fe(n.validatingFields,L),isTouched:!!Fe((W||n).touchedFields,L)}),ie=L=>{L&&Gu(L).forEach(W=>mn(n.errors,W)),y.state.next({errors:L?n.errors:{}})},pe=(L,W,ne)=>{const Pe=(Fe(r,L,{_f:{}})._f||{}).ref,Ne=Fe(n.errors,L)||{},{ref:Ce,message:Be,type:pt,...vt}=Ne;Pt(n.errors,L,{...vt,...W,ref:Pe}),y.state.next({name:L,errors:n.errors,isValid:!1}),ne&&ne.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},oe=(L,W)=>Mi(L)?y.state.subscribe({next:ne=>"values"in ne&&L(V(void 0,W),ne)}):V(L,W,!0),Se=L=>y.state.subscribe({next:W=>{Bne(L.name,W.name,L.exact)&&Une(W,L.formState||f,or,L.reRenderRoot)&&L.callback({values:{...s},...n,...W,defaultValues:i})}}).unsubscribe,Ae=L=>(o.mount=!0,p={...p,...L.formState},Se({...L,formState:p})),ae=(L,W={})=>{for(const ne of L?Gu(L):l.mount)l.mount.delete(ne),l.array.delete(ne),W.keepValue||(mn(r,ne),mn(s,ne)),!W.keepError&&mn(n.errors,ne),!W.keepDirty&&mn(n.dirtyFields,ne),!W.keepTouched&&mn(n.touchedFields,ne),!W.keepIsValidating&&mn(n.validatingFields,ne),!t.shouldUnregister&&!W.keepDefaultValue&&mn(i,ne);y.state.next({values:Ln(s)}),y.state.next({...n,...W.keepDirty?{isDirty:q()}:{}}),!W.keepIsValid&&x()},ke=({disabled:L,name:W})=>{(hs(L)&&o.mount||L||l.disabled.has(W))&&(L?l.disabled.add(W):l.disabled.delete(W))},Ue=(L,W={})=>{let ne=Fe(r,L);const Pe=hs(W.disabled)||hs(t.disabled);return Pt(r,L,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:L}},name:L,mount:!0,...W}}),l.mount.add(L),ne?ke({disabled:hs(W.disabled)?W.disabled:t.disabled,name:L}):j(L,!0,W.value),{...Pe?{disabled:W.disabled||t.disabled}:{},...t.progressive?{required:!!W.required,min:Uu(W.min),max:Uu(W.max),minLength:Uu(W.minLength),maxLength:Uu(W.maxLength),pattern:Uu(W.pattern)}:{},name:L,onChange:me,onBlur:me,ref:Ne=>{if(Ne){Ue(L,W),ne=Fe(r,L);const Ce=rn(Ne.value)&&Ne.querySelectorAll&&Ne.querySelectorAll("input,select,textarea")[0]||Ne,Be=Ane(Ce),pt=ne._f.refs||[];if(Be?pt.find(vt=>vt===Ce):Ce===ne._f.ref)return;Pt(r,L,{_f:{...ne._f,...Be?{refs:[...pt.filter($y),Ce,...Array.isArray(Fe(i,L))?[{}]:[]],ref:{type:Ce.type,name:L}}:{ref:Ce}}}),j(L,!1,void 0,Ce)}else ne=Fe(r,L,{}),ne._f&&(ne._f.mount=!1),(t.shouldUnregister||W.shouldUnregister)&&!(Tne(l.array,L)&&o.action)&&l.unMount.add(L)}}},qe=()=>t.shouldFocusError&&Zu(r,U,l.mount),nt=L=>{hs(L)&&(y.state.next({disabled:L}),Zu(r,(W,ne)=>{const Pe=Fe(r,ne);Pe&&(W.disabled=Pe._f.disabled||L,Array.isArray(Pe._f.refs)&&Pe._f.refs.forEach(Ne=>{Ne.disabled=Pe._f.disabled||L}))},0,!1))},ct=(L,W)=>async ne=>{let Pe;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let Ne=Ln(s);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:Ce,values:Be}=await A();n.errors=Ce,Ne=Ln(Be)}else await D(r);if(l.disabled.size)for(const Ce of l.disabled)mn(Ne,Ce);if(mn(n.errors,"root"),Cr(n.errors)){y.state.next({errors:{}});try{await L(Ne,ne)}catch(Ce){Pe=Ce}}else W&&await W({...n.errors},ne),qe(),setTimeout(qe);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cr(n.errors)&&!Pe,submitCount:n.submitCount+1,errors:n.errors}),Pe)throw Pe},Yt=(L,W={})=>{Fe(r,L)&&(rn(W.defaultValue)?X(L,Ln(Fe(i,L))):(X(L,W.defaultValue),Pt(i,L,Ln(W.defaultValue))),W.keepTouched||mn(n.touchedFields,L),W.keepDirty||(mn(n.dirtyFields,L),n.isDirty=W.defaultValue?q(L,Ln(Fe(i,L))):q()),W.keepError||(mn(n.errors,L),f.isValid&&x()),y.state.next({...n}))},An=(L,W={})=>{const ne=L?Ln(L):i,Pe=Ln(ne),Ne=Cr(L),Ce=Ne?i:Pe;if(W.keepDefaultValues||(i=ne),!W.keepValues){if(W.keepDirtyValues){const Be=new Set([...l.mount,...Object.keys(Hc(i,s))]);for(const pt of Array.from(Be))Fe(n.dirtyFields,pt)?Pt(Ce,pt,Fe(s,pt)):X(pt,Fe(Ce,pt))}else{if(ww&&rn(L))for(const Be of l.mount){const pt=Fe(r,Be);if(pt&&pt._f){const vt=Array.isArray(pt._f.refs)?pt._f.refs[0]:pt._f.ref;if(zm(vt)){const wn=vt.closest("form");if(wn){wn.reset();break}}}}if(W.keepFieldsRef)for(const Be of l.mount)X(Be,Fe(Ce,Be));else r={}}s=t.shouldUnregister?W.keepDefaultValues?Ln(i):{}:Ln(Ce),y.array.next({values:{...Ce}}),y.state.next({values:{...Ce}})}l={mount:W.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!W.keepIsValid||!!W.keepDirtyValues,o.watch=!!t.shouldUnregister,y.state.next({submitCount:W.keepSubmitCount?n.submitCount:0,isDirty:Ne?!1:W.keepDirty?n.isDirty:!!(W.keepDefaultValues&&!Wo(L,i)),isSubmitted:W.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ne?{}:W.keepDirtyValues?W.keepDefaultValues&&s?Hc(i,s):n.dirtyFields:W.keepDefaultValues&&L?Hc(i,L):W.keepDirty?n.dirtyFields:{},touchedFields:W.keepTouched?n.touchedFields:{},errors:W.keepErrors?n.errors:{},isSubmitSuccessful:W.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},yi=(L,W)=>An(Mi(L)?L(s):L,W),bi=(L,W={})=>{const ne=Fe(r,L),Pe=ne&&ne._f;if(Pe){const Ne=Pe.refs?Pe.refs[0]:Pe.ref;Ne.focus&&(Ne.focus(),W.shouldSelect&&Mi(Ne.select)&&Ne.select())}},or=L=>{n={...n,...L}},Zn={control:{register:Ue,unregister:ae,getFieldState:F,handleSubmit:ct,setError:pe,_subscribe:Se,_runSchema:A,_focusError:qe,_getWatch:V,_getDirty:q,_setValid:x,_setFieldArray:E,_setDisabledField:ke,_setErrors:P,_getFieldArray:te,_reset:An,_resetDefaultValues:()=>Mi(t.defaultValues)&&t.defaultValues().then(L=>{yi(L,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:nt,_subjects:y,_proxyFormState:f,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return l},set _names(L){l=L},get _formState(){return n},get _options(){return t},set _options(L){t={...t,...L}}},subscribe:Ae,trigger:ue,register:Ue,handleSubmit:ct,watch:oe,setValue:X,getValues:fe,reset:yi,resetField:Yt,clearErrors:ie,unregister:ae,setError:pe,setFocus:bi,getFieldState:F};return{...Zn,formControl:Zn}}function Wne(e={}){const t=ye.useRef(void 0),n=ye.useRef(void 0),[r,i]=ye.useState({isDirty:!1,isValidating:!1,isLoading:Mi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Mi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Mi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=Hne(e);t.current={...l,formState:r}}const s=t.current.control;return s._options=e,_ne(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),ye.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),ye.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),ye.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),ye.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),ye.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),ye.useEffect(()=>{e.values&&!Wo(e.values,n.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=e.values,i(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),ye.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Pne(r,s),t.current}const XT=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Fe(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},kb=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?XT(r.ref,n,e):r&&r.refs&&r.refs.forEach(i=>XT(i,n,e))}},eN=(e,t)=>{t.shouldUseNativeValidation&&kb(e,t);const n={};for(const r in e){const i=Fe(t.fields,r),s=Object.assign(e[r]||{},{ref:i&&i.ref});if(Kne(t.names||Object.keys(e),r)){const o=Object.assign({},Fe(n,r));Pt(o,"root",s),Pt(n,r,o)}else Pt(n,r,s)}return n},Kne=(e,t)=>{const n=tN(t);return e.some(r=>tN(r).match(`^${n}\\.\\d+`))};function tN(e){return e.replace(/\]|\[/g,"")}function he(e,t,n){function r(l,d){var h;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(h=l._zod).traits??(h.traits=new Set),l._zod.traits.add(e),t(l,d);for(const f in o.prototype)f in l||Object.defineProperty(l,f,{value:o.prototype[f].bind(l)});l._zod.constr=o,l._zod.def=d}const i=n?.Parent??Object;class s extends i{}Object.defineProperty(s,"name",{value:e});function o(l){var d;const h=n?.Parent?new s:this;r(h,l),(d=h._zod).deferred??(d.deferred=[]);for(const f of h._zod.deferred)f();return h}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>n?.Parent&&l instanceof n.Parent?!0:l?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}class cl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class yO extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const bO={};function sc(e){return bO}function Gne(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,i])=>t.indexOf(+r)===-1).map(([r,i])=>i)}function Sb(e,t){return typeof t=="bigint"?t.toString():t}function Nw(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function jw(e){return e==null}function Pw(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Zne(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const d=r.match(/\d?e-(\d?)/);d?.[1]&&(i=Number.parseInt(d[1]))}const s=n>i?n:i,o=Number.parseInt(e.toFixed(s).replace(".","")),l=Number.parseInt(t.toFixed(s).replace(".",""));return o%l/10**s}const nN=Symbol("evaluating");function It(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==nN)return r===void 0&&(r=nN,r=n()),r},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function hc(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function fc(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function rN(e){return JSON.stringify(e)}const xO="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Vm(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Jne=Nw(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function gd(e){if(Vm(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(Vm(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function wO(e){return gd(e)?{...e}:Array.isArray(e)?[...e]:e}const Qne=new Set(["string","number","symbol"]);function Sl(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pa(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function He(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Yne(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Xne={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ere(e,t){const n=e._zod.def,r=fc(e._zod.def,{get shape(){const i={};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(i[s]=n.shape[s])}return hc(this,"shape",i),i},checks:[]});return pa(e,r)}function tre(e,t){const n=e._zod.def,r=fc(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete i[s]}return hc(this,"shape",i),i},checks:[]});return pa(e,r)}function nre(e,t){if(!gd(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=fc(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return hc(this,"shape",s),s},checks:[]});return pa(e,i)}function rre(e,t){if(!gd(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return hc(this,"shape",r),r},checks:e._zod.def.checks};return pa(e,n)}function ire(e,t){const n=fc(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return hc(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return pa(e,n)}function sre(e,t,n){const r=fc(t._zod.def,{get shape(){const i=t._zod.def.shape,s={...i};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=e?new e({type:"optional",innerType:i[o]}):i[o])}else for(const o in i)s[o]=e?new e({type:"optional",innerType:i[o]}):i[o];return hc(this,"shape",s),s},checks:[]});return pa(t,r)}function ore(e,t,n){const r=fc(t._zod.def,{get shape(){const i=t._zod.def.shape,s={...i};if(n)for(const o in n){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=new e({type:"nonoptional",innerType:i[o]}))}else for(const o in i)s[o]=new e({type:"nonoptional",innerType:i[o]});return hc(this,"shape",s),s},checks:[]});return pa(t,r)}function Jc(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function kO(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function yf(e){return typeof e=="string"?e:e?.message}function oc(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const i=yf(e.inst?._zod.def?.error?.(e))??yf(t?.error?.(e))??yf(n.customError?.(e))??yf(n.localeError?.(e))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function _w(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function vd(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const SO=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Sb,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Rw=he("$ZodError",SO),Zp=he("$ZodError",SO,{Parent:Error});function are(e,t=n=>n.message){const n={},r=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function cre(e,t=n=>n.message){const n={_errors:[]},r=i=>{for(const s of i.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(o=>r({issues:o}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let o=n,l=0;for(;l<s.path.length;){const d=s.path[l];l===s.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(s))):o[d]=o[d]||{_errors:[]},o=o[d],l++}}};return r(e),n}const Jp=e=>(t,n,r,i)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new cl;if(o.issues.length){const l=new(i?.Err??e)(o.issues.map(d=>oc(d,s,sc())));throw xO(l,i?.callee),l}return o.value},lre=Jp(Zp),Qp=e=>async(t,n,r,i)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new(i?.Err??e)(o.issues.map(d=>oc(d,s,sc())));throw xO(l,i?.callee),l}return o.value},ure=Qp(Zp),Yp=e=>(t,n,r)=>{const i=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new cl;return s.issues.length?{success:!1,error:new(e??Rw)(s.issues.map(o=>oc(o,i,sc())))}:{success:!0,data:s.value}},dre=Yp(Zp),Xp=e=>async(t,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(o=>oc(o,i,sc())))}:{success:!0,data:s.value}},hre=Xp(Zp),fre=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Jp(e)(t,n,i)},mre=e=>(t,n,r)=>Jp(e)(t,n,r),pre=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Qp(e)(t,n,i)},gre=e=>async(t,n,r)=>Qp(e)(t,n,r),vre=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Yp(e)(t,n,i)},yre=e=>(t,n,r)=>Yp(e)(t,n,r),bre=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Xp(e)(t,n,i)},xre=e=>async(t,n,r)=>Xp(e)(t,n,r),wre=/^[cC][^\s-]{8,}$/,kre=/^[0-9a-z]+$/,Sre=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Cre=/^[0-9a-vA-V]{20}$/,Ere=/^[A-Za-z0-9]{27}$/,Tre=/^[a-zA-Z0-9_-]{21}$/,Nre=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,jre=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,iN=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Pre=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_re="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Rre(){return new RegExp(_re,"u")}const Are=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ire=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ore=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Mre=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Dre=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,CO=/^[A-Za-z0-9_-]*$/,Lre=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Fre=/^\+(?:[0-9]){6,14}[0-9]$/,EO="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ure=new RegExp(`^${EO}$`);function TO(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Bre(e){return new RegExp(`^${TO(e)}$`)}function zre(e){const t=TO({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${EO}T(?:${r})$`)}const $re=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Vre=/^-?\d+$/,qre=/^-?\d+(?:\.\d+)?/,Hre=/^[^A-Z]*$/,Wre=/^[^a-z]*$/,Dr=he("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),NO={number:"number",bigint:"bigint",object:"date"},jO=he("$ZodCheckLessThan",(e,t)=>{Dr.init(e,t);const n=NO[typeof t.value];e._zod.onattach.push(r=>{const i=r._zod.bag,s=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),PO=he("$ZodCheckGreaterThan",(e,t)=>{Dr.init(e,t);const n=NO[typeof t.value];e._zod.onattach.push(r=>{const i=r._zod.bag,s=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Kre=he("$ZodCheckMultipleOf",(e,t)=>{Dr.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):Zne(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Gre=he("$ZodCheckNumberFormat",(e,t)=>{Dr.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[i,s]=Xne[t.format];e._zod.onattach.push(o=>{const l=o._zod.bag;l.format=t.format,l.minimum=i,l.maximum=s,n&&(l.pattern=Vre)}),e._zod.check=o=>{const l=o.value;if(n){if(!Number.isInteger(l)){o.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?o.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):o.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<i&&o.issues.push({origin:"number",input:l,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),l>s&&o.issues.push({origin:"number",input:l,code:"too_big",maximum:s,inst:e})}}),Zre=he("$ZodCheckMaxLength",(e,t)=>{var n;Dr.init(e,t),(n=e._zod.def).when??(n.when=r=>{const i=r.value;return!jw(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const i=r.value;if(i.length<=t.maximum)return;const o=_w(i);r.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Jre=he("$ZodCheckMinLength",(e,t)=>{var n;Dr.init(e,t),(n=e._zod.def).when??(n.when=r=>{const i=r.value;return!jw(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const i=r.value;if(i.length>=t.minimum)return;const o=_w(i);r.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Qre=he("$ZodCheckLengthEquals",(e,t)=>{var n;Dr.init(e,t),(n=e._zod.def).when??(n.when=r=>{const i=r.value;return!jw(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=r=>{const i=r.value,s=i.length;if(s===t.length)return;const o=_w(i),l=s>t.length;r.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),eg=he("$ZodCheckStringFormat",(e,t)=>{var n,r;Dr.init(e,t),e._zod.onattach.push(i=>{const s=i._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Yre=he("$ZodCheckRegex",(e,t)=>{eg.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Xre=he("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Hre),eg.init(e,t)}),eie=he("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Wre),eg.init(e,t)}),tie=he("$ZodCheckIncludes",(e,t)=>{Dr.init(e,t);const n=Sl(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),nie=he("$ZodCheckStartsWith",(e,t)=>{Dr.init(e,t);const n=new RegExp(`^${Sl(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),rie=he("$ZodCheckEndsWith",(e,t)=>{Dr.init(e,t);const n=new RegExp(`.*${Sl(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),iie=he("$ZodCheckOverwrite",(e,t)=>{Dr.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class sie{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(o=>o),i=Math.min(...r.map(o=>o.length-o.trimStart().length)),s=r.map(o=>o.slice(i)).map(o=>" ".repeat(this.indent*2)+o);for(const o of s)this.content.push(o)}compile(){const t=Function,n=this?.args,i=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...n,i.join(`
`))}}const oie={major:4,minor:1,patch:12},dn=he("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=oie;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const i of r)for(const s of i._zod.onattach)s(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,l,d)=>{let h=Jc(o),f;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(h)continue;const y=o.issues.length,b=p._zod.check(o);if(b instanceof Promise&&d?.async===!1)throw new cl;if(f||b instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await b,o.issues.length!==y&&(h||(h=Jc(o,y)))});else{if(o.issues.length===y)continue;h||(h=Jc(o,y))}}return f?f.then(()=>o):o},s=(o,l,d)=>{if(Jc(o))return o.aborted=!0,o;const h=i(l,r,d);if(h instanceof Promise){if(d.async===!1)throw new cl;return h.then(f=>e._zod.parse(f,d))}return e._zod.parse(h,d)};e._zod.run=(o,l)=>{if(l.skipChecks)return e._zod.parse(o,l);if(l.direction==="backward"){const h=e._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(f=>s(f,o,l)):s(h,o,l)}const d=e._zod.parse(o,l);if(d instanceof Promise){if(l.async===!1)throw new cl;return d.then(h=>i(h,r,l))}return i(d,r,l)}}e["~standard"]={validate:i=>{try{const s=dre(e,i);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return hre(e,i).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),Aw=he("$ZodString",(e,t)=>{dn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??$re(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),$t=he("$ZodStringFormat",(e,t)=>{eg.init(e,t),Aw.init(e,t)}),aie=he("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=jre),$t.init(e,t)}),cie=he("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=iN(r))}else t.pattern??(t.pattern=iN());$t.init(e,t)}),lie=he("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Pre),$t.init(e,t)}),uie=he("$ZodURL",(e,t)=>{$t.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Lre.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),die=he("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Rre()),$t.init(e,t)}),hie=he("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Tre),$t.init(e,t)}),fie=he("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=wre),$t.init(e,t)}),mie=he("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=kre),$t.init(e,t)}),pie=he("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Sre),$t.init(e,t)}),gie=he("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Cre),$t.init(e,t)}),vie=he("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Ere),$t.init(e,t)}),yie=he("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=zre(t)),$t.init(e,t)}),bie=he("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ure),$t.init(e,t)}),xie=he("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Bre(t)),$t.init(e,t)}),wie=he("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Nre),$t.init(e,t)}),kie=he("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Are),$t.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),Sie=he("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ire),$t.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Cie=he("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ore),$t.init(e,t)}),Eie=he("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Mre),$t.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,s]=r;if(!s)throw new Error;const o=Number(s);if(`${o}`!==s)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function _O(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Tie=he("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Dre),$t.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{_O(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Nie(e){if(!CO.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return _O(n)}const jie=he("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=CO),$t.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{Nie(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Pie=he("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Fre),$t.init(e,t)});function _ie(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}const Rie=he("$ZodJWT",(e,t)=>{$t.init(e,t),e._zod.check=n=>{_ie(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),RO=he("$ZodNumber",(e,t)=>{dn.init(e,t),e._zod.pattern=e._zod.bag.pattern??qre,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const s=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...s?{received:s}:{}}),n}}),Aie=he("$ZodNumber",(e,t)=>{Gre.init(e,t),RO.init(e,t)}),Iie=he("$ZodUnknown",(e,t)=>{dn.init(e,t),e._zod.parse=n=>n}),Oie=he("$ZodNever",(e,t)=>{dn.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function sN(e,t,n){e.issues.length&&t.issues.push(...kO(n,e.issues)),t.value[n]=e.value}const Mie=he("$ZodArray",(e,t)=>{dn.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const s=[];for(let o=0;o<i.length;o++){const l=i[o],d=t.element._zod.run({value:l,issues:[]},r);d instanceof Promise?s.push(d.then(h=>sN(h,n,o))):sN(d,n,o)}return s.length?Promise.all(s).then(()=>n):n}});function qm(e,t,n,r){e.issues.length&&t.issues.push(...kO(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function AO(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=Yne(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function IO(e,t,n,r,i,s){const o=[],l=i.keySet,d=i.catchall._zod,h=d.def.type;for(const f of Object.keys(t)){if(l.has(f))continue;if(h==="never"){o.push(f);continue}const p=d.run({value:t[f],issues:[]},r);p instanceof Promise?e.push(p.then(y=>qm(y,n,f,t))):qm(p,n,f,t)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const Die=he("$ZodObject",(e,t)=>{if(dn.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const l=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...l};return Object.defineProperty(t,"shape",{value:d}),d}})}const r=Nw(()=>AO(t));It(e._zod,"propValues",()=>{const l=t.shape,d={};for(const h in l){const f=l[h]._zod;if(f.values){d[h]??(d[h]=new Set);for(const p of f.values)d[h].add(p)}}return d});const i=Vm,s=t.catchall;let o;e._zod.parse=(l,d)=>{o??(o=r.value);const h=l.value;if(!i(h))return l.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),l;l.value={};const f=[],p=o.shape;for(const y of o.keys){const k=p[y]._zod.run({value:h[y],issues:[]},d);k instanceof Promise?f.push(k.then(x=>qm(x,l,y,h))):qm(k,l,y,h)}return s?IO(f,h,l,d,r.value,e):f.length?Promise.all(f).then(()=>l):l}}),Lie=he("$ZodObjectJIT",(e,t)=>{Die.init(e,t);const n=e._zod.parse,r=Nw(()=>AO(t)),i=y=>{const b=new sie(["shape","payload","ctx"]),k=r.value,x=P=>{const j=rN(P);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};b.write("const input = payload.value;");const S=Object.create(null);let E=0;for(const P of k.keys)S[P]=`key_${E++}`;b.write("const newResult = {};");for(const P of k.keys){const j=S[P],N=rN(P);b.write(`const ${j} = ${x(P)};`),b.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        
        if (${j}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${j}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const T=b.compile();return(P,j)=>T(y,P,j)};let s;const o=Vm,l=!bO.jitless,h=l&&Jne.value,f=t.catchall;let p;e._zod.parse=(y,b)=>{p??(p=r.value);const k=y.value;return o(k)?l&&h&&b?.async===!1&&b.jitless!==!0?(s||(s=i(t.shape)),y=s(y,b),f?IO([],k,y,b,p,e):y):n(y,b):(y.issues.push({expected:"object",code:"invalid_type",input:k,inst:e}),y)}});function oN(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const i=e.filter(s=>!Jc(s));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(o=>oc(o,r,sc())))}),t)}const Fie=he("$ZodUnion",(e,t)=>{dn.init(e,t),It(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),It(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),It(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),It(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){const i=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${i.map(s=>Pw(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(i,s)=>{if(n)return r(i,s);let o=!1;const l=[];for(const d of t.options){const h=d._zod.run({value:i.value,issues:[]},s);if(h instanceof Promise)l.push(h),o=!0;else{if(h.issues.length===0)return h;l.push(h)}}return o?Promise.all(l).then(d=>oN(d,i,e,s)):oN(l,i,e,s)}}),Uie=he("$ZodIntersection",(e,t)=>{dn.init(e,t),e._zod.parse=(n,r)=>{const i=n.value,s=t.left._zod.run({value:i,issues:[]},r),o=t.right._zod.run({value:i,issues:[]},r);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([d,h])=>aN(n,d,h)):aN(n,s,o)}});function Cb(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(gd(e)&&gd(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),i={...e,...t};for(const s of r){const o=Cb(e[s],t[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};i[s]=o.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const i=e[r],s=t[r],o=Cb(i,s);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function aN(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Jc(e))return e;const r=Cb(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const Bie=he("$ZodEnum",(e,t)=>{dn.init(e,t);const n=Gne(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(i=>Qne.has(typeof i)).map(i=>typeof i=="string"?Sl(i):i.toString()).join("|")})$`),e._zod.parse=(i,s)=>{const o=i.value;return r.has(o)||i.issues.push({code:"invalid_value",values:n,input:o,inst:e}),i}}),zie=he("$ZodLiteral",(e,t)=>{if(dn.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Sl(n):n?Sl(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),n}}),$ie=he("$ZodTransform",(e,t)=>{dn.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new yO(e.constructor.name);const i=t.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(o=>(n.value=o,n));if(i instanceof Promise)throw new cl;return n.value=i,n}});function cN(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Vie=he("$ZodOptional",(e,t)=>{dn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",It(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),It(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Pw(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>cN(s,n.value)):cN(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),qie=he("$ZodNullable",(e,t)=>{dn.init(e,t),It(e._zod,"optin",()=>t.innerType._zod.optin),It(e._zod,"optout",()=>t.innerType._zod.optout),It(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Pw(n.source)}|null)$`):void 0}),It(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Hie=he("$ZodDefault",(e,t)=>{dn.init(e,t),e._zod.optin="optional",It(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>lN(s,t)):lN(i,t)}});function lN(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Wie=he("$ZodPrefault",(e,t)=>{dn.init(e,t),e._zod.optin="optional",It(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),Kie=he("$ZodNonOptional",(e,t)=>{dn.init(e,t),It(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>uN(s,e)):uN(i,e)}});function uN(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Gie=he("$ZodCatch",(e,t)=>{dn.init(e,t),It(e._zod,"optin",()=>t.innerType._zod.optin),It(e._zod,"optout",()=>t.innerType._zod.optout),It(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(o=>oc(o,r,sc()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(s=>oc(s,r,sc()))},input:n.value}),n.issues=[]),n)}}),Zie=he("$ZodPipe",(e,t)=>{dn.init(e,t),It(e._zod,"values",()=>t.in._zod.values),It(e._zod,"optin",()=>t.in._zod.optin),It(e._zod,"optout",()=>t.out._zod.optout),It(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=t.out._zod.run(n,r);return s instanceof Promise?s.then(o=>bf(o,t.in,r)):bf(s,t.in,r)}const i=t.in._zod.run(n,r);return i instanceof Promise?i.then(s=>bf(s,t.out,r)):bf(i,t.out,r)}});function bf(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Jie=he("$ZodReadonly",(e,t)=>{dn.init(e,t),It(e._zod,"propValues",()=>t.innerType._zod.propValues),It(e._zod,"values",()=>t.innerType._zod.values),It(e._zod,"optin",()=>t.innerType._zod.optin),It(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(dN):dN(i)}});function dN(e){return e.value=Object.freeze(e.value),e}const Qie=he("$ZodCustom",(e,t)=>{Dr.init(e,t),dn.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(s=>hN(s,n,r,e));hN(i,n,r,e)}});function hN(e,t,n,r){if(!e){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),t.issues.push(vd(i))}}class Yie{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Xie(){return new Yie}const xf=Xie();function ese(e,t){return new e({type:"string",...He(t)})}function tse(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...He(t)})}function fN(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...He(t)})}function nse(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...He(t)})}function rse(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...He(t)})}function ise(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...He(t)})}function sse(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...He(t)})}function ose(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...He(t)})}function ase(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...He(t)})}function cse(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...He(t)})}function lse(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...He(t)})}function use(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...He(t)})}function dse(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...He(t)})}function hse(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...He(t)})}function fse(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...He(t)})}function mse(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...He(t)})}function pse(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...He(t)})}function gse(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...He(t)})}function vse(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...He(t)})}function yse(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...He(t)})}function bse(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...He(t)})}function xse(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...He(t)})}function wse(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...He(t)})}function kse(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...He(t)})}function Sse(e,t){return new e({type:"string",format:"date",check:"string_format",...He(t)})}function Cse(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...He(t)})}function Ese(e,t){return new e({type:"string",format:"duration",check:"string_format",...He(t)})}function Tse(e,t){return new e({type:"number",checks:[],...He(t)})}function Nse(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...He(t)})}function jse(e){return new e({type:"unknown"})}function Pse(e,t){return new e({type:"never",...He(t)})}function mN(e,t){return new jO({check:"less_than",...He(t),value:e,inclusive:!1})}function Vy(e,t){return new jO({check:"less_than",...He(t),value:e,inclusive:!0})}function pN(e,t){return new PO({check:"greater_than",...He(t),value:e,inclusive:!1})}function qy(e,t){return new PO({check:"greater_than",...He(t),value:e,inclusive:!0})}function gN(e,t){return new Kre({check:"multiple_of",...He(t),value:e})}function OO(e,t){return new Zre({check:"max_length",...He(t),maximum:e})}function Hm(e,t){return new Jre({check:"min_length",...He(t),minimum:e})}function MO(e,t){return new Qre({check:"length_equals",...He(t),length:e})}function _se(e,t){return new Yre({check:"string_format",format:"regex",...He(t),pattern:e})}function Rse(e){return new Xre({check:"string_format",format:"lowercase",...He(e)})}function Ase(e){return new eie({check:"string_format",format:"uppercase",...He(e)})}function Ise(e,t){return new tie({check:"string_format",format:"includes",...He(t),includes:e})}function Ose(e,t){return new nie({check:"string_format",format:"starts_with",...He(t),prefix:e})}function Mse(e,t){return new rie({check:"string_format",format:"ends_with",...He(t),suffix:e})}function zd(e){return new iie({check:"overwrite",tx:e})}function Dse(e){return zd(t=>t.normalize(e))}function Lse(){return zd(e=>e.trim())}function Fse(){return zd(e=>e.toLowerCase())}function Use(){return zd(e=>e.toUpperCase())}function Bse(e,t,n){return new e({type:"array",element:t,...He(n)})}function zse(e,t,n){return new e({type:"custom",check:"custom",fn:t,...He(n)})}function $se(e){const t=Vse(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(vd(r,n.value,t._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(vd(i))}},e(n.value,n)));return t}function Vse(e,t){const n=new Dr({check:"custom",...He(t)});return n._zod.check=e,n}function vN(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function qse(e,t){for(var n={};e.length;){var r=e[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return e.push(p)})}),t){var d=n[o].types,h=d&&d[r.code];n[o]=Cw(o,t,n,i,h?[].concat(h,r.message):r.message)}e.shift()}return n}function Hse(e,t){for(var n={};e.length;){var r=e[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if(r.code==="invalid_union"&&r.errors.length>0){var l=r.errors[0][0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if(r.code==="invalid_union"&&r.errors.forEach(function(f){return f.forEach(function(p){return e.push(p)})}),t){var d=n[o].types,h=d&&d[r.code];n[o]=Cw(o,t,n,i,h?[].concat(h,r.message):r.message)}e.shift()}return n}function Wse(e,t,n){if(n===void 0&&(n={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(e))return function(r,i,s){try{return Promise.resolve(vN(function(){return Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(o){return s.shouldUseNativeValidation&&kb({},s),{errors:{},values:n.raw?Object.assign({},r):o}})},function(o){if((function(l){return Array.isArray(l?.issues)})(o))return{values:{},errors:eN(qse(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(e))return function(r,i,s){try{return Promise.resolve(vN(function(){return Promise.resolve((n.mode==="sync"?lre:ure)(e,r,t)).then(function(o){return s.shouldUseNativeValidation&&kb({},s),{errors:{},values:n.raw?Object.assign({},r):o}})},function(o){if((function(l){return l instanceof Rw})(o))return{values:{},errors:eN(Hse(o.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const Kse=he("ZodISODateTime",(e,t)=>{yie.init(e,t),Wt.init(e,t)});function Gse(e){return kse(Kse,e)}const Zse=he("ZodISODate",(e,t)=>{bie.init(e,t),Wt.init(e,t)});function Jse(e){return Sse(Zse,e)}const Qse=he("ZodISOTime",(e,t)=>{xie.init(e,t),Wt.init(e,t)});function Yse(e){return Cse(Qse,e)}const Xse=he("ZodISODuration",(e,t)=>{wie.init(e,t),Wt.init(e,t)});function eoe(e){return Ese(Xse,e)}const toe=(e,t)=>{Rw.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>cre(e,n)},flatten:{value:n=>are(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Sb,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Sb,2)}},isEmpty:{get(){return e.issues.length===0}}})},vi=he("ZodError",toe,{Parent:Error}),noe=Jp(vi),roe=Qp(vi),ioe=Yp(vi),soe=Xp(vi),ooe=fre(vi),aoe=mre(vi),coe=pre(vi),loe=gre(vi),uoe=vre(vi),doe=yre(vi),hoe=bre(vi),foe=xre(vi),xn=he("ZodType",(e,t)=>(dn.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(fc(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(n,r)=>pa(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>noe(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>ioe(e,n,r),e.parseAsync=async(n,r)=>roe(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>soe(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>ooe(e,n,r),e.decode=(n,r)=>aoe(e,n,r),e.encodeAsync=async(n,r)=>coe(e,n,r),e.decodeAsync=async(n,r)=>loe(e,n,r),e.safeEncode=(n,r)=>uoe(e,n,r),e.safeDecode=(n,r)=>doe(e,n,r),e.safeEncodeAsync=async(n,r)=>hoe(e,n,r),e.safeDecodeAsync=async(n,r)=>foe(e,n,r),e.refine=(n,r)=>e.check(nae(n,r)),e.superRefine=n=>e.check(rae(n)),e.overwrite=n=>e.check(zd(n)),e.optional=()=>kN(e),e.nullable=()=>SN(e),e.nullish=()=>kN(SN(e)),e.nonoptional=n=>Joe(e,n),e.array=()=>$d(e),e.or=n=>Uoe([e,n]),e.and=n=>zoe(e,n),e.transform=n=>CN(e,qoe(n)),e.default=n=>Koe(e,n),e.prefault=n=>Zoe(e,n),e.catch=n=>Yoe(e,n),e.pipe=n=>CN(e,n),e.readonly=()=>tae(e),e.describe=n=>{const r=e.clone();return xf.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return xf.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return xf.get(e);const r=e.clone();return xf.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),DO=he("_ZodString",(e,t)=>{Aw.init(e,t),xn.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(_se(...r)),e.includes=(...r)=>e.check(Ise(...r)),e.startsWith=(...r)=>e.check(Ose(...r)),e.endsWith=(...r)=>e.check(Mse(...r)),e.min=(...r)=>e.check(Hm(...r)),e.max=(...r)=>e.check(OO(...r)),e.length=(...r)=>e.check(MO(...r)),e.nonempty=(...r)=>e.check(Hm(1,...r)),e.lowercase=r=>e.check(Rse(r)),e.uppercase=r=>e.check(Ase(r)),e.trim=()=>e.check(Lse()),e.normalize=(...r)=>e.check(Dse(...r)),e.toLowerCase=()=>e.check(Fse()),e.toUpperCase=()=>e.check(Use())}),moe=he("ZodString",(e,t)=>{Aw.init(e,t),DO.init(e,t),e.email=n=>e.check(tse(poe,n)),e.url=n=>e.check(ose(goe,n)),e.jwt=n=>e.check(wse(Roe,n)),e.emoji=n=>e.check(ase(voe,n)),e.guid=n=>e.check(fN(yN,n)),e.uuid=n=>e.check(nse(wf,n)),e.uuidv4=n=>e.check(rse(wf,n)),e.uuidv6=n=>e.check(ise(wf,n)),e.uuidv7=n=>e.check(sse(wf,n)),e.nanoid=n=>e.check(cse(yoe,n)),e.guid=n=>e.check(fN(yN,n)),e.cuid=n=>e.check(lse(boe,n)),e.cuid2=n=>e.check(use(xoe,n)),e.ulid=n=>e.check(dse(woe,n)),e.base64=n=>e.check(yse(joe,n)),e.base64url=n=>e.check(bse(Poe,n)),e.xid=n=>e.check(hse(koe,n)),e.ksuid=n=>e.check(fse(Soe,n)),e.ipv4=n=>e.check(mse(Coe,n)),e.ipv6=n=>e.check(pse(Eoe,n)),e.cidrv4=n=>e.check(gse(Toe,n)),e.cidrv6=n=>e.check(vse(Noe,n)),e.e164=n=>e.check(xse(_oe,n)),e.datetime=n=>e.check(Gse(n)),e.date=n=>e.check(Jse(n)),e.time=n=>e.check(Yse(n)),e.duration=n=>e.check(eoe(n))});function st(e){return ese(moe,e)}const Wt=he("ZodStringFormat",(e,t)=>{$t.init(e,t),DO.init(e,t)}),poe=he("ZodEmail",(e,t)=>{lie.init(e,t),Wt.init(e,t)}),yN=he("ZodGUID",(e,t)=>{aie.init(e,t),Wt.init(e,t)}),wf=he("ZodUUID",(e,t)=>{cie.init(e,t),Wt.init(e,t)}),goe=he("ZodURL",(e,t)=>{uie.init(e,t),Wt.init(e,t)}),voe=he("ZodEmoji",(e,t)=>{die.init(e,t),Wt.init(e,t)}),yoe=he("ZodNanoID",(e,t)=>{hie.init(e,t),Wt.init(e,t)}),boe=he("ZodCUID",(e,t)=>{fie.init(e,t),Wt.init(e,t)}),xoe=he("ZodCUID2",(e,t)=>{mie.init(e,t),Wt.init(e,t)}),woe=he("ZodULID",(e,t)=>{pie.init(e,t),Wt.init(e,t)}),koe=he("ZodXID",(e,t)=>{gie.init(e,t),Wt.init(e,t)}),Soe=he("ZodKSUID",(e,t)=>{vie.init(e,t),Wt.init(e,t)}),Coe=he("ZodIPv4",(e,t)=>{kie.init(e,t),Wt.init(e,t)}),Eoe=he("ZodIPv6",(e,t)=>{Sie.init(e,t),Wt.init(e,t)}),Toe=he("ZodCIDRv4",(e,t)=>{Cie.init(e,t),Wt.init(e,t)}),Noe=he("ZodCIDRv6",(e,t)=>{Eie.init(e,t),Wt.init(e,t)}),joe=he("ZodBase64",(e,t)=>{Tie.init(e,t),Wt.init(e,t)}),Poe=he("ZodBase64URL",(e,t)=>{jie.init(e,t),Wt.init(e,t)}),_oe=he("ZodE164",(e,t)=>{Pie.init(e,t),Wt.init(e,t)}),Roe=he("ZodJWT",(e,t)=>{Rie.init(e,t),Wt.init(e,t)}),LO=he("ZodNumber",(e,t)=>{RO.init(e,t),xn.init(e,t),e.gt=(r,i)=>e.check(pN(r,i)),e.gte=(r,i)=>e.check(qy(r,i)),e.min=(r,i)=>e.check(qy(r,i)),e.lt=(r,i)=>e.check(mN(r,i)),e.lte=(r,i)=>e.check(Vy(r,i)),e.max=(r,i)=>e.check(Vy(r,i)),e.int=r=>e.check(bN(r)),e.safe=r=>e.check(bN(r)),e.positive=r=>e.check(pN(0,r)),e.nonnegative=r=>e.check(qy(0,r)),e.negative=r=>e.check(mN(0,r)),e.nonpositive=r=>e.check(Vy(0,r)),e.multipleOf=(r,i)=>e.check(gN(r,i)),e.step=(r,i)=>e.check(gN(r,i)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function La(e){return Tse(LO,e)}const Aoe=he("ZodNumberFormat",(e,t)=>{Aie.init(e,t),LO.init(e,t)});function bN(e){return Nse(Aoe,e)}const Ioe=he("ZodUnknown",(e,t)=>{Iie.init(e,t),xn.init(e,t)});function xN(){return jse(Ioe)}const Ooe=he("ZodNever",(e,t)=>{Oie.init(e,t),xn.init(e,t)});function Moe(e){return Pse(Ooe,e)}const Doe=he("ZodArray",(e,t)=>{Mie.init(e,t),xn.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(Hm(n,r)),e.nonempty=n=>e.check(Hm(1,n)),e.max=(n,r)=>e.check(OO(n,r)),e.length=(n,r)=>e.check(MO(n,r)),e.unwrap=()=>e.element});function $d(e,t){return Bse(Doe,e,t)}const Loe=he("ZodObject",(e,t)=>{Lie.init(e,t),xn.init(e,t),It(e,"shape",()=>t.shape),e.keyof=()=>Vd(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:xN()}),e.loose=()=>e.clone({...e._zod.def,catchall:xN()}),e.strict=()=>e.clone({...e._zod.def,catchall:Moe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>nre(e,n),e.safeExtend=n=>rre(e,n),e.merge=n=>ire(e,n),e.pick=n=>ere(e,n),e.omit=n=>tre(e,n),e.partial=(...n)=>sre(FO,e,n[0]),e.required=(...n)=>ore(UO,e,n[0])});function vr(e,t){const n={type:"object",shape:e??{},...He(t)};return new Loe(n)}const Foe=he("ZodUnion",(e,t)=>{Fie.init(e,t),xn.init(e,t),e.options=t.options});function Uoe(e,t){return new Foe({type:"union",options:e,...He(t)})}const Boe=he("ZodIntersection",(e,t)=>{Uie.init(e,t),xn.init(e,t)});function zoe(e,t){return new Boe({type:"intersection",left:e,right:t})}const Eb=he("ZodEnum",(e,t)=>{Bie.init(e,t),xn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,i)=>{const s={};for(const o of r)if(n.has(o))s[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Eb({...t,checks:[],...He(i),entries:s})},e.exclude=(r,i)=>{const s={...t.entries};for(const o of r)if(n.has(o))delete s[o];else throw new Error(`Key ${o} not found in enum`);return new Eb({...t,checks:[],...He(i),entries:s})}});function Vd(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Eb({type:"enum",entries:n,...He(t)})}const $oe=he("ZodLiteral",(e,t)=>{zie.init(e,t),xn.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function wN(e,t){return new $oe({type:"literal",values:Array.isArray(e)?e:[e],...He(t)})}const Voe=he("ZodTransform",(e,t)=>{$ie.init(e,t),xn.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new yO(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(vd(s,n.value,t));else{const o=s;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),n.issues.push(vd(o))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(s=>(n.value=s,n)):(n.value=i,n)}});function qoe(e){return new Voe({type:"transform",transform:e})}const FO=he("ZodOptional",(e,t)=>{Vie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function kN(e){return new FO({type:"optional",innerType:e})}const Hoe=he("ZodNullable",(e,t)=>{qie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function SN(e){return new Hoe({type:"nullable",innerType:e})}const Woe=he("ZodDefault",(e,t)=>{Hie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Koe(e,t){return new Woe({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():wO(t)}})}const Goe=he("ZodPrefault",(e,t)=>{Wie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zoe(e,t){return new Goe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():wO(t)}})}const UO=he("ZodNonOptional",(e,t)=>{Kie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Joe(e,t){return new UO({type:"nonoptional",innerType:e,...He(t)})}const Qoe=he("ZodCatch",(e,t)=>{Gie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Yoe(e,t){return new Qoe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Xoe=he("ZodPipe",(e,t)=>{Zie.init(e,t),xn.init(e,t),e.in=t.in,e.out=t.out});function CN(e,t){return new Xoe({type:"pipe",in:e,out:t})}const eae=he("ZodReadonly",(e,t)=>{Jie.init(e,t),xn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tae(e){return new eae({type:"readonly",innerType:e})}const BO=he("ZodCustom",(e,t)=>{Qie.init(e,t),xn.init(e,t)});function nae(e,t={}){return zse(BO,e,t)}function rae(e){return $se(e)}function zO(e,t={error:`Input not instance of ${e.name}`}){const n=new BO({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...He(t)});return n._zod.bag.Class=e,n}vr({email:st().min(1,"El email es requerido").email("Email inválido"),password:st().min(8,"La contraseña debe tener al menos 8 caracteres")});vr({Email:st().min(1,"El email es requerido").email("Email inválido"),Password:st().min(8,"La contraseña debe tener al menos 8 caracteres").regex(/[A-Z]/,"Debe contener al menos una mayúscula").regex(/[a-z]/,"Debe contener al menos una minúscula").regex(/[0-9]/,"Debe contener al menos un número"),PasswordConfirm:st(),FirstName:st().min(2,"El nombre debe tener al menos 2 caracteres").max(50,"El nombre no puede exceder 50 caracteres"),LastName1:st().min(2,"El apellido debe tener al menos 2 caracteres").max(50,"El apellido no puede exceder 50 caracteres"),LastName2:st().max(50,"El apellido no puede exceder 50 caracteres").optional(),Phone:st().regex(/^\+?[1-9]\d{1,14}$/,"Número de teléfono inválido").optional().or(wN("")),DateOfBirth:st().regex(/^\d{4}-\d{2}-\d{2}$/,"Formato de fecha inválido (YYYY-MM-DD)").optional().or(wN("")),Role:Vd(["ADMIN","DOCTOR","PATIENT"]).optional()}).refine(e=>e.Password===e.PasswordConfirm,{message:"Las contraseñas no coinciden",path:["PasswordConfirm"]});vr({Email:st().min(1,"El email es requerido").email("Email inválido")});vr({token:st().min(1,"Token requerido"),newPassword:st().min(8,"La contraseña debe tener al menos 8 caracteres").regex(/[A-Z]/,"Debe contener al menos una mayúscula").regex(/[a-z]/,"Debe contener al menos una minúscula").regex(/[0-9]/,"Debe contener al menos un número"),confirmPassword:st()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]});vr({PatientUserId:La().int().positive("ID de paciente debe ser positivo").or(st().min(1,"ID de paciente requerido")),AppointmentId:La().int().positive().optional().or(st().optional()),Diagnosis:st().min(10,"El diagnóstico debe tener al menos 10 caracteres").max(5e3,"El diagnóstico no puede exceder 5000 caracteres").optional(),Prescriptions:st().max(5e3,"Las prescripciones no pueden exceder 5000 caracteres").optional(),Recommendations:st().max(5e3,"Las recomendaciones no pueden exceder 5000 caracteres").optional(),Files:$d(st().url("URL de archivo inválida")).optional()});vr({Diagnosis:st().min(10,"El diagnóstico debe tener al menos 10 caracteres").max(5e3,"El diagnóstico no puede exceder 5000 caracteres").optional(),Prescriptions:st().max(5e3,"Las prescripciones no pueden exceder 5000 caracteres").optional(),Recommendations:st().max(5e3,"Las recomendaciones no pueden exceder 5000 caracteres").optional(),Files:$d(st().url()).optional()});vr({CertificationDocuments:$d(st().url("URL de documento inválida")).min(1,"Debe subir al menos 1 documento").max(10,"Máximo 10 documentos permitidos"),Notes:st().max(1e3,"Las notas no pueden exceder 1000 caracteres").optional()});const iae=vr({Action:Vd(["approve","reject"],{errorMap:()=>({message:"Acción debe ser 'approve' o 'reject'"})}),AdminNotes:st().max(1e3,"Las notas del admin no pueden exceder 1000 caracteres").optional(),RejectionReason:st().optional()}).refine(e=>e.Action==="reject"?e.RejectionReason&&e.RejectionReason.length>=10:!0,{message:"La razón de rechazo debe tener al menos 10 caracteres",path:["RejectionReason"]});vr({patientUserId:La().int().positive().or(st().min(1)),doctorUserId:La().int().positive().or(st().min(1)),scheduledAt:st().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/,"Fecha inválida (ISO 8601)"),durationMin:La().int().min(15,"La duración mínima es 15 minutos").max(240,"La duración máxima es 240 minutos"),modality:Vd(["VIDEO","IN_PERSON","PHONE"],{errorMap:()=>({message:"Modalidad inválida"})}),reason:st().max(500).optional(),notes:st().max(1e3).optional(),slotId:La().int().optional().or(st().optional())});vr({status:Vd(["PENDING","CONFIRMED","COMPLETED","CANCELLED"],{errorMap:()=>({message:"Estado inválido"})})});vr({content:st().min(10,"La nota debe tener al menos 10 caracteres").max(2e3,"La nota no puede exceder 2000 caracteres")});vr({PlanId:La().int().positive().or(st().min(1,"ID de plan requerido")),PaymentMethodId:st().optional()});vr({conversationId:st().min(1,"ID de conversación requerido"),content:st().min(1,"El mensaje no puede estar vacío").max(5e3,"El mensaje no puede exceder 5000 caracteres"),language:st().optional()});vr({file:zO(File,{message:"Archivo inválido"}).refine(e=>e.size<=10*1024*1024,{message:"El archivo no puede exceder 10MB"}).refine(e=>["image/jpeg","image/png","image/jpg","application/pdf"].includes(e.type),{message:"Tipo de archivo no permitido. Solo JPG, PNG y PDF"})});vr({files:$d(zO(File)).min(1,"Debe seleccionar al menos 1 archivo").max(10,"Máximo 10 archivos permitidos").refine(e=>e.every(t=>t.size<=10*1024*1024),{message:"Cada archivo no puede exceder 10MB"}).refine(e=>{const t=["image/jpeg","image/png","image/jpg","application/pdf"];return e.every(n=>t.includes(n.type))},{message:"Tipo de archivo no permitido. Solo JPG, PNG y PDF"})});var tg="Dialog",[$O,Lce]=Ji(tg),[sae,Xi]=$O(tg),VO=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=g.useRef(null),d=g.useRef(null),[h,f]=Za({prop:r,defaultProp:i??!1,onChange:s,caller:tg});return c.jsx(sae,{scope:t,triggerRef:l,contentRef:d,contentId:no(),titleId:no(),descriptionId:no(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),modal:o,children:n})};VO.displayName=tg;var qO="DialogTrigger",HO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Xi(qO,n),s=bt(t,i.triggerRef);return c.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Mw(i.open),...r,ref:s,onClick:Je(e.onClick,i.onOpenToggle)})});HO.displayName=qO;var Iw="DialogPortal",[oae,WO]=$O(Iw,{forceMount:void 0}),KO=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=Xi(Iw,t);return c.jsx(oae,{scope:t,forceMount:n,children:g.Children.map(r,o=>c.jsx(pi,{present:n||s.open,children:c.jsx(up,{asChild:!0,container:i,children:o})}))})};KO.displayName=Iw;var Wm="DialogOverlay",GO=g.forwardRef((e,t)=>{const n=WO(Wm,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Xi(Wm,e.__scopeDialog);return s.modal?c.jsx(pi,{present:r||s.open,children:c.jsx(cae,{...i,ref:t})}):null});GO.displayName=Wm;var aae=Wa("DialogOverlay.RemoveScroll"),cae=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Xi(Wm,n);return c.jsx(hp,{as:aae,allowPinchZoom:!0,shards:[i.contentRef],children:c.jsx(Qe.div,{"data-state":Mw(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ac="DialogContent",ZO=g.forwardRef((e,t)=>{const n=WO(ac,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Xi(ac,e.__scopeDialog);return c.jsx(pi,{present:r||s.open,children:s.modal?c.jsx(lae,{...i,ref:t}):c.jsx(uae,{...i,ref:t})})});ZO.displayName=ac;var lae=g.forwardRef((e,t)=>{const n=Xi(ac,e.__scopeDialog),r=g.useRef(null),i=bt(t,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return ix(s)},[]),c.jsx(JO,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(e.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Je(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Je(e.onFocusOutside,s=>s.preventDefault())})}),uae=g.forwardRef((e,t)=>{const n=Xi(ac,e.__scopeDialog),r=g.useRef(!1),i=g.useRef(!1);return c.jsx(JO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),JO=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=e,l=Xi(ac,n),d=g.useRef(null),h=bt(t,d);return Gb(),c.jsxs(c.Fragment,{children:[c.jsx(ip,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:c.jsx(rp,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Mw(l.open),...o,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(dae,{titleId:l.titleId}),c.jsx(fae,{contentRef:d,descriptionId:l.descriptionId})]})]})}),Ow="DialogTitle",QO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Xi(Ow,n);return c.jsx(Qe.h2,{id:i.titleId,...r,ref:t})});QO.displayName=Ow;var YO="DialogDescription",XO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Xi(YO,n);return c.jsx(Qe.p,{id:i.descriptionId,...r,ref:t})});XO.displayName=YO;var e5="DialogClose",t5=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Xi(e5,n);return c.jsx(Qe.button,{type:"button",...r,ref:t,onClick:Je(e.onClick,()=>i.onOpenChange(!1))})});t5.displayName=e5;function Mw(e){return e?"open":"closed"}var n5="DialogTitleWarning",[Fce,r5]=TB(n5,{contentName:ac,titleName:Ow,docsSlug:"dialog"}),dae=({titleId:e})=>{const t=r5(n5),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hae="DialogDescriptionWarning",fae=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r5(hae).contentName}}.`;return g.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},mae=VO,pae=HO,gae=KO,vae=GO,yae=ZO,bae=QO,xae=XO,wae=t5;function EN({...e}){return c.jsx(mae,{"data-slot":"dialog",...e})}function kae({...e}){return c.jsx(pae,{"data-slot":"dialog-trigger",...e})}function Sae({...e}){return c.jsx(gae,{"data-slot":"dialog-portal",...e})}function Cae({className:e,...t}){return c.jsx(vae,{"data-slot":"dialog-overlay",className:ut("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Eae({className:e,children:t,...n}){return c.jsxs(Sae,{"data-slot":"dialog-portal",children:[c.jsx(Cae,{}),c.jsxs(yae,{"data-slot":"dialog-content",className:ut("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,c.jsxs(wae,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(Ka,{}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Tae({className:e,...t}){return c.jsx("div",{"data-slot":"dialog-header",className:ut("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Nae({className:e,...t}){return c.jsx("div",{"data-slot":"dialog-footer",className:ut("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function jae({className:e,...t}){return c.jsx(bae,{"data-slot":"dialog-title",className:ut("text-lg leading-none font-semibold",e),...t})}function Pae({className:e,...t}){return c.jsx(xae,{"data-slot":"dialog-description",className:ut("text-muted-foreground text-sm",e),...t})}var Dw="Radio",[_ae,i5]=Ji(Dw),[Rae,Aae]=_ae(Dw),s5=g.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:l="on",onCheck:d,form:h,...f}=e,[p,y]=g.useState(null),b=bt(t,S=>y(S)),k=g.useRef(!1),x=p?h||!!p.closest("form"):!0;return c.jsxs(Rae,{scope:n,checked:i,disabled:o,children:[c.jsx(Qe.button,{type:"button",role:"radio","aria-checked":i,"data-state":l5(i),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:b,onClick:Je(e.onClick,S=>{i||d?.(),x&&(k.current=S.isPropagationStopped(),k.current||S.stopPropagation())})}),x&&c.jsx(c5,{control:p,bubbles:!k.current,name:r,value:l,checked:i,required:s,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});s5.displayName=Dw;var o5="RadioIndicator",a5=g.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,s=Aae(o5,n);return c.jsx(pi,{present:r||s.checked,children:c.jsx(Qe.span,{"data-state":l5(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t})})});a5.displayName=o5;var Iae="RadioBubbleInput",c5=g.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...i},s)=>{const o=g.useRef(null),l=bt(o,s),d=Ij(n),h=xj(t);return g.useEffect(()=>{const f=o.current;if(!f)return;const p=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==n&&b){const k=new Event("click",{bubbles:r});b.call(f,n),f.dispatchEvent(k)}},[d,n,r]),c.jsx(Qe.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});c5.displayName=Iae;function l5(e){return e?"checked":"unchecked"}var Oae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ng="RadioGroup",[Mae,Uce]=Ji(ng,[gp,i5]),u5=gp(),d5=i5(),[Dae,Lae]=Mae(ng),h5=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:l=!1,orientation:d,dir:h,loop:f=!0,onValueChange:p,...y}=e,b=u5(n),k=Ed(h),[x,S]=Za({prop:s,defaultProp:i??null,onChange:p,caller:ng});return c.jsx(Dae,{scope:n,name:r,required:o,disabled:l,value:x,onValueChange:S,children:c.jsx(xP,{asChild:!0,...b,orientation:d,dir:k,loop:f,children:c.jsx(Qe.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:k,...y,ref:t})})})});h5.displayName=ng;var f5="RadioGroupItem",m5=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,s=Lae(f5,n),o=s.disabled||r,l=u5(n),d=d5(n),h=g.useRef(null),f=bt(t,h),p=s.value===i.value,y=g.useRef(!1);return g.useEffect(()=>{const b=x=>{Oae.includes(x.key)&&(y.current=!0)},k=()=>y.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",k),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",k)}},[]),c.jsx(wP,{asChild:!0,...l,focusable:!o,active:p,children:c.jsx(s5,{disabled:o,required:s.required,checked:p,...d,...i,name:s.name,ref:f,onCheck:()=>s.onValueChange(i.value),onKeyDown:Je(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:Je(i.onFocus,()=>{y.current&&h.current?.click()})})})});m5.displayName=f5;var Fae="RadioGroupIndicator",p5=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=d5(n);return c.jsx(a5,{...i,...r,ref:t})});p5.displayName=Fae;var Uae=h5,Bae=m5,zae=p5;function $ae({className:e,...t}){return c.jsx(Uae,{"data-slot":"radio-group",className:ut("grid gap-3",e),...t})}function TN({className:e,...t}){return c.jsx(Bae,{"data-slot":"radio-group-item",className:ut("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:c.jsx(zae,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:c.jsx(X6,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Vae(){const[e,t]=g.useState(null),[n,r]=g.useState(!1),{data:i,isLoading:s}=qH(),{data:o,isLoading:l}=HH(),{data:d,isLoading:h}=WH(),{mutate:f,isPending:p}=GH(),{register:y,handleSubmit:b,watch:k,reset:x,formState:{errors:S}}=Wne({resolver:Wse(iae),defaultValues:{Action:"approve"}}),E=k("Action"),T=N=>{e&&f({doctorId:e.DoctorUserId.toString(),payload:{Action:N.Action,AdminNotes:N.AdminNotes,RejectionReason:N.RejectionReason}},{onSuccess:()=>{Tt.success(N.Action==="approve"?"Verificación aprobada exitosamente":"Verificación rechazada"),r(!1),t(null),x()},onError:R=>{Tt.error(R.message||"Error al procesar la verificación")}})},P=N=>{t(N),r(!0),x()},j=N=>c.jsxs(le,{className:"hover:shadow-md transition-shadow",children:[c.jsx(Oe,{children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs($e,{className:"text-lg flex items-center gap-2",children:[c.jsx(hl,{className:"h-5 w-5"}),N.Doctor?.FirstName," ",N.Doctor?.LastName1]}),c.jsxs(tr,{className:"flex flex-col gap-1",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Xu,{className:"h-3 w-3"}),N.Doctor?.Email]}),N.Doctor?.LicenseNumber&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(K2,{className:"h-3 w-3"}),"Licencia: ",N.Doctor.LicenseNumber]})]})]}),c.jsxs(Ze,{variant:N.Status==="approved"?"default":N.Status==="rejected"?"destructive":"secondary",children:[N.Status==="approved"&&c.jsx(Ko,{className:"h-3 w-3 mr-1"}),N.Status==="rejected"&&c.jsx(Go,{className:"h-3 w-3 mr-1"}),N.Status==="pending"&&c.jsx(ir,{className:"h-3 w-3 mr-1"}),N.Status==="approved"?"Aprobado":N.Status==="rejected"?"Rechazado":"Pendiente"]})]})}),c.jsxs(de,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs(wt,{className:"text-sm font-semibold mb-2 block",children:[c.jsx(Ir,{className:"h-4 w-4 inline mr-1"}),"Documentos (",N.CertificationDocuments?.length||0,")"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:N.CertificationDocuments?.map((R,A)=>c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>window.open(R,"_blank"),children:[c.jsx(Y2,{className:"h-3 w-3 mr-1"}),"Documento ",A+1]},A))})]}),N.Notes&&c.jsxs("div",{children:[c.jsx(wt,{className:"text-sm font-semibold mb-1 block",children:"Notas del Doctor"}),c.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:N.Notes})]}),N.AdminNotes&&c.jsxs("div",{children:[c.jsx(wt,{className:"text-sm font-semibold mb-1 block",children:"Notas del Administrador"}),c.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:N.AdminNotes})]}),N.RejectionReason&&c.jsxs(Ss,{variant:"destructive",children:[c.jsx(so,{className:"h-4 w-4"}),c.jsxs(Cs,{children:[c.jsx("span",{className:"font-semibold",children:"Razón de rechazo:"})," ",N.RejectionReason]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("p",{children:["Enviado: ",new Date(N.SubmittedAt).toLocaleString("es-CR")]}),N.ReviewedAt&&c.jsxs("p",{children:["Revisado: ",new Date(N.ReviewedAt).toLocaleString("es-CR")]})]}),N.Status==="pending"&&c.jsx(EN,{open:n,onOpenChange:r,children:c.jsx(kae,{asChild:!0,children:c.jsx(Q,{className:"w-full",onClick:()=>P(N),children:"Revisar Verificación"})})})]})]},N.VerificationId);return c.jsxs("div",{className:"container mx-auto p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Panel de Verificaciones"}),c.jsx("p",{className:"text-muted-foreground",children:"Gestiona las solicitudes de verificación de doctores"})]}),c.jsxs(Ml,{defaultValue:"pending",className:"space-y-4",children:[c.jsxs(Dl,{className:"grid w-full grid-cols-3",children:[c.jsxs(an,{value:"pending",className:"flex items-center gap-2",children:[c.jsx(ir,{className:"h-4 w-4"}),"Pendientes (",i?.length||0,")"]}),c.jsxs(an,{value:"approved",className:"flex items-center gap-2",children:[c.jsx(Ko,{className:"h-4 w-4"}),"Aprobadas (",o?.length||0,")"]}),c.jsxs(an,{value:"rejected",className:"flex items-center gap-2",children:[c.jsx(Go,{className:"h-4 w-4"}),"Rechazadas (",d?.length||0,")"]})]}),c.jsx(cn,{value:"pending",className:"space-y-4",children:s?c.jsxs(c.Fragment,{children:[c.jsx(sn,{className:"h-64 w-full"}),c.jsx(sn,{className:"h-64 w-full"})]}):i&&i.length>0?c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(j)}):c.jsx(le,{children:c.jsxs(de,{className:"py-12 text-center text-muted-foreground",children:[c.jsx(ir,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay verificaciones pendientes"})]})})}),c.jsx(cn,{value:"approved",className:"space-y-4",children:l?c.jsxs(c.Fragment,{children:[c.jsx(sn,{className:"h-64 w-full"}),c.jsx(sn,{className:"h-64 w-full"})]}):o&&o.length>0?c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(j)}):c.jsx(le,{children:c.jsxs(de,{className:"py-12 text-center text-muted-foreground",children:[c.jsx(Ko,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay verificaciones aprobadas"})]})})}),c.jsx(cn,{value:"rejected",className:"space-y-4",children:h?c.jsxs(c.Fragment,{children:[c.jsx(sn,{className:"h-64 w-full"}),c.jsx(sn,{className:"h-64 w-full"})]}):d&&d.length>0?c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(j)}):c.jsx(le,{children:c.jsxs(de,{className:"py-12 text-center text-muted-foreground",children:[c.jsx(Go,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay verificaciones rechazadas"})]})})})]}),c.jsx(EN,{open:n,onOpenChange:r,children:c.jsxs(Eae,{className:"max-w-2xl",children:[c.jsxs(Tae,{children:[c.jsx(jae,{children:"Revisar Verificación"}),c.jsxs(Pae,{children:["Revisa y aprueba o rechaza la verificación de"," ",e?.Doctor?.FirstName," ",e?.Doctor?.LastName1]})]}),c.jsxs("form",{onSubmit:b(T),className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(wt,{children:"Acción *"}),c.jsxs($ae,{defaultValue:"approve",onValueChange:N=>{y("Action").onChange({target:{value:N}})},children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(TN,{value:"approve",id:"approve"}),c.jsxs(wt,{htmlFor:"approve",className:"font-normal cursor-pointer",children:[c.jsx(Ko,{className:"h-4 w-4 inline mr-1 text-green-600"}),"Aprobar verificación"]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(TN,{value:"reject",id:"reject"}),c.jsxs(wt,{htmlFor:"reject",className:"font-normal cursor-pointer",children:[c.jsx(Go,{className:"h-4 w-4 inline mr-1 text-red-600"}),"Rechazar verificación"]})]})]}),S.Action&&c.jsx("p",{className:"text-sm text-destructive",children:S.Action.message})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(wt,{htmlFor:"adminNotes",children:["Notas del Administrador ",E==="approve"&&"(Opcional)"]}),c.jsx(j0,{id:"adminNotes",...y("AdminNotes"),placeholder:"Agregue notas adicionales sobre esta revisión...",rows:3}),S.AdminNotes&&c.jsx("p",{className:"text-sm text-destructive",children:S.AdminNotes.message})]}),E==="reject"&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(wt,{htmlFor:"rejectionReason",children:"Razón de Rechazo *"}),c.jsx(j0,{id:"rejectionReason",...y("RejectionReason"),placeholder:"Explique por qué se rechaza esta verificación (mínimo 10 caracteres)...",rows:4,className:"border-destructive focus-visible:ring-destructive"}),S.RejectionReason&&c.jsx("p",{className:"text-sm text-destructive",children:S.RejectionReason.message})]}),c.jsxs(Nae,{children:[c.jsx(Q,{type:"button",variant:"outline",onClick:()=>{r(!1),x()},disabled:p,children:"Cancelar"}),c.jsx(Q,{type:"submit",disabled:p,variant:E==="approve"?"default":"destructive",children:p?"Procesando...":E==="approve"?"Aprobar Verificación":"Rechazar Verificación"})]})]})]})})]})}function qae(e,t){return Ot({queryKey:["doctors","approved",e,t],queryFn:async()=>(await Xe.get("/doctors/approved",{params:{...e&&{search:e},...t&&{specialtyId:t}}})).data})}function Hae(e,t,n){return Ot({queryKey:["doctors",e,"available-slots",t,n],queryFn:async()=>{if(!e)throw new Error("Doctor ID is required");return(await Xe.get(`/doctors/${e}/available-slots`,{params:{...t,...n}})).data},enabled:!!e})}function g5(){return Ot({queryKey:["specialties"],queryFn:async()=>(await Xe.get("/specialties")).data,staleTime:1e3*60*60})}function Wae(){const e=Jr();return mi({mutationFn:async t=>(await Xe.post("/specialties",t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["specialties"]})}})}function Kae(){const e=Jr();return mi({mutationFn:async t=>(await Xe.put(`/specialties/${t.id}`,{Name:t.Name})).data,onSuccess:()=>{e.invalidateQueries({queryKey:["specialties"]})}})}function Gae(){const e=Jr();return mi({mutationFn:async t=>(await Xe.delete(`/specialties/${t}`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["specialties"]})}})}function Zae(){const e=_t(),[t,n]=g.useState(""),[r,i]=g.useState(""),[s,o]=g.useState(""),{data:l}=g5(),{data:d,isLoading:h,error:f}=qae(r,s),p=()=>{i(t)},y=b=>{b.key==="Enter"&&p()};return c.jsx("div",{className:"min-h-screen bg-background p-6",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"ghost",onClick:()=>e("/patient-dashboard"),children:c.jsx(Di,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Agendar Nueva Cita"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Busca y selecciona un médico para tu consulta"})]})]}),c.jsx(le,{children:c.jsxs(de,{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(ed,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Buscar médicos por nombre...",value:t,onChange:b=>n(b.target.value),onKeyPress:y,className:"w-full pl-10 pr-4 py-3 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),c.jsxs(Q,{className:"bg-primary hover:bg-primary/90",onClick:p,disabled:h,children:[h?c.jsx(Kn,{className:"h-5 w-5 mr-2 animate-spin"}):c.jsx(ed,{className:"h-5 w-5 mr-2"}),"Buscar"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(dU,{className:"h-5 w-5 text-muted-foreground"}),c.jsx("span",{className:"text-sm font-medium text-foreground",children:"Filtrar por especialidad:"}),c.jsxs("div",{className:"flex-1 flex gap-2 flex-wrap",children:[c.jsx(Q,{variant:s===""?"default":"outline",size:"sm",onClick:()=>o(""),children:"Todas"}),l?.map(b=>c.jsx(Q,{variant:s===b.id?"default":"outline",size:"sm",onClick:()=>o(b.id),children:b.name},b.id))]}),s&&c.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>o(""),className:"text-muted-foreground hover:text-foreground",children:c.jsx(Ka,{className:"h-4 w-4"})})]})]})}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"text-xl text-foreground",children:["Médicos Disponibles",d&&d.length>0&&c.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",d.length," ",d.length===1?"médico":"médicos",")"]})]})}),c.jsx(de,{children:h?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Kn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-muted-foreground",children:"Cargando médicos..."})]}):f?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Pn,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),c.jsx("p",{className:"text-red-600",children:"Error al cargar los médicos"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Por favor, intenta nuevamente"})]}):!d||d.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(hl,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:r?"No se encontraron médicos con ese criterio de búsqueda":"No hay médicos disponibles en este momento"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Intenta con otro término de búsqueda"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(b=>c.jsx(le,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-primary",onClick:()=>e(`/nueva-cita/${b.userId}`),children:c.jsxs(de,{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Dr. ",b.firstName," ",b.lastName]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:b.email})]}),c.jsx(hl,{className:"h-10 w-10 text-primary bg-primary/10 rounded-full p-2"})]}),b.specialties&&b.specialties.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:b.specialties.map(k=>c.jsx(Ze,{className:"bg-blue-50 text-blue-700 hover:bg-blue-100",children:k.name},k.id))}),c.jsxs("div",{className:"space-y-2 text-sm",children:[b.yearsExperience&&c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(gU,{className:"h-4 w-4"}),c.jsxs("span",{children:[b.yearsExperience," años de experiencia"]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(X2,{className:"h-4 w-4"}),c.jsxs("span",{children:["Licencia: ",b.licenseCountry]})]})]}),b.bio&&c.jsx("div",{className:"pt-3 border-t",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Ir,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),c.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:b.bio})]})}),c.jsxs(Q,{className:"w-full bg-primary hover:bg-primary/90",children:[c.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Agendar Cita"]})]})},b.userId))})})]})]})})}function Jae(){return Ot({queryKey:["conversations","mine"],queryFn:async()=>(await Xe.get("/conversations/mine")).data,refetchInterval:5e3})}function Qae(e){return Ot({queryKey:["conversations",e,"messages"],queryFn:async()=>e?(await Xe.get(`/conversations/${e}/messages`)).data:[],enabled:!!e,refetchInterval:3e3})}function Yae(){const e=Jr();return mi({mutationFn:async t=>{const n={Content:t.content};return t.language&&(n.Language=t.language),(await Xe.post(`/conversations/${t.conversationId}/messages`,n)).data},onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["conversations",n.conversationId,"messages"]}),e.invalidateQueries({queryKey:["conversations","mine"]})}})}function Xae(){const e=_t(),[t,n]=g.useState(null),[r,i]=g.useState(""),s=g.useRef(null),{data:o,isLoading:l}=Jae(),{data:d,isLoading:h}=Qae(t),f=Yae(),p=()=>{s.current?.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{p()},[d]);const y=async()=>{if(!(!r.trim()||!t))try{await f.mutateAsync({conversationId:t,content:r}),i("")}catch(x){Tt.error("Error al enviar mensaje",{description:x.response?.data?.message||"Por favor, intenta nuevamente"})}},b=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),y())},k=o?.find(x=>x.id===t);return c.jsx("div",{className:"min-h-screen bg-background p-6",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"ghost",onClick:()=>e("/patient-dashboard"),children:c.jsx(Di,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mensajes"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Consulta con tus médicos"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs(le,{className:"lg:col-span-1",children:[c.jsx(Oe,{children:c.jsxs($e,{className:"text-lg text-foreground",children:["Conversaciones",o&&o.length>0&&c.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",o.length,")"]})]})}),c.jsx(de,{className:"space-y-2 max-h-[600px] overflow-y-auto",children:l?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Kn,{className:"h-8 w-8 text-muted-foreground mx-auto mb-3 animate-spin"}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"Cargando conversaciones..."})]}):!o||o.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(dl,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"No hay conversaciones aún"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Las conversaciones se crean después de agendar citas"})]}):o.map(x=>c.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${t===x.id?"bg-primary/10 border-2 border-primary":"bg-accent hover:bg-accent/80 border-2 border-transparent"}`,onClick:()=>n(x.id),children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:c.jsx(hl,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-sm text-foreground truncate",children:x.participants&&x.participants.length>0?x.participants[0].name:"Conversación"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:x.lastMessage?new Date(x.lastMessage.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):new Date(x.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]})]})},x.id))})]}),c.jsxs(le,{className:"lg:col-span-2",children:[c.jsx(Oe,{className:"border-b",children:c.jsx($e,{className:"text-lg text-foreground",children:k?k.participants&&k.participants[0]?k.participants[0].name:"Chat":"Selecciona una conversación"})}),c.jsx(de,{className:"h-[600px] flex flex-col p-0",children:t?h?c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx(Kn,{className:"h-8 w-8 text-primary animate-spin"})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!d||d.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-muted-foreground text-sm",children:"No hay mensajes aún. ¡Envía el primero!"})}):d.map(x=>{const S=x.senderUserId===localStorage.getItem("userId"),E=x.translation&&x.translationLanguage;return c.jsx("div",{className:`flex ${S?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${S?"bg-primary text-white":"bg-accent text-foreground"}`,children:[!S&&c.jsx("p",{className:"text-xs font-semibold mb-1 opacity-70",children:x.senderName}),c.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:E?x.translation:x.content}),E&&c.jsx("p",{className:`text-xs mt-2 pt-2 border-t italic whitespace-pre-wrap break-words ${S?"text-white/60 border-white/20":"text-muted-foreground/60 border-border/30"}`,children:x.content}),c.jsx("p",{className:`text-xs mt-1 ${S?"text-white/70":"text-muted-foreground"}`,children:new Date(x.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})},x.id)}),c.jsx("div",{ref:s})]}),c.jsx("div",{className:"p-4 border-t",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:"Escribe un mensaje...",value:r,onChange:x=>i(x.target.value),onKeyPress:b,className:"flex-1 px-4 py-2 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),c.jsx(Q,{onClick:y,disabled:!r.trim()||f.isPending,className:"bg-primary hover:bg-primary/90",children:f.isPending?c.jsx(Kn,{className:"h-5 w-5 animate-spin"}):c.jsx(np,{className:"h-5 w-5"})})]})})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(dl,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Selecciona una conversación para ver los mensajes"})]})})})]})]})]})})}function ece(e=1,t=10,n="desc"){return Ot({queryKey:["appointments","all",e,t,n],queryFn:async()=>(await Xe.get("/appointments/all",{params:{page:e,limit:t,order:n}})).data,refetchOnWindowFocus:!1})}function tce(e=10){return Ot({queryKey:["appointments","upcoming",e],queryFn:async()=>(await Xe.get("/appointments/upcoming",{params:{limit:e}})).data,refetchOnWindowFocus:!1})}function nce(e=20){return Ot({queryKey:["appointments","past",e],queryFn:async()=>(await Xe.get("/appointments/past",{params:{limit:e}})).data,refetchOnWindowFocus:!1})}function rce(e=20){return Ot({queryKey:["appointments","cancelled",e],queryFn:async()=>(await Xe.get("/appointments/cancelled",{params:{limit:e}})).data,refetchOnWindowFocus:!1})}function ice(){const e=Jr();return mi({mutationFn:async t=>(await Xe.post("/appointments",t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["appointments"]})}})}function sce(){const e=Jr();return mi({mutationFn:async t=>(await Xe.patch(`/appointments/${t.id}/cancel`,{CancelReason:t.cancelReason})).data,onSuccess:()=>{e.invalidateQueries({queryKey:["appointments"]})}})}function oce(){const e=_t(),[t,n]=g.useState("all"),[r,i]=g.useState(1),[s,o]=g.useState("desc"),l=10,{data:d,isLoading:h}=ece(r,l,s),{data:f,isLoading:p}=tce(20),{data:y,isLoading:b}=nce(20),{data:k,isLoading:x}=rce(20),S=sce(),E=d?.data||[],T=d?.pagination,P=()=>{switch(t){case"all":return{data:E,loading:h};case"upcoming":return{data:f||[],loading:p};case"past":return{data:y||[],loading:b};case"cancelled":return{data:k||[],loading:x};default:return{data:[],loading:!1}}},{data:j,loading:N}=P(),R=V=>{n(V),i(1)},A=()=>{o(s==="desc"?"asc":"desc"),i(1)},I=V=>{const te=new Date(V),J=te.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),we=te.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return{date:J,time:we}},D=V=>{switch(V){case"CONFIRMED":return c.jsx(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Confirmada"});case"PENDING":return c.jsx(Ze,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Pendiente"});case"COMPLETED":return c.jsx(Ze,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Completada"});case"CANCELLED":return c.jsx(Ze,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Cancelada"});case"NO_SHOW":return c.jsx(Ze,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"No asistió"});default:return c.jsx(Ze,{variant:"outline",children:V})}},z=async V=>{const te=prompt("¿Por qué deseas cancelar esta cita? (opcional)");if(te!==null)try{await S.mutateAsync({id:V,cancelReason:te||void 0}),Tt.success("Cita cancelada exitosamente")}catch(J){Tt.error("Error al cancelar la cita",{description:J.response?.data?.message||"Por favor, intenta nuevamente"})}},q=V=>V==="PENDING"||V==="CONFIRMED";return c.jsx("div",{className:"min-h-screen bg-background p-6",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"ghost",onClick:()=>e("/patient-dashboard"),children:c.jsx(Di,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mis Citas"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Revisa todas tus consultas programadas"})]})]}),c.jsxs(Q,{className:"bg-primary hover:bg-primary/90",onClick:()=>e("/nueva-cita"),children:[c.jsx(rm,{className:"h-5 w-5 mr-2"}),"Nueva Cita"]})]}),c.jsx(le,{children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx(Q,{variant:t==="all"?"default":"outline",onClick:()=>R("all"),className:t==="all"?"bg-primary":"",children:"Todas"}),c.jsx(Q,{variant:t==="upcoming"?"default":"outline",onClick:()=>R("upcoming"),className:t==="upcoming"?"bg-primary":"",children:"Próximas"}),c.jsx(Q,{variant:t==="past"?"default":"outline",onClick:()=>R("past"),className:t==="past"?"bg-primary":"",children:"Pasadas"}),c.jsx(Q,{variant:t==="cancelled"?"default":"outline",onClick:()=>R("cancelled"),className:t==="cancelled"?"bg-primary":"",children:"Canceladas"})]}),t==="all"&&c.jsxs(Q,{variant:"outline",onClick:A,className:"gap-2",children:[c.jsx(j6,{className:"h-4 w-4"}),s==="desc"?"Más recientes":"Más antiguas"]})]})})}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"text-xl text-foreground",children:[t==="all"&&"Todas las Citas",t==="upcoming"&&"Próximas Citas",t==="past"&&"Citas Pasadas",t==="cancelled"&&"Citas Canceladas"]})}),c.jsxs(de,{children:[N?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-muted-foreground",children:"Cargando citas..."})}):j.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Pn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsxs("p",{className:"text-muted-foreground mb-4",children:[t==="all"&&"No tienes citas registradas",t==="upcoming"&&"No tienes citas próximas",t==="past"&&"No tienes citas pasadas",t==="cancelled"&&"No tienes citas canceladas"]}),(t==="upcoming"||t==="all")&&c.jsxs(Q,{className:"bg-primary hover:bg-primary/90",onClick:()=>e("/nueva-cita"),children:[c.jsx(rm,{className:"h-5 w-5 mr-2"}),"Agendar Nueva Cita"]})]}):c.jsx("div",{className:"space-y-4",children:j.map(V=>{const{date:te,time:J}=I(V.scheduledAt),we=V.modality?.toLowerCase()==="online";return c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:we?c.jsx(Wr,{className:"h-6 w-6 text-primary"}):c.jsx(X2,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-lg text-foreground",children:V.doctor?.name||"Médico"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:V.doctor?.specialty||"General"}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Pn,{className:"h-4 w-4"}),c.jsx("span",{children:te})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ir,{className:"h-4 w-4"}),c.jsx("span",{children:J})]}),V.durationMin&&c.jsxs("span",{children:["• ",V.durationMin," min"]})]}),V.cancelReason&&c.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Motivo: ",V.cancelReason]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[D(V.status),t==="upcoming"&&we&&c.jsx(Q,{className:"bg-primary hover:bg-primary/90",onClick:()=>e("/video-call"),children:"Unirse"}),q(V.status)&&c.jsxs(Q,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>z(V.id),disabled:S.isPending,children:[c.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]},V.id)})}),t==="all"&&T&&T.totalPages>1&&c.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",(T.page-1)*T.limit+1," - ",Math.min(T.page*T.limit,T.total)," de ",T.total," citas"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>i(V=>Math.max(1,V-1)),disabled:r===1,children:[c.jsx(q6,{className:"h-4 w-4"}),"Anterior"]}),c.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,T.totalPages)},(V,te)=>{let J;return T.totalPages<=5||r<=3?J=te+1:r>=T.totalPages-2?J=T.totalPages-4+te:J=r-2+te,c.jsx(Q,{variant:r===J?"default":"outline",size:"sm",onClick:()=>i(J),className:r===J?"bg-primary":"",children:J},J)})}),c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>i(V=>Math.min(T.totalPages,V+1)),disabled:r===T.totalPages,children:["Siguiente",c.jsx(W6,{className:"h-4 w-4"})]})]})]})]})]})]})})}function ace(){const e=_t(),{doctorId:t}=Zm(),[n,r]=g.useState(null),[i,s]=g.useState("online"),{data:o,isLoading:l,error:d}=Hae(t),h=ice(),f=o?.slots.reduce((b,k)=>{const x=new Date(k.startAt).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return b[x]||(b[x]=[]),b[x].push(k),b},{}),p=b=>{r(b)},y=async()=>{if(!(!n||!t))try{await h.mutateAsync({DoctorUserId:Number(t),SlotId:Number(n),Modality:i}),Tt.success("¡Cita agendada exitosamente!",{description:"Puedes ver los detalles en 'Mis Citas'"}),setTimeout(()=>{e("/mis-citas")},1500)}catch(b){Tt.error("Error al agendar la cita",{description:b.response?.data?.message||"Por favor, intenta nuevamente"})}};return c.jsx("div",{className:"min-h-screen bg-background p-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"ghost",onClick:()=>e("/nueva-cita"),children:c.jsx(Di,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Seleccionar Horario"}),o?.doctor&&c.jsxs("p",{className:"text-muted-foreground mt-1",children:["Dr. ",o.doctor.name]})]})]}),l?c.jsx(le,{children:c.jsx(de,{className:"p-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Kn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-muted-foreground",children:"Cargando horarios disponibles..."})]})})}):d?c.jsx(le,{children:c.jsx(de,{className:"p-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Pn,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),c.jsx("p",{className:"text-red-600",children:"Error al cargar los horarios"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Por favor, intenta nuevamente"})]})})}):!o?.slots||o.slots.length===0?c.jsx(le,{children:c.jsx(de,{className:"p-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Pn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"No hay horarios disponibles en este momento"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Este doctor no tiene espacios disponibles para los próximos 30 días"}),c.jsx(Q,{className:"mt-4",variant:"outline",onClick:()=>e("/nueva-cita"),children:"Buscar otro doctor"})]})})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-4",children:f&&Object.entries(f).map(([b,k])=>c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"text-lg text-foreground capitalize",children:[c.jsx(Pn,{className:"h-5 w-5 inline mr-2"}),b]})}),c.jsx(de,{children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:k.map(x=>{const S=new Date(x.startAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),E=new Date(x.endAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),T=n===x.id;return c.jsxs(Q,{variant:T?"default":"outline",className:`flex flex-col items-center justify-center h-20 ${T?"bg-primary text-white":"hover:bg-primary/10"}`,onClick:()=>p(x.id),children:[c.jsx(ir,{className:"h-4 w-4 mb-1"}),c.jsx("span",{className:"font-semibold",children:S}),c.jsx("span",{className:"text-xs opacity-80",children:E}),T&&c.jsx(tm,{className:"h-4 w-4 mt-1"})]},x.id)})})})]},b))}),n&&c.jsx(le,{className:"border-2 border-primary",children:c.jsxs(de,{className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Horario seleccionado"}),c.jsx("p",{className:"text-lg font-semibold text-foreground",children:o.slots.find(b=>b.id===n)?.startAt&&new Date(o.slots.find(b=>b.id===n).startAt).toLocaleString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Modalidad de consulta"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Q,{variant:i==="online"?"default":"outline",onClick:()=>s("online"),className:"flex-1",children:"En línea"}),c.jsx(Q,{variant:i==="in_person"?"default":"outline",onClick:()=>s("in_person"),className:"flex-1",children:"Presencial"}),c.jsx(Q,{variant:i==="hybrid"?"default":"outline",onClick:()=>s("hybrid"),className:"flex-1",children:"Híbrido"})]})]}),c.jsx(Q,{className:"w-full bg-primary hover:bg-primary/90",onClick:y,disabled:h.isPending,children:h.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Kn,{className:"h-4 w-4 mr-2 animate-spin"}),"Agendando..."]}):c.jsxs(c.Fragment,{children:[c.jsx(tm,{className:"h-4 w-4 mr-2"}),"Confirmar Cita"]})})]})})]})]})})}function cce(){const e=_t(),[t,n]=g.useState(!1),[r,i]=g.useState(""),[s,o]=g.useState(null),[l,d]=g.useState(""),{data:h,isLoading:f}=g5(),p=Wae(),y=Kae(),b=Gae(),k=async()=>{if(!r.trim()){Tt.error("El nombre de la especialidad es requerido");return}try{await p.mutateAsync({Name:r.trim()}),Tt.success("Especialidad creada exitosamente"),i(""),n(!1)}catch(P){Tt.error("Error al crear especialidad",{description:P.response?.data?.message||"Por favor, intenta nuevamente"})}},x=async P=>{if(!l.trim()){Tt.error("El nombre de la especialidad es requerido");return}try{await y.mutateAsync({id:P,Name:l.trim()}),Tt.success("Especialidad actualizada exitosamente"),o(null),d("")}catch(j){Tt.error("Error al actualizar especialidad",{description:j.response?.data?.message||"Por favor, intenta nuevamente"})}},S=async(P,j)=>{if(window.confirm(`¿Estás seguro de eliminar la especialidad "${j}"?

Nota: No podrás eliminarla si tiene doctores asociados.`))try{await b.mutateAsync(P),Tt.success("Especialidad eliminada exitosamente")}catch(N){Tt.error("Error al eliminar especialidad",{description:N.response?.data?.message||"Por favor, intenta nuevamente"})}},E=P=>{o(P.id),d(P.name)},T=()=>{o(null),d("")};return c.jsx("div",{className:"min-h-screen bg-background p-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Q,{variant:"ghost",onClick:()=>e("/admin-panel"),children:c.jsx(Di,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gestión de Especialidades"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Administra las especialidades médicas del sistema"})]})]}),c.jsxs(Q,{className:"bg-primary hover:bg-primary/90",onClick:()=>n(!0),disabled:t,children:[c.jsx(rm,{className:"h-5 w-5 mr-2"}),"Nueva Especialidad"]})]}),t&&c.jsx(le,{className:"border-2 border-primary",children:c.jsx(de,{className:"p-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Nombre de la Especialidad"}),c.jsx("input",{type:"text",value:r,onChange:P=>i(P.target.value),placeholder:"Ej: Cardiología",className:"w-full mt-2 px-4 py-3 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Q,{className:"flex-1 bg-primary hover:bg-primary/90",onClick:k,disabled:p.isPending,children:p.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Kn,{className:"h-4 w-4 mr-2 animate-spin"}),"Creando..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Crear"]})}),c.jsxs(Q,{variant:"outline",onClick:()=>{n(!1),i("")},disabled:p.isPending,children:[c.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]})})}),c.jsxs(le,{children:[c.jsx(Oe,{children:c.jsxs($e,{className:"text-xl text-foreground",children:["Especialidades Registradas",h&&c.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",h.length," ",h.length===1?"especialidad":"especialidades",")"]})]})}),c.jsx(de,{children:f?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Kn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-muted-foreground",children:"Cargando especialidades..."})]}):!h||h.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-muted-foreground",children:"No hay especialidades registradas"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Crea la primera especialidad usando el botón superior"})]}):c.jsx("div",{className:"space-y-2",children:h.map(P=>c.jsx("div",{className:"flex items-center justify-between p-4 border border-input rounded-lg hover:bg-accent/50 transition-colors",children:s===P.id?c.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[c.jsx("input",{type:"text",value:l,onChange:j=>d(j.target.value),className:"flex-1 px-3 py-2 bg-background border border-input rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0}),c.jsx(Q,{size:"sm",onClick:()=>x(P.id),disabled:y.isPending,children:y.isPending?c.jsx(Kn,{className:"h-4 w-4 animate-spin"}):c.jsx(Xo,{className:"h-4 w-4"})}),c.jsx(Q,{size:"sm",variant:"outline",onClick:T,disabled:y.isPending,children:c.jsx(Ka,{className:"h-4 w-4"})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ze,{className:"bg-blue-50 text-blue-700",children:P.name}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["ID: ",P.id]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Q,{size:"sm",variant:"outline",onClick:()=>E(P),children:c.jsx(ej,{className:"h-4 w-4"})}),c.jsx(Q,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>S(P.id,P.name),disabled:b.isPending,children:b.isPending?c.jsx(Kn,{className:"h-4 w-4 animate-spin"}):c.jsx(nj,{className:"h-4 w-4"})})]})]})},P.id))})})]})]})})}function lce(){const[e,t]=g.useState(null),[n,r]=g.useState(null),[i,s]=g.useState(!0),o=_t(),l=js(),d=b=>b==="doctor"?"/doctor-dashboard":b==="admin"?"/admin-panel":b==="patient"?"/patient-dashboard":"/",h=async b=>{t(b);try{const k=await Yu();r(k)}catch{}o(d(b))},f=()=>{t(null),r(null),localStorage.removeItem("access_token"),o("/")},p=n?.id?typeof n.id=="string"?Number(n.id):n.id:0,y=n?.fullName||[n?.firstName1,n?.lastName1,n?.lastName2].filter(Boolean).join(" ")||"Paciente";return g.useEffect(()=>{if(!localStorage.getItem("access_token")){s(!1);return}(async()=>{try{const k=await Yu();r(k);const x=String(k.role??"").toUpperCase(),S=x==="DOCTOR"?"doctor":x==="ADMIN"?"admin":"patient";t(S),(l.pathname==="/"||l.pathname==="/login")&&o(d(S),{replace:!0})}catch{localStorage.removeItem("access_token")}finally{s(!1)}})()},[]),i?c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:"Cargando..."})}):c.jsxs(sF,{currentUser:e,children:[c.jsx(AF,{position:"top-right",richColors:!0}),c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs(l4,{children:[c.jsx(Et,{path:"/",element:c.jsx(wB,{})}),c.jsx(Et,{path:"/login",element:c.jsx(nq,{onLogin:h})}),c.jsx(Et,{path:"/forgot-password",element:c.jsx(rq,{})}),c.jsx(Et,{path:"/reset-password",element:c.jsx(oq,{})}),c.jsx(Et,{path:"/verify-email",element:c.jsx(iq,{})}),c.jsx(Et,{path:"/patient-dashboard",element:c.jsx(Gt,{isAllowed:e==="patient",children:c.jsx(Wq,{patientId:p,patientName:y})})}),c.jsx(Et,{path:"/doctor-dashboard",element:c.jsx(Gt,{isAllowed:e==="doctor",children:c.jsx(cH,{})})}),c.jsx(Et,{path:"/admin-panel",element:c.jsx(Gt,{isAllowed:e==="admin",children:c.jsx(dH,{})})}),c.jsx(Et,{path:"/appointments",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(XC,{})})}),c.jsx(Et,{path:"/appointments/:doctorId",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(XC,{})})}),c.jsx(Et,{path:"/video-call",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(pH,{})})}),c.jsx(Et,{path:"/history",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(eE,{})})}),c.jsx(Et,{path:"/prescriptions",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(eE,{})})}),c.jsx(Et,{path:"/medical-history",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(PH,{})})}),c.jsx(Et,{path:"/medical-records/:recordId",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(_H,{})})}),c.jsx(Et,{path:"/verification",element:c.jsx(Gt,{isAllowed:e==="doctor",children:c.jsx(YH,{})})}),c.jsx(Et,{path:"/video-call/:appointmentId",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(fte,{})})}),c.jsx(Et,{path:"/subscription",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(Tte,{})})}),c.jsx(Et,{path:"/chat/:conversationId",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(Sne,{})})}),c.jsx(Et,{path:"/admin/verifications",element:c.jsx(Gt,{isAllowed:e==="admin",children:c.jsx(Vae,{})})}),c.jsx(Et,{path:"/admin/specialties",element:c.jsx(Gt,{isAllowed:e==="admin",children:c.jsx(cce,{})})}),c.jsx(Et,{path:"/settings",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(bH,{onLogout:f})})}),c.jsx(Et,{path:"/payments",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(xH,{})})}),c.jsx(Et,{path:"/search-doctors",element:c.jsx(FN,{to:"/appointments",replace:!0})}),c.jsx(Et,{path:"/nueva-cita",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(Zae,{})})}),c.jsx(Et,{path:"/nueva-cita/:doctorId",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(ace,{})})}),c.jsx(Et,{path:"/mensajes",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(Xae,{})})}),c.jsx(Et,{path:"/mis-citas",element:c.jsx(Gt,{isAllowed:e!==null,children:c.jsx(oce,{})})}),c.jsx(Et,{path:"*",element:c.jsx(wH,{})})]})})]})}bD.createRoot(document.getElementById("root")).render(c.jsx(ye.StrictMode,{children:c.jsx(I4,{children:c.jsx(hL,{client:CL,children:c.jsx(lce,{})})})}));
