function L4(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function J0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ly={exports:{}},Gd={},dy={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS;function F4(){if(FS)return kt;FS=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,b={};function S(B,te,ee){this.props=B,this.context=te,this.refs=b,this.updater=ee||x}S.prototype.isReactComponent={},S.prototype.setState=function(B,te){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,te,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function N(){}N.prototype=S.prototype;function E(B,te,ee){this.props=B,this.context=te,this.refs=b,this.updater=ee||x}var j=E.prototype=new N;j.constructor=E,k(j,S.prototype),j.isPureReactComponent=!0;var P=Array.isArray,T=Object.prototype.hasOwnProperty,I={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function A(B,te,ee){var ye,Te={},ne=null,K=null;if(te!=null)for(ye in te.ref!==void 0&&(K=te.ref),te.key!==void 0&&(ne=""+te.key),te)T.call(te,ye)&&!_.hasOwnProperty(ye)&&(Te[ye]=te[ye]);var ce=arguments.length-2;if(ce===1)Te.children=ee;else if(1<ce){for(var De=Array(ce),Fe=0;Fe<ce;Fe++)De[Fe]=arguments[Fe+2];Te.children=De}if(B&&B.defaultProps)for(ye in ce=B.defaultProps,ce)Te[ye]===void 0&&(Te[ye]=ce[ye]);return{$$typeof:e,type:B,key:ne,ref:K,props:Te,_owner:I.current}}function O(B,te){return{$$typeof:e,type:B.type,key:te,ref:B.ref,props:B.props,_owner:B._owner}}function M(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function q(B){var te={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ee){return te[ee]})}var z=/\/+/g;function G(B,te){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):te.toString(36)}function oe(B,te,ee,ye,Te){var ne=typeof B;(ne==="undefined"||ne==="boolean")&&(B=null);var K=!1;if(B===null)K=!0;else switch(ne){case"string":case"number":K=!0;break;case"object":switch(B.$$typeof){case e:case t:K=!0}}if(K)return K=B,Te=Te(K),B=ye===""?"."+G(K,0):ye,P(Te)?(ee="",B!=null&&(ee=B.replace(z,"$&/")+"/"),oe(Te,te,ee,"",function(Fe){return Fe})):Te!=null&&(M(Te)&&(Te=O(Te,ee+(!Te.key||K&&K.key===Te.key?"":(""+Te.key).replace(z,"$&/")+"/")+B)),te.push(Te)),1;if(K=0,ye=ye===""?".":ye+":",P(B))for(var ce=0;ce<B.length;ce++){ne=B[ce];var De=ye+G(ne,ce);K+=oe(ne,te,ee,De,Te)}else if(De=y(B),typeof De=="function")for(B=De.call(B),ce=0;!(ne=B.next()).done;)ne=ne.value,De=ye+G(ne,ce++),K+=oe(ne,te,ee,De,Te);else if(ne==="object")throw te=String(B),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return K}function ke(B,te,ee){if(B==null)return B;var ye=[],Te=0;return oe(B,ye,"","",function(ne){return te.call(ee,ne,Te++)}),ye}function J(B){if(B._status===-1){var te=B._result;te=te(),te.then(function(ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=ee)},function(ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=ee)}),B._status===-1&&(B._status=0,B._result=te)}if(B._status===1)return B._result.default;throw B._result}var ge={current:null},U={transition:null},ie={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:U,ReactCurrentOwner:I};function fe(){throw Error("act(...) is not supported in production builds of React.")}return kt.Children={map:ke,forEach:function(B,te,ee){ke(B,function(){te.apply(this,arguments)},ee)},count:function(B){var te=0;return ke(B,function(){te++}),te},toArray:function(B){return ke(B,function(te){return te})||[]},only:function(B){if(!M(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},kt.Component=S,kt.Fragment=n,kt.Profiler=s,kt.PureComponent=E,kt.StrictMode=r,kt.Suspense=u,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,kt.act=fe,kt.cloneElement=function(B,te,ee){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ye=k({},B.props),Te=B.key,ne=B.ref,K=B._owner;if(te!=null){if(te.ref!==void 0&&(ne=te.ref,K=I.current),te.key!==void 0&&(Te=""+te.key),B.type&&B.type.defaultProps)var ce=B.type.defaultProps;for(De in te)T.call(te,De)&&!_.hasOwnProperty(De)&&(ye[De]=te[De]===void 0&&ce!==void 0?ce[De]:te[De])}var De=arguments.length-2;if(De===1)ye.children=ee;else if(1<De){ce=Array(De);for(var Fe=0;Fe<De;Fe++)ce[Fe]=arguments[Fe+2];ye.children=ce}return{$$typeof:e,type:B.type,key:Te,ref:ne,props:ye,_owner:K}},kt.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},kt.createElement=A,kt.createFactory=function(B){var te=A.bind(null,B);return te.type=B,te},kt.createRef=function(){return{current:null}},kt.forwardRef=function(B){return{$$typeof:l,render:B}},kt.isValidElement=M,kt.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:J}},kt.memo=function(B,te){return{$$typeof:h,type:B,compare:te===void 0?null:te}},kt.startTransition=function(B){var te=U.transition;U.transition={};try{B()}finally{U.transition=te}},kt.unstable_act=fe,kt.useCallback=function(B,te){return ge.current.useCallback(B,te)},kt.useContext=function(B){return ge.current.useContext(B)},kt.useDebugValue=function(){},kt.useDeferredValue=function(B){return ge.current.useDeferredValue(B)},kt.useEffect=function(B,te){return ge.current.useEffect(B,te)},kt.useId=function(){return ge.current.useId()},kt.useImperativeHandle=function(B,te,ee){return ge.current.useImperativeHandle(B,te,ee)},kt.useInsertionEffect=function(B,te){return ge.current.useInsertionEffect(B,te)},kt.useLayoutEffect=function(B,te){return ge.current.useLayoutEffect(B,te)},kt.useMemo=function(B,te){return ge.current.useMemo(B,te)},kt.useReducer=function(B,te,ee){return ge.current.useReducer(B,te,ee)},kt.useRef=function(B){return ge.current.useRef(B)},kt.useState=function(B){return ge.current.useState(B)},kt.useSyncExternalStore=function(B,te,ee){return ge.current.useSyncExternalStore(B,te,ee)},kt.useTransition=function(){return ge.current.useTransition()},kt.version="18.3.1",kt}var US;function vp(){return US||(US=1,dy.exports=F4()),dy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function U4(){if(zS)return Gd;zS=1;var e=vp(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,h){var f,p={},y=null,x=null;h!==void 0&&(y=""+h),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(x=u.ref);for(f in u)r.call(u,f)&&!a.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:t,type:l,key:y,ref:x,props:p,_owner:s.current}}return Gd.Fragment=n,Gd.jsx=o,Gd.jsxs=o,Gd}var BS;function z4(){return BS||(BS=1,ly.exports=U4()),ly.exports}var i=z4(),g=vp();const Ce=J0(g),JE=L4({__proto__:null,default:Ce},[g]);var gf={},uy={exports:{}},Jr={},hy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S;function B4(){return $S||($S=1,(function(e){function t(U,ie){var fe=U.length;U.push(ie);e:for(;0<fe;){var B=fe-1>>>1,te=U[B];if(0<s(te,ie))U[B]=ie,U[fe]=te,fe=B;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ie=U[0],fe=U.pop();if(fe!==ie){U[0]=fe;e:for(var B=0,te=U.length,ee=te>>>1;B<ee;){var ye=2*(B+1)-1,Te=U[ye],ne=ye+1,K=U[ne];if(0>s(Te,fe))ne<te&&0>s(K,Te)?(U[B]=K,U[ne]=fe,B=ne):(U[B]=Te,U[ye]=fe,B=ye);else if(ne<te&&0>s(K,fe))U[B]=K,U[ne]=fe,B=ne;else break e}}return ie}function s(U,ie){var fe=U.sortIndex-ie.sortIndex;return fe!==0?fe:U.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,y=3,x=!1,k=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(U){for(var ie=n(h);ie!==null;){if(ie.callback===null)r(h);else if(ie.startTime<=U)r(h),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(h)}}function P(U){if(b=!1,j(U),!k)if(n(u)!==null)k=!0,J(T);else{var ie=n(h);ie!==null&&ge(P,ie.startTime-U)}}function T(U,ie){k=!1,b&&(b=!1,N(A),A=-1),x=!0;var fe=y;try{for(j(ie),p=n(u);p!==null&&(!(p.expirationTime>ie)||U&&!q());){var B=p.callback;if(typeof B=="function"){p.callback=null,y=p.priorityLevel;var te=B(p.expirationTime<=ie);ie=e.unstable_now(),typeof te=="function"?p.callback=te:p===n(u)&&r(u),j(ie)}else r(u);p=n(u)}if(p!==null)var ee=!0;else{var ye=n(h);ye!==null&&ge(P,ye.startTime-ie),ee=!1}return ee}finally{p=null,y=fe,x=!1}}var I=!1,_=null,A=-1,O=5,M=-1;function q(){return!(e.unstable_now()-M<O)}function z(){if(_!==null){var U=e.unstable_now();M=U;var ie=!0;try{ie=_(!0,U)}finally{ie?G():(I=!1,_=null)}}else I=!1}var G;if(typeof E=="function")G=function(){E(z)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ke=oe.port2;oe.port1.onmessage=z,G=function(){ke.postMessage(null)}}else G=function(){S(z,0)};function J(U){_=U,I||(I=!0,G())}function ge(U,ie){A=S(function(){U(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){k||x||(k=!0,J(T))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(y){case 1:case 2:case 3:var ie=3;break;default:ie=y}var fe=y;y=ie;try{return U()}finally{y=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,ie){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var fe=y;y=U;try{return ie()}finally{y=fe}},e.unstable_scheduleCallback=function(U,ie,fe){var B=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?B+fe:B):fe=B,U){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=fe+te,U={id:f++,callback:ie,priorityLevel:U,startTime:fe,expirationTime:te,sortIndex:-1},fe>B?(U.sortIndex=fe,t(h,U),n(u)===null&&U===n(h)&&(b?(N(A),A=-1):b=!0,ge(P,fe-B))):(U.sortIndex=te,t(u,U),k||x||(k=!0,J(T))),U},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(U){var ie=y;return function(){var fe=y;y=ie;try{return U.apply(this,arguments)}finally{y=fe}}}})(fy)),fy}var VS;function $4(){return VS||(VS=1,hy.exports=B4()),hy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS;function V4(){if(qS)return Jr;qS=1;var e=vp(),t=$4();function n(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(s[c]=d,c=0;c<d.length;c++)r.add(d[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(c){return u.call(p,c)?!0:u.call(f,c)?!1:h.test(c)?p[c]=!0:(f[c]=!0,!1)}function x(c,d,m,v){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return v?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function k(c,d,m,v){if(d===null||typeof d>"u"||x(c,d,m,v))return!0;if(v)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function b(c,d,m,v,w,C,R){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=v,this.attributeNamespace=w,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=C,this.removeEmptyString=R}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){S[c]=new b(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];S[d]=new b(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){S[c]=new b(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){S[c]=new b(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){S[c]=new b(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){S[c]=new b(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){S[c]=new b(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){S[c]=new b(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){S[c]=new b(c,5,!1,c.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function E(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(N,E);S[d]=new b(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(N,E);S[d]=new b(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(N,E);S[d]=new b(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){S[c]=new b(c,1,!1,c.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){S[c]=new b(c,1,!1,c.toLowerCase(),null,!0,!0)});function j(c,d,m,v){var w=S.hasOwnProperty(d)?S[d]:null;(w!==null?w.type!==0:v||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(k(d,m,w,v)&&(m=null),v||w===null?y(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):w.mustUseProperty?c[w.propertyName]=m===null?w.type===3?!1:"":m:(d=w.attributeName,v=w.attributeNamespace,m===null?c.removeAttribute(d):(w=w.type,m=w===3||w===4&&m===!0?"":""+m,v?c.setAttributeNS(v,d,m):c.setAttribute(d,m))))}var P=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),I=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),q=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),U=Symbol.iterator;function ie(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}var fe=Object.assign,B;function te(c){if(B===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);B=d&&d[1]||""}return`
`+B+c}var ee=!1;function ye(c,d){if(!c||ee)return"";ee=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(se){var v=se}Reflect.construct(c,[],d)}else{try{d.call()}catch(se){v=se}c.call(d.prototype)}else{try{throw Error()}catch(se){v=se}c()}}catch(se){if(se&&v&&typeof se.stack=="string"){for(var w=se.stack.split(`
`),C=v.stack.split(`
`),R=w.length-1,D=C.length-1;1<=R&&0<=D&&w[R]!==C[D];)D--;for(;1<=R&&0<=D;R--,D--)if(w[R]!==C[D]){if(R!==1||D!==1)do if(R--,D--,0>D||w[R]!==C[D]){var V=`
`+w[R].replace(" at new "," at ");return c.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",c.displayName)),V}while(1<=R&&0<=D);break}}}finally{ee=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?te(c):""}function Te(c){switch(c.tag){case 5:return te(c.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return c=ye(c.type,!1),c;case 11:return c=ye(c.type.render,!1),c;case 1:return c=ye(c.type,!0),c;default:return""}}function ne(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case _:return"Fragment";case I:return"Portal";case O:return"Profiler";case A:return"StrictMode";case G:return"Suspense";case oe:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case q:return(c.displayName||"Context")+".Consumer";case M:return(c._context.displayName||"Context")+".Provider";case z:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ke:return d=c.displayName||null,d!==null?d:ne(c.type)||"Memo";case J:d=c._payload,c=c._init;try{return ne(c(d))}catch{}}return null}function K(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(d);case 8:return d===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function ce(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function De(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Fe(c){var d=De(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),v=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,C=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return w.call(this)},set:function(R){v=""+R,C.call(this,R)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(R){v=""+R},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Xe(c){c._valueTracker||(c._valueTracker=Fe(c))}function He(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),v="";return c&&(v=De(c)?c.checked?"true":"false":c.value),c=v,c!==m?(d.setValue(c),!0):!1}function pt(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function jt(c,d){var m=d.checked;return fe({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function Kn(c,d){var m=d.defaultValue==null?"":d.defaultValue,v=d.checked!=null?d.checked:d.defaultChecked;m=ce(d.value!=null?d.value:m),c._wrapperState={initialChecked:v,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function ht(c,d){d=d.checked,d!=null&&j(c,"checked",d,!1)}function qt(c,d){ht(c,d);var m=ce(d.value),v=d.type;if(m!=null)v==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(v==="submit"||v==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Ht(c,d.type,m):d.hasOwnProperty("defaultValue")&&Ht(c,d.type,ce(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function vs(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var v=d.type;if(!(v!=="submit"&&v!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Ht(c,d,m){(d!=="number"||pt(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var F=Array.isArray;function W(c,d,m,v){if(c=c.options,d){d={};for(var w=0;w<m.length;w++)d["$"+m[w]]=!0;for(m=0;m<c.length;m++)w=d.hasOwnProperty("$"+c[m].value),c[m].selected!==w&&(c[m].selected=w),w&&v&&(c[m].defaultSelected=!0)}else{for(m=""+ce(m),d=null,w=0;w<c.length;w++){if(c[w].value===m){c[w].selected=!0,v&&(c[w].defaultSelected=!0);return}d!==null||c[w].disabled||(d=c[w])}d!==null&&(d.selected=!0)}}function re(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return fe({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Re(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(n(92));if(F(m)){if(1<m.length)throw Error(n(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:ce(m)}}function Pe(c,d){var m=ce(d.value),v=ce(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),v!=null&&(c.defaultValue=""+v)}function je(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function ze(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?ze(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var be,mt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,v,w){MSApp.execUnsafeLocalFunction(function(){return c(d,m,v,w)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(be=be||document.createElement("div"),be.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=be.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function _t(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"];Object.keys(un).forEach(function(c){sn.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),un[d]=un[c]})});function jn(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||un.hasOwnProperty(c)&&un[c]?(""+d).trim():d+"px"}function ys(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var v=m.indexOf("--")===0,w=jn(m,d[m],v);m==="float"&&(m="cssFloat"),v?c.setProperty(m,w):c[m]=w}}var pr=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jr(c,d){if(d){if(pr[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function Br(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function Mn(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var $r=null,gr=null,Er=null;function Vr(c){if(c=Id(c)){if(typeof $r!="function")throw Error(n(280));var d=c.stateNode;d&&(d=_h(d),$r(c.stateNode,c.type,d))}}function it(c){gr?Er?Er.push(c):Er=[c]:gr=c}function Qt(){if(gr){var c=gr,d=Er;if(Er=gr=null,Vr(c),d)for(c=0;c<d.length;c++)Vr(d[c])}}function hn(c,d){return c(d)}function Ut(){}var Is=!1;function an(c,d,m){if(Is)return c(d,m);Is=!0;try{return hn(c,d,m)}finally{Is=!1,(gr!==null||Er!==null)&&(Ut(),Qt())}}function yn(c,d){var m=c.stateNode;if(m===null)return null;var v=_h(m);if(v===null)return null;m=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(c=c.type,v=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!v;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(n(231,d,typeof m));return m}var Os=!1;if(l)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){Os=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{Os=!1}function Ln(c,d,m,v,w,C,R,D,V){var se=Array.prototype.slice.call(arguments,3);try{d.apply(m,se)}catch(Ne){this.onError(Ne)}}var xs=!1,ur=null,ga=!1,Di=null,me={onError:function(c){xs=!0,ur=c}};function tt(c,d,m,v,w,C,R,D,V){xs=!1,ur=null,Ln.apply(me,arguments)}function Tr(c,d,m,v,w,C,R,D,V){if(tt.apply(this,arguments),xs){if(xs){var se=ur;xs=!1,ur=null}else throw Error(n(198));ga||(ga=!0,Di=se)}}function Mi(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function Ds(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function va(c){if(Mi(c)!==c)throw Error(n(188))}function pe(c){var d=c.alternate;if(!d){if(d=Mi(c),d===null)throw Error(n(188));return d!==c?null:c}for(var m=c,v=d;;){var w=m.return;if(w===null)break;var C=w.alternate;if(C===null){if(v=w.return,v!==null){m=v;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===m)return va(w),c;if(C===v)return va(w),d;C=C.sibling}throw Error(n(188))}if(m.return!==v.return)m=w,v=C;else{for(var R=!1,D=w.child;D;){if(D===m){R=!0,m=w,v=C;break}if(D===v){R=!0,v=w,m=C;break}D=D.sibling}if(!R){for(D=C.child;D;){if(D===m){R=!0,m=C,v=w;break}if(D===v){R=!0,v=C,m=w;break}D=D.sibling}if(!R)throw Error(n(189))}}if(m.alternate!==v)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?c:d}function lt(c){return c=pe(c),c!==null?Wt(c):null}function Wt(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=Wt(c);if(d!==null)return d;c=c.sibling}return null}var qr=t.unstable_scheduleCallback,h1=t.unstable_cancelCallback,GD=t.unstable_shouldYield,ZD=t.unstable_requestPaint,En=t.unstable_now,JD=t.unstable_getCurrentPriorityLevel,Pg=t.unstable_ImmediatePriority,f1=t.unstable_UserBlockingPriority,dh=t.unstable_NormalPriority,YD=t.unstable_LowPriority,m1=t.unstable_IdlePriority,uh=null,Li=null;function QD(c){if(Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(uh,c,void 0,(c.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:t5,XD=Math.log,e5=Math.LN2;function t5(c){return c>>>=0,c===0?32:31-(XD(c)/e5|0)|0}var hh=64,fh=4194304;function pd(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function mh(c,d){var m=c.pendingLanes;if(m===0)return 0;var v=0,w=c.suspendedLanes,C=c.pingedLanes,R=m&268435455;if(R!==0){var D=R&~w;D!==0?v=pd(D):(C&=R,C!==0&&(v=pd(C)))}else R=m&~w,R!==0?v=pd(R):C!==0&&(v=pd(C));if(v===0)return 0;if(d!==0&&d!==v&&(d&w)===0&&(w=v&-v,C=d&-d,w>=C||w===16&&(C&4194240)!==0))return d;if((v&4)!==0&&(v|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=v;0<d;)m=31-ti(d),w=1<<m,v|=c[m],d&=~w;return v}function n5(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r5(c,d){for(var m=c.suspendedLanes,v=c.pingedLanes,w=c.expirationTimes,C=c.pendingLanes;0<C;){var R=31-ti(C),D=1<<R,V=w[R];V===-1?((D&m)===0||(D&v)!==0)&&(w[R]=n5(D,d)):V<=d&&(c.expiredLanes|=D),C&=~D}}function _g(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function p1(){var c=hh;return hh<<=1,(hh&4194240)===0&&(hh=64),c}function Rg(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function gd(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-ti(d),c[d]=m}function s5(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var v=c.eventTimes;for(c=c.expirationTimes;0<m;){var w=31-ti(m),C=1<<w;d[w]=0,v[w]=-1,c[w]=-1,m&=~C}}function Ag(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var v=31-ti(m),w=1<<v;w&d|c[v]&d&&(c[v]|=d),m&=~w}}var zt=0;function g1(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var v1,Ig,y1,x1,b1,Og=!1,ph=[],Za=null,Ja=null,Ya=null,vd=new Map,yd=new Map,Qa=[],i5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w1(c,d){switch(c){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":vd.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(d.pointerId)}}function xd(c,d,m,v,w,C){return c===null||c.nativeEvent!==C?(c={blockedOn:d,domEventName:m,eventSystemFlags:v,nativeEvent:C,targetContainers:[w]},d!==null&&(d=Id(d),d!==null&&Ig(d)),c):(c.eventSystemFlags|=v,d=c.targetContainers,w!==null&&d.indexOf(w)===-1&&d.push(w),c)}function a5(c,d,m,v,w){switch(d){case"focusin":return Za=xd(Za,c,d,m,v,w),!0;case"dragenter":return Ja=xd(Ja,c,d,m,v,w),!0;case"mouseover":return Ya=xd(Ya,c,d,m,v,w),!0;case"pointerover":var C=w.pointerId;return vd.set(C,xd(vd.get(C)||null,c,d,m,v,w)),!0;case"gotpointercapture":return C=w.pointerId,yd.set(C,xd(yd.get(C)||null,c,d,m,v,w)),!0}return!1}function k1(c){var d=Ho(c.target);if(d!==null){var m=Mi(d);if(m!==null){if(d=m.tag,d===13){if(d=Ds(m),d!==null){c.blockedOn=d,b1(c.priority,function(){y1(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function gh(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=Mg(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var v=new m.constructor(m.type,m);dr=v,m.target.dispatchEvent(v),dr=null}else return d=Id(m),d!==null&&Ig(d),c.blockedOn=m,!1;d.shift()}return!0}function S1(c,d,m){gh(c)&&m.delete(d)}function o5(){Og=!1,Za!==null&&gh(Za)&&(Za=null),Ja!==null&&gh(Ja)&&(Ja=null),Ya!==null&&gh(Ya)&&(Ya=null),vd.forEach(S1),yd.forEach(S1)}function bd(c,d){c.blockedOn===d&&(c.blockedOn=null,Og||(Og=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,o5)))}function wd(c){function d(w){return bd(w,c)}if(0<ph.length){bd(ph[0],c);for(var m=1;m<ph.length;m++){var v=ph[m];v.blockedOn===c&&(v.blockedOn=null)}}for(Za!==null&&bd(Za,c),Ja!==null&&bd(Ja,c),Ya!==null&&bd(Ya,c),vd.forEach(d),yd.forEach(d),m=0;m<Qa.length;m++)v=Qa[m],v.blockedOn===c&&(v.blockedOn=null);for(;0<Qa.length&&(m=Qa[0],m.blockedOn===null);)k1(m),m.blockedOn===null&&Qa.shift()}var $c=P.ReactCurrentBatchConfig,vh=!0;function c5(c,d,m,v){var w=zt,C=$c.transition;$c.transition=null;try{zt=1,Dg(c,d,m,v)}finally{zt=w,$c.transition=C}}function l5(c,d,m,v){var w=zt,C=$c.transition;$c.transition=null;try{zt=4,Dg(c,d,m,v)}finally{zt=w,$c.transition=C}}function Dg(c,d,m,v){if(vh){var w=Mg(c,d,m,v);if(w===null)Xg(c,d,v,yh,m),w1(c,v);else if(a5(w,c,d,m,v))v.stopPropagation();else if(w1(c,v),d&4&&-1<i5.indexOf(c)){for(;w!==null;){var C=Id(w);if(C!==null&&v1(C),C=Mg(c,d,m,v),C===null&&Xg(c,d,v,yh,m),C===w)break;w=C}w!==null&&v.stopPropagation()}else Xg(c,d,v,null,m)}}var yh=null;function Mg(c,d,m,v){if(yh=null,c=Mn(v),c=Ho(c),c!==null)if(d=Mi(c),d===null)c=null;else if(m=d.tag,m===13){if(c=Ds(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return yh=c,null}function C1(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JD()){case Pg:return 1;case f1:return 4;case dh:case YD:return 16;case m1:return 536870912;default:return 16}default:return 16}}var Xa=null,Lg=null,xh=null;function N1(){if(xh)return xh;var c,d=Lg,m=d.length,v,w="value"in Xa?Xa.value:Xa.textContent,C=w.length;for(c=0;c<m&&d[c]===w[c];c++);var R=m-c;for(v=1;v<=R&&d[m-v]===w[C-v];v++);return xh=w.slice(c,1<v?1-v:void 0)}function bh(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function wh(){return!0}function j1(){return!1}function bs(c){function d(m,v,w,C,R){this._reactName=m,this._targetInst=w,this.type=v,this.nativeEvent=C,this.target=R,this.currentTarget=null;for(var D in c)c.hasOwnProperty(D)&&(m=c[D],this[D]=m?m(C):C[D]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?wh:j1,this.isPropagationStopped=j1,this}return fe(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=wh)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=wh)},persist:function(){},isPersistent:wh}),d}var Vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fg=bs(Vc),kd=fe({},Vc,{view:0,detail:0}),d5=bs(kd),Ug,zg,Sd,kh=fe({},kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$g,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Sd&&(Sd&&c.type==="mousemove"?(Ug=c.screenX-Sd.screenX,zg=c.screenY-Sd.screenY):zg=Ug=0,Sd=c),Ug)},movementY:function(c){return"movementY"in c?c.movementY:zg}}),E1=bs(kh),u5=fe({},kh,{dataTransfer:0}),h5=bs(u5),f5=fe({},kd,{relatedTarget:0}),Bg=bs(f5),m5=fe({},Vc,{animationName:0,elapsedTime:0,pseudoElement:0}),p5=bs(m5),g5=fe({},Vc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),v5=bs(g5),y5=fe({},Vc,{data:0}),T1=bs(y5),x5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k5(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=w5[c])?!!d[c]:!1}function $g(){return k5}var S5=fe({},kd,{key:function(c){if(c.key){var d=x5[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=bh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?b5[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$g,charCode:function(c){return c.type==="keypress"?bh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?bh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),C5=bs(S5),N5=fe({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P1=bs(N5),j5=fe({},kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$g}),E5=bs(j5),T5=fe({},Vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),P5=bs(T5),_5=fe({},kh,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),R5=bs(_5),A5=[9,13,27,32],Vg=l&&"CompositionEvent"in window,Cd=null;l&&"documentMode"in document&&(Cd=document.documentMode);var I5=l&&"TextEvent"in window&&!Cd,_1=l&&(!Vg||Cd&&8<Cd&&11>=Cd),R1=" ",A1=!1;function I1(c,d){switch(c){case"keyup":return A5.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O1(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var qc=!1;function O5(c,d){switch(c){case"compositionend":return O1(d);case"keypress":return d.which!==32?null:(A1=!0,R1);case"textInput":return c=d.data,c===R1&&A1?null:c;default:return null}}function D5(c,d){if(qc)return c==="compositionend"||!Vg&&I1(c,d)?(c=N1(),xh=Lg=Xa=null,qc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return _1&&d.locale!=="ko"?null:d.data;default:return null}}var M5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D1(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!M5[c.type]:d==="textarea"}function M1(c,d,m,v){it(v),d=Eh(d,"onChange"),0<d.length&&(m=new Fg("onChange","change",null,m,v),c.push({event:m,listeners:d}))}var Nd=null,jd=null;function L5(c){ek(c,0)}function Sh(c){var d=Zc(c);if(He(d))return c}function F5(c,d){if(c==="change")return d}var L1=!1;if(l){var qg;if(l){var Hg="oninput"in document;if(!Hg){var F1=document.createElement("div");F1.setAttribute("oninput","return;"),Hg=typeof F1.oninput=="function"}qg=Hg}else qg=!1;L1=qg&&(!document.documentMode||9<document.documentMode)}function U1(){Nd&&(Nd.detachEvent("onpropertychange",z1),jd=Nd=null)}function z1(c){if(c.propertyName==="value"&&Sh(jd)){var d=[];M1(d,jd,c,Mn(c)),an(L5,d)}}function U5(c,d,m){c==="focusin"?(U1(),Nd=d,jd=m,Nd.attachEvent("onpropertychange",z1)):c==="focusout"&&U1()}function z5(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Sh(jd)}function B5(c,d){if(c==="click")return Sh(d)}function $5(c,d){if(c==="input"||c==="change")return Sh(d)}function V5(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var ni=typeof Object.is=="function"?Object.is:V5;function Ed(c,d){if(ni(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),v=Object.keys(d);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var w=m[v];if(!u.call(d,w)||!ni(c[w],d[w]))return!1}return!0}function B1(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function $1(c,d){var m=B1(c);c=0;for(var v;m;){if(m.nodeType===3){if(v=c+m.textContent.length,c<=d&&v>=d)return{node:m,offset:d-c};c=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=B1(m)}}function V1(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?V1(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function q1(){for(var c=window,d=pt();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=pt(c.document)}return d}function Wg(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function q5(c){var d=q1(),m=c.focusedElem,v=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&V1(m.ownerDocument.documentElement,m)){if(v!==null&&Wg(m)){if(d=v.start,c=v.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var w=m.textContent.length,C=Math.min(v.start,w);v=v.end===void 0?C:Math.min(v.end,w),!c.extend&&C>v&&(w=v,v=C,C=w),w=$1(m,C);var R=$1(m,v);w&&R&&(c.rangeCount!==1||c.anchorNode!==w.node||c.anchorOffset!==w.offset||c.focusNode!==R.node||c.focusOffset!==R.offset)&&(d=d.createRange(),d.setStart(w.node,w.offset),c.removeAllRanges(),C>v?(c.addRange(d),c.extend(R.node,R.offset)):(d.setEnd(R.node,R.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var H5=l&&"documentMode"in document&&11>=document.documentMode,Hc=null,Kg=null,Td=null,Gg=!1;function H1(c,d,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Gg||Hc==null||Hc!==pt(v)||(v=Hc,"selectionStart"in v&&Wg(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Td&&Ed(Td,v)||(Td=v,v=Eh(Kg,"onSelect"),0<v.length&&(d=new Fg("onSelect","select",null,d,m),c.push({event:d,listeners:v}),d.target=Hc)))}function Ch(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Wc={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},Zg={},W1={};l&&(W1=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function Nh(c){if(Zg[c])return Zg[c];if(!Wc[c])return c;var d=Wc[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in W1)return Zg[c]=d[m];return c}var K1=Nh("animationend"),G1=Nh("animationiteration"),Z1=Nh("animationstart"),J1=Nh("transitionend"),Y1=new Map,Q1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(c,d){Y1.set(c,d),a(d,[c])}for(var Jg=0;Jg<Q1.length;Jg++){var Yg=Q1[Jg],W5=Yg.toLowerCase(),K5=Yg[0].toUpperCase()+Yg.slice(1);eo(W5,"on"+K5)}eo(K1,"onAnimationEnd"),eo(G1,"onAnimationIteration"),eo(Z1,"onAnimationStart"),eo("dblclick","onDoubleClick"),eo("focusin","onFocus"),eo("focusout","onBlur"),eo(J1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function X1(c,d,m){var v=c.type||"unknown-event";c.currentTarget=m,Tr(v,d,void 0,c),c.currentTarget=null}function ek(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var v=c[m],w=v.event;v=v.listeners;e:{var C=void 0;if(d)for(var R=v.length-1;0<=R;R--){var D=v[R],V=D.instance,se=D.currentTarget;if(D=D.listener,V!==C&&w.isPropagationStopped())break e;X1(w,D,se),C=V}else for(R=0;R<v.length;R++){if(D=v[R],V=D.instance,se=D.currentTarget,D=D.listener,V!==C&&w.isPropagationStopped())break e;X1(w,D,se),C=V}}}if(ga)throw c=Di,ga=!1,Di=null,c}function Xt(c,d){var m=d[iv];m===void 0&&(m=d[iv]=new Set);var v=c+"__bubble";m.has(v)||(tk(d,c,2,!1),m.add(v))}function Qg(c,d,m){var v=0;d&&(v|=4),tk(m,c,v,d)}var jh="_reactListening"+Math.random().toString(36).slice(2);function _d(c){if(!c[jh]){c[jh]=!0,r.forEach(function(m){m!=="selectionchange"&&(G5.has(m)||Qg(m,!1,c),Qg(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[jh]||(d[jh]=!0,Qg("selectionchange",!1,d))}}function tk(c,d,m,v){switch(C1(d)){case 1:var w=c5;break;case 4:w=l5;break;default:w=Dg}m=w.bind(null,d,m,c),w=void 0,!Os||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(w=!0),v?w!==void 0?c.addEventListener(d,m,{capture:!0,passive:w}):c.addEventListener(d,m,!0):w!==void 0?c.addEventListener(d,m,{passive:w}):c.addEventListener(d,m,!1)}function Xg(c,d,m,v,w){var C=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var R=v.tag;if(R===3||R===4){var D=v.stateNode.containerInfo;if(D===w||D.nodeType===8&&D.parentNode===w)break;if(R===4)for(R=v.return;R!==null;){var V=R.tag;if((V===3||V===4)&&(V=R.stateNode.containerInfo,V===w||V.nodeType===8&&V.parentNode===w))return;R=R.return}for(;D!==null;){if(R=Ho(D),R===null)return;if(V=R.tag,V===5||V===6){v=C=R;continue e}D=D.parentNode}}v=v.return}an(function(){var se=C,Ne=Mn(m),Ee=[];e:{var Se=Y1.get(c);if(Se!==void 0){var Be=Fg,We=c;switch(c){case"keypress":if(bh(m)===0)break e;case"keydown":case"keyup":Be=C5;break;case"focusin":We="focus",Be=Bg;break;case"focusout":We="blur",Be=Bg;break;case"beforeblur":case"afterblur":Be=Bg;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=h5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=E5;break;case K1:case G1:case Z1:Be=p5;break;case J1:Be=P5;break;case"scroll":Be=d5;break;case"wheel":Be=R5;break;case"copy":case"cut":case"paste":Be=v5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=P1}var Je=(d&4)!==0,Tn=!Je&&c==="scroll",Z=Je?Se!==null?Se+"Capture":null:Se;Je=[];for(var H=se,X;H!==null;){X=H;var Ae=X.stateNode;if(X.tag===5&&Ae!==null&&(X=Ae,Z!==null&&(Ae=yn(H,Z),Ae!=null&&Je.push(Rd(H,Ae,X)))),Tn)break;H=H.return}0<Je.length&&(Se=new Be(Se,We,null,m,Ne),Ee.push({event:Se,listeners:Je}))}}if((d&7)===0){e:{if(Se=c==="mouseover"||c==="pointerover",Be=c==="mouseout"||c==="pointerout",Se&&m!==dr&&(We=m.relatedTarget||m.fromElement)&&(Ho(We)||We[ya]))break e;if((Be||Se)&&(Se=Ne.window===Ne?Ne:(Se=Ne.ownerDocument)?Se.defaultView||Se.parentWindow:window,Be?(We=m.relatedTarget||m.toElement,Be=se,We=We?Ho(We):null,We!==null&&(Tn=Mi(We),We!==Tn||We.tag!==5&&We.tag!==6)&&(We=null)):(Be=null,We=se),Be!==We)){if(Je=E1,Ae="onMouseLeave",Z="onMouseEnter",H="mouse",(c==="pointerout"||c==="pointerover")&&(Je=P1,Ae="onPointerLeave",Z="onPointerEnter",H="pointer"),Tn=Be==null?Se:Zc(Be),X=We==null?Se:Zc(We),Se=new Je(Ae,H+"leave",Be,m,Ne),Se.target=Tn,Se.relatedTarget=X,Ae=null,Ho(Ne)===se&&(Je=new Je(Z,H+"enter",We,m,Ne),Je.target=X,Je.relatedTarget=Tn,Ae=Je),Tn=Ae,Be&&We)t:{for(Je=Be,Z=We,H=0,X=Je;X;X=Kc(X))H++;for(X=0,Ae=Z;Ae;Ae=Kc(Ae))X++;for(;0<H-X;)Je=Kc(Je),H--;for(;0<X-H;)Z=Kc(Z),X--;for(;H--;){if(Je===Z||Z!==null&&Je===Z.alternate)break t;Je=Kc(Je),Z=Kc(Z)}Je=null}else Je=null;Be!==null&&nk(Ee,Se,Be,Je,!1),We!==null&&Tn!==null&&nk(Ee,Tn,We,Je,!0)}}e:{if(Se=se?Zc(se):window,Be=Se.nodeName&&Se.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Se.type==="file")var Qe=F5;else if(D1(Se))if(L1)Qe=$5;else{Qe=z5;var nt=U5}else(Be=Se.nodeName)&&Be.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(Qe=B5);if(Qe&&(Qe=Qe(c,se))){M1(Ee,Qe,m,Ne);break e}nt&&nt(c,Se,se),c==="focusout"&&(nt=Se._wrapperState)&&nt.controlled&&Se.type==="number"&&Ht(Se,"number",Se.value)}switch(nt=se?Zc(se):window,c){case"focusin":(D1(nt)||nt.contentEditable==="true")&&(Hc=nt,Kg=se,Td=null);break;case"focusout":Td=Kg=Hc=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,H1(Ee,m,Ne);break;case"selectionchange":if(H5)break;case"keydown":case"keyup":H1(Ee,m,Ne)}var rt;if(Vg)e:{switch(c){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else qc?I1(c,m)&&(ct="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(ct="onCompositionStart");ct&&(_1&&m.locale!=="ko"&&(qc||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&qc&&(rt=N1()):(Xa=Ne,Lg="value"in Xa?Xa.value:Xa.textContent,qc=!0)),nt=Eh(se,ct),0<nt.length&&(ct=new T1(ct,c,null,m,Ne),Ee.push({event:ct,listeners:nt}),rt?ct.data=rt:(rt=O1(m),rt!==null&&(ct.data=rt)))),(rt=I5?O5(c,m):D5(c,m))&&(se=Eh(se,"onBeforeInput"),0<se.length&&(Ne=new T1("onBeforeInput","beforeinput",null,m,Ne),Ee.push({event:Ne,listeners:se}),Ne.data=rt))}ek(Ee,d)})}function Rd(c,d,m){return{instance:c,listener:d,currentTarget:m}}function Eh(c,d){for(var m=d+"Capture",v=[];c!==null;){var w=c,C=w.stateNode;w.tag===5&&C!==null&&(w=C,C=yn(c,m),C!=null&&v.unshift(Rd(c,C,w)),C=yn(c,d),C!=null&&v.push(Rd(c,C,w))),c=c.return}return v}function Kc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function nk(c,d,m,v,w){for(var C=d._reactName,R=[];m!==null&&m!==v;){var D=m,V=D.alternate,se=D.stateNode;if(V!==null&&V===v)break;D.tag===5&&se!==null&&(D=se,w?(V=yn(m,C),V!=null&&R.unshift(Rd(m,V,D))):w||(V=yn(m,C),V!=null&&R.push(Rd(m,V,D)))),m=m.return}R.length!==0&&c.push({event:d,listeners:R})}var Z5=/\r\n?/g,J5=/\u0000|\uFFFD/g;function rk(c){return(typeof c=="string"?c:""+c).replace(Z5,`
`).replace(J5,"")}function Th(c,d,m){if(d=rk(d),rk(c)!==d&&m)throw Error(n(425))}function Ph(){}var ev=null,tv=null;function nv(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var rv=typeof setTimeout=="function"?setTimeout:void 0,Y5=typeof clearTimeout=="function"?clearTimeout:void 0,sk=typeof Promise=="function"?Promise:void 0,Q5=typeof queueMicrotask=="function"?queueMicrotask:typeof sk<"u"?function(c){return sk.resolve(null).then(c).catch(X5)}:rv;function X5(c){setTimeout(function(){throw c})}function sv(c,d){var m=d,v=0;do{var w=m.nextSibling;if(c.removeChild(m),w&&w.nodeType===8)if(m=w.data,m==="/$"){if(v===0){c.removeChild(w),wd(d);return}v--}else m!=="$"&&m!=="$?"&&m!=="$!"||v++;m=w}while(m);wd(d)}function to(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function ik(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var Gc=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Gc,Ad="__reactProps$"+Gc,ya="__reactContainer$"+Gc,iv="__reactEvents$"+Gc,e4="__reactListeners$"+Gc,t4="__reactHandles$"+Gc;function Ho(c){var d=c[Fi];if(d)return d;for(var m=c.parentNode;m;){if(d=m[ya]||m[Fi]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=ik(c);c!==null;){if(m=c[Fi])return m;c=ik(c)}return d}c=m,m=c.parentNode}return null}function Id(c){return c=c[Fi]||c[ya],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Zc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(n(33))}function _h(c){return c[Ad]||null}var av=[],Jc=-1;function no(c){return{current:c}}function en(c){0>Jc||(c.current=av[Jc],av[Jc]=null,Jc--)}function Kt(c,d){Jc++,av[Jc]=c.current,c.current=d}var ro={},vr=no(ro),Hr=no(!1),Wo=ro;function Yc(c,d){var m=c.type.contextTypes;if(!m)return ro;var v=c.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===d)return v.__reactInternalMemoizedMaskedChildContext;var w={},C;for(C in m)w[C]=d[C];return v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=w),w}function Wr(c){return c=c.childContextTypes,c!=null}function Rh(){en(Hr),en(vr)}function ak(c,d,m){if(vr.current!==ro)throw Error(n(168));Kt(vr,d),Kt(Hr,m)}function ok(c,d,m){var v=c.stateNode;if(d=d.childContextTypes,typeof v.getChildContext!="function")return m;v=v.getChildContext();for(var w in v)if(!(w in d))throw Error(n(108,K(c)||"Unknown",w));return fe({},m,v)}function Ah(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||ro,Wo=vr.current,Kt(vr,c),Kt(Hr,Hr.current),!0}function ck(c,d,m){var v=c.stateNode;if(!v)throw Error(n(169));m?(c=ok(c,d,Wo),v.__reactInternalMemoizedMergedChildContext=c,en(Hr),en(vr),Kt(vr,c)):en(Hr),Kt(Hr,m)}var xa=null,Ih=!1,ov=!1;function lk(c){xa===null?xa=[c]:xa.push(c)}function n4(c){Ih=!0,lk(c)}function so(){if(!ov&&xa!==null){ov=!0;var c=0,d=zt;try{var m=xa;for(zt=1;c<m.length;c++){var v=m[c];do v=v(!0);while(v!==null)}xa=null,Ih=!1}catch(w){throw xa!==null&&(xa=xa.slice(c+1)),qr(Pg,so),w}finally{zt=d,ov=!1}}return null}var Qc=[],Xc=0,Oh=null,Dh=0,Ms=[],Ls=0,Ko=null,ba=1,wa="";function Go(c,d){Qc[Xc++]=Dh,Qc[Xc++]=Oh,Oh=c,Dh=d}function dk(c,d,m){Ms[Ls++]=ba,Ms[Ls++]=wa,Ms[Ls++]=Ko,Ko=c;var v=ba;c=wa;var w=32-ti(v)-1;v&=~(1<<w),m+=1;var C=32-ti(d)+w;if(30<C){var R=w-w%5;C=(v&(1<<R)-1).toString(32),v>>=R,w-=R,ba=1<<32-ti(d)+w|m<<w|v,wa=C+c}else ba=1<<C|m<<w|v,wa=c}function cv(c){c.return!==null&&(Go(c,1),dk(c,1,0))}function lv(c){for(;c===Oh;)Oh=Qc[--Xc],Qc[Xc]=null,Dh=Qc[--Xc],Qc[Xc]=null;for(;c===Ko;)Ko=Ms[--Ls],Ms[Ls]=null,wa=Ms[--Ls],Ms[Ls]=null,ba=Ms[--Ls],Ms[Ls]=null}var ws=null,ks=null,on=!1,ri=null;function uk(c,d){var m=Bs(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function hk(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,ws=c,ks=to(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,ws=c,ks=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=Ko!==null?{id:ba,overflow:wa}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=Bs(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,ws=c,ks=null,!0):!1;default:return!1}}function dv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function uv(c){if(on){var d=ks;if(d){var m=d;if(!hk(c,d)){if(dv(c))throw Error(n(418));d=to(m.nextSibling);var v=ws;d&&hk(c,d)?uk(v,m):(c.flags=c.flags&-4097|2,on=!1,ws=c)}}else{if(dv(c))throw Error(n(418));c.flags=c.flags&-4097|2,on=!1,ws=c}}}function fk(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ws=c}function Mh(c){if(c!==ws)return!1;if(!on)return fk(c),on=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!nv(c.type,c.memoizedProps)),d&&(d=ks)){if(dv(c))throw mk(),Error(n(418));for(;d;)uk(c,d),d=to(d.nextSibling)}if(fk(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){ks=to(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}ks=null}}else ks=ws?to(c.stateNode.nextSibling):null;return!0}function mk(){for(var c=ks;c;)c=to(c.nextSibling)}function el(){ks=ws=null,on=!1}function hv(c){ri===null?ri=[c]:ri.push(c)}var r4=P.ReactCurrentBatchConfig;function Od(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var v=m.stateNode}if(!v)throw Error(n(147,c));var w=v,C=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===C?d.ref:(d=function(R){var D=w.refs;R===null?delete D[C]:D[C]=R},d._stringRef=C,d)}if(typeof c!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,c))}return c}function Lh(c,d){throw c=Object.prototype.toString.call(d),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function pk(c){var d=c._init;return d(c._payload)}function gk(c){function d(Z,H){if(c){var X=Z.deletions;X===null?(Z.deletions=[H],Z.flags|=16):X.push(H)}}function m(Z,H){if(!c)return null;for(;H!==null;)d(Z,H),H=H.sibling;return null}function v(Z,H){for(Z=new Map;H!==null;)H.key!==null?Z.set(H.key,H):Z.set(H.index,H),H=H.sibling;return Z}function w(Z,H){return Z=fo(Z,H),Z.index=0,Z.sibling=null,Z}function C(Z,H,X){return Z.index=X,c?(X=Z.alternate,X!==null?(X=X.index,X<H?(Z.flags|=2,H):X):(Z.flags|=2,H)):(Z.flags|=1048576,H)}function R(Z){return c&&Z.alternate===null&&(Z.flags|=2),Z}function D(Z,H,X,Ae){return H===null||H.tag!==6?(H=ry(X,Z.mode,Ae),H.return=Z,H):(H=w(H,X),H.return=Z,H)}function V(Z,H,X,Ae){var Qe=X.type;return Qe===_?Ne(Z,H,X.props.children,Ae,X.key):H!==null&&(H.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===J&&pk(Qe)===H.type)?(Ae=w(H,X.props),Ae.ref=Od(Z,H,X),Ae.return=Z,Ae):(Ae=cf(X.type,X.key,X.props,null,Z.mode,Ae),Ae.ref=Od(Z,H,X),Ae.return=Z,Ae)}function se(Z,H,X,Ae){return H===null||H.tag!==4||H.stateNode.containerInfo!==X.containerInfo||H.stateNode.implementation!==X.implementation?(H=sy(X,Z.mode,Ae),H.return=Z,H):(H=w(H,X.children||[]),H.return=Z,H)}function Ne(Z,H,X,Ae,Qe){return H===null||H.tag!==7?(H=nc(X,Z.mode,Ae,Qe),H.return=Z,H):(H=w(H,X),H.return=Z,H)}function Ee(Z,H,X){if(typeof H=="string"&&H!==""||typeof H=="number")return H=ry(""+H,Z.mode,X),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return X=cf(H.type,H.key,H.props,null,Z.mode,X),X.ref=Od(Z,null,H),X.return=Z,X;case I:return H=sy(H,Z.mode,X),H.return=Z,H;case J:var Ae=H._init;return Ee(Z,Ae(H._payload),X)}if(F(H)||ie(H))return H=nc(H,Z.mode,X,null),H.return=Z,H;Lh(Z,H)}return null}function Se(Z,H,X,Ae){var Qe=H!==null?H.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Qe!==null?null:D(Z,H,""+X,Ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case T:return X.key===Qe?V(Z,H,X,Ae):null;case I:return X.key===Qe?se(Z,H,X,Ae):null;case J:return Qe=X._init,Se(Z,H,Qe(X._payload),Ae)}if(F(X)||ie(X))return Qe!==null?null:Ne(Z,H,X,Ae,null);Lh(Z,X)}return null}function Be(Z,H,X,Ae,Qe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Z=Z.get(X)||null,D(H,Z,""+Ae,Qe);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case T:return Z=Z.get(Ae.key===null?X:Ae.key)||null,V(H,Z,Ae,Qe);case I:return Z=Z.get(Ae.key===null?X:Ae.key)||null,se(H,Z,Ae,Qe);case J:var nt=Ae._init;return Be(Z,H,X,nt(Ae._payload),Qe)}if(F(Ae)||ie(Ae))return Z=Z.get(X)||null,Ne(H,Z,Ae,Qe,null);Lh(H,Ae)}return null}function We(Z,H,X,Ae){for(var Qe=null,nt=null,rt=H,ct=H=0,sr=null;rt!==null&&ct<X.length;ct++){rt.index>ct?(sr=rt,rt=null):sr=rt.sibling;var Dt=Se(Z,rt,X[ct],Ae);if(Dt===null){rt===null&&(rt=sr);break}c&&rt&&Dt.alternate===null&&d(Z,rt),H=C(Dt,H,ct),nt===null?Qe=Dt:nt.sibling=Dt,nt=Dt,rt=sr}if(ct===X.length)return m(Z,rt),on&&Go(Z,ct),Qe;if(rt===null){for(;ct<X.length;ct++)rt=Ee(Z,X[ct],Ae),rt!==null&&(H=C(rt,H,ct),nt===null?Qe=rt:nt.sibling=rt,nt=rt);return on&&Go(Z,ct),Qe}for(rt=v(Z,rt);ct<X.length;ct++)sr=Be(rt,Z,ct,X[ct],Ae),sr!==null&&(c&&sr.alternate!==null&&rt.delete(sr.key===null?ct:sr.key),H=C(sr,H,ct),nt===null?Qe=sr:nt.sibling=sr,nt=sr);return c&&rt.forEach(function(mo){return d(Z,mo)}),on&&Go(Z,ct),Qe}function Je(Z,H,X,Ae){var Qe=ie(X);if(typeof Qe!="function")throw Error(n(150));if(X=Qe.call(X),X==null)throw Error(n(151));for(var nt=Qe=null,rt=H,ct=H=0,sr=null,Dt=X.next();rt!==null&&!Dt.done;ct++,Dt=X.next()){rt.index>ct?(sr=rt,rt=null):sr=rt.sibling;var mo=Se(Z,rt,Dt.value,Ae);if(mo===null){rt===null&&(rt=sr);break}c&&rt&&mo.alternate===null&&d(Z,rt),H=C(mo,H,ct),nt===null?Qe=mo:nt.sibling=mo,nt=mo,rt=sr}if(Dt.done)return m(Z,rt),on&&Go(Z,ct),Qe;if(rt===null){for(;!Dt.done;ct++,Dt=X.next())Dt=Ee(Z,Dt.value,Ae),Dt!==null&&(H=C(Dt,H,ct),nt===null?Qe=Dt:nt.sibling=Dt,nt=Dt);return on&&Go(Z,ct),Qe}for(rt=v(Z,rt);!Dt.done;ct++,Dt=X.next())Dt=Be(rt,Z,ct,Dt.value,Ae),Dt!==null&&(c&&Dt.alternate!==null&&rt.delete(Dt.key===null?ct:Dt.key),H=C(Dt,H,ct),nt===null?Qe=Dt:nt.sibling=Dt,nt=Dt);return c&&rt.forEach(function(M4){return d(Z,M4)}),on&&Go(Z,ct),Qe}function Tn(Z,H,X,Ae){if(typeof X=="object"&&X!==null&&X.type===_&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case T:e:{for(var Qe=X.key,nt=H;nt!==null;){if(nt.key===Qe){if(Qe=X.type,Qe===_){if(nt.tag===7){m(Z,nt.sibling),H=w(nt,X.props.children),H.return=Z,Z=H;break e}}else if(nt.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===J&&pk(Qe)===nt.type){m(Z,nt.sibling),H=w(nt,X.props),H.ref=Od(Z,nt,X),H.return=Z,Z=H;break e}m(Z,nt);break}else d(Z,nt);nt=nt.sibling}X.type===_?(H=nc(X.props.children,Z.mode,Ae,X.key),H.return=Z,Z=H):(Ae=cf(X.type,X.key,X.props,null,Z.mode,Ae),Ae.ref=Od(Z,H,X),Ae.return=Z,Z=Ae)}return R(Z);case I:e:{for(nt=X.key;H!==null;){if(H.key===nt)if(H.tag===4&&H.stateNode.containerInfo===X.containerInfo&&H.stateNode.implementation===X.implementation){m(Z,H.sibling),H=w(H,X.children||[]),H.return=Z,Z=H;break e}else{m(Z,H);break}else d(Z,H);H=H.sibling}H=sy(X,Z.mode,Ae),H.return=Z,Z=H}return R(Z);case J:return nt=X._init,Tn(Z,H,nt(X._payload),Ae)}if(F(X))return We(Z,H,X,Ae);if(ie(X))return Je(Z,H,X,Ae);Lh(Z,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,H!==null&&H.tag===6?(m(Z,H.sibling),H=w(H,X),H.return=Z,Z=H):(m(Z,H),H=ry(X,Z.mode,Ae),H.return=Z,Z=H),R(Z)):m(Z,H)}return Tn}var tl=gk(!0),vk=gk(!1),Fh=no(null),Uh=null,nl=null,fv=null;function mv(){fv=nl=Uh=null}function pv(c){var d=Fh.current;en(Fh),c._currentValue=d}function gv(c,d,m){for(;c!==null;){var v=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),c===m)break;c=c.return}}function rl(c,d){Uh=c,fv=nl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(Kr=!0),c.firstContext=null)}function Fs(c){var d=c._currentValue;if(fv!==c)if(c={context:c,memoizedValue:d,next:null},nl===null){if(Uh===null)throw Error(n(308));nl=c,Uh.dependencies={lanes:0,firstContext:c}}else nl=nl.next=c;return d}var Zo=null;function vv(c){Zo===null?Zo=[c]:Zo.push(c)}function yk(c,d,m,v){var w=d.interleaved;return w===null?(m.next=m,vv(d)):(m.next=w.next,w.next=m),d.interleaved=m,ka(c,v)}function ka(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var io=!1;function yv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Sa(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function ao(c,d,m){var v=c.updateQueue;if(v===null)return null;if(v=v.shared,(At&2)!==0){var w=v.pending;return w===null?d.next=d:(d.next=w.next,w.next=d),v.pending=d,ka(c,m)}return w=v.interleaved,w===null?(d.next=d,vv(v)):(d.next=w.next,w.next=d),v.interleaved=d,ka(c,m)}function zh(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var v=d.lanes;v&=c.pendingLanes,m|=v,d.lanes=m,Ag(c,m)}}function bk(c,d){var m=c.updateQueue,v=c.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var w=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var R={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};C===null?w=C=R:C=C.next=R,m=m.next}while(m!==null);C===null?w=C=d:C=C.next=d}else w=C=d;m={baseState:v.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:v.shared,effects:v.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function Bh(c,d,m,v){var w=c.updateQueue;io=!1;var C=w.firstBaseUpdate,R=w.lastBaseUpdate,D=w.shared.pending;if(D!==null){w.shared.pending=null;var V=D,se=V.next;V.next=null,R===null?C=se:R.next=se,R=V;var Ne=c.alternate;Ne!==null&&(Ne=Ne.updateQueue,D=Ne.lastBaseUpdate,D!==R&&(D===null?Ne.firstBaseUpdate=se:D.next=se,Ne.lastBaseUpdate=V))}if(C!==null){var Ee=w.baseState;R=0,Ne=se=V=null,D=C;do{var Se=D.lane,Be=D.eventTime;if((v&Se)===Se){Ne!==null&&(Ne=Ne.next={eventTime:Be,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var We=c,Je=D;switch(Se=d,Be=m,Je.tag){case 1:if(We=Je.payload,typeof We=="function"){Ee=We.call(Be,Ee,Se);break e}Ee=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Je.payload,Se=typeof We=="function"?We.call(Be,Ee,Se):We,Se==null)break e;Ee=fe({},Ee,Se);break e;case 2:io=!0}}D.callback!==null&&D.lane!==0&&(c.flags|=64,Se=w.effects,Se===null?w.effects=[D]:Se.push(D))}else Be={eventTime:Be,lane:Se,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Ne===null?(se=Ne=Be,V=Ee):Ne=Ne.next=Be,R|=Se;if(D=D.next,D===null){if(D=w.shared.pending,D===null)break;Se=D,D=Se.next,Se.next=null,w.lastBaseUpdate=Se,w.shared.pending=null}}while(!0);if(Ne===null&&(V=Ee),w.baseState=V,w.firstBaseUpdate=se,w.lastBaseUpdate=Ne,d=w.shared.interleaved,d!==null){w=d;do R|=w.lane,w=w.next;while(w!==d)}else C===null&&(w.shared.lanes=0);Qo|=R,c.lanes=R,c.memoizedState=Ee}}function wk(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var v=c[d],w=v.callback;if(w!==null){if(v.callback=null,v=m,typeof w!="function")throw Error(n(191,w));w.call(v)}}}var Dd={},Ui=no(Dd),Md=no(Dd),Ld=no(Dd);function Jo(c){if(c===Dd)throw Error(n(174));return c}function xv(c,d){switch(Kt(Ld,d),Kt(Md,c),Kt(Ui,Dd),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:dt(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=dt(d,c)}en(Ui),Kt(Ui,d)}function sl(){en(Ui),en(Md),en(Ld)}function kk(c){Jo(Ld.current);var d=Jo(Ui.current),m=dt(d,c.type);d!==m&&(Kt(Md,c),Kt(Ui,m))}function bv(c){Md.current===c&&(en(Ui),en(Md))}var mn=no(0);function $h(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var wv=[];function kv(){for(var c=0;c<wv.length;c++)wv[c]._workInProgressVersionPrimary=null;wv.length=0}var Vh=P.ReactCurrentDispatcher,Sv=P.ReactCurrentBatchConfig,Yo=0,pn=null,Gn=null,nr=null,qh=!1,Fd=!1,Ud=0,s4=0;function yr(){throw Error(n(321))}function Cv(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!ni(c[m],d[m]))return!1;return!0}function Nv(c,d,m,v,w,C){if(Yo=C,pn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Vh.current=c===null||c.memoizedState===null?c4:l4,c=m(v,w),Fd){C=0;do{if(Fd=!1,Ud=0,25<=C)throw Error(n(301));C+=1,nr=Gn=null,d.updateQueue=null,Vh.current=d4,c=m(v,w)}while(Fd)}if(Vh.current=Kh,d=Gn!==null&&Gn.next!==null,Yo=0,nr=Gn=pn=null,qh=!1,d)throw Error(n(300));return c}function jv(){var c=Ud!==0;return Ud=0,c}function zi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?pn.memoizedState=nr=c:nr=nr.next=c,nr}function Us(){if(Gn===null){var c=pn.alternate;c=c!==null?c.memoizedState:null}else c=Gn.next;var d=nr===null?pn.memoizedState:nr.next;if(d!==null)nr=d,Gn=c;else{if(c===null)throw Error(n(310));Gn=c,c={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},nr===null?pn.memoizedState=nr=c:nr=nr.next=c}return nr}function zd(c,d){return typeof d=="function"?d(c):d}function Ev(c){var d=Us(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var v=Gn,w=v.baseQueue,C=m.pending;if(C!==null){if(w!==null){var R=w.next;w.next=C.next,C.next=R}v.baseQueue=w=C,m.pending=null}if(w!==null){C=w.next,v=v.baseState;var D=R=null,V=null,se=C;do{var Ne=se.lane;if((Yo&Ne)===Ne)V!==null&&(V=V.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),v=se.hasEagerState?se.eagerState:c(v,se.action);else{var Ee={lane:Ne,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};V===null?(D=V=Ee,R=v):V=V.next=Ee,pn.lanes|=Ne,Qo|=Ne}se=se.next}while(se!==null&&se!==C);V===null?R=v:V.next=D,ni(v,d.memoizedState)||(Kr=!0),d.memoizedState=v,d.baseState=R,d.baseQueue=V,m.lastRenderedState=v}if(c=m.interleaved,c!==null){w=c;do C=w.lane,pn.lanes|=C,Qo|=C,w=w.next;while(w!==c)}else w===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Tv(c){var d=Us(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var v=m.dispatch,w=m.pending,C=d.memoizedState;if(w!==null){m.pending=null;var R=w=w.next;do C=c(C,R.action),R=R.next;while(R!==w);ni(C,d.memoizedState)||(Kr=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),m.lastRenderedState=C}return[C,v]}function Sk(){}function Ck(c,d){var m=pn,v=Us(),w=d(),C=!ni(v.memoizedState,w);if(C&&(v.memoizedState=w,Kr=!0),v=v.queue,Pv(Ek.bind(null,m,v,c),[c]),v.getSnapshot!==d||C||nr!==null&&nr.memoizedState.tag&1){if(m.flags|=2048,Bd(9,jk.bind(null,m,v,w,d),void 0,null),rr===null)throw Error(n(349));(Yo&30)!==0||Nk(m,d,w)}return w}function Nk(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=pn.updateQueue,d===null?(d={lastEffect:null,stores:null},pn.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function jk(c,d,m,v){d.value=m,d.getSnapshot=v,Tk(d)&&Pk(c)}function Ek(c,d,m){return m(function(){Tk(d)&&Pk(c)})}function Tk(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!ni(c,m)}catch{return!0}}function Pk(c){var d=ka(c,1);d!==null&&oi(d,c,1,-1)}function _k(c){var d=zi();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:c},d.queue=c,c=c.dispatch=o4.bind(null,pn,c),[d.memoizedState,c]}function Bd(c,d,m,v){return c={tag:c,create:d,destroy:m,deps:v,next:null},d=pn.updateQueue,d===null?(d={lastEffect:null,stores:null},pn.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(v=m.next,m.next=c,c.next=v,d.lastEffect=c)),c}function Rk(){return Us().memoizedState}function Hh(c,d,m,v){var w=zi();pn.flags|=c,w.memoizedState=Bd(1|d,m,void 0,v===void 0?null:v)}function Wh(c,d,m,v){var w=Us();v=v===void 0?null:v;var C=void 0;if(Gn!==null){var R=Gn.memoizedState;if(C=R.destroy,v!==null&&Cv(v,R.deps)){w.memoizedState=Bd(d,m,C,v);return}}pn.flags|=c,w.memoizedState=Bd(1|d,m,C,v)}function Ak(c,d){return Hh(8390656,8,c,d)}function Pv(c,d){return Wh(2048,8,c,d)}function Ik(c,d){return Wh(4,2,c,d)}function Ok(c,d){return Wh(4,4,c,d)}function Dk(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function Mk(c,d,m){return m=m!=null?m.concat([c]):null,Wh(4,4,Dk.bind(null,d,c),m)}function _v(){}function Lk(c,d){var m=Us();d=d===void 0?null:d;var v=m.memoizedState;return v!==null&&d!==null&&Cv(d,v[1])?v[0]:(m.memoizedState=[c,d],c)}function Fk(c,d){var m=Us();d=d===void 0?null:d;var v=m.memoizedState;return v!==null&&d!==null&&Cv(d,v[1])?v[0]:(c=c(),m.memoizedState=[c,d],c)}function Uk(c,d,m){return(Yo&21)===0?(c.baseState&&(c.baseState=!1,Kr=!0),c.memoizedState=m):(ni(m,d)||(m=p1(),pn.lanes|=m,Qo|=m,c.baseState=!0),d)}function i4(c,d){var m=zt;zt=m!==0&&4>m?m:4,c(!0);var v=Sv.transition;Sv.transition={};try{c(!1),d()}finally{zt=m,Sv.transition=v}}function zk(){return Us().memoizedState}function a4(c,d,m){var v=uo(c);if(m={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null},Bk(c))$k(d,m);else if(m=yk(c,d,m,v),m!==null){var w=_r();oi(m,c,v,w),Vk(m,d,v)}}function o4(c,d,m){var v=uo(c),w={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null};if(Bk(c))$k(d,w);else{var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var R=d.lastRenderedState,D=C(R,m);if(w.hasEagerState=!0,w.eagerState=D,ni(D,R)){var V=d.interleaved;V===null?(w.next=w,vv(d)):(w.next=V.next,V.next=w),d.interleaved=w;return}}catch{}finally{}m=yk(c,d,w,v),m!==null&&(w=_r(),oi(m,c,v,w),Vk(m,d,v))}}function Bk(c){var d=c.alternate;return c===pn||d!==null&&d===pn}function $k(c,d){Fd=qh=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function Vk(c,d,m){if((m&4194240)!==0){var v=d.lanes;v&=c.pendingLanes,m|=v,d.lanes=m,Ag(c,m)}}var Kh={readContext:Fs,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},c4={readContext:Fs,useCallback:function(c,d){return zi().memoizedState=[c,d===void 0?null:d],c},useContext:Fs,useEffect:Ak,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,Hh(4194308,4,Dk.bind(null,d,c),m)},useLayoutEffect:function(c,d){return Hh(4194308,4,c,d)},useInsertionEffect:function(c,d){return Hh(4,2,c,d)},useMemo:function(c,d){var m=zi();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var v=zi();return d=m!==void 0?m(d):d,v.memoizedState=v.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},v.queue=c,c=c.dispatch=a4.bind(null,pn,c),[v.memoizedState,c]},useRef:function(c){var d=zi();return c={current:c},d.memoizedState=c},useState:_k,useDebugValue:_v,useDeferredValue:function(c){return zi().memoizedState=c},useTransition:function(){var c=_k(!1),d=c[0];return c=i4.bind(null,c[1]),zi().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var v=pn,w=zi();if(on){if(m===void 0)throw Error(n(407));m=m()}else{if(m=d(),rr===null)throw Error(n(349));(Yo&30)!==0||Nk(v,d,m)}w.memoizedState=m;var C={value:m,getSnapshot:d};return w.queue=C,Ak(Ek.bind(null,v,C,c),[c]),v.flags|=2048,Bd(9,jk.bind(null,v,C,m,d),void 0,null),m},useId:function(){var c=zi(),d=rr.identifierPrefix;if(on){var m=wa,v=ba;m=(v&~(1<<32-ti(v)-1)).toString(32)+m,d=":"+d+"R"+m,m=Ud++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=s4++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},l4={readContext:Fs,useCallback:Lk,useContext:Fs,useEffect:Pv,useImperativeHandle:Mk,useInsertionEffect:Ik,useLayoutEffect:Ok,useMemo:Fk,useReducer:Ev,useRef:Rk,useState:function(){return Ev(zd)},useDebugValue:_v,useDeferredValue:function(c){var d=Us();return Uk(d,Gn.memoizedState,c)},useTransition:function(){var c=Ev(zd)[0],d=Us().memoizedState;return[c,d]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:zk,unstable_isNewReconciler:!1},d4={readContext:Fs,useCallback:Lk,useContext:Fs,useEffect:Pv,useImperativeHandle:Mk,useInsertionEffect:Ik,useLayoutEffect:Ok,useMemo:Fk,useReducer:Tv,useRef:Rk,useState:function(){return Tv(zd)},useDebugValue:_v,useDeferredValue:function(c){var d=Us();return Gn===null?d.memoizedState=c:Uk(d,Gn.memoizedState,c)},useTransition:function(){var c=Tv(zd)[0],d=Us().memoizedState;return[c,d]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:zk,unstable_isNewReconciler:!1};function si(c,d){if(c&&c.defaultProps){d=fe({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function Rv(c,d,m,v){d=c.memoizedState,m=m(v,d),m=m==null?d:fe({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var Gh={isMounted:function(c){return(c=c._reactInternals)?Mi(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var v=_r(),w=uo(c),C=Sa(v,w);C.payload=d,m!=null&&(C.callback=m),d=ao(c,C,w),d!==null&&(oi(d,c,w,v),zh(d,c,w))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var v=_r(),w=uo(c),C=Sa(v,w);C.tag=1,C.payload=d,m!=null&&(C.callback=m),d=ao(c,C,w),d!==null&&(oi(d,c,w,v),zh(d,c,w))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=_r(),v=uo(c),w=Sa(m,v);w.tag=2,d!=null&&(w.callback=d),d=ao(c,w,v),d!==null&&(oi(d,c,v,m),zh(d,c,v))}};function qk(c,d,m,v,w,C,R){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(v,C,R):d.prototype&&d.prototype.isPureReactComponent?!Ed(m,v)||!Ed(w,C):!0}function Hk(c,d,m){var v=!1,w=ro,C=d.contextType;return typeof C=="object"&&C!==null?C=Fs(C):(w=Wr(d)?Wo:vr.current,v=d.contextTypes,C=(v=v!=null)?Yc(c,w):ro),d=new d(m,C),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gh,c.stateNode=d,d._reactInternals=c,v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=w,c.__reactInternalMemoizedMaskedChildContext=C),d}function Wk(c,d,m,v){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,v),d.state!==c&&Gh.enqueueReplaceState(d,d.state,null)}function Av(c,d,m,v){var w=c.stateNode;w.props=m,w.state=c.memoizedState,w.refs={},yv(c);var C=d.contextType;typeof C=="object"&&C!==null?w.context=Fs(C):(C=Wr(d)?Wo:vr.current,w.context=Yc(c,C)),w.state=c.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(Rv(c,d,C,m),w.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(d=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),d!==w.state&&Gh.enqueueReplaceState(w,w.state,null),Bh(c,m,w,v),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308)}function il(c,d){try{var m="",v=d;do m+=Te(v),v=v.return;while(v);var w=m}catch(C){w=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:d,stack:w,digest:null}}function Iv(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function Ov(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var u4=typeof WeakMap=="function"?WeakMap:Map;function Kk(c,d,m){m=Sa(-1,m),m.tag=3,m.payload={element:null};var v=d.value;return m.callback=function(){tf||(tf=!0,Zv=v),Ov(c,d)},m}function Gk(c,d,m){m=Sa(-1,m),m.tag=3;var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;m.payload=function(){return v(w)},m.callback=function(){Ov(c,d)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(m.callback=function(){Ov(c,d),typeof v!="function"&&(co===null?co=new Set([this]):co.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})}),m}function Zk(c,d,m){var v=c.pingCache;if(v===null){v=c.pingCache=new u4;var w=new Set;v.set(d,w)}else w=v.get(d),w===void 0&&(w=new Set,v.set(d,w));w.has(m)||(w.add(m),c=N4.bind(null,c,d,m),d.then(c,c))}function Jk(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function Yk(c,d,m,v,w){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=Sa(-1,1),d.tag=2,ao(m,d,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=w,c)}var h4=P.ReactCurrentOwner,Kr=!1;function Pr(c,d,m,v){d.child=c===null?vk(d,null,m,v):tl(d,c.child,m,v)}function Qk(c,d,m,v,w){m=m.render;var C=d.ref;return rl(d,w),v=Nv(c,d,m,v,C,w),m=jv(),c!==null&&!Kr?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~w,Ca(c,d,w)):(on&&m&&cv(d),d.flags|=1,Pr(c,d,v,w),d.child)}function Xk(c,d,m,v,w){if(c===null){var C=m.type;return typeof C=="function"&&!ny(C)&&C.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=C,eS(c,d,C,v,w)):(c=cf(m.type,null,v,d,d.mode,w),c.ref=d.ref,c.return=d,d.child=c)}if(C=c.child,(c.lanes&w)===0){var R=C.memoizedProps;if(m=m.compare,m=m!==null?m:Ed,m(R,v)&&c.ref===d.ref)return Ca(c,d,w)}return d.flags|=1,c=fo(C,v),c.ref=d.ref,c.return=d,d.child=c}function eS(c,d,m,v,w){if(c!==null){var C=c.memoizedProps;if(Ed(C,v)&&c.ref===d.ref)if(Kr=!1,d.pendingProps=v=C,(c.lanes&w)!==0)(c.flags&131072)!==0&&(Kr=!0);else return d.lanes=c.lanes,Ca(c,d,w)}return Dv(c,d,m,v,w)}function tS(c,d,m){var v=d.pendingProps,w=v.children,C=c!==null?c.memoizedState:null;if(v.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(ol,Ss),Ss|=m;else{if((m&1073741824)===0)return c=C!==null?C.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Kt(ol,Ss),Ss|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=C!==null?C.baseLanes:m,Kt(ol,Ss),Ss|=v}else C!==null?(v=C.baseLanes|m,d.memoizedState=null):v=m,Kt(ol,Ss),Ss|=v;return Pr(c,d,w,m),d.child}function nS(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Dv(c,d,m,v,w){var C=Wr(m)?Wo:vr.current;return C=Yc(d,C),rl(d,w),m=Nv(c,d,m,v,C,w),v=jv(),c!==null&&!Kr?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~w,Ca(c,d,w)):(on&&v&&cv(d),d.flags|=1,Pr(c,d,m,w),d.child)}function rS(c,d,m,v,w){if(Wr(m)){var C=!0;Ah(d)}else C=!1;if(rl(d,w),d.stateNode===null)Jh(c,d),Hk(d,m,v),Av(d,m,v,w),v=!0;else if(c===null){var R=d.stateNode,D=d.memoizedProps;R.props=D;var V=R.context,se=m.contextType;typeof se=="object"&&se!==null?se=Fs(se):(se=Wr(m)?Wo:vr.current,se=Yc(d,se));var Ne=m.getDerivedStateFromProps,Ee=typeof Ne=="function"||typeof R.getSnapshotBeforeUpdate=="function";Ee||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(D!==v||V!==se)&&Wk(d,R,v,se),io=!1;var Se=d.memoizedState;R.state=Se,Bh(d,v,R,w),V=d.memoizedState,D!==v||Se!==V||Hr.current||io?(typeof Ne=="function"&&(Rv(d,m,Ne,v),V=d.memoizedState),(D=io||qk(d,m,D,v,Se,V,se))?(Ee||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(d.flags|=4194308)):(typeof R.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=V),R.props=v,R.state=V,R.context=se,v=D):(typeof R.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{R=d.stateNode,xk(c,d),D=d.memoizedProps,se=d.type===d.elementType?D:si(d.type,D),R.props=se,Ee=d.pendingProps,Se=R.context,V=m.contextType,typeof V=="object"&&V!==null?V=Fs(V):(V=Wr(m)?Wo:vr.current,V=Yc(d,V));var Be=m.getDerivedStateFromProps;(Ne=typeof Be=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(D!==Ee||Se!==V)&&Wk(d,R,v,V),io=!1,Se=d.memoizedState,R.state=Se,Bh(d,v,R,w);var We=d.memoizedState;D!==Ee||Se!==We||Hr.current||io?(typeof Be=="function"&&(Rv(d,m,Be,v),We=d.memoizedState),(se=io||qk(d,m,se,v,Se,We,V)||!1)?(Ne||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(v,We,V),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(v,We,V)),typeof R.componentDidUpdate=="function"&&(d.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof R.componentDidUpdate!="function"||D===c.memoizedProps&&Se===c.memoizedState||(d.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&Se===c.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=We),R.props=v,R.state=We,R.context=V,v=se):(typeof R.componentDidUpdate!="function"||D===c.memoizedProps&&Se===c.memoizedState||(d.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||D===c.memoizedProps&&Se===c.memoizedState||(d.flags|=1024),v=!1)}return Mv(c,d,m,v,C,w)}function Mv(c,d,m,v,w,C){nS(c,d);var R=(d.flags&128)!==0;if(!v&&!R)return w&&ck(d,m,!1),Ca(c,d,C);v=d.stateNode,h4.current=d;var D=R&&typeof m.getDerivedStateFromError!="function"?null:v.render();return d.flags|=1,c!==null&&R?(d.child=tl(d,c.child,null,C),d.child=tl(d,null,D,C)):Pr(c,d,D,C),d.memoizedState=v.state,w&&ck(d,m,!0),d.child}function sS(c){var d=c.stateNode;d.pendingContext?ak(c,d.pendingContext,d.pendingContext!==d.context):d.context&&ak(c,d.context,!1),xv(c,d.containerInfo)}function iS(c,d,m,v,w){return el(),hv(w),d.flags|=256,Pr(c,d,m,v),d.child}var Lv={dehydrated:null,treeContext:null,retryLane:0};function Fv(c){return{baseLanes:c,cachePool:null,transitions:null}}function aS(c,d,m){var v=d.pendingProps,w=mn.current,C=!1,R=(d.flags&128)!==0,D;if((D=R)||(D=c!==null&&c.memoizedState===null?!1:(w&2)!==0),D?(C=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(w|=1),Kt(mn,w&1),c===null)return uv(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(R=v.children,c=v.fallback,C?(v=d.mode,C=d.child,R={mode:"hidden",children:R},(v&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=R):C=lf(R,v,0,null),c=nc(c,v,m,null),C.return=d,c.return=d,C.sibling=c,d.child=C,d.child.memoizedState=Fv(m),d.memoizedState=Lv,c):Uv(d,R));if(w=c.memoizedState,w!==null&&(D=w.dehydrated,D!==null))return f4(c,d,R,v,D,w,m);if(C){C=v.fallback,R=d.mode,w=c.child,D=w.sibling;var V={mode:"hidden",children:v.children};return(R&1)===0&&d.child!==w?(v=d.child,v.childLanes=0,v.pendingProps=V,d.deletions=null):(v=fo(w,V),v.subtreeFlags=w.subtreeFlags&14680064),D!==null?C=fo(D,C):(C=nc(C,R,m,null),C.flags|=2),C.return=d,v.return=d,v.sibling=C,d.child=v,v=C,C=d.child,R=c.child.memoizedState,R=R===null?Fv(m):{baseLanes:R.baseLanes|m,cachePool:null,transitions:R.transitions},C.memoizedState=R,C.childLanes=c.childLanes&~m,d.memoizedState=Lv,v}return C=c.child,c=C.sibling,v=fo(C,{mode:"visible",children:v.children}),(d.mode&1)===0&&(v.lanes=m),v.return=d,v.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=v,d.memoizedState=null,v}function Uv(c,d){return d=lf({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function Zh(c,d,m,v){return v!==null&&hv(v),tl(d,c.child,null,m),c=Uv(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function f4(c,d,m,v,w,C,R){if(m)return d.flags&256?(d.flags&=-257,v=Iv(Error(n(422))),Zh(c,d,R,v)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(C=v.fallback,w=d.mode,v=lf({mode:"visible",children:v.children},w,0,null),C=nc(C,w,R,null),C.flags|=2,v.return=d,C.return=d,v.sibling=C,d.child=v,(d.mode&1)!==0&&tl(d,c.child,null,R),d.child.memoizedState=Fv(R),d.memoizedState=Lv,C);if((d.mode&1)===0)return Zh(c,d,R,null);if(w.data==="$!"){if(v=w.nextSibling&&w.nextSibling.dataset,v)var D=v.dgst;return v=D,C=Error(n(419)),v=Iv(C,v,void 0),Zh(c,d,R,v)}if(D=(R&c.childLanes)!==0,Kr||D){if(v=rr,v!==null){switch(R&-R){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(v.suspendedLanes|R))!==0?0:w,w!==0&&w!==C.retryLane&&(C.retryLane=w,ka(c,w),oi(v,c,w,-1))}return ty(),v=Iv(Error(n(421))),Zh(c,d,R,v)}return w.data==="$?"?(d.flags|=128,d.child=c.child,d=j4.bind(null,c),w._reactRetry=d,null):(c=C.treeContext,ks=to(w.nextSibling),ws=d,on=!0,ri=null,c!==null&&(Ms[Ls++]=ba,Ms[Ls++]=wa,Ms[Ls++]=Ko,ba=c.id,wa=c.overflow,Ko=d),d=Uv(d,v.children),d.flags|=4096,d)}function oS(c,d,m){c.lanes|=d;var v=c.alternate;v!==null&&(v.lanes|=d),gv(c.return,d,m)}function zv(c,d,m,v,w){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:w}:(C.isBackwards=d,C.rendering=null,C.renderingStartTime=0,C.last=v,C.tail=m,C.tailMode=w)}function cS(c,d,m){var v=d.pendingProps,w=v.revealOrder,C=v.tail;if(Pr(c,d,v.children,m),v=mn.current,(v&2)!==0)v=v&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&oS(c,m,d);else if(c.tag===19)oS(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}v&=1}if(Kt(mn,v),(d.mode&1)===0)d.memoizedState=null;else switch(w){case"forwards":for(m=d.child,w=null;m!==null;)c=m.alternate,c!==null&&$h(c)===null&&(w=m),m=m.sibling;m=w,m===null?(w=d.child,d.child=null):(w=m.sibling,m.sibling=null),zv(d,!1,w,m,C);break;case"backwards":for(m=null,w=d.child,d.child=null;w!==null;){if(c=w.alternate,c!==null&&$h(c)===null){d.child=w;break}c=w.sibling,w.sibling=m,m=w,w=c}zv(d,!0,m,null,C);break;case"together":zv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Jh(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Ca(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),Qo|=d.lanes,(m&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(n(153));if(d.child!==null){for(c=d.child,m=fo(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=fo(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function m4(c,d,m){switch(d.tag){case 3:sS(d),el();break;case 5:kk(d);break;case 1:Wr(d.type)&&Ah(d);break;case 4:xv(d,d.stateNode.containerInfo);break;case 10:var v=d.type._context,w=d.memoizedProps.value;Kt(Fh,v._currentValue),v._currentValue=w;break;case 13:if(v=d.memoizedState,v!==null)return v.dehydrated!==null?(Kt(mn,mn.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?aS(c,d,m):(Kt(mn,mn.current&1),c=Ca(c,d,m),c!==null?c.sibling:null);Kt(mn,mn.current&1);break;case 19:if(v=(m&d.childLanes)!==0,(c.flags&128)!==0){if(v)return cS(c,d,m);d.flags|=128}if(w=d.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Kt(mn,mn.current),v)break;return null;case 22:case 23:return d.lanes=0,tS(c,d,m)}return Ca(c,d,m)}var lS,Bv,dS,uS;lS=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Bv=function(){},dS=function(c,d,m,v){var w=c.memoizedProps;if(w!==v){c=d.stateNode,Jo(Ui.current);var C=null;switch(m){case"input":w=jt(c,w),v=jt(c,v),C=[];break;case"select":w=fe({},w,{value:void 0}),v=fe({},v,{value:void 0}),C=[];break;case"textarea":w=re(c,w),v=re(c,v),C=[];break;default:typeof w.onClick!="function"&&typeof v.onClick=="function"&&(c.onclick=Ph)}jr(m,v);var R;m=null;for(se in w)if(!v.hasOwnProperty(se)&&w.hasOwnProperty(se)&&w[se]!=null)if(se==="style"){var D=w[se];for(R in D)D.hasOwnProperty(R)&&(m||(m={}),m[R]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(s.hasOwnProperty(se)?C||(C=[]):(C=C||[]).push(se,null));for(se in v){var V=v[se];if(D=w?.[se],v.hasOwnProperty(se)&&V!==D&&(V!=null||D!=null))if(se==="style")if(D){for(R in D)!D.hasOwnProperty(R)||V&&V.hasOwnProperty(R)||(m||(m={}),m[R]="");for(R in V)V.hasOwnProperty(R)&&D[R]!==V[R]&&(m||(m={}),m[R]=V[R])}else m||(C||(C=[]),C.push(se,m)),m=V;else se==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,D=D?D.__html:void 0,V!=null&&D!==V&&(C=C||[]).push(se,V)):se==="children"?typeof V!="string"&&typeof V!="number"||(C=C||[]).push(se,""+V):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(s.hasOwnProperty(se)?(V!=null&&se==="onScroll"&&Xt("scroll",c),C||D===V||(C=[])):(C=C||[]).push(se,V))}m&&(C=C||[]).push("style",m);var se=C;(d.updateQueue=se)&&(d.flags|=4)}},uS=function(c,d,m,v){m!==v&&(d.flags|=4)};function $d(c,d){if(!on)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:v.sibling=null}}function xr(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,v=0;if(d)for(var w=c.child;w!==null;)m|=w.lanes|w.childLanes,v|=w.subtreeFlags&14680064,v|=w.flags&14680064,w.return=c,w=w.sibling;else for(w=c.child;w!==null;)m|=w.lanes|w.childLanes,v|=w.subtreeFlags,v|=w.flags,w.return=c,w=w.sibling;return c.subtreeFlags|=v,c.childLanes=m,d}function p4(c,d,m){var v=d.pendingProps;switch(lv(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(d),null;case 1:return Wr(d.type)&&Rh(),xr(d),null;case 3:return v=d.stateNode,sl(),en(Hr),en(vr),kv(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(Mh(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ri!==null&&(Qv(ri),ri=null))),Bv(c,d),xr(d),null;case 5:bv(d);var w=Jo(Ld.current);if(m=d.type,c!==null&&d.stateNode!=null)dS(c,d,m,v,w),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!v){if(d.stateNode===null)throw Error(n(166));return xr(d),null}if(c=Jo(Ui.current),Mh(d)){v=d.stateNode,m=d.type;var C=d.memoizedProps;switch(v[Fi]=d,v[Ad]=C,c=(d.mode&1)!==0,m){case"dialog":Xt("cancel",v),Xt("close",v);break;case"iframe":case"object":case"embed":Xt("load",v);break;case"video":case"audio":for(w=0;w<Pd.length;w++)Xt(Pd[w],v);break;case"source":Xt("error",v);break;case"img":case"image":case"link":Xt("error",v),Xt("load",v);break;case"details":Xt("toggle",v);break;case"input":Kn(v,C),Xt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!C.multiple},Xt("invalid",v);break;case"textarea":Re(v,C),Xt("invalid",v)}jr(m,C),w=null;for(var R in C)if(C.hasOwnProperty(R)){var D=C[R];R==="children"?typeof D=="string"?v.textContent!==D&&(C.suppressHydrationWarning!==!0&&Th(v.textContent,D,c),w=["children",D]):typeof D=="number"&&v.textContent!==""+D&&(C.suppressHydrationWarning!==!0&&Th(v.textContent,D,c),w=["children",""+D]):s.hasOwnProperty(R)&&D!=null&&R==="onScroll"&&Xt("scroll",v)}switch(m){case"input":Xe(v),vs(v,C,!0);break;case"textarea":Xe(v),je(v);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(v.onclick=Ph)}v=w,d.updateQueue=v,v!==null&&(d.flags|=4)}else{R=w.nodeType===9?w:w.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=ze(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof v.is=="string"?c=R.createElement(m,{is:v.is}):(c=R.createElement(m),m==="select"&&(R=c,v.multiple?R.multiple=!0:v.size&&(R.size=v.size))):c=R.createElementNS(c,m),c[Fi]=d,c[Ad]=v,lS(c,d,!1,!1),d.stateNode=c;e:{switch(R=Br(m,v),m){case"dialog":Xt("cancel",c),Xt("close",c),w=v;break;case"iframe":case"object":case"embed":Xt("load",c),w=v;break;case"video":case"audio":for(w=0;w<Pd.length;w++)Xt(Pd[w],c);w=v;break;case"source":Xt("error",c),w=v;break;case"img":case"image":case"link":Xt("error",c),Xt("load",c),w=v;break;case"details":Xt("toggle",c),w=v;break;case"input":Kn(c,v),w=jt(c,v),Xt("invalid",c);break;case"option":w=v;break;case"select":c._wrapperState={wasMultiple:!!v.multiple},w=fe({},v,{value:void 0}),Xt("invalid",c);break;case"textarea":Re(c,v),w=re(c,v),Xt("invalid",c);break;default:w=v}jr(m,w),D=w;for(C in D)if(D.hasOwnProperty(C)){var V=D[C];C==="style"?ys(c,V):C==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&mt(c,V)):C==="children"?typeof V=="string"?(m!=="textarea"||V!=="")&&_t(c,V):typeof V=="number"&&_t(c,""+V):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?V!=null&&C==="onScroll"&&Xt("scroll",c):V!=null&&j(c,C,V,R))}switch(m){case"input":Xe(c),vs(c,v,!1);break;case"textarea":Xe(c),je(c);break;case"option":v.value!=null&&c.setAttribute("value",""+ce(v.value));break;case"select":c.multiple=!!v.multiple,C=v.value,C!=null?W(c,!!v.multiple,C,!1):v.defaultValue!=null&&W(c,!!v.multiple,v.defaultValue,!0);break;default:typeof w.onClick=="function"&&(c.onclick=Ph)}switch(m){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return xr(d),null;case 6:if(c&&d.stateNode!=null)uS(c,d,c.memoizedProps,v);else{if(typeof v!="string"&&d.stateNode===null)throw Error(n(166));if(m=Jo(Ld.current),Jo(Ui.current),Mh(d)){if(v=d.stateNode,m=d.memoizedProps,v[Fi]=d,(C=v.nodeValue!==m)&&(c=ws,c!==null))switch(c.tag){case 3:Th(v.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Th(v.nodeValue,m,(c.mode&1)!==0)}C&&(d.flags|=4)}else v=(m.nodeType===9?m:m.ownerDocument).createTextNode(v),v[Fi]=d,d.stateNode=v}return xr(d),null;case 13:if(en(mn),v=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(on&&ks!==null&&(d.mode&1)!==0&&(d.flags&128)===0)mk(),el(),d.flags|=98560,C=!1;else if(C=Mh(d),v!==null&&v.dehydrated!==null){if(c===null){if(!C)throw Error(n(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Fi]=d}else el(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;xr(d),C=!1}else ri!==null&&(Qv(ri),ri=null),C=!0;if(!C)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(v=v!==null,v!==(c!==null&&c.memoizedState!==null)&&v&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(mn.current&1)!==0?Zn===0&&(Zn=3):ty())),d.updateQueue!==null&&(d.flags|=4),xr(d),null);case 4:return sl(),Bv(c,d),c===null&&_d(d.stateNode.containerInfo),xr(d),null;case 10:return pv(d.type._context),xr(d),null;case 17:return Wr(d.type)&&Rh(),xr(d),null;case 19:if(en(mn),C=d.memoizedState,C===null)return xr(d),null;if(v=(d.flags&128)!==0,R=C.rendering,R===null)if(v)$d(C,!1);else{if(Zn!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(R=$h(c),R!==null){for(d.flags|=128,$d(C,!1),v=R.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),d.subtreeFlags=0,v=m,m=d.child;m!==null;)C=m,c=v,C.flags&=14680066,R=C.alternate,R===null?(C.childLanes=0,C.lanes=c,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=R.childLanes,C.lanes=R.lanes,C.child=R.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=R.memoizedProps,C.memoizedState=R.memoizedState,C.updateQueue=R.updateQueue,C.type=R.type,c=R.dependencies,C.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return Kt(mn,mn.current&1|2),d.child}c=c.sibling}C.tail!==null&&En()>cl&&(d.flags|=128,v=!0,$d(C,!1),d.lanes=4194304)}else{if(!v)if(c=$h(R),c!==null){if(d.flags|=128,v=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),$d(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!on)return xr(d),null}else 2*En()-C.renderingStartTime>cl&&m!==1073741824&&(d.flags|=128,v=!0,$d(C,!1),d.lanes=4194304);C.isBackwards?(R.sibling=d.child,d.child=R):(m=C.last,m!==null?m.sibling=R:d.child=R,C.last=R)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=En(),d.sibling=null,m=mn.current,Kt(mn,v?m&1|2:m&1),d):(xr(d),null);case 22:case 23:return ey(),v=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==v&&(d.flags|=8192),v&&(d.mode&1)!==0?(Ss&1073741824)!==0&&(xr(d),d.subtreeFlags&6&&(d.flags|=8192)):xr(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function g4(c,d){switch(lv(d),d.tag){case 1:return Wr(d.type)&&Rh(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return sl(),en(Hr),en(vr),kv(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return bv(d),null;case 13:if(en(mn),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(n(340));el()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return en(mn),null;case 4:return sl(),null;case 10:return pv(d.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var Yh=!1,br=!1,v4=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function al(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(v){xn(c,d,v)}else m.current=null}function $v(c,d,m){try{m()}catch(v){xn(c,d,v)}}var hS=!1;function y4(c,d){if(ev=vh,c=q1(),Wg(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var w=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var R=0,D=-1,V=-1,se=0,Ne=0,Ee=c,Se=null;t:for(;;){for(var Be;Ee!==m||w!==0&&Ee.nodeType!==3||(D=R+w),Ee!==C||v!==0&&Ee.nodeType!==3||(V=R+v),Ee.nodeType===3&&(R+=Ee.nodeValue.length),(Be=Ee.firstChild)!==null;)Se=Ee,Ee=Be;for(;;){if(Ee===c)break t;if(Se===m&&++se===w&&(D=R),Se===C&&++Ne===v&&(V=R),(Be=Ee.nextSibling)!==null)break;Ee=Se,Se=Ee.parentNode}Ee=Be}m=D===-1||V===-1?null:{start:D,end:V}}else m=null}m=m||{start:0,end:0}}else m=null;for(tv={focusedElem:c,selectionRange:m},vh=!1,Ve=d;Ve!==null;)if(d=Ve,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Ve=c;else for(;Ve!==null;){d=Ve;try{var We=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var Je=We.memoizedProps,Tn=We.memoizedState,Z=d.stateNode,H=Z.getSnapshotBeforeUpdate(d.elementType===d.type?Je:si(d.type,Je),Tn);Z.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var X=d.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ae){xn(d,d.return,Ae)}if(c=d.sibling,c!==null){c.return=d.return,Ve=c;break}Ve=d.return}return We=hS,hS=!1,We}function Vd(c,d,m){var v=d.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var w=v=v.next;do{if((w.tag&c)===c){var C=w.destroy;w.destroy=void 0,C!==void 0&&$v(d,m,C)}w=w.next}while(w!==v)}}function Qh(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var v=m.create;m.destroy=v()}m=m.next}while(m!==d)}}function Vv(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function fS(c){var d=c.alternate;d!==null&&(c.alternate=null,fS(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[Fi],delete d[Ad],delete d[iv],delete d[e4],delete d[t4])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function mS(c){return c.tag===5||c.tag===3||c.tag===4}function pS(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||mS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function qv(c,d,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Ph));else if(v!==4&&(c=c.child,c!==null))for(qv(c,d,m),c=c.sibling;c!==null;)qv(c,d,m),c=c.sibling}function Hv(c,d,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(v!==4&&(c=c.child,c!==null))for(Hv(c,d,m),c=c.sibling;c!==null;)Hv(c,d,m),c=c.sibling}var hr=null,ii=!1;function oo(c,d,m){for(m=m.child;m!==null;)gS(c,d,m),m=m.sibling}function gS(c,d,m){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(uh,m)}catch{}switch(m.tag){case 5:br||al(m,d);case 6:var v=hr,w=ii;hr=null,oo(c,d,m),hr=v,ii=w,hr!==null&&(ii?(c=hr,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):hr.removeChild(m.stateNode));break;case 18:hr!==null&&(ii?(c=hr,m=m.stateNode,c.nodeType===8?sv(c.parentNode,m):c.nodeType===1&&sv(c,m),wd(c)):sv(hr,m.stateNode));break;case 4:v=hr,w=ii,hr=m.stateNode.containerInfo,ii=!0,oo(c,d,m),hr=v,ii=w;break;case 0:case 11:case 14:case 15:if(!br&&(v=m.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){w=v=v.next;do{var C=w,R=C.destroy;C=C.tag,R!==void 0&&((C&2)!==0||(C&4)!==0)&&$v(m,d,R),w=w.next}while(w!==v)}oo(c,d,m);break;case 1:if(!br&&(al(m,d),v=m.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=m.memoizedProps,v.state=m.memoizedState,v.componentWillUnmount()}catch(D){xn(m,d,D)}oo(c,d,m);break;case 21:oo(c,d,m);break;case 22:m.mode&1?(br=(v=br)||m.memoizedState!==null,oo(c,d,m),br=v):oo(c,d,m);break;default:oo(c,d,m)}}function vS(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new v4),d.forEach(function(v){var w=E4.bind(null,c,v);m.has(v)||(m.add(v),v.then(w,w))})}}function ai(c,d){var m=d.deletions;if(m!==null)for(var v=0;v<m.length;v++){var w=m[v];try{var C=c,R=d,D=R;e:for(;D!==null;){switch(D.tag){case 5:hr=D.stateNode,ii=!1;break e;case 3:hr=D.stateNode.containerInfo,ii=!0;break e;case 4:hr=D.stateNode.containerInfo,ii=!0;break e}D=D.return}if(hr===null)throw Error(n(160));gS(C,R,w),hr=null,ii=!1;var V=w.alternate;V!==null&&(V.return=null),w.return=null}catch(se){xn(w,d,se)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)yS(d,c),d=d.sibling}function yS(c,d){var m=c.alternate,v=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ai(d,c),Bi(c),v&4){try{Vd(3,c,c.return),Qh(3,c)}catch(Je){xn(c,c.return,Je)}try{Vd(5,c,c.return)}catch(Je){xn(c,c.return,Je)}}break;case 1:ai(d,c),Bi(c),v&512&&m!==null&&al(m,m.return);break;case 5:if(ai(d,c),Bi(c),v&512&&m!==null&&al(m,m.return),c.flags&32){var w=c.stateNode;try{_t(w,"")}catch(Je){xn(c,c.return,Je)}}if(v&4&&(w=c.stateNode,w!=null)){var C=c.memoizedProps,R=m!==null?m.memoizedProps:C,D=c.type,V=c.updateQueue;if(c.updateQueue=null,V!==null)try{D==="input"&&C.type==="radio"&&C.name!=null&&ht(w,C),Br(D,R);var se=Br(D,C);for(R=0;R<V.length;R+=2){var Ne=V[R],Ee=V[R+1];Ne==="style"?ys(w,Ee):Ne==="dangerouslySetInnerHTML"?mt(w,Ee):Ne==="children"?_t(w,Ee):j(w,Ne,Ee,se)}switch(D){case"input":qt(w,C);break;case"textarea":Pe(w,C);break;case"select":var Se=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!C.multiple;var Be=C.value;Be!=null?W(w,!!C.multiple,Be,!1):Se!==!!C.multiple&&(C.defaultValue!=null?W(w,!!C.multiple,C.defaultValue,!0):W(w,!!C.multiple,C.multiple?[]:"",!1))}w[Ad]=C}catch(Je){xn(c,c.return,Je)}}break;case 6:if(ai(d,c),Bi(c),v&4){if(c.stateNode===null)throw Error(n(162));w=c.stateNode,C=c.memoizedProps;try{w.nodeValue=C}catch(Je){xn(c,c.return,Je)}}break;case 3:if(ai(d,c),Bi(c),v&4&&m!==null&&m.memoizedState.isDehydrated)try{wd(d.containerInfo)}catch(Je){xn(c,c.return,Je)}break;case 4:ai(d,c),Bi(c);break;case 13:ai(d,c),Bi(c),w=c.child,w.flags&8192&&(C=w.memoizedState!==null,w.stateNode.isHidden=C,!C||w.alternate!==null&&w.alternate.memoizedState!==null||(Gv=En())),v&4&&vS(c);break;case 22:if(Ne=m!==null&&m.memoizedState!==null,c.mode&1?(br=(se=br)||Ne,ai(d,c),br=se):ai(d,c),Bi(c),v&8192){if(se=c.memoizedState!==null,(c.stateNode.isHidden=se)&&!Ne&&(c.mode&1)!==0)for(Ve=c,Ne=c.child;Ne!==null;){for(Ee=Ve=Ne;Ve!==null;){switch(Se=Ve,Be=Se.child,Se.tag){case 0:case 11:case 14:case 15:Vd(4,Se,Se.return);break;case 1:al(Se,Se.return);var We=Se.stateNode;if(typeof We.componentWillUnmount=="function"){v=Se,m=Se.return;try{d=v,We.props=d.memoizedProps,We.state=d.memoizedState,We.componentWillUnmount()}catch(Je){xn(v,m,Je)}}break;case 5:al(Se,Se.return);break;case 22:if(Se.memoizedState!==null){wS(Ee);continue}}Be!==null?(Be.return=Se,Ve=Be):wS(Ee)}Ne=Ne.sibling}e:for(Ne=null,Ee=c;;){if(Ee.tag===5){if(Ne===null){Ne=Ee;try{w=Ee.stateNode,se?(C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(D=Ee.stateNode,V=Ee.memoizedProps.style,R=V!=null&&V.hasOwnProperty("display")?V.display:null,D.style.display=jn("display",R))}catch(Je){xn(c,c.return,Je)}}}else if(Ee.tag===6){if(Ne===null)try{Ee.stateNode.nodeValue=se?"":Ee.memoizedProps}catch(Je){xn(c,c.return,Je)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===c)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===c)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===c)break e;Ne===Ee&&(Ne=null),Ee=Ee.return}Ne===Ee&&(Ne=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:ai(d,c),Bi(c),v&4&&vS(c);break;case 21:break;default:ai(d,c),Bi(c)}}function Bi(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(mS(m)){var v=m;break e}m=m.return}throw Error(n(160))}switch(v.tag){case 5:var w=v.stateNode;v.flags&32&&(_t(w,""),v.flags&=-33);var C=pS(c);Hv(c,C,w);break;case 3:case 4:var R=v.stateNode.containerInfo,D=pS(c);qv(c,D,R);break;default:throw Error(n(161))}}catch(V){xn(c,c.return,V)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function x4(c,d,m){Ve=c,xS(c)}function xS(c,d,m){for(var v=(c.mode&1)!==0;Ve!==null;){var w=Ve,C=w.child;if(w.tag===22&&v){var R=w.memoizedState!==null||Yh;if(!R){var D=w.alternate,V=D!==null&&D.memoizedState!==null||br;D=Yh;var se=br;if(Yh=R,(br=V)&&!se)for(Ve=w;Ve!==null;)R=Ve,V=R.child,R.tag===22&&R.memoizedState!==null?kS(w):V!==null?(V.return=R,Ve=V):kS(w);for(;C!==null;)Ve=C,xS(C),C=C.sibling;Ve=w,Yh=D,br=se}bS(c)}else(w.subtreeFlags&8772)!==0&&C!==null?(C.return=w,Ve=C):bS(c)}}function bS(c){for(;Ve!==null;){var d=Ve;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:br||Qh(5,d);break;case 1:var v=d.stateNode;if(d.flags&4&&!br)if(m===null)v.componentDidMount();else{var w=d.elementType===d.type?m.memoizedProps:si(d.type,m.memoizedProps);v.componentDidUpdate(w,m.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var C=d.updateQueue;C!==null&&wk(d,C,v);break;case 3:var R=d.updateQueue;if(R!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}wk(d,R,m)}break;case 5:var D=d.stateNode;if(m===null&&d.flags&4){m=D;var V=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&m.focus();break;case"img":V.src&&(m.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var se=d.alternate;if(se!==null){var Ne=se.memoizedState;if(Ne!==null){var Ee=Ne.dehydrated;Ee!==null&&wd(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}br||d.flags&512&&Vv(d)}catch(Se){xn(d,d.return,Se)}}if(d===c){Ve=null;break}if(m=d.sibling,m!==null){m.return=d.return,Ve=m;break}Ve=d.return}}function wS(c){for(;Ve!==null;){var d=Ve;if(d===c){Ve=null;break}var m=d.sibling;if(m!==null){m.return=d.return,Ve=m;break}Ve=d.return}}function kS(c){for(;Ve!==null;){var d=Ve;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{Qh(4,d)}catch(V){xn(d,m,V)}break;case 1:var v=d.stateNode;if(typeof v.componentDidMount=="function"){var w=d.return;try{v.componentDidMount()}catch(V){xn(d,w,V)}}var C=d.return;try{Vv(d)}catch(V){xn(d,C,V)}break;case 5:var R=d.return;try{Vv(d)}catch(V){xn(d,R,V)}}}catch(V){xn(d,d.return,V)}if(d===c){Ve=null;break}var D=d.sibling;if(D!==null){D.return=d.return,Ve=D;break}Ve=d.return}}var b4=Math.ceil,Xh=P.ReactCurrentDispatcher,Wv=P.ReactCurrentOwner,zs=P.ReactCurrentBatchConfig,At=0,rr=null,Fn=null,fr=0,Ss=0,ol=no(0),Zn=0,qd=null,Qo=0,ef=0,Kv=0,Hd=null,Gr=null,Gv=0,cl=1/0,Na=null,tf=!1,Zv=null,co=null,nf=!1,lo=null,rf=0,Wd=0,Jv=null,sf=-1,af=0;function _r(){return(At&6)!==0?En():sf!==-1?sf:sf=En()}function uo(c){return(c.mode&1)===0?1:(At&2)!==0&&fr!==0?fr&-fr:r4.transition!==null?(af===0&&(af=p1()),af):(c=zt,c!==0||(c=window.event,c=c===void 0?16:C1(c.type)),c)}function oi(c,d,m,v){if(50<Wd)throw Wd=0,Jv=null,Error(n(185));gd(c,m,v),((At&2)===0||c!==rr)&&(c===rr&&((At&2)===0&&(ef|=m),Zn===4&&ho(c,fr)),Zr(c,v),m===1&&At===0&&(d.mode&1)===0&&(cl=En()+500,Ih&&so()))}function Zr(c,d){var m=c.callbackNode;r5(c,d);var v=mh(c,c===rr?fr:0);if(v===0)m!==null&&h1(m),c.callbackNode=null,c.callbackPriority=0;else if(d=v&-v,c.callbackPriority!==d){if(m!=null&&h1(m),d===1)c.tag===0?n4(CS.bind(null,c)):lk(CS.bind(null,c)),Q5(function(){(At&6)===0&&so()}),m=null;else{switch(g1(v)){case 1:m=Pg;break;case 4:m=f1;break;case 16:m=dh;break;case 536870912:m=m1;break;default:m=dh}m=AS(m,SS.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function SS(c,d){if(sf=-1,af=0,(At&6)!==0)throw Error(n(327));var m=c.callbackNode;if(ll()&&c.callbackNode!==m)return null;var v=mh(c,c===rr?fr:0);if(v===0)return null;if((v&30)!==0||(v&c.expiredLanes)!==0||d)d=of(c,v);else{d=v;var w=At;At|=2;var C=jS();(rr!==c||fr!==d)&&(Na=null,cl=En()+500,ec(c,d));do try{S4();break}catch(D){NS(c,D)}while(!0);mv(),Xh.current=C,At=w,Fn!==null?d=0:(rr=null,fr=0,d=Zn)}if(d!==0){if(d===2&&(w=_g(c),w!==0&&(v=w,d=Yv(c,w))),d===1)throw m=qd,ec(c,0),ho(c,v),Zr(c,En()),m;if(d===6)ho(c,v);else{if(w=c.current.alternate,(v&30)===0&&!w4(w)&&(d=of(c,v),d===2&&(C=_g(c),C!==0&&(v=C,d=Yv(c,C))),d===1))throw m=qd,ec(c,0),ho(c,v),Zr(c,En()),m;switch(c.finishedWork=w,c.finishedLanes=v,d){case 0:case 1:throw Error(n(345));case 2:tc(c,Gr,Na);break;case 3:if(ho(c,v),(v&130023424)===v&&(d=Gv+500-En(),10<d)){if(mh(c,0)!==0)break;if(w=c.suspendedLanes,(w&v)!==v){_r(),c.pingedLanes|=c.suspendedLanes&w;break}c.timeoutHandle=rv(tc.bind(null,c,Gr,Na),d);break}tc(c,Gr,Na);break;case 4:if(ho(c,v),(v&4194240)===v)break;for(d=c.eventTimes,w=-1;0<v;){var R=31-ti(v);C=1<<R,R=d[R],R>w&&(w=R),v&=~C}if(v=w,v=En()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*b4(v/1960))-v,10<v){c.timeoutHandle=rv(tc.bind(null,c,Gr,Na),v);break}tc(c,Gr,Na);break;case 5:tc(c,Gr,Na);break;default:throw Error(n(329))}}}return Zr(c,En()),c.callbackNode===m?SS.bind(null,c):null}function Yv(c,d){var m=Hd;return c.current.memoizedState.isDehydrated&&(ec(c,d).flags|=256),c=of(c,d),c!==2&&(d=Gr,Gr=m,d!==null&&Qv(d)),c}function Qv(c){Gr===null?Gr=c:Gr.push.apply(Gr,c)}function w4(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var v=0;v<m.length;v++){var w=m[v],C=w.getSnapshot;w=w.value;try{if(!ni(C(),w))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ho(c,d){for(d&=~Kv,d&=~ef,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-ti(d),v=1<<m;c[m]=-1,d&=~v}}function CS(c){if((At&6)!==0)throw Error(n(327));ll();var d=mh(c,0);if((d&1)===0)return Zr(c,En()),null;var m=of(c,d);if(c.tag!==0&&m===2){var v=_g(c);v!==0&&(d=v,m=Yv(c,v))}if(m===1)throw m=qd,ec(c,0),ho(c,d),Zr(c,En()),m;if(m===6)throw Error(n(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,tc(c,Gr,Na),Zr(c,En()),null}function Xv(c,d){var m=At;At|=1;try{return c(d)}finally{At=m,At===0&&(cl=En()+500,Ih&&so())}}function Xo(c){lo!==null&&lo.tag===0&&(At&6)===0&&ll();var d=At;At|=1;var m=zs.transition,v=zt;try{if(zs.transition=null,zt=1,c)return c()}finally{zt=v,zs.transition=m,At=d,(At&6)===0&&so()}}function ey(){Ss=ol.current,en(ol)}function ec(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,Y5(m)),Fn!==null)for(m=Fn.return;m!==null;){var v=m;switch(lv(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Rh();break;case 3:sl(),en(Hr),en(vr),kv();break;case 5:bv(v);break;case 4:sl();break;case 13:en(mn);break;case 19:en(mn);break;case 10:pv(v.type._context);break;case 22:case 23:ey()}m=m.return}if(rr=c,Fn=c=fo(c.current,null),fr=Ss=d,Zn=0,qd=null,Kv=ef=Qo=0,Gr=Hd=null,Zo!==null){for(d=0;d<Zo.length;d++)if(m=Zo[d],v=m.interleaved,v!==null){m.interleaved=null;var w=v.next,C=m.pending;if(C!==null){var R=C.next;C.next=w,v.next=R}m.pending=v}Zo=null}return c}function NS(c,d){do{var m=Fn;try{if(mv(),Vh.current=Kh,qh){for(var v=pn.memoizedState;v!==null;){var w=v.queue;w!==null&&(w.pending=null),v=v.next}qh=!1}if(Yo=0,nr=Gn=pn=null,Fd=!1,Ud=0,Wv.current=null,m===null||m.return===null){Zn=1,qd=d,Fn=null;break}e:{var C=c,R=m.return,D=m,V=d;if(d=fr,D.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var se=V,Ne=D,Ee=Ne.tag;if((Ne.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var Se=Ne.alternate;Se?(Ne.updateQueue=Se.updateQueue,Ne.memoizedState=Se.memoizedState,Ne.lanes=Se.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Be=Jk(R);if(Be!==null){Be.flags&=-257,Yk(Be,R,D,C,d),Be.mode&1&&Zk(C,se,d),d=Be,V=se;var We=d.updateQueue;if(We===null){var Je=new Set;Je.add(V),d.updateQueue=Je}else We.add(V);break e}else{if((d&1)===0){Zk(C,se,d),ty();break e}V=Error(n(426))}}else if(on&&D.mode&1){var Tn=Jk(R);if(Tn!==null){(Tn.flags&65536)===0&&(Tn.flags|=256),Yk(Tn,R,D,C,d),hv(il(V,D));break e}}C=V=il(V,D),Zn!==4&&(Zn=2),Hd===null?Hd=[C]:Hd.push(C),C=R;do{switch(C.tag){case 3:C.flags|=65536,d&=-d,C.lanes|=d;var Z=Kk(C,V,d);bk(C,Z);break e;case 1:D=V;var H=C.type,X=C.stateNode;if((C.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(co===null||!co.has(X)))){C.flags|=65536,d&=-d,C.lanes|=d;var Ae=Gk(C,D,d);bk(C,Ae);break e}}C=C.return}while(C!==null)}TS(m)}catch(Qe){d=Qe,Fn===m&&m!==null&&(Fn=m=m.return);continue}break}while(!0)}function jS(){var c=Xh.current;return Xh.current=Kh,c===null?Kh:c}function ty(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),rr===null||(Qo&268435455)===0&&(ef&268435455)===0||ho(rr,fr)}function of(c,d){var m=At;At|=2;var v=jS();(rr!==c||fr!==d)&&(Na=null,ec(c,d));do try{k4();break}catch(w){NS(c,w)}while(!0);if(mv(),At=m,Xh.current=v,Fn!==null)throw Error(n(261));return rr=null,fr=0,Zn}function k4(){for(;Fn!==null;)ES(Fn)}function S4(){for(;Fn!==null&&!GD();)ES(Fn)}function ES(c){var d=RS(c.alternate,c,Ss);c.memoizedProps=c.pendingProps,d===null?TS(c):Fn=d,Wv.current=null}function TS(c){var d=c;do{var m=d.alternate;if(c=d.return,(d.flags&32768)===0){if(m=p4(m,d,Ss),m!==null){Fn=m;return}}else{if(m=g4(m,d),m!==null){m.flags&=32767,Fn=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Zn=6,Fn=null;return}}if(d=d.sibling,d!==null){Fn=d;return}Fn=d=c}while(d!==null);Zn===0&&(Zn=5)}function tc(c,d,m){var v=zt,w=zs.transition;try{zs.transition=null,zt=1,C4(c,d,m,v)}finally{zs.transition=w,zt=v}return null}function C4(c,d,m,v){do ll();while(lo!==null);if((At&6)!==0)throw Error(n(327));m=c.finishedWork;var w=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(n(177));c.callbackNode=null,c.callbackPriority=0;var C=m.lanes|m.childLanes;if(s5(c,C),c===rr&&(Fn=rr=null,fr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||nf||(nf=!0,AS(dh,function(){return ll(),null})),C=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||C){C=zs.transition,zs.transition=null;var R=zt;zt=1;var D=At;At|=4,Wv.current=null,y4(c,m),yS(m,c),q5(tv),vh=!!ev,tv=ev=null,c.current=m,x4(m),ZD(),At=D,zt=R,zs.transition=C}else c.current=m;if(nf&&(nf=!1,lo=c,rf=w),C=c.pendingLanes,C===0&&(co=null),QD(m.stateNode),Zr(c,En()),d!==null)for(v=c.onRecoverableError,m=0;m<d.length;m++)w=d[m],v(w.value,{componentStack:w.stack,digest:w.digest});if(tf)throw tf=!1,c=Zv,Zv=null,c;return(rf&1)!==0&&c.tag!==0&&ll(),C=c.pendingLanes,(C&1)!==0?c===Jv?Wd++:(Wd=0,Jv=c):Wd=0,so(),null}function ll(){if(lo!==null){var c=g1(rf),d=zs.transition,m=zt;try{if(zs.transition=null,zt=16>c?16:c,lo===null)var v=!1;else{if(c=lo,lo=null,rf=0,(At&6)!==0)throw Error(n(331));var w=At;for(At|=4,Ve=c.current;Ve!==null;){var C=Ve,R=C.child;if((Ve.flags&16)!==0){var D=C.deletions;if(D!==null){for(var V=0;V<D.length;V++){var se=D[V];for(Ve=se;Ve!==null;){var Ne=Ve;switch(Ne.tag){case 0:case 11:case 15:Vd(8,Ne,C)}var Ee=Ne.child;if(Ee!==null)Ee.return=Ne,Ve=Ee;else for(;Ve!==null;){Ne=Ve;var Se=Ne.sibling,Be=Ne.return;if(fS(Ne),Ne===se){Ve=null;break}if(Se!==null){Se.return=Be,Ve=Se;break}Ve=Be}}}var We=C.alternate;if(We!==null){var Je=We.child;if(Je!==null){We.child=null;do{var Tn=Je.sibling;Je.sibling=null,Je=Tn}while(Je!==null)}}Ve=C}}if((C.subtreeFlags&2064)!==0&&R!==null)R.return=C,Ve=R;else e:for(;Ve!==null;){if(C=Ve,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Vd(9,C,C.return)}var Z=C.sibling;if(Z!==null){Z.return=C.return,Ve=Z;break e}Ve=C.return}}var H=c.current;for(Ve=H;Ve!==null;){R=Ve;var X=R.child;if((R.subtreeFlags&2064)!==0&&X!==null)X.return=R,Ve=X;else e:for(R=H;Ve!==null;){if(D=Ve,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Qh(9,D)}}catch(Qe){xn(D,D.return,Qe)}if(D===R){Ve=null;break e}var Ae=D.sibling;if(Ae!==null){Ae.return=D.return,Ve=Ae;break e}Ve=D.return}}if(At=w,so(),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(uh,c)}catch{}v=!0}return v}finally{zt=m,zs.transition=d}}return!1}function PS(c,d,m){d=il(m,d),d=Kk(c,d,1),c=ao(c,d,1),d=_r(),c!==null&&(gd(c,1,d),Zr(c,d))}function xn(c,d,m){if(c.tag===3)PS(c,c,m);else for(;d!==null;){if(d.tag===3){PS(d,c,m);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(co===null||!co.has(v))){c=il(m,c),c=Gk(d,c,1),d=ao(d,c,1),c=_r(),d!==null&&(gd(d,1,c),Zr(d,c));break}}d=d.return}}function N4(c,d,m){var v=c.pingCache;v!==null&&v.delete(d),d=_r(),c.pingedLanes|=c.suspendedLanes&m,rr===c&&(fr&m)===m&&(Zn===4||Zn===3&&(fr&130023424)===fr&&500>En()-Gv?ec(c,0):Kv|=m),Zr(c,d)}function _S(c,d){d===0&&((c.mode&1)===0?d=1:(d=fh,fh<<=1,(fh&130023424)===0&&(fh=4194304)));var m=_r();c=ka(c,d),c!==null&&(gd(c,d,m),Zr(c,m))}function j4(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),_S(c,m)}function E4(c,d){var m=0;switch(c.tag){case 13:var v=c.stateNode,w=c.memoizedState;w!==null&&(m=w.retryLane);break;case 19:v=c.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(d),_S(c,m)}var RS;RS=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||Hr.current)Kr=!0;else{if((c.lanes&m)===0&&(d.flags&128)===0)return Kr=!1,m4(c,d,m);Kr=(c.flags&131072)!==0}else Kr=!1,on&&(d.flags&1048576)!==0&&dk(d,Dh,d.index);switch(d.lanes=0,d.tag){case 2:var v=d.type;Jh(c,d),c=d.pendingProps;var w=Yc(d,vr.current);rl(d,m),w=Nv(null,d,v,c,w,m);var C=jv();return d.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Wr(v)?(C=!0,Ah(d)):C=!1,d.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,yv(d),w.updater=Gh,d.stateNode=w,w._reactInternals=d,Av(d,v,c,m),d=Mv(null,d,v,!0,C,m)):(d.tag=0,on&&C&&cv(d),Pr(null,d,w,m),d=d.child),d;case 16:v=d.elementType;e:{switch(Jh(c,d),c=d.pendingProps,w=v._init,v=w(v._payload),d.type=v,w=d.tag=P4(v),c=si(v,c),w){case 0:d=Dv(null,d,v,c,m);break e;case 1:d=rS(null,d,v,c,m);break e;case 11:d=Qk(null,d,v,c,m);break e;case 14:d=Xk(null,d,v,si(v.type,c),m);break e}throw Error(n(306,v,""))}return d;case 0:return v=d.type,w=d.pendingProps,w=d.elementType===v?w:si(v,w),Dv(c,d,v,w,m);case 1:return v=d.type,w=d.pendingProps,w=d.elementType===v?w:si(v,w),rS(c,d,v,w,m);case 3:e:{if(sS(d),c===null)throw Error(n(387));v=d.pendingProps,C=d.memoizedState,w=C.element,xk(c,d),Bh(d,v,null,m);var R=d.memoizedState;if(v=R.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},d.updateQueue.baseState=C,d.memoizedState=C,d.flags&256){w=il(Error(n(423)),d),d=iS(c,d,v,m,w);break e}else if(v!==w){w=il(Error(n(424)),d),d=iS(c,d,v,m,w);break e}else for(ks=to(d.stateNode.containerInfo.firstChild),ws=d,on=!0,ri=null,m=vk(d,null,v,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(el(),v===w){d=Ca(c,d,m);break e}Pr(c,d,v,m)}d=d.child}return d;case 5:return kk(d),c===null&&uv(d),v=d.type,w=d.pendingProps,C=c!==null?c.memoizedProps:null,R=w.children,nv(v,w)?R=null:C!==null&&nv(v,C)&&(d.flags|=32),nS(c,d),Pr(c,d,R,m),d.child;case 6:return c===null&&uv(d),null;case 13:return aS(c,d,m);case 4:return xv(d,d.stateNode.containerInfo),v=d.pendingProps,c===null?d.child=tl(d,null,v,m):Pr(c,d,v,m),d.child;case 11:return v=d.type,w=d.pendingProps,w=d.elementType===v?w:si(v,w),Qk(c,d,v,w,m);case 7:return Pr(c,d,d.pendingProps,m),d.child;case 8:return Pr(c,d,d.pendingProps.children,m),d.child;case 12:return Pr(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(v=d.type._context,w=d.pendingProps,C=d.memoizedProps,R=w.value,Kt(Fh,v._currentValue),v._currentValue=R,C!==null)if(ni(C.value,R)){if(C.children===w.children&&!Hr.current){d=Ca(c,d,m);break e}}else for(C=d.child,C!==null&&(C.return=d);C!==null;){var D=C.dependencies;if(D!==null){R=C.child;for(var V=D.firstContext;V!==null;){if(V.context===v){if(C.tag===1){V=Sa(-1,m&-m),V.tag=2;var se=C.updateQueue;if(se!==null){se=se.shared;var Ne=se.pending;Ne===null?V.next=V:(V.next=Ne.next,Ne.next=V),se.pending=V}}C.lanes|=m,V=C.alternate,V!==null&&(V.lanes|=m),gv(C.return,m,d),D.lanes|=m;break}V=V.next}}else if(C.tag===10)R=C.type===d.type?null:C.child;else if(C.tag===18){if(R=C.return,R===null)throw Error(n(341));R.lanes|=m,D=R.alternate,D!==null&&(D.lanes|=m),gv(R,m,d),R=C.sibling}else R=C.child;if(R!==null)R.return=C;else for(R=C;R!==null;){if(R===d){R=null;break}if(C=R.sibling,C!==null){C.return=R.return,R=C;break}R=R.return}C=R}Pr(c,d,w.children,m),d=d.child}return d;case 9:return w=d.type,v=d.pendingProps.children,rl(d,m),w=Fs(w),v=v(w),d.flags|=1,Pr(c,d,v,m),d.child;case 14:return v=d.type,w=si(v,d.pendingProps),w=si(v.type,w),Xk(c,d,v,w,m);case 15:return eS(c,d,d.type,d.pendingProps,m);case 17:return v=d.type,w=d.pendingProps,w=d.elementType===v?w:si(v,w),Jh(c,d),d.tag=1,Wr(v)?(c=!0,Ah(d)):c=!1,rl(d,m),Hk(d,v,w),Av(d,v,w,m),Mv(null,d,v,!0,c,m);case 19:return cS(c,d,m);case 22:return tS(c,d,m)}throw Error(n(156,d.tag))};function AS(c,d){return qr(c,d)}function T4(c,d,m,v){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(c,d,m,v){return new T4(c,d,m,v)}function ny(c){return c=c.prototype,!(!c||!c.isReactComponent)}function P4(c){if(typeof c=="function")return ny(c)?1:0;if(c!=null){if(c=c.$$typeof,c===z)return 11;if(c===ke)return 14}return 2}function fo(c,d){var m=c.alternate;return m===null?(m=Bs(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function cf(c,d,m,v,w,C){var R=2;if(v=c,typeof c=="function")ny(c)&&(R=1);else if(typeof c=="string")R=5;else e:switch(c){case _:return nc(m.children,w,C,d);case A:R=8,w|=8;break;case O:return c=Bs(12,m,d,w|2),c.elementType=O,c.lanes=C,c;case G:return c=Bs(13,m,d,w),c.elementType=G,c.lanes=C,c;case oe:return c=Bs(19,m,d,w),c.elementType=oe,c.lanes=C,c;case ge:return lf(m,w,C,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case M:R=10;break e;case q:R=9;break e;case z:R=11;break e;case ke:R=14;break e;case J:R=16,v=null;break e}throw Error(n(130,c==null?c:typeof c,""))}return d=Bs(R,m,d,w),d.elementType=c,d.type=v,d.lanes=C,d}function nc(c,d,m,v){return c=Bs(7,c,v,d),c.lanes=m,c}function lf(c,d,m,v){return c=Bs(22,c,v,d),c.elementType=ge,c.lanes=m,c.stateNode={isHidden:!1},c}function ry(c,d,m){return c=Bs(6,c,null,d),c.lanes=m,c}function sy(c,d,m){return d=Bs(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function _4(c,d,m,v,w){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=v,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function iy(c,d,m,v,w,C,R,D,V){return c=new _4(c,d,m,D,V),d===1?(d=1,C===!0&&(d|=8)):d=0,C=Bs(3,null,null,d),c.current=C,C.stateNode=c,C.memoizedState={element:v,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},yv(C),c}function R4(c,d,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:v==null?null:""+v,children:c,containerInfo:d,implementation:m}}function IS(c){if(!c)return ro;c=c._reactInternals;e:{if(Mi(c)!==c||c.tag!==1)throw Error(n(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Wr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(c.tag===1){var m=c.type;if(Wr(m))return ok(c,m,d)}return d}function OS(c,d,m,v,w,C,R,D,V){return c=iy(m,v,!0,c,w,C,R,D,V),c.context=IS(null),m=c.current,v=_r(),w=uo(m),C=Sa(v,w),C.callback=d??null,ao(m,C,w),c.current.lanes=w,gd(c,w,v),Zr(c,v),c}function df(c,d,m,v){var w=d.current,C=_r(),R=uo(w);return m=IS(m),d.context===null?d.context=m:d.pendingContext=m,d=Sa(C,R),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=ao(w,d,R),c!==null&&(oi(c,w,R,C),zh(c,w,R)),R}function uf(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function DS(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function ay(c,d){DS(c,d),(c=c.alternate)&&DS(c,d)}function A4(){return null}var MS=typeof reportError=="function"?reportError:function(c){console.error(c)};function oy(c){this._internalRoot=c}hf.prototype.render=oy.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(n(409));df(c,d,null,null)},hf.prototype.unmount=oy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;Xo(function(){df(null,c,null,null)}),d[ya]=null}};function hf(c){this._internalRoot=c}hf.prototype.unstable_scheduleHydration=function(c){if(c){var d=x1();c={blockedOn:null,target:c,priority:d};for(var m=0;m<Qa.length&&d!==0&&d<Qa[m].priority;m++);Qa.splice(m,0,c),m===0&&k1(c)}};function cy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function ff(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function LS(){}function I4(c,d,m,v,w){if(w){if(typeof v=="function"){var C=v;v=function(){var se=uf(R);C.call(se)}}var R=OS(d,v,c,0,null,!1,!1,"",LS);return c._reactRootContainer=R,c[ya]=R.current,_d(c.nodeType===8?c.parentNode:c),Xo(),R}for(;w=c.lastChild;)c.removeChild(w);if(typeof v=="function"){var D=v;v=function(){var se=uf(V);D.call(se)}}var V=iy(c,0,!1,null,null,!1,!1,"",LS);return c._reactRootContainer=V,c[ya]=V.current,_d(c.nodeType===8?c.parentNode:c),Xo(function(){df(d,V,m,v)}),V}function mf(c,d,m,v,w){var C=m._reactRootContainer;if(C){var R=C;if(typeof w=="function"){var D=w;w=function(){var V=uf(R);D.call(V)}}df(d,R,c,w)}else R=I4(m,d,c,w,v);return uf(R)}v1=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=pd(d.pendingLanes);m!==0&&(Ag(d,m|1),Zr(d,En()),(At&6)===0&&(cl=En()+500,so()))}break;case 13:Xo(function(){var v=ka(c,1);if(v!==null){var w=_r();oi(v,c,1,w)}}),ay(c,1)}},Ig=function(c){if(c.tag===13){var d=ka(c,134217728);if(d!==null){var m=_r();oi(d,c,134217728,m)}ay(c,134217728)}},y1=function(c){if(c.tag===13){var d=uo(c),m=ka(c,d);if(m!==null){var v=_r();oi(m,c,d,v)}ay(c,d)}},x1=function(){return zt},b1=function(c,d){var m=zt;try{return zt=c,d()}finally{zt=m}},$r=function(c,d,m){switch(d){case"input":if(qt(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var v=m[d];if(v!==c&&v.form===c.form){var w=_h(v);if(!w)throw Error(n(90));He(v),qt(v,w)}}}break;case"textarea":Pe(c,m);break;case"select":d=m.value,d!=null&&W(c,!!m.multiple,d,!1)}},hn=Xv,Ut=Xo;var O4={usingClientEntryPoint:!1,Events:[Id,Zc,_h,it,Qt,Xv]},Kd={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D4={bundleType:Kd.bundleType,version:Kd.version,rendererPackageName:Kd.rendererPackageName,rendererConfig:Kd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=lt(c),c===null?null:c.stateNode},findFiberByHostInstance:Kd.findFiberByHostInstance||A4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pf.isDisabled&&pf.supportsFiber)try{uh=pf.inject(D4),Li=pf}catch{}}return Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4,Jr.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cy(d))throw Error(n(200));return R4(c,d,null,m)},Jr.createRoot=function(c,d){if(!cy(c))throw Error(n(299));var m=!1,v="",w=MS;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(w=d.onRecoverableError)),d=iy(c,1,!1,null,null,m,!1,v,w),c[ya]=d.current,_d(c.nodeType===8?c.parentNode:c),new oy(d)},Jr.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=lt(d),c=c===null?null:c.stateNode,c},Jr.flushSync=function(c){return Xo(c)},Jr.hydrate=function(c,d,m){if(!ff(d))throw Error(n(200));return mf(null,c,d,!0,m)},Jr.hydrateRoot=function(c,d,m){if(!cy(c))throw Error(n(405));var v=m!=null&&m.hydratedSources||null,w=!1,C="",R=MS;if(m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onRecoverableError!==void 0&&(R=m.onRecoverableError)),d=OS(d,null,c,1,m??null,w,!1,C,R),c[ya]=d.current,_d(c),v)for(c=0;c<v.length;c++)m=v[c],w=m._getVersion,w=w(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,w]:d.mutableSourceEagerHydrationData.push(m,w);return new hf(d)},Jr.render=function(c,d,m){if(!ff(d))throw Error(n(200));return mf(null,c,d,!1,m)},Jr.unmountComponentAtNode=function(c){if(!ff(c))throw Error(n(40));return c._reactRootContainer?(Xo(function(){mf(null,null,c,!1,function(){c._reactRootContainer=null,c[ya]=null})}),!0):!1},Jr.unstable_batchedUpdates=Xv,Jr.unstable_renderSubtreeIntoContainer=function(c,d,m,v){if(!ff(m))throw Error(n(200));if(c==null||c._reactInternals===void 0)throw Error(n(38));return mf(c,d,m,!1,v)},Jr.version="18.3.1-next-f1338f8080-20240426",Jr}var HS;function YE(){if(HS)return uy.exports;HS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uy.exports=V4(),uy.exports}var WS;function q4(){if(WS)return gf;WS=1;var e=YE();return gf.createRoot=e.createRoot,gf.hydrateRoot=e.hydrateRoot,gf}var H4=q4();const W4=J0(H4);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var KS="popstate";function K4(e={}){function t(r,s){let{pathname:a,search:o,hash:l}=r.location;return px("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xu(s)}return Z4(t,n,null,e)}function ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Js(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function G4(){return Math.random().toString(36).substring(2,10)}function GS(e,t){return{usr:e.state,key:e.key,idx:t}}function px(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Jl(t):t,state:n,key:t&&t.key||r||G4()}}function xu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Jl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Z4(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l="POP",u=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let S=f(),N=S==null?null:S-h;h=S,u&&u({action:l,location:b.location,delta:N})}function y(S,N){l="PUSH";let E=px(b.location,S,N);h=f()+1;let j=GS(E,h),P=b.createHref(E);try{o.pushState(j,"",P)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(P)}a&&u&&u({action:l,location:b.location,delta:1})}function x(S,N){l="REPLACE";let E=px(b.location,S,N);h=f();let j=GS(E,h),P=b.createHref(E);o.replaceState(j,"",P),a&&u&&u({action:l,location:b.location,delta:0})}function k(S){return J4(S)}let b={get action(){return l},get location(){return e(s,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(KS,p),u=S,()=>{s.removeEventListener(KS,p),u=null}},createHref(S){return t(s,S)},createURL:k,encodeLocation(S){let N=k(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:x,go(S){return o.go(S)}};return b}function J4(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ln(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:xu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function QE(e,t,n="/"){return Y4(e,t,n,!1)}function Y4(e,t,n,r){let s=typeof t=="string"?Jl(t):t,a=Ua(s.pathname||"/",n);if(a==null)return null;let o=XE(e);Q4(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=lM(a);l=oM(o[u],h,r)}return l}function XE(e,t=[],n=[],r="",s=!1){let a=(o,l,u=s,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;ln(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Ma([r,f.relativePath]),y=n.concat(f);o.children&&o.children.length>0&&(ln(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),XE(o.children,t,y,p,u)),!(o.path==null&&!o.index)&&t.push({path:p,score:iM(p,o.index),routesMeta:y})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of e2(o.path))a(o,l,!0,u)}),t}function e2(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=e2(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function Q4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:aM(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var X4=/^:[\w-]+$/,eM=3,tM=2,nM=1,rM=10,sM=-2,ZS=e=>e==="*";function iM(e,t){let n=e.split("/"),r=n.length;return n.some(ZS)&&(r+=sM),t&&(r+=tM),n.filter(s=>!ZS(s)).reduce((s,a)=>s+(X4.test(a)?eM:a===""?nM:rM),r)}function aM(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function oM(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=ym({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),y=u.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=ym({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Ma([a,p.pathname]),pathnameBase:fM(Ma([a,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(a=Ma([a,p.pathnameBase]))}return o}function ym(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=cM(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,{paramName:f,isOptional:p},y)=>{if(f==="*"){let k=l[y]||"";o=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const x=l[y];return p&&!x?h[f]=void 0:h[f]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:e}}function cM(e,t=!1,n=!0){Js(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function lM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Js(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ua(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function dM(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Jl(e):e;return{pathname:n?n.startsWith("/")?n:uM(n,t):t,search:mM(r),hash:pM(s)}}function uM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function my(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hM(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Y0(e){let t=hM(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Q0(e,t,n,r=!1){let s;typeof e=="string"?s=Jl(e):(s={...e},ln(!s.pathname||!s.pathname.includes("?"),my("?","pathname","search",s)),ln(!s.pathname||!s.pathname.includes("#"),my("#","pathname","hash",s)),ln(!s.search||!s.search.includes("#"),my("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}l=p>=0?t[p]:"/"}let u=dM(s,l),h=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var Ma=e=>e.join("/").replace(/\/\/+/g,"/"),fM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var t2=["POST","PUT","PATCH","DELETE"];new Set(t2);var vM=["GET",...t2];new Set(vM);var Yl=g.createContext(null);Yl.displayName="DataRouter";var yp=g.createContext(null);yp.displayName="DataRouterState";g.createContext(!1);var n2=g.createContext({isTransitioning:!1});n2.displayName="ViewTransition";var yM=g.createContext(new Map);yM.displayName="Fetchers";var xM=g.createContext(null);xM.displayName="Await";var Ei=g.createContext(null);Ei.displayName="Navigation";var Lu=g.createContext(null);Lu.displayName="Location";var Ti=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var X0=g.createContext(null);X0.displayName="RouteError";function bM(e,{relative:t}={}){ln(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(Ei),{hash:s,pathname:a,search:o}=Fu(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Ma([n,a])),r.createHref({pathname:l,search:o,hash:s})}function Ql(){return g.useContext(Lu)!=null}function Pi(){return ln(Ql(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Lu).location}var r2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s2(e){g.useContext(Ei).static||g.useLayoutEffect(e)}function Rt(){let{isDataRoute:e}=g.useContext(Ti);return e?IM():wM()}function wM(){ln(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Yl),{basename:t,navigator:n}=g.useContext(Ei),{matches:r}=g.useContext(Ti),{pathname:s}=Pi(),a=JSON.stringify(Y0(r)),o=g.useRef(!1);return s2(()=>{o.current=!0}),g.useCallback((u,h={})=>{if(Js(o.current,r2),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Q0(u,JSON.parse(a),s,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ma([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,a,s,e])}g.createContext(null);function xp(){let{matches:e}=g.useContext(Ti),t=e[e.length-1];return t?t.params:{}}function Fu(e,{relative:t}={}){let{matches:n}=g.useContext(Ti),{pathname:r}=Pi(),s=JSON.stringify(Y0(n));return g.useMemo(()=>Q0(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function kM(e,t){return i2(e,t)}function i2(e,t,n,r,s){ln(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(Ei),{matches:o}=g.useContext(Ti),l=o[o.length-1],u=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let E=p&&p.path||"";a2(h,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=Pi(),x;if(t){let E=typeof t=="string"?Jl(t):t;ln(f==="/"||E.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),x=E}else x=y;let k=x.pathname||"/",b=k;if(f!=="/"){let E=f.replace(/^\//,"").split("/");b="/"+k.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=QE(e,{pathname:b});Js(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Js(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=EM(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Ma([f,a.encodeLocation?a.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Ma([f,a.encodeLocation?a.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,n,r,s);return t&&N?g.createElement(Lu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function SM(){let e=AM(),t=gM(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,o)}var CM=g.createElement(SM,null),NM=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ti.Provider,{value:this.props.routeContext},g.createElement(X0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jM({routeContext:e,match:t,children:n}){let r=g.useContext(Yl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ti.Provider,{value:e},n)}function EM(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);ln(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:y}=n,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let y,x=!1,k=null,b=null;n&&(y=o&&f.route.id?o[f.route.id]:void 0,k=f.route.errorElement||CM,l&&(u<0&&p===0?(a2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,b=null):u===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let S=t.concat(a.slice(0,p+1)),N=()=>{let E;return y?E=k:x?E=b:f.route.Component?E=g.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,g.createElement(jM,{match:f,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(NM,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):N()},null)}function eb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TM(e){let t=g.useContext(Yl);return ln(t,eb(e)),t}function PM(e){let t=g.useContext(yp);return ln(t,eb(e)),t}function _M(e){let t=g.useContext(Ti);return ln(t,eb(e)),t}function tb(e){let t=_M(e),n=t.matches[t.matches.length-1];return ln(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function RM(){return tb("useRouteId")}function AM(){let e=g.useContext(X0),t=PM("useRouteError"),n=tb("useRouteError");return e!==void 0?e:t.errors?.[n]}function IM(){let{router:e}=TM("useNavigate"),t=tb("useNavigate"),n=g.useRef(!1);return s2(()=>{n.current=!0}),g.useCallback(async(s,a={})=>{Js(n.current,r2),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var JS={};function a2(e,t,n){!t&&!JS[e]&&(JS[e]=!0,Js(!1,n))}g.memo(OM);function OM({routes:e,future:t,state:n,unstable_onError:r}){return i2(e,void 0,n,r,t)}function o2({to:e,replace:t,state:n,relative:r}){ln(Ql(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(Ei);Js(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(Ti),{pathname:o}=Pi(),l=Rt(),u=Q0(e,Y0(a),o,r==="path"),h=JSON.stringify(u);return g.useEffect(()=>{l(JSON.parse(h),{replace:t,state:n,relative:r})},[l,h,r,t,n]),null}function It(e){ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DM({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){ln(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof n=="string"&&(n=Jl(n));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:y="default"}=n,x=g.useMemo(()=>{let k=Ua(u,o);return k==null?null:{location:{pathname:k,search:h,hash:f,state:p,key:y},navigationType:r}},[o,u,h,f,p,y,r]);return Js(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:g.createElement(Ei.Provider,{value:l},g.createElement(Lu.Provider,{children:t,value:x}))}function MM({children:e,location:t}){return kM(gx(e),t)}function gx(e,t=[]){let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let a=[...t,s];if(r.type===g.Fragment){n.push.apply(n,gx(r.props.children,a));return}ln(r.type===It,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ln(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gx(r.props.children,a)),n.push(o)}),n}var qf="get",Hf="application/x-www-form-urlencoded";function bp(e){return e!=null&&typeof e.tagName=="string"}function LM(e){return bp(e)&&e.tagName.toLowerCase()==="button"}function FM(e){return bp(e)&&e.tagName.toLowerCase()==="form"}function UM(e){return bp(e)&&e.tagName.toLowerCase()==="input"}function zM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function BM(e,t){return e.button===0&&(!t||t==="_self")&&!zM(e)}function vx(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function $M(e,t){let n=vx(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(a=>{n.append(s,a)})}),n}var vf=null;function VM(){if(vf===null)try{new FormData(document.createElement("form"),0),vf=!1}catch{vf=!0}return vf}var qM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function py(e){return e!=null&&!qM.has(e)?(Js(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hf}"`),null):e}function HM(e,t){let n,r,s,a,o;if(FM(e)){let l=e.getAttribute("action");r=l?Ua(l,t):null,n=e.getAttribute("method")||qf,s=py(e.getAttribute("enctype"))||Hf,a=new FormData(e)}else if(LM(e)||UM(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(r=u?Ua(u,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||qf,s=py(e.getAttribute("formenctype"))||py(l.getAttribute("enctype"))||Hf,a=new FormData(l,e),!VM()){let{name:h,type:f,value:p}=e;if(f==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,p)}}else{if(bp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qf,r=null,s=Hf,o=e}return a&&s==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function WM(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Ua(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function KM(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GM(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ZM(e,t,n){let r=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let o=await KM(a,n);return o.links?o.links():[]}return[]}));return XM(r.flat(1).filter(GM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function YS(e,t,n,r,s,a){let o=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,l=(u,h)=>n[h].pathname!==u.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,h)=>o(u,h)||l(u,h)):a==="data"?t.filter((u,h)=>{let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function JM(e,t,{includeHydrateFallback:n}={}){return YM(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function YM(e){return[...new Set(e)]}function QM(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function XM(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let a=JSON.stringify(QM(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function c2(){let e=g.useContext(Yl);return nb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function eL(){let e=g.useContext(yp);return nb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rb=g.createContext(void 0);rb.displayName="FrameworkContext";function l2(){let e=g.useContext(rb);return nb(e,"You must render this element inside a <HydratedRouter> element"),e}function tL(e,t){let n=g.useContext(rb),[r,s]=g.useState(!1),[a,o]=g.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=t,y=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=N=>{N.forEach(E=>{o(E.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),g.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let x=()=>{s(!0)},k=()=>{s(!1),o(!1)};return n?e!=="intent"?[a,y,{}]:[a,y,{onFocus:Zd(l,x),onBlur:Zd(u,k),onMouseEnter:Zd(h,x),onMouseLeave:Zd(f,k),onTouchStart:Zd(p,x)}]:[!1,y,{}]}function Zd(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function nL({page:e,...t}){let{router:n}=c2(),r=g.useMemo(()=>QE(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(sL,{page:e,matches:r,...t}):null}function rL(e){let{manifest:t,routeModules:n}=l2(),[r,s]=g.useState([]);return g.useEffect(()=>{let a=!1;return ZM(e,t,n).then(o=>{a||s(o)}),()=>{a=!0}},[e,t,n]),r}function sL({page:e,matches:t,...n}){let r=Pi(),{manifest:s,routeModules:a}=l2(),{basename:o}=c2(),{loaderData:l,matches:u}=eL(),h=g.useMemo(()=>YS(e,t,u,s,r,"data"),[e,t,u,s,r]),f=g.useMemo(()=>YS(e,t,u,s,r,"assets"),[e,t,u,s,r]),p=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,b=!1;if(t.forEach(N=>{let E=s.routes[N.route.id];!E||!E.hasLoader||(!h.some(j=>j.route.id===N.route.id)&&N.route.id in l&&a[N.route.id]?.shouldRevalidate||E.hasClientLoader?b=!0:k.add(N.route.id))}),k.size===0)return[];let S=WM(e,o,"data");return b&&k.size>0&&S.searchParams.set("_routes",t.filter(N=>k.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[o,l,r,s,h,t,e,a]),y=g.useMemo(()=>JM(f,s),[f,s]),x=rL(f);return g.createElement(g.Fragment,null,p.map(k=>g.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),y.map(k=>g.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),x.map(({key:k,link:b})=>g.createElement("link",{key:k,nonce:n.nonce,...b})))}function iL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var d2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d2&&(window.__reactRouterVersion="7.9.4")}catch{}function aL({basename:e,children:t,window:n}){let r=g.useRef();r.current==null&&(r.current=K4({window:n,v5Compat:!0}));let s=r.current,[a,o]=g.useState({action:s.action,location:s.location}),l=g.useCallback(u=>{g.startTransition(()=>o(u))},[o]);return g.useLayoutEffect(()=>s.listen(l),[s,l]),g.createElement(DM,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var u2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h2=g.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:h,preventScrollReset:f,viewTransition:p,...y},x){let{basename:k}=g.useContext(Ei),b=typeof h=="string"&&u2.test(h),S,N=!1;if(typeof h=="string"&&b&&(S=h,d2))try{let O=new URL(window.location.href),M=h.startsWith("//")?new URL(O.protocol+h):new URL(h),q=Ua(M.pathname,k);M.origin===O.origin&&q!=null?h=q+M.search+M.hash:N=!0}catch{Js(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=bM(h,{relative:s}),[j,P,T]=tL(r,y),I=dL(h,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function _(O){t&&t(O),O.defaultPrevented||I(O)}let A=g.createElement("a",{...y,...T,href:S||E,onClick:N||a?t:_,ref:iL(x,P),target:u,"data-discover":!b&&n==="render"?"true":void 0});return j&&!b?g.createElement(g.Fragment,null,A,g.createElement(nL,{page:E})):A});h2.displayName="Link";var oL=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...h},f){let p=Fu(o,{relative:h.relative}),y=Pi(),x=g.useContext(yp),{navigator:k,basename:b}=g.useContext(Ei),S=x!=null&&pL(p)&&l===!0,N=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,E=y.pathname,j=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(E=E.toLowerCase(),j=j?j.toLowerCase():null,N=N.toLowerCase()),j&&b&&(j=Ua(j,b)||j);const P=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let T=E===N||!s&&E.startsWith(N)&&E.charAt(P)==="/",I=j!=null&&(j===N||!s&&j.startsWith(N)&&j.charAt(N.length)==="/"),_={isActive:T,isPending:I,isTransitioning:S},A=T?t:void 0,O;typeof r=="function"?O=r(_):O=[r,T?"active":null,I?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(_):a;return g.createElement(h2,{...h,"aria-current":A,className:O,ref:f,style:M,to:o,viewTransition:l},typeof u=="function"?u(_):u)});oL.displayName="NavLink";var cL=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:o=qf,action:l,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:p,...y},x)=>{let k=fL(),b=mL(l,{relative:h}),S=o.toLowerCase()==="get"?"get":"post",N=typeof l=="string"&&u2.test(l),E=j=>{if(u&&u(j),j.defaultPrevented)return;j.preventDefault();let P=j.nativeEvent.submitter,T=P?.getAttribute("formmethod")||o;k(P||j.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:s,state:a,relative:h,preventScrollReset:f,viewTransition:p})};return g.createElement("form",{ref:x,method:S,action:b,onSubmit:r?u:E,...y,"data-discover":!N&&e==="render"?"true":void 0})});cL.displayName="Form";function lL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f2(e){let t=g.useContext(Yl);return ln(t,lL(e)),t}function dL(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=Rt(),u=Pi(),h=Fu(e,{relative:a});return g.useCallback(f=>{if(BM(f,t)){f.preventDefault();let p=n!==void 0?n:xu(u)===xu(h);l(e,{replace:p,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,h,n,r,t,e,s,a,o])}function m2(e){Js(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(vx(e)),n=g.useRef(!1),r=Pi(),s=g.useMemo(()=>$M(r.search,n.current?null:t.current),[r.search]),a=Rt(),o=g.useCallback((l,u)=>{const h=vx(typeof l=="function"?l(new URLSearchParams(s)):l);n.current=!0,a("?"+h,u)},[a,s]);return[s,o]}var uL=0,hL=()=>`__${String(++uL)}__`;function fL(){let{router:e}=f2("useSubmit"),{basename:t}=g.useContext(Ei),n=RM();return g.useCallback(async(r,s={})=>{let{action:a,method:o,encType:l,formData:u,body:h}=HM(r,t);if(s.navigate===!1){let f=s.fetcherKey||hL();await e.fetch(f,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function mL(e,{relative:t}={}){let{basename:n}=g.useContext(Ei),r=g.useContext(Ti);ln(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Fu(e||".",{relative:t})},o=Pi();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(f=>f==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ma([n,a.pathname])),xu(a)}function pL(e,{relative:t}={}){let n=g.useContext(n2);ln(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=f2("useViewTransitionState"),s=Fu(e,{relative:t});if(!n.isTransitioning)return!1;let a=Ua(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ua(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ym(s.pathname,o)!=null||ym(s.pathname,a)!=null}var Uu=YE();const p2=J0(Uu);var Xl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gL={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},vL=class{#e=gL;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},oc=new vL;function yL(e){setTimeout(e,0)}var pc=typeof window>"u"||"Deno"in globalThis;function Ar(){}function xL(e,t){return typeof e=="function"?e(t):e}function yx(e){return typeof e=="number"&&e>=0&&e!==1/0}function g2(e,t){return Math.max(e+(t||0)-Date.now(),0)}function No(e,t){return typeof e=="function"?e(t):e}function qs(e,t){return typeof e=="function"?e(t):e}function QS(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==sb(o,t.options))return!1}else if(!bu(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function XS(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(gc(t.options.mutationKey)!==gc(a))return!1}else if(!bu(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function sb(e,t){return(t?.queryKeyHashFn||gc)(e)}function gc(e){return JSON.stringify(e,(t,n)=>xx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function bu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>bu(e[n],t[n])):!1}var bL=Object.prototype.hasOwnProperty;function v2(e,t){if(e===t)return e;const n=eC(e)&&eC(t);if(!n&&!(xx(e)&&xx(t)))return t;const s=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),o=a.length,l=n?new Array(o):{};let u=0;for(let h=0;h<o;h++){const f=n?h:a[h],p=e[f],y=t[f];if(p===y){l[f]=p,(n?h<s:bL.call(e,f))&&u++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){l[f]=y;continue}const x=v2(p,y);l[f]=x,x===p&&u++}return s===o&&u===s?e:l}function xm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function eC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function xx(e){if(!tC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!tC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tC(e){return Object.prototype.toString.call(e)==="[object Object]"}function wL(e){return new Promise(t=>{oc.setTimeout(t,e)})}function bx(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?v2(e,t):t}function kL(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function SL(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var ib=Symbol();function y2(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===ib?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function x2(e,t){return typeof e=="function"?e(...t):!!e}var CL=class extends Xl{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!pc&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ab=new CL;function wx(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var NL=yL;function jL(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=NL;const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{a(()=>{l(...u)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Qn=jL(),EL=class extends Xl{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!pc&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},bm=new EL;function TL(e){return Math.min(1e3*2**e,3e4)}function b2(e){return(e??"online")==="online"?bm.isOnline():!0}var kx=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function w2(e){let t=!1,n=0,r;const s=wx(),a=()=>s.status!=="pending",o=b=>{if(!a()){const S=new kx(b);y(S),e.onCancel?.(S)}},l=()=>{t=!0},u=()=>{t=!1},h=()=>ab.isFocused()&&(e.networkMode==="always"||bm.isOnline())&&e.canRun(),f=()=>b2(e.networkMode)&&e.canRun(),p=b=>{a()||(r?.(),s.resolve(b))},y=b=>{a()||(r?.(),s.reject(b))},x=()=>new Promise(b=>{r=S=>{(a()||h())&&b(S)},e.onPause?.()}).then(()=>{r=void 0,a()||e.onContinue?.()}),k=()=>{if(a())return;let b;const S=n===0?e.initialPromise:void 0;try{b=S??e.fn()}catch(N){b=Promise.reject(N)}Promise.resolve(b).then(p).catch(N=>{if(a())return;const E=e.retry??(pc?0:3),j=e.retryDelay??TL,P=typeof j=="function"?j(n,N):j,T=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,N);if(t||!T){y(N);return}n++,e.onFail?.(n,N),wL(P).then(()=>h()?void 0:x()).then(()=>{t?y(N):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r?.(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?k():x().then(k),s)}}var k2=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yx(this.gcTime)&&(this.#e=oc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pc?1/0:300*1e3))}clearGcTimeout(){this.#e&&(oc.clearTimeout(this.#e),this.#e=void 0)}},PL=class extends k2{#e;#t;#n;#s;#r;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=nC(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=nC(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=bx(this.state.data,e,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Ar).catch(Ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>qs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ib||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>No(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!g2(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},s=()=>{const l=y2(this.options,t),h=(()=>{const f={client:this.#s,queryKey:this.queryKey,meta:this.meta};return r(f),f})();return this.#o=!1,this.options.persister?this.options.persister(l,h,this):l(h)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:s};return r(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=w2({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof kx&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,u)=>{this.#i({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof kx){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#i({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#i(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...S2(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Qn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function S2(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:b2(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function nC(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var _L=class extends Xl{constructor(e,t){super(),this.options=t,this.#e=e,this.#i=null,this.#o=wx(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#p;#h;#f;#l;#d;#c;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),rC(this.#t,this.options)?this.#u():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Sx(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Sx(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#k(),this.#t.setOptions(this.options),t._defaulted&&!xm(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&sC(this.#t,n,this.options,t)&&this.#u(),this.updateResult(),r&&(this.#t!==n||qs(this.options.enabled,this.#t)!==qs(t.enabled,this.#t)||No(this.options.staleTime,this.#t)!==No(t.staleTime,this.#t))&&this.#g();const s=this.#v();r&&(this.#t!==n||qs(this.options.enabled,this.#t)!==qs(t.enabled,this.#t)||s!==this.#c)&&this.#y(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return AL(this,n)&&(this.#s=n,this.#a=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,r))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#u(e){this.#k();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ar)),t}#g(){this.#b();const e=No(this.options.staleTime,this.#t);if(pc||this.#s.isStale||!yx(e))return;const n=g2(this.#s.dataUpdatedAt,e)+1;this.#l=oc.setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#c=e,!(pc||qs(this.options.enabled,this.#t)===!1||!yx(this.#c)||this.#c===0)&&(this.#d=oc.setInterval(()=>{(this.options.refetchIntervalInBackground||ab.isFocused())&&this.#u()},this.#c))}#x(){this.#g(),this.#y(this.#v())}#b(){this.#l&&(oc.clearTimeout(this.#l),this.#l=void 0)}#w(){this.#d&&(oc.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#s,a=this.#r,o=this.#a,u=e!==n?e.state:this.#n,{state:h}=e;let f={...h},p=!1,y;if(t._optimisticResults){const A=this.hasListeners(),O=!A&&rC(e,t),M=A&&sC(e,n,t,r);(O||M)&&(f={...f,...S2(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:k,status:b}=f;y=f.data;let S=!1;if(t.placeholderData!==void 0&&y===void 0&&b==="pending"){let A;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(A=s.data,S=!0):A=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,A!==void 0&&(b="success",y=bx(s?.data,A,t),p=!0)}if(t.select&&y!==void 0&&!S)if(s&&y===a?.data&&t.select===this.#p)y=this.#h;else try{this.#p=t.select,y=t.select(y),y=bx(s?.data,y,t),this.#h=y,this.#i=null}catch(A){this.#i=A}this.#i&&(x=this.#i,y=this.#h,k=Date.now(),b="error");const N=f.fetchStatus==="fetching",E=b==="pending",j=b==="error",P=E&&N,T=y!==void 0,_={status:b,fetchStatus:f.fetchStatus,isPending:E,isSuccess:b==="success",isError:j,isInitialLoading:P,isLoading:P,data:y,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:k,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:N,isRefetching:N&&!E,isLoadingError:j&&!T,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:j&&T,isStale:ob(e,t),refetch:this.refetch,promise:this.#o,isEnabled:qs(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const A=q=>{_.status==="error"?q.reject(_.error):_.data!==void 0&&q.resolve(_.data)},O=()=>{const q=this.#o=_.promise=wx();A(q)},M=this.#o;switch(M.status){case"pending":e.queryHash===n.queryHash&&A(M);break;case"fulfilled":(_.status==="error"||_.data!==M.value)&&O();break;case"rejected":(_.status!=="error"||_.error!==M.reason)&&O();break}}return _}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#f=this.#t),xm(t,e))return;this.#s=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#m.size)return!0;const a=new Set(s??this.#m);return this.options.throwOnError&&a.add("error"),Object.keys(this.#s).some(o=>{const l=o;return this.#s[l]!==e[l]&&a.has(l)})};this.#S({listeners:n()})}#k(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#S(e){Qn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function RL(e,t){return qs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function rC(e,t){return RL(e,t)||e.state.data!==void 0&&Sx(e,t,t.refetchOnMount)}function Sx(e,t,n){if(qs(t.enabled,e)!==!1&&No(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ob(e,t)}return!1}function sC(e,t,n,r){return(e!==t||qs(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ob(e,n)}function ob(e,t){return qs(t.enabled,e)!==!1&&e.isStaleByTime(No(t.staleTime,e))}function AL(e,t){return!xm(e.getCurrentResult(),t)}function iC(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let f=!1;const p=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},y=y2(t.options,t.fetchOptions),x=async(k,b,S)=>{if(f)return Promise.reject();if(b==null&&k.pages.length)return Promise.resolve(k);const E=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:b,direction:S?"backward":"forward",meta:t.options.meta};return p(I),I})(),j=await y(E),{maxPages:P}=t.options,T=S?SL:kL;return{pages:T(k.pages,j,P),pageParams:T(k.pageParams,b,P)}};if(s&&a.length){const k=s==="backward",b=k?IL:aC,S={pages:a,pageParams:o},N=b(r,S);l=await x(S,N,k)}else{const k=e??a.length;do{const b=u===0?o[0]??r.initialPageParam:aC(r,l);if(u>0&&b==null)break;l=await x(l,b),u++}while(u<k)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=h}}}function aC(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function IL(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var OL=class extends k2{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||C2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=w2({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#r({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#s.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:s}),await this.#n.config.onMutate?.(e,this,n);const o=await this.options.onMutate?.(e,n);o!==this.state.context&&this.#r({type:"pending",context:o,variables:e,isPaused:s})}const a=await this.#s.start();return await this.#n.config.onSuccess?.(a,e,this.state.context,this,n),await this.options.onSuccess?.(a,e,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,e,this.state.context,n),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#n.config.onError?.(a,e,this.state.context,this,n),await this.options.onError?.(a,e,this.state.context,n),await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,a,e,this.state.context,n),a}finally{this.#r({type:"error",error:a})}}finally{this.#n.runNext(this)}}#r(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Qn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function C2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var DL=class extends Xl{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new OL({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=yf(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=yf(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=yf(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=yf(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Qn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>XS(t,n))}findAll(e={}){return this.getAll().filter(t=>XS(e,t))}notify(e){Qn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Qn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ar))))}};function yf(e){return e.options.scope?.id}var ML=class extends Xl{#e;#t=void 0;#n;#s;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),xm(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&gc(n.mutationKey)!==gc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(t,n){return this.#s=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??C2();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){Qn.batch(()=>{if(this.#s&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#s.onSuccess?.(t.data,n,r,s),this.#s.onSettled?.(t.data,null,n,r,s)):t?.type==="error"&&(this.#s.onError?.(t.error,n,r,s),this.#s.onSettled?.(void 0,t.error,n,r,s))}this.listeners.forEach(n=>{n(this.#t)})})}},LL=class extends Xl{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??sb(r,t);let a=this.get(s);return a||(a=new PL({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Qn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>QS(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>QS(e,n)):t}notify(e){Qn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Qn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Qn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},FL=class{#e;#t;#n;#s;#r;#a;#o;#i;constructor(e={}){this.#e=e.queryCache||new LL,this.#t=e.mutationCache||new DL,this.#n=e.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=ab.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=bm.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(No(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,o=xL(t,a);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Qn.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Qn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Qn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Qn.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Ar).catch(Ar)}invalidateQueries(e,t={}){return Qn.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Qn.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Ar)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Ar)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(No(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ar).catch(Ar)}fetchInfiniteQuery(e){return e.behavior=iC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ar).catch(Ar)}ensureInfiniteQueryData(e){return e.behavior=iC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bm.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#s.set(gc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(r=>{bu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(gc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{bu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ib&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},N2=g.createContext(void 0),Nr=e=>{const t=g.useContext(N2);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},UL=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(N2.Provider,{value:e,children:t})),j2=g.createContext(!1),zL=()=>g.useContext(j2);j2.Provider;function BL(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $L=g.createContext(BL()),VL=()=>g.useContext($L),qL=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},HL=e=>{g.useEffect(()=>{e.clearReset()},[e])},WL=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||x2(n,[e.error,r])),KL=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},GL=(e,t)=>e.isLoading&&e.isFetching&&!t,ZL=(e,t)=>e?.suspense&&t.isPending,oC=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function JL(e,t,n){const r=zL(),s=VL(),a=Nr(),o=a.defaultQueryOptions(e);a.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",KL(o),qL(o,s),HL(s);const l=!a.getQueryCache().get(o.queryHash),[u]=g.useState(()=>new t(a,o)),h=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(p=>{const y=f?u.subscribe(Qn.batchCalls(p)):Ar;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),g.useEffect(()=>{u.setOptions(o)},[o,u]),ZL(o,h))throw oC(o,u,s);if(WL({result:h,errorResetBoundary:s,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!pc&&GL(h,r)&&(l?oC(o,u,s):a.getQueryCache().get(o.queryHash)?.promise)?.catch(Ar).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?h:u.trackResult(h)}function Jt(e,t){return JL(e,_L)}function Sr(e,t){const n=Nr(),[r]=g.useState(()=>new ML(n,e));g.useEffect(()=>{r.setOptions(e)},[r,e]);const s=g.useSyncExternalStore(g.useCallback(o=>r.subscribe(Qn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=g.useCallback((o,l)=>{r.mutate(o,l).catch(Ar)},[r]);if(s.error&&x2(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const YL=new FL({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}});function E2(e,t){return function(){return e.apply(t,arguments)}}const{toString:QL}=Object.prototype,{getPrototypeOf:cb}=Object,{iterator:wp,toStringTag:T2}=Symbol,kp=(e=>t=>{const n=QL.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_i=e=>(e=e.toLowerCase(),t=>kp(t)===e),Sp=e=>t=>typeof t===e,{isArray:ed}=Array,Dl=Sp("undefined");function zu(e){return e!==null&&!Dl(e)&&e.constructor!==null&&!Dl(e.constructor)&&cs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const P2=_i("ArrayBuffer");function XL(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&P2(e.buffer),t}const e3=Sp("string"),cs=Sp("function"),_2=Sp("number"),Bu=e=>e!==null&&typeof e=="object",t3=e=>e===!0||e===!1,Wf=e=>{if(kp(e)!=="object")return!1;const t=cb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(T2 in e)&&!(wp in e)},n3=e=>{if(!Bu(e)||zu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},r3=_i("Date"),s3=_i("File"),i3=_i("Blob"),a3=_i("FileList"),o3=e=>Bu(e)&&cs(e.pipe),c3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||cs(e.append)&&((t=kp(e))==="formdata"||t==="object"&&cs(e.toString)&&e.toString()==="[object FormData]"))},l3=_i("URLSearchParams"),[d3,u3,h3,f3]=["ReadableStream","Request","Response","Headers"].map(_i),m3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $u(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),ed(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(zu(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let l;for(r=0;r<o;r++)l=a[r],t.call(null,e[l],l,e)}}function R2(e,t){if(zu(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const cc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,A2=e=>!Dl(e)&&e!==cc;function Cx(){const{caseless:e,skipUndefined:t}=A2(this)&&this||{},n={},r=(s,a)=>{const o=e&&R2(n,a)||a;Wf(n[o])&&Wf(s)?n[o]=Cx(n[o],s):Wf(s)?n[o]=Cx({},s):ed(s)?n[o]=s.slice():(!t||!Dl(s))&&(n[o]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&$u(arguments[s],r);return n}const p3=(e,t,n,{allOwnKeys:r}={})=>($u(t,(s,a)=>{n&&cs(s)?e[a]=E2(s,n):e[a]=s},{allOwnKeys:r}),e),g3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),v3=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},y3=(e,t,n,r)=>{let s,a,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)o=s[a],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&cb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},x3=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},b3=e=>{if(!e)return null;if(ed(e))return e;let t=e.length;if(!_2(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},w3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&cb(Uint8Array)),k3=(e,t)=>{const r=(e&&e[wp]).call(e);let s;for(;(s=r.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},S3=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},C3=_i("HTMLFormElement"),N3=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),cC=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),j3=_i("RegExp"),I2=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};$u(n,(s,a)=>{let o;(o=t(s,a,e))!==!1&&(r[a]=o||s)}),Object.defineProperties(e,r)},E3=e=>{I2(e,(t,n)=>{if(cs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(cs(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},T3=(e,t)=>{const n={},r=s=>{s.forEach(a=>{n[a]=!0})};return ed(e)?r(e):r(String(e).split(t)),n},P3=()=>{},_3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function R3(e){return!!(e&&cs(e.append)&&e[T2]==="FormData"&&e[wp])}const A3=e=>{const t=new Array(10),n=(r,s)=>{if(Bu(r)){if(t.indexOf(r)>=0)return;if(zu(r))return r;if(!("toJSON"in r)){t[s]=r;const a=ed(r)?[]:{};return $u(r,(o,l)=>{const u=n(o,s+1);!Dl(u)&&(a[l]=u)}),t[s]=void 0,a}}return r};return n(e,0)},I3=_i("AsyncFunction"),O3=e=>e&&(Bu(e)||cs(e))&&cs(e.then)&&cs(e.catch),O2=((e,t)=>e?setImmediate:t?((n,r)=>(cc.addEventListener("message",({source:s,data:a})=>{s===cc&&a===n&&r.length&&r.shift()()},!1),s=>{r.push(s),cc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",cs(cc.postMessage)),D3=typeof queueMicrotask<"u"?queueMicrotask.bind(cc):typeof process<"u"&&process.nextTick||O2,M3=e=>e!=null&&cs(e[wp]),ae={isArray:ed,isArrayBuffer:P2,isBuffer:zu,isFormData:c3,isArrayBufferView:XL,isString:e3,isNumber:_2,isBoolean:t3,isObject:Bu,isPlainObject:Wf,isEmptyObject:n3,isReadableStream:d3,isRequest:u3,isResponse:h3,isHeaders:f3,isUndefined:Dl,isDate:r3,isFile:s3,isBlob:i3,isRegExp:j3,isFunction:cs,isStream:o3,isURLSearchParams:l3,isTypedArray:w3,isFileList:a3,forEach:$u,merge:Cx,extend:p3,trim:m3,stripBOM:g3,inherits:v3,toFlatObject:y3,kindOf:kp,kindOfTest:_i,endsWith:x3,toArray:b3,forEachEntry:k3,matchAll:S3,isHTMLForm:C3,hasOwnProperty:cC,hasOwnProp:cC,reduceDescriptors:I2,freezeMethods:E3,toObjectSet:T3,toCamelCase:N3,noop:P3,toFiniteNumber:_3,findKey:R2,global:cc,isContextDefined:A2,isSpecCompliantForm:R3,toJSONObject:A3,isAsyncFn:I3,isThenable:O3,setImmediate:O2,asap:D3,isIterable:M3};function ft(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ae.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}});const D2=ft.prototype,M2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{M2[e]={value:e}});Object.defineProperties(ft,M2);Object.defineProperty(D2,"isAxiosError",{value:!0});ft.from=(e,t,n,r,s,a)=>{const o=Object.create(D2);ae.toFlatObject(e,o,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const l=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return ft.call(o,l,u,n,r,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};const L3=null;function Nx(e){return ae.isPlainObject(e)||ae.isArray(e)}function L2(e){return ae.endsWith(e,"[]")?e.slice(0,-2):e}function lC(e,t,n){return e?e.concat(t).map(function(s,a){return s=L2(s),!n&&a?"["+s+"]":s}).join(n?".":""):t}function F3(e){return ae.isArray(e)&&!e.some(Nx)}const U3=ae.toFlatObject(ae,{},null,function(t){return/^is[A-Z]/.test(t)});function Cp(e,t,n){if(!ae.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ae.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,S){return!ae.isUndefined(S[b])});const r=n.metaTokens,s=n.visitor||f,a=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(t);if(!ae.isFunction(s))throw new TypeError("visitor must be a function");function h(k){if(k===null)return"";if(ae.isDate(k))return k.toISOString();if(ae.isBoolean(k))return k.toString();if(!u&&ae.isBlob(k))throw new ft("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(k)||ae.isTypedArray(k)?u&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function f(k,b,S){let N=k;if(k&&!S&&typeof k=="object"){if(ae.endsWith(b,"{}"))b=r?b:b.slice(0,-2),k=JSON.stringify(k);else if(ae.isArray(k)&&F3(k)||(ae.isFileList(k)||ae.endsWith(b,"[]"))&&(N=ae.toArray(k)))return b=L2(b),N.forEach(function(j,P){!(ae.isUndefined(j)||j===null)&&t.append(o===!0?lC([b],P,a):o===null?b:b+"[]",h(j))}),!1}return Nx(k)?!0:(t.append(lC(S,b,a),h(k)),!1)}const p=[],y=Object.assign(U3,{defaultVisitor:f,convertValue:h,isVisitable:Nx});function x(k,b){if(!ae.isUndefined(k)){if(p.indexOf(k)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(k),ae.forEach(k,function(N,E){(!(ae.isUndefined(N)||N===null)&&s.call(t,N,ae.isString(E)?E.trim():E,b,y))===!0&&x(N,b?b.concat(E):[E])}),p.pop()}}if(!ae.isObject(e))throw new TypeError("data must be an object");return x(e),t}function dC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lb(e,t){this._pairs=[],e&&Cp(e,this,t)}const F2=lb.prototype;F2.append=function(t,n){this._pairs.push([t,n])};F2.toString=function(t){const n=t?function(r){return t.call(this,r,dC)}:dC;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function z3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function U2(e,t,n){if(!t)return e;const r=n&&n.encode||z3;ae.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(t,n):a=ae.isURLSearchParams(t)?t.toString():new lb(t,n).toString(r),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class uC{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ae.forEach(this.handlers,function(r){r!==null&&t(r)})}}const z2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B3=typeof URLSearchParams<"u"?URLSearchParams:lb,$3=typeof FormData<"u"?FormData:null,V3=typeof Blob<"u"?Blob:null,q3={isBrowser:!0,classes:{URLSearchParams:B3,FormData:$3,Blob:V3},protocols:["http","https","file","blob","url","data"]},db=typeof window<"u"&&typeof document<"u",jx=typeof navigator=="object"&&navigator||void 0,H3=db&&(!jx||["ReactNative","NativeScript","NS"].indexOf(jx.product)<0),W3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",K3=db&&window.location.href||"http://localhost",G3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:db,hasStandardBrowserEnv:H3,hasStandardBrowserWebWorkerEnv:W3,navigator:jx,origin:K3},Symbol.toStringTag,{value:"Module"})),wr={...G3,...q3};function Z3(e,t){return Cp(e,new wr.classes.URLSearchParams,{visitor:function(n,r,s,a){return wr.isNode&&ae.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function J3(e){return ae.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Y3(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}function B2(e){function t(n,r,s,a){let o=n[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=a>=n.length;return o=!o&&ae.isArray(s)?s.length:o,u?(ae.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!ae.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],a)&&ae.isArray(s[o])&&(s[o]=Y3(s[o])),!l)}if(ae.isFormData(e)&&ae.isFunction(e.entries)){const n={};return ae.forEachEntry(e,(r,s)=>{t(J3(r),s,n,0)}),n}return null}function Q3(e,t,n){if(ae.isString(e))try{return(t||JSON.parse)(e),ae.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Vu={transitional:z2,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,a=ae.isObject(t);if(a&&ae.isHTMLForm(t)&&(t=new FormData(t)),ae.isFormData(t))return s?JSON.stringify(B2(t)):t;if(ae.isArrayBuffer(t)||ae.isBuffer(t)||ae.isStream(t)||ae.isFile(t)||ae.isBlob(t)||ae.isReadableStream(t))return t;if(ae.isArrayBufferView(t))return t.buffer;if(ae.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Z3(t,this.formSerializer).toString();if((l=ae.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Cp(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),Q3(t)):t}],transformResponse:[function(t){const n=this.transitional||Vu.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ae.isResponse(t)||ae.isReadableStream(t))return t;if(t&&ae.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ft.from(l,ft.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wr.classes.FormData,Blob:wr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],e=>{Vu.headers[e]={}});const X3=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eF=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&X3[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},hC=Symbol("internals");function Jd(e){return e&&String(e).trim().toLowerCase()}function Kf(e){return e===!1||e==null?e:ae.isArray(e)?e.map(Kf):String(e)}function tF(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const nF=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function gy(e,t,n,r,s){if(ae.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!ae.isString(t)){if(ae.isString(r))return t.indexOf(r)!==-1;if(ae.isRegExp(r))return r.test(t)}}function rF(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function sF(e,t){const n=ae.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,a,o){return this[r].call(this,t,s,a,o)},configurable:!0})})}let ls=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function a(l,u,h){const f=Jd(u);if(!f)throw new Error("header name must be a non-empty string");const p=ae.findKey(s,f);(!p||s[p]===void 0||h===!0||h===void 0&&s[p]!==!1)&&(s[p||u]=Kf(l))}const o=(l,u)=>ae.forEach(l,(h,f)=>a(h,f,u));if(ae.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ae.isString(t)&&(t=t.trim())&&!nF(t))o(eF(t),n);else if(ae.isObject(t)&&ae.isIterable(t)){let l={},u,h;for(const f of t){if(!ae.isArray(f))throw TypeError("Object iterator must return a key-value pair");l[h=f[0]]=(u=l[h])?ae.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(l,n)}else t!=null&&a(n,t,r);return this}get(t,n){if(t=Jd(t),t){const r=ae.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return tF(s);if(ae.isFunction(n))return n.call(this,s,r);if(ae.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Jd(t),t){const r=ae.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||gy(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function a(o){if(o=Jd(o),o){const l=ae.findKey(r,o);l&&(!n||gy(r,r[l],l,n))&&(delete r[l],s=!0)}}return ae.isArray(t)?t.forEach(a):a(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const a=n[r];(!t||gy(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const n=this,r={};return ae.forEach(this,(s,a)=>{const o=ae.findKey(r,a);if(o){n[o]=Kf(s),delete n[a];return}const l=t?rF(a):String(a).trim();l!==a&&delete n[a],n[l]=Kf(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ae.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&ae.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[hC]=this[hC]={accessors:{}}).accessors,s=this.prototype;function a(o){const l=Jd(o);r[l]||(sF(s,o),r[l]=!0)}return ae.isArray(t)?t.forEach(a):a(t),this}};ls.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ae.reduceDescriptors(ls.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ae.freezeMethods(ls);function vy(e,t){const n=this||Vu,r=t||n,s=ls.from(r.headers);let a=r.data;return ae.forEach(e,function(l){a=l.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function $2(e){return!!(e&&e.__CANCEL__)}function td(e,t,n){ft.call(this,e??"canceled",ft.ERR_CANCELED,t,n),this.name="CanceledError"}ae.inherits(td,ft,{__CANCEL__:!0});function V2(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ft("Request failed with status code "+n.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function iF(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function aF(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,a=0,o;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),f=r[a];o||(o=h),n[s]=u,r[s]=h;let p=a,y=0;for(;p!==s;)y+=n[p++],p=p%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),h-o<t)return;const x=f&&h-f;return x?Math.round(y*1e3/x):void 0}}function oF(e,t){let n=0,r=1e3/t,s,a;const o=(h,f=Date.now())=>{n=f,s=null,a&&(clearTimeout(a),a=null),e(...h)};return[(...h)=>{const f=Date.now(),p=f-n;p>=r?o(h,f):(s=h,a||(a=setTimeout(()=>{a=null,o(s)},r-p)))},()=>s&&o(s)]}const wm=(e,t,n=3)=>{let r=0;const s=aF(50,250);return oF(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,u=o-r,h=s(u),f=o<=l;r=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:h||void 0,estimated:h&&l&&f?(l-o)/h:void 0,event:a,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},fC=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},mC=e=>(...t)=>ae.asap(()=>e(...t)),cF=wr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,wr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(wr.origin),wr.navigator&&/(msie|trident)/i.test(wr.navigator.userAgent)):()=>!0,lF=wr.hasStandardBrowserEnv?{write(e,t,n,r,s,a){const o=[e+"="+encodeURIComponent(t)];ae.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ae.isString(r)&&o.push("path="+r),ae.isString(s)&&o.push("domain="+s),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dF(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function uF(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function q2(e,t,n){let r=!dF(t);return e&&(r||n==!1)?uF(e,t):t}const pC=e=>e instanceof ls?{...e}:e;function vc(e,t){t=t||{};const n={};function r(h,f,p,y){return ae.isPlainObject(h)&&ae.isPlainObject(f)?ae.merge.call({caseless:y},h,f):ae.isPlainObject(f)?ae.merge({},f):ae.isArray(f)?f.slice():f}function s(h,f,p,y){if(ae.isUndefined(f)){if(!ae.isUndefined(h))return r(void 0,h,p,y)}else return r(h,f,p,y)}function a(h,f){if(!ae.isUndefined(f))return r(void 0,f)}function o(h,f){if(ae.isUndefined(f)){if(!ae.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function l(h,f,p){if(p in t)return r(h,f);if(p in e)return r(void 0,h)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(h,f,p)=>s(pC(h),pC(f),p,!0)};return ae.forEach(Object.keys({...e,...t}),function(f){const p=u[f]||s,y=p(e[f],t[f],f);ae.isUndefined(y)&&p!==l||(n[f]=y)}),n}const H2=e=>{const t=vc({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=ls.from(o),t.url=U2(q2(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ae.isFormData(n)){if(wr.hasStandardBrowserEnv||wr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ae.isFunction(n.getHeaders)){const u=n.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,p])=>{h.includes(f.toLowerCase())&&o.set(f,p)})}}if(wr.hasStandardBrowserEnv&&(r&&ae.isFunction(r)&&(r=r(t)),r||r!==!1&&cF(t.url))){const u=s&&a&&lF.read(a);u&&o.set(s,u)}return t},hF=typeof XMLHttpRequest<"u",fF=hF&&function(e){return new Promise(function(n,r){const s=H2(e);let a=s.data;const o=ls.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:h}=s,f,p,y,x,k;function b(){x&&x(),k&&k(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function N(){if(!S)return;const j=ls.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),T={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:j,config:e,request:S};V2(function(_){n(_),b()},function(_){r(_),b()},T),S=null}"onloadend"in S?S.onloadend=N:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(N)},S.onabort=function(){S&&(r(new ft("Request aborted",ft.ECONNABORTED,e,S)),S=null)},S.onerror=function(P){const T=P&&P.message?P.message:"Network Error",I=new ft(T,ft.ERR_NETWORK,e,S);I.event=P||null,r(I),S=null},S.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||z2;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),r(new ft(P,T.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,S)),S=null},a===void 0&&o.setContentType(null),"setRequestHeader"in S&&ae.forEach(o.toJSON(),function(P,T){S.setRequestHeader(T,P)}),ae.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),l&&l!=="json"&&(S.responseType=s.responseType),h&&([y,k]=wm(h,!0),S.addEventListener("progress",y)),u&&S.upload&&([p,x]=wm(u),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(f=j=>{S&&(r(!j||j.type?new td(null,e,S):j),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const E=iF(s.url);if(E&&wr.protocols.indexOf(E)===-1){r(new ft("Unsupported protocol "+E+":",ft.ERR_BAD_REQUEST,e));return}S.send(a||null)})},mF=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const a=function(h){if(!s){s=!0,l();const f=h instanceof Error?h:this.reason;r.abort(f instanceof ft?f:new td(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,a(new ft(`timeout ${t} of ms exceeded`,ft.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(a):h.removeEventListener("abort",a)}),e=null)};e.forEach(h=>h.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>ae.asap(l),u}},pF=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},gF=async function*(e,t){for await(const n of vF(e))yield*pF(n,t)},vF=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},gC=(e,t,n,r)=>{const s=gF(e,t);let a=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await s.next();if(h){l(),u.close();return}let p=f.byteLength;if(n){let y=a+=p;n(y)}u.enqueue(new Uint8Array(f))}catch(h){throw l(h),h}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},vC=64*1024,{isFunction:xf}=ae,yF=(({Request:e,Response:t})=>({Request:e,Response:t}))(ae.global),{ReadableStream:yC,TextEncoder:xC}=ae.global,bC=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xF=e=>{e=ae.merge.call({skipUndefined:!0},yF,e);const{fetch:t,Request:n,Response:r}=e,s=t?xf(t):typeof fetch=="function",a=xf(n),o=xf(r);if(!s)return!1;const l=s&&xf(yC),u=s&&(typeof xC=="function"?(k=>b=>k.encode(b))(new xC):async k=>new Uint8Array(await new n(k).arrayBuffer())),h=a&&l&&bC(()=>{let k=!1;const b=new n(wr.origin,{body:new yC,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!b}),f=o&&l&&bC(()=>ae.isReadableStream(new r("").body)),p={stream:f&&(k=>k.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!p[k]&&(p[k]=(b,S)=>{let N=b&&b[k];if(N)return N.call(b);throw new ft(`Response type '${k}' is not supported`,ft.ERR_NOT_SUPPORT,S)})});const y=async k=>{if(k==null)return 0;if(ae.isBlob(k))return k.size;if(ae.isSpecCompliantForm(k))return(await new n(wr.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(k)||ae.isArrayBuffer(k))return k.byteLength;if(ae.isURLSearchParams(k)&&(k=k+""),ae.isString(k))return(await u(k)).byteLength},x=async(k,b)=>{const S=ae.toFiniteNumber(k.getContentLength());return S??y(b)};return async k=>{let{url:b,method:S,data:N,signal:E,cancelToken:j,timeout:P,onDownloadProgress:T,onUploadProgress:I,responseType:_,headers:A,withCredentials:O="same-origin",fetchOptions:M}=H2(k),q=t||fetch;_=_?(_+"").toLowerCase():"text";let z=mF([E,j&&j.toAbortSignal()],P),G=null;const oe=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let ke;try{if(I&&h&&S!=="get"&&S!=="head"&&(ke=await x(A,N))!==0){let B=new n(b,{method:"POST",body:N,duplex:"half"}),te;if(ae.isFormData(N)&&(te=B.headers.get("content-type"))&&A.setContentType(te),B.body){const[ee,ye]=fC(ke,wm(mC(I)));N=gC(B.body,vC,ee,ye)}}ae.isString(O)||(O=O?"include":"omit");const J=a&&"credentials"in n.prototype,ge={...M,signal:z,method:S.toUpperCase(),headers:A.normalize().toJSON(),body:N,duplex:"half",credentials:J?O:void 0};G=a&&new n(b,ge);let U=await(a?q(G,M):q(b,ge));const ie=f&&(_==="stream"||_==="response");if(f&&(T||ie&&oe)){const B={};["status","statusText","headers"].forEach(Te=>{B[Te]=U[Te]});const te=ae.toFiniteNumber(U.headers.get("content-length")),[ee,ye]=T&&fC(te,wm(mC(T),!0))||[];U=new r(gC(U.body,vC,ee,()=>{ye&&ye(),oe&&oe()}),B)}_=_||"text";let fe=await p[ae.findKey(p,_)||"text"](U,k);return!ie&&oe&&oe(),await new Promise((B,te)=>{V2(B,te,{data:fe,headers:ls.from(U.headers),status:U.status,statusText:U.statusText,config:k,request:G})})}catch(J){throw oe&&oe(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,k,G),{cause:J.cause||J}):ft.from(J,J&&J.code,k,G)}}},bF=new Map,W2=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,a=[r,s,n];let o=a.length,l=o,u,h,f=bF;for(;l--;)u=a[l],h=f.get(u),h===void 0&&f.set(u,h=l?new Map:xF(t)),f=h;return h};W2();const Ex={http:L3,xhr:fF,fetch:{get:W2}};ae.forEach(Ex,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const wC=e=>`- ${e}`,wF=e=>ae.isFunction(e)||e===null||e===!1,K2={getAdapter:(e,t)=>{e=ae.isArray(e)?e:[e];const{length:n}=e;let r,s;const a={};for(let o=0;o<n;o++){r=e[o];let l;if(s=r,!wF(r)&&(s=Ex[(l=String(r)).toLowerCase()],s===void 0))throw new ft(`Unknown adapter '${l}'`);if(s&&(ae.isFunction(s)||(s=s.get(t))))break;a[l||"#"+o]=s}if(!s){const o=Object.entries(a).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(wC).join(`
`):" "+wC(o[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Ex};function yy(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new td(null,e)}function kC(e){return yy(e),e.headers=ls.from(e.headers),e.data=vy.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),K2.getAdapter(e.adapter||Vu.adapter,e)(e).then(function(r){return yy(e),r.data=vy.call(e,e.transformResponse,r),r.headers=ls.from(r.headers),r},function(r){return $2(r)||(yy(e),r&&r.response&&(r.response.data=vy.call(e,e.transformResponse,r.response),r.response.headers=ls.from(r.response.headers))),Promise.reject(r)})}const G2="1.12.2",Np={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Np[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const SC={};Np.transitional=function(t,n,r){function s(a,o){return"[Axios v"+G2+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,l)=>{if(t===!1)throw new ft(s(o," has been removed"+(n?" in "+n:"")),ft.ERR_DEPRECATED);return n&&!SC[o]&&(SC[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,l):!0}};Np.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function kF(e,t,n){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],o=t[a];if(o){const l=e[a],u=l===void 0||o(l,a,e);if(u!==!0)throw new ft("option "+a+" must be "+u,ft.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ft("Unknown option "+a,ft.ERR_BAD_OPTION)}}const Gf={assertOptions:kF,validators:Np},$i=Gf.validators;let uc=class{constructor(t){this.defaults=t||{},this.interceptors={request:new uC,response:new uC}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=vc(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:a}=n;r!==void 0&&Gf.assertOptions(r,{silentJSONParsing:$i.transitional($i.boolean),forcedJSONParsing:$i.transitional($i.boolean),clarifyTimeoutError:$i.transitional($i.boolean)},!1),s!=null&&(ae.isFunction(s)?n.paramsSerializer={serialize:s}:Gf.assertOptions(s,{encode:$i.function,serialize:$i.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Gf.assertOptions(n,{baseUrl:$i.spelling("baseURL"),withXsrfToken:$i.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&ae.merge(a.common,a[n.method]);a&&ae.forEach(["delete","get","head","post","put","patch","common"],k=>{delete a[k]}),n.headers=ls.concat(o,a);const l=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(u=u&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let f,p=0,y;if(!u){const k=[kC.bind(this),void 0];for(k.unshift(...l),k.push(...h),y=k.length,f=Promise.resolve(n);p<y;)f=f.then(k[p++],k[p++]);return f}y=l.length;let x=n;for(;p<y;){const k=l[p++],b=l[p++];try{x=k(x)}catch(S){b.call(this,S);break}}try{f=kC.call(this,x)}catch(k){return Promise.reject(k)}for(p=0,y=h.length;p<y;)f=f.then(h[p++],h[p++]);return f}getUri(t){t=vc(this.defaults,t);const n=q2(t.baseURL,t.url,t.allowAbsoluteUrls);return U2(n,t.params,t.paramsSerializer)}};ae.forEach(["delete","get","head","options"],function(t){uc.prototype[t]=function(n,r){return this.request(vc(r||{},{method:t,url:n,data:(r||{}).data}))}});ae.forEach(["post","put","patch"],function(t){function n(r){return function(a,o,l){return this.request(vc(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}uc.prototype[t]=n(),uc.prototype[t+"Form"]=n(!0)});let SF=class Z2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const o=new Promise(l=>{r.subscribe(l),a=l}).then(s);return o.cancel=function(){r.unsubscribe(a)},o},t(function(a,o,l){r.reason||(r.reason=new td(a,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Z2(function(s){t=s}),cancel:t}}};function CF(e){return function(n){return e.apply(null,n)}}function NF(e){return ae.isObject(e)&&e.isAxiosError===!0}const Tx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tx).forEach(([e,t])=>{Tx[t]=e});function J2(e){const t=new uc(e),n=E2(uc.prototype.request,t);return ae.extend(n,uc.prototype,t,{allOwnKeys:!0}),ae.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return J2(vc(e,s))},n}const In=J2(Vu);In.Axios=uc;In.CanceledError=td;In.CancelToken=SF;In.isCancel=$2;In.VERSION=G2;In.toFormData=Cp;In.AxiosError=ft;In.Cancel=In.CanceledError;In.all=function(t){return Promise.all(t)};In.spread=CF;In.isAxiosError=NF;In.mergeConfig=vc;In.AxiosHeaders=ls;In.formToJSON=e=>B2(ae.isHTMLForm(e)?new FormData(e):e);In.getAdapter=K2.getAdapter;In.HttpStatusCode=Tx;In.default=In;const{Axios:rle,AxiosError:sle,CanceledError:ile,isCancel:ale,CancelToken:ole,VERSION:cle,all:lle,Cancel:dle,isAxiosError:ule,spread:hle,toFormData:fle,AxiosHeaders:mle,HttpStatusCode:ple,formToJSON:gle,getAdapter:vle,mergeConfig:yle}=In,jF="https://saludsinfronteras-backend.onrender.com",EF=(e,t)=>e.replace(/\/+$/,""),TF=EF(jF),Ue=In.create({baseURL:TF,withCredentials:!1,timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"}}),km="access_token";function PF(e){e?localStorage.setItem(km,e):localStorage.removeItem(km)}function jp(){return localStorage.getItem(km)}function _F(){localStorage.removeItem(km)}Ue.interceptors.request.use(e=>{const t=jp();return t&&(e.headers=e.headers??{},e.headers.Authorization=`Bearer ${t}`),e});Ue.interceptors.response.use(e=>e,async e=>{const t=e.response?.status;return e.config,e.response?.data?.message??e.response?.data?.error??e.message,t===401&&(window.dispatchEvent(new CustomEvent("auth:unauthorized")),_F()),t===403&&window.dispatchEvent(new CustomEvent("auth:forbidden")),Promise.reject(e)});const Y2="/users/me";function Q2(e){const t=e?.id??e?.Id??e?.userId??e?.UserId??"";return{id:typeof t=="bigint"?t.toString():String(t),role:e?.role??e?.Role,email:e?.email??e?.Email,phone:e?.phone??e?.Phone??void 0,phonePrefix:e?.phonePrefix??e?.PhonePrefix??void 0,fullName:e?.fullName??e?.FullName??void 0,firstName1:e?.firstName1??e?.FirstName??void 0,lastName1:e?.lastName1??e?.LastName1??void 0,lastName2:e?.lastName2??e?.LastName2??void 0,dateOfBirth:e?.dateOfBirth??e?.DateOfBirth??void 0,gender:e?.gender??e?.Gender??void 0,primaryLanguage:e?.primaryLanguage??e?.PrimaryLanguage??void 0,nativeLanguage:e?.nativeLanguage??e?.NativeLanguage??null,timezone:e?.timezone??e?.Timezone??void 0,status:e?.status??e?.Status,countryId:e?.countryId??e?.CountryId??void 0,nationalityCountryId:e?.nationalityCountryId??e?.NationalityCountryId??null,residenceCountryId:e?.residenceCountryId??e?.ResidenceCountryId??null,isActive:!!(e?.isActive??e?.IsActive??!0),createdAt:e?.createdAt??e?.CreatedAt,updatedAt:e?.updatedAt??e?.UpdatedAt,avatarFileId:e?.avatarFileId??e?.AvatarFileId??void 0}}async function Sm(){const{data:e}=await Ue.get(Y2);if(!e)throw new Error("Respuesta vaca de /users/me");return Q2(e)}async function ub(e){const t={};e.fullName!==void 0&&(t.FullName=e.fullName),e.firstName1!==void 0&&(t.FirstName=e.firstName1),e.lastName1!==void 0&&(t.LastName1=e.lastName1),e.lastName2!==void 0&&(t.LastName2=e.lastName2),e.phone!==void 0&&(t.Phone=e.phone),e.gender!==void 0&&(t.Gender=String(e.gender)),e.dateOfBirth!==void 0&&(t.DateOfBirth=e.dateOfBirth),e.identification!==void 0&&(t.Identification=e.identification),e.nationalityId!==void 0&&(t.NationalityId=e.nationalityId),e.residenceCountryId!==void 0&&(t.ResidenceCountryId=e.residenceCountryId),e.primaryLanguage!==void 0&&(t.PrimaryLanguage=e.primaryLanguage),e.timezone!==void 0&&(t.Timezone=e.timezone);const{data:n}=await Ue.patch(Y2,t);if(!n)throw new Error("Respuesta vaca de PATCH /users/me");return Q2(n)}async function hb(e,t){const{data:n}=await Ue.post("/users/change-password",{currentPassword:e,newPassword:t});return n}const X2=g.createContext(void 0);function RF({children:e,currentUser:t}){const n=()=>t==="doctor"?"/doctor-dashboard":t==="admin"?"/admin-panel":t==="patient"?"/patient-dashboard":"/";return i.jsx(X2.Provider,{value:{currentUser:t,getDashboardRoute:n},children:e})}function da(){const e=g.useContext(X2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function AF(){const e=Rt(),t=[{id:"free",name:"Gratuito",price:"$0",period:"/mes",description:"Perfecto para comenzar",features:["1 consulta al mes","Videollamadas bsicas","Chat con traduccin","Historial mdico bsico","Soporte por email"],popular:!1},{id:"basic",name:"Bsico",price:"$29",period:"/mes",description:"Ideal para cuidado regular",features:["5 consultas al mes","Videollamadas HD","Traduccin en tiempo real","Historial mdico completo","Recetas digitales","Anlisis bsicos","Soporte prioritario 24/7"],popular:!0},{id:"premium",name:"Premium",price:"$79",period:"/mes",description:"Acceso completo",features:["Consultas ilimitadas","Videollamadas 4K","Traduccin AI avanzada","Grabacin de consultas","Especialistas premium","Anlisis completos","Consultas de emergencia","Planes familiares"],popular:!1}];return i.jsxs("div",{className:"landing-page",children:[i.jsx("nav",{className:"landing-navbar",children:i.jsx("div",{className:"landing-container",children:i.jsxs("div",{className:"navbar-content",children:[i.jsx("div",{className:"navbar-logo",children:i.jsx("span",{className:"logo-text",children:"Salud Sin Fronteras"})}),i.jsxs("div",{className:"navbar-actions",children:[i.jsx("button",{className:"btn-primary",onClick:()=>e("/login"),children:"Iniciar Sesin"}),i.jsx("button",{className:"btn-primary",onClick:()=>e("/login"),children:"Registrarse"})]})]})})}),i.jsx("section",{className:"hero-section",children:i.jsx("div",{className:"landing-container",children:i.jsxs("div",{className:"hero-content",children:[i.jsxs("div",{className:"hero-text",children:[i.jsxs("h1",{className:"hero-title",children:["Tu salud, ",i.jsx("span",{className:"hero-title-highlight",children:"sin fronteras"})]}),i.jsx("p",{className:"hero-description",children:"Conectamos pacientes con mdicos certificados de todo el mundo. Consultas profesionales con traduccin en tiempo real, disponible 24/7 desde cualquier lugar."}),i.jsxs("div",{className:"hero-stats",children:[i.jsxs("div",{className:"user-avatars",children:[i.jsx("div",{className:"avatar",children:"A"}),i.jsx("div",{className:"avatar",children:"B"}),i.jsx("div",{className:"avatar",children:"C"}),i.jsx("div",{className:"avatar",children:"D"})]}),i.jsxs("div",{className:"stats-text",children:[i.jsx("p",{className:"stats-number",children:"50,000+ usuarios activos"}),i.jsxs("div",{className:"stats-rating",children:[i.jsx("span",{className:"stars",children:""}),i.jsx("span",{className:"rating-text",children:"4.9/5"})]})]})]})]}),i.jsx("div",{className:"hero-image",children:i.jsx("img",{src:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=600&fit=crop",alt:"Doctor consultation",className:"doctor-image"})})]})})}),i.jsx("section",{className:"stats-section",children:i.jsx("div",{className:"landing-container",children:i.jsxs("div",{className:"stats-grid",children:[i.jsxs("div",{className:"stat-item",children:[i.jsx("div",{className:"stat-icon",children:i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),i.jsx("p",{className:"stat-value",children:"50K+"}),i.jsx("p",{className:"stat-label",children:"Usuarios Activos"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("div",{className:"stat-icon",children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),i.jsx("p",{className:"stat-value",children:"4.9/5"}),i.jsx("p",{className:"stat-label",children:"Rating Promedio"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("div",{className:"stat-icon",children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}),i.jsx("p",{className:"stat-value",children:"100+"}),i.jsx("p",{className:"stat-label",children:"Mdicos Certificados"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("div",{className:"stat-icon",children:i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),i.jsx("p",{className:"stat-value",children:"24/7"}),i.jsx("p",{className:"stat-label",children:"Soporte Disponible"})]})]})})}),i.jsx("section",{className:"features-section",children:i.jsxs("div",{className:"landing-container",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{className:"section-title",children:"Por qu elegirnos?"}),i.jsx("p",{className:"section-description",children:"Ofrecemos la mejor experiencia de telemedicina con tecnologa de punta"})]}),i.jsxs("div",{className:"features-grid",children:[i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),i.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}),i.jsx("h3",{className:"feature-title",children:"Sin Barreras de Idioma"}),i.jsx("p",{className:"feature-description",children:"Traduccin en tiempo real en 100+ idiomas"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polygon",{points:"23 7 16 12 23 17 23 7"}),i.jsx("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})}),i.jsx("h3",{className:"feature-title",children:"Videollamadas HD/4K"}),i.jsx("p",{className:"feature-description",children:"Consultas con calidad de imagen superior"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),i.jsx("h3",{className:"feature-title",children:"100% Seguro"}),i.jsx("p",{className:"feature-description",children:"Encriptacin E2E y cumplimiento HIPAA"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),i.jsx("h3",{className:"feature-title",children:"Disponible 24/7"}),i.jsx("p",{className:"feature-description",children:"Mdicos disponibles en todo momento"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}),i.jsx("h3",{className:"feature-title",children:"Mdicos Certificados"}),i.jsx("p",{className:"feature-description",children:"Solo profesionales verificados"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})}),i.jsx("h3",{className:"feature-title",children:"Historial Mdico"}),i.jsx("p",{className:"feature-description",children:"Toda tu informacin en un solo lugar"})]})]})]})}),i.jsx("section",{className:"specialties-section",children:i.jsxs("div",{className:"landing-container",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{className:"section-title",children:"Nuestras Especialidades"}),i.jsx("p",{className:"section-description",children:"Conectamos con especialistas en diversas reas de la medicina"})]}),i.jsxs("div",{className:"specialties-grid",children:[i.jsxs("div",{className:"specialty-card",children:[i.jsx("div",{className:"specialty-icon",children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),i.jsx("p",{className:"specialty-name",children:"Cardiologa"})]}),i.jsxs("div",{className:"specialty-card",children:[i.jsx("div",{className:"specialty-icon",children:i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),i.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),i.jsx("p",{className:"specialty-name",children:"Neurologa"})]}),i.jsxs("div",{className:"specialty-card",children:[i.jsx("div",{className:"specialty-icon",children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}),i.jsx("p",{className:"specialty-name",children:"Medicina General"})]}),i.jsxs("div",{className:"specialty-card",children:[i.jsx("div",{className:"specialty-icon",children:i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),i.jsx("p",{className:"specialty-name",children:"Oftalmologa"})]}),i.jsxs("div",{className:"specialty-card",children:[i.jsx("div",{className:"specialty-icon",children:i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),i.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),i.jsx("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]})}),i.jsx("p",{className:"specialty-name",children:"Pediatra"})]}),i.jsxs("div",{className:"specialty-card",children:[i.jsx("div",{className:"specialty-icon",children:i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M12 2a10 10 0 1 0 10 10"}),i.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]})}),i.jsx("p",{className:"specialty-name",children:"Dermatologa"})]})]})]})}),i.jsx("section",{className:"pricing-section",children:i.jsxs("div",{className:"landing-container",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{className:"section-title",children:"Planes para Todos"}),i.jsx("p",{className:"section-description",children:"Elige el plan que mejor se adapte a tus necesidades"})]}),i.jsx("div",{className:"pricing-grid",children:t.map(n=>i.jsxs("div",{className:`pricing-card ${n.popular?"popular":""}`,children:[n.popular&&i.jsx("div",{className:"popular-badge",children:"Ms Popular"}),i.jsxs("div",{className:"pricing-header",children:[i.jsx("h3",{className:"plan-name",children:n.name}),i.jsxs("div",{className:"plan-price",children:[i.jsx("span",{className:"price",children:n.price}),i.jsx("span",{className:"period",children:n.period})]}),i.jsx("p",{className:"plan-description",children:n.description})]}),i.jsxs("div",{className:"pricing-body",children:[i.jsx("ul",{className:"features-list",children:n.features.map((r,s)=>i.jsxs("li",{className:"feature-item",children:[i.jsx("svg",{className:"check-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"20 6 9 17 4 12"})}),i.jsx("span",{children:r})]},s))}),i.jsxs("button",{className:"btn-select-plan",onClick:()=>e("/login"),children:["Seleccionar Plan",i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),i.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]})]},n.id))})]})}),i.jsx("section",{className:"cta-section",children:i.jsx("div",{className:"landing-container",children:i.jsxs("div",{className:"cta-content",children:[i.jsx("h2",{className:"cta-title",children:"Listo para Transformar tu Salud?"}),i.jsx("p",{className:"cta-description",children:"nete a miles de usuarios que ya confan en Salud Sin Fronteras"}),i.jsxs("div",{className:"cta-buttons",children:[i.jsxs("button",{className:"btn-cta-primary",onClick:()=>e("/login"),children:["Comenzar Gratis",i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),i.jsx("polyline",{points:"12 5 19 12 12 19"})]})]}),i.jsxs("button",{className:"btn-cta-secondary",onClick:()=>e("/login"),children:["Hablar con Ventas",i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})]})]})]})})}),i.jsx("footer",{className:"landing-footer",children:i.jsxs("div",{className:"landing-container",children:[i.jsxs("div",{className:"footer-grid",children:[i.jsxs("div",{className:"footer-column",children:[i.jsx("div",{className:"footer-logo",children:i.jsx("span",{className:"footer-logo-text",children:"Salud Sin Fronteras"})}),i.jsx("p",{className:"footer-description",children:"Conectando pacientes con mdicos de todo el mundo, sin barreras de idioma."})]}),i.jsxs("div",{className:"footer-column",children:[i.jsx("h3",{className:"footer-title",children:"Producto"}),i.jsxs("ul",{className:"footer-links",children:[i.jsx("li",{children:i.jsx("a",{href:"#caracteristicas",children:"Caractersticas"})}),i.jsx("li",{children:i.jsx("a",{href:"#precios",children:"Precios"})}),i.jsx("li",{children:i.jsx("a",{href:"#especialidades",children:"Especialidades"})}),i.jsx("li",{children:i.jsx("a",{href:"#medicos",children:"Mdicos"})})]})]}),i.jsxs("div",{className:"footer-column",children:[i.jsx("h3",{className:"footer-title",children:"Compaa"}),i.jsxs("ul",{className:"footer-links",children:[i.jsx("li",{children:i.jsx("a",{href:"#sobre",children:"Sobre Nosotros"})}),i.jsx("li",{children:i.jsx("a",{href:"#blog",children:"Blog"})}),i.jsx("li",{children:i.jsx("a",{href:"#carreras",children:"Carreras"})}),i.jsx("li",{children:i.jsx("a",{href:"#contacto",children:"Contacto"})})]})]}),i.jsxs("div",{className:"footer-column",children:[i.jsx("h3",{className:"footer-title",children:"Contacto"}),i.jsxs("ul",{className:"footer-contact",children:[i.jsxs("li",{children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),i.jsx("polyline",{points:"22,6 12,13 2,6"})]}),i.jsx("span",{children:"info@saludsinfronteras.com"})]}),i.jsxs("li",{children:[i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),i.jsx("span",{children:"+1 (555) 123-4567"})]}),i.jsxs("li",{children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),i.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),i.jsx("span",{children:"24/7 Soporte"})]})]})]})]}),i.jsx("div",{className:"footer-bottom",children:i.jsxs("p",{children:[" 2025 Salud Sin Fronteras. Todos los derechos reservados. |"," ",i.jsx("a",{href:"#privacidad",children:"Privacidad"})," | ",i.jsx("a",{href:"#terminos",children:"Trminos"})]})})]})})]})}function IF(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const OF=e=>{switch(e){case"success":return LF;case"info":return UF;case"warning":return FF;case"error":return zF;default:return null}},DF=Array(12).fill(0),MF=({visible:e,className:t})=>Ce.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ce.createElement("div",{className:"sonner-spinner"},DF.map((n,r)=>Ce.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),LF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),UF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),BF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ce.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ce.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$F=()=>{const[e,t]=Ce.useState(document.hidden);return Ce.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Px=1;class VF{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,a=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Px++,o=this.toasts.find(u=>u.id===a),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(u=>u.id===a?(this.publish({...u,...t,id:a,title:r}),{...u,...t,id:a,dismissible:l,title:r}):u):this.addToast({title:r,...s,dismissible:l,id:a}),a},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let a=r!==void 0,o;const l=s.then(async h=>{if(o=["resolve",h],Ce.isValidElement(h))a=!1,this.create({id:r,type:"default",message:h});else if(HF(h)&&!h.ok){a=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,k=typeof p=="object"&&!Ce.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...k})}else if(h instanceof Error){a=!1;const p=typeof n.error=="function"?await n.error(h):n.error,y=typeof n.description=="function"?await n.description(h):n.description,k=typeof p=="object"&&!Ce.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...k})}else if(n.success!==void 0){a=!1;const p=typeof n.success=="function"?await n.success(h):n.success,y=typeof n.description=="function"?await n.description(h):n.description,k=typeof p=="object"&&!Ce.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:y,...k})}}).catch(async h=>{if(o=["reject",h],n.error!==void 0){a=!1;const f=typeof n.error=="function"?await n.error(h):n.error,p=typeof n.description=="function"?await n.description(h):n.description,x=typeof f=="object"&&!Ce.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...x})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((h,f)=>l.then(()=>o[0]==="reject"?f(o[1]):h(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=n?.id||Px++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qr=new VF,qF=(e,t)=>{const n=t?.id||Px++;return Qr.addToast({title:e,...t,id:n}),n},HF=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",WF=qF,KF=()=>Qr.toasts,GF=()=>Qr.getActiveToasts(),ut=Object.assign(WF,{success:Qr.success,info:Qr.info,warning:Qr.warning,error:Qr.error,custom:Qr.custom,message:Qr.message,promise:Qr.promise,dismiss:Qr.dismiss,loading:Qr.loading},{getHistory:KF,getToasts:GF});IF("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function bf(e){return e.label!==void 0}const ZF=3,JF="24px",YF="16px",CC=4e3,QF=356,XF=14,e6=45,t6=200;function Vi(...e){return e.filter(Boolean).join(" ")}function n6(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const r6=e=>{var t,n,r,s,a,o,l,u,h;const{invert:f,toast:p,unstyled:y,interacting:x,setHeights:k,visibleToasts:b,heights:S,index:N,toasts:E,expanded:j,removeToast:P,defaultRichColors:T,closeButton:I,style:_,cancelButtonStyle:A,actionButtonStyle:O,className:M="",descriptionClassName:q="",duration:z,position:G,gap:oe,expandByDefault:ke,classNames:J,icons:ge,closeButtonAriaLabel:U="Close toast"}=e,[ie,fe]=Ce.useState(null),[B,te]=Ce.useState(null),[ee,ye]=Ce.useState(!1),[Te,ne]=Ce.useState(!1),[K,ce]=Ce.useState(!1),[De,Fe]=Ce.useState(!1),[Xe,He]=Ce.useState(!1),[pt,jt]=Ce.useState(0),[Kn,ht]=Ce.useState(0),qt=Ce.useRef(p.duration||z||CC),vs=Ce.useRef(null),Ht=Ce.useRef(null),F=N===0,W=N+1<=b,re=p.type,Re=p.dismissible!==!1,Pe=p.className||"",je=p.descriptionClassName||"",ze=Ce.useMemo(()=>S.findIndex(it=>it.toastId===p.id)||0,[S,p.id]),dt=Ce.useMemo(()=>{var it;return(it=p.closeButton)!=null?it:I},[p.closeButton,I]),be=Ce.useMemo(()=>p.duration||z||CC,[p.duration,z]),mt=Ce.useRef(0),_t=Ce.useRef(0),un=Ce.useRef(0),sn=Ce.useRef(null),[jn,ys]=G.split("-"),pr=Ce.useMemo(()=>S.reduce((it,Qt,hn)=>hn>=ze?it:it+Qt.height,0),[S,ze]),jr=$F(),Br=p.invert||f,dr=re==="loading";_t.current=Ce.useMemo(()=>ze*oe+pr,[ze,pr]),Ce.useEffect(()=>{qt.current=be},[be]),Ce.useEffect(()=>{ye(!0)},[]),Ce.useEffect(()=>{const it=Ht.current;if(it){const Qt=it.getBoundingClientRect().height;return ht(Qt),k(hn=>[{toastId:p.id,height:Qt,position:p.position},...hn]),()=>k(hn=>hn.filter(Ut=>Ut.toastId!==p.id))}},[k,p.id]),Ce.useLayoutEffect(()=>{if(!ee)return;const it=Ht.current,Qt=it.style.height;it.style.height="auto";const hn=it.getBoundingClientRect().height;it.style.height=Qt,ht(hn),k(Ut=>Ut.find(an=>an.toastId===p.id)?Ut.map(an=>an.toastId===p.id?{...an,height:hn}:an):[{toastId:p.id,height:hn,position:p.position},...Ut])},[ee,p.title,p.description,k,p.id,p.jsx,p.action,p.cancel]);const Mn=Ce.useCallback(()=>{ne(!0),jt(_t.current),k(it=>it.filter(Qt=>Qt.toastId!==p.id)),setTimeout(()=>{P(p)},t6)},[p,P,k,_t]);Ce.useEffect(()=>{if(p.promise&&re==="loading"||p.duration===1/0||p.type==="loading")return;let it;return j||x||jr?(()=>{if(un.current<mt.current){const Ut=new Date().getTime()-mt.current;qt.current=qt.current-Ut}un.current=new Date().getTime()})():(()=>{qt.current!==1/0&&(mt.current=new Date().getTime(),it=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Mn()},qt.current))})(),()=>clearTimeout(it)},[j,x,p,re,jr,Mn]),Ce.useEffect(()=>{p.delete&&(Mn(),p.onDismiss==null||p.onDismiss.call(p,p))},[Mn,p.delete]);function $r(){var it;if(ge?.loading){var Qt;return Ce.createElement("div",{className:Vi(J?.loader,p==null||(Qt=p.classNames)==null?void 0:Qt.loader,"sonner-loader"),"data-visible":re==="loading"},ge.loading)}return Ce.createElement(MF,{className:Vi(J?.loader,p==null||(it=p.classNames)==null?void 0:it.loader),visible:re==="loading"})}const gr=p.icon||ge?.[re]||OF(re);var Er,Vr;return Ce.createElement("li",{tabIndex:0,ref:Ht,className:Vi(M,Pe,J?.toast,p==null||(t=p.classNames)==null?void 0:t.toast,J?.default,J?.[re],p==null||(n=p.classNames)==null?void 0:n[re]),"data-sonner-toast":"","data-rich-colors":(Er=p.richColors)!=null?Er:T,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":ee,"data-promise":!!p.promise,"data-swiped":Xe,"data-removed":Te,"data-visible":W,"data-y-position":jn,"data-x-position":ys,"data-index":N,"data-front":F,"data-swiping":K,"data-dismissible":Re,"data-type":re,"data-invert":Br,"data-swipe-out":De,"data-swipe-direction":B,"data-expanded":!!(j||ke&&ee),"data-testid":p.testId,style:{"--index":N,"--toasts-before":N,"--z-index":E.length-N,"--offset":`${Te?pt:_t.current}px`,"--initial-height":ke?"auto":`${Kn}px`,..._,...p.style},onDragEnd:()=>{ce(!1),fe(null),sn.current=null},onPointerDown:it=>{it.button!==2&&(dr||!Re||(vs.current=new Date,jt(_t.current),it.target.setPointerCapture(it.pointerId),it.target.tagName!=="BUTTON"&&(ce(!0),sn.current={x:it.clientX,y:it.clientY})))},onPointerUp:()=>{var it,Qt,hn;if(De||!Re)return;sn.current=null;const Ut=Number(((it=Ht.current)==null?void 0:it.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Is=Number(((Qt=Ht.current)==null?void 0:Qt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),an=new Date().getTime()-((hn=vs.current)==null?void 0:hn.getTime()),yn=ie==="x"?Ut:Is,Os=Math.abs(yn)/an;if(Math.abs(yn)>=e6||Os>.11){jt(_t.current),p.onDismiss==null||p.onDismiss.call(p,p),te(ie==="x"?Ut>0?"right":"left":Is>0?"down":"up"),Mn(),Fe(!0);return}else{var fn,Ln;(fn=Ht.current)==null||fn.style.setProperty("--swipe-amount-x","0px"),(Ln=Ht.current)==null||Ln.style.setProperty("--swipe-amount-y","0px")}He(!1),ce(!1),fe(null)},onPointerMove:it=>{var Qt,hn,Ut;if(!sn.current||!Re||((Qt=window.getSelection())==null?void 0:Qt.toString().length)>0)return;const an=it.clientY-sn.current.y,yn=it.clientX-sn.current.x;var Os;const fn=(Os=e.swipeDirections)!=null?Os:n6(G);!ie&&(Math.abs(yn)>1||Math.abs(an)>1)&&fe(Math.abs(yn)>Math.abs(an)?"x":"y");let Ln={x:0,y:0};const xs=ur=>1/(1.5+Math.abs(ur)/20);if(ie==="y"){if(fn.includes("top")||fn.includes("bottom"))if(fn.includes("top")&&an<0||fn.includes("bottom")&&an>0)Ln.y=an;else{const ur=an*xs(an);Ln.y=Math.abs(ur)<Math.abs(an)?ur:an}}else if(ie==="x"&&(fn.includes("left")||fn.includes("right")))if(fn.includes("left")&&yn<0||fn.includes("right")&&yn>0)Ln.x=yn;else{const ur=yn*xs(yn);Ln.x=Math.abs(ur)<Math.abs(yn)?ur:yn}(Math.abs(Ln.x)>0||Math.abs(Ln.y)>0)&&He(!0),(hn=Ht.current)==null||hn.style.setProperty("--swipe-amount-x",`${Ln.x}px`),(Ut=Ht.current)==null||Ut.style.setProperty("--swipe-amount-y",`${Ln.y}px`)}},dt&&!p.jsx&&re!=="loading"?Ce.createElement("button",{"aria-label":U,"data-disabled":dr,"data-close-button":!0,onClick:dr||!Re?()=>{}:()=>{Mn(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Vi(J?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Vr=ge?.close)!=null?Vr:BF):null,(re||p.icon||p.promise)&&p.icon!==null&&(ge?.[re]!==null||p.icon)?Ce.createElement("div",{"data-icon":"",className:Vi(J?.icon,p==null||(s=p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||$r():null,p.type!=="loading"?gr:null):null,Ce.createElement("div",{"data-content":"",className:Vi(J?.content,p==null||(a=p.classNames)==null?void 0:a.content)},Ce.createElement("div",{"data-title":"",className:Vi(J?.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Ce.createElement("div",{"data-description":"",className:Vi(q,je,J?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),Ce.isValidElement(p.cancel)?p.cancel:p.cancel&&bf(p.cancel)?Ce.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||A,onClick:it=>{bf(p.cancel)&&Re&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,it),Mn())},className:Vi(J?.cancelButton,p==null||(u=p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,Ce.isValidElement(p.action)?p.action:p.action&&bf(p.action)?Ce.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||O,onClick:it=>{bf(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,it),!it.defaultPrevented&&Mn())},className:Vi(J?.actionButton,p==null||(h=p.classNames)==null?void 0:h.actionButton)},p.action.label):null)};function NC(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function s6(e,t){const n={};return[e,t].forEach((r,s)=>{const a=s===1,o=a?"--mobile-offset":"--offset",l=a?YF:JF;function u(h){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${o}-${h}`]=l:n[`${o}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):u(l)}),n}const i6=Ce.forwardRef(function(t,n){const{id:r,invert:s,position:a="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:u,className:h,offset:f,mobileOffset:p,theme:y="light",richColors:x,duration:k,style:b,visibleToasts:S=ZF,toastOptions:N,dir:E=NC(),gap:j=XF,icons:P,containerAriaLabel:T="Notifications"}=t,[I,_]=Ce.useState([]),A=Ce.useMemo(()=>r?I.filter(ee=>ee.toasterId===r):I.filter(ee=>!ee.toasterId),[I,r]),O=Ce.useMemo(()=>Array.from(new Set([a].concat(A.filter(ee=>ee.position).map(ee=>ee.position)))),[A,a]),[M,q]=Ce.useState([]),[z,G]=Ce.useState(!1),[oe,ke]=Ce.useState(!1),[J,ge]=Ce.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=Ce.useRef(null),ie=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),fe=Ce.useRef(null),B=Ce.useRef(!1),te=Ce.useCallback(ee=>{_(ye=>{var Te;return(Te=ye.find(ne=>ne.id===ee.id))!=null&&Te.delete||Qr.dismiss(ee.id),ye.filter(({id:ne})=>ne!==ee.id)})},[]);return Ce.useEffect(()=>Qr.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{_(ye=>ye.map(Te=>Te.id===ee.id?{...Te,delete:!0}:Te))});return}setTimeout(()=>{p2.flushSync(()=>{_(ye=>{const Te=ye.findIndex(ne=>ne.id===ee.id);return Te!==-1?[...ye.slice(0,Te),{...ye[Te],...ee},...ye.slice(Te+1)]:[ee,...ye]})})})}),[I]),Ce.useEffect(()=>{if(y!=="system"){ge(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ge("dark"):ge("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:ye})=>{ge(ye?"dark":"light")})}catch{ee.addListener(({matches:Te})=>{try{ge(Te?"dark":"light")}catch(ne){console.error(ne)}})}},[y]),Ce.useEffect(()=>{I.length<=1&&G(!1)},[I]),Ce.useEffect(()=>{const ee=ye=>{var Te;if(o.every(ce=>ye[ce]||ye.code===ce)){var K;G(!0),(K=U.current)==null||K.focus()}ye.code==="Escape"&&(document.activeElement===U.current||(Te=U.current)!=null&&Te.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[o]),Ce.useEffect(()=>{if(U.current)return()=>{fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null,B.current=!1)}},[U.current]),Ce.createElement("section",{ref:n,"aria-label":`${T} ${ie}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((ee,ye)=>{var Te;const[ne,K]=ee.split("-");return A.length?Ce.createElement("ol",{key:ee,dir:E==="auto"?NC():E,tabIndex:-1,ref:U,className:h,"data-sonner-toaster":!0,"data-sonner-theme":J,"data-y-position":ne,"data-x-position":K,style:{"--front-toast-height":`${((Te=M[0])==null?void 0:Te.height)||0}px`,"--width":`${QF}px`,"--gap":`${j}px`,...b,...s6(f,p)},onBlur:ce=>{B.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(B.current=!1,fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||B.current||(B.current=!0,fe.current=ce.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{oe||G(!1)},onDragEnd:()=>G(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||ke(!0)},onPointerUp:()=>ke(!1)},A.filter(ce=>!ce.position&&ye===0||ce.position===ee).map((ce,De)=>{var Fe,Xe;return Ce.createElement(r6,{key:ce.id,icons:P,index:De,toast:ce,defaultRichColors:x,duration:(Fe=N?.duration)!=null?Fe:k,className:N?.className,descriptionClassName:N?.descriptionClassName,invert:s,visibleToasts:S,closeButton:(Xe=N?.closeButton)!=null?Xe:u,interacting:oe,position:ee,style:N?.style,unstyled:N?.unstyled,classNames:N?.classNames,cancelButtonStyle:N?.cancelButtonStyle,actionButtonStyle:N?.actionButtonStyle,closeButtonAriaLabel:N?.closeButtonAriaLabel,removeToast:te,toasts:A.filter(He=>He.position==ce.position),heights:M.filter(He=>He.position==ce.position),setHeights:q,expandByDefault:l,gap:j,expanded:z,swipeDirections:t.swipeDirections})})):null}))});function jC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eT(...e){return t=>{let n=!1;const r=e.map(s=>{const a=jC(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():jC(e[s],null)}}}}function Ot(...e){return g.useCallback(eT(...e),e)}function yc(e){const t=a6(e),n=g.forwardRef((r,s)=>{const{children:a,...o}=r,l=g.Children.toArray(a),u=l.find(c6);if(u){const h=u.props.children,f=l.map(p=>p===u?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:p);return i.jsx(t,{...o,ref:s,children:g.isValidElement(h)?g.cloneElement(h,void 0,f):null})}return i.jsx(t,{...o,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var tT=yc("Slot");function a6(e){const t=g.forwardRef((n,r)=>{const{children:s,...a}=n;if(g.isValidElement(s)){const o=d6(s),l=l6(a,s.props);return s.type!==g.Fragment&&(l.ref=r?eT(r,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var o6=Symbol("radix.slottable");function c6(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===o6}function l6(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const u=a(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function d6(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function nT(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=nT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rT(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=nT(e))&&(r&&(r+=" "),r+=t);return r}const EC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,TC=rT,fb=(e,t)=>n=>{var r;if(t?.variants==null)return TC(e,n?.class,n?.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(h=>{const f=n?.[h],p=a?.[h];if(f===null)return null;const y=EC(f)||EC(p);return s[h][y]}),l=n&&Object.entries(n).reduce((h,f)=>{let[p,y]=f;return y===void 0||(h[p]=y),h},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:p,className:y,...x}=f;return Object.entries(x).every(k=>{let[b,S]=k;return Array.isArray(S)?S.includes({...a,...l}[b]):{...a,...l}[b]===S})?[...h,p,y]:h},[]);return TC(e,o,u,n?.class,n?.className)},mb="-",u6=e=>{const t=f6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(mb);return l[0]===""&&l.length!==1&&l.shift(),sT(l,t)||h6(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},sT=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?sT(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(mb);return t.validators.find(({validator:o})=>o(a))?.classGroupId},PC=/^\[(.+)\]$/,h6=e=>{if(PC.test(e)){const t=PC.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},f6=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)_x(n[s],r,s,t);return r},_x=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:_C(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(m6(s)){_x(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{_x(o,_C(t,a),n,r)})})},_C=(e,t)=>{let n=e;return t.split(mb).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},m6=e=>e.isThemeGetter,p6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},Rx="!",Ax=":",g6=Ax.length,v6=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const a=[];let o=0,l=0,u=0,h;for(let k=0;k<s.length;k++){let b=s[k];if(o===0&&l===0){if(b===Ax){a.push(s.slice(u,k)),u=k+g6;continue}if(b==="/"){h=k;continue}}b==="["?o++:b==="]"?o--:b==="("?l++:b===")"&&l--}const f=a.length===0?s:s.substring(u),p=y6(f),y=p!==f,x=h&&h>u?h-u:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:x}};if(t){const s=t+Ax,a=r;r=o=>o.startsWith(s)?a(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},y6=e=>e.endsWith(Rx)?e.substring(0,e.length-1):e.startsWith(Rx)?e.substring(1):e,x6=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let a=[];return r.forEach(o=>{o[0]==="["||t[o]?(s.push(...a.sort(),o),a=[]):a.push(o)}),s.push(...a.sort()),s}},b6=e=>({cache:p6(e.cacheSize),parseClassName:v6(e),sortModifiers:x6(e),...u6(e)}),w6=/\s+/,k6=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,o=[],l=e.trim().split(w6);let u="";for(let h=l.length-1;h>=0;h-=1){const f=l[h],{isExternal:p,modifiers:y,hasImportantModifier:x,baseClassName:k,maybePostfixModifierPosition:b}=n(f);if(p){u=f+(u.length>0?" "+u:u);continue}let S=!!b,N=r(S?k.substring(0,b):k);if(!N){if(!S){u=f+(u.length>0?" "+u:u);continue}if(N=r(k),!N){u=f+(u.length>0?" "+u:u);continue}S=!1}const E=a(y).join(":"),j=x?E+Rx:E,P=j+N;if(o.includes(P))continue;o.push(P);const T=s(N,S);for(let I=0;I<T.length;++I){const _=T[I];o.push(j+_)}u=f+(u.length>0?" "+u:u)}return u};function S6(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=iT(t))&&(r&&(r+=" "),r+=n);return r}const iT=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=iT(e[r]))&&(n&&(n+=" "),n+=t);return n};function C6(e,...t){let n,r,s,a=o;function o(u){const h=t.reduce((f,p)=>p(f),e());return n=b6(h),r=n.cache.get,s=n.cache.set,a=l,l(u)}function l(u){const h=r(u);if(h)return h;const f=k6(u,n);return s(u,f),f}return function(){return a(S6.apply(null,arguments))}}const Jn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},aT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,oT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,N6=/^\d+\/\d+$/,j6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,P6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dl=e=>N6.test(e),xt=e=>!!e&&!Number.isNaN(Number(e)),po=e=>!!e&&Number.isInteger(Number(e)),xy=e=>e.endsWith("%")&&xt(e.slice(0,-1)),ja=e=>j6.test(e),R6=()=>!0,A6=e=>E6.test(e)&&!T6.test(e),cT=()=>!1,I6=e=>P6.test(e),O6=e=>_6.test(e),D6=e=>!Ke(e)&&!Ge(e),M6=e=>nd(e,uT,cT),Ke=e=>aT.test(e),rc=e=>nd(e,hT,A6),by=e=>nd(e,B6,xt),RC=e=>nd(e,lT,cT),L6=e=>nd(e,dT,O6),wf=e=>nd(e,fT,I6),Ge=e=>oT.test(e),Yd=e=>rd(e,hT),F6=e=>rd(e,$6),AC=e=>rd(e,lT),U6=e=>rd(e,uT),z6=e=>rd(e,dT),kf=e=>rd(e,fT,!0),nd=(e,t,n)=>{const r=aT.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},rd=(e,t,n=!1)=>{const r=oT.exec(e);return r?r[1]?t(r[1]):n:!1},lT=e=>e==="position"||e==="percentage",dT=e=>e==="image"||e==="url",uT=e=>e==="length"||e==="size"||e==="bg-size",hT=e=>e==="length",B6=e=>e==="number",$6=e=>e==="family-name",fT=e=>e==="shadow",V6=()=>{const e=Jn("color"),t=Jn("font"),n=Jn("text"),r=Jn("font-weight"),s=Jn("tracking"),a=Jn("leading"),o=Jn("breakpoint"),l=Jn("container"),u=Jn("spacing"),h=Jn("radius"),f=Jn("shadow"),p=Jn("inset-shadow"),y=Jn("text-shadow"),x=Jn("drop-shadow"),k=Jn("blur"),b=Jn("perspective"),S=Jn("aspect"),N=Jn("ease"),E=Jn("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...P(),Ge,Ke],I=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],A=()=>[Ge,Ke,u],O=()=>[dl,"full","auto",...A()],M=()=>[po,"none","subgrid",Ge,Ke],q=()=>["auto",{span:["full",po,Ge,Ke]},po,Ge,Ke],z=()=>[po,"auto",Ge,Ke],G=()=>["auto","min","max","fr",Ge,Ke],oe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ke=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...A()],ge=()=>[dl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],U=()=>[e,Ge,Ke],ie=()=>[...P(),AC,RC,{position:[Ge,Ke]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",U6,M6,{size:[Ge,Ke]}],te=()=>[xy,Yd,rc],ee=()=>["","none","full",h,Ge,Ke],ye=()=>["",xt,Yd,rc],Te=()=>["solid","dashed","dotted","double"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[xt,xy,AC,RC],ce=()=>["","none",k,Ge,Ke],De=()=>["none",xt,Ge,Ke],Fe=()=>["none",xt,Ge,Ke],Xe=()=>[xt,Ge,Ke],He=()=>[dl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ja],breakpoint:[ja],color:[R6],container:[ja],"drop-shadow":[ja],ease:["in","out","in-out"],font:[D6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ja],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ja],shadow:[ja],spacing:["px",xt],text:[ja],"text-shadow":[ja],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",dl,Ke,Ge,S]}],container:["container"],columns:[{columns:[xt,Ke,Ge,l]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[po,"auto",Ge,Ke]}],basis:[{basis:[dl,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[xt,dl,"auto","initial","none",Ke]}],grow:[{grow:["",xt,Ge,Ke]}],shrink:[{shrink:["",xt,Ge,Ke]}],order:[{order:[po,"first","last","none",Ge,Ke]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...oe(),"normal"]}],"justify-items":[{"justify-items":[...ke(),"normal"]}],"justify-self":[{"justify-self":["auto",...ke()]}],"align-content":[{content:["normal",...oe()]}],"align-items":[{items:[...ke(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ke(),{baseline:["","last"]}]}],"place-content":[{"place-content":oe()}],"place-items":[{"place-items":[...ke(),"baseline"]}],"place-self":[{"place-self":["auto",...ke()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:ge()}],w:[{w:[l,"screen",...ge()]}],"min-w":[{"min-w":[l,"screen","none",...ge()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...ge()]}],h:[{h:["screen","lh",...ge()]}],"min-h":[{"min-h":["screen","lh","none",...ge()]}],"max-h":[{"max-h":["screen","lh",...ge()]}],"font-size":[{text:["base",n,Yd,rc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ge,by]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xy,Ke]}],"font-family":[{font:[F6,Ke,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ge,Ke]}],"line-clamp":[{"line-clamp":[xt,"none",Ge,by]}],leading:[{leading:[a,...A()]}],"list-image":[{"list-image":["none",Ge,Ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,Ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[xt,"from-font","auto",Ge,rc]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[xt,"auto",Ge,Ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},po,Ge,Ke],radial:["",Ge,Ke],conic:[po,Ge,Ke]},z6,L6]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[xt,Ge,Ke]}],"outline-w":[{outline:["",xt,Yd,rc]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",f,kf,wf]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",p,kf,wf]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[xt,rc]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",y,kf,wf]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[xt,Ge,Ke]}],"mix-blend":[{"mix-blend":[...ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[xt]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Ge,Ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[xt]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,Ke]}],filter:[{filter:["","none",Ge,Ke]}],blur:[{blur:ce()}],brightness:[{brightness:[xt,Ge,Ke]}],contrast:[{contrast:[xt,Ge,Ke]}],"drop-shadow":[{"drop-shadow":["","none",x,kf,wf]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",xt,Ge,Ke]}],"hue-rotate":[{"hue-rotate":[xt,Ge,Ke]}],invert:[{invert:["",xt,Ge,Ke]}],saturate:[{saturate:[xt,Ge,Ke]}],sepia:[{sepia:["",xt,Ge,Ke]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,Ke]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[xt,Ge,Ke]}],"backdrop-contrast":[{"backdrop-contrast":[xt,Ge,Ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",xt,Ge,Ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[xt,Ge,Ke]}],"backdrop-invert":[{"backdrop-invert":["",xt,Ge,Ke]}],"backdrop-opacity":[{"backdrop-opacity":[xt,Ge,Ke]}],"backdrop-saturate":[{"backdrop-saturate":[xt,Ge,Ke]}],"backdrop-sepia":[{"backdrop-sepia":["",xt,Ge,Ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,Ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[xt,"initial",Ge,Ke]}],ease:[{ease:["linear","initial",N,Ge,Ke]}],delay:[{delay:[xt,Ge,Ke]}],animate:[{animate:["none",E,Ge,Ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Ge,Ke]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[Ge,Ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:He()}],"translate-x":[{"translate-x":He()}],"translate-y":[{"translate-y":He()}],"translate-z":[{"translate-z":He()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,Ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,Ke]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[xt,Yd,rc,by]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},q6=C6(V6);function St(...e){return q6(rT(e))}const H6=fb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),$=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const o=r?tT:"button";return i.jsx(o,{"data-slot":"button",className:St(H6({variant:t,size:n,className:e})),ref:a,...s})});$.displayName="Button";function ue({className:e,...t}){return i.jsx("div",{"data-slot":"card",className:St("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function $e({className:e,...t}){return i.jsx("div",{"data-slot":"card-header",className:St("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function qe({className:e,...t}){return i.jsx("h4",{"data-slot":"card-title",className:St("leading-none",e),...t})}function Yi({className:e,...t}){return i.jsx("p",{"data-slot":"card-description",className:St("text-muted-foreground",e),...t})}function he({className:e,...t}){return i.jsx("div",{"data-slot":"card-content",className:St("px-6 [&:last-child]:pb-6",e),...t})}function mT({className:e,...t}){return i.jsx("div",{"data-slot":"card-footer",className:St("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})}function Ye({className:e,type:t,...n}){return i.jsx("input",{type:t,"data-slot":"input",className:St("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var W6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ot=W6.reduce((e,t)=>{const n=yc(`Primitive.${t}`),r=g.forwardRef((s,a)=>{const{asChild:o,...l}=s,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function K6(e,t){e&&Uu.flushSync(()=>e.dispatchEvent(t))}var G6="Label",pT=g.forwardRef((e,t)=>i.jsx(ot.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pT.displayName=G6;var Z6=pT;function _e({className:e,...t}){return i.jsx(Z6,{"data-slot":"label",className:St("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Ix(e,[t,n]){return Math.min(n,Math.max(t,e))}function at(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function J6(e,t){const n=g.createContext(t),r=a=>{const{children:o,...l}=a,u=g.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function s(a){const o=g.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Ri(e,t=[]){let n=[];function r(a,o){const l=g.createContext(o),u=n.length;n=[...n,o];const h=p=>{const{scope:y,children:x,...k}=p,b=y?.[e]?.[u]||l,S=g.useMemo(()=>k,Object.values(k));return i.jsx(b.Provider,{value:S,children:x})};h.displayName=a+"Provider";function f(p,y){const x=y?.[e]?.[u]||l,k=g.useContext(x);if(k)return k;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[h,f]}const s=()=>{const a=n.map(o=>g.createContext(o));return function(l){const u=l?.[e]||a;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return s.scopeName=e,[r,Y6(s,...t)]}function Y6(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...l,...p}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function gT(e){const t=e+"CollectionProvider",[n,r]=Ri(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:S,children:N}=b,E=Ce.useRef(null),j=Ce.useRef(new Map).current;return i.jsx(s,{scope:S,itemMap:j,collectionRef:E,children:N})};o.displayName=t;const l=e+"CollectionSlot",u=yc(l),h=Ce.forwardRef((b,S)=>{const{scope:N,children:E}=b,j=a(l,N),P=Ot(S,j.collectionRef);return i.jsx(u,{ref:P,children:E})});h.displayName=l;const f=e+"CollectionItemSlot",p="data-radix-collection-item",y=yc(f),x=Ce.forwardRef((b,S)=>{const{scope:N,children:E,...j}=b,P=Ce.useRef(null),T=Ot(S,P),I=a(f,N);return Ce.useEffect(()=>(I.itemMap.set(P,{ref:P,...j}),()=>void I.itemMap.delete(P))),i.jsx(y,{[p]:"",ref:T,children:E})});x.displayName=f;function k(b){const S=a(e+"CollectionConsumer",b);return Ce.useCallback(()=>{const E=S.collectionRef.current;if(!E)return[];const j=Array.from(E.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((I,_)=>j.indexOf(I.ref.current)-j.indexOf(_.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:h,ItemSlot:x},k,r]}var Q6=g.createContext(void 0);function qu(e){const t=g.useContext(Q6);return e||t||"ltr"}function kr(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>t.current?.(...n),[])}function X6(e,t=globalThis?.document){const n=kr(e);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var eU="DismissableLayer",Ox="dismissableLayer.update",tU="dismissableLayer.pointerDownOutside",nU="dismissableLayer.focusOutside",IC,vT=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ep=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=e,h=g.useContext(vT),[f,p]=g.useState(null),y=f?.ownerDocument??globalThis?.document,[,x]=g.useState({}),k=Ot(t,_=>p(_)),b=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),N=b.indexOf(S),E=f?b.indexOf(f):-1,j=h.layersWithOutsidePointerEventsDisabled.size>0,P=E>=N,T=iU(_=>{const A=_.target,O=[...h.branches].some(M=>M.contains(A));!P||O||(s?.(_),o?.(_),_.defaultPrevented||l?.())},y),I=aU(_=>{const A=_.target;[...h.branches].some(M=>M.contains(A))||(a?.(_),o?.(_),_.defaultPrevented||l?.())},y);return X6(_=>{E===h.layers.size-1&&(r?.(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},y),g.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(IC=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),OC(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=IC)}},[f,y,n,h]),g.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),OC())},[f,h]),g.useEffect(()=>{const _=()=>x({});return document.addEventListener(Ox,_),()=>document.removeEventListener(Ox,_)},[]),i.jsx(ot.div,{...u,ref:k,style:{pointerEvents:j?P?"auto":"none":void 0,...e.style},onFocusCapture:at(e.onFocusCapture,I.onFocusCapture),onBlurCapture:at(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:at(e.onPointerDownCapture,T.onPointerDownCapture)})});Ep.displayName=eU;var rU="DismissableLayerBranch",sU=g.forwardRef((e,t)=>{const n=g.useContext(vT),r=g.useRef(null),s=Ot(t,r);return g.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(ot.div,{...e,ref:s})});sU.displayName=rU;function iU(e,t=globalThis?.document){const n=kr(e),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let u=function(){yT(tU,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function aU(e,t=globalThis?.document){const n=kr(e),r=g.useRef(!1);return g.useEffect(()=>{const s=a=>{a.target&&!r.current&&yT(nU,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function OC(){const e=new CustomEvent(Ox);document.dispatchEvent(e)}function yT(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?K6(s,a):s.dispatchEvent(a)}var wy=0;function pb(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??DC()),document.body.insertAdjacentElement("beforeend",e[1]??DC()),wy++,()=>{wy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),wy--}},[])}function DC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ky="focusScope.autoFocusOnMount",Sy="focusScope.autoFocusOnUnmount",MC={bubbles:!1,cancelable:!0},oU="FocusScope",Tp=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,u]=g.useState(null),h=kr(s),f=kr(a),p=g.useRef(null),y=Ot(t,b=>u(b)),x=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let b=function(j){if(x.paused||!l)return;const P=j.target;l.contains(P)?p.current=P:yo(p.current,{select:!0})},S=function(j){if(x.paused||!l)return;const P=j.relatedTarget;P!==null&&(l.contains(P)||yo(p.current,{select:!0}))},N=function(j){if(document.activeElement===document.body)for(const T of j)T.removedNodes.length>0&&yo(l)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const E=new MutationObserver(N);return l&&E.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),E.disconnect()}}},[r,l,x.paused]),g.useEffect(()=>{if(l){FC.add(x);const b=document.activeElement;if(!l.contains(b)){const N=new CustomEvent(ky,MC);l.addEventListener(ky,h),l.dispatchEvent(N),N.defaultPrevented||(cU(fU(xT(l)),{select:!0}),document.activeElement===b&&yo(l))}return()=>{l.removeEventListener(ky,h),setTimeout(()=>{const N=new CustomEvent(Sy,MC);l.addEventListener(Sy,f),l.dispatchEvent(N),N.defaultPrevented||yo(b??document.body,{select:!0}),l.removeEventListener(Sy,f),FC.remove(x)},0)}}},[l,h,f,x]);const k=g.useCallback(b=>{if(!n&&!r||x.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,N=document.activeElement;if(S&&N){const E=b.currentTarget,[j,P]=lU(E);j&&P?!b.shiftKey&&N===P?(b.preventDefault(),n&&yo(j,{select:!0})):b.shiftKey&&N===j&&(b.preventDefault(),n&&yo(P,{select:!0})):N===E&&b.preventDefault()}},[n,r,x.paused]);return i.jsx(ot.div,{tabIndex:-1,...o,ref:y,onKeyDown:k})});Tp.displayName=oU;function cU(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(yo(r,{select:t}),document.activeElement!==n)return}function lU(e){const t=xT(e),n=LC(t,e),r=LC(t.reverse(),e);return[n,r]}function xT(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function LC(e,t){for(const n of e)if(!dU(n,{upTo:t}))return n}function dU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uU(e){return e instanceof HTMLInputElement&&"select"in e}function yo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&uU(e)&&t&&e.select()}}var FC=hU();function hU(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=UC(e,t),e.unshift(t)},remove(t){e=UC(e,t),e[0]?.resume()}}}function UC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function fU(e){return e.filter(t=>t.tagName!=="A")}var qn=globalThis?.document?g.useLayoutEffect:()=>{},mU=JE[" useId ".trim().toString()]||(()=>{}),pU=0;function La(e){const[t,n]=g.useState(mU());return qn(()=>{n(r=>r??String(pU++))},[e]),e||(t?`radix-${t}`:"")}const gU=["top","right","bottom","left"],Ao=Math.min,Cs=Math.max,Cm=Math.round,Sf=Math.floor,Qi=e=>({x:e,y:e}),vU={left:"right",right:"left",bottom:"top",top:"bottom"},yU={start:"end",end:"start"};function Dx(e,t,n){return Cs(e,Ao(t,n))}function za(e,t){return typeof e=="function"?e(t):e}function Ba(e){return e.split("-")[0]}function sd(e){return e.split("-")[1]}function gb(e){return e==="x"?"y":"x"}function vb(e){return e==="y"?"height":"width"}const xU=new Set(["top","bottom"]);function Ji(e){return xU.has(Ba(e))?"y":"x"}function yb(e){return gb(Ji(e))}function bU(e,t,n){n===void 0&&(n=!1);const r=sd(e),s=yb(e),a=vb(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Nm(o)),[o,Nm(o)]}function wU(e){const t=Nm(e);return[Mx(e),t,Mx(t)]}function Mx(e){return e.replace(/start|end/g,t=>yU[t])}const zC=["left","right"],BC=["right","left"],kU=["top","bottom"],SU=["bottom","top"];function CU(e,t,n){switch(e){case"top":case"bottom":return n?t?BC:zC:t?zC:BC;case"left":case"right":return t?kU:SU;default:return[]}}function NU(e,t,n,r){const s=sd(e);let a=CU(Ba(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(Mx)))),a}function Nm(e){return e.replace(/left|right|bottom|top/g,t=>vU[t])}function jU(e){return{top:0,right:0,bottom:0,left:0,...e}}function bT(e){return typeof e!="number"?jU(e):{top:e,right:e,bottom:e,left:e}}function jm(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function $C(e,t,n){let{reference:r,floating:s}=e;const a=Ji(t),o=yb(t),l=vb(o),u=Ba(t),h=a==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,y=r[l]/2-s[l]/2;let x;switch(u){case"top":x={x:f,y:r.y-s.height};break;case"bottom":x={x:f,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:p};break;case"left":x={x:r.x-s.width,y:p};break;default:x={x:r.x,y:r.y}}switch(sd(t)){case"start":x[o]-=y*(n&&h?-1:1);break;case"end":x[o]+=y*(n&&h?-1:1);break}return x}const EU=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:p}=$C(h,r,u),y=r,x={},k=0;for(let b=0;b<l.length;b++){const{name:S,fn:N}=l[b],{x:E,y:j,data:P,reset:T}=await N({x:f,y:p,initialPlacement:r,placement:y,strategy:s,middlewareData:x,rects:h,platform:o,elements:{reference:e,floating:t}});f=E??f,p=j??p,x={...x,[S]:{...x[S],...P}},T&&k<=50&&(k++,typeof T=="object"&&(T.placement&&(y=T.placement),T.rects&&(h=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:f,y:p}=$C(h,y,u)),b=-1)}return{x:f,y:p,placement:y,strategy:s,middlewareData:x}};async function wu(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:u}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:x=0}=za(t,e),k=bT(x),S=l[y?p==="floating"?"reference":"floating":p],N=jm(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:u})),E=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),P=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},T=jm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:j,strategy:u}):E);return{top:(N.top-T.top+k.top)/P.y,bottom:(T.bottom-N.bottom+k.bottom)/P.y,left:(N.left-T.left+k.left)/P.x,right:(T.right-N.right+k.right)/P.x}}const TU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:u}=t,{element:h,padding:f=0}=za(e,t)||{};if(h==null)return{};const p=bT(f),y={x:n,y:r},x=yb(s),k=vb(x),b=await o.getDimensions(h),S=x==="y",N=S?"top":"left",E=S?"bottom":"right",j=S?"clientHeight":"clientWidth",P=a.reference[k]+a.reference[x]-y[x]-a.floating[k],T=y[x]-a.reference[x],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let _=I?I[j]:0;(!_||!await(o.isElement==null?void 0:o.isElement(I)))&&(_=l.floating[j]||a.floating[k]);const A=P/2-T/2,O=_/2-b[k]/2-1,M=Ao(p[N],O),q=Ao(p[E],O),z=M,G=_-b[k]-q,oe=_/2-b[k]/2+A,ke=Dx(z,oe,G),J=!u.arrow&&sd(s)!=null&&oe!==ke&&a.reference[k]/2-(oe<z?M:q)-b[k]/2<0,ge=J?oe<z?oe-z:oe-G:0;return{[x]:y[x]+ge,data:{[x]:ke,centerOffset:oe-ke-ge,...J&&{alignmentOffset:ge}},reset:J}}}),PU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:b=!0,...S}=za(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const N=Ba(s),E=Ji(l),j=Ba(l)===l,P=await(u.isRTL==null?void 0:u.isRTL(h.floating)),T=y||(j||!b?[Nm(l)]:wU(l)),I=k!=="none";!y&&I&&T.push(...NU(l,b,k,P));const _=[l,...T],A=await wu(t,S),O=[];let M=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&O.push(A[N]),p){const oe=bU(s,o,P);O.push(A[oe[0]],A[oe[1]])}if(M=[...M,{placement:s,overflows:O}],!O.every(oe=>oe<=0)){var q,z;const oe=(((q=a.flip)==null?void 0:q.index)||0)+1,ke=_[oe];if(ke&&(!(p==="alignment"?E!==Ji(ke):!1)||M.every(U=>Ji(U.placement)===E?U.overflows[0]>0:!0)))return{data:{index:oe,overflows:M},reset:{placement:ke}};let J=(z=M.filter(ge=>ge.overflows[0]<=0).sort((ge,U)=>ge.overflows[1]-U.overflows[1])[0])==null?void 0:z.placement;if(!J)switch(x){case"bestFit":{var G;const ge=(G=M.filter(U=>{if(I){const ie=Ji(U.placement);return ie===E||ie==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(ie=>ie>0).reduce((ie,fe)=>ie+fe,0)]).sort((U,ie)=>U[1]-ie[1])[0])==null?void 0:G[0];ge&&(J=ge);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function VC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qC(e){return gU.some(t=>e[t]>=0)}const _U=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=za(e,t);switch(r){case"referenceHidden":{const a=await wu(t,{...s,elementContext:"reference"}),o=VC(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qC(o)}}}case"escaped":{const a=await wu(t,{...s,altBoundary:!0}),o=VC(a,n.floating);return{data:{escapedOffsets:o,escaped:qC(o)}}}default:return{}}}}},wT=new Set(["left","top"]);async function RU(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ba(n),l=sd(n),u=Ji(n)==="y",h=wT.has(o)?-1:1,f=a&&u?-1:1,p=za(t,e);let{mainAxis:y,crossAxis:x,alignmentAxis:k}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof k=="number"&&(x=l==="end"?k*-1:k),u?{x:x*f,y:y*h}:{x:y*h,y:x*f}}const AU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=t,u=await RU(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:o}}}}},IU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:S=>{let{x:N,y:E}=S;return{x:N,y:E}}},...u}=za(e,t),h={x:n,y:r},f=await wu(t,u),p=Ji(Ba(s)),y=gb(p);let x=h[y],k=h[p];if(a){const S=y==="y"?"top":"left",N=y==="y"?"bottom":"right",E=x+f[S],j=x-f[N];x=Dx(E,x,j)}if(o){const S=p==="y"?"top":"left",N=p==="y"?"bottom":"right",E=k+f[S],j=k-f[N];k=Dx(E,k,j)}const b=l.fn({...t,[y]:x,[p]:k});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[y]:a,[p]:o}}}}}},OU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:u=!0,crossAxis:h=!0}=za(e,t),f={x:n,y:r},p=Ji(s),y=gb(p);let x=f[y],k=f[p];const b=za(l,t),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const j=y==="y"?"height":"width",P=a.reference[y]-a.floating[j]+S.mainAxis,T=a.reference[y]+a.reference[j]-S.mainAxis;x<P?x=P:x>T&&(x=T)}if(h){var N,E;const j=y==="y"?"width":"height",P=wT.has(Ba(s)),T=a.reference[p]-a.floating[j]+(P&&((N=o.offset)==null?void 0:N[p])||0)+(P?0:S.crossAxis),I=a.reference[p]+a.reference[j]+(P?0:((E=o.offset)==null?void 0:E[p])||0)-(P?S.crossAxis:0);k<T?k=T:k>I&&(k=I)}return{[y]:x,[p]:k}}}},DU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:u=()=>{},...h}=za(e,t),f=await wu(t,h),p=Ba(s),y=sd(s),x=Ji(s)==="y",{width:k,height:b}=a.floating;let S,N;p==="top"||p==="bottom"?(S=p,N=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(N=p,S=y==="end"?"top":"bottom");const E=b-f.top-f.bottom,j=k-f.left-f.right,P=Ao(b-f[S],E),T=Ao(k-f[N],j),I=!t.middlewareData.shift;let _=P,A=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(_=E),I&&!y){const M=Cs(f.left,0),q=Cs(f.right,0),z=Cs(f.top,0),G=Cs(f.bottom,0);x?A=k-2*(M!==0||q!==0?M+q:Cs(f.left,f.right)):_=b-2*(z!==0||G!==0?z+G:Cs(f.top,f.bottom))}await u({...t,availableWidth:A,availableHeight:_});const O=await o.getDimensions(l.floating);return k!==O.width||b!==O.height?{reset:{rects:!0}}:{}}}};function Pp(){return typeof window<"u"}function id(e){return kT(e)?(e.nodeName||"").toLowerCase():"#document"}function Ts(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ua(e){var t;return(t=(kT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kT(e){return Pp()?e instanceof Node||e instanceof Ts(e).Node:!1}function xi(e){return Pp()?e instanceof Element||e instanceof Ts(e).Element:!1}function ra(e){return Pp()?e instanceof HTMLElement||e instanceof Ts(e).HTMLElement:!1}function HC(e){return!Pp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ts(e).ShadowRoot}const MU=new Set(["inline","contents"]);function Hu(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=bi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!MU.has(s)}const LU=new Set(["table","td","th"]);function FU(e){return LU.has(id(e))}const UU=[":popover-open",":modal"];function _p(e){return UU.some(t=>{try{return e.matches(t)}catch{return!1}})}const zU=["transform","translate","scale","rotate","perspective"],BU=["transform","translate","scale","rotate","perspective","filter"],$U=["paint","layout","strict","content"];function xb(e){const t=bb(),n=xi(e)?bi(e):e;return zU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||BU.some(r=>(n.willChange||"").includes(r))||$U.some(r=>(n.contain||"").includes(r))}function VU(e){let t=Io(e);for(;ra(t)&&!Ml(t);){if(xb(t))return t;if(_p(t))return null;t=Io(t)}return null}function bb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qU=new Set(["html","body","#document"]);function Ml(e){return qU.has(id(e))}function bi(e){return Ts(e).getComputedStyle(e)}function Rp(e){return xi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Io(e){if(id(e)==="html")return e;const t=e.assignedSlot||e.parentNode||HC(e)&&e.host||ua(e);return HC(t)?t.host:t}function ST(e){const t=Io(e);return Ml(t)?e.ownerDocument?e.ownerDocument.body:e.body:ra(t)&&Hu(t)?t:ST(t)}function ku(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=ST(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=Ts(s);if(a){const l=Lx(o);return t.concat(o,o.visualViewport||[],Hu(s)?s:[],l&&n?ku(l):[])}return t.concat(s,ku(s,[],n))}function Lx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function CT(e){const t=bi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ra(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=Cm(n)!==a||Cm(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function wb(e){return xi(e)?e:e.contextElement}function kl(e){const t=wb(e);if(!ra(t))return Qi(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=CT(t);let o=(a?Cm(n.width):n.width)/r,l=(a?Cm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const HU=Qi(0);function NT(e){const t=Ts(e);return!bb()||!t.visualViewport?HU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function WU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ts(e)?!1:t}function xc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=wb(e);let o=Qi(1);t&&(r?xi(r)&&(o=kl(r)):o=kl(e));const l=WU(a,n,r)?NT(a):Qi(0);let u=(s.left+l.x)/o.x,h=(s.top+l.y)/o.y,f=s.width/o.x,p=s.height/o.y;if(a){const y=Ts(a),x=r&&xi(r)?Ts(r):r;let k=y,b=Lx(k);for(;b&&r&&x!==k;){const S=kl(b),N=b.getBoundingClientRect(),E=bi(b),j=N.left+(b.clientLeft+parseFloat(E.paddingLeft))*S.x,P=N.top+(b.clientTop+parseFloat(E.paddingTop))*S.y;u*=S.x,h*=S.y,f*=S.x,p*=S.y,u+=j,h+=P,k=Ts(b),b=Lx(k)}}return jm({width:f,height:p,x:u,y:h})}function Ap(e,t){const n=Rp(e).scrollLeft;return t?t.left+n:xc(ua(e)).left+n}function jT(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Ap(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function KU(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=ua(r),l=t?_p(t.floating):!1;if(r===o||l&&a)return n;let u={scrollLeft:0,scrollTop:0},h=Qi(1);const f=Qi(0),p=ra(r);if((p||!p&&!a)&&((id(r)!=="body"||Hu(o))&&(u=Rp(r)),ra(r))){const x=xc(r);h=kl(r),f.x=x.x+r.clientLeft,f.y=x.y+r.clientTop}const y=o&&!p&&!a?jT(o,u):Qi(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+f.x+y.x,y:n.y*h.y-u.scrollTop*h.y+f.y+y.y}}function GU(e){return Array.from(e.getClientRects())}function ZU(e){const t=ua(e),n=Rp(e),r=e.ownerDocument.body,s=Cs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Cs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ap(e);const l=-n.scrollTop;return bi(r).direction==="rtl"&&(o+=Cs(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}const WC=25;function JU(e,t){const n=Ts(e),r=ua(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){a=s.width,o=s.height;const f=bb();(!f||f&&t==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}const h=Ap(r);if(h<=0){const f=r.ownerDocument,p=f.body,y=getComputedStyle(p),x=f.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,k=Math.abs(r.clientWidth-p.clientWidth-x);k<=WC&&(a-=k)}else h<=WC&&(a+=h);return{width:a,height:o,x:l,y:u}}const YU=new Set(["absolute","fixed"]);function QU(e,t){const n=xc(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=ra(e)?kl(e):Qi(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,u=s*a.x,h=r*a.y;return{width:o,height:l,x:u,y:h}}function KC(e,t,n){let r;if(t==="viewport")r=JU(e,n);else if(t==="document")r=ZU(ua(e));else if(xi(t))r=QU(t,n);else{const s=NT(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return jm(r)}function ET(e,t){const n=Io(e);return n===t||!xi(n)||Ml(n)?!1:bi(n).position==="fixed"||ET(n,t)}function XU(e,t){const n=t.get(e);if(n)return n;let r=ku(e,[],!1).filter(l=>xi(l)&&id(l)!=="body"),s=null;const a=bi(e).position==="fixed";let o=a?Io(e):e;for(;xi(o)&&!Ml(o);){const l=bi(o),u=xb(o);!u&&l.position==="fixed"&&(s=null),(a?!u&&!s:!u&&l.position==="static"&&!!s&&YU.has(s.position)||Hu(o)&&!u&&ET(e,o))?r=r.filter(f=>f!==o):s=l,o=Io(o)}return t.set(e,r),r}function ez(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?_p(t)?[]:XU(t,this._c):[].concat(n),r],l=o[0],u=o.reduce((h,f)=>{const p=KC(t,f,s);return h.top=Cs(p.top,h.top),h.right=Ao(p.right,h.right),h.bottom=Ao(p.bottom,h.bottom),h.left=Cs(p.left,h.left),h},KC(t,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function tz(e){const{width:t,height:n}=CT(e);return{width:t,height:n}}function nz(e,t,n){const r=ra(t),s=ua(t),a=n==="fixed",o=xc(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const u=Qi(0);function h(){u.x=Ap(s)}if(r||!r&&!a)if((id(t)!=="body"||Hu(s))&&(l=Rp(t)),r){const x=xc(t,!0,a,t);u.x=x.x+t.clientLeft,u.y=x.y+t.clientTop}else s&&h();a&&!r&&s&&h();const f=s&&!r&&!a?jT(s,l):Qi(0),p=o.left+l.scrollLeft-u.x-f.x,y=o.top+l.scrollTop-u.y-f.y;return{x:p,y,width:o.width,height:o.height}}function Cy(e){return bi(e).position==="static"}function GC(e,t){if(!ra(e)||bi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ua(e)===n&&(n=n.ownerDocument.body),n}function TT(e,t){const n=Ts(e);if(_p(e))return n;if(!ra(e)){let s=Io(e);for(;s&&!Ml(s);){if(xi(s)&&!Cy(s))return s;s=Io(s)}return n}let r=GC(e,t);for(;r&&FU(r)&&Cy(r);)r=GC(r,t);return r&&Ml(r)&&Cy(r)&&!xb(r)?n:r||VU(e)||n}const rz=async function(e){const t=this.getOffsetParent||TT,n=this.getDimensions,r=await n(e.floating);return{reference:nz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sz(e){return bi(e).direction==="rtl"}const iz={convertOffsetParentRelativeRectToViewportRelativeRect:KU,getDocumentElement:ua,getClippingRect:ez,getOffsetParent:TT,getElementRects:rz,getClientRects:GU,getDimensions:tz,getScale:kl,isElement:xi,isRTL:sz};function PT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function az(e,t){let n=null,r;const s=ua(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const h=e.getBoundingClientRect(),{left:f,top:p,width:y,height:x}=h;if(l||t(),!y||!x)return;const k=Sf(p),b=Sf(s.clientWidth-(f+y)),S=Sf(s.clientHeight-(p+x)),N=Sf(f),j={rootMargin:-k+"px "+-b+"px "+-S+"px "+-N+"px",threshold:Cs(0,Ao(1,u))||1};let P=!0;function T(I){const _=I[0].intersectionRatio;if(_!==u){if(!P)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!PT(h,e.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(T,{...j,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,j)}n.observe(e)}return o(!0),a}function oz(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=wb(e),f=s||a?[...h?ku(h):[],...ku(t)]:[];f.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),a&&N.addEventListener("resize",n)});const p=h&&l?az(h,n):null;let y=-1,x=null;o&&(x=new ResizeObserver(N=>{let[E]=N;E&&E.target===h&&x&&(x.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var j;(j=x)==null||j.observe(t)})),n()}),h&&!u&&x.observe(h),x.observe(t));let k,b=u?xc(e):null;u&&S();function S(){const N=xc(e);b&&!PT(b,N)&&n(),b=N,k=requestAnimationFrame(S)}return n(),()=>{var N;f.forEach(E=>{s&&E.removeEventListener("scroll",n),a&&E.removeEventListener("resize",n)}),p?.(),(N=x)==null||N.disconnect(),x=null,u&&cancelAnimationFrame(k)}}const cz=AU,lz=IU,dz=PU,uz=DU,hz=_U,ZC=TU,fz=OU,mz=(e,t,n)=>{const r=new Map,s={platform:iz,...n},a={...s.platform,_c:r};return EU(e,t,{...s,platform:a})};var pz=typeof document<"u",gz=function(){},Zf=pz?g.useLayoutEffect:gz;function Em(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Em(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!Em(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function _T(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function JC(e,t){const n=_T(e);return Math.round(t*n)/n}function Ny(e){const t=g.useRef(e);return Zf(()=>{t.current=e}),t}function vz(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:u,open:h}=e,[f,p]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,x]=g.useState(r);Em(y,r)||x(r);const[k,b]=g.useState(null),[S,N]=g.useState(null),E=g.useCallback(U=>{U!==I.current&&(I.current=U,b(U))},[]),j=g.useCallback(U=>{U!==_.current&&(_.current=U,N(U))},[]),P=a||k,T=o||S,I=g.useRef(null),_=g.useRef(null),A=g.useRef(f),O=u!=null,M=Ny(u),q=Ny(s),z=Ny(h),G=g.useCallback(()=>{if(!I.current||!_.current)return;const U={placement:t,strategy:n,middleware:y};q.current&&(U.platform=q.current),mz(I.current,_.current,U).then(ie=>{const fe={...ie,isPositioned:z.current!==!1};oe.current&&!Em(A.current,fe)&&(A.current=fe,Uu.flushSync(()=>{p(fe)}))})},[y,t,n,q,z]);Zf(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[h]);const oe=g.useRef(!1);Zf(()=>(oe.current=!0,()=>{oe.current=!1}),[]),Zf(()=>{if(P&&(I.current=P),T&&(_.current=T),P&&T){if(M.current)return M.current(P,T,G);G()}},[P,T,G,M,O]);const ke=g.useMemo(()=>({reference:I,floating:_,setReference:E,setFloating:j}),[E,j]),J=g.useMemo(()=>({reference:P,floating:T}),[P,T]),ge=g.useMemo(()=>{const U={position:n,left:0,top:0};if(!J.floating)return U;const ie=JC(J.floating,f.x),fe=JC(J.floating,f.y);return l?{...U,transform:"translate("+ie+"px, "+fe+"px)",..._T(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:fe}},[n,l,J.floating,f.x,f.y]);return g.useMemo(()=>({...f,update:G,refs:ke,elements:J,floatingStyles:ge}),[f,G,ke,J,ge])}const yz=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ZC({element:r.current,padding:s}).fn(n):{}:r?ZC({element:r,padding:s}).fn(n):{}}}},xz=(e,t)=>({...cz(e),options:[e,t]}),bz=(e,t)=>({...lz(e),options:[e,t]}),wz=(e,t)=>({...fz(e),options:[e,t]}),kz=(e,t)=>({...dz(e),options:[e,t]}),Sz=(e,t)=>({...uz(e),options:[e,t]}),Cz=(e,t)=>({...hz(e),options:[e,t]}),Nz=(e,t)=>({...yz(e),options:[e,t]});var jz="Arrow",RT=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return i.jsx(ot.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});RT.displayName=jz;var Ez=RT;function AT(e){const[t,n]=g.useState(void 0);return qn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const u=a.borderBoxSize,h=Array.isArray(u)?u[0]:u;o=h.inlineSize,l=h.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var kb="Popper",[IT,Ip]=Ri(kb),[Tz,OT]=IT(kb),DT=e=>{const{__scopePopper:t,children:n}=e,[r,s]=g.useState(null);return i.jsx(Tz,{scope:t,anchor:r,onAnchorChange:s,children:n})};DT.displayName=kb;var MT="PopperAnchor",LT=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=OT(MT,n),o=g.useRef(null),l=Ot(t,o),u=g.useRef(null);return g.useEffect(()=>{const h=u.current;u.current=r?.current||o.current,h!==u.current&&a.onAnchorChange(u.current)}),r?null:i.jsx(ot.div,{...s,ref:l})});LT.displayName=MT;var Sb="PopperContent",[Pz,_z]=IT(Sb),FT=g.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:k,...b}=e,S=OT(Sb,n),[N,E]=g.useState(null),j=Ot(t,K=>E(K)),[P,T]=g.useState(null),I=AT(P),_=I?.width??0,A=I?.height??0,O=r+(a!=="center"?"-"+a:""),M=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},q=Array.isArray(h)?h:[h],z=q.length>0,G={padding:M,boundary:q.filter(Az),altBoundary:z},{refs:oe,floatingStyles:ke,placement:J,isPositioned:ge,middlewareData:U}=vz({strategy:"fixed",placement:O,whileElementsMounted:(...K)=>oz(...K,{animationFrame:x==="always"}),elements:{reference:S.anchor},middleware:[xz({mainAxis:s+A,alignmentAxis:o}),u&&bz({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?wz():void 0,...G}),u&&kz({...G}),Sz({...G,apply:({elements:K,rects:ce,availableWidth:De,availableHeight:Fe})=>{const{width:Xe,height:He}=ce.reference,pt=K.floating.style;pt.setProperty("--radix-popper-available-width",`${De}px`),pt.setProperty("--radix-popper-available-height",`${Fe}px`),pt.setProperty("--radix-popper-anchor-width",`${Xe}px`),pt.setProperty("--radix-popper-anchor-height",`${He}px`)}}),P&&Nz({element:P,padding:l}),Iz({arrowWidth:_,arrowHeight:A}),y&&Cz({strategy:"referenceHidden",...G})]}),[ie,fe]=BT(J),B=kr(k);qn(()=>{ge&&B?.()},[ge,B]);const te=U.arrow?.x,ee=U.arrow?.y,ye=U.arrow?.centerOffset!==0,[Te,ne]=g.useState();return qn(()=>{N&&ne(window.getComputedStyle(N).zIndex)},[N]),i.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ke,transform:ge?ke.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Pz,{scope:n,placedSide:ie,onArrowChange:T,arrowX:te,arrowY:ee,shouldHideArrow:ye,children:i.jsx(ot.div,{"data-side":ie,"data-align":fe,...b,ref:j,style:{...b.style,animation:ge?void 0:"none"}})})})});FT.displayName=Sb;var UT="PopperArrow",Rz={top:"bottom",right:"left",bottom:"top",left:"right"},zT=g.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=_z(UT,r),o=Rz[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(Ez,{...s,ref:n,style:{...s.style,display:"block"}})})});zT.displayName=UT;function Az(e){return e!==null}var Iz=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[h,f]=BT(n),p={start:"0%",center:"50%",end:"100%"}[f],y=(s.arrow?.x??0)+l/2,x=(s.arrow?.y??0)+u/2;let k="",b="";return h==="bottom"?(k=o?p:`${y}px`,b=`${-u}px`):h==="top"?(k=o?p:`${y}px`,b=`${r.floating.height+u}px`):h==="right"?(k=`${-u}px`,b=o?p:`${x}px`):h==="left"&&(k=`${r.floating.width+u}px`,b=o?p:`${x}px`),{data:{x:k,y:b}}}});function BT(e){const[t,n="center"]=e.split("-");return[t,n]}var $T=DT,Cb=LT,VT=FT,qT=zT,Oz="Portal",Op=g.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=g.useState(!1);qn(()=>a(!0),[]);const o=n||s&&globalThis?.document?.body;return o?p2.createPortal(i.jsx(ot.div,{...r,ref:t}),o):null});Op.displayName=Oz;var Dz=JE[" useInsertionEffect ".trim().toString()]||qn;function bc({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,o]=Mz({defaultProp:t,onChange:n}),l=e!==void 0,u=l?e:s;{const f=g.useRef(e!==void 0);g.useEffect(()=>{const p=f.current;p!==l&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=g.useCallback(f=>{if(l){const p=Lz(f)?f(e):f;p!==e&&o.current?.(p)}else a(f)},[l,e,a,o]);return[u,h]}function Mz({defaultProp:e,onChange:t}){const[n,r]=g.useState(e),s=g.useRef(n),a=g.useRef(t);return Dz(()=>{a.current=t},[t]),g.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function Lz(e){return typeof e=="function"}function HT(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var WT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Fz="VisuallyHidden",Uz=g.forwardRef((e,t)=>i.jsx(ot.span,{...e,ref:t,style:{...WT,...e.style}}));Uz.displayName=Fz;var zz=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ul=new WeakMap,Cf=new WeakMap,Nf={},jy=0,KT=function(e){return e&&(e.host||KT(e.parentNode))},Bz=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=KT(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},$z=function(e,t,n,r){var s=Bz(t,Array.isArray(e)?e:[e]);Nf[n]||(Nf[n]=new WeakMap);var a=Nf[n],o=[],l=new Set,u=new Set(s),h=function(p){!p||l.has(p)||(l.add(p),h(p.parentNode))};s.forEach(h);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(y){if(l.has(y))f(y);else try{var x=y.getAttribute(r),k=x!==null&&x!=="false",b=(ul.get(y)||0)+1,S=(a.get(y)||0)+1;ul.set(y,b),a.set(y,S),o.push(y),b===1&&k&&Cf.set(y,!0),S===1&&y.setAttribute(n,"true"),k||y.setAttribute(r,"true")}catch(N){console.error("aria-hidden: cannot operate on ",y,N)}})};return f(t),l.clear(),jy++,function(){o.forEach(function(p){var y=ul.get(p)-1,x=a.get(p)-1;ul.set(p,y),a.set(p,x),y||(Cf.has(p)||p.removeAttribute(r),Cf.delete(p)),x||p.removeAttribute(n)}),jy--,jy||(ul=new WeakMap,ul=new WeakMap,Cf=new WeakMap,Nf={})}},Nb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=zz(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),$z(r,s,n,"aria-hidden")):function(){return null}},Gi=function(){return Gi=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Gi.apply(this,arguments)};function GT(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Vz(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Jf="right-scroll-bar-position",Yf="width-before-scroll-bar",qz="with-scroll-bars-hidden",Hz="--removed-body-scroll-bar-size";function Ey(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Wz(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var Kz=typeof window<"u"?g.useLayoutEffect:g.useEffect,YC=new WeakMap;function Gz(e,t){var n=Wz(null,function(r){return e.forEach(function(s){return Ey(s,r)})});return Kz(function(){var r=YC.get(n);if(r){var s=new Set(r),a=new Set(e),o=n.current;s.forEach(function(l){a.has(l)||Ey(l,null)}),a.forEach(function(l){s.has(l)||Ey(l,o)})}YC.set(n,e)},[e]),n}function Zz(e){return e}function Jz(e,t){t===void 0&&(t=Zz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var u=function(){var f=o;o=[],f.forEach(a)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return s}function Yz(e){e===void 0&&(e={});var t=Jz(null);return t.options=Gi({async:!0,ssr:!1},e),t}var ZT=function(e){var t=e.sideCar,n=GT(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Gi({},n))};ZT.isSideCarExport=!0;function Qz(e,t){return e.useMedium(t),ZT}var JT=Yz(),Ty=function(){},Dp=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:Ty,onWheelCapture:Ty,onTouchMoveCapture:Ty}),s=r[0],a=r[1],o=e.forwardProps,l=e.children,u=e.className,h=e.removeScrollBar,f=e.enabled,p=e.shards,y=e.sideCar,x=e.noRelative,k=e.noIsolation,b=e.inert,S=e.allowPinchZoom,N=e.as,E=N===void 0?"div":N,j=e.gapMode,P=GT(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=y,I=Gz([n,t]),_=Gi(Gi({},P),s);return g.createElement(g.Fragment,null,f&&g.createElement(T,{sideCar:JT,removeScrollBar:h,shards:p,noRelative:x,noIsolation:k,inert:b,setCallbacks:a,allowPinchZoom:!!S,lockRef:n,gapMode:j}),o?g.cloneElement(g.Children.only(l),Gi(Gi({},_),{ref:I})):g.createElement(E,Gi({},_,{className:u,ref:I}),l))});Dp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dp.classNames={fullWidth:Yf,zeroRight:Jf};var Xz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Xz();return t&&e.setAttribute("nonce",t),e}function tB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rB=function(){var e=0,t=null;return{add:function(n){e==0&&(t=eB())&&(tB(t,n),nB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sB=function(){var e=rB();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},YT=function(){var e=sB(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},iB={left:0,top:0,right:0,gap:0},Py=function(e){return parseInt(e||"",10)||0},aB=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Py(n),Py(r),Py(s)]},oB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return iB;var t=aB(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},cB=YT(),Sl="data-scroll-locked",lB=function(e,t,n,r){var s=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(qz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Sl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jf,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Jf," .").concat(Jf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yf," .").concat(Yf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Sl,`] {
    `).concat(Hz,": ").concat(l,`px;
  }
`)},QC=function(){var e=parseInt(document.body.getAttribute(Sl)||"0",10);return isFinite(e)?e:0},dB=function(){g.useEffect(function(){return document.body.setAttribute(Sl,(QC()+1).toString()),function(){var e=QC()-1;e<=0?document.body.removeAttribute(Sl):document.body.setAttribute(Sl,e.toString())}},[])},uB=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;dB();var a=g.useMemo(function(){return oB(s)},[s]);return g.createElement(cB,{styles:lB(a,!t,s,n?"":"!important")})},Fx=!1;if(typeof window<"u")try{var jf=Object.defineProperty({},"passive",{get:function(){return Fx=!0,!0}});window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{Fx=!1}var hl=Fx?{passive:!1}:!1,hB=function(e){return e.tagName==="TEXTAREA"},QT=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!hB(e)&&n[t]==="visible")},fB=function(e){return QT(e,"overflowY")},mB=function(e){return QT(e,"overflowX")},XC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=XT(e,r);if(s){var a=eP(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},pB=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},gB=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},XT=function(e,t){return e==="v"?fB(t):mB(t)},eP=function(e,t){return e==="v"?pB(t):gB(t)},vB=function(e,t){return e==="h"&&t==="rtl"?-1:1},yB=function(e,t,n,r,s){var a=vB(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,u=t.contains(l),h=!1,f=o>0,p=0,y=0;do{if(!l)break;var x=eP(e,l),k=x[0],b=x[1],S=x[2],N=b-S-a*k;(k||N)&&XT(e,l)&&(p+=N,y+=k);var E=l.parentNode;l=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return(f&&Math.abs(p)<1||!f&&Math.abs(y)<1)&&(h=!0),h},Ef=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eN=function(e){return[e.deltaX,e.deltaY]},tN=function(e){return e&&"current"in e?e.current:e},xB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},bB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},wB=0,fl=[];function kB(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(wB++)[0],a=g.useState(YT)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var b=Vz([e.lockRef.current],(e.shards||[]).map(tN),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var N=Ef(b),E=n.current,j="deltaX"in b?b.deltaX:E[0]-N[0],P="deltaY"in b?b.deltaY:E[1]-N[1],T,I=b.target,_=Math.abs(j)>Math.abs(P)?"h":"v";if("touches"in b&&_==="h"&&I.type==="range")return!1;var A=XC(_,I);if(!A)return!0;if(A?T=_:(T=_==="v"?"h":"v",A=XC(_,I)),!A)return!1;if(!r.current&&"changedTouches"in b&&(j||P)&&(r.current=T),!T)return!0;var O=r.current||T;return yB(O,S,b,O==="h"?j:P)},[]),u=g.useCallback(function(b){var S=b;if(!(!fl.length||fl[fl.length-1]!==a)){var N="deltaY"in S?eN(S):Ef(S),E=t.current.filter(function(T){return T.name===S.type&&(T.target===S.target||S.target===T.shadowParent)&&xB(T.delta,N)})[0];if(E&&E.should){S.cancelable&&S.preventDefault();return}if(!E){var j=(o.current.shards||[]).map(tN).filter(Boolean).filter(function(T){return T.contains(S.target)}),P=j.length>0?l(S,j[0]):!o.current.noIsolation;P&&S.cancelable&&S.preventDefault()}}},[]),h=g.useCallback(function(b,S,N,E){var j={name:b,delta:S,target:N,should:E,shadowParent:SB(N)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(P){return P!==j})},1)},[]),f=g.useCallback(function(b){n.current=Ef(b),r.current=void 0},[]),p=g.useCallback(function(b){h(b.type,eN(b),b.target,l(b,e.lockRef.current))},[]),y=g.useCallback(function(b){h(b.type,Ef(b),b.target,l(b,e.lockRef.current))},[]);g.useEffect(function(){return fl.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",u,hl),document.addEventListener("touchmove",u,hl),document.addEventListener("touchstart",f,hl),function(){fl=fl.filter(function(b){return b!==a}),document.removeEventListener("wheel",u,hl),document.removeEventListener("touchmove",u,hl),document.removeEventListener("touchstart",f,hl)}},[]);var x=e.removeScrollBar,k=e.inert;return g.createElement(g.Fragment,null,k?g.createElement(a,{styles:bB(s)}):null,x?g.createElement(uB,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function SB(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CB=Qz(JT,kB);var Mp=g.forwardRef(function(e,t){return g.createElement(Dp,Gi({},e,{ref:t,sideCar:CB}))});Mp.classNames=Dp.classNames;var NB=[" ","Enter","ArrowUp","ArrowDown"],jB=[" ","Enter"],wc="Select",[Lp,Fp,EB]=gT(wc),[ad,xle]=Ri(wc,[EB,Ip]),Up=Ip(),[TB,Uo]=ad(wc),[PB,_B]=ad(wc),tP=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:u,dir:h,name:f,autoComplete:p,disabled:y,required:x,form:k}=e,b=Up(t),[S,N]=g.useState(null),[E,j]=g.useState(null),[P,T]=g.useState(!1),I=qu(h),[_,A]=bc({prop:r,defaultProp:s??!1,onChange:a,caller:wc}),[O,M]=bc({prop:o,defaultProp:l,onChange:u,caller:wc}),q=g.useRef(null),z=S?k||!!S.closest("form"):!0,[G,oe]=g.useState(new Set),ke=Array.from(G).map(J=>J.props.value).join(";");return i.jsx($T,{...b,children:i.jsxs(TB,{required:x,scope:t,trigger:S,onTriggerChange:N,valueNode:E,onValueNodeChange:j,valueNodeHasChildren:P,onValueNodeHasChildrenChange:T,contentId:La(),value:O,onValueChange:M,open:_,onOpenChange:A,dir:I,triggerPointerDownPosRef:q,disabled:y,children:[i.jsx(Lp.Provider,{scope:t,children:i.jsx(PB,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(J=>{oe(ge=>new Set(ge).add(J))},[]),onNativeOptionRemove:g.useCallback(J=>{oe(ge=>{const U=new Set(ge);return U.delete(J),U})},[]),children:n})}),z?i.jsxs(SP,{"aria-hidden":!0,required:x,tabIndex:-1,name:f,autoComplete:p,value:O,onChange:J=>M(J.target.value),disabled:y,form:k,children:[O===void 0?i.jsx("option",{value:""}):null,Array.from(G)]},ke):null]})})};tP.displayName=wc;var nP="SelectTrigger",rP=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=Up(n),o=Uo(nP,n),l=o.disabled||r,u=Ot(t,o.onTriggerChange),h=Fp(n),f=g.useRef("touch"),[p,y,x]=NP(b=>{const S=h().filter(j=>!j.disabled),N=S.find(j=>j.value===o.value),E=jP(S,b,N);E!==void 0&&o.onValueChange(E.value)}),k=b=>{l||(o.onOpenChange(!0),x()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return i.jsx(Cb,{asChild:!0,...a,children:i.jsx(ot.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":CP(o.value)?"":void 0,...s,ref:u,onClick:at(s.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&k(b)}),onPointerDown:at(s.onPointerDown,b=>{f.current=b.pointerType;const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(k(b),b.preventDefault())}),onKeyDown:at(s.onKeyDown,b=>{const S=p.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(S&&b.key===" ")&&NB.includes(b.key)&&(k(),b.preventDefault())})})})});rP.displayName=nP;var sP="SelectValue",iP=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=e,u=Uo(sP,n),{onValueNodeHasChildrenChange:h}=u,f=a!==void 0,p=Ot(t,u.onValueNodeChange);return qn(()=>{h(f)},[h,f]),i.jsx(ot.span,{...l,ref:p,style:{pointerEvents:"none"},children:CP(u.value)?i.jsx(i.Fragment,{children:o}):a})});iP.displayName=sP;var RB="SelectIcon",aP=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(ot.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});aP.displayName=RB;var AB="SelectPortal",oP=e=>i.jsx(Op,{asChild:!0,...e});oP.displayName=AB;var kc="SelectContent",cP=g.forwardRef((e,t)=>{const n=Uo(kc,e.__scopeSelect),[r,s]=g.useState();if(qn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Uu.createPortal(i.jsx(lP,{scope:e.__scopeSelect,children:i.jsx(Lp.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),a):null}return i.jsx(dP,{...e,ref:t})});cP.displayName=kc;var li=10,[lP,zo]=ad(kc),IB="SelectContentImpl",OB=yc("SelectContent.RemoveScroll"),dP=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:u,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:x,sticky:k,hideWhenDetached:b,avoidCollisions:S,...N}=e,E=Uo(kc,n),[j,P]=g.useState(null),[T,I]=g.useState(null),_=Ot(t,K=>P(K)),[A,O]=g.useState(null),[M,q]=g.useState(null),z=Fp(n),[G,oe]=g.useState(!1),ke=g.useRef(!1);g.useEffect(()=>{if(j)return Nb(j)},[j]),pb();const J=g.useCallback(K=>{const[ce,...De]=z().map(He=>He.ref.current),[Fe]=De.slice(-1),Xe=document.activeElement;for(const He of K)if(He===Xe||(He?.scrollIntoView({block:"nearest"}),He===ce&&T&&(T.scrollTop=0),He===Fe&&T&&(T.scrollTop=T.scrollHeight),He?.focus(),document.activeElement!==Xe))return},[z,T]),ge=g.useCallback(()=>J([A,j]),[J,A,j]);g.useEffect(()=>{G&&ge()},[G,ge]);const{onOpenChange:U,triggerPointerDownPosRef:ie}=E;g.useEffect(()=>{if(j){let K={x:0,y:0};const ce=Fe=>{K={x:Math.abs(Math.round(Fe.pageX)-(ie.current?.x??0)),y:Math.abs(Math.round(Fe.pageY)-(ie.current?.y??0))}},De=Fe=>{K.x<=10&&K.y<=10?Fe.preventDefault():j.contains(Fe.target)||U(!1),document.removeEventListener("pointermove",ce),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",De,{capture:!0})}}},[j,U,ie]),g.useEffect(()=>{const K=()=>U(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[U]);const[fe,B]=NP(K=>{const ce=z().filter(Xe=>!Xe.disabled),De=ce.find(Xe=>Xe.ref.current===document.activeElement),Fe=jP(ce,K,De);Fe&&setTimeout(()=>Fe.ref.current.focus())}),te=g.useCallback((K,ce,De)=>{const Fe=!ke.current&&!De;(E.value!==void 0&&E.value===ce||Fe)&&(O(K),Fe&&(ke.current=!0))},[E.value]),ee=g.useCallback(()=>j?.focus(),[j]),ye=g.useCallback((K,ce,De)=>{const Fe=!ke.current&&!De;(E.value!==void 0&&E.value===ce||Fe)&&q(K)},[E.value]),Te=r==="popper"?Ux:uP,ne=Te===Ux?{side:l,sideOffset:u,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:x,sticky:k,hideWhenDetached:b,avoidCollisions:S}:{};return i.jsx(lP,{scope:n,content:j,viewport:T,onViewportChange:I,itemRefCallback:te,selectedItem:A,onItemLeave:ee,itemTextRefCallback:ye,focusSelectedItem:ge,selectedItemText:M,position:r,isPositioned:G,searchRef:fe,children:i.jsx(Mp,{as:OB,allowPinchZoom:!0,children:i.jsx(Tp,{asChild:!0,trapped:E.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:at(s,K=>{E.trigger?.focus({preventScroll:!0}),K.preventDefault()}),children:i.jsx(Ep,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:i.jsx(Te,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:K=>K.preventDefault(),...N,...ne,onPlaced:()=>oe(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:at(N.onKeyDown,K=>{const ce=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!ce&&K.key.length===1&&B(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let Fe=z().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(K.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const Xe=K.target,He=Fe.indexOf(Xe);Fe=Fe.slice(He+1)}setTimeout(()=>J(Fe)),K.preventDefault()}})})})})})})});dP.displayName=IB;var DB="SelectItemAlignedPosition",uP=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=Uo(kc,n),o=zo(kc,n),[l,u]=g.useState(null),[h,f]=g.useState(null),p=Ot(t,_=>f(_)),y=Fp(n),x=g.useRef(!1),k=g.useRef(!0),{viewport:b,selectedItem:S,selectedItemText:N,focusSelectedItem:E}=o,j=g.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&h&&b&&S&&N){const _=a.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),M=N.getBoundingClientRect();if(a.dir!=="rtl"){const Xe=M.left-A.left,He=O.left-Xe,pt=_.left-He,jt=_.width+pt,Kn=Math.max(jt,A.width),ht=window.innerWidth-li,qt=Ix(He,[li,Math.max(li,ht-Kn)]);l.style.minWidth=jt+"px",l.style.left=qt+"px"}else{const Xe=A.right-M.right,He=window.innerWidth-O.right-Xe,pt=window.innerWidth-_.right-He,jt=_.width+pt,Kn=Math.max(jt,A.width),ht=window.innerWidth-li,qt=Ix(He,[li,Math.max(li,ht-Kn)]);l.style.minWidth=jt+"px",l.style.right=qt+"px"}const q=y(),z=window.innerHeight-li*2,G=b.scrollHeight,oe=window.getComputedStyle(h),ke=parseInt(oe.borderTopWidth,10),J=parseInt(oe.paddingTop,10),ge=parseInt(oe.borderBottomWidth,10),U=parseInt(oe.paddingBottom,10),ie=ke+J+G+U+ge,fe=Math.min(S.offsetHeight*5,ie),B=window.getComputedStyle(b),te=parseInt(B.paddingTop,10),ee=parseInt(B.paddingBottom,10),ye=_.top+_.height/2-li,Te=z-ye,ne=S.offsetHeight/2,K=S.offsetTop+ne,ce=ke+J+K,De=ie-ce;if(ce<=ye){const Xe=q.length>0&&S===q[q.length-1].ref.current;l.style.bottom="0px";const He=h.clientHeight-b.offsetTop-b.offsetHeight,pt=Math.max(Te,ne+(Xe?ee:0)+He+ge),jt=ce+pt;l.style.height=jt+"px"}else{const Xe=q.length>0&&S===q[0].ref.current;l.style.top="0px";const pt=Math.max(ye,ke+b.offsetTop+(Xe?te:0)+ne)+De;l.style.height=pt+"px",b.scrollTop=ce-ye+b.offsetTop}l.style.margin=`${li}px 0`,l.style.minHeight=fe+"px",l.style.maxHeight=z+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[y,a.trigger,a.valueNode,l,h,b,S,N,a.dir,r]);qn(()=>j(),[j]);const[P,T]=g.useState();qn(()=>{h&&T(window.getComputedStyle(h).zIndex)},[h]);const I=g.useCallback(_=>{_&&k.current===!0&&(j(),E?.(),k.current=!1)},[j,E]);return i.jsx(LB,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:I,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:i.jsx(ot.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});uP.displayName=DB;var MB="SelectPopperPosition",Ux=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=li,...a}=e,o=Up(n);return i.jsx(VT,{...o,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ux.displayName=MB;var[LB,jb]=ad(kc,{}),zx="SelectViewport",hP=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=zo(zx,n),o=jb(zx,n),l=Ot(t,a.onViewportChange),u=g.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Lp.Slot,{scope:n,children:i.jsx(ot.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:at(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=o;if(y?.current&&p){const x=Math.abs(u.current-f.scrollTop);if(x>0){const k=window.innerHeight-li*2,b=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),N=Math.max(b,S);if(N<k){const E=N+x,j=Math.min(k,E),P=E-j;p.style.height=j+"px",p.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,p.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});hP.displayName=zx;var fP="SelectGroup",[FB,UB]=ad(fP),zB=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=La();return i.jsx(FB,{scope:n,id:s,children:i.jsx(ot.div,{role:"group","aria-labelledby":s,...r,ref:t})})});zB.displayName=fP;var mP="SelectLabel",BB=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=UB(mP,n);return i.jsx(ot.div,{id:s.id,...r,ref:t})});BB.displayName=mP;var Tm="SelectItem",[$B,pP]=ad(Tm),gP=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=e,l=Uo(Tm,n),u=zo(Tm,n),h=l.value===r,[f,p]=g.useState(a??""),[y,x]=g.useState(!1),k=Ot(t,E=>u.itemRefCallback?.(E,r,s)),b=La(),S=g.useRef("touch"),N=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx($B,{scope:n,value:r,disabled:s,textId:b,isSelected:h,onItemTextChange:g.useCallback(E=>{p(j=>j||(E?.textContent??"").trim())},[]),children:i.jsx(Lp.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:i.jsx(ot.div,{role:"option","aria-labelledby":b,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:k,onFocus:at(o.onFocus,()=>x(!0)),onBlur:at(o.onBlur,()=>x(!1)),onClick:at(o.onClick,()=>{S.current!=="mouse"&&N()}),onPointerUp:at(o.onPointerUp,()=>{S.current==="mouse"&&N()}),onPointerDown:at(o.onPointerDown,E=>{S.current=E.pointerType}),onPointerMove:at(o.onPointerMove,E=>{S.current=E.pointerType,s?u.onItemLeave?.():S.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(o.onPointerLeave,E=>{E.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:at(o.onKeyDown,E=>{u.searchRef?.current!==""&&E.key===" "||(jB.includes(E.key)&&N(),E.key===" "&&E.preventDefault())})})})})});gP.displayName=Tm;var cu="SelectItemText",vP=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,o=Uo(cu,n),l=zo(cu,n),u=pP(cu,n),h=_B(cu,n),[f,p]=g.useState(null),y=Ot(t,N=>p(N),u.onItemTextChange,N=>l.itemTextRefCallback?.(N,u.value,u.disabled)),x=f?.textContent,k=g.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:x},u.value),[u.disabled,u.value,x]),{onNativeOptionAdd:b,onNativeOptionRemove:S}=h;return qn(()=>(b(k),()=>S(k)),[b,S,k]),i.jsxs(i.Fragment,{children:[i.jsx(ot.span,{id:u.textId,...a,ref:y}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Uu.createPortal(a.children,o.valueNode):null]})});vP.displayName=cu;var yP="SelectItemIndicator",xP=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return pP(yP,n).isSelected?i.jsx(ot.span,{"aria-hidden":!0,...r,ref:t}):null});xP.displayName=yP;var Bx="SelectScrollUpButton",bP=g.forwardRef((e,t)=>{const n=zo(Bx,e.__scopeSelect),r=jb(Bx,e.__scopeSelect),[s,a]=g.useState(!1),o=Ot(t,r.onScrollButtonChange);return qn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollTop>0;a(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(kP,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});bP.displayName=Bx;var $x="SelectScrollDownButton",wP=g.forwardRef((e,t)=>{const n=zo($x,e.__scopeSelect),r=jb($x,e.__scopeSelect),[s,a]=g.useState(!1),o=Ot(t,r.onScrollButtonChange);return qn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<h;a(f)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(kP,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});wP.displayName=$x;var kP=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=zo("SelectScrollButton",n),o=g.useRef(null),l=Fp(n),u=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>u(),[u]),qn(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),i.jsx(ot.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:at(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:at(s.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:at(s.onPointerLeave,()=>{u()})})}),VB="SelectSeparator",qB=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(ot.div,{"aria-hidden":!0,...r,ref:t})});qB.displayName=VB;var Vx="SelectArrow",HB=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Up(n),a=Uo(Vx,n),o=zo(Vx,n);return a.open&&o.position==="popper"?i.jsx(qT,{...s,...r,ref:t}):null});HB.displayName=Vx;var WB="SelectBubbleInput",SP=g.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=g.useRef(null),a=Ot(r,s),o=HT(t);return g.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const p=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(p)}},[o,t]),i.jsx(ot.select,{...n,style:{...WT,...n.style},ref:a,defaultValue:t})});SP.displayName=WB;function CP(e){return e===""||e===void 0}function NP(e){const t=kr(e),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(o=>{const l=n.current+o;t(l),(function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(l)},[t]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function jP(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=KB(e,Math.max(a,0));s.length===1&&(o=o.filter(h=>h!==n));const u=o.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function KB(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var GB=tP,ZB=rP,JB=iP,YB=aP,QB=oP,XB=cP,e8=hP,t8=gP,n8=vP,r8=xP,s8=bP,i8=wP;/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),nN=e=>{const t=o8(e);return t.charAt(0).toUpperCase()+t.slice(1)},EP=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},u)=>g.createElement("svg",{ref:u,...c8,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:EP("lucide",s),...l},[...o.map(([h,f])=>g.createElement(h,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(e,t)=>{const n=g.forwardRef(({className:r,...s},a)=>g.createElement(l8,{ref:a,iconNode:t,className:EP(`lucide-${a8(nN(e))}`,`lucide-${e}`,r),...s}));return n.displayName=nN(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qx=Le("activity",d8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],is=Le("arrow-left",u8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],f8=Le("arrow-up-down",h8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rN=Le("award",m8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],g8=Le("ban",p8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],_y=Le("bell",v8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],x8=Le("briefcase",y8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Hx=Le("building",b8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bt=Le("calendar",w8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Eb=Le("camera",k8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ws=Le("check",S8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ic=Le("chevron-down",C8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],TP=Le("chevron-left",N8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],PP=Le("chevron-right",j8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],od=Le("chevron-up",E8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],P8=Le("chevrons-left",T8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],R8=Le("chevrons-right",_8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$a=Le("circle-alert",A8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Oo=Le("circle-check-big",I8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ks=Le("circle-check",O8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],js=Le("circle-x",D8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],L8=Le("circle",M8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],U8=Le("clipboard-list",F8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["path",{d:"M16 21.16a10 10 0 1 1 5-13.516",key:"cxo92l"}],["path",{d:"M20 11.5v6",key:"2ei3xq"}],["path",{d:"M20 21.5h.01",key:"1r2dzp"}]],B8=Le("clock-alert",z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Nn=Le("clock",$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Su=Le("credit-card",V8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],_P=Le("crown",q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Cu=Le("dollar-sign",H8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Gs=Le("download",W8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Qf=Le("external-link",K8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ds=Le("eye-off",G8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Or=Le("eye",Z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nn=Le("file-text",J8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],zp=Le("funnel",Y8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],X8=Le("gift",Q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Pm=Le("globe",e7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],RP=Le("graduation-cap",t7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],r7=Le("heart",n7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Tb=Le("key",s7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],sN=Le("languages",i7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],o7=Le("lightbulb",a7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rn=Le("loader-circle",c7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Pb=Le("lock",l7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_b=Le("log-out",d7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ll=Le("mail",u7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Rb=Le("map-pin",h7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Oc=Le("message-square",f7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],p7=Le("mic-off",m7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],v7=Le("mic",g7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],x7=Le("monitor",y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],jo=Le("pencil",b7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],k7=Le("phone-off",w7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ab=Le("phone",S7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Ib=Le("pill",C7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Do=Le("plus",N7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Tf=Le("refresh-cw",j7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_m=Le("save",E7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Fl=Le("search",T7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Wu=Le("send",P7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AP=Le("settings",_7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],A7=Le("share",R7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],O7=Le("shield-check",I7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wx=Le("shield",D7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],L7=Le("star",M7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Ul=Le("stethoscope",F7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Nu=Le("trash-2",U7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],iN=Le("trending-up",z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bn=Le("triangle-alert",B7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Rm=Le("upload",$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],q7=Le("user-check",V7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],W7=Le("user-cog",H7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],G7=Le("user-plus",K7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fs=Le("user",Z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Am=Le("users",J7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ry=Le("video-off",Y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],vi=Le("video",Q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],e9=Le("volume-2",X7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],n9=Le("volume-x",t9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],s9=Le("wifi-off",r9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],a9=Le("wifi",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],as=Le("x",o9);function es({...e}){return i.jsx(GB,{"data-slot":"select",...e})}function ts({...e}){return i.jsx(JB,{"data-slot":"select-value",...e})}function ns({className:e,size:t="default",children:n,...r}){return i.jsxs(ZB,{"data-slot":"select-trigger","data-size":t,className:St("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,i.jsx(YB,{asChild:!0,children:i.jsx(Ic,{className:"size-4 opacity-50"})})]})}function rs({className:e,children:t,position:n="popper",...r}){return i.jsx(QB,{children:i.jsxs(XB,{"data-slot":"select-content",className:St("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(c9,{}),i.jsx(e8,{className:St("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),i.jsx(l9,{})]})})}function wt({className:e,children:t,...n}){return i.jsxs(t8,{"data-slot":"select-item",className:St("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[i.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:i.jsx(r8,{children:i.jsx(Ws,{className:"size-4"})})}),i.jsx(n8,{children:t})]})}function c9({className:e,...t}){return i.jsx(s8,{"data-slot":"select-scroll-up-button",className:St("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(od,{className:"size-4"})})}function l9({className:e,...t}){return i.jsx(i8,{"data-slot":"select-scroll-down-button",className:St("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Ic,{className:"size-4"})})}var Ay="rovingFocusGroup.onEntryFocus",d9={bubbles:!1,cancelable:!0},Ku="RovingFocusGroup",[Kx,IP,u9]=gT(Ku),[h9,Bp]=Ri(Ku,[u9]),[f9,m9]=h9(Ku),OP=g.forwardRef((e,t)=>i.jsx(Kx.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Kx.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(p9,{...e,ref:t})})}));OP.displayName=Ku;var p9=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=e,y=g.useRef(null),x=Ot(t,y),k=qu(a),[b,S]=bc({prop:o,defaultProp:l??null,onChange:u,caller:Ku}),[N,E]=g.useState(!1),j=kr(h),P=IP(n),T=g.useRef(!1),[I,_]=g.useState(0);return g.useEffect(()=>{const A=y.current;if(A)return A.addEventListener(Ay,j),()=>A.removeEventListener(Ay,j)},[j]),i.jsx(f9,{scope:n,orientation:r,dir:k,loop:s,currentTabStopId:b,onItemFocus:g.useCallback(A=>S(A),[S]),onItemShiftTab:g.useCallback(()=>E(!0),[]),onFocusableItemAdd:g.useCallback(()=>_(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>_(A=>A-1),[]),children:i.jsx(ot.div,{tabIndex:N||I===0?-1:0,"data-orientation":r,...p,ref:x,style:{outline:"none",...e.style},onMouseDown:at(e.onMouseDown,()=>{T.current=!0}),onFocus:at(e.onFocus,A=>{const O=!T.current;if(A.target===A.currentTarget&&O&&!N){const M=new CustomEvent(Ay,d9);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const q=P().filter(J=>J.focusable),z=q.find(J=>J.active),G=q.find(J=>J.id===b),ke=[z,G,...q].filter(Boolean).map(J=>J.ref.current);LP(ke,f)}}T.current=!1}),onBlur:at(e.onBlur,()=>E(!1))})})}),DP="RovingFocusGroupItem",MP=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=e,u=La(),h=a||u,f=m9(DP,n),p=f.currentTabStopId===h,y=IP(n),{onFocusableItemAdd:x,onFocusableItemRemove:k,currentTabStopId:b}=f;return g.useEffect(()=>{if(r)return x(),()=>k()},[r,x,k]),i.jsx(Kx.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:i.jsx(ot.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:at(e.onMouseDown,S=>{r?f.onItemFocus(h):S.preventDefault()}),onFocus:at(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:at(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const N=y9(S,f.orientation,f.dir);if(N!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let j=y().filter(P=>P.focusable).map(P=>P.ref.current);if(N==="last")j.reverse();else if(N==="prev"||N==="next"){N==="prev"&&j.reverse();const P=j.indexOf(S.currentTarget);j=f.loop?x9(j,P+1):j.slice(P+1)}setTimeout(()=>LP(j))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:b!=null}):o})})});MP.displayName=DP;var g9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function v9(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function y9(e,t,n){const r=v9(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return g9[r]}function LP(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function x9(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var FP=OP,UP=MP;function b9(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var Qs=e=>{const{present:t,children:n}=e,r=w9(t),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),a=Ot(r.ref,k9(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:a}):null};Qs.displayName="Presence";function w9(e){const[t,n]=g.useState(),r=g.useRef(null),s=g.useRef(e),a=g.useRef("none"),o=e?"mounted":"unmounted",[l,u]=b9(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=Pf(r.current);a.current=l==="mounted"?h:"none"},[l]),qn(()=>{const h=r.current,f=s.current;if(f!==e){const y=a.current,x=Pf(h);e?u("MOUNT"):x==="none"||h?.display==="none"?u("UNMOUNT"):u(f&&y!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),qn(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,p=x=>{const b=Pf(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&b&&(u("ANIMATION_END"),!s.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},y=x=>{x.target===t&&(a.current=Pf(r.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Pf(e){return e?.animationName||"none"}function k9(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var $p="Tabs",[S9,ble]=Ri($p,[Bp]),zP=Bp(),[C9,Ob]=S9($p),BP=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:u="automatic",...h}=e,f=qu(l),[p,y]=bc({prop:r,onChange:s,defaultProp:a??"",caller:$p});return i.jsx(C9,{scope:n,baseId:La(),value:p,onValueChange:y,orientation:o,dir:f,activationMode:u,children:i.jsx(ot.div,{dir:f,"data-orientation":o,...h,ref:t})})});BP.displayName=$p;var $P="TabsList",VP=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=Ob($P,n),o=zP(n);return i.jsx(FP,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(ot.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});VP.displayName=$P;var qP="TabsTrigger",HP=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,o=Ob(qP,n),l=zP(n),u=GP(o.baseId,r),h=ZP(o.baseId,r),f=r===o.value;return i.jsx(UP,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(ot.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...a,ref:t,onMouseDown:at(e.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:at(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:at(e.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!s&&p&&o.onValueChange(r)})})})});HP.displayName=qP;var WP="TabsContent",KP=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=e,l=Ob(WP,n),u=GP(l.baseId,r),h=ZP(l.baseId,r),f=r===l.value,p=g.useRef(f);return g.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),i.jsx(Qs,{present:s||f,children:({present:y})=>i.jsx(ot.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!y,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:y&&a})})});KP.displayName=WP;function GP(e,t){return`${e}-trigger-${t}`}function ZP(e,t){return`${e}-content-${t}`}var N9=BP,j9=VP,E9=HP,T9=KP;function Dc({className:e,...t}){return i.jsx(N9,{"data-slot":"tabs",className:St("flex flex-col gap-2",e),...t})}function Mc({className:e,...t}){return i.jsx(j9,{"data-slot":"tabs-list",className:St("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function Sn({className:e,...t}){return i.jsx(E9,{"data-slot":"tabs-trigger",className:St("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Cn({className:e,...t}){return i.jsx(T9,{"data-slot":"tabs-content",className:St("flex-1 outline-none",e),...t})}/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function JP(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function P9(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function aN(e,t){return e.get(JP(e,t))}function _9(e,t,n){P9(e,t),t.set(e,n)}function R9(e,t,n){return e.set(JP(e,t),n),n}const A9=100,st={},I9=()=>{st.previousActiveElement instanceof HTMLElement?(st.previousActiveElement.focus(),st.previousActiveElement=null):document.body&&document.body.focus()},O9=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;st.restoreFocusTimeout=setTimeout(()=>{I9(),t()},A9),window.scrollTo(n,r)}),YP="swal2-",D9=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],de=D9.reduce((e,t)=>(e[t]=YP+t,e),{}),M9=["success","warning","info","question","error"],Im=M9.reduce((e,t)=>(e[t]=YP+t,e),{}),QP="SweetAlert2:",Db=e=>e.charAt(0).toUpperCase()+e.slice(1),Lr=e=>{console.warn(`${QP} ${typeof e=="object"?e.join(" "):e}`)},Lc=e=>{console.error(`${QP} ${e}`)},oN=[],L9=e=>{oN.includes(e)||(oN.push(e),Lr(e))},XP=(e,t=null)=>{L9(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Vp=e=>typeof e=="function"?e():e,Mb=e=>e&&typeof e.toPromise=="function",Gu=e=>Mb(e)?e.toPromise():Promise.resolve(e),Lb=e=>e&&Promise.resolve(e)===e,Fr=()=>document.body.querySelector(`.${de.container}`),Zu=e=>{const t=Fr();return t?t.querySelector(e):null},Rs=e=>Zu(`.${e}`),Mt=()=>Rs(de.popup),cd=()=>Rs(de.icon),F9=()=>Rs(de["icon-content"]),e_=()=>Rs(de.title),Fb=()=>Rs(de["html-container"]),t_=()=>Rs(de.image),Ub=()=>Rs(de["progress-steps"]),qp=()=>Rs(de["validation-message"]),sa=()=>Zu(`.${de.actions} .${de.confirm}`),ld=()=>Zu(`.${de.actions} .${de.cancel}`),Fc=()=>Zu(`.${de.actions} .${de.deny}`),U9=()=>Rs(de["input-label"]),dd=()=>Zu(`.${de.loader}`),Ju=()=>Rs(de.actions),n_=()=>Rs(de.footer),Hp=()=>Rs(de["timer-progress-bar"]),zb=()=>Rs(de.close),z9=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Bb=()=>{const e=Mt();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((a,o)=>{const l=parseInt(a.getAttribute("tabindex")||"0"),u=parseInt(o.getAttribute("tabindex")||"0");return l>u?1:l<u?-1:0}),r=e.querySelectorAll(z9),s=Array.from(r).filter(a=>a.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(s))].filter(a=>us(a))},$b=()=>Fa(document.body,de.shown)&&!Fa(document.body,de["toast-shown"])&&!Fa(document.body,de["no-backdrop"]),Wp=()=>{const e=Mt();return e?Fa(e,de.toast):!1},B9=()=>{const e=Mt();return e?e.hasAttribute("data-loading"):!1},As=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),s=r.querySelector("head");s&&Array.from(s.childNodes).forEach(o=>{e.appendChild(o)});const a=r.querySelector("body");a&&Array.from(a.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},Fa=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},$9=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(de).includes(n)&&!Object.values(Im).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},_s=(e,t,n)=>{if($9(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Lr(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Ft(e,r)}},Kp=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${de.popup} > .${de[t]}`);case"checkbox":return e.querySelector(`.${de.popup} > .${de.checkbox} input`);case"radio":return e.querySelector(`.${de.popup} > .${de.radio} input:checked`)||e.querySelector(`.${de.popup} > .${de.radio} input:first-child`);case"range":return e.querySelector(`.${de.popup} > .${de.range} input`);default:return e.querySelector(`.${de.popup} > .${de.input}`)}},r_=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},s_=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(s=>{n?s.classList.add(r):s.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Ft=(e,t)=>{s_(e,t,!0)},Ys=(e,t)=>{s_(e,t,!1)},ko=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const s=n[r];if(s instanceof HTMLElement&&Fa(s,t))return s}},hc=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},lr=(e,t="flex")=>{e&&(e.style.display=t)},Cr=e=>{e&&(e.style.display="none")},Vb=(e,t="block")=>{e&&new MutationObserver(()=>{Yu(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},cN=(e,t,n,r)=>{const s=e.querySelector(t);s&&s.style.setProperty(n,r)},Yu=(e,t,n="flex")=>{t?lr(e,n):Cr(e)},us=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),V9=()=>!us(sa())&&!us(Fc())&&!us(ld()),Gx=e=>e.scrollHeight>e.clientHeight,q9=(e,t)=>{let n=e;for(;n&&n!==t;){if(Gx(n))return!0;n=n.parentElement}return!1},i_=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},qb=(e,t=!1)=>{const n=Hp();n&&us(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},H9=()=>{const e=Hp();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},W9=()=>typeof window>"u"||typeof document>"u",K9=`
 <div aria-labelledby="${de.title}" aria-describedby="${de["html-container"]}" class="${de.popup}" tabindex="-1">
   <button type="button" class="${de.close}"></button>
   <ul class="${de["progress-steps"]}"></ul>
   <div class="${de.icon}"></div>
   <img class="${de.image}" />
   <h2 class="${de.title}" id="${de.title}"></h2>
   <div class="${de["html-container"]}" id="${de["html-container"]}"></div>
   <input class="${de.input}" id="${de.input}" />
   <input type="file" class="${de.file}" />
   <div class="${de.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${de.select}" id="${de.select}"></select>
   <div class="${de.radio}"></div>
   <label class="${de.checkbox}">
     <input type="checkbox" id="${de.checkbox}" />
     <span class="${de.label}"></span>
   </label>
   <textarea class="${de.textarea}" id="${de.textarea}"></textarea>
   <div class="${de["validation-message"]}" id="${de["validation-message"]}"></div>
   <div class="${de.actions}">
     <div class="${de.loader}"></div>
     <button type="button" class="${de.confirm}"></button>
     <button type="button" class="${de.deny}"></button>
     <button type="button" class="${de.cancel}"></button>
   </div>
   <div class="${de.footer}"></div>
   <div class="${de["timer-progress-bar-container"]}">
     <div class="${de["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),G9=()=>{const e=Fr();return e?(e.remove(),Ys([document.documentElement,document.body],[de["no-backdrop"],de["toast-shown"],de["has-column"]]),!0):!1},sc=()=>{st.currentInstance.resetValidationMessage()},Z9=()=>{const e=Mt(),t=ko(e,de.input),n=ko(e,de.file),r=e.querySelector(`.${de.range} input`),s=e.querySelector(`.${de.range} output`),a=ko(e,de.select),o=e.querySelector(`.${de.checkbox} input`),l=ko(e,de.textarea);t.oninput=sc,n.onchange=sc,a.onchange=sc,o.onchange=sc,l.oninput=sc,r.oninput=()=>{sc(),s.value=r.value},r.onchange=()=>{sc(),s.value=r.value}},J9=e=>typeof e=="string"?document.querySelector(e):e,Y9=e=>{const t=Mt();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Q9=e=>{window.getComputedStyle(e).direction==="rtl"&&Ft(Fr(),de.rtl)},X9=e=>{const t=G9();if(W9()){Lc("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=de.container,t&&Ft(n,de["no-transition"]),As(n,K9),n.dataset.swal2Theme=e.theme;const r=J9(e.target);r.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),Y9(e),Q9(r),Z9()},Hb=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?e$(e,t):e&&As(t,e)},e$=(e,t)=>{e.jquery?t$(t,e):As(t,e.toString())},t$=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},n$=(e,t)=>{const n=Ju(),r=dd();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Cr(n):lr(n),_s(n,t,"actions"),r$(n,r,t),As(r,t.loaderHtml||""),_s(r,t,"loader"))};function r$(e,t,n){const r=sa(),s=Fc(),a=ld();!r||!s||!a||(Oy(r,"confirm",n),Oy(s,"deny",n),Oy(a,"cancel",n),s$(r,s,a,n),n.reverseButtons&&(n.toast?(e.insertBefore(a,r),e.insertBefore(s,r)):(e.insertBefore(a,t),e.insertBefore(s,t),e.insertBefore(r,t))))}function s$(e,t,n,r){if(!r.buttonsStyling){Ys([e,t,n],de.styled);return}Ft([e,t,n],de.styled),r.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),Iy(e),Iy(t),Iy(n)}function Iy(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Oy(e,t,n){const r=Db(t);Yu(e,n[`show${r}Button`],"inline-block"),As(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=de[t],_s(e,n,`${t}Button`)}const i$=(e,t)=>{const n=zb();n&&(As(n,t.closeButtonHtml||""),_s(n,t,"closeButton"),Yu(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},a$=(e,t)=>{const n=Fr();n&&(o$(n,t.backdrop),c$(n,t.position),l$(n,t.grow),_s(n,t,"container"))};function o$(e,t){typeof t=="string"?e.style.background=t:t||Ft([document.documentElement,document.body],de["no-backdrop"])}function c$(e,t){t&&(t in de?Ft(e,de[t]):(Lr('The "position" parameter is not valid, defaulting to "center"'),Ft(e,de.center)))}function l$(e,t){t&&Ft(e,de[`grow-${t}`])}var Yt={innerParams:new WeakMap,domCache:new WeakMap};const d$=["input","file","range","select","radio","checkbox","textarea"],u$=(e,t)=>{const n=Mt();if(!n)return;const r=Yt.innerParams.get(e),s=!r||t.input!==r.input;d$.forEach(a=>{const o=ko(n,de[a]);o&&(m$(a,t.inputAttributes),o.className=de[a],s&&Cr(o))}),t.input&&(s&&h$(t),p$(t))},h$=e=>{if(!e.input)return;if(!Pn[e.input]){Lc(`Unexpected type of input! Expected ${Object.keys(Pn).join(" | ")}, got "${e.input}"`);return}const t=a_(e.input);if(!t)return;const n=Pn[e.input](t,e);lr(t),e.inputAutoFocus&&setTimeout(()=>{r_(n)})},f$=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},m$=(e,t)=>{const n=Mt();if(!n)return;const r=Kp(n,e);if(r){f$(r);for(const s in t)r.setAttribute(s,t[s])}},p$=e=>{if(!e.input)return;const t=a_(e.input);t&&_s(t,e,"input")},Wb=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Qu=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),s=de["input-label"];r.setAttribute("for",e.id),r.className=s,typeof n.customClass=="object"&&Ft(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},a_=e=>{const t=Mt();if(t)return ko(t,de[e]||de.input)},Om=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Lb(t)||Lr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Pn={};Pn.text=Pn.email=Pn.password=Pn.number=Pn.tel=Pn.url=Pn.search=Pn.date=Pn["datetime-local"]=Pn.time=Pn.week=Pn.month=(e,t)=>(Om(e,t.inputValue),Qu(e,e,t),Wb(e,t),e.type=t.input,e);Pn.file=(e,t)=>(Qu(e,e,t),Wb(e,t),e);Pn.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Om(n,t.inputValue),n.type=t.input,Om(r,t.inputValue),Qu(n,e,t),e};Pn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");As(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Qu(e,e,t),e};Pn.radio=e=>(e.textContent="",e);Pn.checkbox=(e,t)=>{const n=Kp(Mt(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return As(r,t.inputPlaceholder||t.inputLabel),n};Pn.textarea=(e,t)=>{Om(e,t.inputValue),Wb(e,t),Qu(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Mt()).width),s=()=>{if(!document.body.contains(e))return;const a=e.offsetWidth+n(e);a>r?Mt().style.width=`${a}px`:hc(Mt(),"width",t.width)};new MutationObserver(s).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const g$=(e,t)=>{const n=Fb();n&&(Vb(n),_s(n,t,"htmlContainer"),t.html?(Hb(t.html,n),lr(n,"block")):t.text?(n.textContent=t.text,lr(n,"block")):Cr(n),u$(e,t))},v$=(e,t)=>{const n=n_();n&&(Vb(n),Yu(n,t.footer,"block"),t.footer&&Hb(t.footer,n),_s(n,t,"footer"))},y$=(e,t)=>{const n=Yt.innerParams.get(e),r=cd();if(!r)return;if(n&&t.icon===n.icon){dN(r,t),lN(r,t);return}if(!t.icon&&!t.iconHtml){Cr(r);return}if(t.icon&&Object.keys(Im).indexOf(t.icon)===-1){Lc(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Cr(r);return}lr(r),dN(r,t),lN(r,t),Ft(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o_)},lN=(e,t)=>{for(const[n,r]of Object.entries(Im))t.icon!==n&&Ys(e,r);Ft(e,t.icon&&Im[t.icon]),w$(e,t),o_(),_s(e,t,"icon")},o_=()=>{const e=Mt();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},x$=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,b$=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,dN=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=uN(t.iconHtml):t.icon==="success"?(r=x$(t),n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=b$:t.icon&&(r=uN({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&As(e,r)},w$=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])cN(e,n,"background-color",t.iconColor);cN(e,".swal2-success-ring","border-color",t.iconColor)}},uN=e=>`<div class="${de["icon-content"]}">${e}</div>`,k$=(e,t)=>{const n=t_();if(n){if(!t.imageUrl){Cr(n);return}lr(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),hc(n,"width",t.imageWidth),hc(n,"height",t.imageHeight),n.className=de.image,_s(n,t,"image")}};let Kb=!1,c_=0,l_=0,d_=0,u_=0;const S$=e=>{e.addEventListener("mousedown",Dm),document.body.addEventListener("mousemove",Mm),e.addEventListener("mouseup",Lm),e.addEventListener("touchstart",Dm),document.body.addEventListener("touchmove",Mm),e.addEventListener("touchend",Lm)},C$=e=>{e.removeEventListener("mousedown",Dm),document.body.removeEventListener("mousemove",Mm),e.removeEventListener("mouseup",Lm),e.removeEventListener("touchstart",Dm),document.body.removeEventListener("touchmove",Mm),e.removeEventListener("touchend",Lm)},Dm=e=>{const t=Mt();if(e.target===t||cd().contains(e.target)){Kb=!0;const n=h_(e);c_=n.clientX,l_=n.clientY,d_=parseInt(t.style.insetInlineStart)||0,u_=parseInt(t.style.insetBlockStart)||0,Ft(t,"swal2-dragging")}},Mm=e=>{const t=Mt();if(Kb){let{clientX:n,clientY:r}=h_(e);t.style.insetInlineStart=`${d_+(n-c_)}px`,t.style.insetBlockStart=`${u_+(r-l_)}px`}},Lm=()=>{const e=Mt();Kb=!1,Ys(e,"swal2-dragging")},h_=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},N$=(e,t)=>{const n=Fr(),r=Mt();if(!(!n||!r)){if(t.toast){hc(n,"width",t.width),r.style.width="100%";const s=dd();s&&r.insertBefore(s,cd())}else hc(r,"width",t.width);hc(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),Cr(qp()),j$(r,t),t.draggable&&!t.toast?(Ft(r,de.draggable),S$(r)):(Ys(r,de.draggable),C$(r))}},j$=(e,t)=>{const n=t.showClass||{};e.className=`${de.popup} ${us(e)?n.popup:""}`,t.toast?(Ft([document.documentElement,document.body],de["toast-shown"]),Ft(e,de.toast)):Ft(e,de.modal),_s(e,t,"popup"),typeof t.customClass=="string"&&Ft(e,t.customClass),t.icon&&Ft(e,de[`icon-${t.icon}`])},E$=(e,t)=>{const n=Ub();if(!n)return;const{progressSteps:r,currentProgressStep:s}=t;if(!r||r.length===0||s===void 0){Cr(n);return}lr(n),n.textContent="",s>=r.length&&Lr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((a,o)=>{const l=T$(a);if(n.appendChild(l),o===s&&Ft(l,de["active-progress-step"]),o!==r.length-1){const u=P$(t);n.appendChild(u)}})},T$=e=>{const t=document.createElement("li");return Ft(t,de["progress-step"]),As(t,e),t},P$=e=>{const t=document.createElement("li");return Ft(t,de["progress-step-line"]),e.progressStepsDistance&&hc(t,"width",e.progressStepsDistance),t},_$=(e,t)=>{const n=e_();n&&(Vb(n),Yu(n,t.title||t.titleText,"block"),t.title&&Hb(t.title,n),t.titleText&&(n.innerText=t.titleText),_s(n,t,"title"))},f_=(e,t)=>{N$(e,t),a$(e,t),E$(e,t),y$(e,t),k$(e,t),_$(e,t),i$(e,t),g$(e,t),n$(e,t),v$(e,t);const n=Mt();typeof t.didRender=="function"&&n&&t.didRender(n),st.eventEmitter.emit("didRender",n)},R$=()=>us(Mt()),m_=()=>{var e;return(e=sa())===null||e===void 0?void 0:e.click()},A$=()=>{var e;return(e=Fc())===null||e===void 0?void 0:e.click()},I$=()=>{var e;return(e=ld())===null||e===void 0?void 0:e.click()},ud=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),p_=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},O$=(e,t,n)=>{p_(e),t.toast||(e.keydownHandler=r=>M$(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:Mt(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Zx=(e,t)=>{var n;const r=Bb();if(r.length){e=e+t,e===-2&&(e=r.length-1),e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=Mt())===null||n===void 0||n.focus()},g_=["ArrowRight","ArrowDown"],D$=["ArrowLeft","ArrowUp"],M$=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?L$(t,e):t.key==="Tab"?F$(t):[...g_,...D$].includes(t.key)?U$(t.key):t.key==="Escape"&&z$(t,e,n)))},L$=(e,t)=>{if(!Vp(t.allowEnterKey))return;const n=Kp(Mt(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;m_(),e.preventDefault()}},F$=e=>{const t=e.target,n=Bb();let r=-1;for(let s=0;s<n.length;s++)if(t===n[s]){r=s;break}e.shiftKey?Zx(r,-1):Zx(r,1),e.stopPropagation(),e.preventDefault()},U$=e=>{const t=Ju(),n=sa(),r=Fc(),s=ld();if(!t||!n||!r||!s)return;const a=[n,r,s];if(document.activeElement instanceof HTMLElement&&!a.includes(document.activeElement))return;const o=g_.includes(e)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let u=0;u<t.children.length;u++){if(l=l[o],!l)return;if(l instanceof HTMLButtonElement&&us(l))break}l instanceof HTMLButtonElement&&l.focus()}},z$=(e,t,n)=>{e.preventDefault(),Vp(t.allowEscapeKey)&&n(ud.esc)};var zl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const B$=()=>{const e=Fr();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},v_=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},y_=typeof window<"u"&&!!window.GestureEvent,$$=()=>{if(y_&&!Fa(document.body,de.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Ft(document.body,de.iosfix),V$()}},V$=()=>{const e=Fr();if(!e)return;let t;e.ontouchstart=n=>{t=q$(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},q$=e=>{const t=e.target,n=Fr(),r=Fb();return!n||!r||H$(e)||W$(e)?!1:t===n||!Gx(n)&&t instanceof HTMLElement&&!q9(t,r)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Gx(r)&&r.contains(t))},H$=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",W$=e=>e.touches&&e.touches.length>1,K$=()=>{if(Fa(document.body,de.iosfix)){const e=parseInt(document.body.style.top,10);Ys(document.body,de.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},G$=()=>{const e=document.createElement("div");e.className=de["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Cl=null;const Z$=e=>{Cl===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Cl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Cl+G$()}px`)},J$=()=>{Cl!==null&&(document.body.style.paddingRight=`${Cl}px`,Cl=null)};function x_(e,t,n,r){Wp()?hN(e,r):(O9(n).then(()=>hN(e,r)),p_(st)),y_?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),$b()&&(J$(),K$(),v_()),Y$()}function Y$(){Ys([document.documentElement,document.body],[de.shown,de["height-auto"],de["no-backdrop"],de["toast-shown"]])}function So(e){e=X$(e);const t=zl.swalPromiseResolve.get(this),n=Q$(this);this.isAwaitingPromise?e.isDismissed||(Xu(this),t(e)):n&&t(e)}const Q$=e=>{const t=Mt();if(!t)return!1;const n=Yt.innerParams.get(e);if(!n||Fa(t,n.hideClass.popup))return!1;Ys(t,n.showClass.popup),Ft(t,n.hideClass.popup);const r=Fr();return Ys(r,n.showClass.backdrop),Ft(r,n.hideClass.backdrop),eV(e,t,n),!0};function b_(e){const t=zl.swalPromiseReject.get(this);Xu(this),t&&t(e)}const Xu=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Yt.innerParams.get(e)||e._destroy())},X$=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),eV=(e,t,n)=>{var r;const s=Fr(),a=i_(t);typeof n.willClose=="function"&&n.willClose(t),(r=st.eventEmitter)===null||r===void 0||r.emit("willClose",t),a?tV(e,t,s,n.returnFocus,n.didClose):x_(e,s,n.returnFocus,n.didClose)},tV=(e,t,n,r,s)=>{st.swalCloseEventFinishedCallback=x_.bind(null,e,n,r,s);const a=function(o){if(o.target===t){var l;(l=st.swalCloseEventFinishedCallback)===null||l===void 0||l.call(st),delete st.swalCloseEventFinishedCallback,t.removeEventListener("animationend",a),t.removeEventListener("transitionend",a)}};t.addEventListener("animationend",a),t.addEventListener("transitionend",a)},hN=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=st.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},Bl=e=>{let t=Mt();if(t||new Xi,t=Mt(),!t)return;const n=dd();Wp()?Cr(cd()):nV(t,e),lr(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},nV=(e,t)=>{const n=Ju(),r=dd();!n||!r||(!t&&us(sa())&&(t=sa()),lr(n),t&&(Cr(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Ft([e,n],de.loading))},rV=(e,t)=>{t.input==="select"||t.input==="radio"?cV(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(Mb(t.inputValue)||Lb(t.inputValue))&&(Bl(sa()),lV(e,t))},sV=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return iV(n);case"radio":return aV(n);case"file":return oV(n);default:return t.inputAutoTrim?n.value.trim():n.value}},iV=e=>e.checked?1:0,aV=e=>e.checked?e.value:null,oV=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,cV=(e,t)=>{const n=Mt();if(!n)return;const r=s=>{t.input==="select"?dV(n,Fm(s),t):t.input==="radio"&&uV(n,Fm(s),t)};Mb(t.inputOptions)||Lb(t.inputOptions)?(Bl(sa()),Gu(t.inputOptions).then(s=>{e.hideLoading(),r(s)})):typeof t.inputOptions=="object"?r(t.inputOptions):Lc(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},lV=(e,t)=>{const n=e.getInput();n&&(Cr(n),Gu(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,lr(n),n.focus(),e.hideLoading()}).catch(r=>{Lc(`Error in inputValue promise: ${r}`),n.value="",lr(n),n.focus(),e.hideLoading()}))};function dV(e,t,n){const r=ko(e,de.select);if(!r)return;const s=(a,o,l)=>{const u=document.createElement("option");u.value=l,As(u,o),u.selected=w_(l,n.inputValue),a.appendChild(u)};t.forEach(a=>{const o=a[0],l=a[1];if(Array.isArray(l)){const u=document.createElement("optgroup");u.label=o,u.disabled=!1,r.appendChild(u),l.forEach(h=>s(u,h[1],h[0]))}else s(r,l,o)}),r.focus()}function uV(e,t,n){const r=ko(e,de.radio);if(!r)return;t.forEach(a=>{const o=a[0],l=a[1],u=document.createElement("input"),h=document.createElement("label");u.type="radio",u.name=de.radio,u.value=o,w_(o,n.inputValue)&&(u.checked=!0);const f=document.createElement("span");As(f,l),f.className=de.label,h.appendChild(u),h.appendChild(f),r.appendChild(h)});const s=r.querySelectorAll("input");s.length&&s[0].focus()}const Fm=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let s=n;typeof s=="object"&&(s=Fm(s)),t.push([r,s])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=Fm(r)),t.push([n,r])}),t},w_=(e,t)=>!!t&&t.toString()===e.toString(),hV=e=>{const t=Yt.innerParams.get(e);e.disableButtons(),t.input?k_(e,"confirm"):Zb(e,!0)},fV=e=>{const t=Yt.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?k_(e,"deny"):Gb(e,!1)},mV=(e,t)=>{e.disableButtons(),t(ud.cancel)},k_=(e,t)=>{const n=Yt.innerParams.get(e);if(!n.input){Lc(`The "input" parameter is needed to be set when using returnInputValueOn${Db(t)}`);return}const r=e.getInput(),s=sV(e,n);n.inputValidator?pV(e,s,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?Gb(e,s):Zb(e,s)},pV=(e,t,n)=>{const r=Yt.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Gu(r.inputValidator(t,r.validationMessage))).then(a=>{e.enableButtons(),e.enableInput(),a?e.showValidationMessage(a):n==="deny"?Gb(e,t):Zb(e,t)})},Gb=(e,t)=>{const n=Yt.innerParams.get(e||void 0);n.showLoaderOnDeny&&Bl(Fc()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Gu(n.preDeny(t,n.validationMessage))).then(s=>{s===!1?(e.hideLoading(),Xu(e)):e.close({isDenied:!0,value:typeof s>"u"?t:s})}).catch(s=>S_(e||void 0,s))):e.close({isDenied:!0,value:t})},fN=(e,t)=>{e.close({isConfirmed:!0,value:t})},S_=(e,t)=>{e.rejectPromise(t)},Zb=(e,t)=>{const n=Yt.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Bl(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Gu(n.preConfirm(t,n.validationMessage))).then(s=>{us(qp())||s===!1?(e.hideLoading(),Xu(e)):fN(e,typeof s>"u"?t:s)}).catch(s=>S_(e||void 0,s))):fN(e,t)};function Um(){const e=Yt.innerParams.get(this);if(!e)return;const t=Yt.domCache.get(this);Cr(t.loader),Wp()?e.icon&&lr(cd()):gV(t),Ys([t.popup,t.actions],de.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const gV=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?lr(t[0],"inline-block"):V9()&&Cr(e.actions)};function C_(){const e=Yt.innerParams.get(this),t=Yt.domCache.get(this);return t?Kp(t.popup,e.input):null}function N_(e,t,n){const r=Yt.domCache.get(e);t.forEach(s=>{r[s].disabled=n})}function j_(e,t){const n=Mt();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${de.radio}"]`);for(let s=0;s<r.length;s++)r[s].disabled=t}else e.disabled=t}function E_(){N_(this,["confirmButton","denyButton","cancelButton"],!1)}function T_(){N_(this,["confirmButton","denyButton","cancelButton"],!0)}function P_(){j_(this.getInput(),!1)}function __(){j_(this.getInput(),!0)}function R_(e){const t=Yt.domCache.get(this),n=Yt.innerParams.get(this);As(t.validationMessage,e),t.validationMessage.className=de["validation-message"],n.customClass&&n.customClass.validationMessage&&Ft(t.validationMessage,n.customClass.validationMessage),lr(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",de["validation-message"]),r_(r),Ft(r,de.inputerror))}function A_(){const e=Yt.domCache.get(this);e.validationMessage&&Cr(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ys(t,de.inputerror))}const Nl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},vV=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],yV={allowEnterKey:void 0},xV=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],I_=e=>Object.prototype.hasOwnProperty.call(Nl,e),O_=e=>vV.indexOf(e)!==-1,D_=e=>yV[e],bV=e=>{I_(e)||Lr(`Unknown parameter "${e}"`)},wV=e=>{xV.includes(e)&&Lr(`The parameter "${e}" is incompatible with toasts`)},kV=e=>{const t=D_(e);t&&XP(e,t)},M_=e=>{e.backdrop===!1&&e.allowOutsideClick&&Lr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Lr(`Invalid theme "${e.theme}"`);for(const t in e)bV(t),e.toast&&wV(t),kV(t)};function L_(e){const t=Fr(),n=Mt(),r=Yt.innerParams.get(this);if(!n||Fa(n,r.hideClass.popup)){Lr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const s=SV(e),a=Object.assign({},r,s);M_(a),t.dataset.swal2Theme=a.theme,f_(this,a),Yt.innerParams.set(this,a),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const SV=e=>{const t={};return Object.keys(e).forEach(n=>{O_(n)?t[n]=e[n]:Lr(`Invalid parameter to update: ${n}`)}),t};function F_(){const e=Yt.domCache.get(this),t=Yt.innerParams.get(this);if(!t){U_(this);return}e.popup&&st.swalCloseEventFinishedCallback&&(st.swalCloseEventFinishedCallback(),delete st.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),st.eventEmitter.emit("didDestroy"),CV(this)}const CV=e=>{U_(e),delete e.params,delete st.keydownHandler,delete st.keydownTarget,delete st.currentInstance},U_=e=>{e.isAwaitingPromise?(Dy(Yt,e),e.isAwaitingPromise=!0):(Dy(zl,e),Dy(Yt,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Dy=(e,t)=>{for(const n in e)e[n].delete(t)};var NV=Object.freeze({__proto__:null,_destroy:F_,close:So,closeModal:So,closePopup:So,closeToast:So,disableButtons:T_,disableInput:__,disableLoading:Um,enableButtons:E_,enableInput:P_,getInput:C_,handleAwaitingPromise:Xu,hideLoading:Um,rejectPromise:b_,resetValidationMessage:A_,showValidationMessage:R_,update:L_});const jV=(e,t,n)=>{e.toast?EV(e,t,n):(PV(t),_V(t),RV(e,t,n))},EV=(e,t,n)=>{t.popup.onclick=()=>{e&&(TV(e)||e.timer||e.input)||n(ud.close)}},TV=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let zm=!1;const PV=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(zm=!0)}}},_V=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(zm=!0)}}},RV=(e,t,n)=>{t.container.onclick=r=>{if(zm){zm=!1;return}r.target===t.container&&Vp(e.allowOutsideClick)&&n(ud.backdrop)}},AV=e=>typeof e=="object"&&e.jquery,mN=e=>e instanceof Element||AV(e),IV=e=>{const t={};return typeof e[0]=="object"&&!mN(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const s=e[r];typeof s=="string"||mN(s)?t[n]=s:s!==void 0&&Lc(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof s}`)}),t};function OV(...e){return new this(...e)}function DV(e){class t extends this{_main(r,s){return super._main(r,Object.assign({},e,s))}}return t}const MV=()=>st.timeout&&st.timeout.getTimerLeft(),z_=()=>{if(st.timeout)return H9(),st.timeout.stop()},B_=()=>{if(st.timeout){const e=st.timeout.start();return qb(e),e}},LV=()=>{const e=st.timeout;return e&&(e.running?z_():B_())},FV=e=>{if(st.timeout){const t=st.timeout.increase(e);return qb(t,!0),t}},UV=()=>!!(st.timeout&&st.timeout.isRunning());let pN=!1;const Jx={};function zV(e="data-swal-template"){Jx[e]=this,pN||(document.body.addEventListener("click",BV),pN=!0)}const BV=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in Jx){const r=t.getAttribute(n);if(r){Jx[n].fire({template:r});return}}};class $V{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){const r=(...s)=>{this.removeListener(t,r),n.apply(this,s)};this.on(t,r)}emit(t,...n){this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,n)}catch(s){console.error(s)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),s=r.indexOf(n);s>-1&&r.splice(s,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}st.eventEmitter=new $V;const VV=(e,t)=>{st.eventEmitter.on(e,t)},qV=(e,t)=>{st.eventEmitter.once(e,t)},HV=(e,t)=>{if(!e){st.eventEmitter.reset();return}t?st.eventEmitter.removeListener(e,t):st.eventEmitter.removeAllListeners(e)};var WV=Object.freeze({__proto__:null,argsToParams:IV,bindClickHandler:zV,clickCancel:I$,clickConfirm:m_,clickDeny:A$,enableLoading:Bl,fire:OV,getActions:Ju,getCancelButton:ld,getCloseButton:zb,getConfirmButton:sa,getContainer:Fr,getDenyButton:Fc,getFocusableElements:Bb,getFooter:n_,getHtmlContainer:Fb,getIcon:cd,getIconContent:F9,getImage:t_,getInputLabel:U9,getLoader:dd,getPopup:Mt,getProgressSteps:Ub,getTimerLeft:MV,getTimerProgressBar:Hp,getTitle:e_,getValidationMessage:qp,increaseTimer:FV,isDeprecatedParameter:D_,isLoading:B9,isTimerRunning:UV,isUpdatableParameter:O_,isValidParameter:I_,isVisible:R$,mixin:DV,off:HV,on:VV,once:qV,resumeTimer:B_,showLoading:Bl,stopTimer:z_,toggleTimer:LV});class KV{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const $_=["swal-title","swal-html","swal-footer"],GV=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return nq(n),Object.assign(ZV(n),JV(n),YV(n),QV(n),XV(n),eq(n),tq(n,$_))},ZV=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{Sc(r,["name","value"]);const s=r.getAttribute("name"),a=r.getAttribute("value");!s||!a||(typeof Nl[s]=="boolean"?t[s]=a!=="false":typeof Nl[s]=="object"?t[s]=JSON.parse(a):t[s]=a)}),t},JV=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const s=r.getAttribute("name"),a=r.getAttribute("value");!s||!a||(t[s]=new Function(`return ${a}`)())}),t},YV=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{Sc(r,["type","color","aria-label"]);const s=r.getAttribute("type");!s||!["confirm","cancel","deny"].includes(s)||(t[`${s}ButtonText`]=r.innerHTML,t[`show${Db(s)}Button`]=!0,r.hasAttribute("color")&&(t[`${s}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${s}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},QV=e=>{const t={},n=e.querySelector("swal-image");return n&&(Sc(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},XV=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Sc(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},eq=e=>{const t={},n=e.querySelector("swal-input");n&&(Sc(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(s=>{Sc(s,["value"]);const a=s.getAttribute("value");if(!a)return;const o=s.innerHTML;t.inputOptions[a]=o})),t},tq=(e,t)=>{const n={};for(const r in t){const s=t[r],a=e.querySelector(s);a&&(Sc(a,[]),n[s.replace(/^swal-/,"")]=a.innerHTML.trim())}return n},nq=e=>{const t=$_.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||Lr(`Unrecognized element <${r}>`)})},Sc=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&Lr([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},V_=10,rq=e=>{const t=Fr(),n=Mt();typeof e.willOpen=="function"&&e.willOpen(n),st.eventEmitter.emit("willOpen",n);const s=window.getComputedStyle(document.body).overflowY;aq(t,n,e),setTimeout(()=>{sq(t,n)},V_),$b()&&(iq(t,e.scrollbarPadding,s),B$()),!Wp()&&!st.previousActiveElement&&(st.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),st.eventEmitter.emit("didOpen",n),Ys(t,de["no-transition"])},Bm=e=>{const t=Mt();if(e.target!==t)return;const n=Fr();t.removeEventListener("animationend",Bm),t.removeEventListener("transitionend",Bm),n.style.overflowY="auto"},sq=(e,t)=>{i_(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Bm),t.addEventListener("transitionend",Bm)):e.style.overflowY="auto"},iq=(e,t,n)=>{$$(),t&&n!=="hidden"&&Z$(n),setTimeout(()=>{e.scrollTop=0})},aq=(e,t,n)=>{Ft(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),lr(t,"grid"),setTimeout(()=>{Ft(t,n.showClass.popup),t.style.removeProperty("opacity")},V_)):lr(t,"grid"),Ft([document.documentElement,document.body],de.shown),n.heightAuto&&n.backdrop&&!n.toast&&Ft([document.documentElement,document.body],de["height-auto"])};var gN={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function oq(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=gN.email),e.input==="url"&&(e.inputValidator=gN.url))}function cq(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Lr('Target parameter is not valid, defaulting to "body"'),e.target="body")}function lq(e){oq(e),e.showLoaderOnConfirm&&!e.preConfirm&&Lr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),cq(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),X9(e)}let Hi;var _f=new WeakMap;class On{constructor(...t){if(_9(this,_f,void 0),typeof window>"u")return;Hi=this;const n=Object.freeze(this.constructor.argsToParams(t));this.params=n,this.isAwaitingPromise=!1,R9(_f,this,this._main(Hi.params))}_main(t,n={}){if(M_(Object.assign({},n,t)),st.currentInstance){const a=zl.swalPromiseResolve.get(st.currentInstance),{isAwaitingPromise:o}=st.currentInstance;st.currentInstance._destroy(),o||a({isDismissed:!0}),$b()&&v_()}st.currentInstance=Hi;const r=uq(t,n);lq(r),Object.freeze(r),st.timeout&&(st.timeout.stop(),delete st.timeout),clearTimeout(st.restoreFocusTimeout);const s=hq(Hi);return f_(Hi,r),Yt.innerParams.set(Hi,r),dq(Hi,s,r)}then(t){return aN(_f,this).then(t)}finally(t){return aN(_f,this).finally(t)}}const dq=(e,t,n)=>new Promise((r,s)=>{const a=o=>{e.close({isDismissed:!0,dismiss:o})};zl.swalPromiseResolve.set(e,r),zl.swalPromiseReject.set(e,s),t.confirmButton.onclick=()=>{hV(e)},t.denyButton.onclick=()=>{fV(e)},t.cancelButton.onclick=()=>{mV(e,a)},t.closeButton.onclick=()=>{a(ud.close)},jV(n,t,a),O$(st,n,a),rV(e,n),rq(n),fq(st,n,a),mq(t,n),setTimeout(()=>{t.container.scrollTop=0})}),uq=(e,t)=>{const n=GV(e),r=Object.assign({},Nl,t,n,e);return r.showClass=Object.assign({},Nl.showClass,r.showClass),r.hideClass=Object.assign({},Nl.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},hq=e=>{const t={popup:Mt(),container:Fr(),actions:Ju(),confirmButton:sa(),denyButton:Fc(),cancelButton:ld(),loader:dd(),closeButton:zb(),validationMessage:qp(),progressSteps:Ub()};return Yt.domCache.set(e,t),t},fq=(e,t,n)=>{const r=Hp();Cr(r),t.timer&&(e.timeout=new KV(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(lr(r),_s(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&qb(t.timer)})))},mq=(e,t)=>{if(!t.toast){if(!Vp(t.allowEnterKey)){XP("allowEnterKey"),vq();return}pq(e)||gq(e,t)||Zx(-1,1)}},pq=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&us(n))return n.focus(),!0;return!1},gq=(e,t)=>t.focusDeny&&us(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&us(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&us(e.confirmButton)?(e.confirmButton.focus(),!0):!1,vq=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};On.prototype.disableButtons=T_;On.prototype.enableButtons=E_;On.prototype.getInput=C_;On.prototype.disableInput=__;On.prototype.enableInput=P_;On.prototype.hideLoading=Um;On.prototype.disableLoading=Um;On.prototype.showValidationMessage=R_;On.prototype.resetValidationMessage=A_;On.prototype.close=So;On.prototype.closePopup=So;On.prototype.closeModal=So;On.prototype.closeToast=So;On.prototype.rejectPromise=b_;On.prototype.update=L_;On.prototype._destroy=F_;Object.assign(On,WV);Object.keys(NV).forEach(e=>{On[e]=function(...t){return Hi&&Hi[e]?Hi[e](...t):null}});On.DismissReason=ud;On.version="11.23.0";const Xi=On;Xi.default=Xi;typeof document<"u"&&(function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const yq="/auth/login",xq="/auth/register",bq="/auth/forgot-password",wq="/auth/verify-email",kq="/auth/reset-password";async function Sq({email:e,password:t}){const n={Email:e,Password:t};try{const{data:r}=await Ue.post(yq,n);if(!r.access_token)throw new Error("No se recibi token de acceso");return PF(r.access_token),r.refresh_token&&localStorage.setItem("refresh_token",r.refresh_token),r.access_token}catch(r){const s=r?.response?.status;if(s===404)throw new Error("Endpoint no encontrado (404). Verifica que el backend exponga /auth/login.");if(s===401){const o=r?.response?.data?.message;throw o?.includes("no activada")||o?.includes("not activated")?new Error("Cuenta no activada. Por favor verifica tu correo electrnico."):new Error("Credenciales invlidas")}const a=r?.response?.data?.message??r?.response?.data?.error??r?.message??"No se pudo iniciar sesin";throw new Error(String(a))}}async function q_(e){try{const{data:t}=await Ue.post(xq,e);return t}catch(t){if(t?.response?.status===400){const s=t?.response?.data?.message;throw Array.isArray(s)?new Error(s.join(". ")):new Error(s||"Datos de registro invlidos")}const r=t?.response?.data?.message??t?.response?.data?.error??t?.message??"No se pudo registrar el usuario";throw new Error(String(r))}}async function Cq(e){return q_({FirstName:e.firstName,LastName1:e.lastName1,LastName2:e.lastName2,Email:e.email,Password:e.password,PasswordConfirm:e.password,Phone:e.phone,Role:"PATIENT"})}async function Nq(e){return q_({FirstName:e.firstName,LastName1:e.lastName1,LastName2:e.lastName2,Email:e.email,Password:e.password,PasswordConfirm:e.password,Phone:e.phone,Role:"DOCTOR"})}async function jq(e){try{await Ue.post(wq,{token:e})}catch(t){const n=t?.response?.status;if(n===404)throw new Error("Endpoint no encontrado (404). Verifica que el backend exponga /auth/verify-email.");if(n===400)throw new Error("Token de verificacin invlido o expirado");const r=t?.response?.data?.message??t?.response?.data?.error??t?.message??"No se pudo verificar el email";throw new Error(String(r))}}async function Eq(e){const t={Email:e};try{await Ue.post(bq,t)}catch(n){if(n?.response?.status===404){console.warn("[AUTH] Endpoint /auth/forgot-password no encontrado. Simulando xito.");return}console.warn("[AUTH] Error en forgot-password, pero simulando xito por seguridad:",n)}}async function Tq({token:e,newPassword:t}){try{await Ue.post(kq,{token:e,newPassword:t})}catch(n){const r=n?.response?.status;if(r===404)throw new Error("Endpoint no encontrado (404). Verifica que el backend exponga /auth/reset-password.");if(r===400)throw new Error("Token de recuperacin invlido o expirado");const s=n?.response?.data?.message??n?.response?.data?.error??n?.message??"No se pudo restablecer la contrasea";throw new Error(String(s))}}function Pq({onLogin:e}){const t=Rt(),[n,r]=g.useState("login"),[s,a]=g.useState("patient"),[o,l]=g.useState(""),[u,h]=g.useState(""),[f,p]=g.useState(!1),[y,x]=g.useState(""),[k,b]=g.useState(""),[S,N]=g.useState(""),[E,j]=g.useState(""),[P,T]=g.useState(""),[I,_]=g.useState(""),[A,O]=g.useState(!1),[M,q]=g.useState(!1),[z,G]=g.useState(!1),[oe,ke]=g.useState(!1),[J,ge]=g.useState(null),[U,ie]=g.useState(null),fe=ee=>{const ye=(ee.role||"").toString().toUpperCase();return ye==="ADMIN"?"admin":ye==="DOCTOR"?"doctor":"patient"},B=async()=>{ge(null),G(!0);try{await Sq({email:o.trim(),password:u});const ee=await Sm(),ye=fe(ee);if(!["patient","doctor","admin"].includes(ye)){ge("Tu cuenta no tiene un rol vlido para acceder.");return}const Te=ye==="doctor"?"doctor":ye==="admin"?"administrador":"paciente";await Xi.fire({icon:"success",title:`Bienvenido, ${Te}!`,text:`Inicio de sesin exitoso${ee.fullName?`, ${ee.fullName}`:""}.`,confirmButtonText:"Continuar",confirmButtonColor:"#0f766e",timer:3e3,timerProgressBar:!0}),e(ye)}catch(ee){const ye=ee?.response?.data?.message??ee?.message??"No se pudo iniciar sesin. Verifica tus credenciales.";ge(ye)}finally{G(!1)}},te=async()=>{if(ie(null),P!==I){ie("Las contraseas no coinciden.");return}ke(!0);try{s==="doctor"?await Nq({firstName:y.trim(),lastName1:k.trim(),lastName2:S?S.trim():void 0,email:E.trim(),password:P}):await Cq({firstName:y.trim(),lastName1:k.trim(),lastName2:S?S.trim():void 0,email:E.trim(),password:P}),await Xi.fire({icon:"success",title:"Cuenta creada exitosamente!",html:"Por favor, revisa tu correo electrnico para verificar tu cuenta antes de iniciar sesin.",confirmButtonText:"Entendido",confirmButtonColor:"#0f766e",allowOutsideClick:!1}),x(""),b(""),N(""),j(""),T(""),_(""),ie(null),r("login")}catch(ee){ie(ee?.response?.data?.message??ee?.message??"No se pudo crear la cuenta. Revisa los datos e intntalo de nuevo.")}finally{ke(!1)}};return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsx("div",{className:"w-full max-w-md space-y-6",children:i.jsxs(ue,{className:"bg-white shadow-lg",children:[i.jsxs($e,{className:"text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:i.jsx("div",{className:"text-white text-2xl font-bold",children:"SSF"})}),i.jsx(qe,{className:"text-2xl text-primary",children:"Salud Sin Fronteras"}),i.jsx("p",{className:"text-muted-foreground",children:"Mdicos y pacientes unidos, sin barreras."})]}),i.jsx(he,{children:i.jsxs(Dc,{value:n,onValueChange:ee=>r(ee),className:"space-y-4",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-2",children:[i.jsx(Sn,{value:"login",children:"Iniciar Sesin"}),i.jsx(Sn,{value:"register",children:"Registrarse"})]}),i.jsx(Cn,{value:"login",className:"space-y-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"loginEmail",children:"Correo Electrnico"}),i.jsx(Ye,{id:"loginEmail",type:"email",placeholder:"tu@email.com",value:o,onChange:ee=>l(ee.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(_e,{htmlFor:"loginPassword",children:"Contrasea"}),i.jsx($,{variant:"link",className:"text-xs text-primary p-0 h-auto",onClick:()=>t("/forgot-password"),children:"Olvidaste tu contrasea?"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"loginPassword",type:f?"text":"password",placeholder:"",value:u,onChange:ee=>h(ee.target.value),className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),J&&i.jsx("p",{className:"text-red-600 text-sm",children:J}),i.jsx($,{className:"w-full bg-primary hover:bg-primary/90",onClick:B,disabled:z||!o||!u,children:z?"Ingresando...":"Iniciar Sesin"}),i.jsx($,{variant:"outline",className:"w-full",onClick:()=>t("/"),children:"Cancelar"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase"})]})]})}),i.jsx(Cn,{value:"register",className:"space-y-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{children:"Tipo de Usuario"}),i.jsxs(es,{value:s,onValueChange:ee=>a(ee),children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona un tipo"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"patient",children:"Paciente"}),i.jsx(wt,{value:"doctor",children:"Mdico"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rFirstName",children:"Nombre"}),i.jsx(Ye,{id:"rFirstName",placeholder:"Juan",value:y,onChange:ee=>x(ee.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rLastName1",children:"Primer Apellido"}),i.jsx(Ye,{id:"rLastName1",placeholder:"Prez",value:k,onChange:ee=>b(ee.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rLastName2",children:"Segundo Apellido"}),i.jsx(Ye,{id:"rLastName2",placeholder:"Rodrguez",value:S,onChange:ee=>N(ee.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rEmail",children:"Correo Electrnico"}),i.jsx(Ye,{id:"rEmail",type:"email",placeholder:"tu@email.com",value:E,onChange:ee=>j(ee.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rPassword",children:"Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"rPassword",type:A?"text":"password",placeholder:"",value:P,onChange:ee=>T(ee.target.value),className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>O(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:A?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rPassword2",children:"Confirmar Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"rPassword2",type:M?"text":"password",placeholder:"",value:I,onChange:ee=>_(ee.target.value),className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>q(!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:M?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]})]}),U&&i.jsx("p",{className:"text-red-600 text-sm",children:U}),i.jsx($,{className:"w-full bg-primary hover:bg-primary/90",onClick:te,disabled:oe||!E||!P||!I||!y||!k,children:oe?"Creando cuenta...":"Crear Cuenta"}),i.jsx($,{variant:"outline",className:"w-full",onClick:()=>t("/"),children:"Cancelar"})]})})]})})]})})})}function _q(){const e=Rt(),[t,n]=g.useState(""),[r,s]=g.useState(!1),[a,o]=g.useState(""),l=h=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h),u=async h=>{if(h.preventDefault(),o(""),!t.trim()){o("Por favor ingresa tu correo electrnico");return}if(!l(t)){o("Por favor ingresa un correo electrnico vlido");return}s(!0);try{await Eq(t),await Xi.fire({icon:"success",title:"Correo enviado!",html:`
          <p>Se ha enviado un enlace de recuperacin a:</p>
          <p class="font-semibold text-primary mt-2">${t}</p>
          <p class="text-sm text-muted-foreground mt-2">
            Por favor revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contrasea.
          </p>
        `,confirmButtonText:"Ir al Login",confirmButtonColor:"#0f766e"}),e("/login")}catch(f){s(!1);const p=f?.response?.data?.message||f?.response?.data?.error||"No se pudo enviar el correo de recuperacin. Intenta de nuevo.";await Xi.fire({icon:"error",title:"Error",text:p,confirmButtonColor:"#dc2626"})}finally{s(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-teal-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs($,{variant:"ghost",onClick:()=>e("/login"),className:"mb-4",children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Volver al Login"]}),i.jsxs(ue,{className:"shadow-xl border-2 border-teal-100",children:[i.jsxs($e,{className:"text-center space-y-2",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mb-2",children:i.jsx(Ll,{className:"h-8 w-8 text-teal-600"})}),i.jsx(qe,{className:"text-2xl font-bold text-teal-900",children:"Olvidaste tu contrasea?"}),i.jsx(Yi,{className:"text-base",children:"No te preocupes. Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."})]}),i.jsx(he,{children:i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"email",className:"text-sm font-medium",children:"Correo Electrnico"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ll,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx(Ye,{id:"email",type:"email",placeholder:"tu@email.com",value:t,onChange:h=>{n(h.target.value),o("")},className:`pl-10 ${a?"border-red-500 focus:border-red-500":""}`,disabled:r,autoFocus:!0})]}),a&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{className:"inline-block w-1 h-1 bg-red-600 rounded-full"}),a]})]}),i.jsx($,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700",disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Enviar enlace de recuperacin"]})}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("p",{className:"text-xs text-center text-gray-600",children:["El enlace de recuperacin expirar en 24 horas.",i.jsx("br",{}),"Si no recibes el correo, revisa tu carpeta de spam."]})})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Necesitas ayuda?"," ",i.jsx("button",{onClick:()=>{Xi.fire({icon:"info",title:"Contacta con Soporte",html:`
                    <p>Si tienes problemas para recuperar tu cuenta, contctanos:</p>
                    <p class="font-semibold mt-2">soporte@saludSinFronteras.com</p>
                    <p class="text-sm text-muted-foreground mt-2">Horario: Lun-Vie 9:00 AM - 6:00 PM</p>
                  `,confirmButtonColor:"#0f766e"})},className:"text-teal-600 hover:text-teal-700 font-medium hover:underline",children:"Contacta con soporte"})]})})]})})}function Rq(){const[e]=m2(),t=Rt(),[n,r]=g.useState("loading"),[s,a]=g.useState(""),o=e.get("token");g.useEffect(()=>{if(!o){r("error"),a("Token de verificacin no encontrado en la URL");return}(async()=>{try{await jq(o),r("success"),a("Tu cuenta ha sido verificada exitosamente. Ya puedes iniciar sesin.")}catch(f){r("error"),a(f?.message||"No se pudo verificar la cuenta. El token puede haber expirado o ser invlido.")}})()},[o]);const l=()=>{t("/login")},u=()=>{t("/")};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs(ue,{className:"w-full max-w-md",children:[i.jsxs($e,{className:"text-center",children:[i.jsxs("div",{className:"flex justify-center mb-4",children:[n==="loading"&&i.jsx(rn,{className:"h-16 w-16 text-blue-500 animate-spin"}),n==="success"&&i.jsx(Ks,{className:"h-16 w-16 text-green-500"}),n==="error"&&i.jsx(js,{className:"h-16 w-16 text-red-500"})]}),i.jsxs(qe,{className:"text-2xl",children:[n==="loading"&&"Verificando tu cuenta",n==="success"&&"Cuenta verificada",n==="error"&&"Error de verificacin"]}),i.jsxs(Yi,{className:"mt-2",children:[n==="loading"&&"Por favor espera mientras verificamos tu cuenta...",n==="success"&&s,n==="error"&&s]})]}),i.jsxs(he,{className:"flex flex-col gap-3",children:[n==="success"&&i.jsx($,{onClick:l,className:"w-full",children:"Ir al inicio de sesin"}),n==="error"&&i.jsxs(i.Fragment,{children:[i.jsx($,{onClick:l,className:"w-full",children:"Ir al inicio de sesin"}),i.jsx($,{onClick:u,variant:"outline",className:"w-full",children:"Volver al inicio"})]})]})]})})}const Aq=fb("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ia({className:e,variant:t,...n}){return i.jsx("div",{"data-slot":"alert",role:"alert",className:St(Aq({variant:t}),e),...n})}function aa({className:e,...t}){return i.jsx("div",{"data-slot":"alert-description",className:St("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Iq(){const[e]=m2(),t=Rt(),n=e.get("token"),[r,s]=g.useState(""),[a,o]=g.useState(""),[l,u]=g.useState(!1),[h,f]=g.useState(!1),[p,y]=g.useState(!1),[x,k]=g.useState(""),[b,S]=g.useState(!1),N=async E=>{if(E.preventDefault(),k(""),!n){k("Token de recuperacin no encontrado en la URL");return}if(r.length<8){k("La contrasea debe tener al menos 8 caracteres");return}if(r!==a){k("Las contraseas no coinciden");return}y(!0);try{await Tq({token:n,newPassword:r}),S(!0),setTimeout(()=>{t("/login")},2e3)}catch(j){k(j?.message||"No se pudo restablecer la contrasea")}finally{y(!1)}};return n?b?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsx(ue,{className:"w-full max-w-md",children:i.jsxs($e,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(Ks,{className:"h-16 w-16 text-green-500"})}),i.jsx(qe,{className:"text-2xl",children:"Contrasea actualizada"}),i.jsx(Yi,{className:"mt-2",children:"Tu contrasea ha sido actualizada exitosamente. Sers redirigido al inicio de sesin..."})]})})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs(ue,{className:"w-full max-w-md",children:[i.jsxs($e,{className:"text-center",children:[i.jsx(qe,{className:"text-2xl",children:"Restablecer contrasea"}),i.jsx(Yi,{className:"mt-2",children:"Ingresa tu nueva contrasea"})]}),i.jsx(he,{children:i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[x&&i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsx(aa,{children:x})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"newPassword",children:"Nueva contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"newPassword",type:l?"text":"password",placeholder:"Mnimo 8 caracteres",value:r,onChange:E=>s(E.target.value),required:!0,minLength:8,disabled:p,className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:p,children:l?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"confirmPassword",children:"Confirmar contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"confirmPassword",type:h?"text":"password",placeholder:"Confirma tu nueva contrasea",value:a,onChange:E=>o(E.target.value),required:!0,minLength:8,disabled:p,className:"pr-10"}),i.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:p,children:h?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsx($,{type:"submit",className:"w-full",disabled:p,children:p?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Restableciendo..."]}):"Restablecer contrasea"}),i.jsx($,{type:"button",variant:"outline",className:"w-full",onClick:()=>t("/login"),disabled:p,children:"Volver al inicio de sesin"})]})})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs(ue,{className:"w-full max-w-md",children:[i.jsxs($e,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx($a,{className:"h-16 w-16 text-red-500"})}),i.jsx(qe,{className:"text-2xl",children:"Token no encontrado"}),i.jsx(Yi,{className:"mt-2",children:"No se encontr el token de recuperacin en la URL. Por favor verifica el enlace que recibiste por correo."})]}),i.jsx(he,{children:i.jsx($,{onClick:()=>t("/login"),className:"w-full",children:"Volver al inicio de sesin"})})]})})}const Oq=fb("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Oe({className:e,variant:t,asChild:n=!1,...r}){const s=n?tT:"span";return i.jsx(s,{"data-slot":"badge",className:St(Oq({variant:t}),e),...r})}const vN=e=>{const t=e.replace("Z","");return new Date(t)};async function Dq(){const e=await Ue.get("/appointments/all",{params:{limit:100,order:"asc"}}),t=Array.isArray(e.data?.data)?e.data.data:Array.isArray(e.data)?e.data:[],n=new Date,s=t.filter(f=>{if(f.status==="CANCELLED")return!1;const p=vN(f.scheduledAt),y=f.durationMin||30;return new Date(p.getTime()+y*6e4)>n}).slice(0,10).map(f=>{const p=vN(f.scheduledAt),y=p.getFullYear(),x=String(p.getMonth()+1).padStart(2,"0"),k=String(p.getDate()).padStart(2,"0"),b=p.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0});return{id:Number(f.id),doctor:f.doctor?.name||"Mdico",specialty:f.doctor?.specialty||"General",date:`${y}-${x}-${k}`,time:b,type:String(f.modality).toLowerCase()==="online"?"videollamada":"presencial",status:f.status||"PENDING"}}),o=(await Ue.get("/conversations/mine")).data,u=(Array.isArray(o?.items)?o.items:Array.isArray(o)?o:[]).slice(0,5).map(f=>({id:Number(f.Id??f.id),from:f.FromName??f.fromName??"Contacto",preview:f.Preview??f.preview??f.Text??f.text??"",at:f.CreatedAt??f.createdAt}));return{upcomingAppointments:s,recommendedDoctors:[],recentMessages:u}}function Mq(e){return Jt({queryKey:["patient_dashboard"],queryFn:Dq,refetchOnWindowFocus:!1})}var Gp="Popover",[H_,wle]=Ri(Gp,[Ip]),eh=Ip(),[Lq,Bo]=H_(Gp),W_=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,l=eh(t),u=g.useRef(null),[h,f]=g.useState(!1),[p,y]=bc({prop:r,defaultProp:s??!1,onChange:a,caller:Gp});return i.jsx($T,{...l,children:i.jsx(Lq,{scope:t,contentId:La(),triggerRef:u,open:p,onOpenChange:y,onOpenToggle:g.useCallback(()=>y(x=>!x),[y]),hasCustomAnchor:h,onCustomAnchorAdd:g.useCallback(()=>f(!0),[]),onCustomAnchorRemove:g.useCallback(()=>f(!1),[]),modal:o,children:n})})};W_.displayName=Gp;var K_="PopoverAnchor",Fq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Bo(K_,n),a=eh(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return g.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Cb,{...a,...r,ref:t})});Fq.displayName=K_;var G_="PopoverTrigger",Z_=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Bo(G_,n),a=eh(n),o=Ot(t,s.triggerRef),l=i.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":eR(s.open),...r,ref:o,onClick:at(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Cb,{asChild:!0,...a,children:l})});Z_.displayName=G_;var Jb="PopoverPortal",[Uq,zq]=H_(Jb,{forceMount:void 0}),J_=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Bo(Jb,t);return i.jsx(Uq,{scope:t,forceMount:n,children:i.jsx(Qs,{present:n||a.open,children:i.jsx(Op,{asChild:!0,container:s,children:r})})})};J_.displayName=Jb;var $l="PopoverContent",Y_=g.forwardRef((e,t)=>{const n=zq($l,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Bo($l,e.__scopePopover);return i.jsx(Qs,{present:r||a.open,children:a.modal?i.jsx($q,{...s,ref:t}):i.jsx(Vq,{...s,ref:t})})});Y_.displayName=$l;var Bq=yc("PopoverContent.RemoveScroll"),$q=g.forwardRef((e,t)=>{const n=Bo($l,e.__scopePopover),r=g.useRef(null),s=Ot(t,r),a=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return Nb(o)},[]),i.jsx(Mp,{as:Bq,allowPinchZoom:!0,children:i.jsx(Q_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(e.onCloseAutoFocus,o=>{o.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:at(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,h=l.button===2||u;a.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:at(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vq=g.forwardRef((e,t)=>{const n=Bo($l,e.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return i.jsx(Q_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Q_=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,...p}=e,y=Bo($l,n),x=eh(n);return pb(),i.jsx(Tp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Ep,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>y.onOpenChange(!1),children:i.jsx(VT,{"data-state":eR(y.open),role:"dialog",id:y.contentId,...x,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),X_="PopoverClose",qq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Bo(X_,n);return i.jsx(ot.button,{type:"button",...r,ref:t,onClick:at(e.onClick,()=>s.onOpenChange(!1))})});qq.displayName=X_;var Hq="PopoverArrow",Wq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=eh(n);return i.jsx(qT,{...s,...r,ref:t})});Wq.displayName=Hq;function eR(e){return e?"open":"closed"}var Kq=W_,Gq=Z_,Zq=J_,Jq=Y_;function Yq({...e}){return i.jsx(Kq,{"data-slot":"popover",...e})}function Qq({...e}){return i.jsx(Gq,{"data-slot":"popover-trigger",...e})}function Xq({className:e,align:t="center",sideOffset:n=4,...r}){return i.jsx(Zq,{children:i.jsx(Jq,{"data-slot":"popover-content",align:t,sideOffset:n,className:St("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function eH(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var Yb="ScrollArea",[tR,kle]=Ri(Yb),[tH,Xs]=tR(Yb),nR=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,u]=g.useState(null),[h,f]=g.useState(null),[p,y]=g.useState(null),[x,k]=g.useState(null),[b,S]=g.useState(null),[N,E]=g.useState(0),[j,P]=g.useState(0),[T,I]=g.useState(!1),[_,A]=g.useState(!1),O=Ot(t,q=>u(q)),M=qu(s);return i.jsx(tH,{scope:n,type:r,dir:M,scrollHideDelay:a,scrollArea:l,viewport:h,onViewportChange:f,content:p,onContentChange:y,scrollbarX:x,onScrollbarXChange:k,scrollbarXEnabled:T,onScrollbarXEnabledChange:I,scrollbarY:b,onScrollbarYChange:S,scrollbarYEnabled:_,onScrollbarYEnabledChange:A,onCornerWidthChange:E,onCornerHeightChange:P,children:i.jsx(ot.div,{dir:M,...o,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});nR.displayName=Yb;var rR="ScrollAreaViewport",sR=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,o=Xs(rR,n),l=g.useRef(null),u=Ot(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(ot.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});sR.displayName=rR;var ha="ScrollAreaScrollbar",iR=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Xs(ha,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return g.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(nH,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(rH,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(aR,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(Qb,{...r,ref:t}):null});iR.displayName=ha;var nH=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Xs(ha,e.__scopeScrollArea),[a,o]=g.useState(!1);return g.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const h=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Qs,{present:n||a,children:i.jsx(aR,{"data-state":a?"visible":"hidden",...r,ref:t})})}),rH=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Xs(ha,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Jp(()=>u("SCROLL_END"),100),[l,u]=eH("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,u]),g.useEffect(()=>{const h=s.viewport,f=a?"scrollLeft":"scrollTop";if(h){let p=h[f];const y=()=>{const x=h[f];p!==x&&(u("SCROLL"),o()),p=x};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[s.viewport,a,u,o]),i.jsx(Qs,{present:n||l!=="hidden",children:i.jsx(Qb,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:at(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:at(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),aR=g.forwardRef((e,t)=>{const n=Xs(ha,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,o]=g.useState(!1),l=e.orientation==="horizontal",u=Jp(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?h:f)}},10);return Vl(n.viewport,u),Vl(n.content,u),i.jsx(Qs,{present:r||a,children:i.jsx(Qb,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Qb=g.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Xs(ha,e.__scopeScrollArea),a=g.useRef(null),o=g.useRef(0),[l,u]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=uR(l.viewport,l.content),f={...r,sizes:l,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:y=>a.current=y,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:y=>o.current=y};function p(y,x){return lH(y,o.current,l,x)}return n==="horizontal"?i.jsx(sH,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const y=s.viewport.scrollLeft,x=yN(y,l,s.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:y=>{s.viewport&&(s.viewport.scrollLeft=y)},onDragScroll:y=>{s.viewport&&(s.viewport.scrollLeft=p(y,s.dir))}}):n==="vertical"?i.jsx(iH,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const y=s.viewport.scrollTop,x=yN(y,l);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:y=>{s.viewport&&(s.viewport.scrollTop=y)},onDragScroll:y=>{s.viewport&&(s.viewport.scrollTop=p(y))}}):null}),sH=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Xs(ha,e.__scopeScrollArea),[o,l]=g.useState(),u=g.useRef(null),h=Ot(t,u,a.onScrollbarXChange);return g.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(cR,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(a.viewport){const y=a.viewport.scrollLeft+f.deltaX;e.onWheelScroll(y),fR(y,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Vm(o.paddingLeft),paddingEnd:Vm(o.paddingRight)}})}})}),iH=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Xs(ha,e.__scopeScrollArea),[o,l]=g.useState(),u=g.useRef(null),h=Ot(t,u,a.onScrollbarYChange);return g.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx(cR,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(a.viewport){const y=a.viewport.scrollTop+f.deltaY;e.onWheelScroll(y),fR(y,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Vm(o.paddingTop),paddingEnd:Vm(o.paddingBottom)}})}})}),[aH,oR]=tR(ha),cR=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:f,onResize:p,...y}=e,x=Xs(ha,n),[k,b]=g.useState(null),S=Ot(t,O=>b(O)),N=g.useRef(null),E=g.useRef(""),j=x.viewport,P=r.content-r.viewport,T=kr(f),I=kr(u),_=Jp(p,10);function A(O){if(N.current){const M=O.clientX-N.current.left,q=O.clientY-N.current.top;h({x:M,y:q})}}return g.useEffect(()=>{const O=M=>{const q=M.target;k?.contains(q)&&T(M,P)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[j,k,P,T]),g.useEffect(I,[r,I]),Vl(k,_),Vl(x.content,_),i.jsx(aH,{scope:n,scrollbar:k,hasThumb:s,onThumbChange:kr(a),onThumbPointerUp:kr(o),onThumbPositionChange:I,onThumbPointerDown:kr(l),children:i.jsx(ot.div,{...y,ref:S,style:{position:"absolute",...y.style},onPointerDown:at(e.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),N.current=k.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),A(O))}),onPointerMove:at(e.onPointerMove,A),onPointerUp:at(e.onPointerUp,O=>{const M=O.target;M.hasPointerCapture(O.pointerId)&&M.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=E.current,x.viewport&&(x.viewport.style.scrollBehavior=""),N.current=null})})})}),$m="ScrollAreaThumb",lR=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=oR($m,e.__scopeScrollArea);return i.jsx(Qs,{present:n||s.hasThumb,children:i.jsx(oH,{ref:t,...r})})}),oH=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Xs($m,n),o=oR($m,n),{onThumbPositionChange:l}=o,u=Ot(t,p=>o.onThumbChange(p)),h=g.useRef(void 0),f=Jp(()=>{h.current&&(h.current(),h.current=void 0)},100);return g.useEffect(()=>{const p=a.viewport;if(p){const y=()=>{if(f(),!h.current){const x=dH(p,l);h.current=x,l()}};return l(),p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[a.viewport,f,l]),i.jsx(ot.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:at(e.onPointerDownCapture,p=>{const x=p.target.getBoundingClientRect(),k=p.clientX-x.left,b=p.clientY-x.top;o.onThumbPointerDown({x:k,y:b})}),onPointerUp:at(e.onPointerUp,o.onThumbPointerUp)})});lR.displayName=$m;var Xb="ScrollAreaCorner",dR=g.forwardRef((e,t)=>{const n=Xs(Xb,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(cH,{...e,ref:t}):null});dR.displayName=Xb;var cH=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Xs(Xb,n),[a,o]=g.useState(0),[l,u]=g.useState(0),h=!!(a&&l);return Vl(s.scrollbarX,()=>{const f=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(f),u(f)}),Vl(s.scrollbarY,()=>{const f=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(f),o(f)}),h?i.jsx(ot.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Vm(e){return e?parseInt(e,10):0}function uR(e,t){const n=e/t;return isNaN(n)?0:n}function Zp(e){const t=uR(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function lH(e,t,n,r="ltr"){const s=Zp(n),a=s/2,o=t||a,l=s-o,u=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return hR([u,h],p)(e)}function yN(e,t,n="ltr"){const r=Zp(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-r,u=n==="ltr"?[0,o]:[o*-1,0],h=Ix(e,u);return hR([0,o],[0,l])(h)}function hR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function fR(e,t){return e>0&&e<t}var dH=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Jp(e,t){const n=kr(e),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Vl(e,t){const n=kr(t);qn(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var uH=nR,hH=sR,fH=dR;function mH({className:e,children:t,...n}){return i.jsxs(uH,{"data-slot":"scroll-area",className:St("relative",e),...n,children:[i.jsx(hH,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),i.jsx(pH,{}),i.jsx(fH,{})]})}function pH({className:e,orientation:t="vertical",...n}){return i.jsx(iR,{"data-slot":"scroll-area-scrollbar",orientation:t,className:St("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:i.jsx(lR,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var gH="Separator",xN="horizontal",vH=["horizontal","vertical"],mR=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=xN,...s}=e,a=yH(r)?r:xN,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(ot.div,{"data-orientation":a,...l,...s,ref:t})});mR.displayName=gH;function yH(e){return vH.includes(e)}var xH=mR;function pR({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return i.jsx(xH,{"data-slot":"separator-root",decorative:n,orientation:t,className:St("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function gR(){const e=Rt(),[t,n]=g.useState([]),[r,s]=g.useState(!1),[a,o]=g.useState(!1),l=[];g.useEffect(()=>{if(l.length===0)return;const N=l[l.length-1],E={id:N.MessageId||`notification-${Date.now()}`,type:"message",title:"Nuevo Mensaje",message:N.Content||"Tienes un nuevo mensaje",timestamp:N.CreatedAt||new Date().toISOString(),read:!1,actionUrl:N.ConversationId?`/chat/${N.ConversationId}`:void 0};n(j=>[E,...j]),ut.info(E.title,{description:E.message.substring(0,50)+"...",action:E.actionUrl?{label:"Ver",onClick:()=>e(E.actionUrl)}:void 0}),u()},[l,e]);const u=()=>{try{const N=new(window.AudioContext||window.webkitAudioContext),E=N.createOscillator(),j=N.createGain();E.connect(j),j.connect(N.destination),E.frequency.value=800,E.type="sine",j.gain.setValueAtTime(.1,N.currentTime),j.gain.exponentialRampToValueAtTime(.01,N.currentTime+.1),E.start(N.currentTime),E.stop(N.currentTime+.1)}catch(N){console.log("Could not play notification sound:",N)}},h=t.filter(N=>!N.read).length,f=N=>{n(E=>E.map(j=>j.id===N?{...j,read:!0}:j))},p=()=>{n(N=>N.map(E=>({...E,read:!0})))},y=N=>{n(E=>E.filter(j=>j.id!==N))},x=()=>{n([])},k=N=>{f(N.id),N.actionUrl&&(e(N.actionUrl),s(!1))},b=N=>{switch(N){case"message":return i.jsx(Oc,{className:"h-4 w-4"});case"appointment":return i.jsx(Bt,{className:"h-4 w-4"});case"medical_record":return i.jsx(nn,{className:"h-4 w-4"});case"verification":return i.jsx(Ks,{className:"h-4 w-4"});default:return i.jsx(_y,{className:"h-4 w-4"})}},S=N=>{const E=new Date(N),P=new Date().getTime()-E.getTime(),T=Math.floor(P/6e4);return T<1?"Ahora":T<60?`Hace ${T} min`:T<1440?`Hace ${Math.floor(T/60)} h`:E.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})};return i.jsxs(Yq,{open:r,onOpenChange:s,children:[i.jsx(Qq,{asChild:!0,children:i.jsxs($,{variant:"ghost",size:"icon",className:"relative",children:[i.jsx(_y,{className:"h-5 w-5"}),h>0&&i.jsx(Oe,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:h>9?"9+":h}),a&&i.jsx("span",{className:"absolute bottom-1 right-1 h-2 w-2 bg-green-500 rounded-full"})]})}),i.jsxs(Xq,{className:"w-96 p-0",align:"end",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Notificaciones"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:a?"Conectado en tiempo real":"Desconectado"})]}),t.length>0&&i.jsxs("div",{className:"flex gap-2",children:[h>0&&i.jsx($,{variant:"ghost",size:"sm",onClick:p,className:"text-xs",children:"Marcar todo"}),i.jsx($,{variant:"ghost",size:"sm",onClick:x,className:"text-xs",children:"Limpiar"})]})]}),i.jsx(mH,{className:"h-[400px]",children:t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-muted-foreground",children:[i.jsx(_y,{className:"h-12 w-12 mb-4 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay notificaciones"}),i.jsx("p",{className:"text-xs mt-1",children:"Te notificaremos sobre mensajes y eventos"})]}):i.jsx("div",{className:"divide-y",children:t.map(N=>i.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors cursor-pointer ${N.read?"":"bg-muted/30"}`,onClick:()=>k(N),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`mt-1 ${N.read?"text-muted-foreground":"text-primary"}`,children:b(N.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[i.jsx("p",{className:`text-sm font-medium ${N.read?"text-muted-foreground":""}`,children:N.title}),!N.read&&i.jsx("span",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 mt-1"})]}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:N.message}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:S(N.timestamp)})]}),i.jsx($,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:E=>{E.stopPropagation(),y(N.id)},children:i.jsx(as,{className:"h-3 w-3"})})]})},N.id))})}),t.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(pR,{}),i.jsx("div",{className:"p-3 text-center",children:i.jsx($,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>{s(!1)},children:"Ver todas las notificaciones"})})]})]})]})}function bH({patientId:e,patientName:t="Andrey"}){const n=Rt(),{data:r,isLoading:s,error:a,refetch:o,isFetching:l}=Mq(),u=r?.upcomingAppointments??[];return s&&!r?i.jsx("div",{className:"min-h-screen grid place-items-center p-6 bg-background",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando panel"})}):a?i.jsx("div",{className:"min-h-screen grid place-items-center p-6 bg-background",children:i.jsxs("div",{className:"space-y-3 text-center",children:[i.jsx("p",{className:"text-red-600 font-medium",children:"Ocurri un error al cargar tu panel."}),i.jsx($,{onClick:()=>o(),disabled:l,children:"Reintentar"})]})}):i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Bienvenido, ",t]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestiona tus citas y consultas mdicas"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(gR,{}),i.jsx($,{variant:"outline",onClick:()=>n("/settings"),children:"Configuracin"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ue,{className:"border-2 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>n("/nueva-cita"),children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:i.jsx(Do,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg mb-1 text-foreground",children:"Nueva cita"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Agenda una consulta con un mdico"}),i.jsx($,{className:"w-full bg-primary hover:bg-primary/90",onClick:h=>{h.stopPropagation(),n("/nueva-cita")},children:"Buscar mdicos"})]})]})})}),i.jsx(ue,{className:"border-2 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>n("/mensajes"),children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:i.jsx(Oc,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg mb-1 text-foreground",children:"Mensajes"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Consulta con tus mdicos"}),i.jsx($,{variant:"outline",className:"w-full",onClick:h=>{h.stopPropagation(),n("/mensajes")},children:"Ver mensajes"})]})]})})}),i.jsx(ue,{className:"border-2 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>n("/mis-citas"),children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:i.jsx(Bt,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg mb-1 text-foreground",children:"Mis citas"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Revisa tus prximas consultas"}),i.jsx($,{variant:"outline",className:"w-full",onClick:h=>{h.stopPropagation(),n("/mis-citas")},children:"Ver citas"})]})]})})})]}),i.jsxs(ue,{children:[i.jsxs($e,{children:[i.jsx(qe,{className:"text-xl text-foreground",children:"Prximas citas"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tus consultas programadas"})]}),i.jsx(he,{className:"space-y-4",children:u.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"No tienes ms citas programadas"}),i.jsx($,{className:"bg-primary hover:bg-primary/90",onClick:()=>n("/nueva-cita"),children:"Agendar nueva cita"})]}):i.jsx(i.Fragment,{children:u.map(h=>{const p=new Date(h.date+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),y=x=>{switch(x){case"PENDING":return i.jsx(Oe,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:"Pendiente"});case"CONFIRMED":return i.jsx(Oe,{className:"bg-blue-100 text-blue-800 border-blue-300",children:"Confirmada"});case"COMPLETED":return i.jsx(Oe,{className:"bg-green-100 text-green-800 border-green-300",children:"Completada"});case"CANCELLED":return i.jsx(Oe,{className:"bg-red-100 text-red-800 border-red-300",children:"Cancelada"});case"NO_SHOW":return i.jsx(Oe,{className:"bg-gray-100 text-gray-800 border-gray-300",children:"No asisti"});default:return i.jsx(Oe,{variant:"outline",children:x})}};return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:i.jsx(vi,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"font-medium text-lg text-foreground",children:h.doctor}),i.jsx("p",{className:"text-sm text-muted-foreground",children:h.specialty}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Bt,{className:"h-4 w-4"}),i.jsx("span",{children:p})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:h.time})]}),i.jsx("span",{children:" 30 min"})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[y(h.status),i.jsx($,{className:"bg-primary hover:bg-primary/90",onClick:()=>n("/mis-citas"),children:"Detalles"})]})]},h.id)})})})]})]})})}function vR(e){return{userId:e.UserId,fullName:e.FullName,specialty:e.Specialty,bio:e.Bio,licenseNumber:e.LicenseNumber,licenseCountryId:e.LicenseCountryId,yearsExperience:e.YearsExperience,verificationStatus:e.VerificationStatus,specialties:e.Specialties}}async function Xf(){const{data:e}=await Ue.get("/doctors/me/profile");return vR(e)}async function wH(e){const t={LicenseNumber:e.licenseNumber,LicenseCountryId:e.licenseCountryId};e.yearsExperience!==void 0&&(t.YearsExperience=e.yearsExperience),e.bio!==void 0&&(t.Bio=e.bio);const{data:n}=await Ue.patch("/doctors/me/profile",t);return vR(n)}async function kH(e){await Ue.post("/doctors/me/specialties",{SpecialtyIds:e.map(t=>Number(t))})}async function SH(){const{data:e}=await Ue.get("/specialties");return e}async function CH(){const{data:e}=await Ue.get("/appointments/today");return Array.isArray(e)?e:[]}const NH=e=>{const t=e.replace("Z","");return new Date(t)};function jH(){const e=Jt({queryKey:["doctor","me","profile"],queryFn:Xf,staleTime:6e4}),t=Jt({queryKey:["doctor","appointments","today"],queryFn:CH,staleTime:2e4}),n=e.data?.fullName??"Doctor/a",r=e.data?.specialty??"",s=(t.data??[]).map(u=>({id:u.id,patient:u.patient?.name||"Paciente",patientEmail:u.patient?.email||"",time:NH(u.scheduledAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0}),type:u.modality==="online"?"videollamada":u.modality==="onsite"?"presencial":"telfono",condition:"Consulta",status:u.status,urgent:!1})),a=s.length,o=(t.data??[]).filter(u=>u.status==="COMPLETED").length,l=(t.data??[]).filter(u=>u.status==="PENDING"||u.status==="CONFIRMED").length;return{profile:e,appointments:t,doctorName:n,doctorSpecialty:r,todaysAppointments:s,stat_today:a,stat_completed:o,stat_pending:l}}function EH(){const e=Rt(),{profile:t,appointments:n,doctorName:r,doctorSpecialty:s,todaysAppointments:a,stat_today:o,stat_completed:l,stat_pending:u}=jH(),h=t.isLoading||n.isLoading;return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:h?"Cargando":`Bienvenido, ${r}`}),i.jsx("p",{className:"text-muted-foreground",children:h?"":s})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(gR,{}),i.jsx($,{variant:"outline",onClick:()=>e("/settings"),children:"Configuracin"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Citas Hoy"}),i.jsx("p",{className:"text-2xl font-bold",children:h?"":o})]}),i.jsx(Bt,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Citas Atendidas"}),i.jsx("p",{className:"text-2xl font-bold",children:h?"":l})]}),i.jsx(Oo,{className:"h-8 w-8 text-green-600"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Citas Pendientes"}),i.jsx("p",{className:"text-2xl font-bold",children:h?"":u})]}),i.jsx(B8,{className:"h-8 w-8 text-orange-600"})]})})})]}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Ul,{className:"h-5 w-5"}),"Acciones Rpidas"]})}),i.jsx(he,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs($,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/appointments"),children:[i.jsx(Bt,{className:"h-6 w-6"}),"Ver Citas"]}),i.jsxs($,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/messages"),children:[i.jsx(Oc,{className:"h-6 w-6"}),"Mensajes"]}),i.jsxs($,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/availability"),children:[i.jsx(Nn,{className:"h-6 w-6"}),"Crear Disponibilidad"]}),i.jsxs($,{className:"h-auto flex-col gap-2 p-4",onClick:()=>e("/verification"),children:[i.jsx(O7,{className:"h-6 w-6"}),"Verificacin"]})]})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"h-5 w-5"}),"Citas de Hoy"]})}),i.jsxs(he,{className:"space-y-4",children:[h&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando"}),!h&&a.length===0&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No tienes citas para hoy."}),a.map(f=>{const p=y=>{switch(y){case"PENDING":return i.jsx(Oe,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:"Pendiente"});case"CONFIRMED":return i.jsx(Oe,{className:"bg-blue-100 text-blue-800 border-blue-300",children:"Confirmada"});case"COMPLETED":return i.jsx(Oe,{className:"bg-green-100 text-green-800 border-green-300",children:"Completada"});case"CANCELLED":return i.jsx(Oe,{className:"bg-red-100 text-red-800 border-red-300",children:"Cancelada"});case"NO_SHOW":return i.jsx(Oe,{className:"bg-gray-100 text-gray-800 border-gray-300",children:"No asisti"});default:return i.jsx(Oe,{variant:"secondary",children:y})}};return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:i.jsx(Nn,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:f.patient||"Paciente"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:f.condition}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-xs font-medium",children:f.time}),f.urgent&&i.jsx(Oe,{variant:"destructive",className:"text-xs",children:"Urgente"})]})]})]}),i.jsxs("div",{className:"text-right space-y-2",children:[i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx(Oe,{variant:f.type==="videollamada"?"default":"secondary",children:f.type}),p(f.status)]}),i.jsx($,{size:"sm",onClick:()=>e("/appointments"),children:"Detalles"})]})]},String(f.id))}),i.jsx($,{variant:"outline",className:"w-full",onClick:()=>e("/appointments"),children:"Ver Agenda Completa"})]})]})]})})]})})}function TH(e){return Jt({queryKey:["admin","dashboard","stats",e?.month,e?.year],queryFn:async()=>{const t={};e?.month!==void 0&&(t.month=e.month),e?.year!==void 0&&(t.year=e.year);const{data:n}=await Ue.get("/admin/dashboard/stats",{params:t});return n},staleTime:6e4})}function PH(){const e=Rt(),t=new Date,[n,r]=g.useState(t.getMonth()+1),[s,a]=g.useState(t.getFullYear()),{data:o,isLoading:l}=TH({month:n,year:s}),u=p=>`$${(p/100).toFixed(2)}`,h=p=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][p-1],f=Array.from({length:6},(p,y)=>t.getFullYear()-y);return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Panel de Administracin"}),i.jsx("p",{className:"text-muted-foreground",children:"Salud Sin Fronteras  Dashboard"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs($,{onClick:()=>e("/admin/verification"),children:[i.jsx(Wx,{className:"h-4 w-4 mr-2"}),"Verificaciones"]}),i.jsxs($,{variant:"outline",onClick:()=>e("/admin/settings"),children:[i.jsx(AP,{className:"h-4 w-4 mr-2"}),"Configuracin"]})]})]}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zp,{className:"h-5 w-5 text-primary"}),i.jsx(_e,{className:"font-semibold",children:"Filtrar estadsticas:"})]}),i.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_e,{htmlFor:"month-select",className:"text-sm",children:"Mes:"}),i.jsx("select",{id:"month-select",value:n,onChange:p=>r(Number(p.target.value)),className:"h-9 px-3 rounded-md border border-input bg-background text-sm",children:Array.from({length:12},(p,y)=>y+1).map(p=>i.jsx("option",{value:p,children:h(p)},p))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_e,{htmlFor:"year-select",className:"text-sm",children:"Ao:"}),i.jsx("select",{id:"year-select",value:s,onChange:p=>a(Number(p.target.value)),className:"h-9 px-3 rounded-md border border-input bg-background text-sm",children:f.map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>{r(t.getMonth()+1),a(t.getFullYear())},children:"Mes Actual"})]}),i.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:["Viendo: ",i.jsxs("strong",{children:[h(n)," ",s]})]})]})})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(Am,{className:"h-5 w-5"}),"Usuarios"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Usuarios"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.totalUsers??0}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l?"...":`${o?.totalDoctors??0} doctores, ${o?.totalPatients??0} pacientes`})]}),i.jsx(Am,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Doctores Verificados"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:l?"...":o?.verifiedDoctors??0}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l?"...":`${o?.pendingDoctors??0} pendientes`})]}),i.jsx(q7,{className:"h-8 w-8 text-green-600"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nuevos Este Mes"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.newUsersThisMonth??0}),i.jsx("p",{className:"text-xs text-green-600 mt-1",children:l?"...":`+${o?.newUsersThisWeek??0} esta semana`})]}),i.jsx(G7,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Administradores"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.totalAdmins??0})]}),i.jsx(W7,{className:"h-8 w-8 text-primary"})]})})})]})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(Bt,{className:"h-5 w-5"}),"Citas Mdicas"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Citas"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.totalAppointments??0})]}),i.jsx(Bt,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Completadas"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:l?"...":o?.completedAppointments??0}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l?"...":o?.totalAppointments?`${(o.completedAppointments/o.totalAppointments*100).toFixed(1)}%`:"0%"})]}),i.jsx(Oo,{className:"h-8 w-8 text-green-600"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prximas"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l?"...":o?.upcomingAppointments??0})]}),i.jsx(Nn,{className:"h-8 w-8 text-blue-600"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Canceladas"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:l?"...":o?.cancelledAppointments??0})]}),i.jsx(js,{className:"h-8 w-8 text-red-600"})]})})})]})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(nn,{className:"h-5 w-5"}),"Registros Mdicos"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Registros"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.totalMedicalRecords??0})]}),i.jsx(nn,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Registros Este Mes"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:l?"...":o?.medicalRecordsThisMonth??0})]}),i.jsx(iN,{className:"h-8 w-8 text-green-600"})]})})})]})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(Su,{className:"h-5 w-5"}),"Suscripciones"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Suscripciones Activas"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.activeSubscriptions??0})]}),i.jsx(qx,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan Bsico"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.basicSubscriptions??0})]}),i.jsx(Oe,{className:"bg-gray-600",children:"Bsico"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan Profesional"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.professionalSubscriptions??0})]}),i.jsx(Oe,{className:"bg-blue-600",children:"Profesional"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan Premium"}),i.jsx("p",{className:"text-2xl font-bold",children:l?"...":o?.premiumSubscriptions??0})]}),i.jsx(Oe,{className:"bg-purple-600",children:"Premium"})]})})})]})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(Cu,{className:"h-5 w-5"}),"Ingresos"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(ue,{className:"border-2 border-primary",children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Ingresos Totales"}),i.jsx("p",{className:"text-3xl font-bold text-primary",children:l?"...":u(o?.totalRevenueCents??0)})]}),i.jsx(Cu,{className:"h-12 w-12 text-primary"})]})})}),i.jsx(ue,{className:"border-2 border-green-600",children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Ingresos Este Mes"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:l?"...":u(o?.revenueThisMonthCents??0)})]}),i.jsx(iN,{className:"h-12 w-12 text-green-600"})]})})})]})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Wx,{className:"h-5 w-5"}),"Estado de Verificacin de Doctores"]})}),i.jsx(he,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Verificados"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:l?"...":o?.verifiedDoctors??0})]}),i.jsx(Oo,{className:"h-10 w-10 text-green-600"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pendientes"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l?"...":o?.pendingDoctors??0})]}),i.jsx(Nn,{className:"h-10 w-10 text-yellow-600"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Rechazados"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:l?"...":o?.rejectedDoctors??0})]}),i.jsx(js,{className:"h-10 w-10 text-red-600"})]})]})})]})]})})}function _H(e,t){return Jt({queryKey:["availability",e,t],enabled:!!e&&!!t,queryFn:async()=>{const{data:n}=await Ue.get(`/doctors/${e}/availability`,{params:{date:t}});return(n??[]).map(r=>({id:Number(r.Id??r.id),startAt:String(r.StartAt??r.startAt),endAt:String(r.EndAt??r.endAt),status:String(r.Status??r.status??"FREE").toUpperCase()}))}})}function RH(){const e=Nr();return Sr({mutationFn:async t=>{const n={DoctorUserId:t.doctorId,SlotId:t.slotId,Modality:t.modality},{data:r}=await Ue.post("/appointments",n);return r},onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["availability",n.doctorId]}),e.invalidateQueries({queryKey:["meAppointments"]})}})}function AH(e){const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function IH(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function bN({preselectedDoctorId:e,preselectedDateISO:t}){const n=Rt(),{getDashboardRoute:r}=da(),[s,a]=g.useState(e??""),[o,l]=g.useState(t??IH()),[u,h]=g.useState("videollamada"),{data:f=[],isLoading:p,isRefetching:y}=_H(typeof s=="number"?s:void 0,o||void 0),x=RH(),k=g.useMemo(()=>typeof s=="number"&&o.length===10,[s,o]);g.useEffect(()=>{},[e]);async function b(S){if(k)try{await x.mutateAsync({doctorId:s,slotId:Number(S),modality:u==="videollamada"?"online":"inperson"}),await Xi.fire({icon:"success",title:"Cita creada!",text:"Tu cita fue agendada correctamente.",confirmButtonText:"OK",confirmButtonColor:"#0f766e"}),n(r())}catch(N){const E=N?.response?.data?.message||N?.response?.data?.error||"No se pudo agendar. El horario podra estar ocupado.";await Xi.fire({icon:"error",title:"No se pudo agendar",text:E})}}return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>n(r()),children:" Volver"}),i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Agendar Cita"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"space-y-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"h-5 w-5"}),"Seleccin"]})}),i.jsxs(he,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"doctorId",children:"ID del Mdico"}),i.jsx(Ye,{id:"doctorId",placeholder:"Ej: 5",inputMode:"numeric",value:s,onChange:S=>{const N=S.target.value.trim();a(N===""?"":Number(N))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"(Mientras no exista un listado/buscador real, ingresa el ID del mdico. Ej: 5)"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"date",children:"Fecha"}),i.jsx(Ye,{id:"date",type:"date",value:o,onChange:S=>l(S.target.value),disabled:s===""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{children:"Tipo de Consulta"}),i.jsxs(es,{value:u,onValueChange:S=>h(S),children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Tipo de consulta"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"videollamada",children:"Videollamada"}),i.jsx(wt,{value:"presencial",children:"Presencial"})]})]})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"El mdico debe publicar disponibilidad para que aparezcan horarios."})]})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Horarios disponibles"}),i.jsx(Oe,{variant:"secondary",children:p||y?"Cargando":Array.isArray(f)?`${f.length} horarios`:"0 horarios"})]}),k?p||y?i.jsx(ue,{children:i.jsx(he,{className:"p-8 text-center text-muted-foreground",children:"Consultando disponibilidad"})}):!f||f.length===0?i.jsx(ue,{children:i.jsx(he,{className:"p-8 text-center text-muted-foreground",children:"No hay horarios para esta fecha."})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(S=>{const N=S.status!=="FREE"||x.isPending;return i.jsx(ue,{className:"hover:shadow-sm",children:i.jsxs(he,{className:"p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:new Date(S.startAt).toLocaleDateString()}),i.jsx(Nn,{className:"h-4 w-4 ml-2"}),i.jsx("span",{className:"font-medium",children:AH(S.startAt)})]}),i.jsx($,{variant:N?"outline":"default",size:"sm",onClick:()=>b(S.id),disabled:N,title:S.status==="BOOKED"?"Ya reservado":"Reservar",children:S.status==="BOOKED"?"Ocupado":"Reservar"})]})},S.id)})}):i.jsx(ue,{children:i.jsxs(he,{className:"p-8 text-center text-muted-foreground",children:["Ingresa un ",i.jsx("b",{children:"ID de mdico"})," y selecciona una ",i.jsx("b",{children:"fecha"})," para ver disponibilidad."]})})]})]})]})})}var My={exports:{}},Ly={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN;function OH(){if(wN)return Ly;wN=1;var e=vp();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(p,y){var x=y(),k=r({inst:{value:x,getSnapshot:y}}),b=k[0].inst,S=k[1];return a(function(){b.value=x,b.getSnapshot=y,u(b)&&S({inst:b})},[p,x,y]),s(function(){return u(b)&&S({inst:b}),p(function(){u(b)&&S({inst:b})})},[p]),o(x),x}function u(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!n(p,x)}catch{return!0}}function h(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Ly.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Ly}var kN;function DH(){return kN||(kN=1,My.exports=OH()),My.exports}var MH=DH();function LH(){return MH.useSyncExternalStore(FH,()=>!0,()=>!1)}function FH(){return()=>{}}var ew="Avatar",[UH,Sle]=Ri(ew),[zH,yR]=UH(ew),xR=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,a]=g.useState("idle");return i.jsx(zH,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(ot.span,{...r,ref:t})})});xR.displayName=ew;var bR="AvatarImage",BH=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=e,o=yR(bR,n),l=$H(r,a),u=kr(h=>{s(h),o.onImageLoadingStatusChange(h)});return qn(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?i.jsx(ot.img,{...a,ref:t,src:r}):null});BH.displayName=bR;var wR="AvatarFallback",kR=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,a=yR(wR,n),[o,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(ot.span,{...s,ref:t}):null});kR.displayName=wR;function SN(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function $H(e,{referrerPolicy:t,crossOrigin:n}){const r=LH(),s=g.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=g.useState(()=>SN(a,e));return qn(()=>{l(SN(a,e))},[a,e]),qn(()=>{const u=p=>()=>{l(p)};if(!a)return;const h=u("loaded"),f=u("error");return a.addEventListener("load",h),a.addEventListener("error",f),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",h),a.removeEventListener("error",f)}},[a,n,t]),o}var VH=xR,qH=kR;function Oa({className:e,...t}){return i.jsx(VH,{"data-slot":"avatar",className:St("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function Da({className:e,...t}){return i.jsx(qH,{"data-slot":"avatar-fallback",className:St("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function HH(){const e=Rt(),{getDashboardRoute:t}=da(),[n,r]=g.useState(!0),[s,a]=g.useState(!0),[o,l]=g.useState(!0),[u,h]=g.useState(!0),[f,p]=g.useState(!1),[y,x]=g.useState(""),[k,b]=g.useState(0),[S,N]=g.useState("English"),E=[{id:1,sender:"doctor",message:"Hola Juan, cmo te encuentras hoy?",translation:"Hello Juan, how are you feeling today?",timestamp:"14:30"},{id:2,sender:"patient",message:"Hello Doctor, I have been feeling chest pain.",translation:"Hola Doctor, he estado sintiendo dolor en el pecho.",timestamp:"14:31"}],j={doctor:"Perfecto, vamos a revisar tus sntomas detalladamente.",translation:"Perfect, let's review your symptoms in detail."};g.useEffect(()=>{const _=setInterval(()=>{b(A=>A+1)},1e3);return()=>clearInterval(_)},[]);const P=_=>{const A=Math.floor(_/60),O=_%60;return`${A.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},T=()=>{y.trim()&&x("")},I=()=>{e(t())};return i.jsx("div",{className:"min-h-screen bg-black p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-white",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:P(k)})]}),i.jsx(Oe,{className:"bg-green-600",children:"Conectado"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pm,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"ES  EN"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs($,{variant:u?"default":"secondary",size:"sm",onClick:()=>h(!u),className:"bg-primary hover:bg-primary/90",children:[i.jsx(sN,{className:"h-4 w-4 mr-2"}),"Traduccin"]}),i.jsx($,{variant:"outline",size:"sm",children:i.jsx(AP,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 h-[calc(100vh-120px)]",children:[i.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[i.jsx(ue,{className:"bg-gray-900 border-gray-700 h-[60%]",children:i.jsxs(he,{className:"p-0 h-full relative",children:[i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx(Oa,{className:"h-32 w-32 mx-auto mb-4",children:i.jsx(Da,{className:"text-4xl bg-primary",children:"AG"})}),i.jsx("h3",{className:"text-xl font-semibold",children:"Dr. Ana Garca"}),i.jsx("p",{className:"text-gray-400",children:"Cardiologa"})]})}),i.jsx("div",{className:"absolute top-4 left-4",children:i.jsx(Oe,{className:"bg-black/70 text-white",children:"Dr. Ana Garca"})}),i.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-white text-sm",children:"Hablando"})]})]})}),i.jsx(ue,{className:"bg-gray-900 border-gray-700 h-[35%] relative",children:i.jsxs(he,{className:"p-0 h-full",children:[i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg flex items-center justify-center",children:n?i.jsxs("div",{className:"text-center text-white",children:[i.jsx(Oa,{className:"h-20 w-20 mx-auto mb-2",children:i.jsx(Da,{className:"text-xl bg-secondary",children:"JP"})}),i.jsx("p",{className:"text-sm",children:"Juan Prez (T)"})]}):i.jsxs("div",{className:"text-center text-white",children:[i.jsx(Ry,{className:"h-16 w-16 mx-auto mb-2 text-gray-400"}),i.jsx("p",{className:"text-sm",children:"Cmara desactivada"})]})}),i.jsx("div",{className:"absolute top-4 right-4 w-32 h-24 bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n?i.jsx(Oa,{className:"h-12 w-12",children:i.jsx(Da,{className:"text-sm",children:"JP"})}):i.jsx(Ry,{className:"h-6 w-6 text-gray-400"})})})]})}),u&&i.jsx(ue,{className:"bg-black/80 border-gray-700",children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-white",children:[i.jsx("span",{className:"text-blue-400 font-medium",children:"Dr. Garca: "}),j.doctor]}),i.jsxs("div",{className:"text-gray-300 text-sm italic",children:[i.jsx("span",{className:"text-green-400",children:"Traduccin: "}),j.translation]})]})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(ue,{className:"bg-gray-900 border-gray-700",children:i.jsxs(he,{className:"p-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs($,{variant:n?"default":"destructive",onClick:()=>r(!n),className:"flex-col gap-1 h-auto py-3",children:[n?i.jsx(vi,{className:"h-5 w-5"}):i.jsx(Ry,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Cmara"})]}),i.jsxs($,{variant:s?"default":"destructive",onClick:()=>a(!s),className:"flex-col gap-1 h-auto py-3",children:[s?i.jsx(v7,{className:"h-5 w-5"}):i.jsx(p7,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Micrfono"})]}),i.jsxs($,{variant:o?"default":"secondary",onClick:()=>l(!o),className:"flex-col gap-1 h-auto py-3",children:[o?i.jsx(e9,{className:"h-5 w-5"}):i.jsx(n9,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Altavoz"})]}),i.jsxs($,{variant:"outline",className:"flex-col gap-1 h-auto py-3",children:[i.jsx(x7,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Pantalla"})]})]}),i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsxs($,{variant:f?"default":"outline",onClick:()=>p(!f),className:"w-full",children:[i.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Chat"]}),i.jsxs($,{variant:"destructive",onClick:I,className:"w-full",children:[i.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Finalizar"]})]})]})}),f&&i.jsx(ue,{className:"bg-gray-900 border-gray-700 h-96",children:i.jsxs(he,{className:"p-4 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-white font-medium",children:"Chat Traducido"}),i.jsxs(Oe,{className:"bg-primary",children:[i.jsx(sN,{className:"h-3 w-3 mr-1"}),"Auto"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:E.map(_=>i.jsxs("div",{className:`p-3 rounded-lg ${_.sender==="patient"?"bg-primary text-white ml-8":"bg-gray-800 text-white mr-8"}`,children:[i.jsx("div",{className:"text-sm",children:_.message}),u&&i.jsx("div",{className:"text-xs text-gray-300 italic mt-1 border-t border-gray-600 pt-1",children:_.translation}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:_.timestamp})]},_.id))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ye,{value:y,onChange:_=>x(_.target.value),placeholder:"Escribe un mensaje...",className:"bg-gray-800 border-gray-600 text-white",onKeyPress:_=>_.key==="Enter"&&T()}),i.jsx($,{onClick:T,size:"icon",children:i.jsx(Wu,{className:"h-4 w-4"})})]})]})}),i.jsx(ue,{className:"bg-gray-900 border-gray-700",children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oa,{className:"h-10 w-10",children:i.jsx(Da,{children:"JP"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium",children:"Juan Prez"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Paciente"})]})]}),i.jsxs($,{variant:"outline",size:"sm",className:"w-full",onClick:()=>e("/history"),children:[i.jsx(nn,{className:"h-4 w-4 mr-2"}),"Ver Historial"]})]})})}),i.jsx(ue,{className:"bg-gray-900 border-gray-700",children:i.jsxs(he,{className:"p-4",children:[i.jsx("h4",{className:"text-white font-medium mb-3",children:"Notas Rpidas"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm text-gray-300 p-2 bg-gray-800 rounded",children:" Dolor en el pecho desde hace 3 das"}),i.jsx("div",{className:"text-sm text-gray-300 p-2 bg-gray-800 rounded",children:" Presin arterial: 140/90"}),i.jsx("div",{className:"text-sm text-gray-300 p-2 bg-gray-800 rounded",children:" Sin antecedentes cardacos"})]})]})})]})]})]})})}function CN(){const e=Rt(),{getDashboardRoute:t}=da(),[n,r]=g.useState(""),[s,a]=g.useState("all"),o=[{id:1,doctor:"Dr. Ana Garca",specialty:"Cardiologa",date:"2024-08-15",time:"14:30",type:"videollamada",diagnosis:"Hipertensin leve",prescription:"Lisinopril 10mg",notes:"Paciente presenta presin arterial elevada. Se recomienda cambios en la dieta y ejercicio regular.",status:"completed",urgent:!1},{id:2,doctor:"Dr. Luis Chen",specialty:"Medicina General",date:"2024-07-22",time:"09:00",type:"presencial",diagnosis:"Resfriado comn",prescription:"Paracetamol 500mg",notes:"Sntomas de resfriado. Descanso y hidratacin.",status:"completed",urgent:!1},{id:3,doctor:"Dr. Mara Gonzlez",specialty:"Dermatologa",date:"2024-06-10",time:"11:00",type:"videollamada",diagnosis:"Dermatitis atpica",prescription:"Crema hidratante",notes:"Dermatitis leve en brazos. Aplicar crema hidratante dos veces al da.",status:"completed",urgent:!1}],l=[{id:1,name:"Lisinopril",dosage:"10mg",frequency:"Una vez al da",prescribed:"2024-08-15",prescriber:"Dr. Ana Garca",active:!0,endDate:"2024-11-15"},{id:2,name:"Vitamina D3",dosage:"1000 IU",frequency:"Una vez al da",prescribed:"2024-06-01",prescriber:"Dr. Luis Chen",active:!0,endDate:null},{id:3,name:"Paracetamol",dosage:"500mg",frequency:"Segn necesidad",prescribed:"2024-07-22",prescriber:"Dr. Luis Chen",active:!1,endDate:"2024-07-29"}],u=[{id:1,test:"Anlisis de Sangre Completo",date:"2024-08-10",doctor:"Dr. Ana Garca",results:{Hemoglobina:{value:"14.5",unit:"g/dL",normal:!0},Glucosa:{value:"95",unit:"mg/dL",normal:!0},"Colesterol Total":{value:"185",unit:"mg/dL",normal:!0},"Presin Arterial":{value:"140/90",unit:"mmHg",normal:!1}},status:"reviewed"},{id:2,test:"Electrocardiograma",date:"2024-08-15",doctor:"Dr. Ana Garca",results:{Ritmo:{value:"Sinusal normal",unit:"",normal:!0},Frecuencia:{value:"72",unit:"bpm",normal:!0}},status:"pending"}],h=[{id:1,name:"Receta_Lisinopril_20240815.pdf",type:"prescription",date:"2024-08-15",doctor:"Dr. Ana Garca",size:"245 KB"},{id:2,name:"Anlisis_Sangre_20240810.pdf",type:"lab",date:"2024-08-10",doctor:"Dr. Ana Garca",size:"1.2 MB"},{id:3,name:"ECG_20240815.pdf",type:"imaging",date:"2024-08-15",doctor:"Dr. Ana Garca",size:"890 KB"}],f={bloodType:"O+",allergies:["Penicilina","Mariscos"],chronicConditions:["Hipertensin"],emergencyContact:{name:"Mara Prez",relationship:"Esposa",phone:"+34 666 123 456"}},p=o.filter(x=>{const k=x.doctor.toLowerCase().includes(n.toLowerCase())||x.specialty.toLowerCase().includes(n.toLowerCase())||x.diagnosis.toLowerCase().includes(n.toLowerCase());return s==="all"?k:s==="recent"?new Date(x.date)>new Date("2024-07-01")&&k:s==="cardiology"?x.specialty==="Cardiologa"&&k:k});return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>e(t()),children:" Volver"}),i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Historial Mdico"})]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Informacin mdica segura y encriptada"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Rm,{className:"h-4 w-4 mr-2"}),"Subir Documento"]}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(A7,{className:"h-4 w-4 mr-2"}),"Compartir"]}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),i.jsx(ue,{className:"border-blue-200 bg-blue-50",children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pb,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Tu informacin mdica est protegida con cifrado de extremo a extremo"}),i.jsx("p",{className:"text-xs text-blue-600",children:"Solo t y los mdicos autorizados pueden acceder a estos datos"})]})]})})}),i.jsxs(Dc,{defaultValue:"consultations",className:"space-y-6",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-5",children:[i.jsx(Sn,{value:"consultations",children:"Consultas"}),i.jsx(Sn,{value:"medications",children:"Medicamentos"}),i.jsx(Sn,{value:"labs",children:"Anlisis"}),i.jsx(Sn,{value:"documents",children:"Documentos"}),i.jsx(Sn,{value:"profile",children:"Perfil Mdico"})]}),i.jsxs(Cn,{value:"consultations",className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{placeholder:"Buscar por mdico, especialidad o diagnstico...",value:n,onChange:x=>r(x.target.value),className:"pl-10"})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{variant:s==="all"?"default":"outline",onClick:()=>a("all"),size:"sm",children:"Todas"}),i.jsx($,{variant:s==="recent"?"default":"outline",onClick:()=>a("recent"),size:"sm",children:"Recientes"}),i.jsx($,{variant:s==="cardiology"?"default":"outline",onClick:()=>a("cardiology"),size:"sm",children:"Cardiologa"})]})]}),i.jsx("div",{className:"space-y-4",children:p.map(x=>i.jsx(ue,{className:"hover:shadow-md transition-shadow",children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[i.jsx(Oa,{className:"h-12 w-12",children:i.jsx(Da,{children:x.doctor.split(" ").map(k=>k[0]).join("")})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold",children:x.doctor}),i.jsx(Oe,{variant:"secondary",children:x.specialty})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Bt,{className:"h-4 w-4"}),x.date]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Nn,{className:"h-4 w-4"}),x.time]}),i.jsx(Oe,{variant:x.type==="videollamada"?"default":"outline",children:x.type})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Diagnstico:"})," ",x.diagnosis]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Prescripcin:"})," ",x.prescription]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:x.notes})]})]})]}),i.jsxs("div",{className:"flex flex-col gap-2 lg:min-w-[120px]",children:[i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(nn,{className:"h-4 w-4 mr-2"}),"Ver Detalles"]}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})]})})},x.id))})]}),i.jsx(Cn,{value:"medications",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Ib,{className:"h-5 w-5 text-green-600"}),"Medicamentos Activos"]})}),i.jsx(he,{className:"space-y-4",children:l.filter(x=>x.active).map(x=>i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h4",{className:"font-semibold",children:x.name}),i.jsx(Oe,{className:"bg-green-100 text-green-800",children:"Activo"})]}),i.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Dosis:"})," ",x.dosage]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Frecuencia:"})," ",x.frequency]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Prescrito por:"})," ",x.prescriber]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Desde:"})," ",x.prescribed]}),x.endDate&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Hasta:"})," ",x.endDate]})]})]},x.id))})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"h-5 w-5 text-gray-600"}),"Historial de Medicamentos"]})}),i.jsx(he,{className:"space-y-4",children:l.filter(x=>!x.active).map(x=>i.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h4",{className:"font-semibold",children:x.name}),i.jsx(Oe,{variant:"secondary",children:"Finalizado"})]}),i.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Dosis:"})," ",x.dosage]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Prescrito por:"})," ",x.prescriber]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Perodo:"})," ",x.prescribed," - ",x.endDate]})]})]},x.id))})]})]})}),i.jsx(Cn,{value:"labs",className:"space-y-6",children:i.jsx("div",{className:"space-y-4",children:u.map(x=>i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(qx,{className:"h-5 w-5"}),x.test]}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[i.jsx("span",{children:x.date}),i.jsx("span",{children:x.doctor}),i.jsx(Oe,{variant:x.status==="reviewed"?"default":"secondary",children:x.status==="reviewed"?"Revisado":"Pendiente"})]})]}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})}),i.jsx(he,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(x.results).map(([k,b])=>i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h4",{className:"text-sm font-medium",children:k}),!b.normal&&i.jsx(Bn,{className:"h-4 w-4 text-orange-500"})]}),i.jsxs("p",{className:"text-lg font-semibold",children:[b.value," ",i.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:b.unit})]}),i.jsx(Oe,{variant:b.normal?"secondary":"destructive",className:"text-xs",children:b.normal?"Normal":"Fuera de rango"})]},k))})})]},x.id))})}),i.jsx(Cn,{value:"documents",className:"space-y-6",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(x=>i.jsx(ue,{className:"hover:shadow-md transition-shadow",children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:i.jsx(nn,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-sm mb-1",children:x.name}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[i.jsx("p",{children:x.date}),i.jsx("p",{children:x.doctor}),i.jsx("p",{children:x.size})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Or,{className:"h-3 w-3 mr-1"}),"Ver"]}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Gs,{className:"h-3 w-3 mr-1"}),"Descargar"]})]})]})]})})},x.id))})}),i.jsx(Cn,{value:"profile",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(r7,{className:"h-5 w-5 text-red-500"}),"Informacin Mdica Bsica"]})}),i.jsx(he,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"Tipo de Sangre"}),i.jsx("p",{className:"text-lg font-semibold text-red-600",children:f.bloodType})]}),i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"Altura"}),i.jsx("p",{className:"text-lg font-semibold",children:"175 cm"})]}),i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"Peso"}),i.jsx("p",{className:"text-lg font-semibold",children:"70 kg"})]}),i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"IMC"}),i.jsx("p",{className:"text-lg font-semibold",children:"22.9"})]})]})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Alergias"})}),i.jsx(he,{children:i.jsx("div",{className:"space-y-2",children:f.allergies.map((x,k)=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[i.jsx(Bn,{className:"h-4 w-4 text-red-500"}),i.jsx("span",{className:"text-red-700 font-medium",children:x})]},k))})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Condiciones Crnicas"})}),i.jsx(he,{children:i.jsx("div",{className:"space-y-2",children:f.chronicConditions.map((x,k)=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[i.jsx(qx,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-orange-700 font-medium",children:x})]},k))})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Contacto de Emergencia"})}),i.jsxs(he,{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"Nombre"}),i.jsx("p",{children:f.emergencyContact.name})]}),i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"Relacin"}),i.jsx("p",{children:f.emergencyContact.relationship})]}),i.jsxs("div",{children:[i.jsx(y,{className:"text-sm font-medium",children:"Telfono"}),i.jsx("p",{children:f.emergencyContact.phone})]})]})]})]})})]})]})});function y({children:x,className:k,...b}){return i.jsx("label",{className:`text-sm font-medium ${k||""}`,...b,children:x})}}const WH=["me"],KH=()=>!!localStorage.getItem("access_token");function Yp(){return Jt({queryKey:WH,queryFn:Sm,enabled:KH(),retry:!1,staleTime:6e4})}const jl=[{id:"1",name:"Costa Rica",code:"CR"},{id:"2",name:"Mxico",code:"MX"},{id:"3",name:"Guatemala",code:"GT"},{id:"4",name:"Honduras",code:"HN"},{id:"5",name:"El Salvador",code:"SV"},{id:"6",name:"Nicaragua",code:"NI"},{id:"7",name:"Panam",code:"PA"},{id:"8",name:"Colombia",code:"CO"},{id:"9",name:"Venezuela",code:"VE"},{id:"10",name:"Ecuador",code:"EC"},{id:"11",name:"Per",code:"PE"},{id:"12",name:"Bolivia",code:"BO"},{id:"13",name:"Chile",code:"CL"},{id:"14",name:"Argentina",code:"AR"},{id:"15",name:"Uruguay",code:"UY"},{id:"16",name:"Paraguay",code:"PY"},{id:"17",name:"Brasil",code:"BR"},{id:"18",name:"Cuba",code:"CU"},{id:"19",name:"Repblica Dominicana",code:"DO"},{id:"20",name:"Puerto Rico",code:"PR"},{id:"21",name:"Estados Unidos",code:"US"},{id:"22",name:"Canad",code:"CA"},{id:"23",name:"Espaa",code:"ES"},{id:"24",name:"Portugal",code:"PT"},{id:"25",name:"Francia",code:"FR"},{id:"26",name:"Italia",code:"IT"},{id:"27",name:"Alemania",code:"DE"},{id:"28",name:"Reino Unido",code:"GB"},{id:"29",name:"China",code:"CN"},{id:"30",name:"Japn",code:"JP"},{id:"31",name:"Corea del Sur",code:"KR"},{id:"32",name:"India",code:"IN"},{id:"33",name:"Australia",code:"AU"},{id:"34",name:"Nueva Zelanda",code:"NZ"},{id:"35",name:"Rusia",code:"RU"},{id:"36",name:"Otro",code:"XX"}];function hu(e){return e?jl.find(n=>n.id===String(e))?.name??"":""}const GH="/plans",ZH="/subscriptions/checkout",JH="/subscriptions/me",YH="/subscriptions/cancel";function SR(e){return{id:Number(e.Id||e.id),name:e.Name||e.name||"",description:e.Description||e.description,price:e.PriceCents?e.PriceCents/100:e.price||0,priceCents:e.PriceCents||e.priceCents,currency:e.Currency||e.currency||"USD",maxAppointmentsPerMonth:e.MaxAppointments??e.maxAppointmentsPerMonth??0,features:Array.isArray(e.FeaturesJson)?e.FeaturesJson:e.features||[],isActive:e.IsActive??e.isActive??!0,createdAt:e.CreatedAt||e.createdAt}}function tw(e){return{id:e.Id||e.id,userId:e.UserId||e.userId,planId:e.PlanId||e.planId,startAt:e.StartAt||e.startAt,expiresAt:e.ExpiresAt||e.expiresAt,isActive:e.IsActive??e.isActive??!1,autoRenew:e.AutoRenew??e.autoRenew??!1,createdAt:e.CreatedAt||e.createdAt,updatedAt:e.UpdatedAt||e.updatedAt,plan:e.Plan?SR(e.Plan):void 0}}async function CR(){try{const{data:e}=await Ue.get(GH);return(Array.isArray(e)?e:e?.data??[]).map(SR)}catch(e){const t=e?.response?.data?.message??e?.message??"No se pudieron cargar los planes disponibles";throw new Error(String(t))}}async function NR(e){try{const t={PlanId:Number(e),DurationMonths:1},{data:n}=await Ue.post(ZH,t);return tw(n)}catch(t){const n=t?.response?.status;if(n===400){const s=t?.response?.data?.message;throw Array.isArray(s)?new Error(s.join(". ")):new Error(s||"Datos de suscripcin invlidos")}if(n===404)throw new Error("Plan de suscripcin no encontrado");if(n===409)throw new Error("Ya tienes una suscripcin activa. Canclala primero para cambiar de plan.");const r=t?.response?.data?.message??t?.message??"No se pudo crear la suscripcin";throw new Error(String(r))}}async function Yx(){try{const{data:e}=await Ue.get(JH);return tw(e)}catch(e){if(e?.response?.status===404)throw new Error("No se pudo obtener tu suscripcin");const n=e?.response?.data?.message??e?.message??"No se pudo obtener tu suscripcin";throw new Error(String(n))}}async function Qx(){try{const{data:e}=await Ue.delete(YH);return tw(e)}catch(e){const t=e?.response?.status;if(t===404)throw new Error("No tienes una suscripcin activa para cancelar");if(t===400){const r=e?.response?.data?.message;throw new Error(r||"No se puede cancelar esta suscripcin")}const n=e?.response?.data?.message??e?.message??"No se pudo cancelar la suscripcin";throw new Error(String(n))}}function QH({onLogout:e}){const t=Rt(),{getDashboardRoute:n}=da(),{data:r,isLoading:s,isError:a}=Yp(),[o,l]=g.useState(!1),[u,h]=g.useState(""),[f,p]=g.useState(!1),[y,x]=g.useState(""),[k,b]=g.useState(""),[S,N]=g.useState(""),[E,j]=g.useState(""),[P,T]=g.useState("undisclosed"),[I,_]=g.useState(""),[A,O]=g.useState(""),[M,q]=g.useState(""),[z,G]=g.useState(""),[oe,ke]=g.useState(""),[J,ge]=g.useState(!1),[U,ie]=g.useState(!1),[fe,B]=g.useState(!1),[te,ee]=g.useState(!1),[ye,Te]=g.useState(""),[ne,K]=g.useState(""),[ce,De]=g.useState(""),[Fe,Xe]=g.useState(!1),[He,pt]=g.useState(""),[jt,Kn]=g.useState([]),[ht,qt]=g.useState(null),[vs,Ht]=g.useState(!0),[F,W]=g.useState(!1);g.useEffect(()=>{if(!r)return;j(r.phone??""),x(r.firstName1??""),b(r.lastName1??""),N(r.lastName2??"");const be=r.gender?.toLowerCase?.()||"undisclosed";T(["male","female","other","undisclosed"].includes(be)?be:"undisclosed");const mt=r?.dateOfBirth?String(r.dateOfBirth).slice(0,10):"";h(mt),_(r?.identification??""),O(r?.nationalityId??""),q(r?.residenceCountryId??""),G(r?.primaryLanguage??""),ke(r?.timezone??"")},[r]),g.useEffect(()=>{async function be(){try{Ht(!0);const[mt,_t]=await Promise.all([CR(),Yx()]);Kn(mt),qt(_t)}catch(mt){console.error("Error al cargar datos de suscripcin:",mt)}finally{Ht(!1)}}be()},[]);async function re(){try{l(!0);const mt=[y,k,S].filter(Boolean).join(" ");await ub({fullName:mt||void 0,firstName1:y||void 0,lastName1:k||void 0,lastName2:S||void 0,phone:E||void 0,gender:P||void 0,dateOfBirth:u||void 0,identification:I||void 0,nationalityId:A||void 0,residenceCountryId:M||void 0,primaryLanguage:z||void 0,timezone:oe||void 0}),p(!1)}catch(be){console.error(be)}finally{l(!1)}}function Re(){if(r){j(r.phone??""),x(r.firstName1??""),b(r.lastName1??""),N(r.lastName2??"");const be=r.gender?.toLowerCase?.()||"undisclosed";T(["male","female","other","undisclosed"].includes(be)?be:"undisclosed");const mt=r?.dateOfBirth?String(r.dateOfBirth).slice(0,10):"";h(mt),_(r?.identification??""),O(r?.nationalityId??""),q(r?.residenceCountryId??""),G(r?.primaryLanguage??""),ke(r?.timezone??"")}p(!1)}async function Pe(){if(pt(""),!ye||!ne||!ce){pt("Por favor completa todos los campos");return}if(ne.length<8){pt("La nueva contrasea debe tener al menos 8 caracteres");return}if(ne!==ce){pt("Las contraseas no coinciden");return}try{Xe(!0),await hb(ye,ne),Te(""),K(""),De(""),ee(!1),alert("Contrasea actualizada exitosamente")}catch(be){pt(be.response?.data?.message||be.message||"Error al cambiar la contrasea")}finally{Xe(!1)}}async function je(be){if(ht&&ht.plan?.name!=="Basic"&&ht.isActive){if(!confirm(`Ya tienes una suscripcin activa (${ht.plan?.name}). Para cambiar de plan, primero debes cancelar tu suscripcin actual. Deseas cancelarla ahora?`))return;try{W(!0),await Qx()}catch(_t){alert(_t.message||"No se pudo cancelar la suscripcin actual"),W(!1);return}}try{W(!0),await NR(be);const mt=await Yx();qt(mt),alert("Suscripcin exitosa! Tu plan ha sido activado.")}catch(mt){alert(mt.message||"Error al procesar la suscripcin")}finally{W(!1)}}async function ze(){if(confirm("Ests seguro de que deseas cancelar tu suscripcin? Tu plan seguir activo hasta el final del perodo de facturacin."))try{W(!0);const be=await Qx();qt(be),alert("Suscripcin cancelada. Tu plan seguir activo hasta la fecha de vencimiento.")}catch(be){alert(be.message||"Error al cancelar la suscripcin")}finally{W(!1)}}const dt=(r?.fullName?.[0]??r?.firstName1?.[0]??r?.email?.[0]??"U")?.toUpperCase?.()||"U";return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>t(n()),children:" Volver"}),i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Configuracin"})]}),i.jsxs(Dc,{defaultValue:"profile",className:"space-y-6",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-2",children:[i.jsx(Sn,{value:"profile",children:"Perfil"}),i.jsx(Sn,{value:"subscriptions",children:"Suscripciones"})]}),i.jsxs(Cn,{value:"profile",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),"Informacin Personal"]}),f?i.jsxs($,{variant:"outline",size:"sm",onClick:Re,children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancelar"]}):i.jsxs($,{variant:"outline",size:"sm",onClick:()=>p(!0),children:[i.jsx(jo,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),i.jsxs(he,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx(Oa,{className:"h-24 w-24",children:i.jsx(Da,{className:"text-2xl",children:dt})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs($,{variant:"outline",children:[i.jsx(Eb,{className:"h-4 w-4 mr-2"}),"Cambiar Foto"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG o GIF. Mximo 5MB."})]})]}),s?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando perfil..."}):a?i.jsx("div",{className:"text-sm text-red-600",children:"No se pudo cargar tu perfil."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"firstName",children:"Nombre"}),i.jsx(Ye,{id:"firstName",value:y,onChange:be=>x(be.target.value),placeholder:"Tu nombre",disabled:!f}),!y&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"lastName1",children:"Primer Apellido"}),i.jsx(Ye,{id:"lastName1",value:k,onChange:be=>b(be.target.value),placeholder:"Primer apellido",disabled:!f}),!k&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"lastName2",children:"Segundo Apellido"}),i.jsx(Ye,{id:"lastName2",value:S,onChange:be=>N(be.target.value),placeholder:"Segundo apellido (opcional)",disabled:!f})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"email",children:"Correo Electrnico"}),i.jsx(Ye,{id:"email",type:"email",value:r?.email??"",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"phone",children:"Telfono"}),i.jsx(Ye,{id:"phone",value:E,onChange:be=>j(be.target.value),placeholder:"+506 8888 8888",disabled:!f}),!E&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"birthDate",children:"Fecha de Nacimiento"}),i.jsx(Ye,{id:"birthDate",type:"date",value:u,onChange:be=>h(be.target.value),disabled:!f})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"gender",children:"Gnero"}),i.jsxs(es,{value:P,onValueChange:be=>T(be),disabled:!f,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona un gnero"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"male",children:"Masculino"}),i.jsx(wt,{value:"female",children:"Femenino"}),i.jsx(wt,{value:"other",children:"Otro"}),i.jsx(wt,{value:"undisclosed",children:"Prefiero no decir"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"identification",children:"Nmero de Identificacin"}),i.jsx(Ye,{id:"identification",value:I,onChange:be=>_(be.target.value),placeholder:"504470462",disabled:!f})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"nationality",children:"Nacionalidad"}),i.jsxs(es,{value:A,onValueChange:be=>O(be),disabled:!f,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona tu nacionalidad",children:A?hu(A):"Selecciona tu nacionalidad"})}),i.jsx(rs,{children:jl.map(be=>i.jsx(wt,{value:be.id,children:be.name},be.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"residenceCountry",children:"Pas de Residencia"}),i.jsxs(es,{value:M,onValueChange:be=>q(be),disabled:!f,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona tu pas de residencia",children:M?hu(M):"Selecciona tu pas de residencia"})}),i.jsx(rs,{children:jl.map(be=>i.jsx(wt,{value:be.id,children:be.name},be.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"primaryLanguage",children:"Idioma Primario"}),i.jsxs(es,{value:z,onValueChange:be=>G(be),disabled:!f,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona un idioma"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"es",children:"Espaol"}),i.jsx(wt,{value:"en",children:"Ingls"}),i.jsx(wt,{value:"fr",children:"Francs"}),i.jsx(wt,{value:"pt",children:"Portugus"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"timezone",children:"Zona Horaria"}),i.jsxs(es,{value:oe,onValueChange:be=>ke(be),disabled:!f,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona zona horaria"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"America/Costa_Rica",children:"Amrica/Costa Rica (UTC-6)"}),i.jsx(wt,{value:"America/Mexico_City",children:"Amrica/Ciudad de Mxico (UTC-6)"}),i.jsx(wt,{value:"America/New_York",children:"Amrica/Nueva York (UTC-5)"}),i.jsx(wt,{value:"America/Los_Angeles",children:"Amrica/Los ngeles (UTC-8)"}),i.jsx(wt,{value:"Europe/Madrid",children:"Europa/Madrid (UTC+1)"})]})]})]})]}),f&&i.jsxs($,{className:"w-full sm:w-auto",onClick:re,disabled:o||s,children:[i.jsx(_m,{className:"h-4 w-4 mr-2"}),o?"Guardando...":"Guardar Cambios"]})]})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),"Informacin de Cuenta"]})}),i.jsx(he,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(_e,{className:"text-muted-foreground",children:"Estado de la Cuenta"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Oe,{className:"bg-green-100 text-green-800",children:r?.status==="active"?"Activa":"Inactiva"})})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(_e,{className:"text-muted-foreground",children:"Tipo de Usuario"}),i.jsx("p",{className:"text-sm font-medium",children:r?.role==="PATIENT"?"Paciente":r?.role})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(_e,{className:"text-muted-foreground",children:"Miembro desde"}),i.jsx("p",{className:"text-sm font-medium",children:r?.createdAt?new Date(r.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(_e,{className:"text-muted-foreground",children:"ltima Actualizacin"}),i.jsx("p",{className:"text-sm font-medium",children:r?.updatedAt?new Date(r.updatedAt).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A"})]})]})})]}),i.jsxs(ue,{children:[i.jsx($e,{onClick:()=>ee(!te),className:"cursor-pointer select-none",children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tb,{className:"h-5 w-5"}),"Cambiar Contrasea"]}),te?i.jsx(od,{className:"h-5 w-5"}):i.jsx(Ic,{className:"h-5 w-5"})]})}),te&&i.jsxs(he,{className:"space-y-4",children:[He&&i.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:i.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[i.jsx(Bn,{className:"h-4 w-4"}),He]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"currentPassword",children:"Contrasea Actual"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"currentPassword",type:J?"text":"password",placeholder:"",value:ye,onChange:be=>Te(be.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>ge(!J),children:J?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"newPassword",children:"Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"newPassword",type:U?"text":"password",placeholder:"",value:ne,onChange:be=>K(be.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>ie(!U),children:U?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Mnimo 8 caracteres"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"confirmPassword",children:"Confirmar Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"confirmPassword",type:fe?"text":"password",placeholder:"",value:ce,onChange:be=>De(be.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>B(!fe),children:fe?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsx($,{onClick:Pe,disabled:Fe,children:Fe?"Actualizando...":"Actualizar Contrasea"})]})]})]}),i.jsx(Cn,{value:"subscriptions",className:"space-y-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Su,{className:"h-5 w-5"}),"Mi Suscripcin"]})}),i.jsx(he,{className:"space-y-4",children:vs?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando informacin de suscripcin..."}):i.jsxs(i.Fragment,{children:[ht&&i.jsxs("div",{className:"p-4 bg-accent rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-primary",children:"Plan Actual"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:ht.plan?.name||"Plan Gratuito"})]}),i.jsx(Oe,{className:ht.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:ht.isActive?"Activo":"Inactivo"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Citas mensuales:"}),i.jsx("span",{className:"font-medium",children:ht.plan?.maxAppointmentsPerMonth===-1?"Ilimitadas":`${ht.plan?.maxAppointmentsPerMonth||0} permitidas`})]}),ht.expiresAt&&i.jsxs("p",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:ht.autoRenew?"Prxima renovacin:":"Expira:"}),i.jsx("span",{className:"font-medium",children:new Date(ht.expiresAt).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})})]}),i.jsxs("p",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Precio:"}),i.jsxs("span",{className:"font-medium text-lg",children:["$",ht.plan?.price?.toFixed(2)||"0.00"]})]})]}),ht.autoRenew&&ht.plan?.name!=="Basic"&&i.jsx("div",{className:"pt-4 mt-4 border-t",children:i.jsx($,{variant:"outline",className:"w-full text-red-600 hover:bg-red-50",onClick:ze,disabled:F,children:F?"Procesando...":"Cancelar Renovacin Automtica"})})]}),i.jsxs("div",{className:"pt-4",children:[i.jsx("h4",{className:"font-semibold mb-3",children:ht?.plan?.name==="Basic"?"Actualizar Plan":"Cambiar Plan"}),i.jsx("div",{className:"grid gap-4",children:jt.filter(be=>be.id!==ht?.plan?.id).map(be=>{const mt=be.name==="Standard",_t=be.name==="Premium";return i.jsxs("div",{className:`border rounded-lg p-4 hover:border-primary transition-colors ${_t?"border-2 border-primary hover:shadow-lg":""}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h5",{className:"font-semibold text-lg",children:be.name}),mt&&i.jsx(Oe,{variant:"outline",children:"Popular"}),_t&&i.jsx(Oe,{className:"bg-primary text-white",children:"Recomendado"})]}),i.jsxs("p",{className:"text-2xl font-bold text-primary mb-2",children:["$",be.price.toFixed(2),i.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/mes"})]}),i.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[i.jsxs("li",{children:[" ",be.maxAppointmentsPerMonth===-1?"Citas ilimitadas":`${be.maxAppointmentsPerMonth} citas mensuales`]}),be.description&&i.jsxs("li",{children:[" ",be.description]}),be.name==="Standard"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:" Mensajera con mdicos"}),i.jsx("li",{children:" Soporte por email"})]}),be.name==="Premium"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:" Mensajera con mdicos"}),i.jsx("li",{children:" Videollamadas HD"}),i.jsx("li",{children:" Soporte prioritario 24/7"}),i.jsx("li",{children:" Recordatorios automticos"})]})]}),i.jsx($,{className:"w-full",onClick:()=>je(be.id),disabled:F||vs,children:F?"Procesando...":"Seleccionar Plan"})]},be.id)})})]})]})})]})})]}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cerrar Sesin"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cierra la sesin en este dispositivo"})]}),i.jsxs($,{variant:"outline",onClick:e,children:[i.jsx(_b,{className:"h-4 w-4 mr-2"}),"Cerrar Sesin"]})]})})})]})})}function qm({className:e,...t}){return i.jsx("textarea",{"data-slot":"textarea",className:St("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const XH="/verification/submit",eW="/verification/status",tW="/verification/pending",nW="/verification/approved",rW="/verification/rejected",sW=e=>`/verification/doctor/${e}`,iW=e=>`/verification/review/${e}`;async function aW(e){if(!e.CertificationDocuments||e.CertificationDocuments.length<1||e.CertificationDocuments.length>10)throw new Error("Debes subir entre 1 y 10 documentos de certificacin");try{const{data:t}=await Ue.post(XH,e);return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("Solo los doctores pueden enviar documentos de verificacin");if(n===400){const s=t?.response?.data?.message;throw Array.isArray(s)?new Error(s.join(". ")):new Error(s||"Datos de verificacin invlidos")}const r=t?.response?.data?.message??t?.message??"No se pudieron enviar los documentos de verificacin";throw new Error(String(r))}}async function jR(){try{const{data:e}=await Ue.get(eW);return e}catch(e){const t=e?.response?.status;if(t===403)throw new Error("Solo los doctores pueden consultar su estado de verificacin");if(t===404)return{UserId:"",VerificationStatus:"pending",CertificationDocuments:[]};const n=e?.response?.data?.message??e?.message??"No se pudo obtener el estado de verificacin";throw new Error(String(n))}}async function oW(){try{const{data:e}=await Ue.get(tW);return Array.isArray(e)?e:[]}catch(e){if(e?.response?.status===403)throw new Error("Solo los administradores pueden ver verificaciones pendientes");const n=e?.response?.data?.message??e?.message??"No se pudieron cargar las verificaciones pendientes";throw new Error(String(n))}}async function cW(){try{const{data:e}=await Ue.get(nW);return Array.isArray(e)?e:[]}catch(e){if(e?.response?.status===403)throw new Error("Solo los administradores pueden ver doctores verificados");const n=e?.response?.data?.message??e?.message??"No se pudieron cargar los doctores verificados";throw new Error(String(n))}}async function lW(){try{const{data:e}=await Ue.get(rW);return Array.isArray(e)?e:[]}catch(e){if(e?.response?.status===403)throw new Error("Solo los administradores pueden ver doctores rechazados");const n=e?.response?.data?.message??e?.message??"No se pudieron cargar los doctores rechazados";throw new Error(String(n))}}async function dW(e){try{const{data:t}=await Ue.get(sW(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("Solo los administradores pueden ver verificaciones de doctores");if(n===404)throw new Error("Doctor no encontrado o sin verificacin");const r=t?.response?.data?.message??t?.message??"No se pudo obtener la verificacin del doctor";throw new Error(String(r))}}async function uW(e,t){if(t.Action==="reject"&&!t.RejectionReason)throw new Error("Debes proporcionar una razn de rechazo");try{const{data:n}=await Ue.post(iW(e),t);return n}catch(n){const r=n?.response?.status;if(r===403)throw new Error("Solo los administradores pueden revisar verificaciones");if(r===404)throw new Error("Doctor o verificacin no encontrada");if(r===400){const a=n?.response?.data?.message;throw Array.isArray(a)?new Error(a.join(". ")):new Error(a||"Datos de revisin invlidos")}const s=n?.response?.data?.message??n?.message??"No se pudo procesar la revisin de verificacin";throw new Error(String(s))}}function ER(){return Jt({queryKey:["verification","status","mine"],queryFn:jR,staleTime:120*1e3,retry:1})}function hW(){return Jt({queryKey:["verification","pending"],queryFn:oW,staleTime:60*1e3})}function fW(){return Jt({queryKey:["verification","approved"],queryFn:cW,staleTime:300*1e3})}function mW(){return Jt({queryKey:["verification","rejected"],queryFn:lW,staleTime:300*1e3})}function pW(e){return Jt({queryKey:["verification","doctor",e],queryFn:()=>{if(!e)throw new Error("Doctor ID is required");return dW(e)},enabled:!!e,staleTime:120*1e3})}function gW(){const e=Nr();return Sr({mutationFn:t=>aW(t),onSuccess:()=>{e.invalidateQueries({queryKey:["verification","status","mine"]})}})}function vW(){const e=Nr();return Sr({mutationFn:({doctorId:t,payload:n})=>uW(t,n),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["verification","pending"]}),e.invalidateQueries({queryKey:["verification","approved"]}),e.invalidateQueries({queryKey:["verification","rejected"]}),e.invalidateQueries({queryKey:["verification","doctor",n.doctorId]})}})}function yW({onLogout:e}){const t=Rt(),{getDashboardRoute:n}=da(),{data:r,isLoading:s,isError:a}=Yp(),{data:o}=ER(),[l,u]=g.useState(!1),[h,f]=g.useState(""),[p,y]=g.useState(!1),[x,k]=g.useState(!1),[b,S]=g.useState(""),[N,E]=g.useState(""),[j,P]=g.useState(""),[T,I]=g.useState(""),[_,A]=g.useState("undisclosed"),[O,M]=g.useState(""),[q,z]=g.useState(""),[G,oe]=g.useState(""),[ke,J]=g.useState(""),[ge,U]=g.useState(""),[ie,fe]=g.useState(null),[B,te]=g.useState(!0),[ee,ye]=g.useState(""),[Te,ne]=g.useState(""),[K,ce]=g.useState(""),[De,Fe]=g.useState(""),[Xe,He]=g.useState([]),[pt,jt]=g.useState(!1),[Kn,ht]=g.useState(!1),[qt,vs]=g.useState(!1),[Ht,F]=g.useState(!1),[W,re]=g.useState(""),[Re,Pe]=g.useState(""),[je,ze]=g.useState(""),[dt,be]=g.useState(!1),[mt,_t]=g.useState(""),[un,sn]=g.useState(!1),[jn,ys]=g.useState("license"),[pr,jr]=g.useState([]),[Br,dr]=g.useState([]),[Mn,$r]=g.useState([]),[gr,Er]=g.useState(!1),[Vr,it]=g.useState(!1);g.useEffect(()=>{if(!r)return;I(r.phone??""),S(r.firstName1??""),E(r.lastName1??""),P(r.lastName2??"");const me=r.gender?.toLowerCase?.()||"undisclosed";A(["male","female","other","undisclosed"].includes(me)?me:"undisclosed");const tt=r?.dateOfBirth?String(r.dateOfBirth).slice(0,10):"";f(tt),M(r?.identification??""),z(r?.nationalityId??""),oe(r?.residenceCountryId??""),J(r?.primaryLanguage??""),U(r?.timezone??"")},[r]),g.useEffect(()=>{async function me(){try{te(!0);const tt=await Xf();fe(tt),ye(tt.licenseNumber??""),ne(tt.licenseCountryId?.toString()??""),ce(tt.yearsExperience?.toString()??""),Fe(tt.bio??""),He(tt.specialties??[]),$r(tt.specialties?.map(Tr=>String(Tr.Id))??[])}catch(tt){tt.response?.status===404?(console.log("El doctor an no tiene perfil profesional"),fe(null)):console.error("Error al cargar perfil profesional:",tt)}finally{te(!1)}}me()},[]),g.useEffect(()=>{async function me(){try{const tt=await SH();dr(tt)}catch(tt){console.error("Error al cargar especialidades:",tt)}}me()},[]);async function Qt(){try{u(!0);const tt=[b,N,j].filter(Boolean).join(" ");await ub({fullName:tt||void 0,firstName1:b||void 0,lastName1:N||void 0,lastName2:j||void 0,phone:T||void 0,gender:_||void 0,dateOfBirth:h||void 0,identification:O||void 0,nationalityId:q||void 0,residenceCountryId:G||void 0,primaryLanguage:ke||void 0,timezone:ge||void 0}),y(!1)}catch(me){console.error(me)}finally{u(!1)}}async function hn(){if(!ee.trim()){alert("El nmero de licencia mdica es obligatorio");return}if(!Te){alert("El pas de la licencia mdica es obligatorio");return}try{u(!0);const me=await wH({licenseNumber:ee,licenseCountryId:Number(Te),yearsExperience:K?Number(K):void 0,bio:De||void 0});fe(me),k(!1),alert("Perfil profesional actualizado exitosamente")}catch(me){console.error(me);const tt=me.response?.data?.message||me.message||"Error al guardar el perfil profesional";alert(`Error: ${Array.isArray(tt)?tt.join(", "):tt}`)}finally{u(!1)}}function Ut(){if(r){I(r.phone??""),S(r.firstName1??""),E(r.lastName1??""),P(r.lastName2??"");const me=r.gender?.toLowerCase?.()||"undisclosed";A(["male","female","other","undisclosed"].includes(me)?me:"undisclosed");const tt=r?.dateOfBirth?String(r.dateOfBirth).slice(0,10):"";f(tt),M(r?.identification??""),z(r?.nationalityId??""),oe(r?.residenceCountryId??""),J(r?.primaryLanguage??""),U(r?.timezone??"")}y(!1)}function Is(){ie?(ye(ie.licenseNumber??""),ne(ie.licenseCountryId?.toString()??""),ce(ie.yearsExperience?.toString()??""),Fe(ie.bio??""),He(ie.specialties??[])):(ye(""),ne(""),ce(""),Fe(""),He([])),k(!1)}async function an(){if(_t(""),!W||!Re||!je){_t("Por favor completa todos los campos");return}if(Re.length<8){_t("La nueva contrasea debe tener al menos 8 caracteres");return}if(Re!==je){_t("Las contraseas no coinciden");return}try{be(!0),await hb(W,Re),re(""),Pe(""),ze(""),F(!1),alert("Contrasea actualizada exitosamente")}catch(me){_t(me.response?.data?.message||me.message||"Error al cambiar la contrasea")}finally{be(!1)}}async function yn(me){const tt=me.target.files?.[0];if(!tt)return;const Tr=10*1024*1024;if(tt.size>Tr){alert("El archivo es demasiado grande. El tamao mximo es 10MB."),me.target.value="";return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(tt.type)){alert("Formato de archivo no vlido. Solo se aceptan PDF, JPG y PNG."),me.target.value="";return}try{sn(!0);const Ds=new FormData;Ds.append("file",tt);const{data:va}=await Ue.post("/verification/upload-document",Ds,{headers:{"Content-Type":"multipart/form-data"}}),pe={id:va.fileId,name:tt.name,type:jn,uploadedAt:new Date().toISOString(),status:"pending",url:va.url};jr(lt=>[...lt,pe]),alert(`Documento "${tt.name}" subido exitosamente como ${fn(jn)}`)}catch(Ds){console.error("Error uploading document:",Ds);const va=Ds.response?.data?.message||Ds.message||"Error al subir el documento";alert(`Error al subir el documento: ${va}`)}finally{sn(!1),me.target.value=""}}function Os(me){confirm("Ests seguro de que deseas eliminar este documento?")&&jr(tt=>tt.filter(Tr=>Tr.id!==me))}function fn(me){return{license:"Licencia Mdica",diploma:"Diploma",certification:"Certificacin",other:"Otro"}[me]||me}function Ln(me){return me==="approved"?i.jsxs(Oe,{className:"bg-green-600",children:[i.jsx(Ks,{className:"h-3 w-3 mr-1"}),"Aprobado"]}):me==="rejected"?i.jsxs(Oe,{className:"bg-red-600",children:[i.jsx(js,{className:"h-3 w-3 mr-1"}),"Rechazado"]}):i.jsxs(Oe,{className:"bg-yellow-600",children:[i.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Pendiente"]})}async function xs(){try{Er(!0),await kH(Mn);const me=await Xf();fe(me),He(me.specialties??[]),it(!1),alert("Especialidades actualizadas exitosamente")}catch(me){console.error("Error al guardar especialidades:",me),alert("Error al guardar especialidades. Por favor intenta nuevamente.")}finally{Er(!1)}}function ur(me){$r(tt=>tt.includes(me)?tt.filter(Tr=>Tr!==me):[...tt,me])}async function ga(){if(pr.length===0){alert("Debes subir al menos un documento antes de enviar para verificacin");return}try{u(!0);const me=pr.map(Tr=>Tr.url);await Ue.post("/verification/submit",{CertificationDocuments:me,Notes:`Documentos de verificacin profesional. Tipos: ${pr.map(Tr=>fn(Tr.type)).join(", ")}`}),alert("Documentos enviados exitosamente! Tu solicitud de verificacin est siendo revisada por nuestro equipo. Recibirs una respuesta en un plazo de 48 horas."),jr([]);const tt=await Xf();fe(tt)}catch(me){console.error("Error al enviar verificacin:",me);const tt=me.response?.data?.message||me.message||"Error al enviar la verificacin";alert(`Error: ${Array.isArray(tt)?tt.join(", "):tt}`)}finally{u(!1)}}const Di=(r?.fullName?.[0]??r?.firstName1?.[0]??r?.email?.[0]??"D")?.toUpperCase?.()||"D";return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>t(n()),children:" Volver"}),i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Configuracin Profesional"})]}),i.jsxs(Dc,{defaultValue:"profile",className:"space-y-6",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-2",children:[i.jsx(Sn,{value:"profile",children:"Perfil Personal"}),i.jsx(Sn,{value:"professional",children:"Perfil Profesional"})]}),i.jsxs(Cn,{value:"profile",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),"Informacin Personal"]}),p?i.jsxs($,{variant:"outline",size:"sm",onClick:Ut,children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancelar"]}):i.jsxs($,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[i.jsx(jo,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),i.jsxs(he,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx(Oa,{className:"h-24 w-24",children:i.jsx(Da,{className:"text-2xl bg-primary/10 text-primary",children:Di})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs($,{variant:"outline",children:[i.jsx(Eb,{className:"h-4 w-4 mr-2"}),"Cambiar Foto"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG o GIF. Mximo 5MB."})]})]}),s?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando perfil..."}):a?i.jsx("div",{className:"text-sm text-red-600",children:"No se pudo cargar tu perfil."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"firstName",children:"Nombre"}),i.jsx(Ye,{id:"firstName",value:b,onChange:me=>S(me.target.value),placeholder:"Tu nombre",disabled:!p}),!b&&p&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"lastName1",children:"Primer Apellido"}),i.jsx(Ye,{id:"lastName1",value:N,onChange:me=>E(me.target.value),placeholder:"Primer apellido",disabled:!p}),!N&&p&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"lastName2",children:"Segundo Apellido"}),i.jsx(Ye,{id:"lastName2",value:j,onChange:me=>P(me.target.value),placeholder:"Segundo apellido (opcional)",disabled:!p})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"email",children:"Correo Electrnico"}),i.jsx(Ye,{id:"email",type:"email",value:r?.email??"",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"phone",children:"Telfono"}),i.jsx(Ye,{id:"phone",value:T,onChange:me=>I(me.target.value),placeholder:"+506 8888 8888",disabled:!p}),!T&&p&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"birthDate",children:"Fecha de Nacimiento"}),i.jsx(Ye,{id:"birthDate",type:"date",value:h,onChange:me=>f(me.target.value),disabled:!p})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"gender",children:"Gnero"}),i.jsxs(es,{value:_,onValueChange:me=>A(me),disabled:!p,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona un gnero"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"male",children:"Masculino"}),i.jsx(wt,{value:"female",children:"Femenino"}),i.jsx(wt,{value:"other",children:"Otro"}),i.jsx(wt,{value:"undisclosed",children:"Prefiero no decir"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"identification",children:"Nmero de Identificacin"}),i.jsx(Ye,{id:"identification",value:O,onChange:me=>M(me.target.value),placeholder:"504470462",disabled:!p})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"nationality",children:"Nacionalidad"}),i.jsxs(es,{value:q,onValueChange:me=>z(me),disabled:!p,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona tu nacionalidad",children:q?hu(q):"Selecciona tu nacionalidad"})}),i.jsx(rs,{children:jl.map(me=>i.jsx(wt,{value:me.id,children:me.name},me.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"residenceCountry",children:"Pas de Residencia"}),i.jsxs(es,{value:G,onValueChange:me=>oe(me),disabled:!p,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona tu pas de residencia",children:G?hu(G):"Selecciona tu pas de residencia"})}),i.jsx(rs,{children:jl.map(me=>i.jsx(wt,{value:me.id,children:me.name},me.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"primaryLanguage",children:"Idioma Primario"}),i.jsxs(es,{value:ke,onValueChange:me=>J(me),disabled:!p,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona un idioma"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"es",children:"Espaol"}),i.jsx(wt,{value:"en",children:"Ingls"}),i.jsx(wt,{value:"fr",children:"Francs"}),i.jsx(wt,{value:"pt",children:"Portugus"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"timezone",children:"Zona Horaria"}),i.jsxs(es,{value:ge,onValueChange:me=>U(me),disabled:!p,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona zona horaria"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"America/Costa_Rica",children:"Amrica/Costa Rica (UTC-6)"}),i.jsx(wt,{value:"America/Mexico_City",children:"Amrica/Ciudad de Mxico (UTC-6)"}),i.jsx(wt,{value:"America/New_York",children:"Amrica/Nueva York (UTC-5)"}),i.jsx(wt,{value:"America/Los_Angeles",children:"Amrica/Los ngeles (UTC-8)"}),i.jsx(wt,{value:"Europe/Madrid",children:"Europa/Madrid (UTC+1)"})]})]})]})]}),p&&i.jsxs($,{className:"w-full sm:w-auto",onClick:Qt,disabled:l||s,children:[i.jsx(_m,{className:"h-4 w-4 mr-2"}),l?"Guardando...":"Guardar Cambios"]})]})]}),i.jsxs(ue,{children:[i.jsx($e,{onClick:()=>F(!Ht),className:"cursor-pointer select-none",children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tb,{className:"h-5 w-5"}),"Cambiar Contrasea"]}),Ht?i.jsx(od,{className:"h-5 w-5"}):i.jsx(Ic,{className:"h-5 w-5"})]})}),Ht&&i.jsxs(he,{className:"space-y-4",children:[mt&&i.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:i.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[i.jsx(Bn,{className:"h-4 w-4"}),mt]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"currentPassword",children:"Contrasea Actual"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"currentPassword",type:pt?"text":"password",placeholder:"",value:W,onChange:me=>re(me.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>jt(!pt),children:pt?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"newPassword",children:"Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"newPassword",type:Kn?"text":"password",placeholder:"",value:Re,onChange:me=>Pe(me.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>ht(!Kn),children:Kn?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Mnimo 8 caracteres"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"confirmPassword",children:"Confirmar Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"confirmPassword",type:qt?"text":"password",placeholder:"",value:je,onChange:me=>ze(me.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>vs(!qt),children:qt?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsx($,{onClick:an,disabled:dt,children:dt?"Actualizando...":"Actualizar Contrasea"})]})]})]}),i.jsxs(Cn,{value:"professional",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(x8,{className:"h-5 w-5"}),"Informacin Profesional"]}),x?i.jsxs($,{variant:"outline",size:"sm",onClick:Is,children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancelar"]}):i.jsxs($,{variant:"outline",size:"sm",onClick:()=>k(!0),children:[i.jsx(jo,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),i.jsxs(he,{className:"space-y-6",children:[B?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando perfil profesional..."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(_e,{htmlFor:"licenseNumber",className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-4 w-4"}),"Nmero de Licencia Mdica"]}),i.jsx(Ye,{id:"licenseNumber",value:ee,onChange:me=>ye(me.target.value),placeholder:"MED-12345",disabled:!x}),!ee&&x&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Campo obligatorio"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(_e,{htmlFor:"licenseCountry",className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-4 w-4"}),"Pas de Licencia Mdica"]}),i.jsxs(es,{value:Te,onValueChange:me=>ne(me),disabled:!x,children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona el pas",children:Te?hu(Te):"Selecciona el pas"})}),i.jsx(rs,{children:jl.map(me=>i.jsx(wt,{value:me.id,children:me.name},me.id))})]}),!Te&&x&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Campo obligatorio"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(_e,{htmlFor:"yearsExperience",className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"h-4 w-4"}),"Aos de Experiencia"]}),i.jsx(Ye,{id:"yearsExperience",type:"number",value:K,onChange:me=>ce(me.target.value),placeholder:"10",disabled:!x})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(_e,{className:"flex items-center gap-2",children:[i.jsx(Ul,{className:"h-4 w-4"}),"Especialidades"]}),!Vr&&i.jsxs($,{variant:"outline",size:"sm",onClick:()=>it(!0),disabled:x,children:[i.jsx(jo,{className:"h-3 w-3 mr-2"}),"Editar"]})]}),Vr?i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"p-4 border rounded-lg max-h-60 overflow-y-auto",children:Br.length===0?i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando especialidades..."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Br.map(me=>i.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-accent rounded cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Mn.includes(String(me.Id)),onChange:()=>ur(String(me.Id)),className:"rounded"}),i.jsx("span",{className:"text-sm",children:me.Name})]},me.Id))})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{onClick:xs,disabled:gr,size:"sm",children:gr?"Guardando...":"Guardar Especialidades"}),i.jsx($,{variant:"outline",onClick:()=>{$r(Xe.map(me=>String(me.Id))),it(!1)},size:"sm",children:"Cancelar"})]})]}):i.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[Xe.map(me=>i.jsx(Oe,{variant:"secondary",children:me.Name},me.Id)),Xe.length===0&&i.jsx("p",{className:"text-sm text-muted-foreground",children:'No hay especialidades agregadas. Haz clic en "Editar" para agregar.'})]})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsx(_e,{htmlFor:"bio",children:"Biografa Profesional"}),i.jsx(qm,{id:"bio",value:De,onChange:me=>Fe(me.target.value),placeholder:"Describe tu experiencia, reas de inters, y enfoque en la atencin mdica...",rows:6,disabled:!x}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Esta informacin ser visible para los pacientes"})]})]}),x&&i.jsxs($,{className:"w-full sm:w-auto",onClick:hn,disabled:l,children:[i.jsx(_m,{className:"h-4 w-4 mr-2"}),l?"Guardando...":"Guardar Cambios"]})]})]}),!B&&ie&&i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-5 w-5"}),"Estado de Verificacin"]})}),i.jsx(he,{children:i.jsxs("div",{className:"space-y-4",children:[ie.verificationStatus==="approved"?i.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Ks,{className:"h-6 w-6 text-green-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-900",children:"Verificacin Aprobada"}),i.jsx("p",{className:"text-sm text-green-700",children:"Tu perfil profesional ha sido verificado"})]})]}),i.jsx(Oe,{className:"bg-green-600",children:"Verificado"})]}):ie.verificationStatus==="pending"?i.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(Bn,{className:"h-6 w-6 text-yellow-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-yellow-900",children:"Verificacin Pendiente"}),i.jsx("p",{className:"text-sm text-yellow-700",children:"Tu perfil est siendo revisado"})]})]}),i.jsx(Oe,{className:"bg-yellow-600",children:"Pendiente"})]}):i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:i.jsx(Bn,{className:"h-6 w-6 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Sin Verificar"}),i.jsx("p",{className:"text-sm text-gray-700",children:"Completa tu perfil para iniciar verificacin"})]})]}),i.jsx(Oe,{variant:"secondary",children:"Sin Verificar"})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:i.jsx("p",{children:ie.verificationStatus==="approved"?"Tu licencia mdica y credenciales han sido verificadas por nuestro equipo. Si necesitas actualizar algn documento, contacta con soporte.":"Nuestro equipo revisar tu informacin profesional. Este proceso puede tardar hasta 48 horas."})})]})})]}),!B&&i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Rm,{className:"h-5 w-5"}),"Documentos de Verificacin"]})}),i.jsxs(he,{className:"space-y-6",children:[ie?.verificationStatus==="approved"&&i.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ks,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"Perfil Verificado"}),i.jsx("p",{className:"text-sm text-green-700",children:"Tu perfil ha sido verificado exitosamente. Los documentos estn bloqueados y no pueden ser modificados o eliminados. Si necesitas actualizar algn documento, por favor contacta con soporte."})]})]})}),ie?.verificationStatus!=="approved"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Documentos requeridos para verificacin"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Licencia mdica vigente (obligatorio)"}),i.jsx("li",{children:"Diploma de ttulo mdico (obligatorio)"}),i.jsx("li",{children:"Certificaciones de especialidades (opcional)"}),i.jsx("li",{children:"Otros documentos relevantes (opcional)"})]}),i.jsx("p",{className:"text-xs text-blue-600 mt-3",children:"Formatos aceptados: PDF, JPG, PNG. Tamao mximo: 10MB por archivo."})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"document-type",children:"Tipo de Documento"}),i.jsxs(es,{value:jn,onValueChange:me=>ys(me),children:[i.jsx(ns,{children:i.jsx(ts,{placeholder:"Selecciona el tipo"})}),i.jsxs(rs,{children:[i.jsx(wt,{value:"license",children:"Licencia Mdica"}),i.jsx(wt,{value:"diploma",children:"Diploma"}),i.jsx(wt,{value:"certification",children:"Certificacin"}),i.jsx(wt,{value:"other",children:"Otro"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"document-upload",children:"Seleccionar Archivo"}),i.jsx(Ye,{id:"document-upload",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:yn,disabled:un,className:"text-sm"})]})]})}),un&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),"Subiendo documento..."]})]}),(pr.length>0||o?.CertificationDocuments&&o.CertificationDocuments.length>0)&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Documentos subidos"}),i.jsx("div",{className:"space-y-2",children:o?.CertificationDocuments&&o.CertificationDocuments.length>0?o.CertificationDocuments.map((me,tt)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(nn,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Documento ",tt+1]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Oe,{variant:"outline",className:"text-xs",children:"Documento de Verificacin"}),o.SubmittedAt&&i.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(o.SubmittedAt).toLocaleDateString("es-ES")})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ln(o.VerificationStatus||"pending"),i.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(me,"_blank"),children:i.jsx(Gs,{className:"h-4 w-4"})})]})]},tt)):pr.map(me=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(nn,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:me.name}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Oe,{variant:"outline",className:"text-xs",children:fn(me.type)}),i.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(me.uploadedAt).toLocaleDateString("es-ES")})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ln(me.status),me.url&&i.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(me.url,"_blank"),children:i.jsx(Gs,{className:"h-4 w-4"})}),ie?.verificationStatus!=="approved"&&i.jsx($,{variant:"outline",size:"sm",onClick:()=>Os(me.id),children:i.jsx(Nu,{className:"h-4 w-4 text-red-600"})})]})]},me.id))})]}),pr.length===0&&(!o?.CertificationDocuments||o.CertificationDocuments.length===0)&&i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(nn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No has subido documentos de verificacin an"}),i.jsx("p",{className:"text-xs mt-1",children:"Sube tus documentos para iniciar el proceso de verificacin"})]}),pr.length>0&&ie?.verificationStatus!=="approved"&&i.jsxs("div",{className:"pt-4 border-t",children:[i.jsxs($,{className:"w-full",size:"lg",onClick:ga,children:[i.jsx(Ks,{className:"h-5 w-5 mr-2"}),"Enviar para Verificacin"]}),i.jsx("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"Un miembro de nuestro equipo revisar tus documentos en un plazo de 48 horas"})]})]})]})]})]}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cerrar Sesin"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cierra la sesin en este dispositivo"})]}),i.jsxs($,{variant:"outline",onClick:e,children:[i.jsx(_b,{className:"h-4 w-4 mr-2"}),"Cerrar Sesin"]})]})})})]})})}function xW({onLogout:e}){const{user:t}=da(),{data:n,isLoading:r}=Yp();return r||!n?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx("p",{className:"text-muted-foreground",children:"Cargando configuracin..."})}):(t?.role||n?.role)==="DOCTOR"?i.jsx(yW,{onLogout:e}):i.jsx(QH,{onLogout:e})}function bW(){const e=Rt(),{getDashboardRoute:t}=da(),[n,r]=g.useState("basic"),s=[{id:"free",name:"Gratuito",price:0,billing:"Siempre gratis",description:"Perfecto para uso ocasional",features:["1 consulta por mes","Videollamadas bsicas","Chat con traduccin","Historial bsico","Soporte por email"],limitations:["Sin grabacin de consultas","Sin anlisis mdicos","Sin soporte prioritario"],color:"border-gray-200",popular:!1},{id:"basic",name:"Bsico",price:29,billing:"por mes",description:"Ideal para cuidado mdico regular",features:["5 consultas por mes","Videollamadas HD","Traduccin en tiempo real","Historial mdico completo","Recetas digitales","Anlisis bsicos","Soporte prioritario"],limitations:["Sin consultas ilimitadas","Sin especialistas premium"],color:"border-primary",popular:!0},{id:"premium",name:"Premium",price:79,billing:"por mes",description:"Acceso completo a todos los servicios",features:["Consultas ilimitadas","Videollamadas 4K","Traduccin AI avanzada","Grabacin de consultas","Especialistas premium","Anlisis completos","Soporte 24/7","Consultas de emergencia","Planes familiares"],limitations:[],color:"border-yellow-400",popular:!1}],a=[{id:1,date:"2024-09-01",description:"Plan Bsico - Septiembre 2024",amount:29,status:"paid",invoice:"INV-2024-09-001"},{id:2,date:"2024-08-01",description:"Plan Bsico - Agosto 2024",amount:29,status:"paid",invoice:"INV-2024-08-001"},{id:3,date:"2024-07-01",description:"Plan Bsico - Julio 2024",amount:29,status:"paid",invoice:"INV-2024-07-001"},{id:4,date:"2024-06-15",description:"Consulta adicional - Dr. Garca",amount:15,status:"paid",invoice:"INV-2024-06-015"}],o=[{doctor:"Dr. Ana Garca",specialty:"Cardiologa",date:"2024-08-15",type:"videollamada",amount:60,covered:!0},{doctor:"Dr. Luis Chen",specialty:"Medicina General",date:"2024-08-10",type:"presencial",amount:50,covered:!0},{doctor:"Dr. Mara Gonzlez",specialty:"Dermatologa",date:"2024-08-05",type:"videollamada",amount:65,covered:!0}],l=s.find(u=>u.id==="basic");return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>e(t()),children:" Volver"}),i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Pagos y Facturacin"})]}),i.jsxs(Dc,{defaultValue:"subscription",className:"space-y-6",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-4",children:[i.jsx(Sn,{value:"subscription",children:"Suscripcin"}),i.jsx(Sn,{value:"plans",children:"Cambiar Plan"}),i.jsx(Sn,{value:"history",children:"Historial"}),i.jsx(Sn,{value:"usage",children:"Uso"})]}),i.jsxs(Cn,{value:"subscription",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(_P,{className:"h-5 w-5 text-primary"}),"Plan Actual"]})}),i.jsx(he,{children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:l?.name}),i.jsx("p",{className:"text-muted-foreground",children:l?.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Oe,{className:"bg-green-100 text-green-800",children:"Activo"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Renovacin automtica el 1 de octubre, 2024"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold",children:["",l?.price]}),i.jsx("p",{className:"text-muted-foreground",children:l?.billing})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(ue,{children:i.jsxs(he,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultas Usadas"}),i.jsx("p",{className:"text-2xl font-bold",children:"3 / 5"})]}),i.jsx(vi,{className:"h-8 w-8 text-primary"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:i.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:"60%"}})})]})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prximo Pago"}),i.jsx("p",{className:"text-lg font-bold",children:"1 Oct 2024"})]}),i.jsx(Bt,{className:"h-8 w-8 text-primary"})]})})}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Ahorrado este mes"}),i.jsx("p",{className:"text-lg font-bold text-green-600",children:"45"})]}),i.jsx(Cu,{className:"h-8 w-8 text-green-600"})]})})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Beneficios Incluidos"})}),i.jsx(he,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l?.features.map((u,h)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ws,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm",children:u})]},h))})})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>r("plans"),children:"Cambiar Plan"}),i.jsx($,{variant:"outline",children:"Cancelar Suscripcin"}),i.jsx($,{variant:"outline",children:"Gestionar Pago"})]})]}),i.jsxs(Cn,{value:"plans",className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Elige el Plan Perfecto para Ti"}),i.jsx("p",{className:"text-muted-foreground",children:"Todos los planes incluyen traduccin automtica y acceso 24/7"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map(u=>i.jsxs(ue,{className:`relative ${u.color} ${u.popular?"ring-2 ring-primary":""}`,children:[u.popular&&i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:i.jsxs(Oe,{className:"bg-primary px-3 py-1",children:[i.jsx(L7,{className:"h-3 w-3 mr-1"}),"Ms Popular"]})}),i.jsxs($e,{className:"text-center pb-4",children:[i.jsx(qe,{className:"text-xl",children:u.name}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsxs("span",{className:"text-3xl font-bold",children:["",u.price]}),u.price>0&&i.jsxs("span",{className:"text-muted-foreground",children:["/",u.billing.split(" ")[1]]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.billing})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]}),i.jsxs(he,{className:"space-y-4",children:[i.jsx("div",{className:"space-y-2",children:u.features.map((h,f)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Ws,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),i.jsx("span",{children:h})]},f))}),i.jsx($,{className:"w-full",variant:u.id==="basic"?"default":"outline",disabled:u.id==="basic",children:u.id==="basic"?"Plan Actual":`Cambiar a ${u.name}`})]})]},u.id))}),i.jsx(ue,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:i.jsx(X8,{className:"h-6 w-6 text-purple-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-purple-900",children:"Oferta Especial!"}),i.jsx("p",{className:"text-purple-700",children:"Consigue 2 meses gratis al cambiar al plan Premium anual"})]}),i.jsx($,{className:"bg-purple-600 hover:bg-purple-700",children:"Aprovechar Oferta"})]})})})]}),i.jsxs(Cn,{value:"history",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(qe,{children:"Historial de Pagos"}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})}),i.jsx(he,{children:i.jsx("div",{className:"space-y-4",children:a.map(u=>i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:i.jsx(Su,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:u.description}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.date})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold",children:["",u.amount.toFixed(2)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Oe,{className:"bg-green-100 text-green-800",children:[i.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Pagado"]}),i.jsxs($,{variant:"outline",size:"sm",children:[i.jsx(Gs,{className:"h-3 w-3 mr-1"}),"PDF"]})]})]})]},u.id))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(ue,{children:i.jsxs(he,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Gastado"}),i.jsx("p",{className:"text-2xl font-bold",children:"133.00"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En los ltimos 6 meses"})]})}),i.jsx(ue,{children:i.jsxs(he,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Promedio Mensual"}),i.jsx("p",{className:"text-2xl font-bold",children:"22.17"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"ltimos 6 meses"})]})}),i.jsx(ue,{children:i.jsxs(he,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Prximo Pago"}),i.jsx("p",{className:"text-2xl font-bold",children:"29.00"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"1 de octubre"})]})})]})]}),i.jsxs(Cn,{value:"usage",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Detalles de Uso - Septiembre 2024"})}),i.jsx(he,{children:i.jsx("div",{className:"space-y-4",children:o.map((u,h)=>i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:i.jsx(vi,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:u.doctor}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.specialty,"  ",u.date,"  ",u.type]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold",children:["",u.amount.toFixed(2)]}),i.jsx(Oe,{className:"bg-green-100 text-green-800",children:"Incluido en plan"})]})]},h))})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Resumen del Mes"})}),i.jsxs(he,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Consultas realizadas"}),i.jsx("span",{className:"font-semibold",children:"3"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Valor total de consultas"}),i.jsx("span",{className:"font-semibold",children:"175.00"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Costo del plan"}),i.jsx("span",{className:"font-semibold",children:"29.00"})]}),i.jsx("hr",{}),i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{className:"font-semibold",children:"Ahorro total"}),i.jsx("span",{className:"font-semibold",children:"146.00"})]})]})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Servicios Utilizados"})}),i.jsxs(he,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vi,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"Videollamadas"})]}),i.jsx("span",{className:"text-sm font-medium",children:"3 / 5"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pm,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"Traduccin automtica"})]}),i.jsx("span",{className:"text-sm font-medium",children:"Ilimitado"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"Recetas digitales"})]}),i.jsx("span",{className:"text-sm font-medium",children:"2"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wx,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"Historial mdico"})]}),i.jsx("span",{className:"text-sm font-medium",children:"Activo"})]})]})]})]})]})]})]})})}function tn({children:e,isAllowed:t,redirectTo:n="/"}){return t?i.jsx(i.Fragment,{children:e}):i.jsx(o2,{to:n,replace:!0})}function wW(){const e=Rt();return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs(ue,{className:"max-w-md w-full",children:[i.jsxs($e,{className:"text-center",children:[i.jsx(qe,{className:"text-6xl font-bold text-primary",children:"404"}),i.jsx(Yi,{className:"text-xl mt-2",children:"Pgina no encontrada"})]}),i.jsxs(he,{className:"text-center space-y-4",children:[i.jsx("p",{className:"text-muted-foreground",children:"Lo sentimos, la pgina que ests buscando no existe o ha sido movida."}),i.jsx($,{onClick:()=>e("/"),className:"w-full",children:"Volver al inicio"})]})]})})}function Rf({children:e}){const t=Rt(),n=Pi(),[r,s]=g.useState(!0),[a,o]=g.useState(!1);return g.useEffect(()=>{if(n.pathname==="/settings"){s(!1),o(!0);return}(async()=>{try{(await jR()).VerificationStatus==="approved"?o(!0):(console.log("[DoctorVerificationGuard] Doctor not approved, redirecting to /settings"),t("/settings",{replace:!0}))}catch(u){console.error("[DoctorVerificationGuard] Error checking verification:",u),t("/settings",{replace:!0})}finally{s(!1)}})()},[n.pathname,t]),r?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx(rn,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),i.jsx("p",{className:"text-muted-foreground",children:"Verificando permisos..."})]})}):n.pathname==="/settings"||a?i.jsx(i.Fragment,{children:e}):null}function Rn({className:e,...t}){return i.jsx("div",{"data-slot":"skeleton",className:St("bg-accent animate-pulse rounded-md",e),...t})}const kW=e=>`/medical-records/patient/${e}`,SW=e=>`/medical-records/${e}`;async function CW(e){try{const{data:t}=await Ue.get(kW(e));return Array.isArray(t)?t:[]}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para ver estos historiales mdicos");if(n===404)throw new Error("Paciente no encontrado");const r=t?.response?.data?.message??t?.message??"No se pudieron cargar los historiales mdicos";throw new Error(String(r))}}async function NW(){try{const{data:e}=await Ue.get("/users/me"),t=e.UserId||e.userId;if(!t)throw new Error("No se pudo obtener el ID del usuario");return await CW(t)}catch(e){const t=e?.response?.data?.message??e?.message??"No se pudieron cargar tus historiales mdicos";throw new Error(String(t))}}async function jW(e){try{const{data:t}=await Ue.get(SW(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para ver este historial mdico");if(n===404)throw new Error("Historial mdico no encontrado");const r=t?.response?.data?.message??t?.message??"No se pudo cargar el historial mdico";throw new Error(String(r))}}function EW(){return Jt({queryKey:["medical-records","mine"],queryFn:NW,staleTime:300*1e3})}function TW(e){return Jt({queryKey:["medical-records","detail",e],queryFn:()=>{if(!e)throw new Error("Record ID is required");return jW(e)},enabled:!!e,staleTime:300*1e3})}function PW(){const e=Rt(),{user:t}=da(),[n,r]=g.useState(""),{data:s,isLoading:a,error:o}=EW(),l=s?.filter(u=>{const h=n.toLowerCase();return u.Diagnosis?.toLowerCase().includes(h)||u.Doctor?.FirstName.toLowerCase().includes(h)||u.Doctor?.LastName1.toLowerCase().includes(h)||u.Doctor?.LicenseNumber?.toLowerCase().includes(h)});return a?i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(Rn,{className:"h-8 w-64"})}),i.jsxs(he,{children:[i.jsx(Rn,{className:"h-24 w-full mb-4"}),i.jsx(Rn,{className:"h-24 w-full mb-4"}),i.jsx(Rn,{className:"h-24 w-full"})]})]})}):o?i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsxs(aa,{children:["Error al cargar el historial mdico: ",o.message]})]})}):i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(qe,{className:"text-2xl",children:"Mi Historial Mdico"}),i.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.jsx(Pb,{className:"inline h-3 w-3 mr-1"}),"Informacin confidencial cifrada AES-256"]})]}),i.jsx($,{onClick:()=>e(-1),variant:"outline",children:"Volver"})]})}),i.jsxs(he,{children:[i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),i.jsx(Ye,{placeholder:"Buscar por diagnstico, doctor...",value:n,onChange:u=>r(u.target.value),className:"pl-10"})]})}),!l||l.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nn,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:n?"No se encontraron registros":"Sin historial mdico"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Intenta con otros trminos de bsqueda":"Tus registros mdicos aparecern aqu despus de tus consultas"})]}):i.jsx("div",{className:"space-y-4",children:l.map(u=>i.jsx(ue,{className:"hover:shadow-md transition-shadow",children:i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:[u.Doctor?.FirstName," ",u.Doctor?.LastName1]}),u.Doctor?.LicenseNumber&&i.jsx(Oe,{variant:"secondary",className:"text-xs",children:u.Doctor.LicenseNumber})]}),i.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Bt,{className:"h-4 w-4"}),new Date(u.CreatedAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})})]}),i.jsxs($,{variant:"ghost",size:"sm",onClick:()=>e(`/medical-records/${u.RecordId}`),children:[i.jsx(Qf,{className:"h-4 w-4 mr-1"}),"Ver detalles"]})]}),u.Diagnosis&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Ib,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"text-sm font-medium",children:"Diagnstico:"})]}),i.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:u.Diagnosis})]}),u.Files&&u.Files.length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsxs("span",{className:"text-sm font-medium",children:["Archivos adjuntos (",u.Files.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:u.Files.map((h,f)=>i.jsxs(Oe,{variant:"outline",className:"cursor-pointer",children:[i.jsx(Gs,{className:"h-3 w-3 mr-1"}),"Archivo ",f+1]},f))})]})]})},u.RecordId))})]})]})})}function _W(){const{recordId:e}=xp(),t=Rt(),{data:n,isLoading:r,error:s}=TW(e);return r?i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ue,{children:[i.jsxs($e,{children:[i.jsx(Rn,{className:"h-8 w-64 mb-2"}),i.jsx(Rn,{className:"h-4 w-96"})]}),i.jsxs(he,{className:"space-y-6",children:[i.jsx(Rn,{className:"h-32 w-full"}),i.jsx(Rn,{className:"h-32 w-full"}),i.jsx(Rn,{className:"h-32 w-full"})]})]})}):s?i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsxs(aa,{children:["Error al cargar el registro mdico: ",s.message]})]}),i.jsx("div",{className:"mt-4",children:i.jsxs($,{onClick:()=>t(-1),variant:"outline",children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Volver"]})})]}):n?i.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs($,{onClick:()=>t(-1),variant:"ghost",className:"mb-4",children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Volver al historial"]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Detalle de Registro Mdico"}),i.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(Pb,{className:"h-3 w-3"}),"Informacin confidencial cifrada AES-256"]})]}),i.jsxs(Oe,{variant:"outline",className:"text-sm",children:["ID: ",n.RecordId]})]})]}),i.jsxs(ue,{className:"mb-6",children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),"Informacin del Doctor"]})}),i.jsx(he,{className:"space-y-3",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Nombre Completo"}),i.jsxs("p",{className:"font-medium",children:[n.Doctor?.FirstName," ",n.Doctor?.LastName1,n.Doctor?.LastName2&&` ${n.Doctor.LastName2}`]})]}),n.Doctor?.Email&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[i.jsx(Ll,{className:"h-3 w-3"}),"Email"]}),i.jsx("p",{className:"font-medium",children:n.Doctor.Email})]}),n.Doctor?.LicenseNumber&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[i.jsx(Hx,{className:"h-3 w-3"}),"Nmero de Licencia"]}),i.jsx(Oe,{variant:"secondary",children:n.Doctor.LicenseNumber})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[i.jsx(Bt,{className:"h-3 w-3"}),"Fecha de Consulta"]}),i.jsx("p",{className:"font-medium",children:new Date(n.CreatedAt).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[n.Diagnosis&&i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Ib,{className:"h-5 w-5 text-primary"}),"Diagnstico"]})}),i.jsx(he,{children:i.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.Diagnosis})})]}),n.Prescriptions&&i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2 text-lg",children:[i.jsx(U8,{className:"h-5 w-5 text-blue-600"}),"Prescripciones"]})}),i.jsx(he,{children:i.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.Prescriptions})})]}),n.Recommendations&&i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2 text-lg",children:[i.jsx(o7,{className:"h-5 w-5 text-yellow-600"}),"Recomendaciones"]})}),i.jsx(he,{children:i.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.Recommendations})})]}),n.Files&&n.Files.length>0&&i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2 text-lg",children:[i.jsx(nn,{className:"h-5 w-5 text-green-600"}),"Archivos Adjuntos (",n.Files.length,")"]})}),i.jsx(he,{children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:n.Files.map((a,o)=>i.jsxs($,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(a,"_blank"),children:[i.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Archivo ",o+1]},o))})})]}),!n.Diagnosis&&!n.Prescriptions&&!n.Recommendations&&(!n.Files||n.Files.length===0)&&i.jsx(ue,{children:i.jsxs(he,{className:"py-12 text-center text-muted-foreground",children:[i.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay informacin mdica detallada en este registro"})]})})]}),i.jsx(pR,{className:"my-6"}),i.jsxs("div",{className:"flex gap-3 justify-end",children:[i.jsxs($,{onClick:()=>t(-1),variant:"outline",children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Volver al historial"]}),i.jsxs($,{onClick:()=>window.print(),children:[i.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Imprimir / Exportar PDF"]})]})]}):i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsx(aa,{children:"Registro mdico no encontrado"})]}),i.jsx("div",{className:"mt-4",children:i.jsxs($,{onClick:()=>t(-1),variant:"outline",children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Volver"]})})]})}const RW={UPLOAD:"/files"};function AW(e,t){const n=new FormData;return n.append("file",e),Ue.post(RW.UPLOAD,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r=>{if(!t||!r.total)return;const s=Math.round(r.loaded*100/r.total);t(s)}}).then(({data:r})=>({file:r?.data??r}))}function IW(){return Sr({mutationKey:["files","upload"],mutationFn:async({file:e,onProgress:t})=>AW(e,t)})}function OW(){const[e,t]=g.useState([]),[n,r]=g.useState(""),[s,a]=g.useState([]),{data:o,isLoading:l,refetch:u}=ER(),h=gW(),f=IW(),p=b=>{const S=Array.from(b.target.files||[]);if(e.length+S.length>10){ut.error("Mximo 10 documentos permitidos");return}t([...e,...S])},y=b=>{t(e.filter((S,N)=>N!==b))},x=async()=>{if(e.length===0){ut.error("Debes subir al menos 1 documento");return}try{ut.info("Subiendo documentos...");const b=[];for(const S of e){const N=await f.mutateAsync({file:S});b.push(N.file.Url)}a(b),await h.mutateAsync({CertificationDocuments:b,Notes:n}),ut.success("Documentos enviados exitosamente"),t([]),r(""),u()}catch(b){ut.error(b.message||"Error al enviar documentos")}};if(l)return i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(Rn,{className:"h-8 w-64"})}),i.jsx(he,{children:i.jsx(Rn,{className:"h-40 w-full"})})]})});const k=b=>{switch(b){case"approved":return i.jsxs(Oe,{className:"bg-green-500",children:[i.jsx(Ks,{className:"h-3 w-3 mr-1"}),"Verificado"]});case"rejected":return i.jsxs(Oe,{variant:"destructive",children:[i.jsx(js,{className:"h-3 w-3 mr-1"}),"Rechazado"]});case"pending":default:return i.jsxs(Oe,{variant:"secondary",children:[i.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Pendiente"]})}};return i.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx(qe,{className:"text-2xl",children:"Verificacin de Doctor"}),i.jsx(Yi,{className:"mt-2",children:"Sube tus documentos de certificacin para ser verificado en la plataforma"})]}),o&&k(o.VerificationStatus)]})}),i.jsxs(he,{className:"space-y-6",children:[o&&o.SubmittedAt&&i.jsxs(ia,{children:[i.jsx($a,{className:"h-4 w-4"}),i.jsxs(aa,{children:[o.VerificationStatus==="pending"&&i.jsxs(i.Fragment,{children:["Tu solicitud est siendo revisada. Enviada el"," ",new Date(o.SubmittedAt).toLocaleDateString()]}),o.VerificationStatus==="approved"&&i.jsxs(i.Fragment,{children:["Felicitaciones! Tu cuenta ha sido verificada el"," ",o.VerifiedAt&&new Date(o.VerifiedAt).toLocaleDateString(),o.AdminNotes&&i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("strong",{children:"Notas:"})," ",o.AdminNotes]})]}),o.VerificationStatus==="rejected"&&i.jsxs(i.Fragment,{children:["Tu solicitud fue rechazada.",o.RejectionReason&&i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("strong",{children:"Razn:"})," ",o.RejectionReason]}),i.jsx("div",{className:"mt-2 text-sm",children:"Por favor, corrige los problemas y vuelve a enviar tus documentos."})]})]})]}),(!o||o.VerificationStatus!=="approved")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Documentos de Certificacin (1-10 archivos)"}),i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[i.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:!0,onChange:p,disabled:e.length>=10}),i.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center",children:[i.jsx(Rm,{className:"h-10 w-10 text-muted-foreground mb-2"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Haz clic para subir o arrastra archivos aqu"}),i.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"PDF, JPG, PNG (mximo 10 archivos)"})]})]}),e.length>0&&i.jsx("div",{className:"mt-4 space-y-2",children:e.map((b,S)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:b.name}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(b.size/1024).toFixed(1)," KB)"]})]}),i.jsx($,{variant:"ghost",size:"sm",onClick:()=>y(S),children:i.jsx(js,{className:"h-4 w-4"})})]},S))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notas adicionales (opcional)"}),i.jsx(qm,{placeholder:"Ej: Licencia mdica vigente hasta 2030. Especialidad en medicina interna.",value:n,onChange:b=>r(b.target.value),rows:4})]}),i.jsx($,{onClick:x,disabled:e.length===0||h.isPending||f.isPending,className:"w-full",children:h.isPending||f.isPending?i.jsx(i.Fragment,{children:"Enviando..."}):i.jsxs(i.Fragment,{children:[i.jsx(Rm,{className:"h-4 w-4 mr-2"}),"Enviar Documentos"]})})]}),o?.CertificationDocuments&&o.CertificationDocuments.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Documentos enviados"}),i.jsx("div",{className:"space-y-2",children:o.CertificationDocuments.map((b,S)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsxs("span",{className:"text-sm",children:["Documento ",S+1]})]}),i.jsx($,{variant:"ghost",size:"sm",asChild:!0,children:i.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",children:i.jsx(Gs,{className:"h-4 w-4"})})})]},S))})]})]})]})})}var NN={};function DW(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}var MW=Object.defineProperty,LW=(e,t,n)=>t in e?MW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jN=(e,t,n)=>LW(e,typeof t!="symbol"?t+"":t,n);class hs{constructor(){jN(this,"_locking"),jN(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(s=>t=()=>{this._locks-=1,s()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}}function wn(e,t){if(!e)throw new Error(t)}const FW=34028234663852886e22,UW=-34028234663852886e22,zW=4294967295,BW=2147483647,$W=-2147483648;function em(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>BW||e<$W)throw new Error("invalid int 32: "+e)}function Xx(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>zW||e<0)throw new Error("invalid uint 32: "+e)}function TR(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>FW||e<UW))throw new Error("invalid float 32: "+e)}const PR=Symbol("@bufbuild/protobuf/enum-type");function VW(e){const t=e[PR];return wn(t,"missing enum type on enum object"),t}function _R(e,t,n,r){e[PR]=RR(t,n.map(s=>({no:s.no,name:s.name,localName:e[s.no]})))}function RR(e,t,n){const r=Object.create(null),s=Object.create(null),a=[];for(const o of t){const l=AR(o);a.push(l),r[o.name]=l,s[o.no]=l}return{typeName:e,values:a,findName(o){return r[o]},findNumber(o){return s[o]}}}function qW(e,t,n){const r={};for(const s of t){const a=AR(s);r[a.localName]=a.no,r[a.no]=a.localName}return _R(r,e,t),r}function AR(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class nw{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const r=this.getType(),s=r.runtime.bin,a=s.makeReadOptions(n);return s.readMessage(this,a.readerFactory(t),t.byteLength,a),this}fromJson(t,n){const r=this.getType(),s=r.runtime.json,a=s.makeReadOptions(n);return s.readMessage(r,t,a,this),this}fromJsonString(t,n){let r;try{r=JSON.parse(t)}catch(s){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(s instanceof Error?s.message:String(s)))}return this.fromJson(r,n)}toBinary(t){const n=this.getType(),r=n.runtime.bin,s=r.makeWriteOptions(t),a=s.writerFactory();return r.writeMessage(this,a,s),a.finish()}toJson(t){const n=this.getType(),r=n.runtime.json,s=r.makeWriteOptions(t);return r.writeMessage(this,s)}toJsonString(t){var n;const r=this.toJson(t);return JSON.stringify(r,null,(n=t?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function HW(e,t,n,r){var s;const a=(s=r?.localName)!==null&&s!==void 0?s:t.substring(t.lastIndexOf(".")+1),o={[a]:function(l){e.util.initFields(this),e.util.initPartial(l,this)}}[a];return Object.setPrototypeOf(o.prototype,new nw),Object.assign(o,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(l,u){return new o().fromBinary(l,u)},fromJson(l,u){return new o().fromJson(l,u)},fromJsonString(l,u){return new o().fromJsonString(l,u)},equals(l,u){return e.util.equals(o,l,u)}}),o}function WW(){let e=0,t=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Fy(e,t,n){for(let a=0;a<28;a=a+7){const o=e>>>a,l=!(!(o>>>7)&&t==0),u=(l?o|128:o)&255;if(n.push(u),!l)return}const r=e>>>28&15|(t&7)<<4,s=t>>3!=0;if(n.push((s?r|128:r)&255),!!s){for(let a=3;a<31;a=a+7){const o=t>>>a,l=!!(o>>>7),u=(l?o|128:o)&255;if(n.push(u),!l)return}n.push(t>>>31&1)}}const tm=4294967296;function EN(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,s=0;function a(o,l){const u=Number(e.slice(o,l));s*=n,r=r*n+u,r>=tm&&(s=s+(r/tm|0),r=r%tm)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?OR(r,s):rw(r,s)}function KW(e,t){let n=rw(e,t);const r=n.hi&2147483648;r&&(n=OR(n.lo,n.hi));const s=IR(n.lo,n.hi);return r?"-"+s:s}function IR(e,t){if({lo:e,hi:t}=GW(e,t),t<=2097151)return String(tm*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,s=t>>16&65535;let a=n+r*6777216+s*6710656,o=r+s*8147497,l=s*2;const u=1e7;return a>=u&&(o+=Math.floor(a/u),a%=u),o>=u&&(l+=Math.floor(o/u),o%=u),l.toString()+TN(o)+TN(a)}function GW(e,t){return{lo:e>>>0,hi:t>>>0}}function rw(e,t){return{lo:e|0,hi:t|0}}function OR(e,t){return t=~t,e?e=~e+1:t+=1,rw(e,t)}const TN=e=>{const t=String(e);return"0000000".slice(t.length)+t};function PN(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function ZW(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function JW(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof NN!="object"||NN.BUF_BIGINT_DISABLE!=="1")){const s=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),o=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const h=typeof u=="bigint"?u:BigInt(u);if(h>a||h<s)throw new Error("int64 invalid: ".concat(u));return h},uParse(u){const h=typeof u=="bigint"?u:BigInt(u);if(h>l||h<o)throw new Error("uint64 invalid: ".concat(u));return h},enc(u){return e.setBigInt64(0,this.parse(u),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(u){return e.setBigInt64(0,this.uParse(u),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(u,h){return e.setInt32(0,u,!0),e.setInt32(4,h,!0),e.getBigInt64(0,!0)},uDec(u,h){return e.setInt32(0,u,!0),e.setInt32(4,h,!0),e.getBigUint64(0,!0)}}}const n=s=>wn(/^-?[0-9]+$/.test(s),"int64 invalid: ".concat(s)),r=s=>wn(/^[0-9]+$/.test(s),"uint64 invalid: ".concat(s));return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),n(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),r(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),n(s),EN(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),r(s),EN(s)},dec(s,a){return KW(s,a)},uDec(s,a){return IR(s,a)}}}const cn=JW();var we;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(we||(we={}));var Mo;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(Mo||(Mo={}));function go(e,t,n){if(t===n)return!0;if(e==we.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case we.UINT64:case we.FIXED64:case we.INT64:case we.SFIXED64:case we.SINT64:return t==n}return!1}function ql(e,t){switch(e){case we.BOOL:return!1;case we.UINT64:case we.FIXED64:case we.INT64:case we.SFIXED64:case we.SINT64:return t==0?cn.zero:"0";case we.DOUBLE:case we.FLOAT:return 0;case we.BYTES:return new Uint8Array(0);case we.STRING:return"";default:return 0}}function DR(e,t){switch(e){case we.BOOL:return t===!1;case we.STRING:return t==="";case we.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var An;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(An||(An={}));class YW{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let s=0;s<this.chunks.length;s++)t+=this.chunks[s].length;let n=new Uint8Array(t),r=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Xx(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return em(t),PN(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){TR(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Xx(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){em(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return em(t),t=(t<<1^t>>31)>>>0,PN(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),s=cn.enc(t);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),s=cn.uEnc(t);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}int64(t){let n=cn.enc(t);return Fy(n.lo,n.hi,this.buf),this}sint64(t){let n=cn.enc(t),r=n.hi>>31,s=n.lo<<1^r,a=(n.hi<<1|n.lo>>>31)^r;return Fy(s,a,this.buf),this}uint64(t){let n=cn.uEnc(t);return Fy(n.lo,n.hi,this.buf),this}}class QW{constructor(t,n){this.varint64=WW,this.uint32=ZW,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case An.Varint:for(;this.buf[this.pos++]&128;);break;case An.Bit64:this.pos+=4;case An.Bit32:this.pos+=4;break;case An.LengthDelimited:let s=this.uint32();this.pos+=s;break;case An.StartGroup:for(;;){const[a,o]=this.tag();if(o===An.EndGroup){if(n!==void 0&&a!==n)throw new Error("invalid end group tag");break}this.skip(o,a)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return cn.dec(...this.varint64())}uint64(){return cn.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,cn.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return cn.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return cn.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function XW(e,t,n,r){let s;return{typeName:t,extendee:n,get field(){if(!s){const a=typeof r=="function"?r():r;a.name=t.split(".").pop(),a.jsonName="[".concat(t,"]"),s=e.util.newFieldList([a]).list()[0]}return s},runtime:e}}function MR(e){const t=e.field.localName,n=Object.create(null);return n[t]=eK(e),[n,()=>n[t]]}function eK(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return ql(t.T,t.L);case"message":const n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function tK(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let _a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Qp=[];for(let e=0;e<_a.length;e++)Qp[_a[e].charCodeAt(0)]=e;Qp[45]=_a.indexOf("+");Qp[95]=_a.indexOf("/");const LR={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,s=0,a,o=0;for(let l=0;l<e.length;l++){if(a=Qp[e.charCodeAt(l)],a===void 0)switch(e[l]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:o=a,s=1;break;case 1:n[r++]=o<<2|(a&48)>>4,o=a,s=2;break;case 2:n[r++]=(o&15)<<4|(a&60)>>2,o=a,s=3;break;case 3:n[r++]=(o&3)<<6|a,s=0;break}}if(s==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,s=0;for(let a=0;a<e.length;a++)switch(r=e[a],n){case 0:t+=_a[r>>2],s=(r&3)<<4,n=1;break;case 1:t+=_a[s|r>>4],s=(r&15)<<2,n=2;break;case 2:t+=_a[s|r>>6],t+=_a[r&63],n=0;break}return n&&(t+=_a[s],t+="=",n==1&&(t+="=")),t}};function nK(e,t,n){UR(t,e);const r=t.runtime.bin.makeReadOptions(n),s=tK(e.getType().runtime.bin.listUnknownFields(e),t.field),[a,o]=MR(t);for(const l of s)t.runtime.bin.readField(a,r.readerFactory(l.data),t.field,l.wireType,r);return o()}function rK(e,t,n,r){UR(t,e);const s=t.runtime.bin.makeReadOptions(r),a=t.runtime.bin.makeWriteOptions(r);if(FR(e,t)){const h=e.getType().runtime.bin.listUnknownFields(e).filter(f=>f.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const f of h)e.getType().runtime.bin.onUnknownField(e,f.no,f.wireType,f.data)}const o=a.writerFactory();let l=t.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(l,n,o,a);const u=s.readerFactory(o.finish());for(;u.pos<u.len;){const[h,f]=u.tag(),p=u.skip(f,h);e.getType().runtime.bin.onUnknownField(e,h,f,p)}}function FR(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}function UR(e,t){wn(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function zR(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!DR(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function _N(e,t){const n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?ql(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function Ra(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(nw.prototype).every(r=>r in e&&typeof e[r]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function BR(e,t){return Ra(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}we.DOUBLE,we.FLOAT,we.INT64,we.UINT64,we.INT32,we.UINT32,we.BOOL,we.STRING,we.BYTES;const RN={ignoreUnknownFields:!1},AN={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function sK(e){return e?Object.assign(Object.assign({},RN),e):RN}function iK(e){return e?Object.assign(Object.assign({},AN),e):AN}const Hm=Symbol(),nm=Symbol();function aK(){return{makeReadOptions:sK,makeWriteOptions:iK,readMessage(e,t,n,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Wi(t)));r=r??new e;const s=new Map,a=n.typeRegistry;for(const[o,l]of Object.entries(t)){const u=e.fields.findJsonName(o);if(u){if(u.oneof){if(l===null&&u.kind=="scalar")continue;const h=s.get(u.oneof);if(h!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(u.oneof.name,'" present: "').concat(h,'", "').concat(o,'"'));s.set(u.oneof,o)}IN(r,l,u,n,e)}else{let h=!1;if(a?.findExtension&&o.startsWith("[")&&o.endsWith("]")){const f=a.findExtension(o.substring(1,o.length-1));if(f&&f.extendee.typeName==e.typeName){h=!0;const[p,y]=MR(f);IN(p,l,f.field,n,f),rK(r,f,y(),n)}}if(!h&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(e,t){const n=e.getType(),r={};let s;try{for(s of n.fields.byNumber()){if(!zR(s,e)){if(s.req)throw"required field not set";if(!t.emitDefaultValues||!cK(s))continue}const o=s.oneof?e[s.oneof.localName].value:e[s.localName],l=ON(s,o,t);l!==void 0&&(r[t.useProtoFieldName?s.name:s.jsonName]=l)}const a=t.typeRegistry;if(a?.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(e)){const l=a.findExtensionFor(n.typeName,o.no);if(l&&FR(e,l)){const u=nK(e,l,t),h=ON(l.field,u,t);h!==void 0&&(r[l.field.jsonName]=h)}}}catch(a){const o=s?"cannot encode field ".concat(n.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(o+(l.length>0?": ".concat(l):""))}return r},readScalar(e,t,n){return fu(e,t,n??Mo.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||DR(e,t)))return rm(e,t)},debug:Wi}}function Wi(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function IN(e,t,n,r,s){let a=n.localName;if(n.repeated){if(wn(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(t)));const o=e[a];for(const l of t){if(l===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(l)));switch(n.kind){case"message":o.push(n.T.fromJson(l,r));break;case"enum":const u=Uy(n.T,l,r.ignoreUnknownFields,!0);u!==nm&&o.push(u);break;case"scalar":try{o.push(fu(n.T,l,n.L,!0))}catch(h){let f="cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(l));throw h instanceof Error&&h.message.length>0&&(f+=": ".concat(h.message)),new Error(f)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(t)));const o=e[a];for(const[l,u]of Object.entries(t)){if(u===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: map value null"));let h;try{h=oK(n.K,l)}catch(f){let p="cannot decode map key for field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(t));throw f instanceof Error&&f.message.length>0&&(p+=": ".concat(f.message)),new Error(p)}switch(n.V.kind){case"message":o[h]=n.V.T.fromJson(u,r);break;case"enum":const f=Uy(n.V.T,u,r.ignoreUnknownFields,!0);f!==nm&&(o[h]=f);break;case"scalar":try{o[h]=fu(n.V.T,u,Mo.BIGINT,!0)}catch(p){let y="cannot decode map value for field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(t));throw p instanceof Error&&p.message.length>0&&(y+=": ".concat(p.message)),new Error(y)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:a},a="value"),n.kind){case"message":const o=n.T;if(t===null&&o.typeName!="google.protobuf.Value")return;let l=e[a];Ra(l)?l.fromJson(t,r):(e[a]=l=o.fromJson(t,r),o.fieldWrapper&&!n.oneof&&(e[a]=o.fieldWrapper.unwrapField(l)));break;case"enum":const u=Uy(n.T,t,r.ignoreUnknownFields,!1);switch(u){case Hm:_N(n,e);break;case nm:break;default:e[a]=u;break}break;case"scalar":try{const h=fu(n.T,t,n.L,!1);switch(h){case Hm:_N(n,e);break;default:e[a]=h;break}}catch(h){let f="cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(Wi(t));throw h instanceof Error&&h.message.length>0&&(f+=": ".concat(h.message)),new Error(f)}break}}function oK(e,t){if(e===we.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return fu(e,t,Mo.BIGINT,!0).toString()}function fu(e,t,n,r){if(t===null)return r?ql(e,n):Hm;switch(e){case we.DOUBLE:case we.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const s=Number(t);if(Number.isNaN(s)||!Number.isFinite(s))break;return e==we.FLOAT&&TR(s),s;case we.INT32:case we.FIXED32:case we.SFIXED32:case we.SINT32:case we.UINT32:let a;if(typeof t=="number"?a=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(a=Number(t)),a===void 0)break;return e==we.UINT32||e==we.FIXED32?Xx(a):em(a),a;case we.INT64:case we.SFIXED64:case we.SINT64:if(typeof t!="number"&&typeof t!="string")break;const o=cn.parse(t);return n?o.toString():o;case we.FIXED64:case we.UINT64:if(typeof t!="number"&&typeof t!="string")break;const l=cn.uParse(t);return n?l.toString():l;case we.BOOL:if(typeof t!="boolean")break;return t;case we.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case we.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return LR.dec(t)}throw new Error}function Uy(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].no:Hm;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const s=e.findName(t);if(s!==void 0)return s.no;if(n)return nm;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Wi(t)))}function cK(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function ON(e,t,n){if(e.kind=="map"){wn(typeof t=="object"&&t!=null);const r={},s=Object.entries(t);switch(e.V.kind){case"scalar":for(const[o,l]of s)r[o.toString()]=rm(e.V.T,l);break;case"message":for(const[o,l]of s)r[o.toString()]=l.toJson(n);break;case"enum":const a=e.V.T;for(const[o,l]of s)r[o.toString()]=zy(a,l,n.enumAsInteger);break}return n.emitDefaultValues||s.length>0?r:void 0}if(e.repeated){wn(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let s=0;s<t.length;s++)r.push(rm(e.T,t[s]));break;case"enum":for(let s=0;s<t.length;s++)r.push(zy(e.T,t[s],n.enumAsInteger));break;case"message":for(let s=0;s<t.length;s++)r.push(t[s].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return rm(e.T,t);case"enum":return zy(e.T,t,n.enumAsInteger);case"message":return BR(e.T,t).toJson(n)}}function zy(e,t,n){var r;if(wn(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const s=e.findNumber(t);return(r=s?.name)!==null&&r!==void 0?r:t}function rm(e,t){switch(e){case we.INT32:case we.SFIXED32:case we.SINT32:case we.FIXED32:case we.UINT32:return wn(typeof t=="number"),t;case we.FLOAT:case we.DOUBLE:return wn(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case we.STRING:return wn(typeof t=="string"),t;case we.BOOL:return wn(typeof t=="boolean"),t;case we.UINT64:case we.FIXED64:case we.INT64:case we.SFIXED64:case we.SINT64:return wn(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case we.BYTES:return wn(t instanceof Uint8Array),LR.enc(t)}}const ml=Symbol("@bufbuild/protobuf/unknown-fields"),DN={readUnknownFields:!0,readerFactory:e=>new QW(e)},MN={writeUnknownFields:!0,writerFactory:()=>new YW};function lK(e){return e?Object.assign(Object.assign({},DN),e):DN}function dK(e){return e?Object.assign(Object.assign({},MN),e):MN}function uK(){return{makeReadOptions:lK,makeWriteOptions:dK,listUnknownFields(e){var t;return(t=e[ml])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[ml]},writeUnknownFields(e,t){const r=e[ml];if(r)for(const s of r)t.tag(s.no,s.wireType).raw(s.data)},onUnknownField(e,t,n,r){const s=e;Array.isArray(s[ml])||(s[ml]=[]),s[ml].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,s){const a=e.getType(),o=s?t.len:t.pos+n;let l,u;for(;t.pos<o&&([l,u]=t.tag(),!(s===!0&&u==An.EndGroup));){const h=a.fields.find(l);if(!h){const f=t.skip(u,l);r.readUnknownFields&&this.onUnknownField(e,l,u,f);continue}LN(e,t,h,u,r)}if(s&&(u!=An.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:LN,writeMessage(e,t,n){const r=e.getType();for(const s of r.fields.byNumber()){if(!zR(s,e)){if(s.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(s.name," to binary: required field not set"));continue}const a=s.oneof?e[s.oneof.localName].value:e[s.localName];FN(s,a,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){t!==void 0&&FN(e,t,n,r)}}}function LN(e,t,n,r,s){let{repeated:a,localName:o}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=o&&delete e.value,e.case=o,o="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?we.INT32:n.T;let u=Wm;if(n.kind=="scalar"&&n.L>0&&(u=fK),a){let y=e[o];if(r==An.LengthDelimited&&l!=we.STRING&&l!=we.BYTES){let k=t.uint32()+t.pos;for(;t.pos<k;)y.push(u(t,l))}else y.push(u(t,l))}else e[o]=u(t,l);break;case"message":const h=n.T;a?e[o].push(sm(t,new h,s,n)):Ra(e[o])?sm(t,e[o],s,n):(e[o]=sm(t,new h,s,n),h.fieldWrapper&&!n.oneof&&!n.repeated&&(e[o]=h.fieldWrapper.unwrapField(e[o])));break;case"map":let[f,p]=hK(n,t,s);e[o][f]=p;break}}function sm(e,t,n,r){const s=t.getType().runtime.bin,a=r?.delimited;return s.readMessage(t,e,a?r.no:e.uint32(),n,a),t}function hK(e,t,n){const r=t.uint32(),s=t.pos+r;let a,o;for(;t.pos<s;){const[l]=t.tag();switch(l){case 1:a=Wm(t,e.K);break;case 2:switch(e.V.kind){case"scalar":o=Wm(t,e.V.T);break;case"enum":o=t.int32();break;case"message":o=sm(t,new e.V.T,n,void 0);break}break}}if(a===void 0&&(a=ql(e.K,Mo.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),o===void 0)switch(e.V.kind){case"scalar":o=ql(e.V.T,Mo.BIGINT);break;case"enum":o=e.V.T.values[0].no;break;case"message":o=new e.V.T;break}return[a,o]}function fK(e,t){const n=Wm(e,t);return typeof n=="bigint"?n.toString():n}function Wm(e,t){switch(t){case we.STRING:return e.string();case we.BOOL:return e.bool();case we.DOUBLE:return e.double();case we.FLOAT:return e.float();case we.INT32:return e.int32();case we.INT64:return e.int64();case we.UINT64:return e.uint64();case we.FIXED64:return e.fixed64();case we.BYTES:return e.bytes();case we.FIXED32:return e.fixed32();case we.SFIXED32:return e.sfixed32();case we.SFIXED64:return e.sfixed64();case we.SINT64:return e.sint64();case we.UINT32:return e.uint32();case we.SINT32:return e.sint32()}}function FN(e,t,n,r){wn(t!==void 0);const s=e.repeated;switch(e.kind){case"scalar":case"enum":let a=e.kind=="enum"?we.INT32:e.T;if(s)if(wn(Array.isArray(t)),e.packed)pK(n,a,e.no,t);else for(const o of t)mu(n,a,e.no,o);else mu(n,a,e.no,t);break;case"message":if(s){wn(Array.isArray(t));for(const o of t)UN(n,r,e,o)}else UN(n,r,e,t);break;case"map":wn(typeof t=="object"&&t!=null);for(const[o,l]of Object.entries(t))mK(n,r,e,o,l);break}}function mK(e,t,n,r,s){e.tag(n.no,An.LengthDelimited),e.fork();let a=r;switch(n.K){case we.INT32:case we.FIXED32:case we.UINT32:case we.SFIXED32:case we.SINT32:a=Number.parseInt(r);break;case we.BOOL:wn(r=="true"||r=="false"),a=r=="true";break}switch(mu(e,n.K,1,a),n.V.kind){case"scalar":mu(e,n.V.T,2,s);break;case"enum":mu(e,we.INT32,2,s);break;case"message":wn(s!==void 0),e.tag(2,An.LengthDelimited).bytes(s.toBinary(t));break}e.join()}function UN(e,t,n,r){const s=BR(n.T,r);n.delimited?e.tag(n.no,An.StartGroup).raw(s.toBinary(t)).tag(n.no,An.EndGroup):e.tag(n.no,An.LengthDelimited).bytes(s.toBinary(t))}function mu(e,t,n,r){wn(r!==void 0);let[s,a]=$R(t);e.tag(n,s)[a](r)}function pK(e,t,n,r){if(!r.length)return;e.tag(n,An.LengthDelimited).fork();let[,s]=$R(t);for(let a=0;a<r.length;a++)e[s](r[a]);e.join()}function $R(e){let t=An.Varint;switch(e){case we.BYTES:case we.STRING:t=An.LengthDelimited;break;case we.DOUBLE:case we.FIXED64:case we.SFIXED64:t=An.Bit64;break;case we.FIXED32:case we.SFIXED32:case we.FLOAT:t=An.Bit32;break}const n=we[e].toLowerCase();return[t,n]}function gK(){return{setEnumType:_R,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const r of n.fields.byMember()){const s=r.localName,a=t,o=e;if(o[s]!=null)switch(r.kind){case"oneof":const l=o[s].case;if(l===void 0)continue;const u=r.findField(l);let h=o[s].value;u&&u.kind=="message"&&!Ra(h,u.T)?h=new u.T(h):u&&u.kind==="scalar"&&u.T===we.BYTES&&(h=Qd(h)),a[s]={case:l,value:h};break;case"scalar":case"enum":let f=o[s];r.T===we.BYTES&&(f=r.repeated?f.map(Qd):Qd(f)),a[s]=f;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===we.BYTES)for(const[x,k]of Object.entries(o[s]))a[s][x]=Qd(k);else Object.assign(a[s],o[s]);break;case"message":const y=r.V.T;for(const x of Object.keys(o[s])){let k=o[s][x];y.fieldWrapper||(k=new y(k)),a[s][x]=k}break}break;case"message":const p=r.T;if(r.repeated)a[s]=o[s].map(y=>Ra(y,p)?y:new p(y));else{const y=o[s];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?a[s]=Qd(y):a[s]=y:a[s]=Ra(y,p)?y:new p(y)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{const s=t[r.localName],a=n[r.localName];if(r.repeated){if(s.length!==a.length)return!1;switch(r.kind){case"message":return s.every((o,l)=>r.T.equals(o,a[l]));case"scalar":return s.every((o,l)=>go(r.T,o,a[l]));case"enum":return s.every((o,l)=>go(we.INT32,o,a[l]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let o=s,l=a;return r.T.fieldWrapper&&(o!==void 0&&!Ra(o)&&(o=r.T.fieldWrapper.wrapField(o)),l!==void 0&&!Ra(l)&&(l=r.T.fieldWrapper.wrapField(l))),r.T.equals(o,l);case"enum":return go(we.INT32,s,a);case"scalar":return go(r.T,s,a);case"oneof":if(s.case!==a.case)return!1;const u=r.findField(s.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(s.value,a.value);case"enum":return go(we.INT32,s.value,a.value);case"scalar":return go(u.T,s.value,a.value)}throw new Error("oneof cannot contain ".concat(u.kind));case"map":const h=Object.keys(s).concat(Object.keys(a));switch(r.V.kind){case"message":const f=r.V.T;return h.every(y=>f.equals(s[y],a[y]));case"enum":return h.every(y=>go(we.INT32,s[y],a[y]));case"scalar":const p=r.V.T;return h.every(y=>go(p,s[y],a[y]))}break}})},clone(e){const t=e.getType(),n=new t,r=n;for(const s of t.fields.byMember()){const a=e[s.localName];let o;if(s.repeated)o=a.map(Af);else if(s.kind=="map"){o=r[s.localName];for(const[l,u]of Object.entries(a))o[l]=Af(u)}else s.kind=="oneof"?o=s.findField(a.case)?{case:a.case,value:Af(a.value)}:{case:void 0}:o=Af(a);r[s.localName]=o}for(const s of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(r,s.no,s.wireType,s.data);return n}}}function Af(e){if(e===void 0)return e;if(Ra(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function Qd(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function vK(e,t,n){return{syntax:e,json:aK(),bin:uK(),util:Object.assign(Object.assign({},gK()),{newFieldList:t,initFields:n}),makeMessageType(r,s,a){return HW(this,r,s,a)},makeEnum:qW,makeEnumType:RR,getEnumType:VW,makeExtension(r,s,a){return XW(this,r,s,a)}}}class yK{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,t.push(n)):t.push(r)}return this.members}}function VR(e,t){const n=qR(e);return t?n:CK(SK(n))}function xK(e){return VR(e,!1)}const bK=qR;function qR(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let s=e.charAt(r);switch(s){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),t=!1;break;default:t&&(t=!1,s=s.toUpperCase()),n.push(s);break}}return n.join("")}const wK=new Set(["constructor","toString","toJSON","valueOf"]),kK=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),HR=e=>"".concat(e,"$"),SK=e=>kK.has(e)?HR(e):e,CK=e=>wK.has(e)?HR(e):e;class NK{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=xK(t)}addField(t){wn(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function jK(e,t){var n,r,s,a,o,l;const u=[];let h;for(const f of typeof e=="function"?e():e){const p=f;if(p.localName=VR(f.name,f.oneof!==void 0),p.jsonName=(n=f.jsonName)!==null&&n!==void 0?n:bK(f.name),p.repeated=(r=f.repeated)!==null&&r!==void 0?r:!1,f.kind=="scalar"&&(p.L=(s=f.L)!==null&&s!==void 0?s:Mo.BIGINT),p.delimited=(a=f.delimited)!==null&&a!==void 0?a:!1,p.req=(o=f.req)!==null&&o!==void 0?o:!1,p.opt=(l=f.opt)!==null&&l!==void 0?l:!1,f.packed===void 0&&(p.packed=f.kind=="enum"||f.kind=="scalar"&&f.T!=we.BYTES&&f.T!=we.STRING),f.oneof!==void 0){const y=typeof f.oneof=="string"?f.oneof:f.oneof.name;(!h||h.name!=y)&&(h=new NK(y)),p.oneof=h,h.addField(p)}u.push(p)}return u}const Q=vK("proto3",e=>new yK(e,t=>jK(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=ql(t.T,t.L);break}}});class ss extends nw{constructor(t){super(),this.seconds=cn.zero,this.nanos=0,Q.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(Q.json.debug(t)));const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const s=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(s))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=cn.parse(s/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const s=(this.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?r="."+s.substring(0,3)+"Z":s.substring(6)==="000"?r="."+s.substring(0,6)+"Z":r="."+s+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return ss.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new ss({seconds:cn.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new ss().fromBinary(t,n)}static fromJson(t,n){return new ss().fromJson(t,n)}static fromJsonString(t,n){return new ss().fromJsonString(t,n)}static equals(t,n){return Q.util.equals(ss,t,n)}}ss.runtime=Q;ss.typeName="google.protobuf.Timestamp";ss.fields=Q.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const EK=Q.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:ss},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:TK,repeated:!0},{no:5,name:"events",kind:"message",T:_K,repeated:!0}]),TK=Q.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:PK,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),PK=Q.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:ss},{no:3,name:"value",kind:"scalar",T:2}]),_K=Q.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:ss},{no:7,name:"normalized_end_timestamp",kind:"message",T:ss,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),WR=Q.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),hi=Q.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),zn=Q.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),sw=Q.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),lu=Q.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),ju=Q.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),yi=Q.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),ic=Q.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),RK=Q.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),ar=Q.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Xp=Q.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Km,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:iA}]),Km=Q.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),AK=Q.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:Q.getEnumType(zn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Cc=Q.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Q.getEnumType(El)},{no:4,name:"tracks",kind:"message",T:yl,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:AK},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:Q.getEnumType(Eu)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:Q.getEnumType(yi)},{no:18,name:"kind_details",kind:"enum",T:Q.getEnumType(IK),repeated:!0}]),El=Q.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Eu=Q.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),IK=Q.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Xn=Q.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),OK=Q.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Eo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:Q.getEnumType(KR)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),yl=Q.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:Q.getEnumType(hi)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:Q.getEnumType(zn)},{no:10,name:"layers",kind:"message",T:Eo,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:OK,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:Q.getEnumType(Xn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:iA},{no:19,name:"audio_features",kind:"enum",T:Q.getEnumType(ar),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:Q.getEnumType(WR)}]),Eo=Q.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:Q.getEnumType(sw)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),KR=Q.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),Ir=Q.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:Q.getEnumType(bt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:iw,oneof:"value"},{no:3,name:"speaker",kind:"message",T:DK,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:YR,oneof:"value"},{no:7,name:"transcription",kind:"message",T:MK,oneof:"value"},{no:8,name:"metrics",kind:"message",T:EK,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Gm,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:aw,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:ow,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:cw,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Zm,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Jm,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Ym,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:GR,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),bt=Q.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),GR=Q.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:Q.getEnumType(Xn)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),ZR=Q.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:iw,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Gm,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:aw,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:ow,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:cw,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:Zm,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:Jm,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:Ym,oneof:"value"}]),DK=Q.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:JR,repeated:!0}]),JR=Q.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),iw=Q.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),YR=Q.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),MK=Q.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:LK,repeated:!0}]),LK=Q.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Gm=Q.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),aw=Q.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),ow=Q.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),cw=Q.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:QR,oneof:"value"}]),QR=Q.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),XR=Q.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),eA=Q.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:Q.getEnumType(tA)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),tA=Q.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),nA=Q.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:Q.getEnumType(rA)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),rA=Q.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),sA=Q.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:zN},{no:2,name:"screen",kind:"message",T:zN},{no:3,name:"resume_connection",kind:"enum",T:Q.getEnumType(ju)},{no:4,name:"disabled_codecs",kind:"message",T:FK},{no:5,name:"force_relay",kind:"enum",T:Q.getEnumType(ju)}]),zN=Q.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:Q.getEnumType(ju)}]),FK=Q.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Km,repeated:!0},{no:2,name:"publish",kind:"message",T:Km,repeated:!0}]),iA=Q.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),e0=Q.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),aA=Q.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:Q.getEnumType(e0)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),oA=Q.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Zm=Q.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:Q.getEnumType(Xn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:aA,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:oA,oneof:"content_header"}],{localName:"DataStream_Header"}),Jm=Q.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Ym=Q.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),UK=Q.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),fi=Q.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),t0=Q.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),zK=Q.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),BK=Q.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Lo,oneof:"message"},{no:2,name:"answer",kind:"message",T:Lo,oneof:"message"},{no:3,name:"trickle",kind:"message",T:eg,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Tu,oneof:"message"},{no:5,name:"mute",kind:"message",T:tg,oneof:"message"},{no:6,name:"subscription",kind:"message",T:ng,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:cA,oneof:"message"},{no:8,name:"leave",kind:"message",T:rg,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:dA,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:fA,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:fw,oneof:"message"},{no:13,name:"simulate",kind:"message",T:qi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:uw,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:gA,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:dw,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:lA,oneof:"message"}]),BN=Q.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:$K,oneof:"message"},{no:2,name:"answer",kind:"message",T:Lo,oneof:"message"},{no:3,name:"offer",kind:"message",T:Lo,oneof:"message"},{no:4,name:"trickle",kind:"message",T:eg,oneof:"message"},{no:5,name:"update",kind:"message",T:HK,oneof:"message"},{no:6,name:"track_published",kind:"message",T:lw,oneof:"message"},{no:8,name:"leave",kind:"message",T:rg,oneof:"message"},{no:9,name:"mute",kind:"message",T:tg,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:WK,oneof:"message"},{no:11,name:"room_update",kind:"message",T:KK,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:ZK,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:YK,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:XK,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:tG,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:qK,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:VK,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:rG,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:aG,oneof:"message"},{no:22,name:"request_response",kind:"message",T:oG,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:cG,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:nG,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:hG,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:eG,oneof:"message"}]),n0=Q.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Eo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:Q.getEnumType(KR)}]),Tu=Q.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:Q.getEnumType(hi)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:Q.getEnumType(zn)},{no:9,name:"layers",kind:"message",T:Eo,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:n0,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:Q.getEnumType(Xn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:Q.getEnumType(WR)},{no:17,name:"audio_features",kind:"enum",T:Q.getEnumType(ar),repeated:!0}]),eg=Q.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:Q.getEnumType(fi)},{no:3,name:"final",kind:"scalar",T:8}]),tg=Q.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),$K=Q.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Xp},{no:2,name:"participant",kind:"message",T:Cc},{no:3,name:"other_participants",kind:"message",T:Cc,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:uA,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:sA},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:eA},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Km,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),VK=Q.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:uA,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:sA},{no:3,name:"server_info",kind:"message",T:eA},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),lw=Q.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:yl}]),qK=Q.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Lo=Q.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),HK=Q.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Cc,repeated:!0}]),ng=Q.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:XR,repeated:!0}]),cA=Q.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:Q.getEnumType(sw)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),dw=Q.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:Q.getEnumType(ar),repeated:!0}]),lA=Q.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),rg=Q.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:Q.getEnumType(yi)},{no:3,name:"action",kind:"enum",T:Q.getEnumType(Tl)},{no:4,name:"regions",kind:"message",T:sG}]),Tl=Q.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),dA=Q.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Eo,repeated:!0}]),uw=Q.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),uA=Q.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),WK=Q.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:JR,repeated:!0}]),KK=Q.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Xp}]),GK=Q.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:Q.getEnumType(lu)},{no:3,name:"score",kind:"scalar",T:2}]),ZK=Q.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:GK,repeated:!0}]),JK=Q.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Q.getEnumType(t0)}]),YK=Q.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:JK,repeated:!0}]),hw=Q.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:Q.getEnumType(sw)},{no:2,name:"enabled",kind:"scalar",T:8}]),QK=Q.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:hw,repeated:!0}]),XK=Q.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:hw,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:QK,repeated:!0}]),eG=Q.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:UK,repeated:!0}]),hA=Q.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),fA=Q.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:hA,repeated:!0}]),tG=Q.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),nG=Q.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Xp},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Cc},{no:4,name:"other_participants",kind:"message",T:Cc,repeated:!0}]),fw=Q.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Lo},{no:2,name:"subscription",kind:"message",T:ng},{no:3,name:"publish_tracks",kind:"message",T:lw,repeated:!0},{no:4,name:"data_channels",kind:"message",T:pA,repeated:!0},{no:5,name:"offer",kind:"message",T:Lo},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:mA,repeated:!0}]),mA=Q.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),pA=Q.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:Q.getEnumType(fi)}]),qi=Q.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:Q.getEnumType(zK),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),gA=Q.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),rG=Q.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),sG=Q.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:iG,repeated:!0}]),iG=Q.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),aG=Q.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:Q.getEnumType(RK)}]),oG=Q.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:Q.getEnumType(mw)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:eg,oneof:"request"},{no:5,name:"add_track",kind:"message",T:Tu,oneof:"request"},{no:6,name:"mute",kind:"message",T:tg,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:uw,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:dw,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:lA,oneof:"request"}]),mw=Q.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),cG=Q.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),vA=Q.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),lG=Q.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:nA},{no:2,name:"connection_settings",kind:"message",T:vA},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:Tu,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:Lo},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:Q.getEnumType(ic)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:fw}]),dG=Q.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:Q.getEnumType(uG)},{no:2,name:"join_request",kind:"scalar",T:12}]),uG=Q.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),hG=Q.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function fG(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var im={exports:{}},mG=im.exports,$N;function pG(){return $N||($N=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(mG,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],a={},o=null;function l(b,S){var N=b[S];if(typeof N.bind=="function")return N.bind(b);try{return Function.prototype.bind.call(N,b)}catch{return function(){return Function.prototype.apply.apply(N,[b,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&r?u:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):t}function f(){for(var b=this.getLevel(),S=0;S<s.length;S++){var N=s[S];this[N]=S<b?t:this.methodFactory(N,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function p(b){return function(){typeof console!==n&&(f.call(this),this[b].apply(this,arguments))}}function y(b,S,N){return h(b)||p.apply(this,arguments)}function x(b,S){var N=this,E,j,P,T="loglevel";typeof b=="string"?T+=":"+b:typeof b=="symbol"&&(T=void 0);function I(q){var z=(s[q]||"silent").toUpperCase();if(!(typeof window===n||!T)){try{window.localStorage[T]=z;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+z+";"}catch{}}}function _(){var q;if(!(typeof window===n||!T)){try{q=window.localStorage[T]}catch{}if(typeof q===n)try{var z=window.document.cookie,G=encodeURIComponent(T),oe=z.indexOf(G+"=");oe!==-1&&(q=/^([^;]+)/.exec(z.slice(oe+G.length+1))[1])}catch{}return N.levels[q]===void 0&&(q=void 0),q}}function A(){if(!(typeof window===n||!T)){try{window.localStorage.removeItem(T)}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function O(q){var z=q;if(typeof z=="string"&&N.levels[z.toUpperCase()]!==void 0&&(z=N.levels[z.toUpperCase()]),typeof z=="number"&&z>=0&&z<=N.levels.SILENT)return z;throw new TypeError("log.setLevel() called with invalid level: "+q)}N.name=b,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=S||y,N.getLevel=function(){return P??j??E},N.setLevel=function(q,z){return P=O(q),z!==!1&&I(P),f.call(N)},N.setDefaultLevel=function(q){j=O(q),_()||N.setLevel(q,!1)},N.resetLevel=function(){P=null,A(),f.call(N)},N.enableAll=function(q){N.setLevel(N.levels.TRACE,q)},N.disableAll=function(q){N.setLevel(N.levels.SILENT,q)},N.rebuild=function(){if(o!==N&&(E=O(o.getLevel())),f.call(N),o===N)for(var q in a)a[q].rebuild()},E=O(o?o.getLevel():"WARN");var M=_();M!=null&&(P=O(M)),f.call(N)}o=new x,o.getLogger=function(S){if(typeof S!="symbol"&&typeof S!="string"||S==="")throw new TypeError("You must supply a name when creating a logger.");var N=a[S];return N||(N=a[S]=new x(S,o.methodFactory)),N};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return a},o.default=o,o})})(im)),im.exports}var sg=pG(),r0;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(r0||(r0={}));var wi;(function(e){e.Default="livekit",e.Room="livekit-room",e.TokenSource="livekit-token-source",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(wi||(wi={}));let gt=sg.getLogger("livekit");Object.values(wi).map(e=>sg.getLogger(e));gt.setDefaultLevel(r0.info);function Va(e){const t=sg.getLogger(e);return t.setDefaultLevel(gt.getLevel()),t}const gG=sg.getLogger("lk-e2ee"),Xd=7e3,vG=[0,300,4*300,9*300,16*300,Xd,Xd,Xd,Xd,Xd];class yG{constructor(t){this._retryDelays=t!==void 0?[...t]:vG}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function xG(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function L(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(f){try{h(r.next(f))}catch(p){o(p)}}function u(f){try{h(r.throw(f))}catch(p){o(p)}}function h(f){f.done?a(f.value):s(f.value).then(l,u)}h((r=r.apply(e,t||[])).next())})}function VN(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Aa(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof VN=="function"?VN(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,u){o=e[a](o),s(l,u,o.done,o.value)})}}function s(a,o,l,u){Promise.resolve(u).then(function(h){a({value:h,done:l})},o)}}var If={exports:{}},qN;function bG(){if(qN)return If.exports;qN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(T,I,_){return Function.prototype.apply.call(T,I,_)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:n=function(T){return Object.getOwnPropertyNames(T)};function r(P){console&&console.warn&&console.warn(P)}var s=Number.isNaN||function(T){return T!==T};function a(){a.init.call(this)}If.exports=a,If.exports.once=N,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function l(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(P){if(typeof P!="number"||P<0||s(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");o=P}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function u(P){return P._maxListeners===void 0?a.defaultMaxListeners:P._maxListeners}a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(T){for(var I=[],_=1;_<arguments.length;_++)I.push(arguments[_]);var A=T==="error",O=this._events;if(O!==void 0)A=A&&O.error===void 0;else if(!A)return!1;if(A){var M;if(I.length>0&&(M=I[0]),M instanceof Error)throw M;var q=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw q.context=M,q}var z=O[T];if(z===void 0)return!1;if(typeof z=="function")t(z,this,I);else for(var G=z.length,oe=k(z,G),_=0;_<G;++_)t(oe[_],this,I);return!0};function h(P,T,I,_){var A,O,M;if(l(I),O=P._events,O===void 0?(O=P._events=Object.create(null),P._eventsCount=0):(O.newListener!==void 0&&(P.emit("newListener",T,I.listener?I.listener:I),O=P._events),M=O[T]),M===void 0)M=O[T]=I,++P._eventsCount;else if(typeof M=="function"?M=O[T]=_?[I,M]:[M,I]:_?M.unshift(I):M.push(I),A=u(P),A>0&&M.length>A&&!M.warned){M.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=P,q.type=T,q.count=M.length,r(q)}return P}a.prototype.addListener=function(T,I){return h(this,T,I,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(T,I){return h(this,T,I,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(P,T,I){var _={fired:!1,wrapFn:void 0,target:P,type:T,listener:I},A=f.bind(_);return A.listener=I,_.wrapFn=A,A}a.prototype.once=function(T,I){return l(I),this.on(T,p(this,T,I)),this},a.prototype.prependOnceListener=function(T,I){return l(I),this.prependListener(T,p(this,T,I)),this},a.prototype.removeListener=function(T,I){var _,A,O,M,q;if(l(I),A=this._events,A===void 0)return this;if(_=A[T],_===void 0)return this;if(_===I||_.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete A[T],A.removeListener&&this.emit("removeListener",T,_.listener||I));else if(typeof _!="function"){for(O=-1,M=_.length-1;M>=0;M--)if(_[M]===I||_[M].listener===I){q=_[M].listener,O=M;break}if(O<0)return this;O===0?_.shift():b(_,O),_.length===1&&(A[T]=_[0]),A.removeListener!==void 0&&this.emit("removeListener",T,q||I)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(T){var I,_,A;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[T]),this;if(arguments.length===0){var O=Object.keys(_),M;for(A=0;A<O.length;++A)M=O[A],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=_[T],typeof I=="function")this.removeListener(T,I);else if(I!==void 0)for(A=I.length-1;A>=0;A--)this.removeListener(T,I[A]);return this};function y(P,T,I){var _=P._events;if(_===void 0)return[];var A=_[T];return A===void 0?[]:typeof A=="function"?I?[A.listener||A]:[A]:I?S(A):k(A,A.length)}a.prototype.listeners=function(T){return y(this,T,!0)},a.prototype.rawListeners=function(T){return y(this,T,!1)},a.listenerCount=function(P,T){return typeof P.listenerCount=="function"?P.listenerCount(T):x.call(P,T)},a.prototype.listenerCount=x;function x(P){var T=this._events;if(T!==void 0){var I=T[P];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function k(P,T){for(var I=new Array(T),_=0;_<T;++_)I[_]=P[_];return I}function b(P,T){for(;T+1<P.length;T++)P[T]=P[T+1];P.pop()}function S(P){for(var T=new Array(P.length),I=0;I<T.length;++I)T[I]=P[I].listener||P[I];return T}function N(P,T){return new Promise(function(I,_){function A(M){P.removeListener(T,O),_(M)}function O(){typeof P.removeListener=="function"&&P.removeListener("error",A),I([].slice.call(arguments))}j(P,T,O,{once:!0}),T!=="error"&&E(P,A,{once:!0})})}function E(P,T,I){typeof P.on=="function"&&j(P,"error",T,I)}function j(P,T,I,_){if(typeof P.on=="function")_.once?P.once(T,I):P.on(T,I);else if(typeof P.addEventListener=="function")P.addEventListener(T,function A(O){_.once&&P.removeEventListener(T,A),I(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return If.exports}var fa=bG();let yA=!0,xA=!0;function du(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Uc(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(o,l){if(o!==t)return s.apply(this,arguments);const u=h=>{const f=n(h);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,u),s.apply(this,[o,u])};const a=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(l))return a.apply(this,arguments);const u=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[o,u])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function wG(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(yA=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function kG(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(xA=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function bA(){if(typeof window=="object"){if(yA)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function pw(e,t){xA&&console.warn(e+" is deprecated, please use "+t+" instead.")}function SG(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(s=>s.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(du(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(du(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(du(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=du(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function HN(e){return Object.prototype.toString.call(e)==="[object Object]"}function wA(e){return HN(e)?Object.keys(e).reduce(function(t,n){const r=HN(e[n]),s=r?wA(e[n]):e[n],a=r&&!Object.keys(s).length;return s===void 0||a?t:Object.assign(t,{[n]:s})},{}):e}function s0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?s0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(s=>{s0(e,e.get(s),n)})}))}function WN(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(t===null)return s;const a=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&a.push(o)}),a.forEach(o=>{e.forEach(l=>{l.type===r&&l.trackId===o.id&&s0(e,l,s)})}),s}const KN=bA;function kA(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const u={};return Object.keys(l).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const f=typeof l[h]=="object"?l[h]:{ideal:l[h]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const p=function(y,x){return y?y+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(f.ideal!==void 0){u.optional=u.optional||[];let y={};typeof f.ideal=="number"?(y[p("min",h)]=f.ideal,u.optional.push(y),y={},y[p("max",h)]=f.ideal,u.optional.push(y)):(y[p("",h)]=f.ideal,u.optional.push(y))}f.exact!==void 0&&typeof f.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[p("",h)]=f.exact):["min","max"].forEach(y=>{f[y]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[p(y,h)]=f[y])})}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},s=function(l,u){if(t.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const h=function(f,p,y){p in f&&!(y in f)&&(f[y]=f[p],delete f[p])};l=JSON.parse(JSON.stringify(l)),h(l.audio,"autoGainControl","googAutoGainControl"),h(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let h=l.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const f=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let p;if(h.exact==="environment"||h.ideal==="environment"?p=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(k=>k.kind==="videoinput");let x=y.find(k=>p.some(b=>k.label.toLowerCase().includes(b)));return!x&&y.length&&p.includes("back")&&(x=y[y.length-1]),x&&(l.video.deviceId=h.exact?{exact:x.deviceId}:{ideal:x.deviceId}),l.video=r(l.video),KN("chrome: "+JSON.stringify(l)),u(l)})}l.video=r(l.video)}return KN("chrome: "+JSON.stringify(l)),u(l)},a=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,u,h){s(l,f=>{n.webkitGetUserMedia(f,u,p=>{h&&h(a(p))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return s(u,h=>l(h).then(f=>{if(h.audio&&!f.getAudioTracks().length||h.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(a(f))))}}}function SA(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function CA(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):a={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(s=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===s.id):a={track:s};const o=new Event("track");o.track=s,o.receiver=a,o.transceiver={receiver:a},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Uc(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function NA(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(s,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=s.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:s}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){let h=s.apply(this,arguments);return h||(h=t(this,l),this._senders.push(h)),h};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const u=this._senders.indexOf(l);u!==-1&&this._senders.splice(u,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(o=>{const l=this._senders.find(u=>u.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function jA(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(o=>o._pc=this),a});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>WN(o,a.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s}),Uc(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>WN(a,s.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let s,a,o;return this.getSenders().forEach(l=>{l.track===r&&(s?o=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===r&&(a?o=!0:a=l),l.track===r)),o||s&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function EA(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(u)===-1&&this._shimmedLocalStreams[l.id].push(u):this._shimmedLocalStreams[l.id]=[l,u],u};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(h=>{if(this.getSenders().find(p=>p.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(h=>l.indexOf(h)===-1);this._shimmedLocalStreams[o.id]=[o].concat(u)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const u=this._shimmedLocalStreams[l].indexOf(o);u!==-1&&this._shimmedLocalStreams[l].splice(u,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function TA(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return EA(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(p=>this._reverseStreams[p.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(p=>{if(this.getSenders().find(x=>x.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const p=new e.MediaStream(f.getTracks());this._streams[f.id]=p,this._reverseStreams[p.id]=f,f=p}r.apply(this,[f])};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(b=>b===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(b=>b.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const k=this._streams[p.id];if(k)k.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const b=new e.MediaStream([f]);this._streams[p.id]=b,this._reverseStreams[b.id]=p,this.addStream(b)}return this.getSenders().find(b=>b.track===f)};function a(h,f){let p=f.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],k=h._streams[x.id];p=p.replace(new RegExp(k.id,"g"),x.id)}),new RTCSessionDescription({type:f.type,sdp:p})}function o(h,f){let p=f.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const x=h._reverseStreams[y],k=h._streams[x.id];p=p.replace(new RegExp(x.id,"g"),k.id)}),new RTCSessionDescription({type:f.type,sdp:p})}["createOffer","createAnswer"].forEach(function(h){const f=e.RTCPeerConnection.prototype[h],p={[h](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[k=>{const b=a(this,k);y[0].apply(null,[b])},k=>{y[1]&&y[1].apply(null,k)},arguments[2]]):f.apply(this,arguments).then(k=>a(this,k))}};e.RTCPeerConnection.prototype[h]=p[h]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const h=u.get.apply(this);return h.type===""?h:a(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(b=>f.track===b)&&(y=this._streams[x])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function i0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=s[n]})}function PA(e,t){Uc(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var GN=Object.freeze({__proto__:null,fixNegotiationNeeded:PA,shimAddTrackRemoveTrack:TA,shimAddTrackRemoveTrackWithNative:EA,shimGetSendersWithDtmf:NA,shimGetUserMedia:kA,shimMediaStream:SA,shimOnTrack:CA,shimPeerConnection:i0,shimSenderReceiverGetStats:jA});function _A(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(s,a,o){pw("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(s).then(a,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const s=function(o,l,u){l in o&&!(u in o)&&(o[u]=o[l],delete o[l])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),a(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function CG(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function RA(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function a0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const a=e.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[s]=o[s]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[a,o,l]=arguments;return r.apply(this,[a||null]).then(u=>{if(t.version<53&&!o)try{u.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;u.forEach((f,p)=>{u.set(p,Object.assign({},f,{type:n[f.type]||f.type}))})}return u}).then(o,l)}}function AA(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(a=>a._pc=this),s});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function IA(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(s=>s._pc=this),r}),Uc(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function OA(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){pw("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function DA(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function MA(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const s=r.length>0;s&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=t.apply(this,arguments);if(s){const{sender:o}=a,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return a})}function LA(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function FA(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function UA(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var ZN=Object.freeze({__proto__:null,shimAddTransceiver:MA,shimCreateAnswer:UA,shimCreateOffer:FA,shimGetDisplayMedia:CG,shimGetParameters:LA,shimGetUserMedia:_A,shimOnTrack:RA,shimPeerConnection:a0,shimRTCDataChannel:DA,shimReceiverGetStats:IA,shimRemoveStream:OA,shimSenderGetStats:AA});function zA(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>t.call(this,s,r)),r.getVideoTracks().forEach(s=>t.call(this,s,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const s=n.getTracks();this.getSenders().forEach(a=>{s.includes(a.track)&&this.removeTrack(a)})})}}function BA(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,this.dispatchEvent(a)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function $A(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,s=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(h,f){const p=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[p]);return f?(y.then(h,f),Promise.resolve()):y},t.createAnswer=function(h,f){const p=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[p]);return f?(y.then(h,f),Promise.resolve()):y};let l=function(u,h,f){const p=s.apply(this,[u]);return f?(p.then(h,f),Promise.resolve()):p};t.setLocalDescription=l,l=function(u,h,f){const p=a.apply(this,[u]);return f?(p.then(h,f),Promise.resolve()):p},t.setRemoteDescription=l,l=function(u,h,f){const p=o.apply(this,[u]);return f?(p.then(h,f),Promise.resolve()):p},t.addIceCandidate=l}function VA(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=s=>r(qA(s))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,s,a){t.mediaDevices.getUserMedia(r).then(s,a)}.bind(t))}function qA(e){return e&&e.video!==void 0?Object.assign({},e,{video:wA(e.video)}):e}function HA(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const a=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];l.urls===void 0&&l.url?(pw("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(r.iceServers[o])}r.iceServers=a}return new t(r,s)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function WA(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function KA(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function GA(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var JN=Object.freeze({__proto__:null,shimAudioContext:GA,shimCallbacksAPI:$A,shimConstraints:qA,shimCreateOfferLegacy:KA,shimGetUserMedia:VA,shimLocalStreamsAPI:zA,shimRTCIceServerUrls:HA,shimRemoteStreamsAPI:BA,shimTrackEventTransceiver:WA}),By={exports:{}},YN;function NG(){return YN||(YN=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((s,a)=>(a>0?"m="+s:s).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(s=>s.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let a=8;a<r.length;a+=2)switch(r[a]){case"raddr":s.relatedAddress=r[a+1];break;case"rport":s.relatedPort=parseInt(r[a+1],10);break;case"tcptype":s.tcpType=r[a+1];break;case"ufrag":s.ufrag=r[a+1],s.usernameFragment=r[a+1];break;default:s[r[a]]===void 0&&(s[r[a]]=r[a+1]);break}return s},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const s=n.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const a=n.type;return r.push("typ"),r.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const s=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(s!==1?"/"+s:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let s;const a=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<a.length;o++)s=a[o].trim().split("="),r[s[0].trim()]=s[1];return r},t.writeFmtp=function(n){let r="",s=n.payloadType;if(n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?a.push(o+"="+n.parameters[o]):a.push(o)}),r+="a=fmtp:"+s+" "+a.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",s=n.payloadType;return n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{r+="a=rtcp-fb:"+s+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),s={ssrc:parseInt(n.substring(7,r),10)},a=n.indexOf(":",r);return a>-1?(s.attribute=n.substring(r+1,a),s.value=n.substring(a+1)):s.attribute=n.substring(r+1),s},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let s="a=setup:"+r+`\r
`;return n.fingerprints.forEach(a=>{s+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),s},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const s=t.matchPrefix(n+r,"a=ice-ufrag:")[0],a=t.matchPrefix(n+r,"a=ice-pwd:")[0];return s&&a?{usernameFragment:s.substring(12),password:a.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=t.splitLines(n)[0].split(" ");r.profile=a[2];for(let l=3;l<a.length;l++){const u=a[l],h=t.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(h){const f=t.parseRtpMap(h),p=t.matchPrefix(n,"a=fmtp:"+u+" ");switch(f.parameters=p.length?t.parseFmtp(p[0]):{},f.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(t.parseRtcpFb),r.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(f.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(t.parseExtmap(l))});const o=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(l=>{o.forEach(u=>{l.rtcpFeedback.find(f=>f.type===u.type&&f.parameter===u.parameter)||l.rtcpFeedback.push(u)})}),r},t.writeRtpDescription=function(n,r){let s="";s+="m="+n+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{s+=t.writeRtpMap(o),s+=t.writeFmtp(o),s+=t.writeRtcpFb(o)});let a=0;return r.codecs.forEach(o=>{o.maxptime>a&&(a=o.maxptime)}),a>0&&(s+="a=maxptime:"+a+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{s+=t.writeExtmap(o)}),s},t.parseRtpEncodingParameters=function(n){const r=[],s=t.parseRtpParameters(n),a=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),u=l.length>0&&l[0].ssrc;let h;const f=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(k=>parseInt(k,10)));f.length>0&&f[0].length>1&&f[0][0]===u&&(h=f[0][1]),s.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let x={ssrc:u,codecPayloadType:parseInt(y.parameters.apt,10)};u&&h&&(x.rtx={ssrc:h}),r.push(x),a&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&u&&r.push({ssrc:u});let p=t.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-2e3*8:p=void 0,r.forEach(y=>{y.maxBitrate=p})),r},t.parseRtcpParameters=function(n){const r={},s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const a=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=a.length>0,r.compound=a.length===0;const o=t.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const s=t.matchPrefix(n,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const a=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(a.length>0)return r=a[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),s=t.matchPrefix(n,"a=max-message-size:");let a;s.length>0&&(a=parseInt(s[0].substring(19),10)),isNaN(a)&&(a=65536);const o=t.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:a};const l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){const u=l[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:a}}},t.writeSctpDescription=function(n,r){let s=[];return n.protocol!=="DTLS/SCTP"?s=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,s){let a;const o=r!==void 0?r:2;return n?a=n:a=t.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+a+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const s=t.splitLines(n);for(let a=0;a<s.length;a++)switch(s[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[a].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const s=t.splitLines(n)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},t.parseOLine=function(n){const s=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},e.exports=t})(By)),By.exports}var ZA=NG(),Pl=fG(ZA),jG=DW({__proto__:null,default:Pl},[ZA]);function am(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const s=new t(r),a=Pl.parseCandidate(r.candidate);for(const o in a)o in s||Object.defineProperty(s,o,{value:a[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Uc(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function o0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Uc(e,"icecandidate",t=>{if(t.candidate){const n=Pl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function om(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const u=Pl.splitSections(l.sdp);return u.shift(),u.some(h=>{const f=Pl.parseMLine(h);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},r=function(l){const u=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const h=parseInt(u[1],10);return h!==h?-1:h},s=function(l){let u=65536;return t.browser==="firefox"&&(t.version<57?l===-1?u=16384:u=2147483637:t.version<60?u=t.version===57?65535:65536:u=2147483637),u},a=function(l,u){let h=65536;t.browser==="firefox"&&t.version===57&&(h=65535);const f=Pl.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?h=parseInt(f[0].substring(19),10):t.browser==="firefox"&&u!==-1&&(h=2147483637),h},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),h=s(u),f=a(arguments[0],u);let p;h===0&&f===0?p=Number.POSITIVE_INFINITY:h===0||f===0?p=Math.max(h,f):p=Math.min(h,f);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return p}}),this._sctp=y}return o.apply(this,arguments)}}function cm(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,s){const a=r.send;r.send=function(){const l=arguments[0],u=l.length||l.size||l.byteLength;if(r.readyState==="open"&&s.sctp&&u>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const s=n.apply(this,arguments);return t(s,this),s},Uc(e,"datachannel",r=>(t(r.channel,r.target),r))}function c0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const a=s.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const o=new Event("connectionstatechange",s);a.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function l0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&s instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:s.type,sdp:a}):s.sdp=a}return n.apply(this,arguments)}}function lm(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function dm(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return n.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?n.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var EG=Object.freeze({__proto__:null,removeExtmapAllowMixed:l0,shimAddIceCandidateNullOrEmpty:lm,shimConnectionState:c0,shimMaxMessageSize:om,shimParameterlessSetLocalDescription:dm,shimRTCIceCandidate:am,shimRTCIceCandidateRelayProtocol:o0,shimSendThrowTypeError:cm});function TG(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=bA,r=SG(e),s={browserDetails:r,commonShim:EG,extractVersion:du,disableLog:wG,disableWarnings:kG,sdp:jG};switch(r.browser){case"chrome":if(!GN||!i0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),s;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),s;n("adapter.js shimming chrome."),s.browserShim=GN,lm(e,r),dm(e),kA(e,r),SA(e),i0(e,r),CA(e),TA(e,r),NA(e),jA(e),PA(e,r),am(e),o0(e),c0(e),om(e,r),cm(e),l0(e,r);break;case"firefox":if(!ZN||!a0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=ZN,lm(e,r),dm(e),_A(e,r),a0(e,r),RA(e),OA(e),AA(e),IA(e),DA(e),MA(e),LA(e),FA(e),UA(e),am(e),c0(e),om(e,r),cm(e);break;case"safari":if(!JN||!t.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=JN,lm(e,r),dm(e),HA(e),KA(e),$A(e),zA(e),BA(e),WA(e),VA(e),GA(e),am(e),o0(e),om(e,r),cm(e),l0(e,r);break;default:n("Unsupported browser!");break}return s}TG({window:typeof window>"u"?void 0:window});const PG=10,eu="lk_e2ee",_G="LKFrameEncryptionKey",RG={sharedKey:!1,ratchetSalt:_G,ratchetWindowSize:8,failureTolerance:PG,keyringSize:16};var To;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(To||(To={}));var QN;(function(e){e.KeyRatcheted="keyRatcheted"})(QN||(QN={}));var Co;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(Co||(Co={}));var XN;(function(e){e.Error="cryptorError"})(XN||(XN={}));function AG(){return IG()||d0()}function d0(){return typeof window.RTCRtpScriptTransform<"u"}function IG(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function OG(e){var t,n,r,s,a;if(((t=e.value)===null||t===void 0?void 0:t.case)!=="sipDtmf"&&((n=e.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=e.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((s=e.value)===null||s===void 0?void 0:s.case)!=="transcription"&&((a=e.value)===null||a===void 0?void 0:a.case)!=="encryptedPacket")return new ZR({value:e.value})}class Cle extends fa.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,s)=>{gt.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:s})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},RG),t),this.on(To.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,r){const s={key:t,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),s),this.emit(To.SetKey,s)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(To.RatchetRequest,t,n)}}class Ha extends Error{constructor(t,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=t}}var Tt;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"})(Tt||(Tt={}));class Lt extends Ha{constructor(t,n,r,s){super(1,t),this.name="ConnectionError",this.status=r,this.reason=n,this.context=s,this.reasonName=Tt[n]}}class gw extends Ha{constructor(t){super(21,t??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ia extends Ha{constructor(t){super(20,t??"track is invalid"),this.name="TrackInvalidError"}}class DG extends Ha{constructor(t){super(10,t??"unsupported server"),this.name="UnsupportedServer"}}class Yn extends Ha{constructor(t){super(12,t??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class u0 extends Ha{constructor(t){super(13,t??"unable to negotiate"),this.name="NegotiationError"}}class ej extends Ha{constructor(t,n){super(15,t),this.name="PublishTrackError",this.status=n}}class tj extends Ha{constructor(t,n){super(15,t),this.reason=n,this.reasonName=typeof n=="string"?n:mw[n]}}var Rr;(function(e){e[e.AlreadyOpened=0]="AlreadyOpened",e[e.AbnormalEnd=1]="AbnormalEnd",e[e.DecodeFailed=2]="DecodeFailed",e[e.LengthExceeded=3]="LengthExceeded",e[e.Incomplete=4]="Incomplete",e[e.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",e[e.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(Rr||(Rr={}));class Vs extends Ha{constructor(t,n){super(16,t),this.name="DataStreamError",this.reason=n,this.reasonName=Rr[n]}}var Pu;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(Pu||(Pu={}));(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(Pu||(Pu={}));var nj;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(nj||(nj={}));var le;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.Moved="moved",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.ParticipantActive="participantActive",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(le||(le={}));var ve;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackCpuConstrained="localTrackCpuConstrained",e.LocalSenderCreated="localSenderCreated",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.TrackCpuConstrained="trackCpuConstrained",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage",e.Active="active"})(ve||(ve={}));var Me;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected",e.RoomMoved="roomMoved"})(Me||(Me={}));var Ie;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.CpuConstrained="cpuConstrained",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate",e.PreConnectBufferFlushed="preConnectBufferFlushed"})(Ie||(Ie={}));function MG(e){return typeof e>"u"?e:typeof structuredClone=="function"?typeof e=="object"&&e!==null?structuredClone(Object.assign({},e)):structuredClone(e):JSON.parse(JSON.stringify(e))}const LG=/version\/(\d+(\.?_?\d+)+)/i;let $y;function Dr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if($y===void 0||t){const r=FG.find(s=>{let{test:a}=s;return a.test(n)});$y=r?.describe(n)}return $y}const FG=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:um(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Vy(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:um(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Vy(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:um(LG,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:Vy(e)}}}];function um(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=t.match(e);return r&&r.length>=n&&r[n]||""}function Vy(e){return e.includes("mac os")?um(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var UG="2.15.13";const zG=UG,BG=16;class mr{}mr.setTimeout=function(){return setTimeout(...arguments)};mr.setInterval=function(){return setInterval(...arguments)};mr.clearTimeout=function(){return clearTimeout(...arguments)};mr.clearInterval=function(){return clearInterval(...arguments)};const $G=5e3,tu=[];var Es;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(Es||(Es={}));class Y extends fa.EventEmitter{get streamState(){return this._streamState}setStreamState(t){this._streamState=t}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var s;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=Y.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=gt,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),$G):this.handleAppVisibilityChanged()},this.log=Va((s=r.loggerName)!==null&&s!==void 0?s:wi.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=Y.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Ct(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===Y.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===Y.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(tu.forEach(a=>{a.parentElement===null&&!t&&(t=a)}),t&&tu.splice(tu.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),xl(this.mediaStreamTrack,t);const r=t.srcObject.getTracks(),s=r.some(a=>a.kind==="audio");return t.play().then(()=>{this.emit(s?Ie.AudioPlaybackStarted:Ie.VideoPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(s?Ie.AudioPlaybackFailed:Ie.VideoPlaybackFailed,a):a.name==="AbortError"?gt.debug("".concat(s?"audio":"video"," playback aborted, likely due to new play request")):gt.warn("could not playback ".concat(s?"audio":"video"),a),s&&t&&r.some(o=>o.kind==="video")&&a.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(Ie.ElementAttached,t),t}detach(t){try{if(t){_l(this.mediaStreamTrack,t);const r=this.attachedElements.indexOf(t);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(t),this.emit(Ie.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(r=>{_l(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(Ie.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=Va(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),tu.forEach(r=>{r.parentElement||(n=!1)}),n&&tu.push(t)}}handleAppVisibilityChanged(){return L(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Y.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){os()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){os()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function xl(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let r;e.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(e)||(r.forEach(s=>{n.removeTrack(s)}),n.addTrack(e)),(!jc()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(jc()||Nc())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function _l(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(h){h.Audio="audio",h.Video="video",h.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(h){h.Camera="camera",h.Microphone="microphone",h.ScreenShare="screen_share",h.ScreenShareAudio="screen_share_audio",h.Unknown="unknown"})(n=e.Source||(e.Source={}));let r;(function(h){h.Active="active",h.Paused="paused",h.Unknown="unknown"})(r=e.StreamState||(e.StreamState={}));function s(h){switch(h){case t.Audio:return hi.AUDIO;case t.Video:return hi.VIDEO;default:return hi.DATA}}e.kindToProto=s;function a(h){switch(h){case hi.AUDIO:return t.Audio;case hi.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=a;function o(h){switch(h){case n.Camera:return zn.CAMERA;case n.Microphone:return zn.MICROPHONE;case n.ScreenShare:return zn.SCREEN_SHARE;case n.ScreenShareAudio:return zn.SCREEN_SHARE_AUDIO;default:return zn.UNKNOWN}}e.sourceToProto=o;function l(h){switch(h){case zn.CAMERA:return n.Camera;case zn.MICROPHONE:return n.Microphone;case zn.SCREEN_SHARE:return n.ScreenShare;case zn.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=l;function u(h){switch(h){case t0.ACTIVE:return r.Active;case t0.PAUSED:return r.Paused;default:return r.Unknown}}e.streamStateFromProto=u})(Y||(Y={}));class $t{constructor(t,n,r,s,a){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&r!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:r,maxFramerate:s,priority:a};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const VG=["vp8","h264"],qG=["vp8","h264","vp9","av1","h265"];function HG(e){return!!VG.find(t=>t===e)}const WG=HG;var rj;(function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"})(rj||(rj={}));var h0;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}})(h0||(h0={}));const _u={h90:new $t(160,90,9e4,20),h180:new $t(320,180,16e4,20),h216:new $t(384,216,18e4,20),h360:new $t(640,360,45e4,20),h540:new $t(960,540,8e5,25),h720:new $t(1280,720,17e5,30),h1080:new $t(1920,1080,3e6,30),h1440:new $t(2560,1440,5e6,30),h2160:new $t(3840,2160,8e6,30)},f0={h120:new $t(160,120,7e4,20),h180:new $t(240,180,125e3,20),h240:new $t(320,240,14e4,20),h360:new $t(480,360,33e4,20),h480:new $t(640,480,5e5,20),h540:new $t(720,540,6e5,25),h720:new $t(960,720,13e5,30),h1080:new $t(1440,1080,23e5,30),h1440:new $t(1920,1440,38e5,30)},vw={h360fps3:new $t(640,360,2e5,3,"medium"),h360fps15:new $t(640,360,4e5,15,"medium"),h720fps5:new $t(1280,720,8e5,5,"medium"),h720fps15:new $t(1280,720,15e5,15,"medium"),h720fps30:new $t(1280,720,2e6,30,"medium"),h1080fps15:new $t(1920,1080,25e5,15,"medium"),h1080fps30:new $t(1920,1080,5e6,30,"medium"),original:new $t(0,0,7e6,30,"medium")},KG="|",sj="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function GG(e){const t=e.split(KG);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function Mr(e){return L(this,void 0,void 0,function*(){return new Promise(t=>mr.setTimeout(t,e))})}function m0(){return"addTransceiver"in RTCPeerConnection.prototype}function p0(){return"addTrack"in RTCPeerConnection.prototype}function ZG(){if(!("getCapabilities"in RTCRtpSender)||jc()||Nc())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType.toLowerCase()==="video/av1"){t=!0;break}}return t}function JG(){if(!("getCapabilities"in RTCRtpSender)||Nc())return!1;if(jc()){const n=Dr();if(n?.version&&ki(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&ki(n.osVersion,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){t=!0;break}}return t}function Zi(e){return e==="av1"||e==="vp9"}function g0(e){return!document||Ru()?!1:(e||(e=document.createElement("audio")),"setSinkId"in e)}function YG(){return typeof RTCPeerConnection>"u"?!1:m0()||p0()}function Nc(){var e;return((e=Dr())===null||e===void 0?void 0:e.name)==="Firefox"}function ij(){const e=Dr();return!!e&&e.name==="Chrome"&&e.os!=="iOS"}function jc(){var e;return((e=Dr())===null||e===void 0?void 0:e.name)==="Safari"}function Ru(){const e=Dr();return e?.name==="Safari"||e?.os==="iOS"}function QG(){const e=Dr();return e?.name==="Safari"&&e.version.startsWith("17.")||e?.os==="iOS"&&!!e?.osVersion&&ki(e.osVersion,"17")>=0}function XG(e){return e||(e=Dr()),e?.name==="Safari"&&ki(e.version,"18.3")>0||e?.os==="iOS"&&!!e?.osVersion&&ki(e.osVersion,"18.3")>0}function JA(){var e,t;return os()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function eZ(){const e=Dr(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&ki(e.osVersion,t)>=0?!0:e.name==="Safari"&&ki(e.version,t)>=0}function os(){return typeof document<"u"}function oa(){return navigator.product=="ReactNative"}function v0(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function YA(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function QA(){if(!oa())return;let e=YA();if(e)return e.platform}function aj(){if(os())return window.devicePixelRatio;if(oa()){let e=YA();if(e)return e.devicePixelRatio}return 1}function ki(e,t){const n=e.split("."),r=t.split("."),s=Math.min(n.length,r.length);for(let a=0;a<s;++a){const o=parseInt(n[a],10),l=parseInt(r[a],10);if(o>l)return 1;if(o<l)return-1;if(a===s-1&&o===l)return 0}return e===""&&t!==""?-1:t===""?1:n.length==r.length?0:n.length<r.length?-1:1}function tZ(e){for(const t of e)t.target.handleResize(t)}function nZ(e){for(const t of e)t.target.handleVisibilityChanged(t)}let qy=null;const oj=()=>(qy||(qy=new ResizeObserver(tZ)),qy);let Hy=null;const cj=()=>(Hy||(Hy=new IntersectionObserver(nZ,{root:null,rootMargin:"0px"})),Hy);function rZ(){var e;const t=new nA({sdk:rA.JS,protocol:BG,version:zG});return oa()&&(t.os=(e=QA())!==null&&e!==void 0?e:""),t}function lj(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=document.createElement("canvas");s.width=e,s.height=t;const a=s.getContext("2d");a?.fillRect(0,0,s.width,s.height),r&&a&&(a.beginPath(),a.arc(e/2,t/2,50,0,Math.PI*2,!0),a.closePath(),a.fillStyle="grey",a.fill());const o=s.captureStream(),[l]=o.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let nu;function Wy(){if(!nu){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const r=e.createMediaStreamDestination();if(t.connect(n),n.connect(r),t.start(),[nu]=r.stream.getAudioTracks(),!nu)throw Error("Could not get empty media stream audio track");nu.enabled=!1}return nu.clone()}class Zs{get isResolved(){return this._isResolved}constructor(t,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,s)=>L(this,void 0,void 0,function*(){this.resolve=r,this.reject=s,t&&(yield t(r,s))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function sZ(e){return qG.includes(e)}function Po(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact!==void 0)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal!==void 0)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function iZ(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function y0(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function aZ(e,t){return e.segments.map(n=>{let{id:r,text:s,language:a,startTime:o,endTime:l,final:u}=n;var h;const f=(h=t.get(r))!==null&&h!==void 0?h:Date.now(),p=Date.now();return u?t.delete(r):t.set(r,f),{id:r,text:s,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(l.toString()),final:u,language:a,firstReceivedTime:f,lastReceivedTime:p}})}function oZ(e){const{id:t,timestamp:n,message:r,editTimestamp:s}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:s?Number.parseInt(s.toString()):void 0,message:r}}function dj(e){switch(e.reason){case Tt.LeaveRequest:return e.context;case Tt.Cancelled:return yi.CLIENT_INITIATED;case Tt.NotAllowed:return yi.USER_REJECTED;case Tt.ServerUnreachable:return yi.JOIN_FAILURE;default:return yi.UNKNOWN_REASON}}function hm(e){return e!==void 0?Number(e):void 0}function ac(e){return e!==void 0?BigInt(e):void 0}function fc(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function ea(e){return!!e&&e.kind==Y.Kind.Audio}function $o(e){return!!e&&e.kind==Y.Kind.Video}function vo(e){return fc(e)&&$o(e)}function Ta(e){return fc(e)&&ea(e)}function x0(e){return!!e&&!e.isLocal}function cZ(e){return!!e&&!e.isLocal}function Ky(e){return x0(e)&&$o(e)}function lZ(e){return e.isLocal}function dZ(e,t){const n=[];let r=new TextEncoder().encode(e);for(;r.length>t;){let s=t;for(;s>0;){const a=r[s];if(a!==void 0&&(a&192)!==128)break;s--}n.push(r.slice(0,s)),r=r.slice(s)}return r.length>0&&n.push(r),n}function XA(e,t,n){var r,s,a,o;const{optionsWithoutProcessor:l,audioProcessor:u,videoProcessor:h}=nI(e??{}),f=t?.processor,p=n?.processor,y=l??{};return y.audio===!0&&(y.audio={}),y.video===!0&&(y.video={}),y.audio&&(b0(y.audio,t),(r=(a=y.audio).deviceId)!==null&&r!==void 0||(a.deviceId={ideal:"default"}),(u||f)&&(y.audio.processor=u??f)),y.video&&(b0(y.video,n),(s=(o=y.video).deviceId)!==null&&s!==void 0||(o.deviceId={ideal:"default"}),(h||p)&&(y.video.processor=h??p)),y}function b0(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function yw(e){var t,n,r,s;const a={};if(e.video)if(typeof e.video=="object"){const o={},l=o,u=e.video;Object.keys(u).forEach(h=>{switch(h){case"resolution":b0(l,u.resolution);break;default:l[h]=u[h]}}),a.video=o,(t=(r=a.video).deviceId)!==null&&t!==void 0||(r.deviceId={ideal:"default"})}else a.video=e.video?{deviceId:{ideal:"default"}}:!1;else a.video=!1;return e.audio?typeof e.audio=="object"?(a.audio=e.audio,(n=(s=a.audio).deviceId)!==null&&n!==void 0||(s.deviceId={ideal:"default"})):a.audio={deviceId:{ideal:"default"}}:a.audio=!1,a}function eI(e){return L(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const r=tI();if(r){const s=r.createAnalyser();s.fftSize=2048;const a=s.frequencyBinCount,o=new Uint8Array(a);r.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(s),yield Mr(n),s.getByteTimeDomainData(o);const u=o.some(h=>h!==128&&h!==0);return r.close(),!u}return!1})()})}function tI(){var e;const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((e=window.document)===null||e===void 0)&&e.body)){const r=()=>L(this,void 0,void 0,function*(){var s;try{n.state==="suspended"&&(yield n.resume())}catch(a){console.warn("Error trying to auto-resume audio context",a)}finally{(s=window.document.body)===null||s===void 0||s.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var s;n.state==="closed"&&((s=window.document.body)===null||s===void 0||s.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function uZ(e){return e==="audioinput"?Y.Source.Microphone:e==="videoinput"?Y.Source.Camera:Y.Source.Unknown}function w0(e){return e===Y.Source.Microphone?"audioinput":e===Y.Source.Camera?"videoinput":void 0}function hZ(e){var t,n;let r=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(r=typeof r=="boolean"?{}:r,jc()?r=Object.assign(Object.assign({},r),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:r,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function pu(e){return e.split("/")[1].toLowerCase()}function fZ(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new lw({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function Ct(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?Ct(e.track):{})}}function mZ(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function pZ(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const r=[...Object.keys(t),...Object.keys(e)],s={};for(const a of r)e[a]!==t[a]&&(s[a]=(n=t[a])!==null&&n!==void 0?n:"");return s}function nI(e){const t=Object.assign({},e);let n,r;return typeof t.audio=="object"&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),typeof t.video=="object"&&t.video.processor&&(r=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:MG(t)}}function gZ(e){switch(e){case zn.CAMERA:return Y.Source.Camera;case zn.MICROPHONE:return Y.Source.Microphone;case zn.SCREEN_SHARE:return Y.Source.ScreenShare;case zn.SCREEN_SHARE_AUDIO:return Y.Source.ScreenShareAudio;default:return Y.Source.Unknown}}function uj(e,t){return e.width*e.height<t.width*t.height}function vZ(e,t){var n;return(n=e.layers)===null||n===void 0?void 0:n.find(r=>r.quality===t)}class yZ extends fa.EventEmitter{constructor(t,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var s,a;const{kind:o,data:l}=r.data;switch(o){case"error":gt.error(l.error.message),this.emit(Co.EncryptionError,l.error);break;case"initAck":l.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)});break;case"enable":if(l.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)}),this.encryptionEnabled!==l.enabled&&l.participantIdentity===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity))this.emit(Co.ParticipantEncryptionStatusChanged,l.enabled,this.room.localParticipant),this.encryptionEnabled=l.enabled;else if(l.participantIdentity){const f=(a=this.room)===null||a===void 0?void 0:a.getParticipantByIdentity(l.participantIdentity);if(!f)throw TypeError("couldn't set encryption status, participant not found".concat(l.participantIdentity));this.emit(Co.ParticipantEncryptionStatusChanged,l.enabled,f)}break;case"ratchetKey":this.keyProvider.emit(To.KeyRatcheted,l.ratchetResult,l.participantIdentity,l.keyIndex);break;case"decryptDataResponse":const u=this.decryptDataRequests.get(l.uuid);u?.resolve&&u.resolve(l);break;case"encryptDataResponse":const h=this.encryptDataRequests.get(l.uuid);h?.resolve&&h.resolve(l);break}},this.onWorkerError=r=>{gt.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Co.EncryptionError,r.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(t){if(!AG())throw new gw("tried to setup end-to-end encryption on an unsupported browser");if(gt.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:gG.getLevel()}};this.worker&&(gt.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){gt.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?gt.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(Me.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(le.TrackPublished,(r,s)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Xn.NONE,s.identity)),t.on(le.ConnectionStateChanged,r=>{r===Et.Connected&&t.remoteParticipants.forEach(s=>{s.trackPublications.forEach(a=>{this.setParticipantCryptorEnabled(a.trackInfo.encryption!==Xn.NONE,s.identity)})})}).on(le.TrackUnsubscribed,(r,s,a)=>{var o;const l={kind:"removeTransform",data:{participantIdentity:a.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(l)}).on(le.TrackSubscribed,(r,s,a)=>{this.setupE2EEReceiver(r,a.identity,s.trackInfo)}).on(le.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on(ve.LocalSenderCreated,(r,s)=>L(this,void 0,void 0,function*(){this.setupE2EESender(s,r)})),t.localParticipant.on(ve.LocalTrackPublished,r=>{if(!$o(r.track)||!Ru())return;const s={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:pu(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s)}),n.on(To.SetKey,r=>this.postKey(r)).on(To.RatchetRequest,(r,s)=>this.postRatchetRequest(r,s))}encryptData(t){return L(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:t,participantIdentity:this.room.localParticipant.identity}},s=new Zs;return s.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,s),this.worker.postMessage(r),s.promise})}handleEncryptedData(t,n,r,s){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const a=crypto.randomUUID(),o={kind:"decryptDataRequest",data:{uuid:a,payload:t,iv:n,participantIdentity:r,keyIndex:s}},l=new Zs;return l.onFinally=()=>{this.decryptDataRequests.delete(a)},this.decryptDataRequests.set(a,l),this.worker.postMessage(o),l.promise}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(r)}postKey(t){let{key:n,participantIdentity:r,keyIndex:s}=t;var a;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity),key:n,keyIndex:s}};this.worker.postMessage(o)}postEnable(t,n){if(this.worker){const r={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,r){if(t.receiver){if(!r?.mimeType||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?pu(r.mimeType):void 0)}}setupE2EESender(t,n){if(!fc(t)||!n){n||gt.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,r,s){return L(this,void 0,void 0,function*(){if(this.worker){if(d0()&&!ij()){const a={kind:"decode",participantIdentity:r,trackId:n,codec:s};t.transform=new RTCRtpScriptTransform(this.worker,a)}else{if(eu in t&&s){const u={kind:"updateCodec",data:{trackId:n,codec:s,participantIdentity:r}};this.worker.postMessage(u);return}let a=t.writableStream,o=t.readableStream;if(!a||!o){const u=t.createEncodedStreams();t.writableStream=u.writable,a=u.writable,t.readableStream=u.readable,o=u.readable}const l={kind:"decode",data:{readableStream:o,writableStream:a,trackId:n,codec:s,participantIdentity:r,isReuse:eu in t}};this.worker.postMessage(l,[o,a])}t[eu]=!0}})}handleSender(t,n,r){var s;if(!(eu in t||!this.worker)){if(!(!((s=this.room)===null||s===void 0)&&s.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(d0()&&!ij()){gt.info("initialize script transform");const a={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,a)}else{gt.info("initialize encoded streams");const a=t.createEncodedStreams(),o={kind:"encode",data:{readableStream:a.readable,writableStream:a.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(o,[a.readable,a.writable])}t[eu]=!0}}}const Gy="default";class or{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new or),this.instance}get previousDevices(){return this._previousDevices}getDevices(t){return L(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var a;if(((a=or.userMediaPromiseMap)===null||a===void 0?void 0:a.size)>0){gt.debug("awaiting getUserMedia promise");try{n?yield or.userMediaPromiseMap.get(n):yield Promise.all(or.userMediaPromiseMap.values())}catch{gt.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(s&&!(jc()&&r.hasDeviceInUse(n))&&(o.filter(u=>u.kind===n).length===0||o.some(u=>{const h=u.label==="",f=n?u.kind===n:!0;return h&&f}))){const u={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},h=yield navigator.mediaDevices.getUserMedia(u);o=yield navigator.mediaDevices.enumerateDevices(),h.getTracks().forEach(f=>{f.stop()})}return r._previousDevices=o,n&&(o=o.filter(l=>l.kind===n)),o})()})}normalizeDeviceId(t,n,r){return L(this,void 0,void 0,function*(){if(n!==Gy)return n;const s=yield this.getDevices(t),a=s.find(l=>l.deviceId===Gy);if(!a){gt.warn("could not reliably determine default device");return}const o=s.find(l=>l.deviceId!==Gy&&l.groupId===(r??a.groupId));if(!o){gt.warn("could not reliably determine default device");return}return o?.deviceId})}hasDeviceInUse(t){return t?or.userMediaPromiseMap.has(t):or.userMediaPromiseMap.size>0}}or.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];or.userMediaPromiseMap=new Map;var gu;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(gu||(gu={}));class xZ{constructor(){this.pendingTasks=new Map,this.taskMutex=new hs,this.nextTaskIndex=0}run(t){return L(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:gu.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=gu.RUNNING,yield t()}finally{n.status=gu.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return L(this,void 0,void 0,function*(){return this.run(()=>L(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class bZ{get readyState(){return this.ws.readyState}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,s;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=t;const a=new WebSocket(t,(s=n.protocols)!==null&&s!==void 0?s:[]);a.binaryType="arraybuffer",this.ws=a;const o=function(){let{closeCode:l,reason:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a.close(l,u)};this.opened=new Promise((l,u)=>{a.onopen=()=>{l({readable:new ReadableStream({start(h){a.onmessage=f=>{let{data:p}=f;return h.enqueue(p)},a.onerror=f=>h.error(f)},cancel:o}),writable:new WritableStream({write(h){a.send(h)},abort(){a.close()},close:o}),protocol:a.protocol,extensions:a.extensions}),a.removeEventListener("error",u)},a.addEventListener("error",u)}),this.closed=new Promise((l,u)=>{const h=()=>L(this,void 0,void 0,function*(){const f=new Promise(y=>{a.readyState!==WebSocket.CLOSED&&a.addEventListener("close",x=>{y(x)},{once:!0})}),p=yield Promise.race([Mr(250),f]);p?l(p):u(new Error("Encountered unspecified websocket error without a timely close event"))});a.onclose=f=>{let{code:p,reason:y}=f;l({closeCode:p,reason:y}),a.removeEventListener("error",h)},a.addEventListener("error",h)}),n.signal&&(n.signal.onabort=()=>a.close()),this.close=o}}function wZ(e,t){const n=new URL(iZ(e));return t.forEach((r,s)=>{n.searchParams.set(s,r)}),rI(n,"rtc")}function kZ(e){const t=new URL(y0(e));return rI(t,"validate")}function SZ(e){return e.endsWith("/")?e:"".concat(e,"/")}function rI(e,t){return e.pathname="".concat(SZ(e.pathname)).concat(t),e.toString()}function hj(e){if(typeof e=="string")return BN.fromJson(JSON.parse(e),{ignoreUnknownFields:!0});if(e instanceof ArrayBuffer)return BN.fromBinary(new Uint8Array(e));throw new Error("could not decode websocket message: ".concat(typeof e))}function CZ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(e instanceof AbortSignal))return t;const n=e.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:t;default:return"toString"in n?n.toString():t}}const NZ=["syncState","trickle","offer","answer","simulate","leave"];function jZ(e){const t=NZ.indexOf(e.case)>=0;return gt.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var gn;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(gn||(gn={}));const EZ=250;class xw{get currentState(){return this.state}get isDisconnected(){return this.state===gn.DISCONNECTING||this.state===gn.DISCONNECTED}get isEstablishingConnection(){return this.state===gn.CONNECTING||this.state===gn.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=gn.DISCONNECTED,this.log=gt,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Va((r=n.loggerName)!==null&&r!==void 0?r:wi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new xZ,this.queuedRequests=[],this.closingLock=new hs,this.connectionLock=new hs,this.state=gn.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,r,s){return L(this,void 0,void 0,function*(){return this.state=gn.CONNECTING,this.options=r,yield this.connect(t,n,r,s)})}reconnect(t,n,r,s){return L(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=gn.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:s}))})}connect(t,n,r,s){return L(this,void 0,void 0,function*(){const a=yield this.connectionLock.lock();this.connectOptions=r;const o=rZ(),l=r.singlePeerConnection?PZ(n,o,r):TZ(n,o,r),u=wZ(t,l),h=kZ(u);return new Promise((f,p)=>L(this,void 0,void 0,function*(){var y,x;try{let k=!1;const b=P=>L(this,void 0,void 0,function*(){if(k)return;k=!0;const T=P instanceof Event?P.currentTarget:P,I=CZ(T,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(I)).catch(_=>{this.log.error(_),this.close()}):this.close(),S(),p(T instanceof AbortSignal?T.reason:T)});s?.addEventListener("abort",b);const S=()=>{clearTimeout(N),s?.removeEventListener("abort",b)},N=setTimeout(()=>{b(new Lt("room connection has timed out (signal)",Tt.ServerUnreachable))},r.websocketTimeout),E=(P,T)=>{this.handleSignalConnected(P,N,T)},j=new URL(u);j.searchParams.has("access_token")&&j.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(j),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new bZ(u);try{this.ws.closed.then(M=>{this.isEstablishingConnection&&p(new Lt("Websocket got closed during a (re)connection attempt: ".concat(M.reason),Tt.InternalError)),M.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:M.reason,code:M.closeCode,wasClean:M.closeCode===1e3,state:this.state}))}).catch(M=>{this.isEstablishingConnection&&p(new Lt("Websocket error during a (re)connection attempt: ".concat(M),Tt.InternalError))});const P=yield this.ws.opened.catch(M=>L(this,void 0,void 0,function*(){if(this.state!==gn.CONNECTED){this.state=gn.DISCONNECTED,clearTimeout(N);const q=yield this.handleConnectionError(M,h);p(q);return}this.handleWSError(M),p(M)}));if(clearTimeout(N),!P)return;const T=P.readable.getReader();this.streamWriter=P.writable.getWriter();const I=yield T.read();if(T.releaseLock(),!I.value)throw new Lt("no message received as first message",Tt.InternalError);const _=hj(I.value),A=this.validateFirstMessage(_,(y=r.reconnect)!==null&&y!==void 0?y:!1);if(!A.isValid){p(A.error);return}((x=_.message)===null||x===void 0?void 0:x.case)==="join"&&(this.pingTimeoutDuration=_.message.value.pingTimeout,this.pingIntervalDuration=_.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const O=A.shouldProcessFirstMessage?_:void 0;E(P,O),f(A.response)}catch(P){p(P)}finally{S()}}finally{a()}}))})}startReadingLoop(t,n){return L(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield Mr(this.signalLatency));const{done:r,value:s}=yield t.read();if(r)break;const a=hj(s);this.handleSignalResponse(a)}})}close(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){const s=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=gn.DISCONNECTING),t.ws){t.ws.close({closeCode:1e3,reason:r});const a=t.ws.closed;t.ws=void 0,t.streamWriter=void 0,yield Promise.race([a,Mr(EZ)])}}catch(a){t.log.debug("websocket error while closing",Object.assign(Object.assign({},t.logContext),{error:a}))}finally{n&&(t.state=gn.DISCONNECTED),s()}})()})}sendOffer(t,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:bl(t,n)})}sendAnswer(t,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:bl(t,n)})}sendIceCandidate(t,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new eg({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new tg({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return L(this,arguments,void 0,function(r,s){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const l=a.getNextRequestId();return yield a.sendRequest({case:"updateMetadata",value:new uw({requestId:l,metadata:r,name:s,attributes:o})}),l})()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new dA({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new fA({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:cn.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new gA({timestamp:cn.parse(Date.now()),rtt:cn.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new dw({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new rg({reason:yi.CLIENT_INITIATED,action:Tl.DISCONNECT})})}sendRequest(t){return L(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!s&&!jZ(n)&&r.state===gn.RECONNECTING){r.queuedRequests.push(()=>L(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(s||(yield r.requestQueue.flush()),r.signalLatency&&(yield Mr(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n?.case),r.logContext);return}const o=new BK({message:n});try{r.useJSON?yield r.streamWriter.write(o.toJsonString()):yield r.streamWriter.write(o.toBinary())}catch(l){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:l}))}})()})}handleSignalResponse(t){var n,r;const s=t.message;if(s==null){this.log.debug("received unsupported message",this.logContext);return}let a=!1;if(s.case==="answer"){const o=fj(s.value);this.onAnswer&&this.onAnswer(o,s.value.id,s.value.midToTrackId)}else if(s.case==="offer"){const o=fj(s.value);this.onOffer&&this.onOffer(o,s.value.id,s.value.midToTrackId)}else if(s.case==="trickle"){const o=JSON.parse(s.value.candidateInit);this.onTrickle&&this.onTrickle(o,s.value.target)}else s.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=s.value.participants)!==null&&n!==void 0?n:[]):s.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.value):s.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=s.value.speakers)!==null&&r!==void 0?r:[]):s.case==="leave"?this.onLeave&&this.onLeave(s.value):s.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.value.sid,s.value.muted):s.case==="roomUpdate"?this.onRoomUpdate&&s.value.room&&this.onRoomUpdate(s.value.room):s.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(s.value):s.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.value):s.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.value):s.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.value):s.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(s.value):s.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(s.value):s.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(s.value):s.case==="pong"||(s.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(s.value.lastPingTimestamp.toString()),this.resetPingTimeout(),a=!0):s.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(s.value):s.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(s.value.trackSid):s.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(s.value.token),this.onRoomMoved&&this.onRoomMoved(s.value)):s.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(s.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:s.case})));a||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return L(this,void 0,void 0,function*(){if(this.state===gn.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,t),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=mr.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&mr.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=mr.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&mr.clearInterval(this.pingInterval)}handleSignalConnected(t,n,r){this.state=gn.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(t.readable.getReader(),r)}validateFirstMessage(t,n){var r,s,a,o,l;return((r=t.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:t.message.value}:this.state===gn.RECONNECTING&&((s=t.message)===null||s===void 0?void 0:s.case)!=="leave"?((a=t.message)===null||a===void 0?void 0:a.case)==="reconnect"?{isValid:!0,response:t.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((o=t.message)===null||o===void 0?void 0:o.case)==="leave"?{isValid:!1,error:new Lt("Received leave request while trying to (re)connect",Tt.LeaveRequest,void 0,t.message.value.reason)}:n?{isValid:!1,error:new Lt("Unexpected first message",Tt.InternalError)}:{isValid:!1,error:new Lt("did not receive join response, got ".concat((l=t.message)===null||l===void 0?void 0:l.case," instead"),Tt.InternalError)}}handleConnectionError(t,n){return L(this,void 0,void 0,function*(){try{const r=yield fetch(n);if(r.status.toFixed(0).startsWith("4")){const s=yield r.text();return new Lt(s,Tt.NotAllowed,r.status)}else return t instanceof Lt?t:new Lt("Encountered unknown websocket error during connection: ".concat(t),Tt.InternalError,r.status)}catch(r){return r instanceof Lt?r:new Lt(r instanceof Error?r.message:"server was not reachable",Tt.ServerUnreachable)}})}}function fj(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function bl(e,t){return new Lo({sdp:e.sdp,type:e.type,id:t})}function TZ(e,t,n){var r;const s=new URLSearchParams;return s.set("access_token",e),n.reconnect&&(s.set("reconnect","1"),n.sid&&s.set("sid",n.sid)),s.set("auto_subscribe",n.autoSubscribe?"1":"0"),s.set("sdk",oa()?"reactnative":"js"),s.set("version",t.version),s.set("protocol",t.protocol.toString()),t.deviceModel&&s.set("device_model",t.deviceModel),t.os&&s.set("os",t.os),t.osVersion&&s.set("os_version",t.osVersion),t.browser&&s.set("browser",t.browser),t.browserVersion&&s.set("browser_version",t.browserVersion),n.adaptiveStream&&s.set("adaptive_stream","1"),n.reconnectReason&&s.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&s.set("network",navigator.connection.type),s}function PZ(e,t,n){const r=new URLSearchParams;r.set("access_token",e);const s=new lG({clientInfo:t,connectionSettings:new vA({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(s.reconnectReason=n.reconnectReason);const a=new dG({joinRequest:s.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(a.toBinary()))),r}class mj{constructor(){this.buffer=[],this._totalSize=0}push(t){this.buffer.push(t),this._totalSize+=t.data.byteLength}pop(){const t=this.buffer.shift();return t&&(this._totalSize-=t.data.byteLength),t}getAll(){return this.buffer.slice()}popToSequence(t){for(;this.buffer.length>0&&this.buffer[0].sequence<=t;)this.pop()}alignBufferedAmount(t){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=t)break;this.pop()}}get length(){return this.buffer.length}}class _Z{constructor(t){this._map=new Map,this._lastCleanup=0,this.ttl=t}set(t,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const s=r+this.ttl;return this._map.set(t,{value:n,expiresAt:s}),this}get(t){const n=this._map.get(t);if(n){if(n.expiresAt<Date.now()){this._map.delete(t);return}return n.value}}has(t){const n=this._map.get(t);return n?n.expiresAt<Date.now()?(this._map.delete(t),!1):!0:!1}delete(t){return this._map.delete(t)}clear(){this._map.clear()}cleanup(){const t=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<t&&this._map.delete(n);this._lastCleanup=t}get size(){return this.cleanup(),this._map.size}forEach(t){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&t(r.value,n,this.asValueMap())}map(t){this.cleanup();const n=[],r=this.asValueMap();for(const[s,a]of r.entries())n.push(t(a,s,r));return n}asValueMap(){const t=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&t.set(n,r.value);return t}}var ci={},Zy={},Jy={exports:{}},pj;function bw(){if(pj)return Jy.exports;pj=1;var e=Jy.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Jy.exports}var gj;function RZ(){return gj||(gj=1,(function(e){var t=function(l){return String(Number(l))===l?Number(l):l},n=function(l,u,h,f){if(f&&!h)u[f]=t(l[1]);else for(var p=0;p<h.length;p+=1)l[p+1]!=null&&(u[h[p]]=t(l[p+1]))},r=function(l,u,h){var f=l.name&&l.names;l.push&&!u[l.push]?u[l.push]=[]:f&&!u[l.name]&&(u[l.name]={});var p=l.push?{}:f?u[l.name]:u;n(h.match(l.reg),p,l.names,l.name),l.push&&u[l.push].push(p)},s=bw(),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(l){var u={},h=[],f=u;return l.split(/(\r\n|\r|\n)/).filter(a).forEach(function(p){var y=p[0],x=p.slice(2);y==="m"&&(h.push({rtp:[],fmtp:[]}),f=h[h.length-1]);for(var k=0;k<(s[y]||[]).length;k+=1){var b=s[y][k];if(b.reg.test(x))return r(b,f,x)}}),u.media=h,u};var o=function(l,u){var h=u.split(/=(.+)/,2);return h.length===2?l[h[0]]=t(h[1]):h.length===1&&u.length>1&&(l[h[0]]=void 0),l};e.parseParams=function(l){return l.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(l){return l.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(l){for(var u=[],h=l.split(" ").map(t),f=0;f<h.length;f+=3)u.push({component:h[f],ip:h[f+1],port:h[f+2]});return u},e.parseImageAttributes=function(l){return l.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(l){return l.split(";").map(function(u){return u.split(",").map(function(h){var f,p=!1;return h[0]!=="~"?f=t(h):(f=t(h.substring(1,h.length)),p=!0),{scid:f,paused:p}})})}})(Zy)),Zy}var Yy,vj;function AZ(){if(vj)return Yy;vj=1;var e=bw(),t=/%[sdv%]/g,n=function(o){var l=1,u=arguments,h=u.length;return o.replace(t,function(f){if(l>=h)return f;var p=u[l];switch(l+=1,f){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},r=function(o,l,u){var h=l.format instanceof Function?l.format(l.push?u:u[l.name]):l.format,f=[o+"="+h];if(l.names)for(var p=0;p<l.names.length;p+=1){var y=l.names[p];l.name?f.push(u[l.name][y]):f.push(u[l.names[p]])}else f.push(u[l.name]);return n.apply(null,f)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];return Yy=function(o,l){l=l||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var u=l.outerOrder||s,h=l.innerOrder||a,f=[];return u.forEach(function(p){e[p].forEach(function(y){y.name in o&&o[y.name]!=null?f.push(r(p,y,o)):y.push in o&&o[y.push]!=null&&o[y.push].forEach(function(x){f.push(r(p,y,x))})})}),o.media.forEach(function(p){f.push(r("m",e.m[0],p)),h.forEach(function(y){e[y].forEach(function(x){x.name in p&&p[x.name]!=null?f.push(r(y,x,p)):x.push in p&&p[x.push]!=null&&p[x.push].forEach(function(k){f.push(r(y,x,k))})})})}),f.join(`\r
`)+`\r
`},Yy}var yj;function IZ(){if(yj)return ci;yj=1;var e=RZ(),t=AZ(),n=bw();return ci.grammar=n,ci.write=t,ci.parse=e.parse,ci.parseParams=e.parseParams,ci.parseFmtpConfig=e.parseFmtpConfig,ci.parsePayloads=e.parsePayloads,ci.parseRemoteCandidates=e.parseRemoteCandidates,ci.parseImageAttributes=e.parseImageAttributes,ci.parseSimulcastStreamList=e.parseSimulcastStreamList,ci}var xo=IZ();function ww(e,t,n){var r,s,a;t===void 0&&(t=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,l=(s=n.callback)!=null&&s,u=n.maxWait,h=Date.now(),f=[];function p(){if(u!==void 0){var x=Date.now()-h;if(x+t>=u)return u-x}return t}var y=function(){var x=[].slice.call(arguments),k=this;return new Promise(function(b,S){var N=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,h=Date.now(),!o){var j=e.apply(k,x);l&&l(j),f.forEach(function(P){return(0,P.resolve)(j)}),f=[]}},p()),N){var E=e.apply(k,x);return l&&l(E),b(E)}f.push({resolve:b,reject:S})})};return y.cancel=function(x){a!==void 0&&clearTimeout(a),f.forEach(function(k){return(0,k.reject)(x)}),f=[]},y}const OZ=.7,DZ=20,Rl={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class xj extends fa.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=gt,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=ww(s=>L(this,void 0,void 0,function*(){this.emit(Rl.NegotiationStarted);try{yield this.createAndSendOffer()}catch(a){if(s)s(a);else throw a}}),DZ),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Va((r=n.loggerName)!==null&&r!==void 0?r:wi.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC(),this.offerLock=new hs}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},t.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},t.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return L(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t,n){return L(this,void 0,void 0,function*(){var r;if(t.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let s;if(t.type==="offer"){let{stereoMids:a,nackMids:o}=MZ(t);this.remoteStereoMids=a,this.remoteNackMids=o}else if(t.type==="answer"){const a=xo.parse((r=t.sdp)!==null&&r!==void 0?r:"");a.media.forEach(o=>{const l=kw(o.mid);o.type==="audio"&&this.trackBitrates.some(u=>{if(!u.transceiver||l!=u.transceiver.mid)return!1;let h=0;if(o.rtp.some(p=>p.codec.toUpperCase()===u.codec.toUpperCase()?(h=p.payload,!0):!1),h===0)return!0;let f=!1;for(const p of o.fmtp)if(p.payload===h){p.config=p.config.split(";").filter(y=>!y.includes("maxaveragebitrate")).join(";"),u.maxbr>0&&(p.config+=";maxaveragebitrate=".concat(u.maxbr*1e3)),f=!0;break}return f||u.maxbr>0&&o.fmtp.push({payload:h,config:"maxaveragebitrate=".concat(u.maxbr*1e3)}),!0})}),s=xo.write(a)}return yield this.setMungedSDP(t,s,!0),this.pendingCandidates.forEach(a=>{this.pc.addIceCandidate(a)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(Rl.NegotiationComplete),t.sdp&&xo.parse(t.sdp).media.forEach(o=>{o.type==="video"&&this.emit(Rl.RTPVideoPayloadTypes,o.rtp)})),!0})}createAndSendOffer(t){return L(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(t?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(t?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const s=this.latestOfferId+1;this.latestOfferId=s;const a=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:a.sdp},this.logContext));const o=xo.parse((n=a.sdp)!==null&&n!==void 0?n:"");if(o.media.forEach(l=>{wj(l),l.type==="audio"?bj(l,["all"],[]):l.type==="video"&&this.trackBitrates.some(u=>{if(!l.msid||!u.cid||!l.msid.includes(u.cid))return!1;let h=0;if(l.rtp.some(p=>p.codec.toUpperCase()===u.codec.toUpperCase()?(h=p.payload,!0):!1),h===0||(Zi(u.codec)&&!jc()&&this.ensureVideoDDExtensionForSVC(l,o),u.codec!=="av1"))return!0;const f=Math.round(u.maxbr*OZ);for(const p of l.fmtp)if(p.payload===h){p.config.includes("x-google-start-bitrate")||(p.config+=";x-google-start-bitrate=".concat(f));break}return!0})}),this.latestOfferId>s){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:s}));return}yield this.setMungedSDP(a,xo.write(o)),this.onOffer(a,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return L(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),r=xo.parse((t=n.sdp)!==null&&t!==void 0?t:"");return r.media.forEach(s=>{wj(s),s.type==="audio"&&bj(s,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,xo.write(r)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTransceiverOfKind(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new Yn("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new Yn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return L(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const r=new Map,s=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),r.set(l.id,l);break;case"remote-candidate":s.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const o=(t=r.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(o!==void 0)return s.get(o)})}setMungedSDP(t,n,r){return L(this,void 0,void 0,function*(){if(n){const s=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(a){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:a,sdp:n})),t.sdp=s}}try{r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(s){let a="unknown error";s instanceof Error?a=s.message:typeof s=="string"&&(a=s);const o={error:a,sdp:t.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new u0(a)}})}ensureVideoDDExtensionForSVC(t,n){var r,s;if(!((r=t.ext)===null||r===void 0?void 0:r.some(o=>o.uri===sj))){if(this.ddExtID===0){let o=0;n.media.forEach(l=>{var u;l.type==="video"&&((u=l.ext)===null||u===void 0||u.forEach(h=>{h.value>o&&(o=h.value)}))}),this.ddExtID=o+1}(s=t.ext)===null||s===void 0||s.push({value:this.ddExtID,uri:sj})}}}function bj(e,t,n){const r=kw(e.mid);let s=0;e.rtp.some(a=>a.codec==="opus"?(s=a.payload,!0):!1),s>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(r)&&!e.rtcpFb.some(a=>a.payload===s&&a.type==="nack")&&e.rtcpFb.push({payload:s,type:"nack"}),(t.includes(r)||t.length===1&&t[0]==="all")&&e.fmtp.some(a=>a.payload===s?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function MZ(e){var t;const n=[],r=[],s=xo.parse((t=e.sdp)!==null&&t!==void 0?t:"");let a=0;return s.media.forEach(o=>{var l;const u=kw(o.mid);o.type==="audio"&&(o.rtp.some(h=>h.codec==="opus"?(a=h.payload,!0):!1),!((l=o.rtcpFb)===null||l===void 0)&&l.some(h=>h.payload===a&&h.type==="nack")&&r.push(u),o.fmtp.some(h=>h.payload===a?(h.config.includes("sprop-stereo=1")&&n.push(u),!0):!1))}),{stereoMids:n,nackMids:r}}function wj(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(e.connection.version===4&&t||e.connection.version===6&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}function kw(e){return typeof e=="number"?e.toFixed(0):e}const k0="vp8",LZ={audioPreset:h0.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:vw.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:k0,backupCodec:!0,preConnectBuffer:!1},sI={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},iI={deviceId:{ideal:"default"},resolution:_u.h720.resolution},FZ={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new yG,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},Sw={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var bn;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(bn||(bn={}));class UZ{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,r){var s;this.peerConnectionTimeout=Sw.peerConnectionTimeout,this.log=gt,this.updateState=()=>{var a,o;const l=this.state,u=this.requiredTransports.map(h=>h.getConnectionState());u.every(h=>h==="connected")?this.state=bn.CONNECTED:u.some(h=>h==="failed")?this.state=bn.FAILED:u.some(h=>h==="connecting")?this.state=bn.CONNECTING:u.every(h=>h==="closed")?this.state=bn.CLOSED:u.some(h=>h==="closed")?this.state=bn.CLOSING:u.every(h=>h==="new")&&(this.state=bn.NEW),l!==this.state&&(this.log.debug("pc state change: from ".concat(bn[l]," to ").concat(bn[this.state]),this.logContext),(a=this.onStateChange)===null||a===void 0||a.call(this,this.state,this.publisher.getConnectionState(),(o=this.subscriber)===null||o===void 0?void 0:o.getConnectionState()))},this.log=Va((s=r.loggerName)!==null&&s!==void 0?s:wi.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new xj(t,r),n!=="publisher-only"&&(this.subscriber=new xj(t,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=a=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,a,fi.SUBSCRIBER)},this.subscriber.onDataChannel=a=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,a)},this.subscriber.onTrack=a=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,a)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=a=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,a,fi.PUBLISHER)},this.publisher.onTrack=a=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,a)},this.publisher.onOffer=(a,o)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,a,o)},this.state=bn.NEW,this.connectionLock=new hs,this.remoteOfferLock=new hs}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t,n){return this.publisher.setRemoteDescription(t,n)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return L(this,void 0,void 0,function*(){var t;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(s){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:s}))}}yield Promise.all([this.publisher.close(),(t=this.subscriber)===null||t===void 0?void 0:t.close()]),this.updateState()})}triggerIceRestart(){return L(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return L(this,void 0,void 0,function*(){var r;n===fi.PUBLISHER?yield this.publisher.addIceCandidate(t):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t,n){return L(this,void 0,void 0,function*(){var r,s,a;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const o=yield this.remoteOfferLock.lock();try{return(yield(s=this.subscriber)===null||s===void 0?void 0:s.setRemoteDescription(t,n))?yield(a=this.subscriber)===null||a===void 0?void 0:a.createAndSetAnswer():void 0}finally{o()}})}updateConfiguration(t,n){var r;this.publisher.setConfiguration(t),(r=this.subscriber)===null||r===void 0||r.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return L(this,void 0,void 0,function*(){var r;const s=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(a=>this.ensureTransportConnected(a,t,n)))}finally{s()}})}negotiate(t){return L(this,void 0,void 0,function*(){return new Promise((n,r)=>L(this,void 0,void 0,function*(){const s=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),a=()=>{clearTimeout(s),r("negotiation aborted")};t.signal.addEventListener("abort",a),this.publisher.once(Rl.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(Rl.NegotiationComplete,()=>{clearTimeout(s),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(s),r(o)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTransceiverOfKind(t,n){return this.publisher.addTransceiverOfKind(t,n)}getMidForReceiver(t){const r=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(s=>s.receiver===t);return r?.mid}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===fi.PUBLISHER?this.publisher.getConnectedAddress():t===fi.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return L(this,arguments,void 0,function(r,s){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(r.getConnectionState()!=="connected")return new Promise((u,h)=>L(a,void 0,void 0,function*(){const f=()=>{this.log.warn("abort transport connection",this.logContext),mr.clearTimeout(p),h(new Lt("room connection has been cancelled",Tt.Cancelled))};s?.signal.aborted&&f(),s?.signal.addEventListener("abort",f);const p=mr.setTimeout(()=>{s?.signal.removeEventListener("abort",f),h(new Lt("could not establish pc connection",Tt.InternalError))},o);for(;this.state!==bn.CONNECTED;)if(yield Mr(50),s?.signal.aborted){h(new Lt("room connection has been cancelled",Tt.Cancelled));return}mr.clearTimeout(p),s?.signal.removeEventListener("abort",f),u()}))})()})}}class kn extends Error{constructor(t,n,r){super(n),this.code=t,this.message=kj(n,kn.MAX_MESSAGE_BYTES),this.data=r?kj(r,kn.MAX_DATA_BYTES):void 0}static fromProto(t){return new kn(t.code,t.message,t.data)}toProto(){return new QR({code:this.code,message:this.message,data:this.data})}static builtIn(t,n){return new kn(kn.ErrorCode[t],kn.ErrorMessage[t],n)}}kn.MAX_MESSAGE_BYTES=256;kn.MAX_DATA_BYTES=15360;kn.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};kn.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const aI=15360;function Cw(e){return new TextEncoder().encode(e).length}function kj(e,t){if(Cw(e)<=t)return e;let n=0,r=e.length;const s=new TextEncoder;for(;n<r;){const a=Math.floor((n+r+1)/2);s.encode(e.slice(0,a)).length<=t?n=a:r=a-1}return e.slice(0,n)}const Nw=2e3;function ig(e,t){if(!t)return 0;let n,r;return"bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),n===void 0||r===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-r)*8*1e3/(e.timestamp-t.timestamp)}const jw=typeof MediaRecorder<"u";class zZ{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const BZ=jw?MediaRecorder:zZ;class $Z extends BZ{constructor(t,n){if(!jw)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([t.mediaStreamTrack]),n);let r,s;const a=()=>s===void 0,o=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",l),s?.close(),s=void 0},l=u=>{s?.error(u),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",l),s=void 0};this.byteStream=new ReadableStream({start:u=>{s=u,r=h=>L(this,void 0,void 0,function*(){let f;if(h.data.arrayBuffer){const p=yield h.data.arrayBuffer();f=new Uint8Array(p)}else if(h.data.byteArray)f=h.data.byteArray;else throw new Error("no data available!");a()||u.enqueue(f)}),this.addEventListener("dataavailable",r)},cancel:()=>{o()}}),this.addEventListener("stop",o),this.addEventListener("error",l)}}function VZ(){return jw}const qZ=1e3,HZ=1e4;class oI extends Y{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(t,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;super(t,n,a),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=ww(()=>L(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>L(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Ie.Ended,this)},this.reacquireTrack=!1,this.providedByUser=s,this.muteLock=new hs,this.pauseUpstreamLock=new hs,this.trackChangeLock=new hs,this.trackChangeLock.lock().then(o=>L(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(t,!0)}finally{o()}})),this._constraints=t.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Y.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(t,n){return L(this,void 0,void 0,function*(){var r;if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(a=>{_l(this._mediaStreamTrack,a)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let s;if(this.processor&&t){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(xl(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),s=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(s??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(a=>{xl(s??t,a)}))})}waitForDimensions(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qZ;return(function*(){var r;if(t.kind===Y.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=Dr())===null||r===void 0?void 0:r.os)==="iOS"&&(yield Mr(10));const s=Date.now();for(;Date.now()-s<n;){const a=t.dimensions;if(a)return a;yield Mr(50)}throw new Ia("unable to get track dimensions after timeout")})()})}setDeviceId(t){return L(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===Po(t)||(this._constraints.deviceId=t,this.isMuted)?!0:(yield this.restartTrack(),Po(t)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(t.source===Y.Source.ScreenShare)return;const{deviceId:r,groupId:s}=t._mediaStreamTrack.getSettings(),a=t.kind===Y.Kind.Audio?"audioinput":"videoinput";return n?or.getInstance().normalizeDeviceId(a,r,s):r})()})}mute(){return L(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return L(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return L(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Ia("unable to replace an unpublished track");let s,a;return typeof n=="boolean"?s=n:n!==void 0&&(s=n.userProvidedTrack,a=n.stopProcessor),this.providedByUser=s??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),a&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(t){return L(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{t||(t=this._constraints);const{deviceId:r,facingMode:s}=t,a=xG(t,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const o={audio:!1,video:!1};this.kind===Y.Kind.Video?o.video=r||s?{deviceId:r,facingMode:s}:!0:o.audio=r?Object.assign({deviceId:r},a):!0,this.attachedElements.forEach(h=>{_l(this.mediaStreamTrack,h)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const u=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return this.kind===Y.Kind.Video&&(yield u.applyConstraints(a)),u.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(u),this._constraints=t,this.emit(Ie.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?Ie.Muted:Ie.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return L(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),JA()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return L(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Ie.UpstreamPaused,this);const r=Dr();if(r?.name==="Safari"&&ki(r.version,"12.0")<0)throw new gw("pauseUpstream is not supported on Safari < 12.");((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return L(this,void 0,void 0,function*(){var t;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Ie.UpstreamResumed,this),((t=this.sender.transport)===null||t===void 0?void 0:t.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return L(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return L(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var a;const o=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const l=document.createElement(r.kind),u={kind:r.kind,track:r._mediaStreamTrack,element:l,audioContext:r.audioContext};if(yield n.init(u),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(xl(r._mediaStreamTrack,l),l.muted=!0,l.play().catch(h=>{h instanceof DOMException&&h.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:h})),setTimeout(()=>{l.play().catch(f=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:f}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:h}))}),r.processor=n,r.processorElement=l,r.processor.processedTrack){for(const h of r.attachedElements)h!==r.processorElement&&s&&(_l(r._mediaStreamTrack,h),xl(r.processor.processedTrack,h));yield(a=r.sender)===null||a===void 0?void 0:a.replaceTrack(r.processor.processedTrack)}r.emit(Ie.TrackProcessorUpdate,r.processor)}finally{o()}})()})}getProcessor(){return this.processor}stopProcessor(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const r=yield t.trackChangeLock.lock();try{yield t.internalStopProcessor(n)}finally{r()}})()})}internalStopProcessor(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var r,s;t.processor&&(t.log.debug("stopping processor",t.logContext),(r=t.processor.processedTrack)===null||r===void 0||r.stop(),yield t.processor.destroy(),t.processor=void 0,n||((s=t.processorElement)===null||s===void 0||s.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(Ie.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!VZ()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new $Z(this,{mimeType:n})}this.localTrackRecorder.start(t),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},HZ)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.byteStream}getPreConnectBufferMimeType(){var t;return(t=this.localTrackRecorder)===null||t===void 0?void 0:t.mimeType}}class Qm extends oI{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;super(t,Y.Kind.Audio,n,r,a),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>L(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}o&&this.prevStats&&(this._currentBitrate=ig(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Ie.AudioTrackFeatureUpdate,this,ar.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Ie.AudioTrackFeatureUpdate,this,ar.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=s,this.checkForSilence()}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return L(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Y.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return L(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Po(this._constraints.deviceId);return this.source===Y.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return L(this,void 0,void 0,function*(){let n;if(t){const r=yw({audio:t});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return L(this,void 0,void 0,function*(){const r=yield n.restart.call(this,t);return this.checkForSilence(),r})}startMonitor(){os()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Nw)))}setProcessor(t){return L(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!oa()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const s={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(s),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Ie.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return L(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(s=>{s.type==="outbound-rtp"&&(r={type:"audio",streamId:s.id,packetsSent:s.packetsSent,packetsLost:s.packetsLost,bytesSent:s.bytesSent,timestamp:s.timestamp,roundTripTime:s.roundTripTime,jitter:s.jitter})}),r})}checkForSilence(){return L(this,void 0,void 0,function*(){const t=yield eI(this);return t&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(Ie.AudioSilenceDetected)),t})}}function WZ(e,t,n){switch(e.kind){case"audio":return new Qm(e,t,!1,void 0,n);case"video":return new Xm(e,t,!1,n);default:throw new Ia("unsupported track type: ".concat(e.kind))}}const KZ=Object.values(_u),GZ=Object.values(f0),ZZ=Object.values(vw),JZ=[_u.h180,_u.h360],YZ=[f0.h180,f0.h360],QZ=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var r,s;return new $t(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=e.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((s=n.fps)!==null&&s!==void 0?s:30))))),n.fps,e.encoding.priority)}),S0=["q","h","f"];function C0(e,t,n,r){var s,a;let o=r?.videoEncoding;e&&(o=r?.screenShareEncoding);const l=r?.simulcast,u=r?.scalabilityMode,h=r?.videoCodec;if(!o&&!l&&!u||!t||!n)return[{}];o||(o=eJ(e,t,n,h),gt.debug("using video encoding",o));const f=o.maxFramerate,p=new $t(t,n,o.maxBitrate,o.maxFramerate,o.priority);if(u&&Zi(h)){const k=new cI(u),b=[];if(k.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(u));const S=Dr();if(Ru()||oa()||S?.name==="Chrome"&&ki(S?.version,"113")<0){const N=k.suffix=="h"?2:3,E=XG(S);for(let j=0;j<k.spatial;j+=1)b.push({rid:S0[2-j],maxBitrate:o.maxBitrate/Math.pow(N,j),maxFramerate:p.encoding.maxFramerate,scaleResolutionDownBy:E?Math.pow(2,j):void 0});b[0].scalabilityMode=u}else b.push({maxBitrate:o.maxBitrate,maxFramerate:p.encoding.maxFramerate,scalabilityMode:u});return p.encoding.priority&&(b[0].priority=p.encoding.priority,b[0].networkPriority=p.encoding.priority),gt.debug("using svc encoding",{encodings:b}),b}if(!l)return[o];let y=[];e?y=(s=Cj(r?.screenShareSimulcastLayers))!==null&&s!==void 0?s:Sj(e,p):y=(a=Cj(r?.videoSimulcastLayers))!==null&&a!==void 0?a:Sj(e,p);let x;if(y.length>0){const k=y[0];y.length>1&&([,x]=y);const b=Math.max(t,n);if(b>=960&&x)return Qy(t,n,[k,x,p],f);if(b>=480)return Qy(t,n,[k,p],f)}return Qy(t,n,[p])}function XZ(e,t,n){var r,s,a,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&gt.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const l=e.mediaStreamTrack.getSettings(),u=(r=l.width)!==null&&r!==void 0?r:(s=e.dimensions)===null||s===void 0?void 0:s.width,h=(a=l.height)!==null&&a!==void 0?a:(o=e.dimensions)===null||o===void 0?void 0:o.height;return e.source===Y.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),C0(e.source===Y.Source.ScreenShare,u,h,n)}function eJ(e,t,n,r){const s=tJ(e,t,n);let{encoding:a}=s[0];const o=Math.max(t,n);for(let l=0;l<s.length;l+=1){const u=s[l];if(a=u.encoding,u.width>=o)break}if(r)switch(r){case"av1":case"h265":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.7;break;case"vp9":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.85;break}return a}function tJ(e,t,n){if(e)return ZZ;const r=t>n?t/n:n/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?KZ:GZ}function Sj(e,t){if(e)return QZ(t);const{width:n,height:r}=t,s=n>r?n/r:r/n;return Math.abs(s-16/9)<Math.abs(s-4/3)?JZ:YZ}function Qy(e,t,n,r){const s=[];if(n.forEach((a,o)=>{if(o>=S0.length)return;const l=Math.min(e,t),h={rid:S0[o],scaleResolutionDownBy:Math.max(1,l/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate},f=r&&a.encoding.maxFramerate?Math.min(r,a.encoding.maxFramerate):a.encoding.maxFramerate;f&&(h.maxFramerate=f);const p=Nc()||o===0;a.encoding.priority&&p&&(h.priority=a.encoding.priority,h.networkPriority=a.encoding.priority),s.push(h)}),oa()&&QA()==="ios"){let a;s.forEach(l=>{a?l.maxFramerate&&l.maxFramerate>a&&(a=l.maxFramerate):a=l.maxFramerate});let o=!0;s.forEach(l=>{var u;l.maxFramerate!=a&&(o&&(o=!1,gt.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),gt.info('Setting framerate of encoding "'.concat((u=l.rid)!==null&&u!==void 0?u:"",'" to ').concat(a)),l.maxFramerate=a)})}return s}function Cj(e){if(e)return e.sort((t,n)=>{const{encoding:r}=t,{encoding:s}=n;return r.maxBitrate>s.maxBitrate?1:r.maxBitrate<s.maxBitrate?-1:r.maxBitrate===s.maxBitrate&&r.maxFramerate&&s.maxFramerate?r.maxFramerate>s.maxFramerate?1:-1:0})}class cI{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function nJ(e){return e.source===Y.Source.ScreenShare||e.constraints.height&&Po(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const rJ=5e3;class Xm extends oI{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0;super(t,Y.Kind.Video,n,r,s),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>L(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(u){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}const o=new Map(a.map(u=>[u.rid,u])),l=a.some(u=>u.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(Ie.CpuConstrained)),this.prevStats){let u=0;o.forEach((h,f)=>{var p;const y=(p=this.prevStats)===null||p===void 0?void 0:p.get(f);u+=ig(h,y)}),this._currentBitrate=u}this.prevStats=o}),this.senderLock=new hs}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!os())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Nw))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return L(this,void 0,void 0,function*(){var n,r,s,a,o;yield t.pauseUpstream.call(this);try{for(var l=!0,u=Aa(this.simulcastCodecs.values()),h;h=yield u.next(),n=h.done,!n;l=!0)a=h.value,l=!1,yield(o=a.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(f){r={error:f}}finally{try{!l&&!n&&(s=u.return)&&(yield s.call(u))}finally{if(r)throw r.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return L(this,void 0,void 0,function*(){var n,r,s,a,o;yield t.resumeUpstream.call(this);try{for(var l=!0,u=Aa(this.simulcastCodecs.values()),h;h=yield u.next(),n=h.done,!n;l=!0){a=h.value,l=!1;const f=a;yield(o=f.sender)===null||o===void 0?void 0:o.replaceTrack(f.mediaStreamTrack)}}catch(f){r={error:f}}finally{try{!l&&!n&&(s=u.return)&&(yield s.call(u))}finally{if(r)throw r.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return L(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return L(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return L(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(s=>{var a;if(s.type==="outbound-rtp"){const o={type:"video",streamId:s.id,frameHeight:s.frameHeight,frameWidth:s.frameWidth,framesPerSecond:s.framesPerSecond,framesSent:s.framesSent,firCount:s.firCount,pliCount:s.pliCount,nackCount:s.nackCount,packetsSent:s.packetsSent,bytesSent:s.bytesSent,qualityLimitationReason:s.qualityLimitationReason,qualityLimitationDurations:s.qualityLimitationDurations,qualityLimitationResolutionChanges:s.qualityLimitationResolutionChanges,rid:(a=s.rid)!==null&&a!==void 0?a:s.id,retransmittedPacketsSent:s.retransmittedPacketsSent,targetBitrate:s.targetBitrate,timestamp:s.timestamp},l=r.get(s.remoteId);l&&(o.jitter=l.jitter,o.packetsLost=l.packetsLost,o.roundTripTime=l.roundTripTime),n.push(o)}}),n.sort((s,a)=>{var o,l;return((o=a.frameWidth)!==null&&o!==void 0?o:0)-((l=s.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(t){const n=[];for(let r=Es.LOW;r<=Es.HIGH;r+=1)n.push(new hw({quality:r,enabled:r<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(Zi(this.codec),n)}restartTrack(t){return L(this,void 0,void 0,function*(){var n,r,s,a,o;let l;if(t){const p=yw({video:t});typeof p.video!="boolean"&&(l=p.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var u=!0,h=Aa(this.simulcastCodecs.values()),f;f=yield h.next(),n=f.done,!n;u=!0){a=f.value,u=!1;const p=a;p.sender&&((o=p.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(p.mediaStreamTrack=this.mediaStreamTrack.clone(),yield p.sender.replaceTrack(p.mediaStreamTrack))}}catch(p){r={error:p}}finally{try{!u&&!n&&(s=h.return)&&(yield s.call(h))}finally{if(r)throw r.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return L(this,arguments,void 0,function(r){var s=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o,l,u,h,f,p;if(yield n.setProcessor.call(s,r,a),!((f=s.processor)===null||f===void 0)&&f.processedTrack)try{for(var y=!0,x=Aa(s.simulcastCodecs.values()),k;k=yield x.next(),o=k.done,!o;y=!0)h=k.value,y=!1,yield(p=h.sender)===null||p===void 0?void 0:p.replaceTrack(s.processor.processedTrack)}catch(b){l={error:b}}finally{try{!y&&!o&&(u=x.return)&&(yield u.call(x))}finally{if(l)throw l.error}}})()})}setDegradationPreference(t){return L(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,r),r}setSimulcastTrackSender(t,n){const r=this.simulcastCodecs.get(t);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},rJ))}setPublishingCodecs(t){return L(this,void 0,void 0,function*(){var n,r,s,a,o,l,u;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(Zi(t[0].codec),t[0].qualities),[];this.subscribedCodecs=t;const h=[];try{for(n=!0,r=Aa(t);s=yield r.next(),a=s.done,!a;n=!0){u=s.value,n=!1;const f=u;if(!this.codec||this.codec===f.codec)yield this.setPublishingLayers(Zi(f.codec),f.qualities);else{const p=this.simulcastCodecs.get(f.codec);if(this.log.debug("try setPublishingCodec for ".concat(f.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const y of f.qualities)if(y.enabled){h.push(f.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(f.codec),this.logContext),yield Nj(p.sender,p.encodings,f.qualities,this.senderLock,Zi(f.codec),this.log,this.logContext))}}}catch(f){o={error:f}}finally{try{!n&&!a&&(l=r.return)&&(yield l.call(r))}finally{if(o)throw o.error}}return h})}setPublishingLayers(t,n){return L(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield Nj(this.sender,this.encodings,n,this.senderLock,t,this.log,this.logContext))})}prioritizePerformance(){return L(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const t=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,s)=>{var a;return Object.assign(Object.assign({},r),{active:s===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((a=this.mediaStreamTrack.getSettings().height)!==null&&a!==void 0?a:360)/360)),scalabilityMode:s===0&&Zi(this.codec)?"L1T3":void 0,maxFramerate:s===0?15:0,maxBitrate:s===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{t()}})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return L(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),JA()&&this.isInBackground&&this.source===Y.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Nj(e,t,n,r,s,a,o){return L(this,void 0,void 0,function*(){const l=yield r.lock();a.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:e,qualities:n,senderEncodings:t}));try{const u=e.getParameters(),{encodings:h}=u;if(!h)return;if(h.length!==t.length){a.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:h,senderEncodings:t}));return}let f=!1;!1&&h[0].scalabilityMode||(s&&n.some(x=>x.enabled)&&n.forEach(x=>x.enabled=!0),h.forEach((y,x)=>{var k;let b=(k=y.rid)!==null&&k!==void 0?k:"";b===""&&(b="q");const S=lI(b),N=n.find(E=>E.quality===S);N&&y.active!==N.enabled&&(f=!0,y.active=N.enabled,a.debug("setting layer ".concat(N.quality," to ").concat(y.active?"enabled":"disabled"),o),Nc()&&(N.enabled?(y.scaleResolutionDownBy=t[x].scaleResolutionDownBy,y.maxBitrate=t[x].maxBitrate,y.maxFrameRate=t[x].maxFrameRate):(y.scaleResolutionDownBy=4,y.maxBitrate=10,y.maxFrameRate=2)))})),f&&(u.encodings=h,a.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:u.encodings})),yield e.setParameters(u))}finally{l()}})}function lI(e){switch(e){case"f":return Es.HIGH;case"h":return Es.MEDIUM;case"q":return Es.LOW;default:return Es.HIGH}}function jj(e,t,n,r){if(!n)return[new Eo({quality:Es.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(r){const s=n[0].scalabilityMode,a=new cI(s),o=[],l=a.suffix=="h"?1.5:2,u=a.suffix=="h"?2:3;for(let h=0;h<a.spatial;h+=1)o.push(new Eo({quality:Math.min(Es.HIGH,a.spatial-1)-h,width:Math.ceil(e/Math.pow(l,h)),height:Math.ceil(t/Math.pow(l,h)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(u,h)):0,ssrc:0}));return o}return n.map(s=>{var a,o,l;const u=(a=s.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let h=lI((o=s.rid)!==null&&o!==void 0?o:"");return new Eo({quality:h,width:Math.ceil(e/u),height:Math.ceil(t/u),bitrate:(l=s.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const Ej="_lossy",Tj="_reliable",sJ=2*1e3,Xy="leave-reconnect",iJ=3e4;var $s;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})($s||($s={}));class aJ extends fa.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=Sw.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=$s.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=gt,this.reliableDataSequence=1,this.reliableMessageBuffer=new mj,this.reliableReceivedState=new _Z(iJ),this.midToTrackId={},this.handleDataChannel=r=>L(this,[r],void 0,function(s){var a=this;let{channel:o}=s;return(function*(){if(o){if(o.label===Tj)a.reliableDCSub=o;else if(o.label===Ej)a.lossyDCSub=o;else return;a.log.debug("on data channel ".concat(o.id,", ").concat(o.label),a.logContext),o.onmessage=a.handleDataMessage}})()}),this.handleDataMessage=r=>L(this,void 0,void 0,function*(){var s,a,o,l,u;const h=yield this.dataProcessLock.lock();try{let f;if(r.data instanceof ArrayBuffer)f=r.data;else if(r.data instanceof Blob)f=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const p=Ir.fromBinary(new Uint8Array(f));if(p.sequence>0&&p.participantSid!==""){const y=this.reliableReceivedState.get(p.participantSid);if(y&&p.sequence<=y)return;this.reliableReceivedState.set(p.participantSid,p.sequence)}if(((s=p.value)===null||s===void 0?void 0:s.case)==="speaker")this.emit(Me.ActiveSpeakersUpdate,p.value.value.speakers);else if(((a=p.value)===null||a===void 0?void 0:a.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const y=yield(o=this.e2eeManager)===null||o===void 0?void 0:o.handleEncryptedData(p.value.value.encryptedValue,p.value.value.iv,p.participantIdentity,p.value.value.keyIndex),x=ZR.fromBinary(y.payload),k=new Ir({value:x.value,participantIdentity:p.participantIdentity,participantSid:p.participantSid});((l=k.value)===null||l===void 0?void 0:l.case)==="user"&&Pj(k,k.value.value),this.emit(Me.DataPacketReceived,k,p.value.value.encryptionType)}else((u=p.value)===null||u===void 0?void 0:u.case)==="user"&&Pj(p,p.value.value),this.emit(Me.DataPacketReceived,p,Xn.NONE)}finally{h()}}),this.handleDataError=r=>{const a=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(a,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(a),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const a=r.currentTarget.maxRetransmits===0?bt.LOSSY:bt.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(r,s)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=u=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(u,"ms. giving up"),this.logContext),this.emit(Me.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(l===null){a(o);return}r===Xy&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=mr.setTimeout(()=>this.attemptReconnect(s).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((r,s)=>{this.pcState===$s.Connected&&r();const a=()=>{this.off(Me.Disconnected,o),r()},o=()=>{this.off(Me.Restarted,a),s()};this.once(Me.Restarted,a),this.once(Me.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const s=this.isBufferStatusLow(r);typeof s<"u"&&s!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,s),this.emit(Me.DCBufferStatusChanged,s,r))},this.isBufferStatusLow=r=>{const s=this.dataChannelForKind(r);if(s)return r===bt.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(s.bufferedAmount),s.bufferedAmount<=s.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===gn.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ic.RR_SIGNAL_DISCONNECTED))},this.log=Va((n=t.loggerName)!==null&&n!==void 0?n:wi.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new xw(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new hs,this.dataProcessLock=new hs,this.dcBufferStatus=new Map([[bt.LOSSY,!0],[bt.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Me.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Me.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Me.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Me.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Me.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Me.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Me.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(Me.SignalRequestResponse,r)}get logContext(){var t,n,r,s,a,o;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(s=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||s===void 0?void 0:s.sid,participant:(o=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||o===void 0?void 0:o.identity,pID:this.participantSid}}join(t,n,r,s){return L(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const a=yield this.client.join(t,n,r,s);return this._isClosed=!1,this.latestJoinResponse=a,this.subscriberPrimary=a.subscriberPrimary,this.pcManager||(yield this.configure(a)),(!this.subscriberPrimary||a.fastPublish)&&this.negotiate().catch(o=>{gt.error(o,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=a.clientConfiguration,this.emit(Me.SignalConnected,a),a}catch(a){if(a instanceof Lt&&a.reason===Tt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,r,s);throw a}})}close(){return L(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Me.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return L(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new mj,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return L(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new Ia("a track with the same ID has already been published");return new Promise((n,r)=>{const s=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],r(new Lt("publication of local track timed out, no response from server",Tt.Timeout))},1e4);this.pendingTrackResolvers[t.cid]={resolve:a=>{clearTimeout(s),n(a)},reject:()=>{clearTimeout(s),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return L(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return L(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==bn.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const s=this.makeRTCConfiguration(t);this.pcManager=new UZ(s,this.options.singlePeerConnection?"publisher-only":t.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(Me.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,o)=>{this.client.sendIceCandidate(a,o)},this.pcManager.onPublisherOffer=(a,o)=>{this.client.sendOffer(a,o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,o,l)=>L(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),a===bn.CONNECTED){const f=this.pcState===$s.New;this.pcState=$s.Connected,f&&this.emit(Me.Connected,t)}else a===bn.FAILED&&(this.pcState===$s.Connected||this.pcState===$s.Reconnecting)&&(this.pcState=$s.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?ic.RR_SUBSCRIBER_FAILED:ic.RR_PUBLISHER_FAILED));const u=this.client.isDisconnected||this.client.currentState===gn.RECONNECTING,h=[bn.FAILED,bn.CLOSING,bn.CLOSED].includes(a);u&&h&&!this._isClosed&&this.emit(Me.Offline)}),this.pcManager.onTrack=a=>{a.streams.length!==0&&this.emit(Me.MediaTrackAdded,a.track,a.streams[0],a.receiver)},oJ((r=t.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(t,n,r)=>L(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,midToTrackId:r})),this.midToTrackId=r,yield this.pcManager.setPublisherAnswer(t,n))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=(t,n,r)=>L(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=r;const s=yield this.pcManager.createSubscriberAnswerFromOffer(t,n);s&&this.client.sendAnswer(s,n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:r}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],r(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(Me.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(Me.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(Me.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(Me.SubscribedQualityUpdate,t)},this.client.onRoomMoved=t=>{var n;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=t.room),this.emit(Me.RoomMoved,t)},this.client.onMediaSectionsRequirement=t=>{var n,r;const s={direction:"recvonly"};for(let a=0;a<t.numAudios;a++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",s);for(let a=0;a<t.numVideos;a++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",s);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",ic.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t?.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(t.regions)),t.action){case Tl.DISCONNECT:this.emit(Me.Disconnected,t?.reason),this.close();break;case Tl.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Xy);break;case Tl.RESUME:this.handleDisconnect(Xy)}}}makeRTCConfiguration(t){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),t.iceServers&&!r.iceServers){const s=[];t.iceServers.forEach(a=>{const o={urls:a.urls};a.username&&(o.username=a.username),a.credential&&(o.credential=a.credential),s.push(o)}),r.iceServers=s}return t.clientConfiguration&&t.clientConfiguration.forceRelay===ju.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Ej,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Tj,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,r){return L(this,void 0,void 0,function*(){if(m0())return yield this.createTransceiverRTCRtpSender(t,n,r);if(p0())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new Yn("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,r,s){return L(this,void 0,void 0,function*(){if(m0())return this.createSimulcastTransceiverSender(t,n,r,s);if(p0())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new Yn("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,r){return L(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yn("publisher is closed");const s=[];t.mediaStream&&s.push(t.mediaStream),$o(t)&&(t.codec=n.videoCodec);const a={direction:"sendonly",streams:s};return r&&(a.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,a)).sender})}createSimulcastTransceiverSender(t,n,r,s){return L(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yn("publisher is closed");const a={direction:"sendonly"};s&&(a.sendEncodings=s);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,a);if(r.videoCodec)return t.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(t){return L(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yn("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return L(this,void 0,void 0,function*(){var n,r,s;if(!this._isClosed){if(this.attemptingReconnect){gt.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===ju.DISABLED||((s=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&s!==void 0?s:bn.NEW)===bn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(a){this.reconnectAttempts+=1;let o=!0;a instanceof Yn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:a})),o=!1):a instanceof pl||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",ic.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Me.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return L(this,void 0,void 0,function*(){var n,r,s;try{if(!this.url||!this.token)throw new Yn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Me.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let a;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new pl;a=yield this.join(t??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof Lt&&o.reason===Tt.NotAllowed?new Yn("could not reconnect, token might be expired"):new pl}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Me.SignalRestarted,a),yield this.waitForPCReconnected(),this.client.currentState!==gn.CONNECTED)throw new pl("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Me.Restarted)}catch(a){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(s=this.regionUrlProvider)===null||s===void 0||s.resetAttempts(),a}})}resumeConnection(t){return L(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Yn("could not reconnect, url or token not saved");if(!this.pcManager)throw new Yn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Me.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(s){let a="";throw s instanceof Error&&(a=s.message,this.log.error(s.message,Object.assign(Object.assign({},this.logContext),{error:s}))),s instanceof Lt&&s.reason===Tt.NotAllowed?new Yn("could not reconnect, token might be expired"):s instanceof Lt&&s.reason===Tt.LeaveRequest?s:new pl(a)}if(this.emit(Me.SignalResumed),r){const s=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(s),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==gn.CONNECTED)throw new pl("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r?.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(Me.Resumed)})}waitForPCInitialConnection(t,n){return L(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return L(this,void 0,void 0,function*(){this.pcState=$s.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Mr(sJ),!this.pcManager)throw new Yn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=$s.Connected}catch(t){throw this.pcState=$s.Disconnected,new Lt("could not establish PC connection, ".concat(t.message),Tt.InternalError)}})}publishRpcResponse(t,n,r,s){return L(this,void 0,void 0,function*(){const a=new Ir({destinationIdentities:[t],kind:bt.RELIABLE,value:{case:"rpcResponse",value:new cw({requestId:n,value:s?{case:"error",value:s.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(a,bt.RELIABLE)})}publishRpcAck(t,n){return L(this,void 0,void 0,function*(){const r=new Ir({destinationIdentities:[t],kind:bt.RELIABLE,value:{case:"rpcAck",value:new ow({requestId:n})}});yield this.sendDataPacket(r,bt.RELIABLE)})}sendDataPacket(t,n){return L(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const a=OG(t);if(a){const o=yield this.e2eeManager.encryptData(a.toBinary());t.value={case:"encryptedPacket",value:new GR({encryptedValue:o.payload,iv:o.iv,keyIndex:o.keyIndex})}}}n===bt.RELIABLE&&(t.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=t.toBinary(),s=this.dataChannelForKind(n);if(s){if(n===bt.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:t.sequence}),this.attemptingReconnect)return;s.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(t){return L(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(bt.RELIABLE);const n=this.dataChannelForKind(bt.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(t),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(bt.RELIABLE)})}waitForBufferStatusLow(t){return new Promise((n,r)=>L(this,void 0,void 0,function*(){if(this.isBufferStatusLow(t))n();else{const s=()=>r("Engine closed");for(this.once(Me.Closing,s);!this.dcBufferStatus.get(t);)yield Mr(10);this.off(Me.Closing,s),n()}}))}ensureDataTransportConnected(t){return L(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var a;if(!r.pcManager)throw new Yn("PC manager is closed");const o=s?r.pcManager.subscriber:r.pcManager.publisher,l=s?"Subscriber":"Publisher";if(!o)throw new Lt("".concat(l," connection not set"),Tt.InternalError);let u=!1;!s&&!r.dataChannelForKind(n,s)&&(r.createDataChannels(),u=!0),!u&&!s&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(u=!0),u&&r.negotiate().catch(p=>{gt.error(p,r.logContext)});const h=r.dataChannelForKind(n,s);if(h?.readyState==="open")return;const f=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<f;){if(o.isICEConnected&&((a=r.dataChannelForKind(n,s))===null||a===void 0?void 0:a.readyState)==="open")return;yield Mr(50)}throw new Lt("could not establish ".concat(l," connection, state: ").concat(o.getICEConnectionState()),Tt.InternalError)})()})}ensurePublisherConnected(t){return L(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==bn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return L(this,void 0,void 0,function*(){return new Promise((t,n)=>L(this,void 0,void 0,function*(){if(!this.pcManager){n(new u0("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,s=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Me.Closing,s),this.pcManager.publisher.once(Rl.RTPVideoPayloadTypes,a=>{const o=new Map;a.forEach(l=>{const u=l.codec.toLowerCase();sZ(u)&&o.set(l.payload,u)}),this.emit(Me.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),t()}catch(a){a instanceof u0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ic.RR_UNKNOWN),n(a)}finally{this.off(Me.Closing,s)}}))})}dataChannelForKind(t,n){if(n){if(t===bt.LOSSY)return this.lossyDCSub;if(t===bt.RELIABLE)return this.reliableDCSub}else{if(t===bt.LOSSY)return this.lossyDC;if(t===bt.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var r,s,a,o;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const l=this.pcManager.publisher.getLocalDescription(),u=this.pcManager.publisher.getRemoteDescription(),h=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),f=(s=this.pcManager.subscriber)===null||s===void 0?void 0:s.getLocalDescription(),p=(o=(a=this.signalOpts)===null||a===void 0?void 0:a.autoSubscribe)!==null&&o!==void 0?o:!0,y=new Array,x=new Array;t.forEach(k=>{k.isDesired!==p&&y.push(k.trackSid),k.isEnabled||x.push(k.trackSid)}),this.client.sendSyncState(new fw({answer:this.options.singlePeerConnection?u?bl({sdp:u.sdp,type:u.type}):void 0:f?bl({sdp:f.sdp,type:f.type}):void 0,offer:this.options.singlePeerConnection?l?bl({sdp:l.sdp,type:l.type}):void 0:h?bl({sdp:h.sdp,type:h.type}):void 0,subscription:new ng({trackSids:y,subscribe:!p,participantTracks:[]}),publishTracks:fZ(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:x,datachannelReceiveStates:this.reliableReceivedState.map((k,b)=>new mA({publisherSid:b,lastSeq:k}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(r,s)=>{r?.id!==void 0&&r.id!==null&&t.push(new pA({label:r.label,id:r.id,target:s}))};return n(this.dataChannelForKind(bt.LOSSY),fi.PUBLISHER),n(this.dataChannelForKind(bt.RELIABLE),fi.PUBLISHER),n(this.dataChannelForKind(bt.LOSSY,!0),fi.SUBSCRIBER),n(this.dataChannelForKind(bt.RELIABLE,!0),fi.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&mr.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){os()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){os()&&window.removeEventListener("online",this.handleBrowserOnLine)}getTrackIdForReceiver(t){var n;const r=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(t);if(r){const s=Object.entries(this.midToTrackId).find(a=>{let[o]=a;return o===r});if(s)return s[1]}}}class pl extends Error{}function oJ(e){return e!==void 0&&e>13}function Pj(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const r=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=r,t.destinationIdentities=r}class N0{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return v0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return L(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(s=>s.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),gt.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return L(this,void 0,void 0,function*(){const n=yield fetch("".concat(cJ(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Lt("Could not fetch region settings: ".concat(n.statusText),n.status===401?Tt.NotAllowed:Tt.InternalError,n.status)})}setServerReportedRegions(t){this.regionSettings=t,this.lastUpdateAt=Date.now()}}function cJ(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class dI{get info(){return this._info}validateBytesReceived(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(t&&this.bytesReceived<this.totalByteSize)throw new Vs("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),Rr.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Vs("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),Rr.LengthExceeded)}}constructor(t,n,r,s){this.reader=n,this.totalByteSize=r,this._info=t,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=s}}class lJ extends dI{handleChunkReceived(t){var n;this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const t=this.reader.getReader();let n=new Zs,r=null,s=null;if(this.signal){const o=this.signal;s=()=>{var l;(l=n.reject)===null||l===void 0||l.call(n,o.reason)},o.addEventListener("abort",s),r=o}const a=()=>{t.releaseLock(),r&&s&&r.removeEventListener("abort",s),this.signal=void 0};return{next:()=>L(this,void 0,void 0,function*(){var o,l;try{const{done:u,value:h}=yield Promise.race([t.read(),n.promise,(l=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&l!==void 0?l:new Promise(()=>{})]);return u?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(h),{done:!1,value:h.content})}catch(u){throw a(),u}}),return(){return L(this,void 0,void 0,function*(){return a(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,s,a,o;let l=new Set;const u=n.signal?t.withAbortSignal(n.signal):t;try{for(var h=!0,f=Aa(u),p;p=yield f.next(),r=p.done,!r;h=!0){o=p.value,h=!1;const y=o;l.add(y)}}catch(y){s={error:y}}finally{try{!h&&!r&&(a=f.return)&&(yield a.call(f))}finally{if(s)throw s.error}}return Array.from(l)})()})}}class dJ extends dI{constructor(t,n,r,s){super(t,n,r,s),this.receivedChunks=new Map}handleChunkReceived(t){var n;const r=hm(t.chunkIndex),s=this.receivedChunks.get(r);if(s&&s.version>t.version)return;this.receivedChunks.set(r,t),this.bytesReceived+=t.content.byteLength,this.validateBytesReceived();const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,a)}[Symbol.asyncIterator](){const t=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new Zs,s=null,a=null;if(this.signal){const l=this.signal;a=()=>{var u;(u=r.reject)===null||u===void 0||u.call(r,l.reason)},l.addEventListener("abort",a),s=l}const o=()=>{t.releaseLock(),s&&a&&s.removeEventListener("abort",a),this.signal=void 0};return{next:()=>L(this,void 0,void 0,function*(){var l,u;try{const{done:h,value:f}=yield Promise.race([t.read(),r.promise,(u=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&u!==void 0?u:new Promise(()=>{})]);if(h)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(f);let p;try{p=n.decode(f.content)}catch(y){throw new Vs("Cannot decode datastream chunk ".concat(f.chunkIndex," as text: ").concat(y),Rr.DecodeFailed)}return{done:!1,value:p}}}catch(h){throw o(),h}}),return(){return L(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(t){return this.signal=t,this}readAll(){return L(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,s,a,o;let l="";const u=n.signal?t.withAbortSignal(n.signal):t;try{for(var h=!0,f=Aa(u),p;p=yield f.next(),r=p.done,!r;h=!0)o=p.value,h=!1,l+=o}catch(y){s={error:y}}finally{try{!h&&!r&&(a=f.return)&&(yield a.call(f))}finally{if(s)throw s.error}}return l})()})}}class uJ{constructor(){this.log=gt,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(t,n){if(this.textStreamHandlers.has(t))throw new Vs('A text stream handler for topic "'.concat(t,'" has already been set.'),Rr.HandlerAlreadyRegistered);this.textStreamHandlers.set(t,n)}unregisterTextStreamHandler(t){this.textStreamHandlers.delete(t)}registerByteStreamHandler(t,n){if(this.byteStreamHandlers.has(t))throw new Vs('A byte stream handler for topic "'.concat(t,'" has already been set.'),Rr.HandlerAlreadyRegistered);this.byteStreamHandlers.set(t,n)}unregisterByteStreamHandler(t){this.byteStreamHandlers.delete(t)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(t){var n,r,s,a;const o=Array.from(this.textStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===t),l=Array.from(this.byteStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===t);if(o.length>0||l.length>0){const u=new Vs("Participant ".concat(t," unexpectedly disconnected in the middle of sending data"),Rr.AbnormalEnd);for(const[h,f]of l)(r=(n=f.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,u),this.byteStreamControllers.delete(h);for(const[h,f]of o)(a=(s=f.outOfBandFailureRejectingFuture).reject)===null||a===void 0||a.call(s,u),this.textStreamControllers.delete(h)}}handleDataStreamPacket(t,n){return L(this,void 0,void 0,function*(){switch(t.value.case){case"streamHeader":return this.handleStreamHeader(t.value.value,t.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(t.value.value,n);case"streamTrailer":return this.handleStreamTrailer(t.value.value,n);default:throw new Error('DataPacket of value "'.concat(t.value.case,'" is not data stream related!'))}})}handleStreamHeader(t,n,r){return L(this,void 0,void 0,function*(){var s;if(t.contentHeader.case==="byteHeader"){const a=this.byteStreamHandlers.get(t.topic);if(!a){this.log.debug("ignoring incoming byte stream due to no handler for topic",t.topic);return}let o;const l=new Zs;l.promise.catch(f=>{this.log.error(f)});const u={id:t.streamId,name:(s=t.contentHeader.value.name)!==null&&s!==void 0?s:"unknown",mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:hm(t.timestamp),attributes:t.attributes,encryptionType:r},h=new ReadableStream({start:f=>{if(o=f,this.textStreamControllers.has(t.streamId))throw new Vs("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),Rr.AlreadyOpened);this.byteStreamControllers.set(t.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});a(new lJ(u,h,hm(t.totalLength),l),{identity:n})}else if(t.contentHeader.case==="textHeader"){const a=this.textStreamHandlers.get(t.topic);if(!a){this.log.debug("ignoring incoming text stream due to no handler for topic",t.topic);return}let o;const l=new Zs;l.promise.catch(f=>{this.log.error(f)});const u={id:t.streamId,mimeType:t.mimeType,size:t.totalLength?Number(t.totalLength):void 0,topic:t.topic,timestamp:Number(t.timestamp),attributes:t.attributes,encryptionType:r},h=new ReadableStream({start:f=>{if(o=f,this.textStreamControllers.has(t.streamId))throw new Vs("A data stream read is already in progress for a stream with id ".concat(t.streamId,"."),Rr.AlreadyOpened);this.textStreamControllers.set(t.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});a(new dJ(u,h,hm(t.totalLength),l),{identity:n})}})}handleStreamChunk(t,n){const r=this.byteStreamControllers.get(t.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Vs("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),Rr.EncryptionTypeMismatch)),this.byteStreamControllers.delete(t.streamId)):t.content.length>0&&r.controller.enqueue(t));const s=this.textStreamControllers.get(t.streamId);s&&(s.info.encryptionType!==n?(s.controller.error(new Vs("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(s.info.encryptionType),Rr.EncryptionTypeMismatch)),this.textStreamControllers.delete(t.streamId)):t.content.length>0&&s.controller.enqueue(t))}handleStreamTrailer(t,n){const r=this.textStreamControllers.get(t.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Vs("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),Rr.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),t.attributes),r.controller.close(),this.textStreamControllers.delete(t.streamId)));const s=this.byteStreamControllers.get(t.streamId);s&&(s.info.encryptionType!==n?s.controller.error(new Vs("Encryption type mismatch for stream ".concat(t.streamId,". Expected ").concat(n,", got ").concat(s.info.encryptionType),Rr.EncryptionTypeMismatch)):(s.info.attributes=Object.assign(Object.assign({},s.info.attributes),t.attributes),s.controller.close()),this.byteStreamControllers.delete(t.streamId))}}class uI{constructor(t,n,r){this.writableStream=t,this.defaultWriter=t.getWriter(),this.onClose=r,this.info=n}write(t){return this.defaultWriter.write(t)}close(){return L(this,void 0,void 0,function*(){var t;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(t=this.onClose)===null||t===void 0||t.call(this)})}}class hJ extends uI{}class fJ extends uI{}const _j=15e3;class mJ{constructor(t,n){this.engine=t,this.log=n}setupEngine(t){this.engine=t}sendText(t,n){return L(this,void 0,void 0,function*(){var r;const s=crypto.randomUUID(),o=new TextEncoder().encode(t).byteLength,l=(r=n?.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),u=new Array(l?l.length+1:1).fill(0),h=(p,y)=>{var x;u[y]=p;const k=u.reduce((b,S)=>b+S,0);(x=n?.onProgress)===null||x===void 0||x.call(n,k)},f=yield this.streamText({streamId:s,totalSize:o,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield f.write(t),h(1,0),yield f.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((p,y)=>L(this,void 0,void 0,function*(){return this._sendFile(l[y],p,{topic:n.topic,mimeType:p.type,onProgress:x=>{h(x,y+1)}})})))),f.info})}streamText(t){return L(this,void 0,void 0,function*(){var n,r,s;const a=(n=t?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:a,mimeType:"text/plain",timestamp:Date.now(),topic:(r=t?.topic)!==null&&r!==void 0?r:"",size:t?.totalSize,attributes:t?.attributes,encryptionType:!((s=this.engine.e2eeManager)===null||s===void 0)&&s.isDataChannelEncryptionEnabled?Xn.GCM:Xn.NONE},l=new Zm({streamId:a,mimeType:o.mimeType,topic:o.topic,timestamp:ac(o.timestamp),totalLength:ac(t?.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new aA({version:t?.version,attachedStreamIds:t?.attachedStreamIds,replyToStreamId:t?.replyToStreamId,operationType:t?.type==="update"?e0.UPDATE:e0.CREATE})}}),u=t?.destinationIdentities,h=new Ir({destinationIdentities:u,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(h,bt.RELIABLE);let f=0;const p=this.engine,y=new WritableStream({write(b){return L(this,void 0,void 0,function*(){for(const S of dZ(b,_j)){yield p.waitForBufferStatusLow(bt.RELIABLE);const N=new Jm({content:S,streamId:a,chunkIndex:ac(f)}),E=new Ir({destinationIdentities:u,value:{case:"streamChunk",value:N}});yield p.sendDataPacket(E,bt.RELIABLE),f+=1}})},close(){return L(this,void 0,void 0,function*(){const b=new Ym({streamId:a}),S=new Ir({destinationIdentities:u,value:{case:"streamTrailer",value:b}});yield p.sendDataPacket(S,bt.RELIABLE)})},abort(b){console.log("Sink error:",b)}});let x=()=>L(this,void 0,void 0,function*(){yield k.close()});p.once(Me.Closing,x);const k=new hJ(y,o,()=>this.engine.off(Me.Closing,x));return k})}sendFile(t,n){return L(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,t,n),{id:r}})}_sendFile(t,n,r){return L(this,void 0,void 0,function*(){var s;const a=yield this.streamBytes({streamId:t,totalSize:n.size,name:n.name,mimeType:(s=r?.mimeType)!==null&&s!==void 0?s:n.type,topic:r?.topic,destinationIdentities:r?.destinationIdentities}),o=n.stream().getReader();for(;;){const{done:l,value:u}=yield o.read();if(l)break;yield a.write(u)}return yield a.close(),a.info})}streamBytes(t){return L(this,void 0,void 0,function*(){var n,r,s,a,o,l;const u=(n=t?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),h=t?.destinationIdentities,f={id:u,mimeType:(r=t?.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(s=t?.topic)!==null&&s!==void 0?s:"",timestamp:Date.now(),attributes:t?.attributes,size:t?.totalSize,name:(a=t?.name)!==null&&a!==void 0?a:"unknown",encryptionType:!((o=this.engine.e2eeManager)===null||o===void 0)&&o.isDataChannelEncryptionEnabled?Xn.GCM:Xn.NONE},p=new Zm({totalLength:ac((l=f.size)!==null&&l!==void 0?l:0),mimeType:f.mimeType,streamId:u,topic:f.topic,timestamp:ac(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new oA({name:f.name})}}),y=new Ir({destinationIdentities:h,value:{case:"streamHeader",value:p}});yield this.engine.sendDataPacket(y,bt.RELIABLE);let x=0;const k=new hs,b=this.engine,S=this.log,N=new WritableStream({write(j){return L(this,void 0,void 0,function*(){const P=yield k.lock();let T=0;try{for(;T<j.byteLength;){const I=j.slice(T,T+_j);yield b.waitForBufferStatusLow(bt.RELIABLE);const _=new Ir({destinationIdentities:h,value:{case:"streamChunk",value:new Jm({content:I,streamId:u,chunkIndex:ac(x)})}});yield b.sendDataPacket(_,bt.RELIABLE),x+=1,T+=I.byteLength}}finally{P()}})},close(){return L(this,void 0,void 0,function*(){const j=new Ym({streamId:u}),P=new Ir({destinationIdentities:h,value:{case:"streamTrailer",value:j}});yield b.sendDataPacket(P,bt.RELIABLE)})},abort(j){S.error("Sink error:",j)}});return new fJ(N,f)})}}class hI extends Y{constructor(t,n,r,s,a){super(t,r,a),this.sid=n,this.receiver=s}get isLocal(){return!1}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?Ie.Muted:Ie.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=r=>{r.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Ie.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return L(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Nw)),mZ()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:s,rtpTimestamp:a}=r;a&&this.rtpTimestamp!==a&&(this.emit(Ie.TimeSyncUpdate,{timestamp:s,rtpTimestamp:a}),this.rtpTimestamp=a)}};t()}}class fI extends hI{constructor(t,n,r,s,a,o){super(t,n,Y.Kind.Audio,r,o),this.monitorReceiver=()=>L(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=ig(l,this.prevStats)),this.prevStats=l}),this.audioContext=s,this.webAudioPluginNodes=[],a&&(this.sinkId=a.deviceId)}setVolume(t){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):r.volume=t;oa()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(oa())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return L(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(g0(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&g0(t)&&t.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(s=>{r.connect(s),r=s}),this.gainNode=t.createGain(),r.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(Ie.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(s=>{this.emit(Ie.AudioPlaybackFailed,s)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return L(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const ex=100;class pJ extends hI{constructor(t,n,r,s,a){super(t,n,Y.Kind.Video,r,a),this.elementInfos=[],this.monitorReceiver=()=>L(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=ig(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=ww(()=>{this.updateDimensions()},ex),this.adaptiveStreamSettings=s}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(t){super.setStreamState(t),console.log("setStreamState",t),t===Y.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?_l(this._mediaStreamTrack,n):xl(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new gJ(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===t);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return L(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,r="",s=new Map;return t.forEach(a=>{a.type==="inbound-rtp"?(r=a.codecId,n={type:"video",streamId:a.id,framesDecoded:a.framesDecoded,framesDropped:a.framesDropped,framesReceived:a.framesReceived,packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,frameWidth:a.frameWidth,frameHeight:a.frameHeight,pliCount:a.pliCount,firCount:a.firCount,nackCount:a.nackCount,jitter:a.jitter,timestamp:a.timestamp,bytesReceived:a.bytesReceived,decoderImplementation:a.decoderImplementation}):a.type==="codec"&&s.set(a.id,a)}),n&&r!==""&&s.get(r)&&(n.mimeType=s.get(r).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(r=>r.element===t);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return L(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(t){var n,r;const s=this.elementInfos.reduce((u,h)=>Math.max(u,h.visibilityChangedAt||0),0),a=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,o=this.elementInfos.some(u=>u.pictureInPicture),l=this.elementInfos.some(u=>u.visible)&&!a||o;if(!(this.lastVisible===l&&!t)){if(!l&&Date.now()-s<ex){mr.setTimeout(()=>{this.updateVisibility()},ex);return}this.lastVisible=l,this.emit(Ie.VisibilityChanged,l,this)}}updateDimensions(){var t,n;let r=0,s=0;const a=this.getPixelDensity();for(const o of this.elementInfos){const l=o.width()*a,u=o.height()*a;l+u>r+s&&(r=l,s=u)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===s||(this.lastDimensions={width:r,height:s},this.emit(Ie.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?aj():n||(aj()>2?2:1)}}class gJ{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=r=>{var s;const{target:a,isIntersecting:o}=r;a===this.element&&(this.isIntersecting=o,this.isPiP=ru(this.element),this.visibilityChangedAt=Date.now(),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this))},this.onEnterPiP=()=>{var r,s,a;(s=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||s===void 0||s.addEventListener("pagehide",this.onLeavePiP),this.isPiP=ru(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=ru(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=t,this.isIntersecting=n??j0(t),this.isPiP=os()&&ru(t),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var t,n,r;this.isIntersecting=j0(this.element),this.isPiP=ru(this.element),this.element.handleResize=()=>{var s;(s=this.handleResize)===null||s===void 0||s.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,cj().observe(this.element),oj().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(t=window.documentPictureInPicture)===null||t===void 0||t.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var t,n,r,s,a;(t=cj())===null||t===void 0||t.unobserve(this.element),(n=oj())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(a=(s=window.documentPictureInPicture)===null||s===void 0?void 0:s.window)===null||a===void 0||a.removeEventListener("pagehide",this.onLeavePiP)}}function ru(e){var t,n;return document.pictureInPictureElement===e?!0:!((t=window.documentPictureInPicture)===null||t===void 0)&&t.window?j0(e,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function j0(e,t){const n=t||window;let r=e.offsetTop,s=e.offsetLeft;const a=e.offsetWidth,o=e.offsetHeight,{hidden:l}=e,{display:u}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,r+=e.offsetTop,s+=e.offsetLeft;return r<n.pageYOffset+n.innerHeight&&s<n.pageXOffset+n.innerWidth&&r+o>n.pageYOffset&&s+a>n.pageXOffset&&!l&&u!=="none"}class Pa extends fa.EventEmitter{constructor(t,n,r,s){var a;super(),this.metadataMuted=!1,this.encryption=Xn.NONE,this.log=gt,this.handleMuted=()=>{this.emit(Ie.Muted)},this.handleUnmuted=()=>{this.emit(Ie.Unmuted)},this.log=Va((a=s?.loggerName)!==null&&a!==void 0?a:wi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=r,this.source=Y.Source.Unknown}setTrack(t){this.track&&(this.track.off(Ie.Muted,this.handleMuted),this.track.off(Ie.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(Ie.Muted,this.handleMuted),t.on(Ie.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Ct(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Xn.NONE}get audioTrack(){if(ea(this.track))return this.track}get videoTrack(){if($o(this.track))return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=Y.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===Y.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),(function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"})(e.PermissionStatus||(e.PermissionStatus={}))})(Pa||(Pa={}));class ep extends Pa{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,r,s){super(t,n.sid,n.name,s),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Ie.Ended)},this.handleCpuConstrained=()=>{this.track&&$o(this.track)&&this.emit(Ie.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(t){this.track&&(this.track.off(Ie.Ended,this.handleTrackEnded),this.track.off(Ie.CpuConstrained,this.handleCpuConstrained)),super.setTrack(t),t&&(t.on(Ie.Ended,this.handleTrackEnded),t.on(Ie.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return L(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return L(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return L(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return L(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(ea(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(ar.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(ar.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(ar.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(ar.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||r.add(ar.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(ar.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function ag(e,t){return L(this,void 0,void 0,function*(){e??(e={});let n=!1;const{audioProcessor:r,videoProcessor:s,optionsWithoutProcessor:a}=nI(e);let o=a.audio,l=a.video;if(r&&typeof a.audio=="object"&&(a.audio.processor=r),s&&typeof a.video=="object"&&(a.video.processor=s),e.audio&&typeof a.audio=="object"&&typeof a.audio.deviceId=="string"){const p=a.audio.deviceId;a.audio.deviceId={exact:p},n=!0,o=Object.assign(Object.assign({},a.audio),{deviceId:{ideal:p}})}if(a.video&&typeof a.video=="object"&&typeof a.video.deviceId=="string"){const p=a.video.deviceId;a.video.deviceId={exact:p},n=!0,l=Object.assign(Object.assign({},a.video),{deviceId:{ideal:p}})}(a.audio===!0||typeof a.audio=="object"&&!a.audio.deviceId)&&(a.audio={deviceId:"default"}),a.video===!0?a.video={deviceId:"default"}:typeof a.video=="object"&&!a.video.deviceId&&(a.video.deviceId="default");const u=XA(a,sI,iI),h=yw(u),f=navigator.mediaDevices.getUserMedia(h);a.audio&&(or.userMediaPromiseMap.set("audioinput",f),f.catch(()=>or.userMediaPromiseMap.delete("audioinput"))),a.video&&(or.userMediaPromiseMap.set("videoinput",f),f.catch(()=>or.userMediaPromiseMap.delete("videoinput")));try{const p=yield f;return yield Promise.all(p.getTracks().map(y=>L(this,void 0,void 0,function*(){const x=y.kind==="audio";let k=x?u.audio:u.video;(typeof k=="boolean"||!k)&&(k={});let b;const S=x?h.audio:h.video;typeof S!="boolean"&&(b=S);const N=y.getSettings().deviceId;b?.deviceId&&Po(b.deviceId)!==N?b.deviceId=N:b||(b={deviceId:N});const E=WZ(y,b,t);return E.kind===Y.Kind.Video?E.source=Y.Source.Camera:E.kind===Y.Kind.Audio&&(E.source=Y.Source.Microphone),E.mediaStream=p,ea(E)&&r?yield E.setProcessor(r):$o(E)&&s&&(yield E.setProcessor(s)),E})))}catch(p){if(!n)throw p;return ag(Object.assign(Object.assign({},e),{audio:o,video:l}),t)}})}function vJ(e){return L(this,void 0,void 0,function*(){return(yield ag({audio:!1,video:!0}))[0]})}function yJ(e){return L(this,void 0,void 0,function*(){return(yield ag({audio:!0,video:!1}))[0]})}var mi;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(mi||(mi={}));function xJ(e){switch(e){case lu.EXCELLENT:return mi.Excellent;case lu.GOOD:return mi.Good;case lu.POOR:return mi.Poor;case lu.LOST:return mi.Lost;default:return mi.Unknown}}class mI extends fa.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===Eu.AGENT}get isActive(){var t;return((t=this.participantInfo)===null||t===void 0?void 0:t.state)===El.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,r,s,a,o){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Eu.STANDARD;var u;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=mi.Unknown,this.log=gt,this.log=Va((u=o?.loggerName)!==null&&u!==void 0?u:wi.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=r,this.metadata=s,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=a??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Zs,this.once(ve.Active,()=>{var t,n;(n=(t=this.activeFuture)===null||t===void 0?void 0:t.resolve)===null||n===void 0||n.call(t),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(Y.Source.Camera);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(Y.Source.Microphone);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(Y.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){var n;return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.state===El.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==El.ACTIVE&&this.emit(ve.Active),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,!0)}_setMetadata(t){const n=this.metadata!==t,r=this.metadata;this.metadata=t,n&&this.emit(ve.ParticipantMetadataChanged,r)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(ve.ParticipantNameChanged,t)}_setAttributes(t){const n=pZ(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit(ve.AttributesChanged,n)}setPermissions(t){var n,r,s,a,o,l;const u=this.permissions,h=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||t.canPublishData!==((s=this.permissions)===null||s===void 0?void 0:s.canPublishData)||t.hidden!==((a=this.permissions)===null||a===void 0?void 0:a.hidden)||t.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((f,p)=>{var y;return f!==((y=this.permissions)===null||y===void 0?void 0:y.canPublishSources[p])})||t.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=t,h&&this.emit(ve.ParticipantPermissionsChanged,u),h}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(ve.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=xJ(t),n!==this._connectionQuality&&this.emit(ve.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var t,n;this.activeFuture&&((n=(t=this.activeFuture).reject)===null||n===void 0||n.call(t,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>ea(n.track)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(Ie.Muted,()=>{this.emit(ve.TrackMuted,t)}),t.on(Ie.Unmuted,()=>{this.emit(ve.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case Y.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case Y.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function bJ(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new hA({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=e.allowAll)!==null&&r!==void 0?r:!1,trackSids:e.allowedTrackSids||[]})}class wJ extends mI{constructor(t,n,r,s,a,o){super(t,n,void 0,void 0,void 0,{loggerName:s.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Xn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Zs)},this.handleReconnected=()=>{var l,u;(u=(l=this.reconnectFuture)===null||l===void 0?void 0:l.resolve)===null||u===void 0||u.call(l),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var l,u,h,f,p,y;this.reconnectFuture&&(this.reconnectFuture.promise.catch(x=>this.log.warn(x.message,this.logContext)),(u=(l=this.reconnectFuture)===null||l===void 0?void 0:l.reject)===null||u===void 0||u.call(l,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(h=this.signalConnectedFuture).reject)===null||f===void 0||f.call(h,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(y=(p=this.activeAgentFuture)===null||p===void 0?void 0:p.reject)===null||y===void 0||y.call(p,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=l=>{var u,h;l.participant&&this.updateInfo(l.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Zs),(h=(u=this.signalConnectedFuture).resolve)===null||h===void 0||h.call(u)},this.handleSignalRequestResponse=l=>{const{requestId:u,reason:h,message:f}=l,p=this.pendingSignalRequests.get(u);p&&(h!==mw.OK&&p.reject(new tj(f,h)),this.pendingSignalRequests.delete(u))},this.handleDataPacket=l=>{switch(l.value.case){case"rpcResponse":let u=l.value.value,h=null,f=null;u.value.case==="payload"?h=u.value.value:u.value.case==="error"&&(f=kn.fromProto(u.value.value)),this.handleIncomingRpcResponse(u.requestId,h,f);break;case"rpcAck":let p=l.value.value;this.handleIncomingRpcAck(p.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(l=>bJ(l)))},this.onTrackUnmuted=l=>{this.onTrackMuted(l,l.isUpstreamPaused)},this.onTrackMuted=(l,u)=>{if(u===void 0&&(u=!0),!l.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ct(l)));return}this.engine.updateMuteStatus(l.sid,u)},this.onTrackUpstreamPaused=l=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ct(l))),this.onTrackMuted(l,!0)},this.onTrackUpstreamResumed=l=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ct(l))),this.onTrackMuted(l,l.isMuted)},this.onTrackFeatureUpdate=l=>{const u=this.audioTrackPublications.get(l.sid);if(!u){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(l.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(u.trackSid,u.getTrackFeatures())},this.onTrackCpuConstrained=(l,u)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),Ct(u))),this.emit(ve.LocalTrackCpuConstrained,l,u)},this.handleSubscribedQualityUpdate=l=>L(this,void 0,void 0,function*(){var u,h,f,p,y;if(!(!((y=this.roomOptions)===null||y===void 0)&&y.dynacast))return;const x=this.videoTrackPublications.get(l.trackSid);if(!x){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}if(!x.videoTrack)return;const k=yield x.videoTrack.setPublishingCodecs(l.subscribedCodecs);try{for(var b=!0,S=Aa(k),N;N=yield S.next(),u=N.done,!u;b=!0){p=N.value,b=!1;const E=p;WG(E)&&(this.log.debug("publish ".concat(E," for ").concat(x.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ct(x))),yield this.publishAdditionalCodecForTrack(x.videoTrack,E,x.options))}}catch(E){h={error:E}}finally{try{!b&&!u&&(f=S.return)&&(yield f.call(S))}finally{if(h)throw h.error}}}),this.handleLocalTrackUnpublished=l=>{const u=this.trackPublications.get(l.trackSid);if(!u){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}this.unpublishTrack(u.track)},this.handleTrackEnded=l=>L(this,void 0,void 0,function*(){if(l.source===Y.Source.ScreenShare||l.source===Y.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ct(l))),this.unpublishTrack(l);else if(l.isUserProvided)yield l.mute();else if(Ta(l)||vo(l))try{if(os())try{const u=yield navigator?.permissions.query({name:l.source===Y.Source.Camera?"camera":"microphone"});if(u&&u.state==="denied")throw this.log.warn("user has revoked access to ".concat(l.source),Object.assign(Object.assign({},this.logContext),Ct(l))),u.onchange=()=>{u.state!=="denied"&&(l.isMuted||l.restartTrack(),u.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}l.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ct(l))),Ta(l)?yield l.restartTrack({deviceId:"default"}):yield l.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ct(l))),yield l.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=s,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=a,this.roomOutgoingDataStreamManager=o}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Xn.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){var n;this.engine=t,this.engine.on(Me.RemoteMute,(r,s)=>{const a=this.trackPublications.get(r);!a||!a.track||(s?a.mute():a.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(Me.Connected,this.handleReconnected).on(Me.SignalConnected,this.handleSignalConnected).on(Me.SignalRestarted,this.handleReconnected).on(Me.SignalResumed,this.handleReconnected).on(Me.Restarting,this.handleReconnecting).on(Me.Resuming,this.handleReconnecting).on(Me.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Me.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Me.Closing,this.handleClosing).on(Me.SignalRequestResponse,this.handleSignalRequestResponse).on(Me.DataPacketReceived,this.handleDataPacket)}setMetadata(t){return L(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return L(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return L(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return L(this,arguments,void 0,function(n){var r=this;let{metadata:s,name:a,attributes:o}=n;return(function*(){return new Promise((l,u)=>L(r,void 0,void 0,function*(){var h,f;try{let p=!1;const y=yield this.engine.client.sendUpdateLocalMetadata((h=s??this.metadata)!==null&&h!==void 0?h:"",(f=a??this.name)!==null&&f!==void 0?f:"",o),x=performance.now();for(this.pendingSignalRequests.set(y,{resolve:l,reject:k=>{u(k),p=!0},values:{name:a,metadata:s,attributes:o}});performance.now()-x<5e3&&!p;){if((!a||this.name===a)&&(!s||this.metadata===s)&&(!o||Object.entries(o).every(k=>{let[b,S]=k;return this.attributes[b]===S||S===""&&!this.attributes[b]}))){this.pendingSignalRequests.delete(y),l();return}yield Mr(50)}u(new tj("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&u(p)}}))})()})}setCameraEnabled(t,n,r){return this.setTrackEnabled(Y.Source.Camera,t,n,r)}setMicrophoneEnabled(t,n,r){return this.setTrackEnabled(Y.Source.Microphone,t,n,r)}setScreenShareEnabled(t,n,r){return this.setTrackEnabled(Y.Source.ScreenShare,t,n,r)}setE2EEEnabled(t){return L(this,void 0,void 0,function*(){this.encryptionType=t?Xn.GCM:Xn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,r,s){return L(this,void 0,void 0,function*(){var a,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(t);if(n)if(l)yield l.unmute();else{let u;if(this.pendingPublishing.has(t)){const h=yield this.waitForPendingPublicationOfSource(t);return h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t})),yield h?.unmute(),h}this.pendingPublishing.add(t);try{switch(t){case Y.Source.Camera:u=yield this.createTracks({video:(a=r)!==null&&a!==void 0?a:!0});break;case Y.Source.Microphone:u=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case Y.Source.ScreenShare:u=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Ia(t)}}catch(h){throw u?.forEach(f=>{f.stop()}),h instanceof Error&&this.emit(ve.MediaDevicesError,h,w0(t)),this.pendingPublishing.delete(t),h}for(const h of u){const f=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);t===Y.Source.Microphone&&ea(h)&&f.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),h.startPreConnectBuffer())}try{const h=[];for(const p of u)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ct(p))),h.push(this.publishTrack(p,s));[l]=yield Promise.all(h)}catch(h){throw u?.forEach(f=>{f.stop()}),h}finally{this.pendingPublishing.delete(t)}}else if(!l?.track&&this.pendingPublishing.has(t)&&(l=yield this.waitForPendingPublicationOfSource(t),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:t}))),l&&l.track)if(t===Y.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const u=this.getTrackPublication(Y.Source.ScreenShareAudio);u&&u.track&&this.unpublishTrack(u.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return L(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Y.Source.Camera)||this.pendingPublishing.has(Y.Source.Microphone))){this.pendingPublishing.add(Y.Source.Camera),this.pendingPublishing.add(Y.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Y.Source.Camera),this.pendingPublishing.delete(Y.Source.Microphone)}}})}createTracks(t){return L(this,void 0,void 0,function*(){var n,r;t??(t={});const s=XA(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield ag(s,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(ea(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=Y.Source.Microphone,this.emit(ve.AudioStreamAcquired)),$o(l)&&(this.cameraError=void 0,l.source=Y.Source.Camera),l))}catch(a){throw a instanceof Error&&(t.audio&&(this.microphoneError=a),t.video&&(this.cameraError=a)),a}})}createScreenTracks(t){return L(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new gw("getDisplayMedia not supported");t.resolution===void 0&&!QG()&&(t.resolution=vw.h1080fps30.resolution);const n=hZ(t),r=yield navigator.mediaDevices.getDisplayMedia(n),s=r.getVideoTracks();if(s.length===0)throw new Ia("no video track found");const a=new Xm(s[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Y.Source.ScreenShare,t.contentHint&&(a.mediaStreamTrack.contentHint=t.contentHint);const o=[a];if(r.getAudioTracks().length>0){this.emit(ve.AudioStreamAcquired);const l=new Qm(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=Y.Source.ScreenShareAudio,o.push(l)}return o})}publishTrack(t,n){return L(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return L(this,arguments,void 0,function(r,s){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var l,u,h,f;Ta(r)&&r.setAudioContext(a.audioContext),yield(l=a.reconnectFuture)===null||l===void 0?void 0:l.promise,a.republishPromise&&!o&&(yield a.republishPromise),fc(r)&&a.pendingPublishPromises.has(r)&&(yield a.pendingPublishPromises.get(r));let p;if(r instanceof MediaStreamTrack)p=r.getConstraints();else{p=r.constraints;let N;switch(r.source){case Y.Source.Microphone:N="audioinput";break;case Y.Source.Camera:N="videoinput"}N&&a.activeDeviceMap.has(N)&&(p=Object.assign(Object.assign({},p),{deviceId:a.activeDeviceMap.get(N)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new Qm(r,p,!0,a.audioContext,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;case"video":r=new Xm(r,p,!0,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;default:throw new Ia("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});let y;if(a.trackPublications.forEach(N=>{N.track&&N.track===r&&(y=N)}),y)return a.log.warn("track has already been published, skipping",Object.assign(Object.assign({},a.logContext),Ct(y))),y;const x=Object.assign(Object.assign({},a.roomOptions.publishDefaults),s),k="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,b=(u=x.forceStereo)!==null&&u!==void 0?u:k;b&&(x.dtx===void 0&&a.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},a.logContext),Ct(r))),x.red===void 0&&a.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=x.dtx)!==null&&h!==void 0||(x.dtx=!1),(f=x.red)!==null&&f!==void 0||(x.red=!1)),!eZ()&&a.roomOptions.e2ee&&(a.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},a.logContext)),x.simulcast=!1),x.source&&(r.source=x.source);const S=new Promise((N,E)=>L(a,void 0,void 0,function*(){try{if(this.engine.client.currentState!==gn.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:Ct(r)}));const j=setTimeout(()=>{E(new ej("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(j);const P=yield this.publish(r,x,b);N(P)}else try{const j=yield this.publish(r,x,b);N(j)}catch(j){E(j)}}catch(j){E(j)}}));a.pendingPublishPromises.set(r,S);try{return yield S}catch(N){throw N}finally{a.pendingPublishPromises.delete(r)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Zs),this.signalConnectedFuture.promise}hasPermissionsToPublish(t){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Ct(t))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(s=>gZ(s)).includes(t.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Ct(t))),!1)}publish(t,n,r){return L(this,void 0,void 0,function*(){var s,a,o,l,u,h,f,p,y,x;if(!this.hasPermissionsToPublish(t))throw new ej("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(O=>fc(t)&&O.source===t.source)&&t.source!==Y.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),Ct(t))),n.stopMicTrackOnMute&&ea(t)&&(t.stopOnMute=!0),t.source===Y.Source.ScreenShare&&Nc()&&(n.simulcast=!1),n.videoCodec==="av1"&&!ZG()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!JG()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=k0),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(O=>n.videoCodec===pu(O.mime))||(n.videoCodec=pu(this.enabledPublishVideoCodecs[0].mime)));const b=n.videoCodec;t.on(Ie.Muted,this.onTrackMuted),t.on(Ie.Unmuted,this.onTrackUnmuted),t.on(Ie.Ended,this.handleTrackEnded),t.on(Ie.UpstreamPaused,this.onTrackUpstreamPaused),t.on(Ie.UpstreamResumed,this.onTrackUpstreamResumed),t.on(Ie.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const S=[],N=!(!((s=n.dtx)!==null&&s!==void 0)||s),E=t.getSourceTrackSettings();E.autoGainControl&&S.push(ar.TF_AUTO_GAIN_CONTROL),E.echoCancellation&&S.push(ar.TF_ECHO_CANCELLATION),E.noiseSuppression&&S.push(ar.TF_NOISE_SUPPRESSION),E.channelCount&&E.channelCount>1&&S.push(ar.TF_STEREO),N&&S.push(ar.TF_NO_DTX),Ta(t)&&t.hasPreConnectBuffer&&S.push(ar.TF_PRECONNECT_BUFFER);const j=new Tu({cid:t.mediaStreamTrack.id,name:n.name,type:Y.kindToProto(t.kind),muted:t.isMuted,source:Y.sourceToProto(t.source),disableDtx:N,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((a=n.red)!==null&&a!==void 0)||a),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:S});let P;if(t.kind===Y.Kind.Video){let O={width:0,height:0};try{O=yield t.waitForDimensions()}catch{const q=(l=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&l!==void 0?l:_u.h720.resolution;O={width:q.width,height:q.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(t)),{dims:O}))}j.width=O.width,j.height=O.height,vo(t)&&(Zi(b)&&(t.source===Y.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Ct(t))))),n.scalabilityMode=(u=n.scalabilityMode)!==null&&u!==void 0?u:"L3T3_KEY"),j.simulcastCodecs=[new n0({codec:b,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:k0}),n.backupCodec&&b!==n.backupCodec.codec&&j.encryption===Xn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),j.simulcastCodecs.push(new n0({codec:n.backupCodec.codec,cid:""})))),P=C0(t.source===Y.Source.ScreenShare,j.width,j.height,n),j.layers=jj(j.width,j.height,P,Zi(n.videoCodec))}else t.kind===Y.Kind.Audio&&(P=[{maxBitrate:(h=n.audioPreset)===null||h===void 0?void 0:h.maxBitrate,priority:(p=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&p!==void 0?p:"high",networkPriority:(x=(y=n.audioPreset)===null||y===void 0?void 0:y.priority)!==null&&x!==void 0?x:"high"}]);if(!this.engine||this.engine.isClosed)throw new Yn("cannot publish track when not connected");const T=()=>L(this,void 0,void 0,function*(){var O,M,q;if(!this.engine.pcManager)throw new Yn("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,P),this.emit(ve.LocalSenderCreated,t.sender,t),vo(t)&&((O=n.degradationPreference)!==null&&O!==void 0||(n.degradationPreference=nJ(t)),t.setDegradationPreference(n.degradationPreference)),P)if(Nc()&&t.kind===Y.Kind.Audio){let z;for(const G of this.engine.pcManager.publisher.getTransceivers())if(G.sender===t.sender){z=G;break}z&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:z,codec:"opus",maxbr:!((M=P[0])===null||M===void 0)&&M.maxBitrate?P[0].maxBitrate/1e3:0})}else t.codec&&Zi(t.codec)&&(!((q=P[0])===null||q===void 0)&&q.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:j.cid,codec:t.codec,maxbr:P[0].maxBitrate/1e3});yield this.engine.negotiate()});let I;const _=new Promise((O,M)=>L(this,void 0,void 0,function*(){var q;try{I=yield this.engine.addTrack(j),O(I)}catch(z){t.sender&&(!((q=this.engine.pcManager)===null||q===void 0)&&q.publisher)&&(this.engine.pcManager.publisher.removeTrack(t.sender),yield this.engine.negotiate().catch(G=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(t)),{error:G}))})),M(z)}}));if(this.enabledPublishVideoCodecs.length>0)I=(yield Promise.all([_,T()]))[0];else{I=yield _;let O;if(I.codecs.forEach(M=>{O===void 0&&(O=M.mimeType)}),O&&t.kind===Y.Kind.Video){const M=pu(O);M!==b&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(t)),{codec:M})),n.videoCodec=M,P=C0(t.source===Y.Source.ScreenShare,j.width,j.height,n))}yield T()}const A=new ep(t.kind,I,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(A.on(Ie.CpuConstrained,O=>this.onTrackCpuConstrained(O,A)),A.options=n,t.sid=I.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:P,trackInfo:I})),vo(t)?t.startMonitor(this.engine.client):Ta(t)&&t.startMonitor(),this.addTrackPublication(A),this.emit(ve.LocalTrackPublished,A),Ta(t)&&I.audioFeatures.includes(ar.TF_PRECONNECT_BUFFER)){const O=t.getPreConnectBuffer(),M=t.getPreConnectBufferMimeType();this.on(ve.LocalTrackSubscribed,q=>{if(q.trackSid===I.sid){if(!t.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),Ct(t))),t.stopPreConnectBuffer()}}),O&&new Promise((z,G)=>L(this,void 0,void 0,function*(){var oe,ke,J,ge,U,ie;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),Ct(t)));const ee=setTimeout(()=>{G(new Error("agent not active within 10 seconds"))},1e4),ye=yield this.waitUntilActiveAgentPresent();clearTimeout(ee),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),Ct(t)));const Te=yield this.streamBytes({name:"preconnect-buffer",mimeType:M,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[ye.identity],attributes:{trackId:A.trackSid,sampleRate:String((U=E.sampleRate)!==null&&U!==void 0?U:"48000"),channels:String((ie=E.channelCount)!==null&&ie!==void 0?ie:"1")}});try{for(var fe=!0,B=Aa(O),te;te=yield B.next(),oe=te.done,!oe;fe=!0){ge=te.value,fe=!1;const ne=ge;yield Te.write(ne)}}catch(ne){ke={error:ne}}finally{try{!fe&&!oe&&(J=B.return)&&(yield J.call(B))}finally{if(ke)throw ke.error}}yield Te.close(),z()}catch(ee){G(ee)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),Ct(t)))}).catch(z=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(t)),{error:z}))})}return A})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,r){return L(this,void 0,void 0,function*(){var s;if(this.encryptionType!==Xn.NONE)return;let a;if(this.trackPublications.forEach(x=>{x.track&&x.track===t&&(a=x)}),!a)throw new Ia("track is not published");if(!vo(t))throw new Ia("track is not a video track");const o=Object.assign(Object.assign({},(s=this.roomOptions)===null||s===void 0?void 0:s.publishDefaults),r),l=XZ(t,n,o);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ct(t)));return}const u=t.addSimulcastTrack(n,l);if(!u)return;const h=new Tu({cid:u.mediaStreamTrack.id,type:Y.kindToProto(t.kind),muted:t.isMuted,source:Y.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:o.videoCodec,cid:u.mediaStreamTrack.id}]});if(h.layers=jj(h.width,h.height,l),!this.engine||this.engine.isClosed)throw new Yn("cannot publish track when not connected");const f=()=>L(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,u,o,l),yield this.engine.negotiate()}),y=(yield Promise.all([this.engine.addTrack(h),f()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:y}))})}unpublishTrack(t,n){return L(this,void 0,void 0,function*(){var r,s;if(fc(t)){const h=this.pendingPublishPromises.get(t);h&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Ct(t))),yield h)}const a=this.getPublicationForTrack(t),o=a?Ct(a):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!a||!a.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}t=a.track,t.off(Ie.Muted,this.onTrackMuted),t.off(Ie.Unmuted,this.onTrackUnmuted),t.off(Ie.Ended,this.handleTrackEnded),t.off(Ie.UpstreamPaused,this.onTrackUpstreamPaused),t.off(Ie.UpstreamResumed,this.onTrackUpstreamResumed),t.off(Ie.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(s=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&s!==void 0?s:!0),n?t.stop():t.stopMonitor();let l=!1;const u=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<bn.FAILED&&u)try{for(const h of this.engine.pcManager.publisher.getTransceivers())h.sender===u&&(h.direction="inactive",l=!0);if(this.engine.removeTrack(u)&&(l=!0),vo(t)){for(const[,h]of t.simulcastCodecs)h.sender&&(this.engine.removeTrack(h.sender)&&(l=!0),h.sender=void 0);t.simulcastCodecs.clear()}}catch(h){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:h}))}switch(this.trackPublications.delete(a.trackSid),a.kind){case Y.Kind.Audio:this.audioTrackPublications.delete(a.trackSid);break;case Y.Kind.Video:this.videoTrackPublications.delete(a.trackSid);break}return this.emit(ve.LocalTrackUnpublished,a),a.setTrack(void 0),l&&(yield this.engine.negotiate()),a})}unpublishTracks(t){return L(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(t){return L(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((a,o)=>L(r,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(u=>{u.track&&(n&&(u.options=Object.assign(Object.assign({},u.options),n)),l.push(u))}),yield Promise.all(l.map(u=>L(this,void 0,void 0,function*(){const h=u.track;yield this.unpublishTrack(h,!1),s&&!h.isMuted&&h.source!==Y.Source.ScreenShare&&h.source!==Y.Source.ScreenShareAudio&&(Ta(h)||vo(h))&&!h.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:u.trackSid})),yield h.restartTrack()),yield this.publishOrRepublishTrack(h,u.options,!0)}))),a()}catch(l){o(l)}finally{this.republishPromise=void 0}})),yield r.republishPromise})()})}publishData(t){return L(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const a=s.reliable?bt.RELIABLE:bt.LOSSY,o=s.destinationIdentities,l=s.topic;let u=new iw({participantIdentity:r.identity,payload:n,destinationIdentities:o,topic:l});const h=new Ir({kind:a,value:{case:"user",value:u}});yield r.engine.sendDataPacket(h,a)})()})}publishDtmf(t,n){return L(this,void 0,void 0,function*(){const r=new Ir({kind:bt.RELIABLE,value:{case:"sipDtmf",value:new YR({code:t,digit:n})}});yield this.engine.sendDataPacket(r,bt.RELIABLE)})}sendChatMessage(t,n){return L(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:t,timestamp:Date.now(),attachedFiles:n?.attachments},s=new Ir({value:{case:"chatMessage",value:new Gm(Object.assign(Object.assign({},r),{timestamp:cn.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(s,bt.RELIABLE),this.emit(ve.ChatMessage,r),r})}editChatMessage(t,n){return L(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),s=new Ir({value:{case:"chatMessage",value:new Gm(Object.assign(Object.assign({},r),{timestamp:cn.parse(r.timestamp),editTimestamp:cn.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(s,bt.RELIABLE),this.emit(ve.ChatMessage,r),r})}sendText(t,n){return L(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(t,n)})}streamText(t){return L(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(t)})}sendFile(t,n){return L(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(t,n)})}streamBytes(t){return L(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(t)})}performRpc(t){return L(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:s,method:a,payload:o,responseTimeout:l=15e3}=n;return(function*(){return new Promise((f,p)=>L(r,void 0,void 0,function*(){var y,x,k,b;if(Cw(o)>aI){p(kn.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((x=(y=this.engine.latestJoinResponse)===null||y===void 0?void 0:y.serverInfo)===null||x===void 0)&&x.version&&ki((b=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||b===void 0?void 0:b.version,"1.8.0")<0){p(kn.builtIn("UNSUPPORTED_SERVER"));return}const S=Math.max(l,8e3),N=crypto.randomUUID();yield this.publishRpcRequest(s,N,a,o,S);const E=setTimeout(()=>{this.pendingAcks.delete(N),p(kn.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(N),clearTimeout(j)},7e3);this.pendingAcks.set(N,{resolve:()=>{clearTimeout(E)},participantIdentity:s});const j=setTimeout(()=>{this.pendingResponses.delete(N),p(kn.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(N,{resolve:(P,T)=>{clearTimeout(j),this.pendingAcks.has(N)&&(console.warn("RPC response received before ack",N),this.pendingAcks.delete(N),clearTimeout(E)),T?p(T):f(P??"")},participantIdentity:s})}))})()})}registerRpcMethod(t,n){this.rpcHandlers.has(t)&&this.log.warn("you're overriding the RPC handler for method ".concat(t,", in the future this will throw an error")),this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(t){const n=this.pendingAcks.get(t);n?(n.resolve(),this.pendingAcks.delete(t)):console.error("Ack received for unexpected RPC request",t)}handleIncomingRpcResponse(t,n,r){const s=this.pendingResponses.get(t);s?(s.resolve(n,r),this.pendingResponses.delete(t)):console.error("Response received for unexpected RPC request",t)}publishRpcRequest(t,n,r,s,a){return L(this,void 0,void 0,function*(){const o=new Ir({destinationIdentities:[t],kind:bt.RELIABLE,value:{case:"rpcRequest",value:new aw({id:n,method:r,payload:s,responseTimeoutMs:a,version:1})}});yield this.engine.sendDataPacket(o,bt.RELIABLE)})}handleParticipantDisconnected(t){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===t&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:s}]of this.pendingResponses)r===t&&(s(null,kn.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return super.updateInfo(t)?(t.tracks.forEach(n=>{var r,s;const a=this.trackPublications.get(n.sid);if(a){const o=a.isMuted||((s=(r=a.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&s!==void 0?s:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(a)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0):!1}setActiveAgent(t){var n,r,s,a;this.firstActiveAgent=t,t&&!this.firstActiveAgent&&(this.firstActiveAgent=t),t?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,t):(a=(s=this.activeAgentFuture)===null||s===void 0?void 0:s.reject)===null||a===void 0||a.call(s,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Zs),this.activeAgentFuture.promise)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(r=>{const s=r.track;s&&(t instanceof MediaStreamTrack?(Ta(s)||vo(s))&&s.mediaStreamTrack===t&&(n=r):t===s&&(n=r))}),n}waitForPendingPublicationOfSource(t){return L(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const s=Array.from(this.pendingPublishPromises.entries()).find(a=>{let[o]=a;return o.source===t});if(s)return s[1];yield Mr(20)}})}}class tp extends Pa{constructor(t,n,r,s){super(t,n.sid,n.name,s),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=a=>{this.setTrack(void 0),this.emit(Ie.Ended,a)},this.handleVisibilityChange=a=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),this.logContext),this.visible=a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{this.log.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),this.logContext),this.videoDimensionsAdaptiveStream=a,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const s=new ng({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new XR({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Ie.UpdateSubscription,s),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Pa.SubscriptionStatus.Unsubscribed:super.isSubscribed?Pa.SubscriptionStatus.Subscribed:Pa.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Pa.PermissionStatus.Allowed:Pa.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(t){!this.isManualOperationAllowed()||this.requestedDisabled===!t||(this.requestedDisabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.requestedMaxQuality===t||(this.requestedMaxQuality=t,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===t.height||(Ky(this.track)&&(this.requestedVideoDimensions=t),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&Ky(this.track)&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){var t;return(t=this.requestedMaxQuality)!==null&&t!==void 0?t:Es.HIGH}setTrack(t){const n=this.subscriptionStatus,r=this.permissionStatus,s=this.track;s!==t&&(s&&(s.off(Ie.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.off(Ie.VisibilityChanged,this.handleVisibilityChange),s.off(Ie.Ended,this.handleEnded),s.detach(),s.stopMonitor(),this.emit(Ie.Unsubscribed,s)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(Ie.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(Ie.VisibilityChanged,this.handleVisibilityChange),t.on(Ie.Ended,this.handleEnded),this.emit(Ie.Subscribed,t)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(Ie.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?Ie.Muted:Ie.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(Ie.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(Ie.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Ky(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new cA({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===Y.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)uj(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=vZ(this.trackInfo,this.requestedMaxQuality);r&&uj(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(t.width=Math.ceil(n.width),t.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),t.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Es.HIGH})),t.quality=Es.HIGH)}this.emit(Ie.UpdateSettings,t)}}class np extends mI{static fromParticipantInfo(t,n,r){return new np(t,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,r,s,a,o,l){let u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Eu.STANDARD;super(n,r||"",s,a,o,l,u),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(Ie.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(t)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),t.on(Ie.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(Ie.SubscriptionPermissionChanged,n=>{this.emit(ve.TrackSubscriptionPermissionChanged,t,n)}),t.on(Ie.SubscriptionStatusChanged,n=>{this.emit(ve.TrackSubscriptionStatusChanged,t,n)}),t.on(Ie.Subscribed,n=>{this.emit(ve.TrackSubscribed,n,t)}),t.on(Ie.Unsubscribed,n=>{this.emit(ve.TrackUnsubscribed,n,t)}),t.on(Ie.SubscriptionFailed,n=>{this.emit(ve.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.Source.Microphone;this.volumeMap.set(n,t);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,r,s,a,o){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(f=>{!l&&t.kind===f.kind.toString()&&(l=f)}),!l){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ve.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,r,s,a,o-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ct(l))),this.emit(ve.TrackSubscriptionFailed,n);return}const u=t.kind==="video";let h;return u?h=new pJ(t,n,s,a):h=new fI(t,n,s,this.audioContext,this.audioOutput),h.source=l.source,h.isMuted=l.isMuted,h.setMediaStream(r),h.start(),l.setTrack(h),this.volumeMap.has(l.source)&&x0(h)&&ea(h)&&h.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,r=new Map;return t.tracks.forEach(s=>{var a,o;let l=this.getTrackPublicationBySid(s.sid);if(l)l.updateInfo(s);else{const u=Y.kindFromProto(s.type);if(!u)return;l=new tp(u,s,(a=this.signalClient.connectOptions)===null||a===void 0?void 0:a.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),l.updateInfo(s),r.set(s.sid,l);const h=Array.from(this.trackPublications.values()).find(f=>f.source===l?.source);h&&l.source!==Y.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ct(h),newTrack:Ct(l)})),this.addTrackPublication(l)}n.set(s.sid,l)}),this.trackPublications.forEach(s=>{n.has(s.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ct(s))),this.unpublishTrack(s.trackSid,!0))}),r.forEach(s=>{this.emit(ve.TrackPublished,s)}),!0}unpublishTrack(t,n){const r=this.trackPublications.get(t);if(!r)return;const{track:s}=r;switch(s&&(s.stop(),r.setTrack(void 0)),this.trackPublications.delete(t),r.kind){case Y.Kind.Audio:this.audioTrackPublications.delete(t);break;case Y.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit(ve.TrackUnpublished,r)}setAudioOutput(t){return L(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(r=>{var s;ea(r.track)&&x0(r.track)&&n.push(r.track.setSinkId((s=t.deviceId)!==null&&s!==void 0?s:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:r})),super.emit(t,...r)}}var Et;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(Et||(Et={}));const kJ=4*1e3;class qa extends fa.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(t){var n,r,s,a;if(super(),n=this,this.state=Et.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=gt,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(o,l,u)=>L(this,void 0,void 0,function*(){var h;if(!YG())throw oa()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const f=yield this.disconnectLock.lock();if(this.state===Et.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),f(),Promise.resolve();if(this.connectFuture)return f(),this.connectFuture.promise;this.setAndEmitConnectionState(Et.Connecting),((h=this.regionUrlProvider)===null||h===void 0?void 0:h.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),v0(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new N0(o,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(x=>{var k;(k=this.regionUrlProvider)===null||k===void 0||k.setServerReportedRegions(x)}).catch(x=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:x}))}));const p=(x,k,b)=>L(this,void 0,void 0,function*(){var S,N;this.abortController&&this.abortController.abort();const E=new AbortController;this.abortController=E,f?.();try{yield this.attemptConnection(b??o,l,u,E),this.abortController=void 0,x()}catch(j){if(this.regionUrlProvider&&j instanceof Lt&&j.reason!==Tt.Cancelled&&j.reason!==Tt.NotAllowed){let P=null;try{P=yield this.regionUrlProvider.getNextBestRegionUrl((S=this.abortController)===null||S===void 0?void 0:S.signal)}catch(T){if(T instanceof Lt&&(T.status===401||T.reason===Tt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),k(T);return}}P&&!(!((N=this.abortController)===null||N===void 0)&&N.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(j.message,". Retrying with another region: ").concat(P),this.logContext),this.recreateEngine(),yield p(x,k,P)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,dj(j)),k(j))}else{let P=yi.UNKNOWN_REASON;j instanceof Lt&&(P=dj(j)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,P),k(j)}}}),y=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Zs((x,k)=>{p(x,k,y)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,l,u,h,f,p)=>L(this,void 0,void 0,function*(){var y,x,k;const b=yield u.join(o,l,{autoSubscribe:h.autoSubscribe,adaptiveStream:typeof f.adaptiveStream=="object"?!0:f.adaptiveStream,maxRetries:h.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:h.websocketTimeout,singlePeerConnection:f.singlePeerConnection},p.signal);let S=b.serverInfo;if(S||(S={version:b.serverVersion,region:b.serverRegion}),this.serverInfo=S,this.log.debug("connected to Livekit Server ".concat(Object.entries(S).map(N=>{let[E,j]=N;return"".concat(E,": ").concat(j)}).join(", ")),{room:(y=b.room)===null||y===void 0?void 0:y.name,roomSid:(x=b.room)===null||x===void 0?void 0:x.sid,identity:(k=b.participant)===null||k===void 0?void 0:k.identity}),!S.version)throw new DG("unknown server version");return S.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),f.dynacast=!1),b}),this.applyJoinResponse=o=>{const l=o.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(u){this.log.error(u instanceof Error?u.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:u}))}this.handleParticipantUpdates([l,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,l,u,h)=>L(this,void 0,void 0,function*(){var f,p;this.state===Et.Reconnecting||this.isResuming||!((f=this.engine)===null||f===void 0)&&f.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((p=this.regionUrlProvider)===null||p===void 0)&&p.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Sw),u),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const y=yield this.connectSignal(o,l,this.engine,this.connOptions,this.options,h);this.applyJoinResponse(y),this.setupLocalParticipantEvents(),this.emit(le.SignalConnected)}catch(y){yield this.engine.close(),this.recreateEngine();const x=new Lt("could not establish signal connection",Tt.ServerUnreachable);throw y instanceof Error&&(x.message="".concat(x.message,": ").concat(y.message)),y instanceof Lt&&(x.reason=y.reason,x.status=y.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:y})),x}if(h.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Lt("Connection attempt aborted",Tt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,h)}catch(y){throw yield this.engine.close(),this.recreateEngine(),y}os()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),os()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Et.Connected),this.emit(le.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return L(n,[...l],void 0,function(){var h=this;let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var p,y,x,k;const b=yield h.disconnectLock.lock();try{if(h.state===Et.Disconnected){h.log.debug("already disconnected",h.logContext);return}if(h.log.info("disconnect from room",Object.assign({},h.logContext)),h.state===Et.Connecting||h.state===Et.Reconnecting||h.isResuming){const S="Abort connection attempt due to user initiated disconnect";h.log.warn(S,h.logContext),(p=h.abortController)===null||p===void 0||p.abort(S),(x=(y=h.connectFuture)===null||y===void 0?void 0:y.reject)===null||x===void 0||x.call(y,new Lt("Client initiated disconnect",Tt.Cancelled)),h.connectFuture=void 0}!((k=h.engine)===null||k===void 0)&&k.client.isDisconnected||(yield h.engine.client.sendLeave()),h.engine&&(yield h.engine.close()),h.handleDisconnect(f,yi.CLIENT_INITIATED),h.engine=void 0}finally{b()}})()})},this.onPageLeave=()=>L(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>L(this,void 0,void 0,function*(){const o=[],l=Dr();if(l&&l.os==="iOS"){const u="livekit-dummy-audio-el";let h=document.getElementById(u);if(!h){h=document.createElement("audio"),h.id=u,h.autoplay=!0,h.hidden=!0;const f=Wy();f.enabled=!0;const p=new MediaStream([f]);h.srcObject=p,document.addEventListener("visibilitychange",()=>{h&&(h.srcObject=document.hidden?null:p,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(h),this.once(le.Disconnected,()=>{h?.remove(),h=null})}o.push(h)}this.remoteParticipants.forEach(u=>{u.audioTrackPublications.forEach(h=>{h.track&&h.track.attachedElements.forEach(f=>{o.push(f)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(u=>(u.muted=!1,u.play()))]),this.handleAudioPlaybackStarted()}catch(u){throw this.handleAudioPlaybackFailed(u),u}}),this.startVideo=()=>L(this,void 0,void 0,function*(){const o=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(u=>{var h;(h=u.track)===null||h===void 0||h.attachedElements.forEach(f=>{o.includes(f)||o.push(f)})});yield Promise.all(o.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(Et.Reconnecting)&&this.emit(le.Reconnecting)},this.handleSignalRestarted=o=>L(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(Et.Connected),this.emit(le.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(l=>{var u;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(u=this.sidToIdentity.get(l.sid))!==null&&u!==void 0?u:"");let h=this.remoteParticipants.get(l.identity);l.state===El.DISCONNECTED?this.handleParticipantDisconnected(l.identity,h):h=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=o=>{const l=[],u={};o.forEach(h=>{if(u[h.sid]=!0,h.sid===this.localParticipant.sid)this.localParticipant.audioLevel=h.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const f=this.getRemoteParticipantBySid(h.sid);f&&(f.audioLevel=h.level,f.setIsSpeaking(!0),l.push(f))}}),u[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(h=>{u[h.sid]||(h.audioLevel=0,h.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(le.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=o=>{const l=new Map;this.activeSpeakers.forEach(h=>{const f=this.remoteParticipants.get(h.identity);f&&f.sid!==h.sid||l.set(h.sid,h)}),o.forEach(h=>{let f=this.getRemoteParticipantBySid(h.sid);h.sid===this.localParticipant.sid&&(f=this.localParticipant),f&&(f.audioLevel=h.level,f.setIsSpeaking(h.active),h.active?l.set(h.sid,f):l.delete(h.sid))});const u=Array.from(l.values());u.sort((h,f)=>f.audioLevel-h.audioLevel),this.activeSpeakers=u,this.emitWhenConnected(le.ActiveSpeakersChanged,u)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(l=>{const u=this.getRemoteParticipantBySid(l.participantSid);if(!u)return;const h=u.getTrackPublicationBySid(l.trackSid);if(!h||!h.track)return;const f=Y.streamStateFromProto(l.state);h.track.setStreamState(f),f!==h.track.streamState&&(u.emit(ve.TrackStreamStateChanged,h,h.track.streamState),this.emitWhenConnected(le.TrackStreamStateChanged,h,h.track.streamState,u))})},this.handleSubscriptionPermissionUpdate=o=>{const l=this.getRemoteParticipantBySid(o.participantSid);if(!l)return;const u=l.getTrackPublicationBySid(o.trackSid);u&&u.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const l=Array.from(this.remoteParticipants.values()).find(h=>h.trackPublications.has(o.trackSid));if(!l)return;const u=l.getTrackPublicationBySid(o.trackSid);u&&u.setSubscriptionError(o.err)},this.handleDataPacket=(o,l)=>{const u=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(u,o.value.value,o.kind,l);else if(o.value.case==="transcription")this.handleTranscription(u,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(u,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(u,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,u);else if(o.value.case==="streamHeader"||o.value.case==="streamChunk"||o.value.case==="streamTrailer")this.handleDataStream(o,l);else if(o.value.case==="rpcRequest"){const h=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,h.id,h.method,h.payload,h.responseTimeoutMs,h.version)}},this.handleUserPacket=(o,l,u,h)=>{this.emit(le.DataReceived,l.payload,o,u,l.topic,h),o?.emit(ve.DataReceived,l.payload,u,h)},this.handleSipDtmf=(o,l)=>{this.emit(le.SipDTMFReceived,l,o),o?.emit(ve.SipDTMFReceived,l)},this.handleTranscription=(o,l)=>{const u=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),h=u?.trackPublications.get(l.trackId),f=aZ(l,this.transcriptionReceivedTimes);h?.emit(Ie.TranscriptionReceived,f),u?.emit(ve.TranscriptionReceived,f,h),this.emit(le.TranscriptionReceived,f,u,h)},this.handleChatMessage=(o,l)=>{const u=oZ(l);this.emit(le.ChatMessage,u,o)},this.handleMetrics=(o,l)=>{this.emit(le.MetricsReceived,o,l)},this.handleDataStream=(o,l)=>{this.incomingDataStreamManager.handleDataStreamPacket(o,l)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(le.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(le.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(le.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(le.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>L(this,void 0,void 0,function*(){var o;((o=Dr())===null||o===void 0?void 0:o.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(le.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const l=this.roomInfo;this.roomInfo=o,l&&l.metadata!==o.metadata&&this.emitWhenConnected(le.RoomMetadataChanged,o.metadata),l?.activeRecording!==o.activeRecording&&this.emitWhenConnected(le.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const u=this.getRemoteParticipantBySid(l.participantSid);u&&u.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(le.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(le.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(le.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(le.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(le.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var l;(l=o?.onPublish)===null||l===void 0||l.call(o,this)},this.onLocalTrackPublished=o=>L(this,void 0,void 0,function*(){var l,u,h,f,p,y;(l=o.track)===null||l===void 0||l.on(Ie.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=o.track)===null||u===void 0||u.on(Ie.Restarted,this.onLocalTrackRestarted),(p=(f=(h=o.track)===null||h===void 0?void 0:h.getProcessor())===null||f===void 0?void 0:f.onPublish)===null||p===void 0||p.call(f,this),this.emit(le.LocalTrackPublished,o,this.localParticipant),Ta(o.track)&&(yield o.track.checkForSilence())&&this.emit(le.LocalAudioSilenceDetected,o);const x=yield(y=o.track)===null||y===void 0?void 0:y.getDeviceId(!1),k=w0(o.source);k&&x&&x!==this.localParticipant.activeDeviceMap.get(k)&&(this.localParticipant.activeDeviceMap.set(k,x),this.emit(le.ActiveDeviceChanged,k,x))}),this.onLocalTrackUnpublished=o=>{var l,u;(l=o.track)===null||l===void 0||l.off(Ie.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=o.track)===null||u===void 0||u.off(Ie.Restarted,this.onLocalTrackRestarted),this.emit(le.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>L(this,void 0,void 0,function*(){const l=yield o.getDeviceId(!1),u=w0(o.source);u&&l&&l!==this.localParticipant.activeDeviceMap.get(u)&&(this.log.debug("local track restarted, setting ".concat(u," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(u,l),this.emit(le.ActiveDeviceChanged,u,l))}),this.onLocalConnectionQualityChanged=o=>{this.emit(le.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=(o,l)=>{this.emit(le.MediaDevicesError,o,l)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(le.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(le.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},FZ),t),this.log=Va((r=this.options.loggerName)!==null&&r!==void 0?r:wi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},sI),t?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},iI),t?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},LZ),t?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new uJ,this.outgoingDataStreamManager=new mJ(this.engine,this.log),this.disconnectLock=new hs,this.localParticipant=new wJ("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Po(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Po(this.options.audioCaptureDefaults.deviceId)),!((s=this.options.audioOutput)===null||s===void 0)&&s.deviceId&&this.switchActiveDevice("audiooutput",Po(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),os()){const o=new AbortController;(a=navigator.mediaDevices)===null||a===void 0||a.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),qa.cleanupRegistry&&qa.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(t,n){return this.incomingDataStreamManager.registerTextStreamHandler(t,n)}unregisterTextStreamHandler(t){return this.incomingDataStreamManager.unregisterTextStreamHandler(t)}registerByteStreamHandler(t,n){return this.incomingDataStreamManager.registerByteStreamHandler(t,n)}unregisterByteStreamHandler(t){return this.incomingDataStreamManager.unregisterByteStreamHandler(t)}registerRpcMethod(t,n){if(this.rpcHandlers.has(t))throw Error("RPC handler already registered for method ".concat(t,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(t,n)}unregisterRpcMethod(t){this.rpcHandlers.delete(t)}setE2EEEnabled(t){return L(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new yZ(r,n),this.e2eeManager.on(Co.ParticipantEncryptionStatusChanged,(s,a)=>{lZ(a)&&(this.isE2EEEnabled=s),this.emit(le.ParticipantEncryptionStatusChanged,s,a)}),this.e2eeManager.on(Co.EncryptionError,s=>this.emit(le.EncryptionError,s)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return L(this,void 0,void 0,function*(){return this.state===Et.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const r=s=>{s.sid!==""&&(this.engine.off(Me.RoomUpdate,r),t(s.sid))};this.engine.on(Me.RoomUpdate,r),this.once(le.Disconnected,()=>{this.engine.off(Me.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new aJ(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(Me.ParticipantUpdate,this.handleParticipantUpdates).on(Me.RoomUpdate,this.handleRoomUpdate).on(Me.SpeakersChanged,this.handleSpeakersChanged).on(Me.StreamStateChanged,this.handleStreamStateUpdate).on(Me.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Me.SubscriptionError,this.handleSubscriptionError).on(Me.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Me.MediaTrackAdded,(t,n,r)=>{this.onTrackAdded(t,n,r)}).on(Me.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(Me.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Me.DataPacketReceived,this.handleDataPacket).on(Me.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Et.SignalReconnecting)&&this.emit(le.SignalReconnecting)}).on(Me.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Et.Connected)&&this.emit(le.Reconnected)}).on(Me.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Et.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Me.Restarting,this.handleRestarting).on(Me.SignalRestarted,this.handleSignalRestarted).on(Me.Offline,()=>{this.setAndEmitConnectionState(Et.Reconnecting)&&this.emit(le.Reconnecting)}).on(Me.DCBufferStatusChanged,(t,n)=>{this.emit(le.DCBufferStatusChanged,t,n)}).on(Me.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:s}=r;return s===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ve.LocalTrackSubscribed,n),this.emitWhenConnected(le.LocalTrackSubscribed,n,this.localParticipant)}).on(Me.RoomMoved,t=>{this.log.debug("room moved",t),t.room&&this.handleRoomUpdate(t.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(le.Moved,t.room.name),t.participant?this.handleParticipantUpdates([t.participant,...t.otherParticipants]):this.handleParticipantUpdates(t.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return or.getInstance().getDevices(t,n)}prepareConnection(t,n){return L(this,void 0,void 0,function*(){if(this.state===Et.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if(v0(new URL(t))&&n){this.regionUrlProvider=new N0(t,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Et.Disconnected&&(this.regionUrl=r,yield fetch(y0(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(y0(t),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return L(this,void 0,void 0,function*(){let r=()=>L(this,void 0,void 0,function*(){}),s;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":s=new qi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":s=new qi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":s=new qi({scenario:{case:"serverLeave",value:!0}});break;case"migration":s=new qi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>L(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new qi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>L(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new qi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":s=new qi({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),r=()=>L(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a(new rg({reason:yi.CLIENT_INITIATED,action:Tl.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");s=new qi({scenario:{case:"subscriberBandwidth",value:ac(n)}});break;case"leave-full-reconnect":s=new qi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}s&&(yield this.engine.client.sendSimulateScenario(s),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return L(this,arguments,void 0,function(r,s){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var l,u,h,f,p,y,x;let k=!0,b=!1;const S=o?{exact:s}:s;if(r==="audioinput"){b=a.localParticipant.audioTrackPublications.size===0;const N=(l=a.getActiveDevice(r))!==null&&l!==void 0?l:a.options.audioCaptureDefaults.deviceId;a.options.audioCaptureDefaults.deviceId=S;const E=Array.from(a.localParticipant.audioTrackPublications.values()).filter(P=>P.source===Y.Source.Microphone);try{k=(yield Promise.all(E.map(P=>{var T;return(T=P.audioTrack)===null||T===void 0?void 0:T.setDeviceId(S)}))).every(P=>P===!0)}catch(P){throw a.options.audioCaptureDefaults.deviceId=N,P}const j=E.some(P=>{var T,I;return(I=(T=P.track)===null||T===void 0?void 0:T.isMuted)!==null&&I!==void 0?I:!1});k&&j&&(b=!0)}else if(r==="videoinput"){b=a.localParticipant.videoTrackPublications.size===0;const N=(u=a.getActiveDevice(r))!==null&&u!==void 0?u:a.options.videoCaptureDefaults.deviceId;a.options.videoCaptureDefaults.deviceId=S;const E=Array.from(a.localParticipant.videoTrackPublications.values()).filter(P=>P.source===Y.Source.Camera);try{k=(yield Promise.all(E.map(P=>{var T;return(T=P.videoTrack)===null||T===void 0?void 0:T.setDeviceId(S)}))).every(P=>P===!0)}catch(P){throw a.options.videoCaptureDefaults.deviceId=N,P}const j=E.some(P=>{var T,I;return(I=(T=P.track)===null||T===void 0?void 0:T.isMuted)!==null&&I!==void 0?I:!1});k&&j&&(b=!0)}else if(r==="audiooutput"){if(b=!0,!g0()&&!a.options.webAudioMix||a.options.webAudioMix&&a.audioContext&&!("setSinkId"in a.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");a.options.webAudioMix&&(s=(h=yield or.getInstance().normalizeDeviceId("audiooutput",s))!==null&&h!==void 0?h:""),(f=(x=a.options).audioOutput)!==null&&f!==void 0||(x.audioOutput={});const N=(p=a.getActiveDevice(r))!==null&&p!==void 0?p:a.options.audioOutput.deviceId;a.options.audioOutput.deviceId=s;try{a.options.webAudioMix&&((y=a.audioContext)===null||y===void 0||y.setSinkId(s)),yield Promise.all(Array.from(a.remoteParticipants.values()).map(E=>E.setAudioOutput({deviceId:s})))}catch(E){throw a.options.audioOutput.deviceId=N,E}}return b&&(a.localParticipant.activeDeviceMap.set(r,s),a.emit(le.ActiveDeviceChanged,r,s)),k})()})}setupLocalParticipantEvents(){this.localParticipant.on(ve.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ve.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ve.AttributesChanged,this.onLocalAttributesChanged).on(ve.TrackMuted,this.onLocalTrackMuted).on(ve.TrackUnmuted,this.onLocalTrackUnmuted).on(ve.LocalTrackPublished,this.onLocalTrackPublished).on(ve.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ve.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ve.MediaDevicesError,this.onMediaDevicesError).on(ve.AudioStreamAcquired,this.startAudio).on(ve.ChatMessage,this.onLocalChatMessageSent).on(ve.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,r){if(this.state===Et.Connecting||this.state===Et.Reconnecting){const p=()=>{this.log.debug("deferring on track for later",{mediaTrackId:t.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(x=>x.id)}),this.onTrackAdded(t,n,r),y()},y=()=>{this.off(le.Reconnected,p),this.off(le.Connected,p),this.off(le.Disconnected,y)};this.once(le.Reconnected,p),this.once(le.Connected,p),this.once(le.Disconnected,y);return}if(this.state===Et.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(t.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const s=GG(n.id),a=s[0];let o=s[1],l=t.id;if(o&&o.startsWith("TR")&&(l=o),a===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const u=Array.from(this.remoteParticipants.values()).find(p=>p.sid===a);if(!u){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(a),this.logContext);return}if(!l.startsWith("TR")){const p=this.engine.getTrackIdForReceiver(r);if(!p){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(a),this.logContext);return}l=p}l.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(a,", streamId: ").concat(o,", trackId: ").concat(l),Object.assign(Object.assign({},this.logContext),{rpID:a,streamId:o,trackId:l}));let h;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?h=this.options.adaptiveStream:h={});const f=u.addSubscribedMediaTrack(t,l,n,r,h);f?.isEncrypted&&!this.e2eeManager&&this.emit(le.EncryptionError,new Error("Encrypted ".concat(f.source," track received from participant ").concat(u.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==Et.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(s=>{s.trackPublications.forEach(a=>{s.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(s=>{var a,o,l;s.track&&this.localParticipant.unpublishTrack(s.track,t),t?((a=s.track)===null||a===void 0||a.detach(),(o=s.track)===null||o===void 0||o.stop()):(l=s.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(ve.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ve.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ve.AttributesChanged,this.onLocalAttributesChanged).off(ve.TrackMuted,this.onLocalTrackMuted).off(ve.TrackUnmuted,this.onLocalTrackUnmuted).off(ve.LocalTrackPublished,this.onLocalTrackPublished).off(ve.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ve.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ve.MediaDevicesError,this.onMediaDevicesError).off(ve.AudioStreamAcquired,this.startAudio).off(ve.ChatMessage,this.onLocalChatMessageSent).off(ve.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),os()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Et.Disconnected),this.emit(le.Disconnected,n)}}}handleParticipantDisconnected(t,n){var r;this.remoteParticipants.delete(t),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(t),n.trackPublications.forEach(s=>{n.unpublishTrack(s.trackSid,!0)}),this.emit(le.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(t,n,r,s,a,o){return L(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(t,n),o!==1){yield this.engine.publishRpcResponse(t,n,null,kn.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(r);if(!l){yield this.engine.publishRpcResponse(t,n,null,kn.builtIn("UNSUPPORTED_METHOD"));return}let u=null,h=null;try{const f=yield l({requestId:n,callerIdentity:t,payload:s,responseTimeout:a});Cw(f)>aI?(u=kn.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):h=f}catch(f){f instanceof kn?u=f:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),f),u=kn.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(t,n,h,u)})}selectDefaultDevices(){return L(this,void 0,void 0,function*(){var t,n,r;const s=or.getInstance().previousDevices,a=yield or.getInstance().getDevices(void 0,!1),o=Dr();if(o?.name==="Chrome"&&o.os!=="iOS")for(let u of a){const h=s.find(f=>f.deviceId===u.deviceId);h&&h.label!==""&&h.kind===u.kind&&h.label!==u.label&&this.getActiveDevice(u.kind)==="default"&&this.emit(le.ActiveDeviceChanged,u.kind,u.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let u of l){const h=uZ(u),f=this.localParticipant.getTrackPublication(h);if(f&&(!((t=f.track)===null||t===void 0)&&t.isUserProvided))continue;const p=a.filter(x=>x.kind===u),y=this.getActiveDevice(u);if(y===((n=s.filter(x=>x.kind===u)[0])===null||n===void 0?void 0:n.deviceId)&&p.length>0&&((r=p[0])===null||r===void 0?void 0:r.deviceId)!==y){yield this.switchActiveDevice(u,p[0].deviceId);continue}u==="audioinput"&&!Ru()||u==="videoinput"||p.length>0&&!p.find(x=>x.deviceId===this.getActiveDevice(u))&&(u!=="audiooutput"||!Ru())&&(yield this.switchActiveDevice(u,p[0].deviceId))}})}acquireAudioContext(){return L(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=tI())!==null&&t!==void 0?t:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(s=>s.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Mr(200)])}catch(s){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:s}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(le.AudioPlaybackStatusChanged,r))})}createParticipant(t,n){var r;let s;return n?s=np.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):s=new np(this.engine.client,"",t,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&s.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&s.setAudioOutput(this.options.audioOutput).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),s}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const s=this.remoteParticipants.get(t);return n&&s.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),s}const r=this.createParticipant(t,n);return this.remoteParticipants.set(t,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(le.ParticipantConnected,r),r.on(ve.TrackPublished,s=>{this.emitWhenConnected(le.TrackPublished,s,r)}).on(ve.TrackSubscribed,(s,a)=>{s.kind===Y.Kind.Audio?(s.on(Ie.AudioPlaybackStarted,this.handleAudioPlaybackStarted),s.on(Ie.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):s.kind===Y.Kind.Video&&(s.on(Ie.VideoPlaybackFailed,this.handleVideoPlaybackFailed),s.on(Ie.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(le.TrackSubscribed,s,a,r)}).on(ve.TrackUnpublished,s=>{this.emit(le.TrackUnpublished,s,r)}).on(ve.TrackUnsubscribed,(s,a)=>{this.emit(le.TrackUnsubscribed,s,a,r)}).on(ve.TrackMuted,s=>{this.emitWhenConnected(le.TrackMuted,s,r)}).on(ve.TrackUnmuted,s=>{this.emitWhenConnected(le.TrackUnmuted,s,r)}).on(ve.ParticipantMetadataChanged,s=>{this.emitWhenConnected(le.ParticipantMetadataChanged,s,r)}).on(ve.ParticipantNameChanged,s=>{this.emitWhenConnected(le.ParticipantNameChanged,s,r)}).on(ve.AttributesChanged,s=>{this.emitWhenConnected(le.ParticipantAttributesChanged,s,r)}).on(ve.ConnectionQualityChanged,s=>{this.emitWhenConnected(le.ConnectionQualityChanged,s,r)}).on(ve.ParticipantPermissionsChanged,s=>{this.emitWhenConnected(le.ParticipantPermissionsChanged,s,r)}).on(ve.TrackSubscriptionStatusChanged,(s,a)=>{this.emitWhenConnected(le.TrackSubscriptionStatusChanged,s,a,r)}).on(ve.TrackSubscriptionFailed,(s,a)=>{this.emit(le.TrackSubscriptionFailed,s,r,a)}).on(ve.TrackSubscriptionPermissionChanged,(s,a)=>{this.emitWhenConnected(le.TrackSubscriptionPermissionChanged,s,a,r)}).on(ve.Active,()=>{this.emitWhenConnected(le.ParticipantActive,r),r.kind===Eu.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((r,s)=>(r.push(...s.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&cZ(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=mr.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,yi.STATE_MISMATCH))):t=0},kJ)}clearConnectionReconcile(){this.connectionReconcileInterval&&mr.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(le.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,r]=t;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(this.state===Et.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,r]);else if(this.state===Et.Connected)return this.emit(t,...r);return!1}simulateParticipants(t){return L(this,void 0,void 0,function*(){var n,r;const s=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),a=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new Xp({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:cn.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Cc({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(le.SignalConnected),this.emit(le.Connected),this.setAndEmitConnectionState(Et.Connected),s.video){const o=new ep(Y.Kind.Video,new yl({source:zn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:hi.AUDIO,name:"video-dummy"}),new Xm(s.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:lj(160*((n=a.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(ve.LocalTrackPublished,o)}if(s.audio){const o=new ep(Y.Kind.Audio,new yl({source:zn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:hi.AUDIO}),new Qm(s.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Wy(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(ve.LocalTrackPublished,o)}for(let o=0;o<a.count-1;o+=1){let l=new Cc({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:El.ACTIVE,tracks:[],joinedAt:cn.parse(Date.now())});const u=this.getOrCreateParticipant(l.identity,l);if(a.video){const h=lj(160*((r=a.aspectRatios[o%a.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),f=new yl({source:zn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:hi.AUDIO});u.addSubscribedMediaTrack(h,f.sid,new MediaStream([h]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}if(a.audio){const h=Wy(),f=new yl({source:zn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:hi.AUDIO});u.addSubscribedMediaTrack(h,f.sid,new MediaStream([h]),new RTCRtpReceiver),l.tracks=[...l.tracks,f]}u.updateInfo(l)}})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(t!==le.ActiveSpeakersChanged&&t!==le.TranscriptionReceived){const a=pI(r).filter(o=>o!==void 0);(t===le.TrackSubscribed||t===le.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:a})),this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:a}))}return super.emit(t,...r)}}qa.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{e()});function pI(e){return e.map(t=>{if(t)return Array.isArray(t)?pI(t):typeof t=="object"?"logContext"in t?t.logContext:void 0:t})}var di;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(di||(di={}));class Vo extends fa.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=di.IDLE,this.logs=[],this.options={},this.url=t,this.token=n,this.name=this.constructor.name,this.room=new qa(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(t){return L(this,void 0,void 0,function*(){if(this.status!==di.IDLE)throw Error("check is running already");this.setStatus(di.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==di.SKIPPED&&this.setStatus(this.isSuccess()?di.SUCCESS:di.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(t){return L(this,void 0,void 0,function*(){return this.room.state===Et.Connected?this.room:(t||(t=this.url),yield this.room.connect(t,this.token,this.connectOptions),this.room)})}disconnect(){return L(this,void 0,void 0,function*(){this.room&&this.room.state!==Et.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(di.SKIPPED)}switchProtocol(t){return L(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(le.Reconnecting,()=>{n=!0}),this.room.once(le.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(t)),yield new Promise(a=>setTimeout(a,1e3)),!n)return;const s=Date.now()+1e4;for(;Date.now()<s;){if(r)return;yield Mr(100)}throw new Error("Could not reconnect using ".concat(t," protocol after 10 seconds"))})}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class SJ extends Vo{get description(){return"Cloud regions"}perform(){return L(this,void 0,void 0,function*(){const t=new N0(this.url,this.token);if(!t.isCloud()){this.skip();return}const n=[],r=new Set;for(let a=0;a<3;a++){const o=yield t.getNextBestRegionUrl();if(!o)break;if(r.has(o))continue;r.add(o);const l=yield this.checkCloudRegion(o);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((a,o)=>(a.duration-o.duration)*.5+(a.rtt-o.rtt)*.5);const s=n[0];this.bestStats=s,this.appendMessage("best Cloud region: ".concat(s.region))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkCloudRegion(t){return L(this,void 0,void 0,function*(){var n,r;yield this.connect(t),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const s=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!s)throw new Error("Region not found");const a=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,u=1e6/o,h="A".repeat(o),f=Date.now();for(let k=0;k<u;k++)yield a.write(h);yield a.close();const p=Date.now(),y=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),x={region:s,rtt:1e4,duration:p-f};return y?.forEach(k=>{k.type==="candidate-pair"&&k.nominated&&(x.rtt=k.currentRoundTripTime*1e3)}),yield this.disconnect(),x})}}const tx=1e4;class CJ extends Vo{get description(){return"Connection via UDP vs TCP"}perform(){return L(this,void 0,void 0,function*(){const t=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=t,t.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(t.packetsLost-n.packetsLost)/t.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(tx/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(tx/1e3)*100).toFixed(2),"%"))})}getInfo(){const t=super.getInfo();return t.data=this.bestStats,t}checkConnectionProtocol(t){return L(this,void 0,void 0,function*(){yield this.connect(),t==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let s=0;const a=()=>{s=(s+1)%360,r.fillStyle="hsl(".concat(s,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(a)};a();const l=n.captureStream(30).getVideoTracks()[0],h=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,f={protocol:t,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},p=setInterval(()=>L(this,void 0,void 0,function*(){const y=yield h.getRTCStatsReport();y?.forEach(x=>{x.type==="outbound-rtp"?(f.packetsSent=x.packetsSent,f.qualityLimitationDurations=x.qualityLimitationDurations,f.bitrateTotal+=x.targetBitrate,f.count++):x.type==="remote-inbound-rtp"&&(f.packetsLost=x.packetsLost,f.rttTotal+=x.roundTripTime,f.jitterTotal+=x.jitter)})}),1e3);return yield new Promise(y=>setTimeout(y,tx)),clearInterval(p),l.stop(),n.remove(),yield this.disconnect(),f})}}class NJ extends Vo{get description(){return"Can publish audio"}perform(){return L(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield yJ();if(yield eI(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(l=>setTimeout(l,3e3));const a=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!a)throw new Error("Could not get RTCStats");let o=0;if(a.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(o=l.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class jJ extends Vo{get description(){return"Can publish video"}perform(){return L(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield vJ();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const s=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!s)throw new Error("Could not get RTCStats");let a=0;if(s.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(a+=o.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," video packets"))})}checkForVideo(t){return L(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(t.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(s=>{r.onplay=()=>{setTimeout(()=>{var a,o,l,u;const h=document.createElement("canvas"),f=t.getSettings(),p=(o=(a=f.width)!==null&&a!==void 0?a:r.videoWidth)!==null&&o!==void 0?o:1280,y=(u=(l=f.height)!==null&&l!==void 0?l:r.videoHeight)!==null&&u!==void 0?u:720;h.width=p,h.height=y;const x=h.getContext("2d");x.drawImage(r,0,0);const b=x.getImageData(0,0,h.width,h.height).data;let S=!0;for(let N=0;N<b.length;N+=4)if(b[N]!==0||b[N+1]!==0||b[N+2]!==0){S=!1;break}S?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),s()},1e3)},r.play()}),n.getTracks().forEach(s=>s.stop()),r.remove()})}}class EJ extends Vo{get description(){return"Resuming connection after interruption"}perform(){return L(this,void 0,void 0,function*(){var t;const n=yield this.connect();let r=!1,s=!1,a;const o=new Promise(h=>{setTimeout(h,5e3),a=h}),l=()=>{r=!0};n.on(le.SignalReconnecting,l).on(le.Reconnecting,l).on(le.Reconnected,()=>{s=!0,a(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const u=n.engine.client.onClose;if(u&&u(""),yield o,r){if(!s||n.state!==Et.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class TJ extends Vo{get description(){return"Can connect via TURN"}perform(){return L(this,void 0,void 0,function*(){var t,n;const r=new xw,s=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let a=!1,o=!1,l=!1;for(let u of s.iceServers)for(let h of u.urls)h.startsWith("turn:")?(o=!0,l=!0):h.startsWith("turns:")&&(o=!0,l=!0,a=!0),h.startsWith("stun:")&&(l=!0);l?o&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(u=>setTimeout(u,0)))})}}class PJ extends Vo{get description(){return"Establishing WebRTC connection"}perform(){return L(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(le.SignalConnected,()=>{var r;const s=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(a,o)=>{if(a.candidate){const l=new RTCIceCandidate(a);let u="".concat(l.protocol," ").concat(l.address,":").concat(l.port," ").concat(l.type);l.address&&(_J(l.address)?u+=" (private)":l.protocol==="tcp"&&l.tcpType==="passive"?(t=!0,u+=" (passive)"):l.protocol==="udp"&&(n=!0)),this.appendMessage(u)}s&&s(a,o)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=a=>{a instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(a.errorCode," ").concat(a.errorText," ").concat(a.url))})});try{yield this.connect(),gt.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function _J(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class RJ extends Vo{get description(){return"Connecting to signal connection via WebSocket"}perform(){return L(this,void 0,void 0,function*(){var t,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let s=new xw;const a=yield s.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(a.serverVersion,".")),((t=a.serverInfo)===null||t===void 0?void 0:t.edition)===tA.Cloud&&(!((n=a.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=a.serverInfo)===null||r===void 0?void 0:r.region)),yield s.close()})}}class Nle extends fa.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=r}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:di.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==di.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return L(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new t(this.url,this.token,this.options),s=o=>{this.updateCheck(n,o)};r.on("update",s);const a=yield r.run();return r.off("update",s),a})}checkWebsocket(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(RJ)})}checkWebRTC(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(PJ)})}checkTURN(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(TJ)})}checkReconnect(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(EJ)})}checkPublishAudio(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(NJ)})}checkPublishVideo(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(jJ)})}checkConnectionProtocol(){return L(this,void 0,void 0,function*(){const t=yield this.createAndRunCheck(CJ);if(t.data&&"protocol"in t.data){const n=t.data;this.options.protocol=n.protocol}return t})}checkCloudRegion(){return L(this,void 0,void 0,function*(){return this.createAndRunCheck(SJ)})}}function Nt(e,t,n){return(t=IJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IJ(e){var t=AJ(e,"string");return typeof t=="symbol"?t:t+""}new TextEncoder;new TextDecoder;class Ur extends Error{constructor(t,n){var r;super(t,n),Nt(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}Nt(Ur,"code","ERR_JOSE_GENERIC");class OJ extends Ur{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(t,{cause:{claim:r,reason:s,payload:n}}),Nt(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),Nt(this,"claim",void 0),Nt(this,"reason",void 0),Nt(this,"payload",void 0),this.claim=r,this.reason=s,this.payload=n}}Nt(OJ,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class DJ extends Ur{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(t,{cause:{claim:r,reason:s,payload:n}}),Nt(this,"code","ERR_JWT_EXPIRED"),Nt(this,"claim",void 0),Nt(this,"reason",void 0),Nt(this,"payload",void 0),this.claim=r,this.reason=s,this.payload=n}}Nt(DJ,"code","ERR_JWT_EXPIRED");class MJ extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}Nt(MJ,"code","ERR_JOSE_ALG_NOT_ALLOWED");class LJ extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Nt(LJ,"code","ERR_JOSE_NOT_SUPPORTED");class FJ extends Ur{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(t,n),Nt(this,"code","ERR_JWE_DECRYPTION_FAILED")}}Nt(FJ,"code","ERR_JWE_DECRYPTION_FAILED");class UJ extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JWE_INVALID")}}Nt(UJ,"code","ERR_JWE_INVALID");class zJ extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JWS_INVALID")}}Nt(zJ,"code","ERR_JWS_INVALID");class BJ extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JWT_INVALID")}}Nt(BJ,"code","ERR_JWT_INVALID");class $J extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JWK_INVALID")}}Nt($J,"code","ERR_JWK_INVALID");class VJ extends Ur{constructor(){super(...arguments),Nt(this,"code","ERR_JWKS_INVALID")}}Nt(VJ,"code","ERR_JWKS_INVALID");class qJ extends Ur{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(t,n),Nt(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}Nt(qJ,"code","ERR_JWKS_NO_MATCHING_KEY");class HJ extends Ur{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(t,n),Nt(this,Symbol.asyncIterator,void 0),Nt(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}Nt(HJ,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class WJ extends Ur{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(t,n),Nt(this,"code","ERR_JWKS_TIMEOUT")}}Nt(WJ,"code","ERR_JWKS_TIMEOUT");class KJ extends Ur{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(t,n),Nt(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}Nt(KJ,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function GJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=fc(e)?e.mediaStreamTrack:e,s=r.getSettings();let a={facingMode:(n=t.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in s){const o=s.facingMode;gt.trace("rawFacingMode",{rawFacingMode:o}),o&&typeof o=="string"&&YJ(o)&&(a={facingMode:o,confidence:"high"})}if(["low","medium"].includes(a.confidence)){gt.trace("Try to get facing mode from device label: (".concat(r.label,")"));const o=JJ(r.label);o!==void 0&&(a=o)}return a}const Rj=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),ZJ=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function JJ(e){var t;const n=e.trim().toLowerCase();if(n!=="")return Rj.has(n)?Rj.get(n):(t=Array.from(ZJ.entries()).find(r=>{let[s]=r;return n.includes(s)}))===null||t===void 0?void 0:t[1]}function YJ(e){return e===void 0||["user","environment","left","right"].includes(e)}const rp=Math.min,mc=Math.max,sp=Math.round,Of=Math.floor,ta=e=>({x:e,y:e}),QJ={left:"right",right:"left",bottom:"top",top:"bottom"},XJ={start:"end",end:"start"};function Aj(e,t,n){return mc(e,rp(t,n))}function og(e,t){return typeof e=="function"?e(t):e}function Ec(e){return e.split("-")[0]}function cg(e){return e.split("-")[1]}function gI(e){return e==="x"?"y":"x"}function vI(e){return e==="y"?"height":"width"}function Hl(e){return["top","bottom"].includes(Ec(e))?"y":"x"}function yI(e){return gI(Hl(e))}function eY(e,t,n){n===void 0&&(n=!1);const r=cg(e),s=yI(e),a=vI(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=ip(o)),[o,ip(o)]}function tY(e){const t=ip(e);return[E0(e),t,E0(t)]}function E0(e){return e.replace(/start|end/g,t=>XJ[t])}function nY(e,t,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?a:o;default:return[]}}function rY(e,t,n,r){const s=cg(e);let a=nY(Ec(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(E0)))),a}function ip(e){return e.replace(/left|right|bottom|top/g,t=>QJ[t])}function sY(e){return{top:0,right:0,bottom:0,left:0,...e}}function iY(e){return typeof e!="number"?sY(e):{top:e,right:e,bottom:e,left:e}}function ap(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Ij(e,t,n){let{reference:r,floating:s}=e;const a=Hl(t),o=yI(t),l=vI(o),u=Ec(t),h=a==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,y=r[l]/2-s[l]/2;let x;switch(u){case"top":x={x:f,y:r.y-s.height};break;case"bottom":x={x:f,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:p};break;case"left":x={x:r.x-s.width,y:p};break;default:x={x:r.x,y:r.y}}switch(cg(t)){case"start":x[o]-=y*(n&&h?-1:1);break;case"end":x[o]+=y*(n&&h?-1:1);break}return x}const aY=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:p}=Ij(h,r,u),y=r,x={},k=0;for(let b=0;b<l.length;b++){const{name:S,fn:N}=l[b],{x:E,y:j,data:P,reset:T}=await N({x:f,y:p,initialPlacement:r,placement:y,strategy:s,middlewareData:x,rects:h,platform:o,elements:{reference:e,floating:t}});f=E??f,p=j??p,x={...x,[S]:{...x[S],...P}},T&&k<=50&&(k++,typeof T=="object"&&(T.placement&&(y=T.placement),T.rects&&(h=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:f,y:p}=Ij(h,y,u)),b=-1)}return{x:f,y:p,placement:y,strategy:s,middlewareData:x}};async function xI(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:u}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:x=0}=og(t,e),k=iY(x),b=l[y?p==="floating"?"reference":"floating":p],S=ap(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:u})),N=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},P=ap(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:E,strategy:u}):N);return{top:(S.top-P.top+k.top)/j.y,bottom:(P.bottom-S.bottom+k.bottom)/j.y,left:(S.left-P.left+k.left)/j.x,right:(P.right-S.right+k.right)/j.x}}const oY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:h}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:b=!0,...S}=og(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const N=Ec(s),E=Hl(l),j=Ec(l)===l,P=await(u.isRTL==null?void 0:u.isRTL(h.floating)),T=y||(j||!b?[ip(l)]:tY(l)),I=k!=="none";!y&&I&&T.push(...rY(l,b,k,P));const _=[l,...T],A=await xI(t,S),O=[];let M=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&O.push(A[N]),p){const oe=eY(s,o,P);O.push(A[oe[0]],A[oe[1]])}if(M=[...M,{placement:s,overflows:O}],!O.every(oe=>oe<=0)){var q,z;const oe=(((q=a.flip)==null?void 0:q.index)||0)+1,ke=_[oe];if(ke)return{data:{index:oe,overflows:M},reset:{placement:ke}};let J=(z=M.filter(ge=>ge.overflows[0]<=0).sort((ge,U)=>ge.overflows[1]-U.overflows[1])[0])==null?void 0:z.placement;if(!J)switch(x){case"bestFit":{var G;const ge=(G=M.filter(U=>{if(I){const ie=Hl(U.placement);return ie===E||ie==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(ie=>ie>0).reduce((ie,fe)=>ie+fe,0)]).sort((U,ie)=>U[1]-ie[1])[0])==null?void 0:G[0];ge&&(J=ge);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};async function cY(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ec(n),l=cg(n),u=Hl(n)==="y",h=["left","top"].includes(o)?-1:1,f=a&&u?-1:1,p=og(t,e);let{mainAxis:y,crossAxis:x,alignmentAxis:k}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof k=="number"&&(x=l==="end"?k*-1:k),u?{x:x*f,y:y*h}:{x:y*h,y:x*f}}const lY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=t,u=await cY(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:o}}}}},dY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:S=>{let{x:N,y:E}=S;return{x:N,y:E}}},...u}=og(e,t),h={x:n,y:r},f=await xI(t,u),p=Hl(Ec(s)),y=gI(p);let x=h[y],k=h[p];if(a){const S=y==="y"?"top":"left",N=y==="y"?"bottom":"right",E=x+f[S],j=x-f[N];x=Aj(E,x,j)}if(o){const S=p==="y"?"top":"left",N=p==="y"?"bottom":"right",E=k+f[S],j=k-f[N];k=Aj(E,k,j)}const b=l.fn({...t,[y]:x,[p]:k});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[y]:a,[p]:o}}}}}};function lg(){return typeof window<"u"}function hd(e){return bI(e)?(e.nodeName||"").toLowerCase():"#document"}function Ps(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ma(e){var t;return(t=(bI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bI(e){return lg()?e instanceof Node||e instanceof Ps(e).Node:!1}function Si(e){return lg()?e instanceof Element||e instanceof Ps(e).Element:!1}function ca(e){return lg()?e instanceof HTMLElement||e instanceof Ps(e).HTMLElement:!1}function Oj(e){return!lg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ps(e).ShadowRoot}function th(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Ci(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function uY(e){return["table","td","th"].includes(hd(e))}function dg(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ew(e){const t=Tw(),n=Si(e)?Ci(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hY(e){let t=Fo(e);for(;ca(t)&&!Wl(t);){if(Ew(t))return t;if(dg(t))return null;t=Fo(t)}return null}function Tw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wl(e){return["html","body","#document"].includes(hd(e))}function Ci(e){return Ps(e).getComputedStyle(e)}function ug(e){return Si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fo(e){if(hd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Oj(e)&&e.host||ma(e);return Oj(t)?t.host:t}function wI(e){const t=Fo(e);return Wl(t)?e.ownerDocument?e.ownerDocument.body:e.body:ca(t)&&th(t)?t:wI(t)}function Au(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=wI(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=Ps(s);if(a){const l=T0(o);return t.concat(o,o.visualViewport||[],th(s)?s:[],l&&n?Au(l):[])}return t.concat(s,Au(s,[],n))}function T0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function kI(e){const t=Ci(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ca(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=sp(n)!==a||sp(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Pw(e){return Si(e)?e:e.contextElement}function Al(e){const t=Pw(e);if(!ca(t))return ta(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=kI(t);let o=(a?sp(n.width):n.width)/r,l=(a?sp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const fY=ta(0);function SI(e){const t=Ps(e);return!Tw()||!t.visualViewport?fY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ps(e)?!1:t}function Tc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=Pw(e);let o=ta(1);t&&(r?Si(r)&&(o=Al(r)):o=Al(e));const l=mY(a,n,r)?SI(a):ta(0);let u=(s.left+l.x)/o.x,h=(s.top+l.y)/o.y,f=s.width/o.x,p=s.height/o.y;if(a){const y=Ps(a),x=r&&Si(r)?Ps(r):r;let k=y,b=T0(k);for(;b&&r&&x!==k;){const S=Al(b),N=b.getBoundingClientRect(),E=Ci(b),j=N.left+(b.clientLeft+parseFloat(E.paddingLeft))*S.x,P=N.top+(b.clientTop+parseFloat(E.paddingTop))*S.y;u*=S.x,h*=S.y,f*=S.x,p*=S.y,u+=j,h+=P,k=Ps(b),b=T0(k)}}return ap({width:f,height:p,x:u,y:h})}function _w(e,t){const n=ug(e).scrollLeft;return t?t.left+n:Tc(ma(e)).left+n}function CI(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:_w(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function pY(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=ma(r),l=t?dg(t.floating):!1;if(r===o||l&&a)return n;let u={scrollLeft:0,scrollTop:0},h=ta(1);const f=ta(0),p=ca(r);if((p||!p&&!a)&&((hd(r)!=="body"||th(o))&&(u=ug(r)),ca(r))){const x=Tc(r);h=Al(r),f.x=x.x+r.clientLeft,f.y=x.y+r.clientTop}const y=o&&!p&&!a?CI(o,u,!0):ta(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+f.x+y.x,y:n.y*h.y-u.scrollTop*h.y+f.y+y.y}}function gY(e){return Array.from(e.getClientRects())}function vY(e){const t=ma(e),n=ug(e),r=e.ownerDocument.body,s=mc(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=mc(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_w(e);const l=-n.scrollTop;return Ci(r).direction==="rtl"&&(o+=mc(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function yY(e,t){const n=Ps(e),r=ma(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(s){a=s.width,o=s.height;const h=Tw();(!h||h&&t==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:a,height:o,x:l,y:u}}function xY(e,t){const n=Tc(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=ca(e)?Al(e):ta(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,u=s*a.x,h=r*a.y;return{width:o,height:l,x:u,y:h}}function Dj(e,t,n){let r;if(t==="viewport")r=yY(e,n);else if(t==="document")r=vY(ma(e));else if(Si(t))r=xY(t,n);else{const s=SI(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ap(r)}function NI(e,t){const n=Fo(e);return n===t||!Si(n)||Wl(n)?!1:Ci(n).position==="fixed"||NI(n,t)}function bY(e,t){const n=t.get(e);if(n)return n;let r=Au(e,[],!1).filter(l=>Si(l)&&hd(l)!=="body"),s=null;const a=Ci(e).position==="fixed";let o=a?Fo(e):e;for(;Si(o)&&!Wl(o);){const l=Ci(o),u=Ew(o);!u&&l.position==="fixed"&&(s=null),(a?!u&&!s:!u&&l.position==="static"&&s&&["absolute","fixed"].includes(s.position)||th(o)&&!u&&NI(e,o))?r=r.filter(h=>h!==o):s=l,o=Fo(o)}return t.set(e,r),r}function wY(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?dg(t)?[]:bY(t,this._c):[].concat(n),r],o=a[0],l=a.reduce((u,h)=>{const f=Dj(t,h,s);return u.top=mc(f.top,u.top),u.right=rp(f.right,u.right),u.bottom=rp(f.bottom,u.bottom),u.left=mc(f.left,u.left),u},Dj(t,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function kY(e){const{width:t,height:n}=kI(e);return{width:t,height:n}}function SY(e,t,n){const r=ca(t),s=ma(t),a=n==="fixed",o=Tc(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const u=ta(0);if(r||!r&&!a)if((hd(t)!=="body"||th(s))&&(l=ug(t)),r){const y=Tc(t,!0,a,t);u.x=y.x+t.clientLeft,u.y=y.y+t.clientTop}else s&&(u.x=_w(s));const h=s&&!r&&!a?CI(s,l):ta(0),f=o.left+l.scrollLeft-u.x-h.x,p=o.top+l.scrollTop-u.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function nx(e){return Ci(e).position==="static"}function Mj(e,t){if(!ca(e)||Ci(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ma(e)===n&&(n=n.ownerDocument.body),n}function jI(e,t){const n=Ps(e);if(dg(e))return n;if(!ca(e)){let s=Fo(e);for(;s&&!Wl(s);){if(Si(s)&&!nx(s))return s;s=Fo(s)}return n}let r=Mj(e,t);for(;r&&uY(r)&&nx(r);)r=Mj(r,t);return r&&Wl(r)&&nx(r)&&!Ew(r)?n:r||hY(e)||n}const CY=async function(e){const t=this.getOffsetParent||jI,n=this.getDimensions,r=await n(e.floating);return{reference:SY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function NY(e){return Ci(e).direction==="rtl"}const jY={convertOffsetParentRelativeRectToViewportRelativeRect:pY,getDocumentElement:ma,getClippingRect:wY,getOffsetParent:jI,getElementRects:CY,getClientRects:gY,getDimensions:kY,getScale:Al,isElement:Si,isRTL:NY};function EI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function EY(e,t){let n=null,r;const s=ma(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const h=e.getBoundingClientRect(),{left:f,top:p,width:y,height:x}=h;if(l||t(),!y||!x)return;const k=Of(p),b=Of(s.clientWidth-(f+y)),S=Of(s.clientHeight-(p+x)),N=Of(f),E={rootMargin:-k+"px "+-b+"px "+-S+"px "+-N+"px",threshold:mc(0,rp(1,u))||1};let j=!0;function P(T){const I=T[0].intersectionRatio;if(I!==u){if(!j)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!EI(h,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(P,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,E)}n.observe(e)}return o(!0),a}function TY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=Pw(e),f=s||a?[...h?Au(h):[],...Au(t)]:[];f.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),a&&N.addEventListener("resize",n)});const p=h&&l?EY(h,n):null;let y=-1,x=null;o&&(x=new ResizeObserver(N=>{let[E]=N;E&&E.target===h&&x&&(x.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var j;(j=x)==null||j.observe(t)})),n()}),h&&!u&&x.observe(h),x.observe(t));let k,b=u?Tc(e):null;u&&S();function S(){const N=Tc(e);b&&!EI(b,N)&&n(),b=N,k=requestAnimationFrame(S)}return n(),()=>{var N;f.forEach(E=>{s&&E.removeEventListener("scroll",n),a&&E.removeEventListener("resize",n)}),p?.(),(N=x)==null||N.disconnect(),x=null,u&&cancelAnimationFrame(k)}}const PY=lY,_Y=dY,RY=oY,AY=(e,t,n)=>{const r=new Map,s={platform:jY,...n},a={...s.platform,_c:r};return aY(e,t,{...s,platform:a})};var Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P0={exports:{}},IY=P0.exports,Lj;function OY(){return Lj||(Lj=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(IY,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],a={},o=null;function l(b,S){var N=b[S];if(typeof N.bind=="function")return N.bind(b);try{return Function.prototype.bind.call(N,b)}catch{return function(){return Function.prototype.apply.apply(N,[b,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&r?u:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):t}function f(){for(var b=this.getLevel(),S=0;S<s.length;S++){var N=s[S];this[N]=S<b?t:this.methodFactory(N,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function p(b){return function(){typeof console!==n&&(f.call(this),this[b].apply(this,arguments))}}function y(b,S,N){return h(b)||p.apply(this,arguments)}function x(b,S){var N=this,E,j,P,T="loglevel";typeof b=="string"?T+=":"+b:typeof b=="symbol"&&(T=void 0);function I(q){var z=(s[q]||"silent").toUpperCase();if(!(typeof window===n||!T)){try{window.localStorage[T]=z;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+z+";"}catch{}}}function _(){var q;if(!(typeof window===n||!T)){try{q=window.localStorage[T]}catch{}if(typeof q===n)try{var z=window.document.cookie,G=encodeURIComponent(T),oe=z.indexOf(G+"=");oe!==-1&&(q=/^([^;]+)/.exec(z.slice(oe+G.length+1))[1])}catch{}return N.levels[q]===void 0&&(q=void 0),q}}function A(){if(!(typeof window===n||!T)){try{window.localStorage.removeItem(T)}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function O(q){var z=q;if(typeof z=="string"&&N.levels[z.toUpperCase()]!==void 0&&(z=N.levels[z.toUpperCase()]),typeof z=="number"&&z>=0&&z<=N.levels.SILENT)return z;throw new TypeError("log.setLevel() called with invalid level: "+q)}N.name=b,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=S||y,N.getLevel=function(){return P??j??E},N.setLevel=function(q,z){return P=O(q),z!==!1&&I(P),f.call(N)},N.setDefaultLevel=function(q){j=O(q),_()||N.setLevel(q,!1)},N.resetLevel=function(){P=null,A(),f.call(N)},N.enableAll=function(q){N.setLevel(N.levels.TRACE,q)},N.disableAll=function(q){N.setLevel(N.levels.SILENT,q)},N.rebuild=function(){if(o!==N&&(E=O(o.getLevel())),f.call(N),o===N)for(var q in a)a[q].rebuild()},E=O(o?o.getLevel():"WARN");var M=_();M!=null&&(P=O(M)),f.call(N)}o=new x,o.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var S=a[b];return S||(S=a[b]=new x(b,o.methodFactory)),S};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return a},o.default=o,o})})(P0)),P0.exports}var DY=OY();const MY=TI(DY);var _0=function(e,t){return _0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},_0(e,t)};function Wa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_0(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function LY(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(f){try{h(r.next(f))}catch(p){o(p)}}function u(f){try{h(r.throw(f))}catch(p){o(p)}}function h(f){f.done?a(f.value):s(f.value).then(l,u)}h((r=r.apply(e,[])).next())})}function PI(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(f){return u([h,f])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(a=h[0]&2?s.return:h[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,h[1])).done)return a;switch(s=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){n.label=h[1];break}if(h[0]===6&&n.label<a[1]){n.label=a[1],a=h;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(h);break}a[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(f){h=[6,f],s=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Kl(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gl(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Iu(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Il(e){return this instanceof Il?(this.v=e,this):new Il(e)}function FY(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(x){return function(k){return Promise.resolve(k).then(x,p)}}function l(x,k){r[x]&&(s[x]=function(b){return new Promise(function(S,N){a.push([x,b,S,N])>1||u(x,b)})},k&&(s[x]=k(s[x])))}function u(x,k){try{h(r[x](k))}catch(b){y(a[0][3],b)}}function h(x){x.value instanceof Il?Promise.resolve(x.value.v).then(f,p):y(a[0][2],x)}function f(x){u("next",x)}function p(x){u("throw",x)}function y(x,k){x(k),a.shift(),a.length&&u(a[0][0],a[0][1])}}function UY(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Kl=="function"?Kl(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,u){o=e[a](o),s(l,u,o.done,o.value)})}}function s(a,o,l,u){Promise.resolve(u).then(function(h){a({value:h,done:l})},o)}}function Zt(e){return typeof e=="function"}function Rw(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rx=Rw(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function op(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var nh=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,s,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=Kl(o),u=l.next();!u.done;u=l.next()){var h=u.value;h.remove(this)}}catch(b){t={error:b}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else o.remove(this);var f=this.initialTeardown;if(Zt(f))try{f()}catch(b){a=b instanceof rx?b.errors:[b]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var y=Kl(p),x=y.next();!x.done;x=y.next()){var k=x.value;try{Fj(k)}catch(b){a=a??[],b instanceof rx?a=Iu(Iu([],Gl(a)),Gl(b.errors)):a.push(b)}}}catch(b){r={error:b}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(r)throw r.error}}}if(a)throw new rx(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Fj(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&op(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&op(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),_I=nh.EMPTY;function RI(e){return e instanceof nh||e&&"closed"in e&&Zt(e.remove)&&Zt(e.add)&&Zt(e.unsubscribe)}function Fj(e){Zt(e)?e():e.unsubscribe()}var zY={Promise:void 0},BY={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Iu([e,t],Gl(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function AI(e){BY.setTimeout(function(){throw e})}function cp(){}function fm(e){e()}var Aw=(function(e){Wa(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,RI(n)&&n.add(r)):r.destination=qY,r}return t.create=function(n,r,s){return new R0(n,r,s)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(nh),$Y=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Mf(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Mf(r)}else Mf(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Mf(n)}},e})(),R0=(function(e){Wa(t,e);function t(n,r,s){var a=e.call(this)||this,o;return Zt(n)||!n?o={next:n??void 0,error:r??void 0,complete:s??void 0}:o=n,a.destination=new $Y(o),a}return t})(Aw);function Mf(e){AI(e)}function VY(e){throw e}var qY={closed:!0,next:cp,error:VY,complete:cp},Iw=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Ow(e){return e}function HY(e){return e.length===0?Ow:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var tr=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var s=this,a=KY(t)?t:new R0(t,n,r);return fm(function(){var o=s,l=o.operator,u=o.source;a.add(l?l.call(a,u):u?s._subscribe(a):s._trySubscribe(a))}),a},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Uj(n),new n(function(s,a){var o=new R0({next:function(l){try{t(l)}catch(u){a(u),o.unsubscribe()}},error:a,complete:s});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Iw]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return HY(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Uj(t),new t(function(r,s){var a;n.subscribe(function(o){return a=o},function(o){return s(o)},function(){return r(a)})})},e.create=function(t){return new e(t)},e})();function Uj(e){var t;return(t=e??zY.Promise)!==null&&t!==void 0?t:Promise}function WY(e){return e&&Zt(e.next)&&Zt(e.error)&&Zt(e.complete)}function KY(e){return e&&e instanceof Aw||WY(e)&&RI(e)}function GY(e){return Zt(e?.lift)}function Ai(e){return function(t){if(GY(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ni(e,t,n,r,s){return new ZY(e,t,n,r,s)}var ZY=(function(e){Wa(t,e);function t(n,r,s,a,o,l){var u=e.call(this,n)||this;return u.onFinalize=o,u.shouldUnsubscribe=l,u._next=r?function(h){try{r(h)}catch(f){n.error(f)}}:e.prototype._next,u._error=a?function(h){try{a(h)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=s?function(){try{s()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,u}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(Aw),JY=Rw(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Pc=(function(e){Wa(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new zj(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new JY},t.prototype.next=function(n){var r=this;fm(function(){var s,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Kl(r.currentObservers),l=o.next();!l.done;l=o.next()){var u=l.value;u.next(n)}}catch(h){s={error:h}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}}})},t.prototype.error=function(n){var r=this;fm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},t.prototype.complete=function(){var n=this;fm(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,s=this,a=s.hasError,o=s.isStopped,l=s.observers;return a||o?_I:(this.currentObservers=null,l.push(n),new nh(function(){r.currentObservers=null,op(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,a=r.thrownError,o=r.isStopped;s?n.error(a):o&&n.complete()},t.prototype.asObservable=function(){var n=new tr;return n.source=this,n},t.create=function(n,r){return new zj(n,r)},t})(tr),zj=(function(e){Wa(t,e);function t(n,r){var s=e.call(this)||this;return s.destination=n,s.source=r,s}return t.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},t.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:_I},t})(Pc),II=(function(e){Wa(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,a=n._value;if(r)throw s;return this._throwIfClosed(),a},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t})(Pc),YY={now:function(){return Date.now()}},QY=(function(e){Wa(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t})(nh),Bj={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Iu([e,t],Gl(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},XY=(function(e){Wa(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.scheduler=n,s.work=r,s.pending=!1,s}return t.prototype.schedule=function(n,r){var s;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,r)),this.pending=!0,this.delay=r,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,s){return s===void 0&&(s=0),Bj.setInterval(n.flush.bind(n,this),s)},t.prototype.recycleAsyncId=function(n,r,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return r;r!=null&&Bj.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,r);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var s=!1,a;try{this.work(n)}catch(o){s=!0,a=o||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),a},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,s=n.scheduler,a=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,op(a,this),r!=null&&(this.id=this.recycleAsyncId(s,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(QY),$j=(function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=YY.now,e})(),eQ=(function(e){Wa(t,e);function t(n,r){r===void 0&&(r=$j.now);var s=e.call(this,n,r)||this;return s.actions=[],s._active=!1,s}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}},t})($j),tQ=new eQ(XY);function nQ(e){return e&&Zt(e.schedule)}function rQ(e){return e[e.length-1]}function Dw(e){return nQ(rQ(e))?e.pop():void 0}var Mw=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function OI(e){return Zt(e?.then)}function DI(e){return Zt(e[Iw])}function MI(e){return Symbol.asyncIterator&&Zt(e?.[Symbol.asyncIterator])}function LI(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function sQ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var FI=sQ();function UI(e){return Zt(e?.[FI])}function zI(e){return FY(this,arguments,function(){var t,n,r,s;return PI(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Il(t.read())];case 3:return n=a.sent(),r=n.value,s=n.done,s?[4,Il(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Il(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function BI(e){return Zt(e?.getReader)}function Ka(e){if(e instanceof tr)return e;if(e!=null){if(DI(e))return iQ(e);if(Mw(e))return aQ(e);if(OI(e))return oQ(e);if(MI(e))return $I(e);if(UI(e))return cQ(e);if(BI(e))return lQ(e)}throw LI(e)}function iQ(e){return new tr(function(t){var n=e[Iw]();if(Zt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aQ(e){return new tr(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function oQ(e){return new tr(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,AI)})}function cQ(e){return new tr(function(t){var n,r;try{for(var s=Kl(e),a=s.next();!a.done;a=s.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}t.complete()})}function $I(e){return new tr(function(t){dQ(e,t).catch(function(n){return t.error(n)})})}function lQ(e){return $I(zI(e))}function dQ(e,t){var n,r,s,a;return LY(this,void 0,void 0,function(){var o,l;return PI(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=UY(e),u.label=1;case 1:return[4,n.next()];case 2:if(r=u.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=u.sent(),s={error:l},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function _o(e,t,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var a=t.schedule(function(){n(),s?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!s)return a}function VI(e,t){return t===void 0&&(t=0),Ai(function(n,r){n.subscribe(Ni(r,function(s){return _o(r,e,function(){return r.next(s)},t)},function(){return _o(r,e,function(){return r.complete()},t)},function(s){return _o(r,e,function(){return r.error(s)},t)}))})}function qI(e,t){return t===void 0&&(t=0),Ai(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function uQ(e,t){return Ka(e).pipe(qI(t),VI(t))}function hQ(e,t){return Ka(e).pipe(qI(t),VI(t))}function fQ(e,t){return new tr(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function mQ(e,t){return new tr(function(n){var r;return _o(n,t,function(){r=e[FI](),_o(n,t,function(){var s,a,o;try{s=r.next(),a=s.value,o=s.done}catch(l){n.error(l);return}o?n.complete():n.next(a)},0,!0)}),function(){return Zt(r?.return)&&r.return()}})}function HI(e,t){if(!e)throw new Error("Iterable cannot be null");return new tr(function(n){_o(n,t,function(){var r=e[Symbol.asyncIterator]();_o(n,t,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function pQ(e,t){return HI(zI(e),t)}function gQ(e,t){if(e!=null){if(DI(e))return uQ(e,t);if(Mw(e))return fQ(e,t);if(OI(e))return hQ(e,t);if(MI(e))return HI(e,t);if(UI(e))return mQ(e,t);if(BI(e))return pQ(e,t)}throw LI(e)}function Lw(e,t){return t?gQ(e,t):Ka(e)}function Vj(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Dw(e);return Lw(e,n)}function vQ(e){return e instanceof Date&&!isNaN(e)}var yQ=Rw(function(e){return function(t){t===void 0&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function xQ(e,t){var n=vQ(e)?{first:e}:typeof e=="number"?{each:e}:e,r=n.first,s=n.each,a=n.with,o=a===void 0?bQ:a,l=n.scheduler,u=l===void 0?tQ:l,h=n.meta,f=h===void 0?null:h;if(r==null&&s==null)throw new TypeError("No timeout provided.");return Ai(function(p,y){var x,k,b=null,S=0,N=function(E){k=_o(y,u,function(){try{x.unsubscribe(),Ka(o({meta:f,lastValue:b,seen:S})).subscribe(y)}catch(j){y.error(j)}},E)};x=p.subscribe(Ni(y,function(E){k?.unsubscribe(),S++,y.next(b=E),s>0&&N(s)},void 0,void 0,function(){k!=null&&k.closed||k==null||k.unsubscribe(),b=null})),!S&&N(r!=null?typeof r=="number"?r:+r-u.now():s)})}function bQ(e){throw new yQ(e)}function Hn(e,t){return Ai(function(n,r){var s=0;n.subscribe(Ni(r,function(a){r.next(e.call(t,a,s++))}))})}var wQ=Array.isArray;function kQ(e,t){return wQ(t)?e.apply(void 0,Iu([],Gl(t))):e(t)}function SQ(e){return Hn(function(t){return kQ(e,t)})}function CQ(e,t,n,r,s,a,o,l){var u=[],h=0,f=0,p=!1,y=function(){p&&!u.length&&!h&&t.complete()},x=function(b){return h<r?k(b):u.push(b)},k=function(b){h++;var S=!1;Ka(n(b,f++)).subscribe(Ni(t,function(N){t.next(N)},function(){S=!0},void 0,function(){if(S)try{h--;for(var N=function(){var E=u.shift();o||k(E)};u.length&&h<r;)N();y()}catch(E){t.error(E)}}))};return e.subscribe(Ni(t,x,function(){p=!0,y()})),function(){}}function Fw(e,t,n){return n===void 0&&(n=1/0),Zt(t)?Fw(function(r,s){return Hn(function(a,o){return t(r,a,s,o)})(Ka(e(r,s)))},n):(typeof t=="number"&&(n=t),Ai(function(r,s){return CQ(r,s,e,n)}))}function NQ(e){return Fw(Ow,e)}function jQ(){return NQ(1)}function lp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return jQ()(Lw(e,Dw(e)))}var EQ=["addListener","removeListener"],TQ=["addEventListener","removeEventListener"],PQ=["on","off"];function A0(e,t,n,r){if(Zt(n)&&(r=n,n=void 0),r)return A0(e,t,n).pipe(SQ(r));var s=Gl(AQ(e)?TQ.map(function(l){return function(u){return e[l](t,u,n)}}):_Q(e)?EQ.map(qj(e,t)):RQ(e)?PQ.map(qj(e,t)):[],2),a=s[0],o=s[1];if(!a&&Mw(e))return Fw(function(l){return A0(l,t,n)})(Ka(e));if(!a)throw new TypeError("Invalid event target");return new tr(function(l){var u=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return l.next(1<h.length?h:h[0])};return a(u),function(){return o(u)}})}function qj(e,t){return function(n){return function(r){return e[n](t,r)}}}function _Q(e){return Zt(e.addListener)&&Zt(e.removeListener)}function RQ(e){return Zt(e.on)&&Zt(e.off)}function AQ(e){return Zt(e.addEventListener)&&Zt(e.removeEventListener)}function hg(e,t){return Ai(function(n,r){var s=0;n.subscribe(Ni(r,function(a){return e.call(t,a,s++)&&r.next(a)}))})}function IQ(e,t,n,r,s){return function(a,o){var l=n,u=t,h=0;a.subscribe(Ni(o,function(f){var p=h++;u=l?e(u,f,p):(l=!0,f),o.next(u)},s))}}function OQ(e,t){return t===void 0&&(t=Ow),e=e??DQ,Ai(function(n,r){var s,a=!0;n.subscribe(Ni(r,function(o){var l=t(o);(a||!e(s,l))&&(a=!1,s=l,r.next(o))}))})}function DQ(e,t){return e===t}function Hj(e,t){return Ai(IQ(e,t,arguments.length>=2,!0))}function MQ(e){return Ai(function(t,n){var r=!1,s=Ni(n,function(){s?.unsubscribe(),r=!0},cp);Ka(e).subscribe(s),t.subscribe(Ni(n,function(a){return r&&n.next(a)}))})}function Ii(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Dw(e);return Ai(function(r,s){(n?lp(e,r,n):lp(e,r)).subscribe(s)})}function Wj(e){return Ai(function(t,n){Ka(e).subscribe(Ni(n,function(){return n.complete()},cp)),!n.closed&&t.subscribe(n)})}var LQ=Object.defineProperty,FQ=Object.defineProperties,UQ=Object.getOwnPropertyDescriptors,Kj=Object.getOwnPropertySymbols,zQ=Object.prototype.hasOwnProperty,BQ=Object.prototype.propertyIsEnumerable,Gj=(e,t,n)=>t in e?LQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bo=(e,t)=>{for(var n in t||(t={}))zQ.call(t,n)&&Gj(e,n,t[n]);if(Kj)for(var n of Kj(t))BQ.call(t,n)&&Gj(e,n,t[n]);return e},su=(e,t)=>FQ(e,UQ(t)),ji=(e,t,n)=>new Promise((r,s)=>{var a=u=>{try{l(n.next(u))}catch(h){s(h)}},o=u=>{try{l(n.throw(u))}catch(h){s(h)}},l=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,o);l((n=n.apply(e,t)).next())}),WI="lk";function er(e){return typeof e>"u"?!1:$Q(e)||VQ(e)}function $Q(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function VQ(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function Ou(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function cr(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if(Ou(e))return`${e.participant.identity}_${e.source}_placeholder`;if(er(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}function qQ(e,t){return e===void 0||t===void 0?!1:er(e)&&er(t)?e.publication.trackSid===t.publication.trackSid:cr(e)===cr(t)}function KI(e,t){return typeof t>"u"?!1:er(e)?t.some(n=>n.participant.identity===e.participant.identity&&er(n)&&n.publication.trackSid===e.publication.trackSid):Ou(e)?t.some(n=>n.participant.identity===e.participant.identity&&Ou(n)&&n.source===e.source):!1}function HQ(e,t){return Ou(e)&&er(t)&&t.participant.identity===e.participant.identity&&t.source===e.source}function WQ(){const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}function KQ(){return typeof document<"u"}function GQ(e,t,n){return TY(e,t,()=>ji(this,null,function*(){const{x:r,y:s}=yield AY(e,t,{placement:"top",middleware:[PY(6),RY(),_Y({padding:5})]});n?.(r,s)}))}function ZQ(e,t){return!e.contains(t.target)}var JQ=[le.ConnectionStateChanged,le.RoomMetadataChanged,le.ActiveSpeakersChanged,le.ConnectionQualityChanged,le.ParticipantConnected,le.ParticipantDisconnected,le.ParticipantPermissionsChanged,le.ParticipantMetadataChanged,le.ParticipantNameChanged,le.ParticipantAttributesChanged,le.TrackMuted,le.TrackUnmuted,le.TrackPublished,le.TrackUnpublished,le.TrackStreamStateChanged,le.TrackSubscriptionFailed,le.TrackSubscriptionPermissionChanged,le.TrackSubscriptionStatusChanged],YQ=[...JQ,le.LocalTrackPublished,le.LocalTrackUnpublished];ve.TrackPublished,ve.TrackUnpublished,ve.TrackMuted,ve.TrackUnmuted,ve.TrackStreamStateChanged,ve.TrackSubscribed,ve.TrackUnsubscribed,ve.TrackSubscriptionPermissionChanged,ve.TrackSubscriptionFailed,ve.LocalTrackPublished,ve.LocalTrackUnpublished;var QQ=[ve.ConnectionQualityChanged,ve.IsSpeakingChanged,ve.ParticipantMetadataChanged,ve.ParticipantPermissionsChanged,ve.TrackMuted,ve.TrackUnmuted,ve.TrackPublished,ve.TrackUnpublished,ve.TrackStreamStateChanged,ve.TrackSubscriptionFailed,ve.TrackSubscriptionPermissionChanged,ve.TrackSubscriptionStatusChanged];[...QQ,ve.LocalTrackPublished,ve.LocalTrackUnpublished];var vt=MY.getLogger("lk-components-js");vt.setDefaultLevel("WARN");var XQ=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function GI(e,t,n,r){if(e.length<1)throw new Error("At least one grid layout definition must be provided.");const s=eX(e);if(n<=0||r<=0)return s[0];let a=0;const o=n/r>1?"landscape":"portrait";let l=s.find((u,h,f)=>{a=h;const p=f.findIndex((y,x)=>{const k=!y.orientation||y.orientation===o,b=x>h,S=y.maxTiles===u.maxTiles;return b&&S&&k})!==-1;return u.maxTiles>=t&&!p});if(l===void 0)if(l=s[s.length-1],l)vt.warn(`No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${l}).`);else throw new Error("No layout or fallback layout found.");if((n<l.minWidth||r<l.minHeight)&&a>0){const u=s[a-1];l=GI(s.slice(0,a),u.maxTiles,n,r)}return l}function eX(e){return[...e].map(t=>{var n,r;return{name:`${t.columns}x${t.rows}`,columns:t.columns,rows:t.rows,maxTiles:t.columns*t.rows,minWidth:(n=t.minWidth)!=null?n:0,minHeight:(r=t.minHeight)!=null?r:0,orientation:t.orientation}}).sort((t,n)=>t.maxTiles!==n.maxTiles?t.maxTiles-n.maxTiles:t.minWidth!==0||n.minWidth!==0?t.minWidth-n.minWidth:t.minHeight!==0||n.minHeight!==0?t.minHeight-n.minHeight:0)}function tX(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var ZI=[],JI={showChat:!1,unreadMessages:0,showSettings:!1};function YI(e){return typeof e=="object"}function QI(e){return Array.isArray(e)&&e.filter(YI).length>0}function nX(e,t){return t.audioLevel-e.audioLevel}function rX(e,t){return e.isSpeaking===t.isSpeaking?0:e.isSpeaking?-1:1}function sX(e,t){var n,r,s,a;return e.lastSpokeAt!==void 0||t.lastSpokeAt!==void 0?((r=(n=t.lastSpokeAt)==null?void 0:n.getTime())!=null?r:0)-((a=(s=e.lastSpokeAt)==null?void 0:s.getTime())!=null?a:0):0}function I0(e,t){var n,r,s,a;return((r=(n=e.joinedAt)==null?void 0:n.getTime())!=null?r:0)-((a=(s=t.joinedAt)==null?void 0:s.getTime())!=null?a:0)}function iX(e,t){return er(e)?er(t)?0:-1:er(t)?1:0}function aX(e,t){const n=e.participant.isCameraEnabled,r=t.participant.isCameraEnabled;return n!==r?n?-1:1:0}function oX(e){const t=[],n=[],r=[],s=[];e.forEach(l=>{l.participant.isLocal&&l.source===Y.Source.Camera?t.push(l):l.source===Y.Source.ScreenShare?n.push(l):l.source===Y.Source.Camera?r.push(l):s.push(l)});const a=cX(n),o=lX(r);return[...t,...a,...o,...s]}function cX(e){const t=[],n=[];return e.forEach(r=>{r.participant.isLocal?t.push(r):n.push(r)}),t.sort((r,s)=>I0(r.participant,s.participant)),n.sort((r,s)=>I0(r.participant,s.participant)),[...n,...t]}function lX(e){const t=[],n=[];return e.forEach(r=>{r.participant.isLocal?t.push(r):n.push(r)}),n.sort((r,s)=>r.participant.isSpeaking&&s.participant.isSpeaking?nX(r.participant,s.participant):r.participant.isSpeaking!==s.participant.isSpeaking?rX(r.participant,s.participant):r.participant.lastSpokeAt!==s.participant.lastSpokeAt?sX(r.participant,s.participant):er(r)!==er(s)?iX(r,s):r.participant.isCameraEnabled!==s.participant.isCameraEnabled?aX(r,s):I0(r.participant,s.participant)),[...t,...n]}function dX(e,t){return e.reduce((n,r,s)=>s%t===0?[...n,[r]]:[...n.slice(0,-1),[...n.slice(-1)[0],r]],[])}function Zj(e,t){const n=Math.max(e.length,t.length);return new Array(n).fill([]).map((r,s)=>[e[s],t[s]])}function dp(e,t,n){return e.filter(r=>!t.map(s=>n(s)).includes(n(r)))}function O0(e){return e.map(t=>typeof t=="string"||typeof t=="number"?`${t}`:cr(t))}function uX(e,t){return{dropped:dp(e,t,cr),added:dp(t,e,cr)}}function hX(e){return e.added.length!==0||e.dropped.length!==0}function D0(e,t){const n=t.findIndex(r=>cr(r)===cr(e));if(n===-1)throw new Error(`Element not part of the array: ${cr(e)} not in ${O0(t)}`);return n}function fX(e,t,n){const r=D0(e,n),s=D0(t,n);return n.splice(r,1,t),n.splice(s,1,e),n}function mX(e,t){const n=D0(e,t);return t.splice(n,1),t}function pX(e,t){return[...t,e]}function sx(e,t){return dX(e,t)}function gX(e,t,n){let r=vX(e,t);if(r.length<t.length){const o=dp(t,r,cr);r=[...r,...o]}const s=sx(r,n),a=sx(t,n);if(Zj(s,a).forEach(([o,l],u)=>{if(o&&l){const h=sx(r,n)[u],f=uX(h,l);hX(f)&&(vt.debug(`Detected visual changes on page: ${u}, current: ${O0(o)}, next: ${O0(l)}`,{changes:f}),f.added.length===f.dropped.length&&Zj(f.added,f.dropped).forEach(([p,y])=>{if(p&&y)r=fX(p,y,r);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${p}, ${y}`)}),f.added.length===0&&f.dropped.length>0&&f.dropped.forEach(p=>{r=mX(p,r)}),f.added.length>0&&f.dropped.length===0&&f.added.forEach(p=>{r=pX(p,r)}))}}),r.length>t.length){const o=dp(r,t,cr);r=r.filter(l=>!o.map(cr).includes(cr(l)))}return r}function vX(e,t){return e.map(n=>t.find(s=>cr(n)===cr(s)||typeof n!="number"&&Ou(n)&&er(s)&&HQ(n,s))??n)}function ms(e){return`${WI}-${e}`}function yX(e){const t=M0(e),n=XI(e.participant).pipe(Hn(()=>M0(e)),Ii(t));return{className:ms(e.source===Y.Source.Camera||e.source===Y.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function M0(e){if(er(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(s=>s.source===t&&s.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw new Error("At least one of source and name needs to be defined")}}function Uw(e,...t){return new tr(n=>{const r=()=>{n.next(e)};return t.forEach(s=>{e.on(s,r)}),()=>{t.forEach(s=>{e.off(s,r)})}}).pipe(Ii(e))}function fg(e,t){return new tr(n=>{const r=(...s)=>{n.next(s)};return e.on(t,r),()=>{e.off(t,r)}})}function xX(e){return fg(e,le.ConnectionStateChanged).pipe(Hn(([t])=>t),Ii(e.state))}function bX(e,t,n=!0){const r=new tr(a=>{qa.getLocalDevices(e,n).then(o=>{a.next(o),a.complete()}).catch(o=>{t?.(o),a.next([]),a.complete()})}),s=new tr(a=>{var o;const l=()=>ji(this,null,function*(){try{const u=yield qa.getLocalDevices(e,n);a.next(u)}catch(u){t?.(u)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(o=navigator?.mediaDevices)==null||o.addEventListener("devicechange",l)}return()=>{var u;(u=navigator?.mediaDevices)==null||u.removeEventListener("devicechange",l)}});return lp(r,s)}function wX(e){return fg(e,le.DataReceived)}function kX(e){return Uw(e,le.AudioPlaybackStatusChanged).pipe(Hn(t=>({canPlayAudio:t.canPlaybackAudio})))}function SX(e){return Uw(e,le.VideoPlaybackStatusChanged).pipe(Hn(t=>({canPlayVideo:t.canPlaybackVideo})))}function CX(e,t){return fg(e,le.ActiveDeviceChanged).pipe(hg(([n])=>n===t),Hn(([n,r])=>(vt.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)))}function NX(e,t){return fg(e,le.ParticipantEncryptionStatusChanged).pipe(hg(([,n])=>t?.identity===n?.identity||!n&&t?.identity===e.localParticipant.identity),Hn(([n])=>n),Ii(t!=null&&t.isLocal?t.isE2EEEnabled:!!(t!=null&&t.isEncrypted)))}function zw(e,...t){return new tr(n=>{const r=()=>{n.next(e)};return t.forEach(s=>{e.on(s,r)}),()=>{t.forEach(s=>{e.off(s,r)})}}).pipe(Ii(e))}function XI(e){return zw(e,ve.TrackMuted,ve.TrackUnmuted,ve.ParticipantPermissionsChanged,ve.TrackPublished,ve.TrackUnpublished,ve.LocalTrackPublished,ve.LocalTrackUnpublished,ve.MediaDevicesError,ve.TrackSubscriptionStatusChanged).pipe(Hn(t=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:s}=t,a=t.getTrackPublication(Y.Source.Microphone),o=t.getTrackPublication(Y.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:s,cameraTrack:o,microphoneTrack:a,participant:t}}))}function jX(e){return e?zw(e,ve.ParticipantMetadataChanged,ve.ParticipantNameChanged).pipe(Hn(({name:t,identity:n,metadata:r})=>({name:t,identity:n,metadata:r})),Ii({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}function EX(e){return Bw(e,ve.ConnectionQualityChanged).pipe(Hn(([t])=>t),Ii(e.connectionQuality))}function Bw(e,t){return new tr(n=>{const r=(...s)=>{n.next(s)};return e.on(t,r),()=>{e.off(t,r)}})}function eO(e){var t,n,r,s;return zw(e.participant,ve.TrackMuted,ve.TrackUnmuted,ve.TrackSubscribed,ve.TrackUnsubscribed,ve.LocalTrackPublished,ve.LocalTrackUnpublished).pipe(Hn(a=>{var o,l;const u=(o=e.publication)!=null?o:a.getTrackPublication(e.source);return(l=u?.isMuted)!=null?l:!0}),Ii((s=(r=(t=e.publication)==null?void 0:t.isMuted)!=null?r:(n=e.participant.getTrackPublication(e.source))==null?void 0:n.isMuted)!=null?s:!0))}function TX(e){return Bw(e,ve.IsSpeakingChanged).pipe(Hn(([t])=>t))}function PX(e){return Bw(e,ve.ParticipantPermissionsChanged).pipe(Hn(()=>e.permissions),Ii(e.permissions))}function _X(e,t,n,r,s){const{localParticipant:a}=t,o=(f,p)=>{let y=!1;switch(f){case Y.Source.Camera:y=p.isCameraEnabled;break;case Y.Source.Microphone:y=p.isMicrophoneEnabled;break;case Y.Source.ScreenShare:y=p.isScreenShareEnabled;break}return y},l=XI(a).pipe(Hn(f=>o(e,f.participant)),Ii(o(e,a))),u=new Pc,h=(f,p)=>ji(this,null,function*(){try{switch(p??(p=n),u.next(!0),e){case Y.Source.Camera:return yield a.setCameraEnabled(f??!a.isCameraEnabled,p,r),a.isCameraEnabled;case Y.Source.Microphone:return yield a.setMicrophoneEnabled(f??!a.isMicrophoneEnabled,p,r),a.isMicrophoneEnabled;case Y.Source.ScreenShare:return yield a.setScreenShareEnabled(f??!a.isScreenShareEnabled,p,r),a.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(y){if(s&&y instanceof Error){s?.(y);return}else throw y}finally{u.next(!1)}});return{className:ms("button"),toggle:h,enabledObserver:l,pendingObserver:u.asObservable()}}function RX(){let e=!1;const t=new Pc,n=new Pc,r=s=>ji(this,null,function*(){n.next(!0),e=s??!e,t.next(e),n.next(!1)});return{className:ms("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function AX(e,t,n){const r=new II(void 0),s=CX(t,e),a=(o,...l)=>ji(this,[o,...l],function*(u,h={}){var f,p,y;if(t){const x=Dr();if(e==="audiooutput"&&(x?.name==="Safari"||x?.os==="iOS")){vt.warn("Switching audio output device is not supported on Safari and iOS.");return}vt.debug(`Switching active device of kind "${e}" with id ${u}.`),yield t.switchActiveDevice(e,u,h.exact);const k=(f=t.getActiveDevice(e))!=null?f:u;k!==u&&u!=="default"&&vt.info(`We tried to select the device with id (${u}), but the browser decided to select the device with id (${k}) instead.`);let b;e==="audioinput"?b=(p=t.localParticipant.getTrackPublication(Y.Source.Microphone))==null?void 0:p.track:e==="videoinput"&&(b=(y=t.localParticipant.getTrackPublication(Y.Source.Camera))==null?void 0:y.track);const S=u==="default"&&!b||u==="default"&&b?.mediaStreamTrack.label.startsWith("Default");r.next(S?u:k)}});return{className:ms("media-device-select"),activeDeviceObservable:s,setActiveMediaDevice:a}}function IX(e){const t=n=>{e.disconnect(n)};return{className:ms("disconnect-button"),disconnect:t}}function OX(e){const t=ms("connection-quality"),n=EX(e);return{className:t,connectionQualityObserver:n}}function DX(e){let t="track-muted-indicator-camera";switch(e.source){case Y.Source.Camera:t="track-muted-indicator-camera";break;case Y.Source.Microphone:t="track-muted-indicator-microphone";break}const n=ms(t),r=eO(e);return{className:n,mediaMutedObserver:r}}function MX(e){return{className:"lk-participant-name",infoObserver:jX(e)}}function LX(){return{className:ms("participant-tile")}}var FX={CHAT:"lk.chat"},UX={CHAT:"lk-chat-topic"};function tO(e,t){return ji(this,arguments,function*(n,r,s={}){const{reliable:a,destinationIdentities:o,topic:l}=s;yield n.publishData(r,{destinationIdentities:o,topic:l,reliable:a})})}function zX(e,t,n){const r=Array.isArray(t)?t:[t],s=wX(e).pipe(hg(([,,,l])=>t===void 0||l!==void 0&&r.includes(l)),Hn(([l,u,,h])=>({payload:l,topic:h,from:u})));let a;const o=new tr(l=>{a=l});return{messageObservable:s,isSendingObservable:o,send:(l,...u)=>ji(this,[l,...u],function*(h,f={}){a.next(!0);try{yield tO(e.localParticipant,h,bo({topic:r[0]},f))}finally{a.next(!1)}})}}var Lf=new WeakMap;function BX(e){return e.ignoreLegacy==!0}var $X=e=>JSON.parse(new TextDecoder().decode(e)),VX=e=>new TextEncoder().encode(JSON.stringify(e));function qX(e,t){var n,r,s,a,o,l;const u=()=>{var T,I,_;return((T=e.serverInfo)==null?void 0:T.edition)===1||!!((I=e.serverInfo)!=null&&I.version)&&ki((_=e.serverInfo)==null?void 0:_.version,"1.8.2")>0},h=new Pc,f=(n=t?.channelTopic)!=null?n:FX.CHAT,p=(r=t?.channelTopic)!=null?r:UX.CHAT;let y=!1;Lf.has(e)||(y=!0);const x=(s=Lf.get(e))!=null?s:new Map,k=(a=x.get(f))!=null?a:new Pc;x.set(f,k),Lf.set(e,x);const b=(o=t?.messageDecoder)!=null?o:$X;if(y){e.registerTextStreamHandler(f,(I,_)=>ji(this,null,function*(){const{id:A,timestamp:O}=I.info;Lw(I).pipe(Hj((M,q)=>M+q),Hn(M=>({id:A,timestamp:O,message:M,from:e.getParticipantByIdentity(_.identity)}))).subscribe({next:M=>k.next(M)})}));const{messageObservable:T}=zX(e,[p]);T.pipe(Hn(I=>{const _=b(I.payload);return BX(_)?void 0:su(bo({},_),{from:I.from})}),hg(I=>!!I),Wj(h)).subscribe(k)}const S=k.pipe(Hj((T,I)=>{if("id"in I&&T.find(_=>{var A,O;return((A=_.from)==null?void 0:A.identity)===((O=I.from)==null?void 0:O.identity)&&_.id===I.id})){const _=T.findIndex(A=>A.id===I.id);if(_>-1){const A=T[_];T[_]=su(bo({},I),{timestamp:A.timestamp,editTimestamp:I.timestamp})}return[...T]}return[...T,I]},[]),Wj(h)),N=new II(!1),E=(l=t?.messageEncoder)!=null?l:VX,j=(T,I)=>ji(this,null,function*(){I||(I={}),I.topic!=null||(I.topic=f),N.next(!0);try{const _={id:(yield e.localParticipant.sendText(T,I)).id,timestamp:Date.now(),message:T},A=su(bo({},_),{attachedFiles:I.attachments}),O=su(bo({},A),{from:e.localParticipant,attributes:I.attributes});k.next(O);const M=E(su(bo({},_),{ignoreLegacy:u()}));try{yield tO(e.localParticipant,M,{reliable:!0,topic:p})}catch(q){vt.info("could not send message in legacy chat format",q)}return O}finally{N.next(!1)}});function P(){h.next(),h.complete(),k.complete(),Lf.delete(e),e.unregisterTextStreamHandler(f)}return e.once(le.Disconnected,P),{messageObservable:S,isSendingObservable:N,send:j}}function HX(){const e=t=>ji(this,null,function*(){vt.info("Start Audio for room: ",t),yield t.startAudio()});return{className:ms("start-audio-button"),roomAudioPlaybackAllowedObservable:kX,handleStartAudioPlayback:e}}function WX(){const e=t=>ji(this,null,function*(){vt.info("Start Video for room: ",t),yield t.startVideo()});return{className:ms("start-audio-button"),roomVideoPlaybackAllowedObservable:SX,handleStartVideoPlayback:e}}function KX(){return{className:[ms("button"),ms("chat-toggle")].join(" ")}}function GX(){return{className:[ms("button"),ms("focus-toggle-button")].join(" ")}}function ZX(){return{className:"lk-room-container"}}function Jj(e,t,n=!0){const r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],s=[];return r.forEach(a=>{t.forEach(o=>{const l=Array.from(a.trackPublications.values()).filter(u=>u.source===o&&(!n||u.track)).map(u=>({participant:a,publication:u,source:u.source}));s.push(...l)})}),{trackReferences:s,participants:r}}function JX(e,t,n){var r,s;const a=(r=n.additionalRoomEvents)!=null?r:YQ,o=(s=n.onlySubscribed)!=null?s:!0,l=Array.from(new Set([le.ParticipantConnected,le.ParticipantDisconnected,le.ConnectionStateChanged,le.LocalTrackPublished,le.LocalTrackUnpublished,le.TrackPublished,le.TrackUnpublished,le.TrackSubscriptionStatusChanged,...a]).values());return Uw(e,...l).pipe(Hn(u=>{const h=Jj(u,t,o);return vt.debug(`TrackReference[] was updated. (length ${h.trackReferences.length})`,h),h}),Ii(Jj(e,t,o)))}function YX(e,t=1e3){if(e===null)return Vj(!1);const n=A0(e,"mousemove",{passive:!0}).pipe(Hn(()=>!0)),r=n.pipe(xQ({each:t,with:()=>lp(Vj(!1),r.pipe(MQ(n)))}),OQ());return r}function QX(e,t){if(typeof localStorage>"u"){vt.error("Local storage is not available.");return}try{if(t){const n=Object.fromEntries(Object.entries(t).filter(([,r])=>r!==""));localStorage.setItem(e,JSON.stringify(n))}}catch(n){vt.error(`Error setting item to local storage: ${n}`)}}function XX(e){if(typeof localStorage>"u"){vt.error("Local storage is not available.");return}try{const t=localStorage.getItem(e);if(!t){vt.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(t){vt.error(`Error getting item from local storage: ${t}`);return}}function eee(e){return{load:()=>XX(e),save:t=>QX(e,t)}}var tee=`${WI}-user-choices`,iu={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:nee,save:ree}=eee(tee);function see(e,t=!1){t!==!0&&ree(e)}function iee(e,t=!1){var n,r,s,a,o;const l={videoEnabled:(n=e?.videoEnabled)!=null?n:iu.videoEnabled,audioEnabled:(r=e?.audioEnabled)!=null?r:iu.audioEnabled,videoDeviceId:(s=e?.videoDeviceId)!=null?s:iu.videoDeviceId,audioDeviceId:(a=e?.audioDeviceId)!=null?a:iu.audioDeviceId,username:(o=e?.username)!=null?o:iu.username};if(t)return l;{const u=nee();return bo(bo({},l),u??{})}}function nO(e,t){if(t.msg==="show_chat")return{...e,showChat:!0,unreadMessages:0};if(t.msg==="hide_chat")return{...e,showChat:!1};if(t.msg==="toggle_chat"){const n={...e,showChat:!e.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return t.msg==="unread_msg"?{...e,unreadMessages:t.count}:t.msg==="toggle_settings"?{...e,showSettings:!e.showSettings}:{...e}}function rO(e,t){return t.msg==="set_pin"?[t.trackReference]:t.msg==="clear_pin"?[]:{...e}}const mg=g.createContext(void 0);function sO(){const e=g.useContext(mg);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function aee(e){const t=rh();if(e??(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function oee(){const[e,t]=g.useReducer(rO,ZI),[n,r]=g.useReducer(nO,JI);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}function cee(e){const[t,n]=g.useReducer(rO,ZI),[r,s]=g.useReducer(nO,JI);return e??{pin:{dispatch:n,state:t},widget:{dispatch:s,state:r}}}function rh(){return g.useContext(mg)}const $w=g.createContext(void 0);function pg(){return g.useContext($w)}function fd(e){const t=pg(),n=e??t;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const iO=g.createContext(void 0);function aO(){return g.useContext(iO)}function sh(e){const t=aO(),n=pg(),r=e??t??n?.participant;if(!r)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}const Vw=g.createContext(void 0);function gg(){const e=g.useContext(Vw);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function vg(){return g.useContext(Vw)}function ih(e){const t=vg(),n=e??t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const oO=g.createContext(void 0);function lee(e){return g.useContext(oO)}var Yj={};function cO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=cO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function lO(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=cO(e))&&(r&&(r+=" "),r+=t);return r}function dee(...e){return(...t)=>{for(const n of e)if(typeof n=="function")try{n(...t)}catch(r){console.error(r)}}}function pa(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const r=e[n];for(const s in r){const a=t[s],o=r[s];typeof a=="function"&&typeof o=="function"&&s[0]==="o"&&s[1]==="n"&&s.charCodeAt(2)>=65&&s.charCodeAt(2)<=90?t[s]=dee(a,o):(s==="className"||s==="UNSAFE_className")&&typeof a=="string"&&typeof o=="string"?t[s]=lO(a,o):t[s]=o!==void 0?o:a}}return t}function uee(e){return e!==void 0}function Ga(...e){return pa(...e.filter(uee))}function dO(e,t,n){return g.Children.map(e,r=>g.isValidElement(r)&&g.Children.only(e)?(r.props.className&&(t??(t={}),t.className=lO(r.props.className,t.className),t.style={...r.props.style,...t.style}),g.cloneElement(r,{...t,key:n})):r)}function hee(e){var t,n;if(typeof window<"u"&&typeof process<"u"&&(((t=process==null?void 0:Yj)==null?void 0:t.NODE_ENV)==="dev"||((n=process==null?void 0:Yj)==null?void 0:n.NODE_ENV)==="development")){const r=document.querySelector(".lk-room-container");r&&!getComputedStyle(r).getPropertyValue("--lk-has-imported-styles")&&vt.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function fee(e,t){return e==="processor"&&t&&typeof t=="object"&&"name"in t?t.name:e==="e2ee"&&t?"e2ee-enabled":t}const mee={connect:!0,audio:!1,video:!1};function pee(e){const{token:t,serverUrl:n,options:r,room:s,connectOptions:a,connect:o,audio:l,video:u,screen:h,onConnected:f,onDisconnected:p,onError:y,onMediaDeviceFailure:x,onEncryptionError:k,simulateParticipants:b,...S}={...mee,...e};r&&s&&vt.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[N,E]=g.useState(),j=g.useRef(o);g.useEffect(()=>{E(s??new qa(r))},[s,JSON.stringify(r,fee)]);const P=g.useMemo(()=>{const{className:T}=ZX();return pa(S,{className:T})},[S]);return g.useEffect(()=>{if(!N)return;const T=()=>{const M=N.localParticipant;vt.debug("trying to publish local tracks"),Promise.all([M.setMicrophoneEnabled(!!l,typeof l!="boolean"?l:void 0),M.setCameraEnabled(!!u,typeof u!="boolean"?u:void 0),M.setScreenShareEnabled(!!h,typeof h!="boolean"?h:void 0)]).catch(q=>{vt.warn(q),y?.(q)})},I=(M,q)=>{const z=Pu.getFailure(M);x?.(z,q)},_=M=>{k?.(M)},A=M=>{p?.(M)},O=()=>{f?.()};return N.on(le.SignalConnected,T).on(le.MediaDevicesError,I).on(le.EncryptionError,_).on(le.Disconnected,A).on(le.Connected,O),()=>{N.off(le.SignalConnected,T).off(le.MediaDevicesError,I).off(le.EncryptionError,_).off(le.Disconnected,A).off(le.Connected,O)}},[N,l,u,h,y,k,x,f,p]),g.useEffect(()=>{if(N){if(b){N.simulateParticipants({participants:{count:b},publish:{audio:!0,useRealTracks:!0}});return}if(o){if(j.current=!0,vt.debug("connecting"),!t){vt.debug("no token yet");return}if(!n){vt.warn("no livekit url provided"),y?.(Error("no livekit url provided"));return}N.connect(n,t,a).catch(T=>{vt.warn(T),j.current===!0&&y?.(T)})}else vt.debug("disconnecting because connect is false"),j.current=!1,N.disconnect()}},[o,t,JSON.stringify(a),N,y,n,b]),g.useEffect(()=>{if(N)return()=>{vt.info("disconnecting on onmount"),N.disconnect()}},[N]),{room:N,htmlProps:P}}const gee=g.forwardRef(function(e,t){const{room:n,htmlProps:r}=pee(e);return g.createElement("div",{ref:t,...r},n&&g.createElement(Vw.Provider,{value:n},g.createElement(oO.Provider,{value:e.featureFlags},e.children)))}),vee=e=>{const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),t};function yee(e,t){const n=bee(),r=vee(t);return g.useLayoutEffect(()=>{let s=!1;const a=e.current;if(!a)return;function o(l,u){s||r.current(l,u)}return n?.subscribe(a,o),()=>{s=!0,n?.unsubscribe(a,o)}},[e.current,n,r]),n?.observer}function xee(){let e=!1,t=[];const n=new Map;if(typeof window>"u")return;const r=new ResizeObserver((s,a)=>{t=t.concat(s),e||window.requestAnimationFrame(()=>{const o=new Set;for(let l=0;l<t.length;l++){if(o.has(t[l].target))continue;o.add(t[l].target);const u=n.get(t[l].target);u?.forEach(h=>h(t[l],a))}t=[],e=!1}),e=!0});return{observer:r,subscribe(s,a){r.observe(s);const o=n.get(s)??[];o.push(a),n.set(s,o)},unsubscribe(s,a){const o=n.get(s)??[];if(o.length===1){r.unobserve(s),n.delete(s);return}const l=o.indexOf(a);l!==-1&&o.splice(l,1),n.set(s,o)}}}let Qj;const bee=()=>Qj||(Qj=xee()),uO=e=>{const[t,n]=g.useState({width:0,height:0});g.useLayoutEffect(()=>{if(e.current){const{width:s,height:a}=e.current.getBoundingClientRect();n({width:s,height:a})}},[e.current]);const r=g.useCallback(s=>n(s.contentRect),[]);return yee(e,r),t};function ps(e,t,n=!0){const[r,s]=g.useState(t);return g.useEffect(()=>{if(n&&s(t),typeof window>"u"||!e)return;const a=e.subscribe(s);return()=>a.unsubscribe()},[e,n]),r}function wee(e){const t=a=>typeof window<"u"?window.matchMedia(a).matches:!1,[n,r]=g.useState(t(e));function s(){r(t(e))}return g.useEffect(()=>{const a=window.matchMedia(e);return s(),a.addListener?a.addListener(s):a.addEventListener("change",s),()=>{a.removeListener?a.removeListener(s):a.removeEventListener("change",s)}},[e]),n}function kee(e={}){const t=sh(e.participant),{className:n,connectionQualityObserver:r}=g.useMemo(()=>OX(t),[t]),s=ps(r,t.connectionQuality);return{className:n,quality:s}}function qw(e){const t=ih(e),n=g.useMemo(()=>xX(t),[t]);return ps(n,t.state)}function See(e){const t=gg(),n=qw(t);return{buttonProps:g.useMemo(()=>{const{className:r,disconnect:s}=IX(t);return pa(e,{className:r,onClick:()=>s(e.stopTracks??!0),disabled:n===Et.Disconnected})},[t,e,n])}}function Cee(e){if(e.publication instanceof ep){const t=e.publication.track;if(t){const{facingMode:n}=GJ(t);return n}}return"undefined"}function Nee({trackRef:e,props:t}){const n=fd(e),r=rh(),{className:s}=g.useMemo(()=>GX(),[]),a=g.useMemo(()=>KI(n,r?.pin.state),[n,r?.pin.state]);return{mergedProps:g.useMemo(()=>pa(t,{className:s,onClick:o=>{var l,u,h,f,p;(l=t.onClick)==null||l.call(t,o),a?(h=r==null?void 0:(u=r.pin).dispatch)==null||h.call(u,{msg:"clear_pin"}):(p=r==null?void 0:(f=r.pin).dispatch)==null||p.call(f,{msg:"set_pin",trackReference:n})}}),[t,s,n,a,r?.pin]),inFocus:a}}function jee(e,t,n={}){const r=n.gridLayouts??XQ,{width:s,height:a}=uO(e),o=GI(r,t,s,a);return g.useEffect(()=>{e.current&&o&&(e.current.style.setProperty("--lk-col-count",o?.columns.toString()),e.current.style.setProperty("--lk-row-count",o?.rows.toString()))},[e,o]),{layout:o,containerWidth:s,containerHeight:a}}function Xj(e,t={}){var n,r;const s=typeof e=="string"?t.participant:e.participant,a=sh(s),o=typeof e=="string"?{participant:a,source:e}:e,[l,u]=g.useState(!!((n=o.publication)!=null&&n.isMuted||(r=a.getTrackPublication(o.source))!=null&&r.isMuted));return g.useEffect(()=>{const h=eO(o).subscribe(u);return()=>h.unsubscribe()},[cr(o)]),l}function Eee(e){const t=sh(e),n=g.useMemo(()=>TX(t),[t]);return ps(n,t.isSpeaking)}function Tee(){const e=gg(),t=g.useMemo(()=>PX(e.localParticipant),[e]);return ps(t,e.localParticipant.permissions)}function Pee({kind:e,room:t,track:n,requestPermissions:r,onError:s}){const a=vg(),o=g.useMemo(()=>t??a??new qa,[t,a]),l=g.useMemo(()=>bX(e,s,r),[e,r,s]),u=ps(l,[]),[h,f]=g.useState(o?.getActiveDevice(e)??"default"),{className:p,activeDeviceObservable:y,setActiveMediaDevice:x}=g.useMemo(()=>AX(e,o),[e,o,n]);return g.useEffect(()=>{const k=y.subscribe(b=>{b&&(vt.info("setCurrentDeviceId",b),f(b))});return()=>{k?.unsubscribe()}},[y]),{devices:u,className:p,activeDeviceId:h,setActiveMediaDevice:x}}function hO(e,t,n={}){const r=g.useRef([]),s=g.useRef(-1),a=t!==s.current,o=typeof n.customSortFunction=="function"?n.customSortFunction(e):oX(e);let l=[...o];if(a===!1)try{l=gX(r.current,o,t)}catch(u){vt.error("Error while running updatePages(): ",u)}return a?r.current=o:r.current=l,s.current=t,l}function _ee(e,t){const[n,r]=g.useState(1),s=Math.max(Math.ceil(t.length/e),1);n>s&&r(s);const a=n*e,o=a-e,l=f=>{r(p=>f==="next"?p===s?p:p+1:p===1?p:p-1)},u=f=>{f>s?r(s):f<1?r(1):r(f)},h=hO(t,e).slice(o,a);return{totalPageCount:s,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:u,firstItemIndex:o,lastItemIndex:a,tracks:h,currentPage:n}}function Ree({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){const s=fd(e),a=g.useMemo(()=>{const{className:y}=LX();return pa(r,{className:y,onClick:x=>{var k;if((k=r.onClick)==null||k.call(r,x),typeof t=="function"){const b=s.publication??s.participant.getTrackPublication(s.source);t({participant:s.participant,track:b})}}})},[r,t,s.publication,s.source,s.participant]),o=s.participant.getTrackPublication(Y.Source.Microphone),l=g.useMemo(()=>({participant:s.participant,source:Y.Source.Microphone,publication:o}),[o,s.participant]),u=Xj(s),h=Xj(l),f=Eee(s.participant),p=Cee(s);return{elementProps:{"data-lk-audio-muted":h,"data-lk-video-muted":u,"data-lk-speaking":n===!0?!1:f,"data-lk-local-participant":s.participant.isLocal,"data-lk-source":s.source,"data-lk-facing-mode":p,...a}}}function Aee(e){return e=aee(e),g.useMemo(()=>e?.pin.state!==void 0&&e.pin.state.length>=1?e.pin.state:[],[e.pin.state])}function Iee({room:e,props:t}){const n=ih(e),{className:r,roomAudioPlaybackAllowedObservable:s,handleStartAudioPlayback:a}=g.useMemo(()=>HX(),[]),o=g.useMemo(()=>s(n),[n,s]),{canPlayAudio:l}=ps(o,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:g.useMemo(()=>pa(t,{className:r,onClick:()=>{a(n)},style:{display:l?"none":"block"}}),[t,r,l,a,n]),canPlayAudio:l}}function Oee({room:e,props:t}){const n=ih(e),{className:r,roomVideoPlaybackAllowedObservable:s,handleStartVideoPlayback:a}=g.useMemo(()=>WX(),[]),o=g.useMemo(()=>s(n),[n,s]),{canPlayVideo:l}=ps(o,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:g.useMemo(()=>pa(t,{className:r,onClick:()=>{a(n)},style:{display:l?"none":"block"}}),[t,r,l,a,n]),canPlayVideo:l}}function Dee(e,t={}){const n=g.useRef(null),r=g.useRef(null),s=t.minSwipeDistance??50,a=u=>{r.current=null,n.current=u.targetTouches[0].clientX},o=u=>{r.current=u.targetTouches[0].clientX},l=g.useCallback(()=>{if(!n.current||!r.current)return;const u=n.current-r.current,h=u>s,f=u<-s;h&&t.onLeftSwipe&&t.onLeftSwipe(),f&&t.onRightSwipe&&t.onRightSwipe()},[s,t]);g.useEffect(()=>{const u=e.current;return u&&(u.addEventListener("touchstart",a,{passive:!0}),u.addEventListener("touchmove",o,{passive:!0}),u.addEventListener("touchend",l,{passive:!0})),()=>{u&&(u.removeEventListener("touchstart",a),u.removeEventListener("touchmove",o),u.removeEventListener("touchend",l))}},[e,l])}function Mee({props:e}){const{dispatch:t,state:n}=sO().widget,{className:r}=g.useMemo(()=>KX(),[]);return{mergedProps:g.useMemo(()=>pa(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function Lee(e){var t,n;const r=fd(e),{className:s,mediaMutedObserver:a}=g.useMemo(()=>DX(r),[cr(r)]);return{isMuted:ps(a,!!((t=r.publication)!=null&&t.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:s}}function Fee({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:s,onDeviceError:a,...o}){var l;const u=vg(),h=(l=u?.localParticipant)==null?void 0:l.getTrackPublication(e),f=g.useRef(!1),{toggle:p,className:y,pendingObserver:x,enabledObserver:k}=g.useMemo(()=>u?_X(e,u,r,s,a):RX(),[u,e,JSON.stringify(r),s]),b=ps(x,!1),S=ps(k,n??!!(h!=null&&h.isEnabled));g.useEffect(()=>{t?.(S,f.current),f.current=!1},[S,t]),g.useEffect(()=>{n!==void 0&&(vt.debug("forcing initial toggle state",e,n),p(n))},[]);const N=g.useMemo(()=>pa(o,{className:y}),[o,y]),E=g.useCallback(j=>{var P;f.current=!0,p().catch(()=>f.current=!1),(P=o.onClick)==null||P.call(o,j)},[o,p]);return{toggle:p,enabled:S,pending:b,track:h,buttonProps:{...N,"aria-pressed":S,"data-lk-source":e,"data-lk-enabled":S,disabled:b,onClick:E}}}function fO(e=[Y.Source.Camera,Y.Source.Microphone,Y.Source.ScreenShare,Y.Source.ScreenShareAudio,Y.Source.Unknown],t={}){const n=ih(t.room),[r,s]=g.useState([]),[a,o]=g.useState([]),l=g.useMemo(()=>e.map(u=>YI(u)?u.source:u),[JSON.stringify(e)]);return g.useEffect(()=>{const u=JX(n,l,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:h,participants:f})=>{vt.debug("setting track bundles",h,f),s(h),o(f)});return()=>u.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),g.useMemo(()=>{if(QI(e)){const u=zee(e,a),h=Array.from(r);return a.forEach(f=>{u.has(f.identity)&&(u.get(f.identity)??[]).forEach(p=>{if(r.find(({participant:x,publication:k})=>f.identity===x.identity&&k.source===p))return;vt.debug(`Add ${p} placeholder for participant ${f.identity}.`);const y={participant:f,source:p};h.push(y)})}),h}else return r},[r,a,e])}function Uee(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function zee(e,t){const n=new Map;if(QI(e)){const r=e.filter(s=>s.withPlaceholder).map(s=>s.source);t.forEach(s=>{const a=s.getTrackPublications().map(l=>{var u;return(u=l.track)==null?void 0:u.source}).filter(l=>l!==void 0),o=Array.from(Uee(new Set(r),new Set(a)));o.length>0&&n.set(s.identity,o)})}return n}function Bee(e){const t=gg(),n=qw(t),r=g.useMemo(()=>n===Et.Disconnected,[n]),s=g.useMemo(()=>qX(t,e),[t,e,r]),a=ps(s.isSendingObservable,!1),o=ps(s.messageObservable,[]);return{send:s.send,chatMessages:o,isSending:a}}function $ee(e={}){const[t,n]=g.useState(iee(e.defaults,e.preventLoad??!1)),r=g.useCallback(u=>{n(h=>({...h,audioEnabled:u}))},[]),s=g.useCallback(u=>{n(h=>({...h,videoEnabled:u}))},[]),a=g.useCallback(u=>{n(h=>({...h,audioDeviceId:u}))},[]),o=g.useCallback(u=>{n(h=>({...h,videoDeviceId:u}))},[]),l=g.useCallback(u=>{n(h=>({...h,username:u}))},[]);return g.useEffect(()=>{see(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:s,saveAudioInputDeviceId:a,saveVideoInputDeviceId:o,saveUsername:l}}function Vee(e,t={}){const n=sh(e),r=ih(t.room),s=g.useMemo(()=>NX(r,n),[r,n]);return ps(s,n.isLocal?n.isE2EEEnabled:!!(n!=null&&n.isEncrypted))}const mO=g.forwardRef(function(e,t){const{mergedProps:n}=Mee({props:e});return g.createElement("button",{ref:t,...n},e.children)}),qee=g.forwardRef(function(e,t){const{buttonProps:n}=See(e);return g.createElement("button",{ref:t,...n},e.children)}),Hee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),g.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),Wee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),Kee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},g.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),Gee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),eE=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),Zee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),Jee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),Yee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),Qee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),Xee=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),g.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),ete=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),g.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),tte=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),nte=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),rte=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),ste=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},g.createElement("g",{opacity:.25},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),pO=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),ite=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},g.createElement("g",{fill:"currentColor"},g.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),g.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),tE=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),ate=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),ote=g.forwardRef(function({trackRef:e,...t},n){const r=pg(),{mergedProps:s,inFocus:a}=Nee({trackRef:e??r,props:t});return g.createElement(mg.Consumer,null,o=>o!==void 0&&g.createElement("button",{ref:n,...s},t.children?t.children:a?g.createElement(ate,null):g.createElement(Zee,null)))}),ix=g.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:s,exactMatch:a,track:o,requestPermissions:l,onError:u,...h},f){const p=vg(),y=g.useRef("default"),x=g.useCallback(I=>{p&&p.emit(le.MediaDevicesError,I),u?.(I)},[p,u]),{devices:k,activeDeviceId:b,setActiveMediaDevice:S,className:N}=Pee({kind:e,room:p,track:o,requestPermissions:l,onError:x});g.useEffect(()=>{t!==void 0&&S(t)},[S]),g.useEffect(()=>{typeof r=="function"&&r(k)},[r,k]),g.useEffect(()=>{b!==y.current&&n?.(b),y.current=b},[b]);const E=async I=>{try{await S(I,{exact:a??!0})}catch(_){if(_ instanceof Error)s?.(_);else throw _}},j=g.useMemo(()=>Ga(h,{className:N},{className:"lk-list"}),[N,h]),P=!!k.find(I=>I.label.toLowerCase().startsWith("default"));function T(I,_,A){return I===_||!P&&A===0&&_==="default"}return g.createElement("ul",{ref:f,...j},k.map((I,_)=>g.createElement("li",{key:I.deviceId,id:I.deviceId,"data-lk-active":T(I.deviceId,b,_),"aria-selected":T(I.deviceId,b,_),role:"option"},g.createElement("button",{className:"lk-button",onClick:()=>E(I.deviceId)},I.label))))}),cte=g.forwardRef(function({label:e,...t},n){const r=gg(),{mergedProps:s,canPlayAudio:a}=Iee({room:r,props:t}),{mergedProps:o,canPlayVideo:l}=Oee({room:r,props:s}),{style:u,...h}=o;return u.display=a&&l?"none":"block",g.createElement("button",{ref:n,style:u,...h},e??`Start ${a?"Video":"Audio"}`)});function gO(e,t){switch(e){case Y.Source.Microphone:return t?g.createElement(ete,null):g.createElement(Xee,null);case Y.Source.Camera:return t?g.createElement(Wee,null):g.createElement(Hee,null);case Y.Source.ScreenShare:return t?g.createElement(ite,null):g.createElement(pO,null);default:return}}function lte(e){switch(e){case mi.Excellent:return g.createElement(tte,null);case mi.Good:return g.createElement(nte,null);case mi.Poor:return g.createElement(rte,null);default:return g.createElement(ste,null)}}const ax=g.forwardRef(function({showIcon:e,...t},n){const{buttonProps:r,enabled:s}=Fee(t),[a,o]=g.useState(!1);return g.useEffect(()=>{o(!0)},[]),a&&g.createElement("button",{ref:n,...r},(e??!0)&&gO(t.source,s),t.children)}),dte=g.forwardRef(function(e,t){const{className:n,quality:r}=kee(e),s=g.useMemo(()=>({...Ga(e,{className:n}),"data-lk-quality":r}),[r,e,n]);return g.createElement("div",{ref:t,...s},e.children??lte(r))}),nE=g.forwardRef(function({participant:e,...t},n){const r=sh(e),{className:s,infoObserver:a}=g.useMemo(()=>MX(r),[r]),{identity:o,name:l}=ps(a,{name:r.name,identity:r.identity,metadata:r.metadata}),u=g.useMemo(()=>Ga(t,{className:s,"data-lk-participant-name":l}),[t,s,l]);return g.createElement("span",{ref:n,...u},l!==""?l:o,t.children)}),ute=g.forwardRef(function({trackRef:e,show:t="always",...n},r){const{className:s,isMuted:a}=Lee(e),o=t==="always"||t==="muted"&&a||t==="unmuted"&&!a,l=g.useMemo(()=>Ga(n,{className:s}),[s,n]);return o?g.createElement("div",{ref:r,...l,"data-lk-muted":a},n.children??gO(e.source,!a)):null}),hte=e=>g.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),g.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function vO(e,t={}){const[n,r]=g.useState(M0(e)),[s,a]=g.useState(n?.isMuted),[o,l]=g.useState(n?.isSubscribed),[u,h]=g.useState(n?.track),[f,p]=g.useState("landscape"),y=g.useRef(),{className:x,trackObserver:k}=g.useMemo(()=>yX(e),[e.participant.sid??e.participant.identity,e.source,er(e)&&e.publication.trackSid]);return g.useEffect(()=>{const b=k.subscribe(S=>{vt.debug("update track",S),r(S),a(S?.isMuted),l(S?.isSubscribed),h(S?.track)});return()=>b?.unsubscribe()},[k]),g.useEffect(()=>{var b,S;return u&&(y.current&&u.detach(y.current),(b=t.element)!=null&&b.current&&!(e.participant.isLocal&&u?.kind==="audio")&&u.attach(t.element.current)),y.current=(S=t.element)==null?void 0:S.current,()=>{y.current&&u?.detach(y.current)}},[u,t.element]),g.useEffect(()=>{var b,S;if(typeof((b=n?.dimensions)==null?void 0:b.width)=="number"&&typeof((S=n?.dimensions)==null?void 0:S.height)=="number"){const N=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(N)}},[n]),{publication:n,isMuted:s,isSubscribed:o,track:u,elementProps:Ga(t.props,{className:x,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":f}})}}var ox,rE;function fte(){if(rE)return ox;rE=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,u=typeof Df=="object"&&Df&&Df.Object===Object&&Df,h=typeof self=="object"&&self&&self.Object===Object&&self,f=u||h||Function("return this")(),p=Object.prototype,y=p.toString,x=Math.max,k=Math.min,b=function(){return f.Date.now()};function S(T,I,_){var A,O,M,q,z,G,oe=0,ke=!1,J=!1,ge=!0;if(typeof T!="function")throw new TypeError(e);I=P(I)||0,N(_)&&(ke=!!_.leading,J="maxWait"in _,M=J?x(P(_.maxWait)||0,I):M,ge="trailing"in _?!!_.trailing:ge);function U(K){var ce=A,De=O;return A=O=void 0,oe=K,q=T.apply(De,ce),q}function ie(K){return oe=K,z=setTimeout(te,I),ke?U(K):q}function fe(K){var ce=K-G,De=K-oe,Fe=I-ce;return J?k(Fe,M-De):Fe}function B(K){var ce=K-G,De=K-oe;return G===void 0||ce>=I||ce<0||J&&De>=M}function te(){var K=b();if(B(K))return ee(K);z=setTimeout(te,fe(K))}function ee(K){return z=void 0,ge&&A?U(K):(A=O=void 0,q)}function ye(){z!==void 0&&clearTimeout(z),oe=0,A=G=O=z=void 0}function Te(){return z===void 0?q:ee(b())}function ne(){var K=b(),ce=B(K);if(A=arguments,O=this,G=K,ce){if(z===void 0)return ie(G);if(J)return z=setTimeout(te,I),U(G)}return z===void 0&&(z=setTimeout(te,I)),q}return ne.cancel=ye,ne.flush=Te,ne}function N(T){var I=typeof T;return!!T&&(I=="object"||I=="function")}function E(T){return!!T&&typeof T=="object"}function j(T){return typeof T=="symbol"||E(T)&&y.call(T)==n}function P(T){if(typeof T=="number")return T;if(j(T))return t;if(N(T)){var I=typeof T.valueOf=="function"?T.valueOf():T;T=N(I)?I+"":I}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var _=a.test(T);return _||o.test(T)?l(T.slice(2),_?2:8):s.test(T)?t:+T}return ox=S,ox}var mte=fte();const sE=TI(mte);function pte(e){const t=g.useRef(e);t.current=e,g.useEffect(()=>()=>{t.current()},[])}function gte(e,t=500,n){const r=g.useRef();pte(()=>{r.current&&r.current.cancel()});const s=g.useMemo(()=>{const a=sE(e,t,n),o=(...l)=>a(...l);return o.cancel=()=>{a.cancel()},o.isPending=()=>!!r.current,o.flush=()=>a.flush(),o},[e,t,n]);return g.useEffect(()=>{r.current=sE(e,t,n)},[e,t,n]),s}function vte(e,t,n){const r=((h,f)=>h===f),s=e instanceof Function?e():e,[a,o]=g.useState(s),l=g.useRef(s),u=gte(o,t,n);return r(l.current,s)||(u(s),l.current=s),[a,u]}function yte({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var o;const[l,u]=g.useState(null),[h,f]=g.useState(()=>({isIntersecting:s,entry:void 0})),p=g.useRef();p.current=a;const y=((o=h.entry)==null?void 0:o.isIntersecting)&&r;g.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||y)return;const b=new IntersectionObserver(S=>{const N=Array.isArray(b.thresholds)?b.thresholds:[b.thresholds];S.forEach(E=>{const j=E.isIntersecting&&N.some(P=>E.intersectionRatio>=P);f({isIntersecting:j,entry:E}),p.current&&p.current(j,E)})},{threshold:e,root:t,rootMargin:n});return b.observe(l),()=>{b.disconnect()}},[l,JSON.stringify(e),t,n,y,r]);const x=g.useRef(null);g.useEffect(()=>{var b;!l&&(b=h.entry)!=null&&b.target&&!r&&!y&&x.current!==h.entry.target&&(x.current=h.entry.target,f({isIntersecting:s,entry:void 0}))},[l,h.entry,r,y,s]);const k=[u,!!h.isIntersecting,h.entry];return k.ref=k[0],k.isIntersecting=k[1],k.entry=k[2],k}const xte=g.forwardRef(function({onTrackClick:e,onClick:t,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:s,...a},o){const l=fd(r),u=g.useRef(null);g.useImperativeHandle(o,()=>u.current);const h=yte({root:u.current}),[f]=vte(h,3e3);g.useEffect(()=>{s&&l.publication instanceof tp&&f?.isIntersecting===!1&&h?.isIntersecting===!1&&l.publication.setSubscribed(!1)},[f,l,s]),g.useEffect(()=>{s&&l.publication instanceof tp&&h?.isIntersecting===!0&&l.publication.setSubscribed(!0)},[h,l,s]);const{elementProps:p,publication:y,isSubscribed:x}=vO(l,{element:u,props:a});g.useEffect(()=>{n?.(!!x)},[x,n]);const k=b=>{t?.(b),e?.({participant:l?.participant,track:y})};return g.createElement("video",{ref:u,...p,muted:!0,onClick:k})}),yO=g.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...r},s){const a=fd(e),o=g.useRef(null);g.useImperativeHandle(s,()=>o.current);const{elementProps:l,isSubscribed:u,track:h,publication:f}=vO(a,{element:o,props:r});return g.useEffect(()=>{t?.(!!u)},[u,t]),g.useEffect(()=>{h===void 0||n===void 0||(h instanceof fI?h.setVolume(n):vt.warn("Volume can only be set on remote audio tracks."))},[n,h]),g.useEffect(()=>{f===void 0||r.muted===void 0||(f instanceof tp?f.setEnabled(!r.muted):vt.warn("Can only call setEnabled on remote track publications."))},[r.muted,f,h]),g.createElement("audio",{ref:o,...l})});function bte(e){const t=!!aO();return e.participant&&!t?g.createElement(iO.Provider,{value:e.participant},e.children):g.createElement(g.Fragment,null,e.children)}function wte(e){const t=!!pg();return e.trackRef&&!t?g.createElement($w.Provider,{value:e.trackRef},e.children):g.createElement(g.Fragment,null,e.children)}const L0=g.forwardRef(function({trackRef:e,children:t,onParticipantClick:n,disableSpeakingIndicator:r,...s},a){var o,l;const u=fd(e),{elementProps:h}=Ree({htmlProps:s,disableSpeakingIndicator:r,onParticipantClick:n,trackRef:u}),f=Vee(u.participant),p=rh(),y=(o=lee())==null?void 0:o.autoSubscription,x=g.useCallback(k=>{u.source&&!k&&p&&p.pin.dispatch&&KI(u,p.pin.state)&&p.pin.dispatch({msg:"clear_pin"})},[u,p]);return g.createElement("div",{ref:a,style:{position:"relative"},...h},g.createElement(wte,{trackRef:u},g.createElement(bte,{participant:u.participant},t??g.createElement(g.Fragment,null,er(u)&&(((l=u.publication)==null?void 0:l.kind)==="video"||u.source===Y.Source.Camera||u.source===Y.Source.ScreenShare)?g.createElement(xte,{trackRef:u,onSubscriptionStatusChanged:x,manageSubscription:y}):er(u)&&g.createElement(yO,{trackRef:u,onSubscriptionStatusChanged:x}),g.createElement("div",{className:"lk-participant-placeholder"},g.createElement(hte,null)),g.createElement("div",{className:"lk-participant-metadata"},g.createElement("div",{className:"lk-participant-metadata-item"},u.source===Y.Source.Camera?g.createElement(g.Fragment,null,f&&g.createElement(Qee,{style:{marginRight:"0.25rem"}}),g.createElement(ute,{trackRef:{participant:u.participant,source:Y.Source.Microphone},show:"muted"}),g.createElement(nE,null)):g.createElement(g.Fragment,null,g.createElement(pO,{style:{marginRight:"0.25rem"}}),g.createElement(nE,null,"'s screen"))),g.createElement(dte,{className:"lk-participant-metadata-item"}))),g.createElement(ote,{trackRef:u}))))});function kte(e){const t=Ga(e,{className:"lk-focus-layout"});return g.createElement("div",{...t},e.children)}function Ste({trackRef:e,...t}){return g.createElement(L0,{trackRef:e,...t})}function xO({tracks:e,...t}){return g.createElement(g.Fragment,null,e.map(n=>g.createElement($w.Provider,{value:n,key:cr(n)},dO(t.children))))}function Cte({totalPageCount:e,nextPage:t,prevPage:n,currentPage:r,pagesContainer:s}){const[a,o]=g.useState(!1);return g.useEffect(()=>{let l;return s&&(l=YX(s.current,2e3).subscribe(o)),()=>{l&&l.unsubscribe()}},[s]),g.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":a},g.createElement("button",{className:"lk-button",onClick:n},g.createElement(eE,null)),g.createElement("span",{className:"lk-pagination-count"},`${r} of ${e}`),g.createElement("button",{className:"lk-button",onClick:t},g.createElement(eE,null)))}const Nte=g.forwardRef(function({totalPageCount:e,currentPage:t},n){const r=new Array(e).fill("").map((s,a)=>a+1===t?g.createElement("span",{"data-lk-active":!0,key:a}):g.createElement("span",{key:a}));return g.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function jte({tracks:e,...t}){const n=g.createRef(),r=g.useMemo(()=>Ga(t,{className:"lk-grid-layout"}),[t]),{layout:s}=jee(n,e.length),a=_ee(s.maxTiles,e);return Dee(n,{onLeftSwipe:a.nextPage,onRightSwipe:a.prevPage}),g.createElement("div",{ref:n,"data-lk-pagination":a.totalPageCount>1,...r},g.createElement(xO,{tracks:a.tracks},t.children),e.length>s.maxTiles&&g.createElement(g.Fragment,null,g.createElement(Nte,{totalPageCount:a.totalPageCount,currentPage:a.currentPage}),g.createElement(Cte,{pagesContainer:n,...a})))}const Ete=130,Tte=140,Pte=1,bO=16/10,_te=(1-bO)*-1;function Rte({tracks:e,orientation:t,...n}){const r=g.useRef(null),[s,a]=g.useState(0),{width:o,height:l}=uO(r),u=t||(l>=o?"vertical":"horizontal"),h=u==="vertical"?Math.max(o*_te,Ete):Math.max(l*bO,Tte),f=WQ(),p=Math.max(u==="vertical"?(l-f)/h:(o-f)/h,Pte);let y=Math.round(p);Math.abs(p-s)<.5?y=Math.round(s):s!==p&&a(p);const x=hO(e,y);return g.useLayoutEffect(()=>{r.current&&(r.current.dataset.lkOrientation=u,r.current.style.setProperty("--lk-max-visible-tiles",y.toString()))},[y,u]),g.createElement("aside",{key:u,className:"lk-carousel",ref:r,...n},g.createElement(xO,{tracks:x},n.children))}function Ate({value:e,onPinChange:t,onWidgetChange:n,children:r}){const s=cee(e);return g.useEffect(()=>{vt.debug("PinState Updated",{state:s.pin.state}),t&&s.pin.state&&t(s.pin.state)},[s.pin.state,t]),g.useEffect(()=>{vt.debug("Widget Updated",{widgetState:s.widget.state}),n&&s.widget.state&&n(s.widget.state)},[n,s.widget.state]),g.createElement(mg.Provider,{value:s},r)}function wO({volume:e,muted:t}){const n=fO([Y.Source.Microphone,Y.Source.ScreenShareAudio,Y.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(r=>!r.participant.isLocal&&r.publication.kind===Y.Kind.Audio);return g.createElement("div",{style:{display:"none"}},n.map(r=>g.createElement(yO,{key:cr(r),trackRef:r,volume:e,muted:t})))}function Ite(e){const t=g.useMemo(()=>Ga(e,{className:"lk-toast"}),[e]);return g.createElement("div",{...t},e.children)}function Ote(e){const[t,n]=g.useState(void 0),r=qw(e.room);return g.useEffect(()=>{switch(r){case Et.Reconnecting:n(g.createElement(g.Fragment,null,g.createElement(tE,{className:"lk-spinner"})," Reconnecting"));break;case Et.Connecting:n(g.createElement(g.Fragment,null,g.createElement(tE,{className:"lk-spinner"})," Connecting"));break;case Et.Disconnected:n(g.createElement(g.Fragment,null,"Disconnected"));break;default:n(void 0);break}},[r]),t?g.createElement(Ite,{className:"lk-toast-connection-state"},t):g.createElement(g.Fragment,null)}const Dte=g.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:r,...s},a){var o,l,u,h;const f=g.useMemo(()=>r?r(e.message):e.message,[e.message,r]),p=!!e.editTimestamp,y=new Date(e.timestamp),x=typeof navigator<"u"?navigator.language:"en-US",k=((o=e.from)==null?void 0:o.name)??((l=e.from)==null?void 0:l.identity);return g.createElement("li",{ref:a,className:"lk-chat-entry",title:y.toLocaleTimeString(x,{timeStyle:"full"}),"data-lk-message-origin":(u=e.from)!=null&&u.isLocal?"local":"remote",...s},(!n||!t||p)&&g.createElement("span",{className:"lk-meta-data"},!t&&g.createElement("strong",{className:"lk-participant-name"},k),(!n||p)&&g.createElement("span",{className:"lk-timestamp"},p&&"edited ",y.toLocaleTimeString(x,{timeStyle:"short"}))),g.createElement("span",{className:"lk-message-body"},f),g.createElement("span",{className:"lk-message-attachements"},(h=e.attachedFiles)==null?void 0:h.map(b=>b.type.startsWith("image/")&&g.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:b.name,src:URL.createObjectURL(b),alt:b.name}))))});function Mte({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:r,...s}){const a=g.useRef(null),o=g.useRef(null),l=g.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:r}),[t,n,r]),{chatMessages:u,send:h,isSending:f}=Bee(l),p=rh(),y=g.useRef(0);async function x(k){k.preventDefault(),o.current&&o.current.value.trim()!==""&&(await h(o.current.value),o.current.value="",o.current.focus())}return g.useEffect(()=>{var k;a&&((k=a.current)==null||k.scrollTo({top:a.current.scrollHeight}))},[a,u]),g.useEffect(()=>{var k,b,S,N,E;if(!p||u.length===0)return;if((k=p.widget.state)!=null&&k.showChat&&u.length>0&&y.current!==((b=u[u.length-1])==null?void 0:b.timestamp)){y.current=(S=u[u.length-1])==null?void 0:S.timestamp;return}const j=u.filter(T=>!y.current||T.timestamp>y.current).length,{widget:P}=p;j>0&&((N=P.state)==null?void 0:N.unreadMessages)!==j&&((E=P.dispatch)==null||E.call(P,{msg:"unread_msg",count:j}))},[u,p?.widget]),g.createElement("div",{...s,className:"lk-chat"},g.createElement("div",{className:"lk-chat-header"},"Messages",p&&g.createElement(mO,{className:"lk-close-button"},g.createElement(Kee,null))),g.createElement("ul",{className:"lk-list lk-chat-messages",ref:a},s.children?u.map((k,b)=>dO(s.children,{entry:k,key:k.id??b,messageFormatter:e})):u.map((k,b,S)=>{const N=b>=1&&S[b-1].from===k.from,E=b>=1&&k.timestamp-S[b-1].timestamp<6e4;return g.createElement(Dte,{key:k.id??b,hideName:N,hideTimestamp:N===!1?!1:E,entry:k,messageFormatter:e})})),g.createElement("form",{className:"lk-chat-form",onSubmit:x},g.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:f,ref:o,type:"text",placeholder:"Enter a message...",onInput:k=>k.stopPropagation(),onKeyDown:k=>k.stopPropagation(),onKeyUp:k=>k.stopPropagation()}),g.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:f},"Send")))}function iE({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:r,requestPermissions:s=!1,...a}){const[o,l]=g.useState(!1),[u,h]=g.useState([]),[f,p]=g.useState(!0),[y,x]=g.useState(s),k=(E,j)=>{vt.debug("handle device change"),l(!1),n?.(E,j)},b=g.useRef(null),S=g.useRef(null);g.useLayoutEffect(()=>{o&&x(!0)},[o]),g.useLayoutEffect(()=>{let E;return b.current&&S.current&&(u||f)&&(E=GQ(b.current,S.current,(j,P)=>{S.current&&Object.assign(S.current.style,{left:`${j}px`,top:`${P}px`})})),p(!1),()=>{E?.()}},[b,S,u,f]);const N=g.useCallback(E=>{S.current&&E.target!==b.current&&o&&ZQ(S.current,E)&&l(!1)},[o,S,b]);return g.useEffect(()=>(document.addEventListener("click",N),()=>{document.removeEventListener("click",N)}),[N]),g.createElement(g.Fragment,null,g.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":o,...a,onClick:()=>l(!o),ref:b},a.children),!a.disabled&&g.createElement("div",{className:"lk-device-menu",ref:S,style:{visibility:o?"visible":"hidden"}},e?g.createElement(ix,{initialSelection:t,onActiveDeviceChange:E=>k(e,E),onDeviceListChange:h,kind:e,track:r?.[e],requestPermissions:y}):g.createElement(g.Fragment,null,g.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),g.createElement(ix,{kind:"audioinput",onActiveDeviceChange:E=>k("audioinput",E),onDeviceListChange:h,track:r?.audioinput,requestPermissions:y}),g.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),g.createElement(ix,{kind:"videoinput",onActiveDeviceChange:E=>k("videoinput",E),onDeviceListChange:h,track:r?.videoinput,requestPermissions:y}))))}function Lte(){g.useEffect(()=>{hee()},[])}function Fte({props:e}){const{dispatch:t,state:n}=sO().widget,r="lk-button lk-settings-toggle";return{mergedProps:g.useMemo(()=>pa(e,{className:r,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[e,r,t,n])}}const Ute=g.forwardRef(function(e,t){const{mergedProps:n}=Fte({props:e});return g.createElement("button",{ref:t,...n},e.children)}),zte=e=>{switch(e){case Y.Source.Camera:return 1;case Y.Source.Microphone:return 2;case Y.Source.ScreenShare:return 3;default:return 0}};function Bte({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:r,...s}){var a;const[o,l]=g.useState(!1),u=rh();g.useEffect(()=>{var O,M;((O=u?.widget.state)==null?void 0:O.showChat)!==void 0&&l((M=u?.widget.state)==null?void 0:M.showChat)},[(a=u?.widget.state)==null?void 0:a.showChat]);const h=wee(`(max-width: ${o?1e3:760}px)`)?"minimal":"verbose";e??(e=h);const f={leave:!0,...t},p=Tee();if(!p)f.camera=!1,f.chat=!1,f.microphone=!1,f.screenShare=!1;else{const O=M=>p.canPublish&&(p.canPublishSources.length===0||p.canPublishSources.includes(zte(M)));f.camera??(f.camera=O(Y.Source.Camera)),f.microphone??(f.microphone=O(Y.Source.Microphone)),f.screenShare??(f.screenShare=O(Y.Source.ScreenShare)),f.chat??(f.chat=p.canPublishData&&t?.chat)}const y=g.useMemo(()=>e==="minimal"||e==="verbose",[e]),x=g.useMemo(()=>e==="textOnly"||e==="verbose",[e]),k=tX(),[b,S]=g.useState(!1),N=g.useCallback(O=>{S(O)},[S]),E=Ga({className:"lk-control-bar"},s),{saveAudioInputEnabled:j,saveVideoInputEnabled:P,saveAudioInputDeviceId:T,saveVideoInputDeviceId:I}=$ee({preventSave:!n}),_=g.useCallback((O,M)=>M?j(O):null,[j]),A=g.useCallback((O,M)=>M?P(O):null,[P]);return g.createElement("div",{...E},f.microphone&&g.createElement("div",{className:"lk-button-group"},g.createElement(ax,{source:Y.Source.Microphone,showIcon:y,onChange:_,onDeviceError:O=>r?.({source:Y.Source.Microphone,error:O})},x&&"Microphone"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(iE,{kind:"audioinput",onActiveDeviceChange:(O,M)=>T(M??"default")}))),f.camera&&g.createElement("div",{className:"lk-button-group"},g.createElement(ax,{source:Y.Source.Camera,showIcon:y,onChange:A,onDeviceError:O=>r?.({source:Y.Source.Camera,error:O})},x&&"Camera"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(iE,{kind:"videoinput",onActiveDeviceChange:(O,M)=>I(M??"default")}))),f.screenShare&&k&&g.createElement(ax,{source:Y.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:y,onChange:N,onDeviceError:O=>r?.({source:Y.Source.ScreenShare,error:O})},x&&(b?"Stop screen share":"Share screen")),f.chat&&g.createElement(mO,null,y&&g.createElement(Gee,null),x&&"Chat"),f.settings&&g.createElement(Ute,null,y&&g.createElement(Jee,null),x&&"Settings"),f.leave&&g.createElement(qee,null,y&&g.createElement(Yee,null),x&&"Leave"),g.createElement(cte,null))}function $te({chatMessageFormatter:e,chatMessageDecoder:t,chatMessageEncoder:n,SettingsComponent:r,...s}){var a,o;const[l,u]=g.useState({showChat:!1,unreadMessages:0,showSettings:!1}),h=g.useRef(null),f=fO([{source:Y.Source.Camera,withPlaceholder:!0},{source:Y.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[le.ActiveSpeakersChanged],onlySubscribed:!1}),p=S=>{vt.debug("updating widget state",S),u(S)},y=oee(),x=f.filter(er).filter(S=>S.publication.source===Y.Source.ScreenShare),k=(a=Aee(y))==null?void 0:a[0],b=f.filter(S=>!qQ(S,k));return g.useEffect(()=>{var S,N,E,j,P,T;if(x.some(I=>I.publication.isSubscribed)&&h.current===null?(vt.debug("Auto set screen share focus:",{newScreenShareTrack:x[0]}),(N=(S=y.pin).dispatch)==null||N.call(S,{msg:"set_pin",trackReference:x[0]}),h.current=x[0]):h.current&&!x.some(I=>{var _,A;return I.publication.trackSid===((A=(_=h.current)==null?void 0:_.publication)==null?void 0:A.trackSid)})&&(vt.debug("Auto clearing screen share focus."),(j=(E=y.pin).dispatch)==null||j.call(E,{msg:"clear_pin"}),h.current=null),k&&!er(k)){const I=f.find(_=>_.participant.identity===k.participant.identity&&_.source===k.source);I!==k&&er(I)&&((T=(P=y.pin).dispatch)==null||T.call(P,{msg:"set_pin",trackReference:I}))}},[x.map(S=>`${S.publication.trackSid}_${S.publication.isSubscribed}`).join(),(o=k?.publication)==null?void 0:o.trackSid,f]),Lte(),g.createElement("div",{className:"lk-video-conference",...s},KQ()&&g.createElement(Ate,{value:y,onWidgetChange:p},g.createElement("div",{className:"lk-video-conference-inner"},k?g.createElement("div",{className:"lk-focus-layout-wrapper"},g.createElement(kte,null,g.createElement(Rte,{tracks:b},g.createElement(L0,null)),k&&g.createElement(Ste,{trackRef:k}))):g.createElement("div",{className:"lk-grid-layout-wrapper"},g.createElement(jte,{tracks:f},g.createElement(L0,null))),g.createElement(Bte,{controls:{chat:!0,settings:!!r}})),g.createElement(Mte,{style:{display:l.showChat?"grid":"none"},messageFormatter:e,messageEncoder:n,messageDecoder:t}),r&&g.createElement("div",{className:"lk-settings-menu-modal",style:{display:l.showSettings?"block":"none"}},g.createElement(r,null))),g.createElement(wO,null),g.createElement(Ote,null))}const Vte=e=>`/appointments/${e}/video`,qte=e=>`/appointments/${e}/video/token`;async function Hte(e){try{const{data:t}=await Ue.post(Vte(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para crear una sala de video para esta cita");if(n===404)throw new Error("Cita no encontrada");if(n===400){const s=t?.response?.data?.message;throw new Error(s||"No se puede crear sala de video para esta cita")}const r=t?.response?.data?.message??t?.message??"No se pudo crear la sala de video";throw new Error(String(r))}}async function Wte(e){try{const{data:t}=await Ue.get(qte(e));return t}catch(t){const n=t?.response?.status;if(n===403)throw new Error("No tienes permisos para unirte a esta videollamada");if(n===404)throw new Error("Sala de video no encontrada. Asegrate de que la sala haya sido creada primero.");const r=t?.response?.data?.message??t?.message??"No se pudo obtener el token de video";throw new Error(String(r))}}async function Kte(e){try{const t=await Hte(e),n=await Wte(e);return{room:t,token:n}}catch(t){throw new Error(t?.message??"No se pudo configurar la videollamada")}}function Gte(e){return Jt({queryKey:["video","setup",e],queryFn:()=>{if(!e)throw new Error("Appointment ID is required");return Kte(e)},enabled:!!e,staleTime:300*1e3,retry:2})}function Zte(){const{appointmentId:e}=xp(),t=Rt(),[n,r]=g.useState(!1),{data:s,isLoading:a,error:o,refetch:l}=Gte(e);g.useEffect(()=>{s&&(r(!0),ut.success("Conectado a la videollamada"))},[s]);const u=()=>{r(!1),ut.info("Llamada finalizada"),t(-1)};return e?a?i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsx(qe,{children:"Conectando a videollamada..."})}),i.jsx(he,{children:i.jsx(Rn,{className:"h-96 w-full"})})]})}):o?i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsxs(aa,{children:["Error al conectar: ",o.message]})]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsxs($,{onClick:()=>l(),children:[i.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Reintentar"]}),i.jsx($,{variant:"outline",onClick:()=>t(-1),children:"Volver"})]})]}):s?i.jsxs("div",{className:"h-screen flex flex-col bg-black",children:[i.jsxs("div",{className:"bg-gray-900 text-white p-4 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-semibold",children:"Videollamada Mdica"}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Sala: ",s.token.roomName]})]}),i.jsxs($,{variant:"destructive",onClick:u,children:[i.jsx(k7,{className:"h-4 w-4 mr-2"}),"Finalizar llamada"]})]}),i.jsx("div",{className:"flex-1",children:i.jsxs(gee,{token:s.token.token,serverUrl:s.token.url,connect:n,video:!0,audio:!0,onDisconnected:u,style:{height:"100%"},children:[i.jsx($te,{}),i.jsx(wO,{})]})})]}):null:i.jsx("div",{className:"container mx-auto p-6",children:i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsx(aa,{children:"ID de cita no proporcionado"})]})})}function Jte(){return Jt({queryKey:["subscriptions","plans"],queryFn:CR,staleTime:1800*1e3})}function Yte(){return Jt({queryKey:["subscriptions","mine"],queryFn:Yx,staleTime:120*1e3})}function Qte(){const e=Nr();return Sr({mutationFn:t=>NR(t),onSuccess:()=>{e.invalidateQueries({queryKey:["subscriptions","mine"]}),e.invalidateQueries({queryKey:["subscriptions","limit"]}),e.invalidateQueries({queryKey:["subscriptions","history"]})}})}function Xte(){const e=Nr();return Sr({mutationFn:()=>Qx(),onSuccess:()=>{e.invalidateQueries({queryKey:["subscriptions"]})}})}function ene(){const[e,t]=g.useState(null),{data:n,isLoading:r}=Jte(),{data:s,refetch:a}=Yte(),o=Qte(),l=Xte(),u=async f=>{try{await o.mutateAsync({PlanId:f}),ut.success("Suscripcin creada exitosamente!"),a()}catch(p){ut.error(p.message||"Error al crear suscripcin")}},h=async()=>{if(confirm("Ests seguro de que deseas cancelar tu suscripcin?"))try{await l.mutateAsync(),ut.success("Suscripcin cancelada"),a()}catch(f){ut.error(f.message||"Error al cancelar suscripcin")}};return r?i.jsx("div",{className:"container mx-auto p-6",children:i.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(f=>i.jsxs(ue,{children:[i.jsxs($e,{children:[i.jsx(Rn,{className:"h-6 w-32"}),i.jsx(Rn,{className:"h-4 w-24 mt-2"})]}),i.jsx(he,{children:i.jsx(Rn,{className:"h-40 w-full"})})]},f))})}):i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Planes de Suscripcin"}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"Elige el plan que mejor se adapte a tus necesidades"})]}),s&&s.Status==="ACTIVE"&&i.jsxs(ia,{className:"mb-8",children:[i.jsx(_P,{className:"h-4 w-4"}),i.jsx(aa,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:["Plan actual: ",i.jsx("strong",{children:s.Plan?.Name})," -"," ",s.AppointmentsUsed,"/",s.AppointmentsLimit," ","citas utilizadas",s.NextBillingDate&&i.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["(Renueva el"," ",new Date(s.NextBillingDate).toLocaleDateString(),")"]})]}),i.jsx($,{variant:"outline",size:"sm",onClick:h,disabled:l.isPending,children:l.isPending?i.jsx(rn,{className:"h-4 w-4 animate-spin"}):"Cancelar plan"})]})})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n?.map(f=>{const p=s?.Status==="ACTIVE"&&s?.PlanId===f.PlanId,y=f.Interval==="MONTHLY";return i.jsxs(ue,{className:`relative ${p?"border-primary shadow-lg":""}`,children:[p&&i.jsx(Oe,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:"Plan Actual"}),i.jsxs($e,{children:[i.jsx(qe,{className:"text-2xl",children:f.Name}),i.jsx(Yi,{children:f.Description})]}),i.jsxs(he,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsxs("div",{className:"text-4xl font-bold",children:[f.Currency==="USD"?"$":f.Currency," ",f.Price]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["/ ",y?"mes":"ao"]})]}),i.jsxs("div",{className:"text-center py-2 bg-secondary rounded-lg",children:[i.jsx("div",{className:"text-2xl font-semibold",children:f.AppointmentsPerMonth}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["citas por ",y?"mes":"ao"]})]}),f.Features&&f.Features.length>0&&i.jsx("ul",{className:"space-y-2",children:f.Features.map((x,k)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(Ws,{className:"h-5 w-5 text-green-500 shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm",children:x})]},k))})]}),i.jsx(mT,{children:i.jsx($,{className:"w-full",disabled:p||o.isPending||!f.IsActive||s?.Status==="ACTIVE"&&!p,onClick:()=>u(f.PlanId),children:o.isPending&&e===f.PlanId?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"h-4 w-4 animate-spin mr-2"}),"Procesando..."]}):p?"Plan Actual":s?.Status==="ACTIVE"?"Cambiar Plan":"Suscribirse"})})]},f.PlanId)})}),!s&&i.jsx("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:"Sin suscripcin activa. Elige un plan para acceder a consultas mdicas."})]})}const la=Object.create(null);la.open="0";la.close="1";la.ping="2";la.pong="3";la.message="4";la.upgrade="5";la.noop="6";const mm=Object.create(null);Object.keys(la).forEach(e=>{mm[la[e]]=e});const F0={type:"error",data:"parser error"},kO=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",SO=typeof ArrayBuffer=="function",CO=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Hw=({type:e,data:t},n,r)=>kO&&t instanceof Blob?n?r(t):aE(t,r):SO&&(t instanceof ArrayBuffer||CO(t))?n?r(t):aE(new Blob([t]),r):r(la[e]+(t||"")),aE=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function oE(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let cx;function tne(e,t){if(kO&&e.data instanceof Blob)return e.data.arrayBuffer().then(oE).then(t);if(SO&&(e.data instanceof ArrayBuffer||CO(e.data)))return t(oE(e.data));Hw(e,!1,n=>{cx||(cx=new TextEncoder),t(cx.encode(n))})}const cE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<cE.length;e++)uu[cE.charCodeAt(e)]=e;const nne=e=>{let t=e.length*.75,n=e.length,r,s=0,a,o,l,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),f=new Uint8Array(h);for(r=0;r<n;r+=4)a=uu[e.charCodeAt(r)],o=uu[e.charCodeAt(r+1)],l=uu[e.charCodeAt(r+2)],u=uu[e.charCodeAt(r+3)],f[s++]=a<<2|o>>4,f[s++]=(o&15)<<4|l>>2,f[s++]=(l&3)<<6|u&63;return h},rne=typeof ArrayBuffer=="function",Ww=(e,t)=>{if(typeof e!="string")return{type:"message",data:NO(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:sne(e.substring(1),t)}:mm[n]?e.length>1?{type:mm[n],data:e.substring(1)}:{type:mm[n]}:F0},sne=(e,t)=>{if(rne){const n=nne(e);return NO(n,t)}else return{base64:!0,data:e}},NO=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},jO="",ine=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((a,o)=>{Hw(a,!1,l=>{r[o]=l,++s===n&&t(r.join(jO))})})},ane=(e,t)=>{const n=e.split(jO),r=[];for(let s=0;s<n.length;s++){const a=Ww(n[s],t);if(r.push(a),a.type==="error")break}return r};function one(){return new TransformStream({transform(e,t){tne(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const a=new DataView(s.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{s=new Uint8Array(9);const a=new DataView(s.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let lx;function Ff(e){return e.reduce((t,n)=>t+n.length,0)}function Uf(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function cne(e,t){lx||(lx=new TextDecoder);const n=[];let r=0,s=-1,a=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ff(n)<1)break;const u=Uf(n,1);a=(u[0]&128)===128,s=u[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ff(n)<2)break;const u=Uf(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(Ff(n)<8)break;const u=Uf(n,8),h=new DataView(u.buffer,u.byteOffset,u.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(F0);break}s=f*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Ff(n)<s)break;const u=Uf(n,s);l.enqueue(Ww(a?u:lx.decode(u),t)),r=0}if(s===0||s>e){l.enqueue(F0);break}}}})}const EO=4;function $n(e){if(e)return lne(e)}function lne(e){for(var t in $n.prototype)e[t]=$n.prototype[t];return e}$n.prototype.on=$n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};$n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};$n.prototype.off=$n.prototype.removeListener=$n.prototype.removeAllListeners=$n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};$n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};$n.prototype.emitReserved=$n.prototype.emit;$n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};$n.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yg=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Hs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),dne="arraybuffer";function TO(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const une=Hs.setTimeout,hne=Hs.clearTimeout;function xg(e,t){t.useNativeTimers?(e.setTimeoutFn=une.bind(Hs),e.clearTimeoutFn=hne.bind(Hs)):(e.setTimeoutFn=Hs.setTimeout.bind(Hs),e.clearTimeoutFn=Hs.clearTimeout.bind(Hs))}const fne=1.33;function mne(e){return typeof e=="string"?pne(e):Math.ceil((e.byteLength||e.size)*fne)}function pne(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function PO(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gne(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function vne(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class yne extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Kw extends $n{constructor(t){super(),this.writable=!1,xg(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new yne(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Ww(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=gne(t);return n.length?"?"+n:""}}class xne extends Kw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ane(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,ine(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=PO()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let _O=!1;try{_O=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bne=_O;function wne(){}class kne extends xne{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,a)=>{this.onError("xhr post error",s,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class na extends $n{constructor(t,n,r){super(),this.createRequest=t,xg(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=TO(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=na.requestsCount++,na.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wne,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete na.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}na.requestsCount=0;na.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",lE);else if(typeof addEventListener=="function"){const e="onpagehide"in Hs?"pagehide":"unload";addEventListener(e,lE,!1)}}function lE(){for(let e in na.requests)na.requests.hasOwnProperty(e)&&na.requests[e].abort()}const Sne=(function(){const e=RO({xdomain:!1});return e&&e.responseType!==null})();class Cne extends kne{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Sne&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new na(RO,this.uri(),t)}}function RO(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bne))return new XMLHttpRequest}catch{}if(!t)try{return new Hs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const AO=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Nne extends Kw{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=AO?{}:TO(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;Hw(r,this.supportsBinary,a=>{try{this.doWrite(r,a)}catch{}s&&yg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=PO()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const dx=Hs.WebSocket||Hs.MozWebSocket;class jne extends Nne{createSocket(t,n,r){return AO?new dx(t,n,r):n?new dx(t,n):new dx(t)}doWrite(t,n){this.ws.send(n)}}class Ene extends Kw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=cne(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=one();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const a=()=>{r.read().then(({done:l,value:u})=>{l||(this.onPacket(u),a())}).catch(l=>{})};a();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&yg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Tne={websocket:jne,webtransport:Ene,polling:Cne},Pne=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_ne=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function U0(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=Pne.exec(e||""),a={},o=14;for(;o--;)a[_ne[o]]=s[o]||"";return n!=-1&&r!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Rne(a,a.path),a.queryKey=Ane(a,a.query),a}function Rne(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Ane(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,a){s&&(n[s]=a)}),n}const z0=typeof addEventListener=="function"&&typeof removeEventListener=="function",pm=[];z0&&addEventListener("offline",()=>{pm.forEach(e=>e())},!1);class Ro extends $n{constructor(t,n){if(super(),this.binaryType=dne,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=U0(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=U0(n.host).host);xg(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=vne(this.opts.query)),z0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},pm.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=EO,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ro.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ro.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=mne(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,yg(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const a={type:t,data:n,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Ro.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),z0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=pm.indexOf(this._offlineEventListener);r!==-1&&pm.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ro.protocol=EO;class Ine extends Ro{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Ro.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ro.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function a(){r||(r=!0,f(),n.close(),n=null)}const o=p=>{const y=new Error("probe error: "+p);y.transport=n.name,a(),this.emitReserved("upgradeError",y)};function l(){o("transport closed")}function u(){o("socket closed")}function h(p){n&&p.name!==n.name&&a()}const f=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",l),this.off("close",u),this.off("upgrading",h)};n.once("open",s),n.once("error",o),n.once("close",l),this.once("close",u),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let One=class extends Ine{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Tne[s]).filter(s=>!!s)),super(t,r)}};function Dne(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=U0(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}const Mne=typeof ArrayBuffer=="function",Lne=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,IO=Object.prototype.toString,Fne=typeof Blob=="function"||typeof Blob<"u"&&IO.call(Blob)==="[object BlobConstructor]",Une=typeof File=="function"||typeof File<"u"&&IO.call(File)==="[object FileConstructor]";function Gw(e){return Mne&&(e instanceof ArrayBuffer||Lne(e))||Fne&&e instanceof Blob||Une&&e instanceof File}function gm(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(gm(e[n]))return!0;return!1}if(Gw(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return gm(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&gm(e[n]))return!0;return!1}function zne(e){const t=[],n=e.data,r=e;return r.data=B0(n,t),r.attachments=t.length,{packet:r,buffers:t}}function B0(e,t){if(!e)return e;if(Gw(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=B0(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=B0(e[r],t));return n}return e}function Bne(e,t){return e.data=$0(e.data,t),delete e.attachments,e}function $0(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=$0(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=$0(e[n],t));return e}const $ne=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Vne=5;var Pt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Pt||(Pt={}));class qne{constructor(t){this.replacer=t}encode(t){return(t.type===Pt.EVENT||t.type===Pt.ACK)&&gm(t)?this.encodeAsBinary({type:t.type===Pt.EVENT?Pt.BINARY_EVENT:Pt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Pt.BINARY_EVENT||t.type===Pt.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=zne(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function dE(e){return Object.prototype.toString.call(e)==="[object Object]"}class Zw extends $n{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Pt.BINARY_EVENT;r||n.type===Pt.BINARY_ACK?(n.type=r?Pt.EVENT:Pt.ACK,this.reconstructor=new Hne(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Gw(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Pt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Pt.BINARY_EVENT||r.type===Pt.BINARY_ACK){const a=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(a,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(a,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const a=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(a,n+1))}if(t.charAt(++n)){const a=this.tryParse(t.substr(n));if(Zw.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Pt.CONNECT:return dE(n);case Pt.DISCONNECT:return n===void 0;case Pt.CONNECT_ERROR:return typeof n=="string"||dE(n);case Pt.EVENT:case Pt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&$ne.indexOf(n[0])===-1);case Pt.ACK:case Pt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Hne{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Bne(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Wne=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zw,Encoder:qne,get PacketType(){return Pt},protocol:Vne},Symbol.toStringTag,{value:"Module"}));function ui(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Kne=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class OO extends $n{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ui(t,"open",this.onopen.bind(this)),ui(t,"packet",this.onpacket.bind(this)),ui(t,"error",this.onerror.bind(this)),ui(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,a;if(Kne.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Pt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,p=n.pop();this._registerAckCallback(f,p),o.id=f}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(a),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,s)=>{const a=(o,l)=>o?s(o):r(l);a.withError=!0,n.push(a),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...a)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Pt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Pt.EVENT:case Pt.BINARY_EVENT:this.onevent(t);break;case Pt.ACK:case Pt.BINARY_ACK:this.onack(t);break;case Pt.DISCONNECT:this.ondisconnect();break;case Pt.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Pt.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function md(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}md.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};md.prototype.reset=function(){this.attempts=0};md.prototype.setMin=function(e){this.ms=e};md.prototype.setMax=function(e){this.max=e};md.prototype.setJitter=function(e){this.jitter=e};class V0 extends $n{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,xg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new md({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Wne;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new One(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ui(n,"open",function(){r.onopen(),t&&t()}),a=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=ui(n,"error",a);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{s(),a(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ui(t,"ping",this.onping.bind(this)),ui(t,"data",this.ondata.bind(this)),ui(t,"error",this.onerror.bind(this)),ui(t,"close",this.onclose.bind(this)),ui(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){yg(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new OO(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const au={};function vm(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Dne(e,t.path||"/socket.io"),r=n.source,s=n.id,a=n.path,o=au[s]&&a in au[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let u;return l?u=new V0(r,t):(au[s]||(au[s]=new V0(r,t)),u=au[s]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(vm,{Manager:V0,Socket:OO,io:vm,connect:vm});class Gne{socket=null;url;constructor(t){this.url=t||"https://saludsinfronteras-backend.onrender.com"}connect(){if(this.socket?.connected)return console.warn("[WEBSOCKET] Already connected"),this.socket;const t=jp();if(!t)throw new Error("No authentication token found. Please login first.");return this.socket=vm(this.url,{auth:{token:t},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{}),this.socket.on("disconnect",n=>{}),this.socket.on("connect_error",n=>{console.error("[WEBSOCKET] Connection error:",n.message)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}joinConversation(t){if(!this.socket?.connected)throw new Error("WebSocket not connected. Call connect() first.");this.socket.emit("joinConversation",{conversationId:t})}leaveConversation(t){this.socket?.connected&&this.socket.emit("leaveConversation",{conversationId:t})}sendMessage(t){if(!this.socket?.connected)throw new Error("WebSocket not connected. Call connect() first.");this.socket.emit("sendMessage",{conversationId:t.conversationId,content:t.content,language:t.language||"es"})}onNewMessage(t){if(!this.socket)throw new Error("WebSocket not initialized. Call connect() first.");this.socket.on("newMessage",t)}onMessageSent(t){if(!this.socket)throw new Error("WebSocket not initialized. Call connect() first.");this.socket.on("messageSent",t)}onError(t){if(!this.socket)throw new Error("WebSocket not initialized. Call connect() first.");this.socket.on("error",t)}off(t,n){this.socket&&this.socket.off(t,n)}isConnected(){return this.socket?.connected??!1}getSocket(){return this.socket}}let ux=null;function Zne(){return ux||(ux=new Gne),ux}function Jne(e){const{conversationId:t,autoConnect:n=!0,onNewMessage:r,onMessageSent:s,onError:a}=e,[o,l]=g.useState(!1),[u,h]=g.useState([]),f=g.useRef(null);g.useEffect(()=>(f.current=Zne(),()=>{f.current&&f.current.leaveConversation(t)}),[t]);const p=g.useCallback(()=>{if(f.current)try{const b=f.current.connect();b.on("connect",()=>{l(!0),f.current?.joinConversation(t)}),b.on("disconnect",()=>{l(!1)}),f.current.onNewMessage(S=>{S.ConversationId===t&&(h(N=>[...N,S]),r?.(S))}),f.current.onMessageSent(S=>{s?.(S)}),f.current.onError(S=>{console.error("[WEBSOCKET] Error:",S.message),a?.(S)})}catch(b){console.error("[WEBSOCKET] Connection failed:",b.message)}},[t,r,s,a]),y=g.useCallback(()=>{f.current&&(f.current.leaveConversation(t),f.current.disconnect(),l(!1))},[t]),x=g.useCallback((b,S)=>{if(!f.current?.isConnected()){console.error("[WEBSOCKET] Cannot send message: not connected");return}f.current.sendMessage({conversationId:t,content:b,language:S})},[t]),k=g.useCallback(()=>{h([])},[]);return g.useEffect(()=>(n&&p(),()=>{y()}),[n,p,y]),{isConnected:o,messages:u,sendMessage:x,connect:p,disconnect:y,clearMessages:k}}function Yne(){const{conversationId:e}=xp(),{user:t}=da(),[n,r]=g.useState(""),s=g.useRef(null),{messages:a,sendMessage:o,isConnected:l,connect:u}=Jne({conversationId:e||"",autoConnect:!0,onNewMessage:p=>{p.SenderUserId!==t?.userId&&ut.info(`Nuevo mensaje de ${p.Sender.FirstName}`)},onError:p=>{ut.error(`Error: ${p.message}`)}});g.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[a]);const h=()=>{if(n.trim()){if(!l){ut.error("No ests conectado. Reconectando..."),u();return}o(n.trim()),r("")}},f=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),h())};return e?i.jsxs(ue,{className:"h-[600px] flex flex-col",children:[i.jsx($e,{className:"border-b",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(qe,{children:"Chat en Tiempo Real"}),i.jsx(Oe,{variant:l?"default":"destructive",children:l?i.jsxs(i.Fragment,{children:[i.jsx(a9,{className:"h-3 w-3 mr-1"}),"Conectado"]}):i.jsxs(i.Fragment,{children:[i.jsx(s9,{className:"h-3 w-3 mr-1"}),"Desconectado"]})})]})}),i.jsxs(he,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.length===0?i.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[i.jsx("p",{children:"No hay mensajes an"}),i.jsx("p",{className:"text-sm mt-2",children:"Enva un mensaje para comenzar la conversacin"})]}):a.map(p=>{const y=p.SenderUserId===t?.userId;return i.jsx("div",{className:`flex ${y?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`flex gap-2 max-w-[70%] ${y?"flex-row-reverse":""}`,children:[i.jsx(Oa,{className:"h-8 w-8",children:i.jsxs(Da,{children:[p.Sender.FirstName[0],p.Sender.LastName1[0]]})}),i.jsxs("div",{children:[i.jsxs("div",{className:`rounded-lg p-3 ${y?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:[!y&&i.jsxs("div",{className:"text-xs font-medium mb-1",children:[p.Sender.FirstName," ",p.Sender.LastName1]}),i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.Content})]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1 px-1",children:new Date(p.CreatedAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]})},p.MessageId)}),i.jsx("div",{ref:s})]}),i.jsx(mT,{className:"border-t p-4",children:i.jsxs("div",{className:"flex gap-2 w-full",children:[i.jsx(Ye,{placeholder:"Escribe un mensaje...",value:n,onChange:p=>r(p.target.value),onKeyPress:f,disabled:!l}),i.jsx($,{onClick:h,disabled:!l||!n.trim(),children:l?i.jsx(Wu,{className:"h-4 w-4"}):i.jsx(rn,{className:"h-4 w-4 animate-spin"})})]})})]}):i.jsx(ia,{variant:"destructive",children:i.jsx(aa,{children:"ID de conversacin no proporcionado"})})}var ah=e=>e.type==="checkbox",lc=e=>e instanceof Date,Xr=e=>e==null;const DO=e=>typeof e=="object";var Vn=e=>!Xr(e)&&!Array.isArray(e)&&DO(e)&&!lc(e),Qne=e=>Vn(e)&&e.target?ah(e.target)?e.target.checked:e.target.value:e,Xne=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ere=(e,t)=>e.has(Xne(t)),tre=e=>{const t=e.constructor&&e.constructor.prototype;return Vn(t)&&t.hasOwnProperty("isPrototypeOf")},Jw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ir(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Jw&&(e instanceof Blob||r))&&(n||Vn(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!tre(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=ir(e[s]));else return e;return t}var bg=e=>/^\w*$/.test(e),_n=e=>e===void 0,Yw=e=>Array.isArray(e)?e.filter(Boolean):[],Qw=e=>Yw(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ze=(e,t,n)=>{if(!t||!Vn(e))return n;const r=(bg(t)?[t]:Qw(t)).reduce((s,a)=>Xr(s)?s:s[a],e);return _n(r)||r===e?_n(e[t])?n:e[t]:r},Ki=e=>typeof e=="boolean",Vt=(e,t,n)=>{let r=-1;const s=bg(t)?[t]:Qw(t),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let u=n;if(r!==o){const h=e[l];u=Vn(h)||Array.isArray(h)?h:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=u,e=e[l]}};const uE={BLUR:"blur",FOCUS_OUT:"focusout"},pi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ea={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nre=Ce.createContext(null);nre.displayName="HookFormContext";var rre=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const o=a;return t._proxyFormState[o]!==pi.all&&(t._proxyFormState[o]=!r||pi.all),e[o]}});return s};const sre=typeof window<"u"?Ce.useLayoutEffect:Ce.useEffect;var Ns=e=>typeof e=="string",ire=(e,t,n,r,s)=>Ns(e)?(r&&t.watch.add(e),Ze(n,e,s)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),Ze(n,a))):(r&&(t.watchAll=!0),n),q0=e=>Xr(e)||!DO(e);function wo(e,t,n=new WeakSet){if(q0(e)||q0(t))return e===t;if(lc(e)&&lc(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const a of r){const o=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=t[a];if(lc(o)&&lc(l)||Vn(o)&&Vn(l)||Array.isArray(o)&&Array.isArray(l)?!wo(o,l,n):o!==l)return!1}}return!0}var Xw=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},vu=e=>Array.isArray(e)?e:[e],hE=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function MO(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],a=t[r];if(s&&Vn(s)&&a){const o=MO(s,a);Vn(o)&&(n[r]=o)}else e[r]&&(n[r]=a)}return n}var Yr=e=>Vn(e)&&!Object.keys(e).length,e1=e=>e.type==="file",gi=e=>typeof e=="function",up=e=>{if(!Jw)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},LO=e=>e.type==="select-multiple",t1=e=>e.type==="radio",are=e=>t1(e)||ah(e),hx=e=>up(e)&&e.isConnected;function ore(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=_n(e)?r++:e[t[r++]];return e}function cre(e){for(const t in e)if(e.hasOwnProperty(t)&&!_n(e[t]))return!1;return!0}function Un(e,t){const n=Array.isArray(t)?t:bg(t)?[t]:Qw(t),r=n.length===1?e:ore(e,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Vn(r)&&Yr(r)||Array.isArray(r)&&cre(r))&&Un(e,n.slice(0,-1)),e}var lre=e=>{for(const t in e)if(gi(e[t]))return!0;return!1};function FO(e){return Array.isArray(e)||Vn(e)&&!lre(e)}function H0(e,t={}){for(const n in e)FO(e[n])?(t[n]=Array.isArray(e[n])?[]:{},H0(e[n],t[n])):_n(e[n])||(t[n]=!0);return t}function vl(e,t,n){n||(n=H0(t));for(const r in e)FO(e[r])?_n(t)||q0(n[r])?n[r]=H0(e[r],Array.isArray(e[r])?[]:{}):vl(e[r],Xr(t)?{}:t[r],n[r]):n[r]=!wo(e[r],t[r]);return n}const fE={value:!1,isValid:!1},mE={value:!0,isValid:!0};var UO=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_n(e[0].attributes.value)?_n(e[0].value)||e[0].value===""?mE:{value:e[0].value,isValid:!0}:mE:fE}return fE},zO=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>_n(e)?e:t?e===""?NaN:e&&+e:n&&Ns(e)?new Date(e):r?r(e):e;const pE={isValid:!1,value:null};var BO=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,pE):pE;function gE(e){const t=e.ref;return e1(t)?t.files:t1(t)?BO(e.refs).value:LO(t)?[...t.selectedOptions].map(({value:n})=>n):ah(t)?UO(e.refs).value:zO(_n(t.value)?e.ref.value:t.value,e)}var dre=(e,t,n,r)=>{const s={};for(const a of e){const o=Ze(t,a);o&&Vt(s,a,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},hp=e=>e instanceof RegExp,ou=e=>_n(e)?e:hp(e)?e.source:Vn(e)?hp(e.value)?e.value.source:e.value:e,vE=e=>({isOnSubmit:!e||e===pi.onSubmit,isOnBlur:e===pi.onBlur,isOnChange:e===pi.onChange,isOnAll:e===pi.all,isOnTouch:e===pi.onTouched});const yE="AsyncFunction";var ure=e=>!!e&&!!e.validate&&!!(gi(e.validate)&&e.validate.constructor.name===yE||Vn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yE)),hre=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),xE=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const yu=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const a=Ze(e,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(yu(l,t))break}else if(Vn(l)&&yu(l,t))break}}};function bE(e,t,n){const r=Ze(e,n);if(r||bg(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Ze(t,a),l=Ze(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var fre=(e,t,n,r)=>{n(e);const{name:s,...a}=e;return Yr(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||pi.all))},mre=(e,t,n)=>!e||!t||e===t||vu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),pre=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,gre=(e,t)=>!Yw(Ze(e,t)).length&&Un(e,t),vre=(e,t,n)=>{const r=vu(Ze(e,n));return Vt(r,"root",t[n]),Vt(e,n,r),e};function wE(e,t,n="validate"){if(Ns(e)||Array.isArray(e)&&e.every(Ns)||Ki(e)&&!e)return{type:n,message:Ns(e)?e:"",ref:t}}var gl=e=>Vn(e)&&!hp(e)?e:{value:e,message:""},kE=async(e,t,n,r,s,a)=>{const{ref:o,refs:l,required:u,maxLength:h,minLength:f,min:p,max:y,pattern:x,validate:k,name:b,valueAsNumber:S,mount:N}=e._f,E=Ze(n,b);if(!N||t.has(b))return{};const j=l?l[0]:o,P=z=>{s&&j.reportValidity&&(j.setCustomValidity(Ki(z)?"":z||""),j.reportValidity())},T={},I=t1(o),_=ah(o),A=I||_,O=(S||e1(o))&&_n(o.value)&&_n(E)||up(o)&&o.value===""||E===""||Array.isArray(E)&&!E.length,M=Xw.bind(null,b,r,T),q=(z,G,oe,ke=Ea.maxLength,J=Ea.minLength)=>{const ge=z?G:oe;T[b]={type:z?ke:J,message:ge,ref:o,...M(z?ke:J,ge)}};if(a?!Array.isArray(E)||!E.length:u&&(!A&&(O||Xr(E))||Ki(E)&&!E||_&&!UO(l).isValid||I&&!BO(l).isValid)){const{value:z,message:G}=Ns(u)?{value:!!u,message:u}:gl(u);if(z&&(T[b]={type:Ea.required,message:G,ref:j,...M(Ea.required,G)},!r))return P(G),T}if(!O&&(!Xr(p)||!Xr(y))){let z,G;const oe=gl(y),ke=gl(p);if(!Xr(E)&&!isNaN(E)){const J=o.valueAsNumber||E&&+E;Xr(oe.value)||(z=J>oe.value),Xr(ke.value)||(G=J<ke.value)}else{const J=o.valueAsDate||new Date(E),ge=fe=>new Date(new Date().toDateString()+" "+fe),U=o.type=="time",ie=o.type=="week";Ns(oe.value)&&E&&(z=U?ge(E)>ge(oe.value):ie?E>oe.value:J>new Date(oe.value)),Ns(ke.value)&&E&&(G=U?ge(E)<ge(ke.value):ie?E<ke.value:J<new Date(ke.value))}if((z||G)&&(q(!!z,oe.message,ke.message,Ea.max,Ea.min),!r))return P(T[b].message),T}if((h||f)&&!O&&(Ns(E)||a&&Array.isArray(E))){const z=gl(h),G=gl(f),oe=!Xr(z.value)&&E.length>+z.value,ke=!Xr(G.value)&&E.length<+G.value;if((oe||ke)&&(q(oe,z.message,G.message),!r))return P(T[b].message),T}if(x&&!O&&Ns(E)){const{value:z,message:G}=gl(x);if(hp(z)&&!E.match(z)&&(T[b]={type:Ea.pattern,message:G,ref:o,...M(Ea.pattern,G)},!r))return P(G),T}if(k){if(gi(k)){const z=await k(E,n),G=wE(z,j);if(G&&(T[b]={...G,...M(Ea.validate,G.message)},!r))return P(G.message),T}else if(Vn(k)){let z={};for(const G in k){if(!Yr(z)&&!r)break;const oe=wE(await k[G](E,n),j,G);oe&&(z={...oe,...M(G,oe.message)},P(oe.message),r&&(T[b]=z))}if(!Yr(z)&&(T[b]={ref:j,...z},!r))return T}}return P(!0),T};const yre={mode:pi.onSubmit,reValidateMode:pi.onChange,shouldFocusError:!0};function xre(e={}){let t={...yre,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:gi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Vn(t.defaultValues)||Vn(t.values)?ir(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:ir(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:hE(),state:hE()},x=t.criteriaMode===pi.all,k=F=>W=>{clearTimeout(h),h=setTimeout(F,W)},b=async F=>{if(!t.disabled&&(f.isValid||p.isValid||F)){const W=t.resolver?Yr((await _()).errors):await O(r,!0);W!==n.isValid&&y.state.next({isValid:W})}},S=(F,W)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((F||Array.from(l.mount)).forEach(re=>{re&&(W?Vt(n.validatingFields,re,W):Un(n.validatingFields,re))}),y.state.next({validatingFields:n.validatingFields,isValidating:!Yr(n.validatingFields)}))},N=(F,W=[],re,Re,Pe=!0,je=!0)=>{if(Re&&re&&!t.disabled){if(o.action=!0,je&&Array.isArray(Ze(r,F))){const ze=re(Ze(r,F),Re.argA,Re.argB);Pe&&Vt(r,F,ze)}if(je&&Array.isArray(Ze(n.errors,F))){const ze=re(Ze(n.errors,F),Re.argA,Re.argB);Pe&&Vt(n.errors,F,ze),gre(n.errors,F)}if((f.touchedFields||p.touchedFields)&&je&&Array.isArray(Ze(n.touchedFields,F))){const ze=re(Ze(n.touchedFields,F),Re.argA,Re.argB);Pe&&Vt(n.touchedFields,F,ze)}(f.dirtyFields||p.dirtyFields)&&(n.dirtyFields=vl(s,a)),y.state.next({name:F,isDirty:q(F,W),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Vt(a,F,W)},E=(F,W)=>{Vt(n.errors,F,W),y.state.next({errors:n.errors})},j=F=>{n.errors=F,y.state.next({errors:n.errors,isValid:!1})},P=(F,W,re,Re)=>{const Pe=Ze(r,F);if(Pe){const je=Ze(a,F,_n(re)?Ze(s,F):re);_n(je)||Re&&Re.defaultChecked||W?Vt(a,F,W?je:gE(Pe._f)):oe(F,je),o.mount&&b()}},T=(F,W,re,Re,Pe)=>{let je=!1,ze=!1;const dt={name:F};if(!t.disabled){if(!re||Re){(f.isDirty||p.isDirty)&&(ze=n.isDirty,n.isDirty=dt.isDirty=q(),je=ze!==dt.isDirty);const be=wo(Ze(s,F),W);ze=!!Ze(n.dirtyFields,F),be?Un(n.dirtyFields,F):Vt(n.dirtyFields,F,!0),dt.dirtyFields=n.dirtyFields,je=je||(f.dirtyFields||p.dirtyFields)&&ze!==!be}if(re){const be=Ze(n.touchedFields,F);be||(Vt(n.touchedFields,F,re),dt.touchedFields=n.touchedFields,je=je||(f.touchedFields||p.touchedFields)&&be!==re)}je&&Pe&&y.state.next(dt)}return je?dt:{}},I=(F,W,re,Re)=>{const Pe=Ze(n.errors,F),je=(f.isValid||p.isValid)&&Ki(W)&&n.isValid!==W;if(t.delayError&&re?(u=k(()=>E(F,re)),u(t.delayError)):(clearTimeout(h),u=null,re?Vt(n.errors,F,re):Un(n.errors,F)),(re?!wo(Pe,re):Pe)||!Yr(Re)||je){const ze={...Re,...je&&Ki(W)?{isValid:W}:{},errors:n.errors,name:F};n={...n,...ze},y.state.next(ze)}},_=async F=>{S(F,!0);const W=await t.resolver(a,t.context,dre(F||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return S(F),W},A=async F=>{const{errors:W}=await _(F);if(F)for(const re of F){const Re=Ze(W,re);Re?Vt(n.errors,re,Re):Un(n.errors,re)}else n.errors=W;return W},O=async(F,W,re={valid:!0})=>{for(const Re in F){const Pe=F[Re];if(Pe){const{_f:je,...ze}=Pe;if(je){const dt=l.array.has(je.name),be=Pe._f&&ure(Pe._f);be&&f.validatingFields&&S([je.name],!0);const mt=await kE(Pe,l.disabled,a,x,t.shouldUseNativeValidation&&!W,dt);if(be&&f.validatingFields&&S([je.name]),mt[je.name]&&(re.valid=!1,W))break;!W&&(Ze(mt,je.name)?dt?vre(n.errors,mt,je.name):Vt(n.errors,je.name,mt[je.name]):Un(n.errors,je.name))}!Yr(ze)&&await O(ze,W,re)}}return re.valid},M=()=>{for(const F of l.unMount){const W=Ze(r,F);W&&(W._f.refs?W._f.refs.every(re=>!hx(re)):!hx(W._f.ref))&&K(F)}l.unMount=new Set},q=(F,W)=>!t.disabled&&(F&&W&&Vt(a,F,W),!wo(fe(),s)),z=(F,W,re)=>ire(F,l,{...o.mount?a:_n(W)?s:Ns(F)?{[F]:W}:W},re,W),G=F=>Yw(Ze(o.mount?a:s,F,t.shouldUnregister?Ze(s,F,[]):[])),oe=(F,W,re={})=>{const Re=Ze(r,F);let Pe=W;if(Re){const je=Re._f;je&&(!je.disabled&&Vt(a,F,zO(W,je)),Pe=up(je.ref)&&Xr(W)?"":W,LO(je.ref)?[...je.ref.options].forEach(ze=>ze.selected=Pe.includes(ze.value)):je.refs?ah(je.ref)?je.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Pe)?ze.checked=!!Pe.find(dt=>dt===ze.value):ze.checked=Pe===ze.value||!!Pe)}):je.refs.forEach(ze=>ze.checked=ze.value===Pe):e1(je.ref)?je.ref.value="":(je.ref.value=Pe,je.ref.type||y.state.next({name:F,values:ir(a)})))}(re.shouldDirty||re.shouldTouch)&&T(F,Pe,re.shouldTouch,re.shouldDirty,!0),re.shouldValidate&&ie(F)},ke=(F,W,re)=>{for(const Re in W){if(!W.hasOwnProperty(Re))return;const Pe=W[Re],je=F+"."+Re,ze=Ze(r,je);(l.array.has(F)||Vn(Pe)||ze&&!ze._f)&&!lc(Pe)?ke(je,Pe,re):oe(je,Pe,re)}},J=(F,W,re={})=>{const Re=Ze(r,F),Pe=l.array.has(F),je=ir(W);Vt(a,F,je),Pe?(y.array.next({name:F,values:ir(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&re.shouldDirty&&y.state.next({name:F,dirtyFields:vl(s,a),isDirty:q(F,je)})):Re&&!Re._f&&!Xr(je)?ke(F,je,re):oe(F,je,re),xE(F,l)&&y.state.next({...n,name:F}),y.state.next({name:o.mount?F:void 0,values:ir(a)})},ge=async F=>{o.mount=!0;const W=F.target;let re=W.name,Re=!0;const Pe=Ze(r,re),je=be=>{Re=Number.isNaN(be)||lc(be)&&isNaN(be.getTime())||wo(be,Ze(a,re,be))},ze=vE(t.mode),dt=vE(t.reValidateMode);if(Pe){let be,mt;const _t=W.type?gE(Pe._f):Qne(F),un=F.type===uE.BLUR||F.type===uE.FOCUS_OUT,sn=!hre(Pe._f)&&!t.resolver&&!Ze(n.errors,re)&&!Pe._f.deps||pre(un,Ze(n.touchedFields,re),n.isSubmitted,dt,ze),jn=xE(re,l,un);Vt(a,re,_t),un?(!W||!W.readOnly)&&(Pe._f.onBlur&&Pe._f.onBlur(F),u&&u(0)):Pe._f.onChange&&Pe._f.onChange(F);const ys=T(re,_t,un),pr=!Yr(ys)||jn;if(!un&&y.state.next({name:re,type:F.type,values:ir(a)}),sn)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?un&&b():un||b()),pr&&y.state.next({name:re,...jn?{}:ys});if(!un&&jn&&y.state.next({...n}),t.resolver){const{errors:jr}=await _([re]);if(je(_t),Re){const Br=bE(n.errors,r,re),dr=bE(jr,r,Br.name||re);be=dr.error,re=dr.name,mt=Yr(jr)}}else S([re],!0),be=(await kE(Pe,l.disabled,a,x,t.shouldUseNativeValidation))[re],S([re]),je(_t),Re&&(be?mt=!1:(f.isValid||p.isValid)&&(mt=await O(r,!0)));Re&&(Pe._f.deps&&(!Array.isArray(Pe._f.deps)||Pe._f.deps.length>0)&&ie(Pe._f.deps),I(re,mt,be,ys))}},U=(F,W)=>{if(Ze(n.errors,W)&&F.focus)return F.focus(),1},ie=async(F,W={})=>{let re,Re;const Pe=vu(F);if(t.resolver){const je=await A(_n(F)?F:Pe);re=Yr(je),Re=F?!Pe.some(ze=>Ze(je,ze)):re}else F?(Re=(await Promise.all(Pe.map(async je=>{const ze=Ze(r,je);return await O(ze&&ze._f?{[je]:ze}:ze)}))).every(Boolean),!(!Re&&!n.isValid)&&b()):Re=re=await O(r);return y.state.next({...!Ns(F)||(f.isValid||p.isValid)&&re!==n.isValid?{}:{name:F},...t.resolver||!F?{isValid:re}:{},errors:n.errors}),W.shouldFocus&&!Re&&yu(r,U,F?Pe:l.mount),Re},fe=(F,W)=>{let re={...o.mount?a:s};return W&&(re=MO(W.dirtyFields?n.dirtyFields:n.touchedFields,re)),_n(F)?re:Ns(F)?Ze(re,F):F.map(Re=>Ze(re,Re))},B=(F,W)=>({invalid:!!Ze((W||n).errors,F),isDirty:!!Ze((W||n).dirtyFields,F),error:Ze((W||n).errors,F),isValidating:!!Ze(n.validatingFields,F),isTouched:!!Ze((W||n).touchedFields,F)}),te=F=>{F&&vu(F).forEach(W=>Un(n.errors,W)),y.state.next({errors:F?n.errors:{}})},ee=(F,W,re)=>{const Re=(Ze(r,F,{_f:{}})._f||{}).ref,Pe=Ze(n.errors,F)||{},{ref:je,message:ze,type:dt,...be}=Pe;Vt(n.errors,F,{...be,...W,ref:Re}),y.state.next({name:F,errors:n.errors,isValid:!1}),re&&re.shouldFocus&&Re&&Re.focus&&Re.focus()},ye=(F,W)=>gi(F)?y.state.subscribe({next:re=>"values"in re&&F(z(void 0,W),re)}):z(F,W,!0),Te=F=>y.state.subscribe({next:W=>{mre(F.name,W.name,F.exact)&&fre(W,F.formState||f,qt,F.reRenderRoot)&&F.callback({values:{...a},...n,...W,defaultValues:s})}}).unsubscribe,ne=F=>(o.mount=!0,p={...p,...F.formState},Te({...F,formState:p})),K=(F,W={})=>{for(const re of F?vu(F):l.mount)l.mount.delete(re),l.array.delete(re),W.keepValue||(Un(r,re),Un(a,re)),!W.keepError&&Un(n.errors,re),!W.keepDirty&&Un(n.dirtyFields,re),!W.keepTouched&&Un(n.touchedFields,re),!W.keepIsValidating&&Un(n.validatingFields,re),!t.shouldUnregister&&!W.keepDefaultValue&&Un(s,re);y.state.next({values:ir(a)}),y.state.next({...n,...W.keepDirty?{isDirty:q()}:{}}),!W.keepIsValid&&b()},ce=({disabled:F,name:W})=>{(Ki(F)&&o.mount||F||l.disabled.has(W))&&(F?l.disabled.add(W):l.disabled.delete(W))},De=(F,W={})=>{let re=Ze(r,F);const Re=Ki(W.disabled)||Ki(t.disabled);return Vt(r,F,{...re||{},_f:{...re&&re._f?re._f:{ref:{name:F}},name:F,mount:!0,...W}}),l.mount.add(F),re?ce({disabled:Ki(W.disabled)?W.disabled:t.disabled,name:F}):P(F,!0,W.value),{...Re?{disabled:W.disabled||t.disabled}:{},...t.progressive?{required:!!W.required,min:ou(W.min),max:ou(W.max),minLength:ou(W.minLength),maxLength:ou(W.maxLength),pattern:ou(W.pattern)}:{},name:F,onChange:ge,onBlur:ge,ref:Pe=>{if(Pe){De(F,W),re=Ze(r,F);const je=_n(Pe.value)&&Pe.querySelectorAll&&Pe.querySelectorAll("input,select,textarea")[0]||Pe,ze=are(je),dt=re._f.refs||[];if(ze?dt.find(be=>be===je):je===re._f.ref)return;Vt(r,F,{_f:{...re._f,...ze?{refs:[...dt.filter(hx),je,...Array.isArray(Ze(s,F))?[{}]:[]],ref:{type:je.type,name:F}}:{ref:je}}}),P(F,!1,void 0,je)}else re=Ze(r,F,{}),re._f&&(re._f.mount=!1),(t.shouldUnregister||W.shouldUnregister)&&!(ere(l.array,F)&&o.action)&&l.unMount.add(F)}}},Fe=()=>t.shouldFocusError&&yu(r,U,l.mount),Xe=F=>{Ki(F)&&(y.state.next({disabled:F}),yu(r,(W,re)=>{const Re=Ze(r,re);Re&&(W.disabled=Re._f.disabled||F,Array.isArray(Re._f.refs)&&Re._f.refs.forEach(Pe=>{Pe.disabled=Re._f.disabled||F}))},0,!1))},He=(F,W)=>async re=>{let Re;re&&(re.preventDefault&&re.preventDefault(),re.persist&&re.persist());let Pe=ir(a);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:je,values:ze}=await _();n.errors=je,Pe=ir(ze)}else await O(r);if(l.disabled.size)for(const je of l.disabled)Un(Pe,je);if(Un(n.errors,"root"),Yr(n.errors)){y.state.next({errors:{}});try{await F(Pe,re)}catch(je){Re=je}}else W&&await W({...n.errors},re),Fe(),setTimeout(Fe);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yr(n.errors)&&!Re,submitCount:n.submitCount+1,errors:n.errors}),Re)throw Re},pt=(F,W={})=>{Ze(r,F)&&(_n(W.defaultValue)?J(F,ir(Ze(s,F))):(J(F,W.defaultValue),Vt(s,F,ir(W.defaultValue))),W.keepTouched||Un(n.touchedFields,F),W.keepDirty||(Un(n.dirtyFields,F),n.isDirty=W.defaultValue?q(F,ir(Ze(s,F))):q()),W.keepError||(Un(n.errors,F),f.isValid&&b()),y.state.next({...n}))},jt=(F,W={})=>{const re=F?ir(F):s,Re=ir(re),Pe=Yr(F),je=Pe?s:Re;if(W.keepDefaultValues||(s=re),!W.keepValues){if(W.keepDirtyValues){const ze=new Set([...l.mount,...Object.keys(vl(s,a))]);for(const dt of Array.from(ze))Ze(n.dirtyFields,dt)?Vt(je,dt,Ze(a,dt)):J(dt,Ze(je,dt))}else{if(Jw&&_n(F))for(const ze of l.mount){const dt=Ze(r,ze);if(dt&&dt._f){const be=Array.isArray(dt._f.refs)?dt._f.refs[0]:dt._f.ref;if(up(be)){const mt=be.closest("form");if(mt){mt.reset();break}}}}if(W.keepFieldsRef)for(const ze of l.mount)J(ze,Ze(je,ze));else r={}}a=t.shouldUnregister?W.keepDefaultValues?ir(s):{}:ir(je),y.array.next({values:{...je}}),y.state.next({values:{...je}})}l={mount:W.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!W.keepIsValid||!!W.keepDirtyValues,o.watch=!!t.shouldUnregister,y.state.next({submitCount:W.keepSubmitCount?n.submitCount:0,isDirty:Pe?!1:W.keepDirty?n.isDirty:!!(W.keepDefaultValues&&!wo(F,s)),isSubmitted:W.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Pe?{}:W.keepDirtyValues?W.keepDefaultValues&&a?vl(s,a):n.dirtyFields:W.keepDefaultValues&&F?vl(s,F):W.keepDirty?n.dirtyFields:{},touchedFields:W.keepTouched?n.touchedFields:{},errors:W.keepErrors?n.errors:{},isSubmitSuccessful:W.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Kn=(F,W)=>jt(gi(F)?F(a):F,W),ht=(F,W={})=>{const re=Ze(r,F),Re=re&&re._f;if(Re){const Pe=Re.refs?Re.refs[0]:Re.ref;Pe.focus&&(Pe.focus(),W.shouldSelect&&gi(Pe.select)&&Pe.select())}},qt=F=>{n={...n,...F}},Ht={control:{register:De,unregister:K,getFieldState:B,handleSubmit:He,setError:ee,_subscribe:Te,_runSchema:_,_focusError:Fe,_getWatch:z,_getDirty:q,_setValid:b,_setFieldArray:N,_setDisabledField:ce,_setErrors:j,_getFieldArray:G,_reset:jt,_resetDefaultValues:()=>gi(t.defaultValues)&&t.defaultValues().then(F=>{Kn(F,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:Xe,_subjects:y,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(F){o=F},get _defaultValues(){return s},get _names(){return l},set _names(F){l=F},get _formState(){return n},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:ne,trigger:ie,register:De,handleSubmit:He,watch:ye,setValue:J,getValues:fe,reset:Kn,resetField:pt,clearErrors:te,unregister:K,setError:ee,setFocus:ht,getFieldState:B};return{...Ht,formControl:Ht}}function bre(e={}){const t=Ce.useRef(void 0),n=Ce.useRef(void 0),[r,s]=Ce.useState({isDirty:!1,isValidating:!1,isLoading:gi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:gi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!gi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=xre(e);t.current={...l,formState:r}}const a=t.current.control;return a._options=e,sre(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),Ce.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ce.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ce.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ce.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ce.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Ce.useEffect(()=>{e.values&&!wo(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=e.values,s(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),Ce.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=rre(r,a),t.current}const SE=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Ze(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},W0=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?SE(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>SE(s,n,e))}},CE=(e,t)=>{t.shouldUseNativeValidation&&W0(e,t);const n={};for(const r in e){const s=Ze(t.fields,r),a=Object.assign(e[r]||{},{ref:s&&s.ref});if(wre(t.names||Object.keys(e),r)){const o=Object.assign({},Ze(n,r));Vt(o,"root",a),Vt(n,r,o)}else Vt(n,r,a)}return n},wre=(e,t)=>{const n=NE(t);return e.some(r=>NE(r).match(`^${n}\\.\\d+`))};function NE(e){return e.replace(/\]|\[/g,"")}function xe(e,t,n){function r(l,u){var h;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(h=l._zod).traits??(h.traits=new Set),l._zod.traits.add(e),t(l,u);for(const f in o.prototype)f in l||Object.defineProperty(l,f,{value:o.prototype[f].bind(l)});l._zod.constr=o,l._zod.def=u}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:e});function o(l){var u;const h=n?.Parent?new a:this;r(h,l),(u=h._zod).deferred??(u.deferred=[]);for(const f of h._zod.deferred)f();return h}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>n?.Parent&&l instanceof n.Parent?!0:l?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}class Ol extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class $O extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const VO={};function _c(e){return VO}function kre(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,s])=>t.indexOf(+r)===-1).map(([r,s])=>s)}function K0(e,t){return typeof t=="bigint"?t.toString():t}function n1(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function r1(e){return e==null}function s1(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Sre(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const u=r.match(/\d?e-(\d?)/);u?.[1]&&(s=Number.parseInt(u[1]))}const a=n>s?n:s,o=Number.parseInt(e.toFixed(a).replace(".","")),l=Number.parseInt(t.toFixed(a).replace(".",""));return o%l/10**a}const jE=Symbol("evaluating");function Gt(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==jE)return r===void 0&&(r=jE,r=n()),r},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function zc(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Bc(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function EE(e){return JSON.stringify(e)}const qO="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function fp(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Cre=n1(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Du(e){if(fp(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(fp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function HO(e){return Du(e)?{...e}:Array.isArray(e)?[...e]:e}const Nre=new Set(["string","number","symbol"]);function Zl(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function qo(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function et(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function jre(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Ere={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Tre(e,t){const n=e._zod.def,r=Bc(e._zod.def,{get shape(){const s={};for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(s[a]=n.shape[a])}return zc(this,"shape",s),s},checks:[]});return qo(e,r)}function Pre(e,t){const n=e._zod.def,r=Bc(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete s[a]}return zc(this,"shape",s),s},checks:[]});return qo(e,r)}function _re(e,t){if(!Du(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Bc(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t};return zc(this,"shape",a),a},checks:[]});return qo(e,s)}function Rre(e,t){if(!Du(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return zc(this,"shape",r),r},checks:e._zod.def.checks};return qo(e,n)}function Are(e,t){const n=Bc(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return zc(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return qo(e,n)}function Ire(e,t,n){const r=Bc(t._zod.def,{get shape(){const s=t._zod.def.shape,a={...s};if(n)for(const o in n){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(a[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)a[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return zc(this,"shape",a),a},checks:[]});return qo(t,r)}function Ore(e,t,n){const r=Bc(t._zod.def,{get shape(){const s=t._zod.def.shape,a={...s};if(n)for(const o in n){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(a[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)a[o]=new e({type:"nonoptional",innerType:s[o]});return zc(this,"shape",a),a},checks:[]});return qo(t,r)}function wl(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function WO(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function zf(e){return typeof e=="string"?e:e?.message}function Rc(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const s=zf(e.inst?._zod.def?.error?.(e))??zf(t?.error?.(e))??zf(n.customError?.(e))??zf(n.localeError?.(e))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function i1(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Mu(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const KO=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,K0,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},a1=xe("$ZodError",KO),wg=xe("$ZodError",KO,{Parent:Error});function Dre(e,t=n=>n.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function Mre(e,t=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(o=>r({issues:o}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(t(a));else{let o=n,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(t(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return r(e),n}const kg=e=>(t,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise)throw new Ol;if(o.issues.length){const l=new(s?.Err??e)(o.issues.map(u=>Rc(u,a,_c())));throw qO(l,s?.callee),l}return o.value},Lre=kg(wg),Sg=e=>async(t,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new(s?.Err??e)(o.issues.map(u=>Rc(u,a,_c())));throw qO(l,s?.callee),l}return o.value},Fre=Sg(wg),Cg=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Ol;return a.issues.length?{success:!1,error:new(e??a1)(a.issues.map(o=>Rc(o,s,_c())))}:{success:!0,data:a.value}},Ure=Cg(wg),Ng=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(o=>Rc(o,s,_c())))}:{success:!0,data:a.value}},zre=Ng(wg),Bre=e=>(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return kg(e)(t,n,s)},$re=e=>(t,n,r)=>kg(e)(t,n,r),Vre=e=>async(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sg(e)(t,n,s)},qre=e=>async(t,n,r)=>Sg(e)(t,n,r),Hre=e=>(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Cg(e)(t,n,s)},Wre=e=>(t,n,r)=>Cg(e)(t,n,r),Kre=e=>async(t,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ng(e)(t,n,s)},Gre=e=>async(t,n,r)=>Ng(e)(t,n,r),Zre=/^[cC][^\s-]{8,}$/,Jre=/^[0-9a-z]+$/,Yre=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Qre=/^[0-9a-vA-V]{20}$/,Xre=/^[A-Za-z0-9]{27}$/,ese=/^[a-zA-Z0-9_-]{21}$/,tse=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nse=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,TE=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,rse=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sse="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ise(){return new RegExp(sse,"u")}const ase=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ose=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cse=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,lse=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dse=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,GO=/^[A-Za-z0-9_-]*$/,use=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,hse=/^\+(?:[0-9]){6,14}[0-9]$/,ZO="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",fse=new RegExp(`^${ZO}$`);function JO(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function mse(e){return new RegExp(`^${JO(e)}$`)}function pse(e){const t=JO({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${ZO}T(?:${r})$`)}const gse=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},vse=/^-?\d+$/,yse=/^-?\d+(?:\.\d+)?/,xse=/^[^A-Z]*$/,bse=/^[^a-z]*$/,gs=xe("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),YO={number:"number",bigint:"bigint",object:"date"},QO=xe("$ZodCheckLessThan",(e,t)=>{gs.init(e,t);const n=YO[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,a=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<a&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),XO=xe("$ZodCheckGreaterThan",(e,t)=>{gs.init(e,t);const n=YO[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,a=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>a&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),wse=xe("$ZodCheckMultipleOf",(e,t)=>{gs.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):Sre(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),kse=xe("$ZodCheckNumberFormat",(e,t)=>{gs.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[s,a]=Ere[t.format];e._zod.onattach.push(o=>{const l=o._zod.bag;l.format=t.format,l.minimum=s,l.maximum=a,n&&(l.pattern=vse)}),e._zod.check=o=>{const l=o.value;if(n){if(!Number.isInteger(l)){o.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?o.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):o.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<s&&o.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>a&&o.issues.push({origin:"number",input:l,code:"too_big",maximum:a,inst:e})}}),Sse=xe("$ZodCheckMaxLength",(e,t)=>{var n;gs.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!r1(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const s=r.value;if(s.length<=t.maximum)return;const o=i1(s);r.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Cse=xe("$ZodCheckMinLength",(e,t)=>{var n;gs.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!r1(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const s=r.value;if(s.length>=t.minimum)return;const o=i1(s);r.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Nse=xe("$ZodCheckLengthEquals",(e,t)=>{var n;gs.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!r1(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=r=>{const s=r.value,a=s.length;if(a===t.length)return;const o=i1(s),l=a>t.length;r.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),jg=xe("$ZodCheckStringFormat",(e,t)=>{var n,r;gs.init(e,t),e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,t.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),jse=xe("$ZodCheckRegex",(e,t)=>{jg.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Ese=xe("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=xse),jg.init(e,t)}),Tse=xe("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=bse),jg.init(e,t)}),Pse=xe("$ZodCheckIncludes",(e,t)=>{gs.init(e,t);const n=Zl(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),_se=xe("$ZodCheckStartsWith",(e,t)=>{gs.init(e,t);const n=new RegExp(`^${Zl(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Rse=xe("$ZodCheckEndsWith",(e,t)=>{gs.init(e,t);const n=new RegExp(`.*${Zl(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),Ase=xe("$ZodCheckOverwrite",(e,t)=>{gs.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Ise{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),a=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of a)this.content.push(o)}compile(){const t=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new t(...n,s.join(`
`))}}const Ose={major:4,minor:1,patch:12},Dn=xe("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Ose;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(o,l,u)=>{let h=wl(o),f;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(h)continue;const y=o.issues.length,x=p._zod.check(o);if(x instanceof Promise&&u?.async===!1)throw new Ol;if(f||x instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await x,o.issues.length!==y&&(h||(h=wl(o,y)))});else{if(o.issues.length===y)continue;h||(h=wl(o,y))}}return f?f.then(()=>o):o},a=(o,l,u)=>{if(wl(o))return o.aborted=!0,o;const h=s(l,r,u);if(h instanceof Promise){if(u.async===!1)throw new Ol;return h.then(f=>e._zod.parse(f,u))}return e._zod.parse(h,u)};e._zod.run=(o,l)=>{if(l.skipChecks)return e._zod.parse(o,l);if(l.direction==="backward"){const h=e._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(f=>a(f,o,l)):a(h,o,l)}const u=e._zod.parse(o,l);if(u instanceof Promise){if(l.async===!1)throw new Ol;return u.then(h=>s(h,r,l))}return s(u,r,l)}}e["~standard"]={validate:s=>{try{const a=Ure(e,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return zre(e,s).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),o1=xe("$ZodString",(e,t)=>{Dn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??gse(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),dn=xe("$ZodStringFormat",(e,t)=>{jg.init(e,t),o1.init(e,t)}),Dse=xe("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=nse),dn.init(e,t)}),Mse=xe("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=TE(r))}else t.pattern??(t.pattern=TE());dn.init(e,t)}),Lse=xe("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=rse),dn.init(e,t)}),Fse=xe("$ZodURL",(e,t)=>{dn.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:use.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Use=xe("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ise()),dn.init(e,t)}),zse=xe("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ese),dn.init(e,t)}),Bse=xe("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Zre),dn.init(e,t)}),$se=xe("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Jre),dn.init(e,t)}),Vse=xe("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Yre),dn.init(e,t)}),qse=xe("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Qre),dn.init(e,t)}),Hse=xe("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Xre),dn.init(e,t)}),Wse=xe("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=pse(t)),dn.init(e,t)}),Kse=xe("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=fse),dn.init(e,t)}),Gse=xe("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=mse(t)),dn.init(e,t)}),Zse=xe("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=tse),dn.init(e,t)}),Jse=xe("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ase),dn.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),Yse=xe("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=ose),dn.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Qse=xe("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=cse),dn.init(e,t)}),Xse=xe("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=lse),dn.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const o=Number(a);if(`${o}`!==a)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function eD(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const eie=xe("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=dse),dn.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{eD(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function tie(e){if(!GO.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return eD(n)}const nie=xe("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=GO),dn.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{tie(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),rie=xe("$ZodE164",(e,t)=>{t.pattern??(t.pattern=hse),dn.init(e,t)});function sie(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const iie=xe("$ZodJWT",(e,t)=>{dn.init(e,t),e._zod.check=n=>{sie(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),tD=xe("$ZodNumber",(e,t)=>{Dn.init(e,t),e._zod.pattern=e._zod.bag.pattern??yse,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...a?{received:a}:{}}),n}}),aie=xe("$ZodNumber",(e,t)=>{kse.init(e,t),tD.init(e,t)}),oie=xe("$ZodUnknown",(e,t)=>{Dn.init(e,t),e._zod.parse=n=>n}),cie=xe("$ZodNever",(e,t)=>{Dn.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function PE(e,t,n){e.issues.length&&t.issues.push(...WO(n,e.issues)),t.value[n]=e.value}const lie=xe("$ZodArray",(e,t)=>{Dn.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const a=[];for(let o=0;o<s.length;o++){const l=s[o],u=t.element._zod.run({value:l,issues:[]},r);u instanceof Promise?a.push(u.then(h=>PE(h,n,o))):PE(u,n,o)}return a.length?Promise.all(a).then(()=>n):n}});function mp(e,t,n,r){e.issues.length&&t.issues.push(...WO(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function nD(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=jre(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function rD(e,t,n,r,s,a){const o=[],l=s.keySet,u=s.catchall._zod,h=u.def.type;for(const f of Object.keys(t)){if(l.has(f))continue;if(h==="never"){o.push(f);continue}const p=u.run({value:t[f],issues:[]},r);p instanceof Promise?e.push(p.then(y=>mp(y,n,f,t))):mp(p,n,f,t)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:a}),e.length?Promise.all(e).then(()=>n):n}const die=xe("$ZodObject",(e,t)=>{if(Dn.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const l=t.shape;Object.defineProperty(t,"shape",{get:()=>{const u={...l};return Object.defineProperty(t,"shape",{value:u}),u}})}const r=n1(()=>nD(t));Gt(e._zod,"propValues",()=>{const l=t.shape,u={};for(const h in l){const f=l[h]._zod;if(f.values){u[h]??(u[h]=new Set);for(const p of f.values)u[h].add(p)}}return u});const s=fp,a=t.catchall;let o;e._zod.parse=(l,u)=>{o??(o=r.value);const h=l.value;if(!s(h))return l.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),l;l.value={};const f=[],p=o.shape;for(const y of o.keys){const k=p[y]._zod.run({value:h[y],issues:[]},u);k instanceof Promise?f.push(k.then(b=>mp(b,l,y,h))):mp(k,l,y,h)}return a?rD(f,h,l,u,r.value,e):f.length?Promise.all(f).then(()=>l):l}}),uie=xe("$ZodObjectJIT",(e,t)=>{die.init(e,t);const n=e._zod.parse,r=n1(()=>nD(t)),s=y=>{const x=new Ise(["shape","payload","ctx"]),k=r.value,b=j=>{const P=EE(j);return`shape[${P}]._zod.run({ value: input[${P}], issues: [] }, ctx)`};x.write("const input = payload.value;");const S=Object.create(null);let N=0;for(const j of k.keys)S[j]=`key_${N++}`;x.write("const newResult = {};");for(const j of k.keys){const P=S[j],T=EE(j);x.write(`const ${P} = ${b(j)};`),x.write(`
        if (${P}.issues.length) {
          payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${T}, ...iss.path] : [${T}]
          })));
        }
        
        
        if (${P}.value === undefined) {
          if (${T} in input) {
            newResult[${T}] = undefined;
          }
        } else {
          newResult[${T}] = ${P}.value;
        }
        
      `)}x.write("payload.value = newResult;"),x.write("return payload;");const E=x.compile();return(j,P)=>E(y,j,P)};let a;const o=fp,l=!VO.jitless,h=l&&Cre.value,f=t.catchall;let p;e._zod.parse=(y,x)=>{p??(p=r.value);const k=y.value;return o(k)?l&&h&&x?.async===!1&&x.jitless!==!0?(a||(a=s(t.shape)),y=a(y,x),f?rD([],k,y,x,p,e):y):n(y,x):(y.issues.push({expected:"object",code:"invalid_type",input:k,inst:e}),y)}});function _E(e,t,n,r){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;const s=e.filter(a=>!wl(a));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(a=>a.issues.map(o=>Rc(o,r,_c())))}),t)}const hie=xe("$ZodUnion",(e,t)=>{Dn.init(e,t),Gt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Gt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Gt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Gt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>s1(a.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(s,a)=>{if(n)return r(s,a);let o=!1;const l=[];for(const u of t.options){const h=u._zod.run({value:s.value,issues:[]},a);if(h instanceof Promise)l.push(h),o=!0;else{if(h.issues.length===0)return h;l.push(h)}}return o?Promise.all(l).then(u=>_E(u,s,e,a)):_E(l,s,e,a)}}),fie=xe("$ZodIntersection",(e,t)=>{Dn.init(e,t),e._zod.parse=(n,r)=>{const s=n.value,a=t.left._zod.run({value:s,issues:[]},r),o=t.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||o instanceof Promise?Promise.all([a,o]).then(([u,h])=>RE(n,u,h)):RE(n,a,o)}});function G0(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Du(e)&&Du(t)){const n=Object.keys(t),r=Object.keys(e).filter(a=>n.indexOf(a)!==-1),s={...e,...t};for(const a of r){const o=G0(e[a],t[a]);if(!o.valid)return{valid:!1,mergeErrorPath:[a,...o.mergeErrorPath]};s[a]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=e[r],a=t[r],o=G0(s,a);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function RE(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),wl(e))return e;const r=G0(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const mie=xe("$ZodEnum",(e,t)=>{Dn.init(e,t);const n=kre(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(s=>Nre.has(typeof s)).map(s=>typeof s=="string"?Zl(s):s.toString()).join("|")})$`),e._zod.parse=(s,a)=>{const o=s.value;return r.has(o)||s.issues.push({code:"invalid_value",values:n,input:o,inst:e}),s}}),pie=xe("$ZodLiteral",(e,t)=>{if(Dn.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Zl(n):n?Zl(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),gie=xe("$ZodTransform",(e,t)=>{Dn.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new $O(e.constructor.name);const s=t.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(n.value=o,n));if(s instanceof Promise)throw new Ol;return n.value=s,n}});function AE(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const vie=xe("$ZodOptional",(e,t)=>{Dn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Gt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Gt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${s1(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>AE(a,n.value)):AE(s,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),yie=xe("$ZodNullable",(e,t)=>{Dn.init(e,t),Gt(e._zod,"optin",()=>t.innerType._zod.optin),Gt(e._zod,"optout",()=>t.innerType._zod.optout),Gt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${s1(n.source)}|null)$`):void 0}),Gt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),xie=xe("$ZodDefault",(e,t)=>{Dn.init(e,t),e._zod.optin="optional",Gt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>IE(a,t)):IE(s,t)}});function IE(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const bie=xe("$ZodPrefault",(e,t)=>{Dn.init(e,t),e._zod.optin="optional",Gt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),wie=xe("$ZodNonOptional",(e,t)=>{Dn.init(e,t),Gt(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>OE(a,e)):OE(s,e)}});function OE(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const kie=xe("$ZodCatch",(e,t)=>{Dn.init(e,t),Gt(e._zod,"optin",()=>t.innerType._zod.optin),Gt(e._zod,"optout",()=>t.innerType._zod.optout),Gt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=t.catchValue({...n,error:{issues:a.issues.map(o=>Rc(o,r,_c()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(a=>Rc(a,r,_c()))},input:n.value}),n.issues=[]),n)}}),Sie=xe("$ZodPipe",(e,t)=>{Dn.init(e,t),Gt(e._zod,"values",()=>t.in._zod.values),Gt(e._zod,"optin",()=>t.in._zod.optin),Gt(e._zod,"optout",()=>t.out._zod.optout),Gt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=t.out._zod.run(n,r);return a instanceof Promise?a.then(o=>Bf(o,t.in,r)):Bf(a,t.in,r)}const s=t.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Bf(a,t.out,r)):Bf(s,t.out,r)}});function Bf(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Cie=xe("$ZodReadonly",(e,t)=>{Dn.init(e,t),Gt(e._zod,"propValues",()=>t.innerType._zod.propValues),Gt(e._zod,"values",()=>t.innerType._zod.values),Gt(e._zod,"optin",()=>t.innerType._zod.optin),Gt(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(DE):DE(s)}});function DE(e){return e.value=Object.freeze(e.value),e}const Nie=xe("$ZodCustom",(e,t)=>{gs.init(e,t),Dn.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(a=>ME(a,n,r,e));ME(s,n,r,e)}});function ME(e,t,n,r){if(!e){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),t.issues.push(Mu(s))}}class jie{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Eie(){return new jie}const $f=Eie();function Tie(e,t){return new e({type:"string",...et(t)})}function Pie(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...et(t)})}function LE(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...et(t)})}function _ie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...et(t)})}function Rie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...et(t)})}function Aie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...et(t)})}function Iie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...et(t)})}function Oie(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...et(t)})}function Die(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...et(t)})}function Mie(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...et(t)})}function Lie(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...et(t)})}function Fie(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...et(t)})}function Uie(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...et(t)})}function zie(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...et(t)})}function Bie(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...et(t)})}function $ie(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...et(t)})}function Vie(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...et(t)})}function qie(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...et(t)})}function Hie(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...et(t)})}function Wie(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...et(t)})}function Kie(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...et(t)})}function Gie(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...et(t)})}function Zie(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...et(t)})}function Jie(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...et(t)})}function Yie(e,t){return new e({type:"string",format:"date",check:"string_format",...et(t)})}function Qie(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...et(t)})}function Xie(e,t){return new e({type:"string",format:"duration",check:"string_format",...et(t)})}function eae(e,t){return new e({type:"number",checks:[],...et(t)})}function tae(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...et(t)})}function nae(e){return new e({type:"unknown"})}function rae(e,t){return new e({type:"never",...et(t)})}function FE(e,t){return new QO({check:"less_than",...et(t),value:e,inclusive:!1})}function fx(e,t){return new QO({check:"less_than",...et(t),value:e,inclusive:!0})}function UE(e,t){return new XO({check:"greater_than",...et(t),value:e,inclusive:!1})}function mx(e,t){return new XO({check:"greater_than",...et(t),value:e,inclusive:!0})}function zE(e,t){return new wse({check:"multiple_of",...et(t),value:e})}function sD(e,t){return new Sse({check:"max_length",...et(t),maximum:e})}function pp(e,t){return new Cse({check:"min_length",...et(t),minimum:e})}function iD(e,t){return new Nse({check:"length_equals",...et(t),length:e})}function sae(e,t){return new jse({check:"string_format",format:"regex",...et(t),pattern:e})}function iae(e){return new Ese({check:"string_format",format:"lowercase",...et(e)})}function aae(e){return new Tse({check:"string_format",format:"uppercase",...et(e)})}function oae(e,t){return new Pse({check:"string_format",format:"includes",...et(t),includes:e})}function cae(e,t){return new _se({check:"string_format",format:"starts_with",...et(t),prefix:e})}function lae(e,t){return new Rse({check:"string_format",format:"ends_with",...et(t),suffix:e})}function oh(e){return new Ase({check:"overwrite",tx:e})}function dae(e){return oh(t=>t.normalize(e))}function uae(){return oh(e=>e.trim())}function hae(){return oh(e=>e.toLowerCase())}function fae(){return oh(e=>e.toUpperCase())}function mae(e,t,n){return new e({type:"array",element:t,...et(n)})}function pae(e,t,n){return new e({type:"custom",check:"custom",fn:t,...et(n)})}function gae(e){const t=vae(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Mu(r,n.value,t._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(Mu(s))}},e(n.value,n)));return t}function vae(e,t){const n=new gs({check:"custom",...et(t)});return n._zod.check=e,n}function BE(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function yae(e,t){for(var n={};e.length;){var r=e[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return e.push(p)})}),t){var u=n[o].types,h=u&&u[r.code];n[o]=Xw(o,t,n,s,h?[].concat(h,r.message):r.message)}e.shift()}return n}function xae(e,t){for(var n={};e.length;){var r=e[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if(r.code==="invalid_union"&&r.errors.length>0){var l=r.errors[0][0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if(r.code==="invalid_union"&&r.errors.forEach(function(f){return f.forEach(function(p){return e.push(p)})}),t){var u=n[o].types,h=u&&u[r.code];n[o]=Xw(o,t,n,s,h?[].concat(h,r.message):r.message)}e.shift()}return n}function bae(e,t,n){if(n===void 0&&(n={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(e))return function(r,s,a){try{return Promise.resolve(BE(function(){return Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(o){return a.shouldUseNativeValidation&&W0({},a),{errors:{},values:n.raw?Object.assign({},r):o}})},function(o){if((function(l){return Array.isArray(l?.issues)})(o))return{values:{},errors:CE(yae(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(e))return function(r,s,a){try{return Promise.resolve(BE(function(){return Promise.resolve((n.mode==="sync"?Lre:Fre)(e,r,t)).then(function(o){return a.shouldUseNativeValidation&&W0({},a),{errors:{},values:n.raw?Object.assign({},r):o}})},function(o){if((function(l){return l instanceof a1})(o))return{values:{},errors:CE(xae(o.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const wae=xe("ZodISODateTime",(e,t)=>{Wse.init(e,t),vn.init(e,t)});function kae(e){return Jie(wae,e)}const Sae=xe("ZodISODate",(e,t)=>{Kse.init(e,t),vn.init(e,t)});function Cae(e){return Yie(Sae,e)}const Nae=xe("ZodISOTime",(e,t)=>{Gse.init(e,t),vn.init(e,t)});function jae(e){return Qie(Nae,e)}const Eae=xe("ZodISODuration",(e,t)=>{Zse.init(e,t),vn.init(e,t)});function Tae(e){return Xie(Eae,e)}const Pae=(e,t)=>{a1.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Mre(e,n)},flatten:{value:n=>Dre(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,K0,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,K0,2)}},isEmpty:{get(){return e.issues.length===0}}})},ei=xe("ZodError",Pae,{Parent:Error}),_ae=kg(ei),Rae=Sg(ei),Aae=Cg(ei),Iae=Ng(ei),Oae=Bre(ei),Dae=$re(ei),Mae=Vre(ei),Lae=qre(ei),Fae=Hre(ei),Uae=Wre(ei),zae=Kre(ei),Bae=Gre(ei),Wn=xe("ZodType",(e,t)=>(Dn.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(Bc(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(n,r)=>qo(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>_ae(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Aae(e,n,r),e.parseAsync=async(n,r)=>Rae(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Iae(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>Oae(e,n,r),e.decode=(n,r)=>Dae(e,n,r),e.encodeAsync=async(n,r)=>Mae(e,n,r),e.decodeAsync=async(n,r)=>Lae(e,n,r),e.safeEncode=(n,r)=>Fae(e,n,r),e.safeDecode=(n,r)=>Uae(e,n,r),e.safeEncodeAsync=async(n,r)=>zae(e,n,r),e.safeDecodeAsync=async(n,r)=>Bae(e,n,r),e.refine=(n,r)=>e.check(_oe(n,r)),e.superRefine=n=>e.check(Roe(n)),e.overwrite=n=>e.check(oh(n)),e.optional=()=>WE(e),e.nullable=()=>KE(e),e.nullish=()=>WE(KE(e)),e.nonoptional=n=>Coe(e,n),e.array=()=>ch(e),e.or=n=>foe([e,n]),e.and=n=>poe(e,n),e.transform=n=>GE(e,yoe(n)),e.default=n=>woe(e,n),e.prefault=n=>Soe(e,n),e.catch=n=>joe(e,n),e.pipe=n=>GE(e,n),e.readonly=()=>Poe(e),e.describe=n=>{const r=e.clone();return $f.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return $f.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return $f.get(e);const r=e.clone();return $f.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),aD=xe("_ZodString",(e,t)=>{o1.init(e,t),Wn.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(sae(...r)),e.includes=(...r)=>e.check(oae(...r)),e.startsWith=(...r)=>e.check(cae(...r)),e.endsWith=(...r)=>e.check(lae(...r)),e.min=(...r)=>e.check(pp(...r)),e.max=(...r)=>e.check(sD(...r)),e.length=(...r)=>e.check(iD(...r)),e.nonempty=(...r)=>e.check(pp(1,...r)),e.lowercase=r=>e.check(iae(r)),e.uppercase=r=>e.check(aae(r)),e.trim=()=>e.check(uae()),e.normalize=(...r)=>e.check(dae(...r)),e.toLowerCase=()=>e.check(hae()),e.toUpperCase=()=>e.check(fae())}),$ae=xe("ZodString",(e,t)=>{o1.init(e,t),aD.init(e,t),e.email=n=>e.check(Pie(Vae,n)),e.url=n=>e.check(Oie(qae,n)),e.jwt=n=>e.check(Zie(ioe,n)),e.emoji=n=>e.check(Die(Hae,n)),e.guid=n=>e.check(LE($E,n)),e.uuid=n=>e.check(_ie(Vf,n)),e.uuidv4=n=>e.check(Rie(Vf,n)),e.uuidv6=n=>e.check(Aie(Vf,n)),e.uuidv7=n=>e.check(Iie(Vf,n)),e.nanoid=n=>e.check(Mie(Wae,n)),e.guid=n=>e.check(LE($E,n)),e.cuid=n=>e.check(Lie(Kae,n)),e.cuid2=n=>e.check(Fie(Gae,n)),e.ulid=n=>e.check(Uie(Zae,n)),e.base64=n=>e.check(Wie(noe,n)),e.base64url=n=>e.check(Kie(roe,n)),e.xid=n=>e.check(zie(Jae,n)),e.ksuid=n=>e.check(Bie(Yae,n)),e.ipv4=n=>e.check($ie(Qae,n)),e.ipv6=n=>e.check(Vie(Xae,n)),e.cidrv4=n=>e.check(qie(eoe,n)),e.cidrv6=n=>e.check(Hie(toe,n)),e.e164=n=>e.check(Gie(soe,n)),e.datetime=n=>e.check(kae(n)),e.date=n=>e.check(Cae(n)),e.time=n=>e.check(jae(n)),e.duration=n=>e.check(Tae(n))});function yt(e){return Tie($ae,e)}const vn=xe("ZodStringFormat",(e,t)=>{dn.init(e,t),aD.init(e,t)}),Vae=xe("ZodEmail",(e,t)=>{Lse.init(e,t),vn.init(e,t)}),$E=xe("ZodGUID",(e,t)=>{Dse.init(e,t),vn.init(e,t)}),Vf=xe("ZodUUID",(e,t)=>{Mse.init(e,t),vn.init(e,t)}),qae=xe("ZodURL",(e,t)=>{Fse.init(e,t),vn.init(e,t)}),Hae=xe("ZodEmoji",(e,t)=>{Use.init(e,t),vn.init(e,t)}),Wae=xe("ZodNanoID",(e,t)=>{zse.init(e,t),vn.init(e,t)}),Kae=xe("ZodCUID",(e,t)=>{Bse.init(e,t),vn.init(e,t)}),Gae=xe("ZodCUID2",(e,t)=>{$se.init(e,t),vn.init(e,t)}),Zae=xe("ZodULID",(e,t)=>{Vse.init(e,t),vn.init(e,t)}),Jae=xe("ZodXID",(e,t)=>{qse.init(e,t),vn.init(e,t)}),Yae=xe("ZodKSUID",(e,t)=>{Hse.init(e,t),vn.init(e,t)}),Qae=xe("ZodIPv4",(e,t)=>{Jse.init(e,t),vn.init(e,t)}),Xae=xe("ZodIPv6",(e,t)=>{Yse.init(e,t),vn.init(e,t)}),eoe=xe("ZodCIDRv4",(e,t)=>{Qse.init(e,t),vn.init(e,t)}),toe=xe("ZodCIDRv6",(e,t)=>{Xse.init(e,t),vn.init(e,t)}),noe=xe("ZodBase64",(e,t)=>{eie.init(e,t),vn.init(e,t)}),roe=xe("ZodBase64URL",(e,t)=>{nie.init(e,t),vn.init(e,t)}),soe=xe("ZodE164",(e,t)=>{rie.init(e,t),vn.init(e,t)}),ioe=xe("ZodJWT",(e,t)=>{iie.init(e,t),vn.init(e,t)}),oD=xe("ZodNumber",(e,t)=>{tD.init(e,t),Wn.init(e,t),e.gt=(r,s)=>e.check(UE(r,s)),e.gte=(r,s)=>e.check(mx(r,s)),e.min=(r,s)=>e.check(mx(r,s)),e.lt=(r,s)=>e.check(FE(r,s)),e.lte=(r,s)=>e.check(fx(r,s)),e.max=(r,s)=>e.check(fx(r,s)),e.int=r=>e.check(VE(r)),e.safe=r=>e.check(VE(r)),e.positive=r=>e.check(UE(0,r)),e.nonnegative=r=>e.check(mx(0,r)),e.negative=r=>e.check(FE(0,r)),e.nonpositive=r=>e.check(fx(0,r)),e.multipleOf=(r,s)=>e.check(zE(r,s)),e.step=(r,s)=>e.check(zE(r,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function dc(e){return eae(oD,e)}const aoe=xe("ZodNumberFormat",(e,t)=>{aie.init(e,t),oD.init(e,t)});function VE(e){return tae(aoe,e)}const ooe=xe("ZodUnknown",(e,t)=>{oie.init(e,t),Wn.init(e,t)});function qE(){return nae(ooe)}const coe=xe("ZodNever",(e,t)=>{cie.init(e,t),Wn.init(e,t)});function loe(e){return rae(coe,e)}const doe=xe("ZodArray",(e,t)=>{lie.init(e,t),Wn.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(pp(n,r)),e.nonempty=n=>e.check(pp(1,n)),e.max=(n,r)=>e.check(sD(n,r)),e.length=(n,r)=>e.check(iD(n,r)),e.unwrap=()=>e.element});function ch(e,t){return mae(doe,e,t)}const uoe=xe("ZodObject",(e,t)=>{uie.init(e,t),Wn.init(e,t),Gt(e,"shape",()=>t.shape),e.keyof=()=>lh(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:qE()}),e.loose=()=>e.clone({...e._zod.def,catchall:qE()}),e.strict=()=>e.clone({...e._zod.def,catchall:loe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>_re(e,n),e.safeExtend=n=>Rre(e,n),e.merge=n=>Are(e,n),e.pick=n=>Tre(e,n),e.omit=n=>Pre(e,n),e.partial=(...n)=>Ire(cD,e,n[0]),e.required=(...n)=>Ore(lD,e,n[0])});function zr(e,t){const n={type:"object",shape:e??{},...et(t)};return new uoe(n)}const hoe=xe("ZodUnion",(e,t)=>{hie.init(e,t),Wn.init(e,t),e.options=t.options});function foe(e,t){return new hoe({type:"union",options:e,...et(t)})}const moe=xe("ZodIntersection",(e,t)=>{fie.init(e,t),Wn.init(e,t)});function poe(e,t){return new moe({type:"intersection",left:e,right:t})}const Z0=xe("ZodEnum",(e,t)=>{mie.init(e,t),Wn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,s)=>{const a={};for(const o of r)if(n.has(o))a[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Z0({...t,checks:[],...et(s),entries:a})},e.exclude=(r,s)=>{const a={...t.entries};for(const o of r)if(n.has(o))delete a[o];else throw new Error(`Key ${o} not found in enum`);return new Z0({...t,checks:[],...et(s),entries:a})}});function lh(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Z0({type:"enum",entries:n,...et(t)})}const goe=xe("ZodLiteral",(e,t)=>{pie.init(e,t),Wn.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function HE(e,t){return new goe({type:"literal",values:Array.isArray(e)?e:[e],...et(t)})}const voe=xe("ZodTransform",(e,t)=>{gie.init(e,t),Wn.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new $O(e.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Mu(a,n.value,t));else{const o=a;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),n.issues.push(Mu(o))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function yoe(e){return new voe({type:"transform",transform:e})}const cD=xe("ZodOptional",(e,t)=>{vie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function WE(e){return new cD({type:"optional",innerType:e})}const xoe=xe("ZodNullable",(e,t)=>{yie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function KE(e){return new xoe({type:"nullable",innerType:e})}const boe=xe("ZodDefault",(e,t)=>{xie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function woe(e,t){return new boe({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():HO(t)}})}const koe=xe("ZodPrefault",(e,t)=>{bie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Soe(e,t){return new koe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():HO(t)}})}const lD=xe("ZodNonOptional",(e,t)=>{wie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Coe(e,t){return new lD({type:"nonoptional",innerType:e,...et(t)})}const Noe=xe("ZodCatch",(e,t)=>{kie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function joe(e,t){return new Noe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Eoe=xe("ZodPipe",(e,t)=>{Sie.init(e,t),Wn.init(e,t),e.in=t.in,e.out=t.out});function GE(e,t){return new Eoe({type:"pipe",in:e,out:t})}const Toe=xe("ZodReadonly",(e,t)=>{Cie.init(e,t),Wn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Poe(e){return new Toe({type:"readonly",innerType:e})}const dD=xe("ZodCustom",(e,t)=>{Nie.init(e,t),Wn.init(e,t)});function _oe(e,t={}){return pae(dD,e,t)}function Roe(e){return gae(e)}function uD(e,t={error:`Input not instance of ${e.name}`}){const n=new dD({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...et(t)});return n._zod.bag.Class=e,n}zr({email:yt().min(1,"El email es requerido").email("Email invlido"),password:yt().min(8,"La contrasea debe tener al menos 8 caracteres")});zr({Email:yt().min(1,"El email es requerido").email("Email invlido"),Password:yt().min(8,"La contrasea debe tener al menos 8 caracteres").regex(/[A-Z]/,"Debe contener al menos una mayscula").regex(/[a-z]/,"Debe contener al menos una minscula").regex(/[0-9]/,"Debe contener al menos un nmero"),PasswordConfirm:yt(),FirstName:yt().min(2,"El nombre debe tener al menos 2 caracteres").max(50,"El nombre no puede exceder 50 caracteres"),LastName1:yt().min(2,"El apellido debe tener al menos 2 caracteres").max(50,"El apellido no puede exceder 50 caracteres"),LastName2:yt().max(50,"El apellido no puede exceder 50 caracteres").optional(),Phone:yt().regex(/^\+?[1-9]\d{1,14}$/,"Nmero de telfono invlido").optional().or(HE("")),DateOfBirth:yt().regex(/^\d{4}-\d{2}-\d{2}$/,"Formato de fecha invlido (YYYY-MM-DD)").optional().or(HE("")),Role:lh(["ADMIN","DOCTOR","PATIENT"]).optional()}).refine(e=>e.Password===e.PasswordConfirm,{message:"Las contraseas no coinciden",path:["PasswordConfirm"]});zr({Email:yt().min(1,"El email es requerido").email("Email invlido")});zr({token:yt().min(1,"Token requerido"),newPassword:yt().min(8,"La contrasea debe tener al menos 8 caracteres").regex(/[A-Z]/,"Debe contener al menos una mayscula").regex(/[a-z]/,"Debe contener al menos una minscula").regex(/[0-9]/,"Debe contener al menos un nmero"),confirmPassword:yt()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Las contraseas no coinciden",path:["confirmPassword"]});zr({PatientUserId:dc().int().positive("ID de paciente debe ser positivo").or(yt().min(1,"ID de paciente requerido")),AppointmentId:dc().int().positive().optional().or(yt().optional()),Diagnosis:yt().min(10,"El diagnstico debe tener al menos 10 caracteres").max(5e3,"El diagnstico no puede exceder 5000 caracteres").optional(),Prescriptions:yt().max(5e3,"Las prescripciones no pueden exceder 5000 caracteres").optional(),Recommendations:yt().max(5e3,"Las recomendaciones no pueden exceder 5000 caracteres").optional(),Files:ch(yt().url("URL de archivo invlida")).optional()});zr({Diagnosis:yt().min(10,"El diagnstico debe tener al menos 10 caracteres").max(5e3,"El diagnstico no puede exceder 5000 caracteres").optional(),Prescriptions:yt().max(5e3,"Las prescripciones no pueden exceder 5000 caracteres").optional(),Recommendations:yt().max(5e3,"Las recomendaciones no pueden exceder 5000 caracteres").optional(),Files:ch(yt().url()).optional()});zr({CertificationDocuments:ch(yt().url("URL de documento invlida")).min(1,"Debe subir al menos 1 documento").max(10,"Mximo 10 documentos permitidos"),Notes:yt().max(1e3,"Las notas no pueden exceder 1000 caracteres").optional()});const Aoe=zr({Action:lh(["approve","reject"],{errorMap:()=>({message:"Accin debe ser 'approve' o 'reject'"})}),AdminNotes:yt().max(1e3,"Las notas del admin no pueden exceder 1000 caracteres").optional(),RejectionReason:yt().optional()}).refine(e=>e.Action==="reject"?e.RejectionReason&&e.RejectionReason.length>=10:!0,{message:"La razn de rechazo debe tener al menos 10 caracteres",path:["RejectionReason"]});zr({patientUserId:dc().int().positive().or(yt().min(1)),doctorUserId:dc().int().positive().or(yt().min(1)),scheduledAt:yt().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/,"Fecha invlida (ISO 8601)"),durationMin:dc().int().min(15,"La duracin mnima es 15 minutos").max(240,"La duracin mxima es 240 minutos"),modality:lh(["VIDEO","IN_PERSON","PHONE"],{errorMap:()=>({message:"Modalidad invlida"})}),reason:yt().max(500).optional(),notes:yt().max(1e3).optional(),slotId:dc().int().optional().or(yt().optional())});zr({status:lh(["PENDING","CONFIRMED","COMPLETED","CANCELLED"],{errorMap:()=>({message:"Estado invlido"})})});zr({content:yt().min(10,"La nota debe tener al menos 10 caracteres").max(2e3,"La nota no puede exceder 2000 caracteres")});zr({PlanId:dc().int().positive().or(yt().min(1,"ID de plan requerido")),PaymentMethodId:yt().optional()});zr({conversationId:yt().min(1,"ID de conversacin requerido"),content:yt().min(1,"El mensaje no puede estar vaco").max(5e3,"El mensaje no puede exceder 5000 caracteres"),language:yt().optional()});zr({file:uD(File,{message:"Archivo invlido"}).refine(e=>e.size<=10*1024*1024,{message:"El archivo no puede exceder 10MB"}).refine(e=>["image/jpeg","image/png","image/jpg","application/pdf"].includes(e.type),{message:"Tipo de archivo no permitido. Solo JPG, PNG y PDF"})});zr({files:ch(uD(File)).min(1,"Debe seleccionar al menos 1 archivo").max(10,"Mximo 10 archivos permitidos").refine(e=>e.every(t=>t.size<=10*1024*1024),{message:"Cada archivo no puede exceder 10MB"}).refine(e=>{const t=["image/jpeg","image/png","image/jpg","application/pdf"];return e.every(n=>t.includes(n.type))},{message:"Tipo de archivo no permitido. Solo JPG, PNG y PDF"})});var Eg="Dialog",[hD,Ele]=Ri(Eg),[Ioe,Oi]=hD(Eg),fD=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=g.useRef(null),u=g.useRef(null),[h,f]=bc({prop:r,defaultProp:s??!1,onChange:a,caller:Eg});return i.jsx(Ioe,{scope:t,triggerRef:l,contentRef:u,contentId:La(),titleId:La(),descriptionId:La(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),modal:o,children:n})};fD.displayName=Eg;var mD="DialogTrigger",Ooe=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Oi(mD,n),a=Ot(t,s.triggerRef);return i.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":d1(s.open),...r,ref:a,onClick:at(e.onClick,s.onOpenToggle)})});Ooe.displayName=mD;var c1="DialogPortal",[Doe,pD]=hD(c1,{forceMount:void 0}),gD=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=Oi(c1,t);return i.jsx(Doe,{scope:t,forceMount:n,children:g.Children.map(r,o=>i.jsx(Qs,{present:n||a.open,children:i.jsx(Op,{asChild:!0,container:s,children:o})}))})};gD.displayName=c1;var gp="DialogOverlay",vD=g.forwardRef((e,t)=>{const n=pD(gp,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Oi(gp,e.__scopeDialog);return a.modal?i.jsx(Qs,{present:r||a.open,children:i.jsx(Loe,{...s,ref:t})}):null});vD.displayName=gp;var Moe=yc("DialogOverlay.RemoveScroll"),Loe=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Oi(gp,n);return i.jsx(Mp,{as:Moe,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(ot.div,{"data-state":d1(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ac="DialogContent",yD=g.forwardRef((e,t)=>{const n=pD(Ac,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Oi(Ac,e.__scopeDialog);return i.jsx(Qs,{present:r||a.open,children:a.modal?i.jsx(Foe,{...s,ref:t}):i.jsx(Uoe,{...s,ref:t})})});yD.displayName=Ac;var Foe=g.forwardRef((e,t)=>{const n=Oi(Ac,e.__scopeDialog),r=g.useRef(null),s=Ot(t,n.contentRef,r);return g.useEffect(()=>{const a=r.current;if(a)return Nb(a)},[]),i.jsx(xD,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(e.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:at(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:at(e.onFocusOutside,a=>a.preventDefault())})}),Uoe=g.forwardRef((e,t)=>{const n=Oi(Ac,e.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return i.jsx(xD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),xD=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=Oi(Ac,n),u=g.useRef(null),h=Ot(t,u);return pb(),i.jsxs(i.Fragment,{children:[i.jsx(Tp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Ep,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":d1(l.open),...o,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(zoe,{titleId:l.titleId}),i.jsx($oe,{contentRef:u,descriptionId:l.descriptionId})]})]})}),l1="DialogTitle",bD=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Oi(l1,n);return i.jsx(ot.h2,{id:s.titleId,...r,ref:t})});bD.displayName=l1;var wD="DialogDescription",kD=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Oi(wD,n);return i.jsx(ot.p,{id:s.descriptionId,...r,ref:t})});kD.displayName=wD;var SD="DialogClose",CD=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Oi(SD,n);return i.jsx(ot.button,{type:"button",...r,ref:t,onClick:at(e.onClick,()=>s.onOpenChange(!1))})});CD.displayName=SD;function d1(e){return e?"open":"closed"}var ND="DialogTitleWarning",[Tle,jD]=J6(ND,{contentName:Ac,titleName:l1,docsSlug:"dialog"}),zoe=({titleId:e})=>{const t=jD(ND),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Boe="DialogDescriptionWarning",$oe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jD(Boe).contentName}}.`;return g.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Voe=fD,qoe=gD,Hoe=vD,Woe=yD,Koe=bD,Goe=kD,Zoe=CD;function ED({...e}){return i.jsx(Voe,{"data-slot":"dialog",...e})}function Joe({...e}){return i.jsx(qoe,{"data-slot":"dialog-portal",...e})}function Yoe({className:e,...t}){return i.jsx(Hoe,{"data-slot":"dialog-overlay",className:St("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function TD({className:e,children:t,...n}){return i.jsxs(Joe,{"data-slot":"dialog-portal",children:[i.jsx(Yoe,{}),i.jsxs(Woe,{"data-slot":"dialog-content",className:St("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,i.jsxs(Zoe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(as,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function PD({className:e,...t}){return i.jsx("div",{"data-slot":"dialog-header",className:St("flex flex-col gap-2 text-center sm:text-left",e),...t})}function _D({className:e,...t}){return i.jsx("div",{"data-slot":"dialog-footer",className:St("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function RD({className:e,...t}){return i.jsx(Koe,{"data-slot":"dialog-title",className:St("text-lg leading-none font-semibold",e),...t})}function AD({className:e,...t}){return i.jsx(Goe,{"data-slot":"dialog-description",className:St("text-muted-foreground text-sm",e),...t})}var u1="Radio",[Qoe,ID]=Ri(u1),[Xoe,ece]=Qoe(u1),OD=g.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:o,value:l="on",onCheck:u,form:h,...f}=e,[p,y]=g.useState(null),x=Ot(t,S=>y(S)),k=g.useRef(!1),b=p?h||!!p.closest("form"):!0;return i.jsxs(Xoe,{scope:n,checked:s,disabled:o,children:[i.jsx(ot.button,{type:"button",role:"radio","aria-checked":s,"data-state":FD(s),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:x,onClick:at(e.onClick,S=>{s||u?.(),b&&(k.current=S.isPropagationStopped(),k.current||S.stopPropagation())})}),b&&i.jsx(LD,{control:p,bubbles:!k.current,name:r,value:l,checked:s,required:a,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});OD.displayName=u1;var DD="RadioIndicator",MD=g.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=ece(DD,n);return i.jsx(Qs,{present:r||a.checked,children:i.jsx(ot.span,{"data-state":FD(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});MD.displayName=DD;var tce="RadioBubbleInput",LD=g.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=g.useRef(null),l=Ot(o,a),u=HT(n),h=AT(t);return g.useEffect(()=>{const f=o.current;if(!f)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==n&&x){const k=new Event("click",{bubbles:r});x.call(f,n),f.dispatchEvent(k)}},[u,n,r]),i.jsx(ot.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});LD.displayName=tce;function FD(e){return e?"checked":"unchecked"}var nce=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Tg="RadioGroup",[rce,Ple]=Ri(Tg,[Bp,ID]),UD=Bp(),zD=ID(),[sce,ice]=rce(Tg),BD=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:o=!1,disabled:l=!1,orientation:u,dir:h,loop:f=!0,onValueChange:p,...y}=e,x=UD(n),k=qu(h),[b,S]=bc({prop:a,defaultProp:s??null,onChange:p,caller:Tg});return i.jsx(sce,{scope:n,name:r,required:o,disabled:l,value:b,onValueChange:S,children:i.jsx(FP,{asChild:!0,...x,orientation:u,dir:k,loop:f,children:i.jsx(ot.div,{role:"radiogroup","aria-required":o,"aria-orientation":u,"data-disabled":l?"":void 0,dir:k,...y,ref:t})})})});BD.displayName=Tg;var $D="RadioGroupItem",VD=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=ice($D,n),o=a.disabled||r,l=UD(n),u=zD(n),h=g.useRef(null),f=Ot(t,h),p=a.value===s.value,y=g.useRef(!1);return g.useEffect(()=>{const x=b=>{nce.includes(b.key)&&(y.current=!0)},k=()=>y.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",k),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",k)}},[]),i.jsx(UP,{asChild:!0,...l,focusable:!o,active:p,children:i.jsx(OD,{disabled:o,required:a.required,checked:p,...u,...s,name:a.name,ref:f,onCheck:()=>a.onValueChange(s.value),onKeyDown:at(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:at(s.onFocus,()=>{y.current&&h.current?.click()})})})});VD.displayName=$D;var ace="RadioGroupIndicator",qD=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=zD(n);return i.jsx(MD,{...s,...r,ref:t})});qD.displayName=ace;var oce=BD,cce=VD,lce=qD;function dce({className:e,...t}){return i.jsx(oce,{"data-slot":"radio-group",className:St("grid gap-3",e),...t})}function ZE({className:e,...t}){return i.jsx(cce,{"data-slot":"radio-group-item",className:St("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(lce,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:i.jsx(L8,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function uce(){const e=Rt(),[t,n]=g.useState(null),[r,s]=g.useState(!1),{data:a,isLoading:o}=hW(),{data:l,isLoading:u}=fW(),{data:h,isLoading:f}=mW(),{data:p}=pW(t||void 0),{mutate:y,isPending:x}=vW(),{register:k,handleSubmit:b,watch:S,reset:N,formState:{errors:E}}=bre({resolver:bae(Aoe),defaultValues:{Action:"approve"}}),j=S("Action"),P=A=>{t&&y({doctorId:t,payload:{Action:A.Action,AdminNotes:A.AdminNotes,RejectionReason:A.RejectionReason}},{onSuccess:()=>{ut.success(A.Action==="approve"?"Verificacin aprobada exitosamente":"Verificacin rechazada"),s(!1),n(null),N()},onError:O=>{ut.error(O.message||"Error al procesar la verificacin")}})},T=A=>{n(A.toString()),s(!0),N()},I=A=>{const O=t===String(A.UserId)?p:null;return i.jsxs(ue,{className:"hover:shadow-md transition-shadow",children:[i.jsx($e,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs(qe,{className:"text-lg flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),A.DoctorName]}),i.jsxs(Yi,{className:"flex flex-col gap-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ll,{className:"h-3 w-3"}),A.Email]}),A.LicenseNumber&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Hx,{className:"h-3 w-3"}),"Licencia: ",A.LicenseNumber]})]})]}),i.jsxs(Oe,{variant:"secondary",children:[i.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Pendiente"]})]})}),i.jsxs(he,{className:"space-y-4",children:[O?.CertificationDocuments&&O.CertificationDocuments.length>0&&i.jsxs("div",{children:[i.jsxs(_e,{className:"text-sm font-semibold mb-2 block",children:[i.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Documentos (",O.CertificationDocuments.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:O.CertificationDocuments.map((M,q)=>i.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open(M,"_blank"),children:[i.jsx(Qf,{className:"h-3 w-3 mr-1"}),"Documento ",q+1]},q))})]}),!O&&i.jsxs("div",{children:[i.jsxs(_e,{className:"text-sm font-semibold mb-2 block",children:[i.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Documentos: ",A.DocumentsCount]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:'Haz clic en "Ver Detalles" para ver los documentos'})]}),O&&i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[O.YearsExperience!==void 0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rN,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"text-xs",children:[O.YearsExperience," aos exp."]})]}),O.LicenseCountry&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pm,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs",children:O.LicenseCountry})]})]}),O?.VerificationNotes&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-sm font-semibold mb-1 block",children:"Notas del Doctor"}),i.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:O.VerificationNotes})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:i.jsxs("p",{children:["Enviado: ",new Date(A.SubmittedAt).toLocaleString("es-CR")]})}),i.jsxs("div",{className:"flex gap-2",children:[!O&&i.jsx($,{className:"flex-1",variant:"outline",onClick:()=>{n(A.UserId.toString())},children:"Ver Detalles"}),i.jsx($,{className:"flex-1",onClick:()=>T(A.UserId),children:"Revisar Verificacin"})]})]})]},String(A.UserId))},_=A=>i.jsxs(ue,{className:"hover:shadow-md transition-shadow",children:[i.jsx($e,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs(qe,{className:"text-lg flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),A.DoctorName]}),i.jsxs(Yi,{className:"flex flex-col gap-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ll,{className:"h-3 w-3"}),A.Email]}),A.LicenseNumber&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Hx,{className:"h-3 w-3"}),"Licencia: ",A.LicenseNumber]}),A.LicenseCountry&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Pm,{className:"h-3 w-3"}),"Pas: ",A.LicenseCountry]})]})]}),i.jsxs(Oe,{variant:A.VerificationStatus==="approved"?"default":A.VerificationStatus==="rejected"?"destructive":"secondary",children:[A.VerificationStatus==="approved"&&i.jsx(Ks,{className:"h-3 w-3 mr-1"}),A.VerificationStatus==="rejected"&&i.jsx(js,{className:"h-3 w-3 mr-1"}),A.VerificationStatus==="pending"&&i.jsx(Nn,{className:"h-3 w-3 mr-1"}),A.VerificationStatus==="approved"?"Aprobado":A.VerificationStatus==="rejected"?"Rechazado":"Pendiente"]})]})}),i.jsxs(he,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[A.MedicalSchool&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(RP,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs",children:A.MedicalSchool})]}),A.YearsExperience!==void 0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rN,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"text-xs",children:[A.YearsExperience," aos de experiencia"]})]})]}),A.CertificationDocuments&&A.CertificationDocuments.length>0&&i.jsxs("div",{children:[i.jsxs(_e,{className:"text-sm font-semibold mb-2 block",children:[i.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Documentos (",A.CertificationDocuments.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.CertificationDocuments.map((O,M)=>i.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open(O,"_blank"),children:[i.jsx(Qf,{className:"h-3 w-3 mr-1"}),"Documento ",M+1]},M))})]}),A.VerificationNotes&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-sm font-semibold mb-1 block",children:"Notas del Doctor"}),i.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:A.VerificationNotes})]}),A.RejectionReason&&i.jsxs(ia,{variant:"destructive",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsxs(aa,{children:[i.jsx("span",{className:"font-semibold",children:"Razn de rechazo:"})," ",A.RejectionReason]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsxs("p",{children:["Enviado: ",new Date(A.SubmittedAt).toLocaleString("es-CR")]}),A.VerifiedAt&&i.jsxs("p",{children:["Verificado: ",new Date(A.VerifiedAt).toLocaleString("es-CR")]}),i.jsxs("p",{children:["Actualizado: ",new Date(A.UpdatedAt).toLocaleString("es-CR")]})]})]})]},String(A.UserId));return i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsxs($,{variant:"outline",onClick:()=>e("/admin-panel"),children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Volver"]})}),i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Panel de Verificaciones"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona las solicitudes de verificacin de doctores"})]}),i.jsxs(Dc,{defaultValue:"pending",className:"space-y-4",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-3",children:[i.jsxs(Sn,{value:"pending",className:"flex items-center gap-2",children:[i.jsx(Nn,{className:"h-4 w-4"}),"Pendientes (",a?.length||0,")"]}),i.jsxs(Sn,{value:"approved",className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"h-4 w-4"}),"Aprobadas (",l?.length||0,")"]}),i.jsxs(Sn,{value:"rejected",className:"flex items-center gap-2",children:[i.jsx(js,{className:"h-4 w-4"}),"Rechazadas (",h?.length||0,")"]})]}),i.jsx(Cn,{value:"pending",className:"space-y-4",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"h-64 w-full"}),i.jsx(Rn,{className:"h-64 w-full"})]}):a&&a.length>0?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(I)}):i.jsx(ue,{children:i.jsxs(he,{className:"py-12 text-center text-muted-foreground",children:[i.jsx(Nn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay verificaciones pendientes"})]})})}),i.jsx(Cn,{value:"approved",className:"space-y-4",children:u?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"h-64 w-full"}),i.jsx(Rn,{className:"h-64 w-full"})]}):l&&l.length>0?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(_)}):i.jsx(ue,{children:i.jsxs(he,{className:"py-12 text-center text-muted-foreground",children:[i.jsx(Ks,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay verificaciones aprobadas"})]})})}),i.jsx(Cn,{value:"rejected",className:"space-y-4",children:f?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"h-64 w-full"}),i.jsx(Rn,{className:"h-64 w-full"})]}):h&&h.length>0?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(_)}):i.jsx(ue,{children:i.jsxs(he,{className:"py-12 text-center text-muted-foreground",children:[i.jsx(js,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay verificaciones rechazadas"})]})})})]}),i.jsx(ED,{open:r,onOpenChange:s,children:i.jsxs(TD,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(PD,{children:[i.jsx(RD,{children:"Revisar Verificacin"}),i.jsxs(AD,{children:["Revisa y aprueba o rechaza la verificacin de"," ",p?.DoctorName]})]}),p&&i.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-lg",children:"Informacin del Doctor"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Nombre Completo"}),i.jsx("p",{className:"font-medium",children:p.DoctorName})]}),i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Email"}),i.jsx("p",{className:"font-medium",children:p.Email})]}),p.LicenseNumber&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Nmero de Licencia"}),i.jsx("p",{className:"font-medium",children:p.LicenseNumber})]}),p.LicenseCountry&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Pas de Licencia"}),i.jsx("p",{className:"font-medium",children:p.LicenseCountry})]}),p.YearsExperience!==void 0&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Aos de Experiencia"}),i.jsxs("p",{className:"font-medium",children:[p.YearsExperience," aos"]})]}),p.MedicalSchool&&i.jsxs("div",{className:"col-span-2",children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Escuela de Medicina"}),i.jsx("p",{className:"font-medium",children:p.MedicalSchool})]})]}),p.Bio&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Biografa"}),i.jsx("p",{className:"text-sm mt-1",children:p.Bio})]}),p.Specialties&&p.Specialties.length>0&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Especialidades"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:p.Specialties.map(A=>i.jsx(Oe,{variant:"secondary",children:A.Name},A.Id))})]}),p.CertificationDocuments&&p.CertificationDocuments.length>0&&i.jsxs("div",{children:[i.jsxs(_e,{className:"text-xs text-muted-foreground mb-2 block",children:["Documentos de Certificacin (",p.CertificationDocuments.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:p.CertificationDocuments.map((A,O)=>i.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(A,"_blank"),children:[i.jsx(Qf,{className:"h-3 w-3 mr-1"}),"Ver Documento ",O+1]},O))})]}),p.VerificationNotes&&i.jsxs("div",{children:[i.jsx(_e,{className:"text-xs text-muted-foreground",children:"Notas del Doctor"}),i.jsx("p",{className:"text-sm bg-background p-3 rounded-md mt-1",children:p.VerificationNotes})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:i.jsxs("p",{children:["Enviado: ",new Date(p.SubmittedAt).toLocaleString("es-CR")]})})]}),i.jsxs("form",{onSubmit:b(P),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(_e,{children:"Accin *"}),i.jsxs(dce,{defaultValue:"approve",onValueChange:A=>{k("Action").onChange({target:{value:A}})},children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ZE,{value:"approve",id:"approve"}),i.jsxs(_e,{htmlFor:"approve",className:"font-normal cursor-pointer",children:[i.jsx(Ks,{className:"h-4 w-4 inline mr-1 text-green-600"}),"Aprobar verificacin"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ZE,{value:"reject",id:"reject"}),i.jsxs(_e,{htmlFor:"reject",className:"font-normal cursor-pointer",children:[i.jsx(js,{className:"h-4 w-4 inline mr-1 text-red-600"}),"Rechazar verificacin"]})]})]}),E.Action&&i.jsx("p",{className:"text-sm text-destructive",children:E.Action.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(_e,{htmlFor:"adminNotes",children:["Notas del Administrador ",j==="approve"&&"(Opcional)"]}),i.jsx(qm,{id:"adminNotes",...k("AdminNotes"),placeholder:"Agregue notas adicionales sobre esta revisin...",rows:3}),E.AdminNotes&&i.jsx("p",{className:"text-sm text-destructive",children:E.AdminNotes.message})]}),j==="reject"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"rejectionReason",children:"Razn de Rechazo *"}),i.jsx(qm,{id:"rejectionReason",...k("RejectionReason"),placeholder:"Explique por qu se rechaza esta verificacin (mnimo 10 caracteres)...",rows:4,className:"border-destructive focus-visible:ring-destructive"}),E.RejectionReason&&i.jsx("p",{className:"text-sm text-destructive",children:E.RejectionReason.message})]}),i.jsxs(_D,{children:[i.jsx($,{type:"button",variant:"outline",onClick:()=>{s(!1),N()},disabled:x,children:"Cancelar"}),i.jsx($,{type:"submit",disabled:x,variant:j==="approve"?"default":"destructive",children:x?"Procesando...":j==="approve"?"Aprobar Verificacin":"Rechazar Verificacin"})]})]})]})})]})}async function hce(e){const t={};e?.role&&e.role!=="ALL"&&(t.role=e.role),e?.verificationStatus&&e.verificationStatus!=="ALL"&&(t.verificationStatus=e.verificationStatus),e?.search&&(t.search=e.search),t.page=e?.page||1,t.limit=e?.limit||20;const{data:n}=await Ue.get("/admin/users",{params:t});return n&&Array.isArray(n.users)?{users:n.users,total:n.total||0,pages:n.pages||1,currentPage:t.page}:Array.isArray(n)?{users:n,total:n.length,pages:1,currentPage:1}:{users:[],total:0,pages:0,currentPage:1}}async function fce(e,t){const{data:n}=await Ue.patch(`/admin/users/${e}`,t);return n}async function mce(e){await Ue.delete(`/admin/users/${e}`)}async function pce(){const{data:e}=await Ue.get("/plans");return Array.isArray(e)?e.map(t=>({id:t.Id,name:t.Name,priceCents:t.PriceCents,currency:t.Currency,featuresJson:t.FeaturesJson||[],maxAppointments:t.MaxAppointments,isActive:t.IsActive,createdAt:t.CreatedAt,formattedPrice:t.FormattedPrice})):[]}async function gce(){const{data:e}=await Ue.post("/plans/seed");return e}async function vce(){const{data:e}=await Ue.get("/specialties");return Array.isArray(e)?e:[]}async function yce(e){const{data:t}=await Ue.post("/specialties",{Name:e});return t}async function xce(e,t){const{data:n}=await Ue.put(`/specialties/${e}`,{Name:t});return n}async function bce(e){const{data:t}=await Ue.delete(`/specialties/${e}`);return t}function wce({onLogout:e}){const t=Rt(),{getDashboardRoute:n}=da(),{data:r,isLoading:s,isError:a}=Yp(),[o,l]=g.useState(!1),[u,h]=g.useState(!1),[f,p]=g.useState(""),[y,x]=g.useState(""),[k,b]=g.useState(""),[S,N]=g.useState(""),[E,j]=g.useState(!1),[P,T]=g.useState(!1),[I,_]=g.useState(!1),[A,O]=g.useState(!1),[M,q]=g.useState(""),[z,G]=g.useState(""),[oe,ke]=g.useState(""),[J,ge]=g.useState(!1),[U,ie]=g.useState(""),[fe,B]=g.useState([]),[te,ee]=g.useState(!1),[ye,Te]=g.useState(""),[ne,K]=g.useState("ALL"),[ce,De]=g.useState("ALL"),[Fe,Xe]=g.useState(null),[He,pt]=g.useState({}),[jt,Kn]=g.useState(1),[ht,qt]=g.useState(1),[vs,Ht]=g.useState(0),[F,W]=g.useState(10),[re,Re]=g.useState(!1),[Pe,je]=g.useState([]),[ze,dt]=g.useState(!1),[be,mt]=g.useState(!1),[_t,un]=g.useState([]),[sn,jn]=g.useState(!1),[ys,pr]=g.useState(!1),[jr,Br]=g.useState(null),[dr,Mn]=g.useState(""),[$r,gr]=g.useState(""),[Er,Vr]=g.useState(!1);g.useEffect(()=>{r&&(N(r.phone??""),p(r.firstName1??""),x(r.lastName1??""),b(r.lastName2??""))},[r]);async function it(){try{l(!0);const lt=[f,y,k].filter(Boolean).join(" ");await ub({fullName:lt||void 0,firstName1:f||void 0,lastName1:y||void 0,lastName2:k||void 0,phone:S||void 0}),h(!1)}catch(pe){console.error(pe)}finally{l(!1)}}function Qt(){r&&(N(r.phone??""),p(r.firstName1??""),x(r.lastName1??""),b(r.lastName2??"")),h(!1)}async function hn(){if(ie(""),!M||!z||!oe){ie("Por favor completa todos los campos");return}if(z.length<8){ie("La nueva contrasea debe tener al menos 8 caracteres");return}if(z!==oe){ie("Las contraseas no coinciden");return}try{ge(!0),await hb(M,z),q(""),G(""),ke(""),O(!1),alert("Contrasea actualizada exitosamente")}catch(pe){ie(pe.response?.data?.message||pe.message||"Error al cambiar la contrasea")}finally{ge(!1)}}async function Ut(pe){try{ee(!0);const lt=typeof pe=="number"?pe:typeof jt=="number"?jt:1,Wt={page:lt,limit:F,...ne!=="ALL"&&{role:ne},...ce!=="ALL"&&{verificationStatus:ce},...ye&&{search:ye}},qr=await hce(Wt);B(qr.users),qt(qr.pages),Ht(qr.total),Kn(lt),Re(!0)}catch(lt){console.error("Error al cargar usuarios:",lt),B([]),qt(1),Ht(0)}finally{ee(!1)}}g.useEffect(()=>{re||Ut(1)},[]),g.useEffect(()=>{re&&Ut(1)},[ye,ne,ce,F]);async function Is(pe){try{await fce(pe,{fullName:He.fullName,email:He.email,phone:He.phone,role:He.role}),await Ut(),Xe(null),pt({}),alert("Usuario actualizado exitosamente")}catch(lt){console.error("Error al actualizar usuario:",lt),alert("Error al actualizar usuario")}}async function an(pe){if(confirm("Ests seguro de eliminar este usuario? Esta accin no se puede deshacer."))try{await mce(pe),await Ut(),alert("Usuario eliminado exitosamente")}catch(lt){console.error("Error al eliminar usuario:",lt),alert("Error al eliminar usuario")}}async function yn(pe,lt){const Wt=lt?"desbanear":"banear";if(confirm(`Ests seguro de ${Wt} este usuario?`))try{if(lt)await Ue.post(`/admin/users/${pe}/unban`);else{const qr=prompt("Ingrese la razn del baneo:");if(!qr)return;await Ue.post(`/admin/users/${pe}/ban`,{Reason:qr})}await Ut(),alert(`Usuario ${Wt}do exitosamente`)}catch(qr){console.error(`Error al ${Wt} usuario:`,qr),alert(`Error al ${Wt} usuario`)}}function Os(pe){Xe(pe.id),pt({...pe})}function fn(){Xe(null),pt({})}const Ln=fe;async function xs(){try{dt(!0);const pe=await pce();je(pe),mt(!0)}catch(pe){console.error("Error al cargar planes:",pe),je([])}finally{dt(!1)}}g.useEffect(()=>{be||xs()},[]);async function ur(){if(confirm("Ests seguro de reinicializar los planes? Esto crear los 3 planes por defecto (Basic, Professional, Premium)."))try{dt(!0);const pe=await gce();alert(pe.message||"Planes inicializados exitosamente"),await xs()}catch(pe){console.error("Error al inicializar planes:",pe),alert(pe.response?.data?.message||"Error al inicializar planes")}finally{dt(!1)}}function ga(pe,lt){const Wt=pe/100;return lt==="USD"?`$${Wt.toFixed(2)}`:`${Wt.toFixed(2)} ${lt}`}async function Di(){try{jn(!0);const pe=await vce();un(pe),pr(!0)}catch(pe){console.error("Error al cargar especialidades:",pe),un([])}finally{jn(!1)}}g.useEffect(()=>{ys||Di()},[]);async function me(){if(!$r.trim()){alert("Por favor ingresa un nombre para la especialidad");return}try{jn(!0),await yce($r.trim()),gr(""),Vr(!1),await Di(),alert("Especialidad creada exitosamente")}catch(pe){console.error("Error al crear especialidad:",pe),alert(pe.response?.data?.message||"Error al crear especialidad")}finally{jn(!1)}}async function tt(pe){if(!dr.trim()){alert("El nombre no puede estar vaco");return}try{jn(!0),await xce(pe,dr.trim()),Br(null),Mn(""),await Di(),alert("Especialidad actualizada exitosamente")}catch(lt){console.error("Error al actualizar especialidad:",lt),alert(lt.response?.data?.message||"Error al actualizar especialidad")}finally{jn(!1)}}async function Tr(pe,lt){if(confirm(`Ests seguro de eliminar la especialidad "${lt}"?

NOTA: Solo se puede eliminar si no hay doctores asociados a esta especialidad.`))try{jn(!0),await bce(pe),await Di(),alert("Especialidad eliminada exitosamente")}catch(Wt){console.error("Error al eliminar especialidad:",Wt);const qr=Wt.response?.data?.message||"Error al eliminar especialidad";qr.includes("associated doctors")?alert("No se puede eliminar esta especialidad porque hay doctores asociados a ella. Por favor, primero reasigna o elimina los doctores."):alert(qr)}finally{jn(!1)}}function Mi(pe){Br(pe.id),Mn(pe.name)}function Ds(){Br(null),Mn("")}const va=(r?.fullName?.[0]??r?.firstName1?.[0]??r?.email?.[0]??"A")?.toUpperCase?.()||"A";return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",onClick:()=>t(n()),children:" Volver"}),i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Configuracin de Administrador"})]}),i.jsxs(Dc,{defaultValue:"profile",className:"space-y-6",children:[i.jsxs(Mc,{className:"grid w-full grid-cols-4",children:[i.jsx(Sn,{value:"profile",children:"Mi Perfil"}),i.jsx(Sn,{value:"users",children:"Usuarios"}),i.jsx(Sn,{value:"specialties",children:"Especialidades"}),i.jsx(Sn,{value:"plans",children:"Planes"})]}),i.jsxs(Cn,{value:"profile",className:"space-y-6",children:[i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"h-5 w-5"}),"Informacin Personal"]}),u?i.jsxs($,{variant:"outline",size:"sm",onClick:Qt,children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancelar"]}):i.jsxs($,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[i.jsx(jo,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),i.jsxs(he,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx(Oa,{className:"h-24 w-24",children:i.jsx(Da,{className:"text-2xl bg-primary/10 text-primary",children:va})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs($,{variant:"outline",children:[i.jsx(Eb,{className:"h-4 w-4 mr-2"}),"Cambiar Foto"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG o GIF. Mximo 5MB."})]})]}),s?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando perfil..."}):a?i.jsx("div",{className:"text-sm text-red-600",children:"No se pudo cargar tu perfil."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"firstName",children:"Nombre"}),i.jsx(Ye,{id:"firstName",value:f,onChange:pe=>p(pe.target.value),placeholder:"Tu nombre",disabled:!u}),!f&&u&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"lastName1",children:"Primer Apellido"}),i.jsx(Ye,{id:"lastName1",value:y,onChange:pe=>x(pe.target.value),placeholder:"Primer apellido",disabled:!u}),!y&&u&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"lastName2",children:"Segundo Apellido"}),i.jsx(Ye,{id:"lastName2",value:k,onChange:pe=>b(pe.target.value),placeholder:"Segundo apellido (opcional)",disabled:!u})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"email",children:"Correo Electrnico"}),i.jsx(Ye,{id:"email",type:"email",value:r?.email??"",readOnly:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"phone",children:"Telfono"}),i.jsx(Ye,{id:"phone",value:S,onChange:pe=>N(pe.target.value),placeholder:"+506 8888 8888",disabled:!u}),!S&&u&&i.jsxs("p",{className:"flex items-center text-xs text-red-500 gap-1",children:[i.jsx(Bn,{className:"w-3 h-3"})," Complete la informacin"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{children:"Rol"}),i.jsx("div",{className:"flex items-center h-10",children:i.jsx(Oe,{className:"bg-purple-600",children:"Administrador"})})]})]}),u&&i.jsxs($,{className:"w-full sm:w-auto",onClick:it,disabled:o||s,children:[i.jsx(_m,{className:"h-4 w-4 mr-2"}),o?"Guardando...":"Guardar Cambios"]})]})]}),i.jsxs(ue,{children:[i.jsx($e,{onClick:()=>O(!A),className:"cursor-pointer select-none",children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tb,{className:"h-5 w-5"}),"Cambiar Contrasea"]}),A?i.jsx(od,{className:"h-5 w-5"}):i.jsx(Ic,{className:"h-5 w-5"})]})}),A&&i.jsxs(he,{className:"space-y-4",children:[U&&i.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:i.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[i.jsx(Bn,{className:"h-4 w-4"}),U]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"currentPassword",children:"Contrasea Actual"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"currentPassword",type:E?"text":"password",placeholder:"",value:M,onChange:pe=>q(pe.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>j(!E),children:E?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"newPassword",children:"Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"newPassword",type:P?"text":"password",placeholder:"",value:z,onChange:pe=>G(pe.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>T(!P),children:P?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Mnimo 8 caracteres"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"confirmPassword",children:"Confirmar Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ye,{id:"confirmPassword",type:I?"text":"password",placeholder:"",value:oe,onChange:pe=>ke(pe.target.value)}),i.jsx($,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>_(!I),children:I?i.jsx(ds,{className:"h-4 w-4"}):i.jsx(Or,{className:"h-4 w-4"})})]})]}),i.jsx($,{onClick:hn,disabled:J,children:J?"Actualizando...":"Actualizar Contrasea"})]})]})]}),i.jsx(Cn,{value:"users",className:"space-y-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Am,{className:"h-5 w-5"}),"Gestin de Usuarios"]}),i.jsxs($,{onClick:()=>Ut(1),size:"sm",children:[i.jsx(zp,{className:"h-4 w-4 mr-2"}),"Cargar Usuarios"]})]})}),i.jsxs(he,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"search",children:"Buscar"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{id:"search",placeholder:"Nombre o email...",value:ye,onChange:pe=>Te(pe.target.value),className:"pl-10"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"roleFilter",children:"Rol"}),i.jsxs("select",{id:"roleFilter",value:ne,onChange:pe=>K(pe.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[i.jsx("option",{value:"ALL",children:"Todos los roles"}),i.jsx("option",{value:"PATIENT",children:"Pacientes"}),i.jsx("option",{value:"DOCTOR",children:"Doctores"}),i.jsx("option",{value:"ADMIN",children:"Administradores"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_e,{htmlFor:"verificationFilter",children:"Verificacin (Doctores)"}),i.jsxs("select",{id:"verificationFilter",value:ce,onChange:pe=>De(pe.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:"pending",children:"Pendiente"}),i.jsx("option",{value:"approved",children:"Aprobado"}),i.jsx("option",{value:"rejected",children:"Rechazado"})]})]})]}),te?i.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Cargando usuarios..."}):Ln.length===0?i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(Am,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"font-medium mb-2",children:"No se encontraron usuarios"}),i.jsx("p",{className:"text-sm",children:'Intenta ajustar los filtros o haz clic en "Cargar Usuarios"'})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mostrando ",Ln.length," de ",vs," usuario(s)"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_e,{htmlFor:"usersPerPage",className:"text-sm",children:"Por pgina:"}),i.jsxs("select",{id:"usersPerPage",value:F,onChange:pe=>W(Number(pe.target.value)),className:"h-9 px-3 rounded-md border border-input bg-background text-sm",children:[i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"20",children:"20"}),i.jsx("option",{value:"50",children:"50"}),i.jsx("option",{value:"100",children:"100"})]})]})]}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-muted/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Rol"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Verificacin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Telfono"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y",children:Ln.map(pe=>i.jsx("tr",{className:"hover:bg-muted/30",children:Fe===pe.id?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx(Ye,{value:He.fullName||"",onChange:lt=>pt({...He,fullName:lt.target.value}),className:"h-8"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Ye,{value:He.email||"",onChange:lt=>pt({...He,email:lt.target.value}),className:"h-8"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("select",{value:He.role||"",onChange:lt=>pt({...He,role:lt.target.value}),className:"h-8 px-2 rounded-md border border-input bg-background",children:[i.jsx("option",{value:"PATIENT",children:"Paciente"}),i.jsx("option",{value:"DOCTOR",children:"Doctor"}),i.jsx("option",{value:"ADMIN",children:"Admin"})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"text-sm text-muted-foreground",children:"No editable"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Ye,{value:He.phone||"",onChange:lt=>pt({...He,phone:lt.target.value}),className:"h-8"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx($,{size:"sm",onClick:()=>Is(pe.id),className:"h-8",children:i.jsx(Ws,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",onClick:fn,className:"h-8",children:i.jsx(as,{className:"h-4 w-4"})})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:pe.fullName||"N/A"}),i.jsx("td",{className:"px-4 py-3 text-sm",children:pe.email||"N/A"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Oe,{className:pe.role==="ADMIN"?"bg-purple-600":pe.role==="DOCTOR"?"bg-blue-600":"bg-green-600",children:pe.role==="ADMIN"?"Admin":pe.role==="DOCTOR"?"Doctor":"Paciente"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(Oe,{className:pe.isEmailVerified?"bg-green-600":"bg-gray-600",children:pe.isEmailVerified?"Email ":"Email "}),pe.role==="DOCTOR"&&pe.verificationStatus&&i.jsx(Oe,{className:pe.verificationStatus==="approved"?"bg-green-600":pe.verificationStatus==="pending"?"bg-yellow-600":"bg-red-600",children:pe.verificationStatus==="approved"?"Aprobado":pe.verificationStatus==="pending"?"Pendiente":"Rechazado"})]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:pe.phone||"N/A"}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx($,{size:"sm",variant:"outline",onClick:()=>Os(pe),children:i.jsx(jo,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",onClick:()=>yn(pe.id,pe.isBanned||!1),title:pe.isBanned?"Desbanear usuario":"Banear usuario",children:pe.isBanned?i.jsx(Ws,{className:"h-4 w-4"}):i.jsx(g8,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",onClick:()=>an(pe.id),className:"text-red-600 hover:bg-red-50",children:i.jsx(Nu,{className:"h-4 w-4"})})]})})]})},pe.id))})]})})}),ht>1&&i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Pgina ",jt," de ",ht]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($,{variant:"outline",size:"sm",onClick:()=>Ut(1),disabled:jt===1||te,title:"Primera pgina",children:i.jsx(P8,{className:"h-4 w-4"})}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>Ut(jt-1),disabled:jt===1||te,title:"Pgina anterior",children:i.jsx(TP,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ht)},(pe,lt)=>{let Wt;return ht<=5||jt<=3?Wt=lt+1:jt>=ht-2?Wt=ht-4+lt:Wt=jt-2+lt,i.jsx($,{variant:jt===Wt?"default":"outline",size:"sm",onClick:()=>Ut(Wt),disabled:te,className:"min-w-[2.5rem]",children:Wt},Wt)})}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>Ut(jt+1),disabled:jt===ht||te,title:"Pgina siguiente",children:i.jsx(PP,{className:"h-4 w-4"})}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>Ut(ht),disabled:jt===ht||te,title:"ltima pgina",children:i.jsx(R8,{className:"h-4 w-4"})})]})]})]})]})]})}),i.jsx(Cn,{value:"specialties",className:"space-y-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ul,{className:"h-5 w-5"}),"Gestin de Especialidades"]}),i.jsxs($,{onClick:()=>Vr(!0),disabled:sn||Er,size:"sm",children:[i.jsx(Do,{className:"h-4 w-4 mr-2"}),"Nueva Especialidad"]})]})}),i.jsxs(he,{className:"space-y-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Administra las especialidades mdicas disponibles en la plataforma."}),sn&&!ys?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Tf,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando especialidades..."})]}):i.jsxs("div",{className:"space-y-4",children:[Er&&i.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ye,{placeholder:"Nombre de la especialidad...",value:$r,onChange:pe=>gr(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"?me():pe.key==="Escape"&&(Vr(!1),gr(""))},disabled:sn,autoFocus:!0}),i.jsx($,{onClick:me,disabled:sn||!$r.trim(),size:"sm",children:i.jsx(Ws,{className:"h-4 w-4"})}),i.jsx($,{variant:"outline",onClick:()=>{Vr(!1),gr("")},disabled:sn,size:"sm",children:i.jsx(as,{className:"h-4 w-4"})})]})}),_t.length===0?i.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[i.jsx(Ul,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"font-medium mb-2",children:"No hay especialidades configuradas"}),i.jsx("p",{className:"text-sm mb-4",children:"Crea la primera especialidad para comenzar."}),i.jsxs($,{onClick:()=>Vr(!0),children:[i.jsx(Do,{className:"h-4 w-4 mr-2"}),"Crear Primera Especialidad"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total de especialidades: ",i.jsx("strong",{children:_t.length})]}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-muted/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"ID"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y",children:_t.map(pe=>i.jsx("tr",{className:"hover:bg-muted/30",children:jr===pe.id?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:pe.id}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Ye,{value:dr,onChange:lt=>Mn(lt.target.value),onKeyDown:lt=>{lt.key==="Enter"?tt(pe.id):lt.key==="Escape"&&Ds()},disabled:sn,className:"h-8",autoFocus:!0})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx($,{size:"sm",onClick:()=>tt(pe.id),disabled:sn||!dr.trim(),className:"h-8",children:i.jsx(Ws,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",onClick:Ds,disabled:sn,className:"h-8",children:i.jsx(as,{className:"h-4 w-4"})})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:pe.id}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:pe.name}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx($,{size:"sm",variant:"outline",onClick:()=>Mi(pe),disabled:sn,children:i.jsx(jo,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",onClick:()=>Tr(pe.id,pe.name),disabled:sn,className:"text-red-600 hover:bg-red-50",children:i.jsx(Nu,{className:"h-4 w-4"})})]})})]})},pe.id))})]})})}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Bn,{className:"h-4 w-4 text-yellow-600"}),"Informacin sobre la gestin de especialidades"]}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6 list-disc",children:[i.jsx("li",{children:"Las especialidades pueden ser creadas, editadas y eliminadas directamente desde aqu"}),i.jsx("li",{children:"Solo se pueden eliminar especialidades que no tengan doctores asociados"}),i.jsx("li",{children:"Los nombres de especialidades deben ser nicos"}),i.jsx("li",{children:"Presiona Enter para guardar o Escape para cancelar al editar"})]})]})]})]})]})]})}),i.jsx(Cn,{value:"plans",className:"space-y-6",children:i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Su,{className:"h-5 w-5"}),"Gestin de Planes de Suscripcin"]}),i.jsxs($,{onClick:ur,disabled:ze,variant:"outline",size:"sm",children:[i.jsx(Tf,{className:`h-4 w-4 mr-2 ${ze?"animate-spin":""}`}),"Reinicializar Planes"]})]})}),i.jsx(he,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualiza los planes de suscripcin disponibles para los pacientes. Los planes son gestionados mediante el sistema de seed."}),ze&&!be?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Tf,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando planes..."})]}):Pe.length===0?i.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[i.jsx(Su,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"font-medium mb-2",children:"No hay planes configurados"}),i.jsx("p",{className:"text-sm mb-4",children:"Inicializa los planes por defecto para comenzar."}),i.jsxs($,{onClick:ur,disabled:ze,children:[i.jsx(Tf,{className:"h-4 w-4 mr-2"}),"Crear Planes Por Defecto"]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Pe.map(pe=>i.jsxs(ue,{className:`relative ${pe.isActive?"":"opacity-60"}`,children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-lg",children:pe.name}),pe.isActive?i.jsxs(Oe,{className:"bg-green-600",children:[i.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Activo"]}):i.jsxs(Oe,{variant:"secondary",children:[i.jsx(js,{className:"h-3 w-3 mr-1"}),"Inactivo"]})]})}),i.jsxs(he,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-4 border-b",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx(Cu,{className:"h-6 w-6 text-primary"}),i.jsx("span",{className:"text-3xl font-bold text-primary",children:ga(pe.priceCents,pe.currency)})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"por mes"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:pe.maxAppointments===null?"Citas ilimitadas":`Hasta ${pe.maxAppointments} citas/mes`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-medium",children:"Caractersticas:"}),i.jsx("ul",{className:"space-y-1.5",children:pe.featuresJson.map((lt,Wt)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[i.jsx(Ws,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-muted-foreground",children:lt})]},Wt))})]}),i.jsxs("div",{className:"pt-3 border-t text-xs text-muted-foreground space-y-1",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"ID:"})," ",String(pe.id)]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Creado:"})," ",new Date(pe.createdAt).toLocaleDateString("es-ES")]})]})]})]},String(pe.id)))}),i.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Bn,{className:"h-4 w-4 text-yellow-600"}),"Informacin sobre la gestin de planes"]}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6 list-disc",children:[i.jsx("li",{children:"Los planes son gestionados mediante el sistema de seed del backend"}),i.jsx("li",{children:"Actualmente no es posible editar o eliminar planes individuales"}),i.jsx("li",{children:'El botn "Reinicializar Planes" crear los 3 planes por defecto: Basic ($0), Professional ($29.99), Premium ($99.99)'}),i.jsxs("li",{children:["Total de planes configurados: ",i.jsx("strong",{children:Pe.length})]}),i.jsxs("li",{children:["Planes activos: ",i.jsx("strong",{children:Pe.filter(pe=>pe.isActive).length})]})]})]})]})]})})]})})]}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cerrar Sesin"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cierra la sesin en este dispositivo"})]}),i.jsxs($,{variant:"outline",onClick:e,children:[i.jsx(_b,{className:"h-4 w-4 mr-2"}),"Cerrar Sesin"]})]})})})]})})}function kce(e,t){return Jt({queryKey:["doctors","approved",e,t],queryFn:async()=>(await Ue.get("/doctors/approved",{params:{...e&&{search:e},...t&&{specialtyId:t}}})).data})}function Sce(e,t,n){return Jt({queryKey:["doctors",e,"available-slots",t,n],queryFn:async()=>{if(!e)throw new Error("Doctor ID is required");return(await Ue.get(`/doctors/${e}/available-slots`,{params:{...t&&{startDate:t},...n&&{endDate:n}}})).data},enabled:!!e})}function HD(){return Jt({queryKey:["specialties"],queryFn:async()=>(await Ue.get("/specialties")).data.map(n=>({id:n.Id,name:n.Name})),staleTime:1e3*60*60})}function Cce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.post("/specialties",t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["specialties"]})}})}function Nce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.put(`/specialties/${t.id}`,{Name:t.Name})).data,onSuccess:()=>{e.invalidateQueries({queryKey:["specialties"]})}})}function jce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.delete(`/specialties/${t}`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["specialties"]})}})}function Ece(){const e=Rt(),[t,n]=g.useState(""),[r,s]=g.useState(""),[a,o]=g.useState(""),{data:l}=HD(),{data:u,isLoading:h,error:f}=kce(r,a),p=()=>{s(t)},y=x=>{x.key==="Enter"&&p()};return i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"ghost",onClick:()=>e("/patient-dashboard"),children:i.jsx(is,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Agendar Nueva Cita"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Busca y selecciona un mdico para tu consulta"})]})]}),i.jsx(ue,{children:i.jsxs(he,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Fl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),i.jsx("input",{type:"text",placeholder:"Buscar mdicos por nombre...",value:t,onChange:x=>n(x.target.value),onKeyPress:y,className:"w-full pl-10 pr-4 py-3 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),i.jsxs($,{className:"bg-primary hover:bg-primary/90",onClick:p,disabled:h,children:[h?i.jsx(rn,{className:"h-5 w-5 mr-2 animate-spin"}):i.jsx(Fl,{className:"h-5 w-5 mr-2"}),"Buscar"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zp,{className:"h-5 w-5 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium text-foreground",children:"Filtrar por especialidad:"}),i.jsxs("div",{className:"flex-1 flex gap-2 flex-wrap",children:[i.jsx($,{variant:a===""?"default":"outline",size:"sm",onClick:()=>o(""),children:"Todas"}),l?.map(x=>i.jsx($,{variant:a===x.id?"default":"outline",size:"sm",onClick:()=>o(x.id),children:x.name},x.id))]}),a&&i.jsx($,{variant:"ghost",size:"sm",onClick:()=>o(""),className:"text-muted-foreground hover:text-foreground",children:i.jsx(as,{className:"h-4 w-4"})})]})]})}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"text-xl text-foreground",children:["Mdicos Disponibles",u&&u.length>0&&i.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",u.length," ",u.length===1?"mdico":"mdicos",")"]})]})}),i.jsx(he,{children:h?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-spin"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando mdicos..."})]}):f?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bt,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600",children:"Error al cargar los mdicos"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Por favor, intenta nuevamente"})]}):!u||u.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(fs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:r?"No se encontraron mdicos con ese criterio de bsqueda":"No hay mdicos disponibles en este momento"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Intenta con otro trmino de bsqueda"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(x=>i.jsx(ue,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-primary",onClick:()=>e(`/nueva-cita/${x.userId}`),children:i.jsxs(he,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Dr. ",x.firstName," ",x.lastName]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:x.email})]}),i.jsx(fs,{className:"h-10 w-10 text-primary bg-primary/10 rounded-full p-2"})]}),x.specialties&&x.specialties.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:x.specialties.map(k=>i.jsx(Oe,{className:"bg-blue-50 text-blue-700 hover:bg-blue-100",children:k.name},k.id))}),i.jsxs("div",{className:"space-y-2 text-sm",children:[x.yearsExperience&&i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(RP,{className:"h-4 w-4"}),i.jsxs("span",{children:[x.yearsExperience," aos de experiencia"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(Rb,{className:"h-4 w-4"}),i.jsxs("span",{children:["Licencia: ",x.licenseCountry]})]})]}),x.bio&&i.jsx("div",{className:"pt-3 border-t",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(nn,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:x.bio})]})}),i.jsxs($,{className:"w-full bg-primary hover:bg-primary/90",children:[i.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Agendar Cita"]})]})},x.userId))})})]})]})})}function WD(e){return Jt({queryKey:["conversations",e,"messages"],queryFn:async()=>e?(await Ue.get(`/conversations/${e}/messages`)).data:[],enabled:!!e,refetchInterval:3e3})}function KD(){const e=Nr();return Sr({mutationFn:async t=>{const n={Content:t.content};return t.language&&(n.Language=t.language),(await Ue.post(`/conversations/${t.conversationId}/messages`,n)).data},onSuccess:async(t,n)=>{await e.refetchQueries({queryKey:["conversations",n.conversationId,"messages"]}),e.invalidateQueries({queryKey:["conversations","mine"]})}})}function Tce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.post(`/conversations/with-doctor/${t}`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["conversations","mine"]})}})}function Pce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.post(`/conversations/with-patient/${t}`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["conversations","mine"]})}})}const _ce=e=>{const t=e.replace("Z","");return new Date(t)};async function Rce(){try{const e=await Ue.get("/appointments/all",{params:{limit:1e3,order:"desc"}}),t=Array.isArray(e.data?.data)?e.data.data:Array.isArray(e.data)?e.data:[],n=new Map;return t.forEach(s=>{const a=s.doctor?.id||s.DoctorUserId,o=s.doctor?.name||"Mdico",l=s.doctor?.specialty||"General";if(!a)return;const u=s.scheduledAt?_ce(s.scheduledAt):void 0;if(n.has(a)){const h=n.get(a);h.appointmentCount++,u&&(!h.lastAppointmentDate||u>h.lastAppointmentDate)&&(h.lastAppointmentDate=u)}else n.set(a,{name:o,specialty:l,appointmentCount:1,lastAppointmentDate:u})}),Array.from(n.entries()).map(([s,a])=>({id:s,name:a.name,specialty:a.specialty,appointmentCount:a.appointmentCount,lastAppointmentDate:a.lastAppointmentDate?.toISOString()})).sort((s,a)=>s.lastAppointmentDate?a.lastAppointmentDate?new Date(a.lastAppointmentDate).getTime()-new Date(s.lastAppointmentDate).getTime():-1:1)}catch(e){return console.error("Error fetching doctors with appointments:",e),[]}}function Ace(){return Jt({queryKey:["patient","doctors-with-appointments"],queryFn:Rce,staleTime:6e4,refetchOnWindowFocus:!1})}function Ice(){const e=jp();if(!e)return null;try{const t=JSON.parse(atob(e.split(".")[1]));return t.sub?String(t.sub):null}catch{return null}}function Oce(){const e=Rt(),[t,n]=g.useState(null),[r,s]=g.useState(null),[a,o]=g.useState(""),l=g.useRef(null),{data:u,isLoading:h}=Ace(),f=Tce(),{data:p,isLoading:y}=WD(r),x=KD(),k=()=>{l.current?.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{k()},[p]);const b=async j=>{n(j),s(null);try{const P=await f.mutateAsync(j);s(P.id)}catch(P){ut.error("Error al cargar la conversacin",{description:P.response?.data?.message||"Por favor, intenta nuevamente"}),n(null)}},S=async()=>{if(!(!a.trim()||!r))try{await x.mutateAsync({conversationId:r,content:a}),o("")}catch(j){ut.error("Error al enviar mensaje",{description:j.response?.data?.message||"Por favor, intenta nuevamente"})}},N=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),S())},E=u?.find(j=>j.id===t);return i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"ghost",onClick:()=>e(-1),children:i.jsx(is,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mensajes"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Conversaciones con tus mdicos"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(ue,{className:"lg:col-span-1",children:[i.jsx($e,{children:i.jsxs(qe,{className:"text-lg text-foreground",children:["Mis Mdicos",u&&u.length>0&&i.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",u.length,")"]})]})}),i.jsx(he,{className:"space-y-2 max-h-[600px] overflow-y-auto",children:h?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rn,{className:"h-8 w-8 text-muted-foreground mx-auto mb-3 animate-spin"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Cargando mdicos..."})]}):!u||u.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ul,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"No tienes mdicos an"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Los mdicos aparecern aqu despus de agendar tu primera cita"}),i.jsx($,{className:"mt-4",onClick:()=>e("/nueva-cita"),children:"Agendar cita"})]}):u.map(j=>i.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${t===j.id?"bg-primary/10 border-2 border-primary":"bg-accent hover:bg-accent/80 border-2 border-transparent"}`,onClick:()=>b(j.id),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:i.jsx(Ul,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm text-foreground truncate",children:j.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:j.specialty}),i.jsx("div",{className:"flex items-center gap-2 mt-1",children:i.jsxs(Oe,{variant:"secondary",className:"text-xs",children:[j.appointmentCount," ",j.appointmentCount===1?"cita":"citas"]})})]})]})},j.id))})]}),i.jsxs(ue,{className:"lg:col-span-2",children:[i.jsx($e,{className:"border-b",children:i.jsx(qe,{className:"text-lg text-foreground",children:E?`${E.name} - ${E.specialty}`:"Selecciona un mdico"})}),i.jsx(he,{className:"h-[600px] flex flex-col p-0",children:t?f.isPending?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(rn,{className:"h-8 w-8 text-primary animate-spin mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Cargando conversacin..."})]})}):y?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(rn,{className:"h-8 w-8 text-primary animate-spin"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!p||p.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"No hay mensajes an. Enva el primero!"})}):p.map(j=>{const P=Ice(),T=P&&j.senderUserId===P,I=j.translation&&j.translationLanguage;return i.jsx("div",{className:`flex ${T?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${T?"bg-green-600 text-white":"bg-accent text-foreground"}`,children:[!T&&i.jsx("p",{className:"text-xs font-semibold mb-1 opacity-70",children:j.senderName}),i.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:I?j.translation:j.content}),I&&i.jsx("p",{className:`text-xs mt-2 pt-2 border-t italic whitespace-pre-wrap break-words ${T?"text-white/60 border-white/20":"text-muted-foreground/60 border-border/30"}`,children:j.content}),i.jsx("p",{className:`text-xs mt-1 ${T?"text-white/70":"text-muted-foreground"}`,children:new Date(j.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})},j.id)}),i.jsx("div",{ref:l})]}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",placeholder:"Escribe un mensaje...",value:a,onChange:j=>o(j.target.value),onKeyPress:N,className:"flex-1 px-4 py-2 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),i.jsx($,{onClick:S,disabled:!a.trim()||x.isPending,className:"bg-primary hover:bg-primary/90",children:x.isPending?i.jsx(rn,{className:"h-5 w-5 animate-spin"}):i.jsx(Wu,{className:"h-5 w-5"})})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Oc,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Selecciona un mdico para iniciar una conversacin"})]})})})]})]})]})})}function Dce(e=1,t=10,n="desc"){return Jt({queryKey:["appointments","all",e,t,n],queryFn:async()=>(await Ue.get("/appointments/all",{params:{page:e,limit:t,order:n}})).data,refetchOnWindowFocus:!1})}function Mce(e=20){return Jt({queryKey:["appointments","cancelled",e],queryFn:async()=>(await Ue.get("/appointments/cancelled",{params:{limit:e}})).data,refetchOnWindowFocus:!1})}function Lce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.post("/appointments",t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["appointments"]})}})}function Fce(){const e=Nr();return Sr({mutationFn:async t=>(await Ue.patch(`/appointments/${t.id}/cancel`,{CancelReason:t.cancelReason})).data,onSuccess:()=>{e.invalidateQueries({queryKey:["appointments"]})}})}function Uce(){const e=Rt(),[t,n]=g.useState("upcoming"),[r,s]=g.useState(1),[a,o]=g.useState("desc"),[l,u]=g.useState(null),[h,f]=g.useState(!1),[p,y]=g.useState(null),[x,k]=g.useState(""),[b,S]=g.useState(null),{data:N,isLoading:E}=Dce(r,100,a),{data:j,isLoading:P}=Mce(100),T=Fce(),I=N?.data||[],_=N?.pagination,A=ne=>{const K=ne.replace("Z","");return new Date(K)},O=ne=>{const K=new Date,ce=[],De=[];return ne.forEach(Fe=>{if(Fe.status==="CANCELLED")return;const Xe=A(Fe.scheduledAt),He=Fe.durationMin||30;new Date(Xe.getTime()+He*6e4)>K?ce.push(Fe):De.push(Fe)}),{upcoming:ce,past:De}},{upcoming:M,past:q}=O(I),z=()=>{switch(t){case"all":return{data:I,loading:E};case"upcoming":return{data:M,loading:E};case"past":return{data:q,loading:E};case"cancelled":return{data:j||[],loading:P};default:return{data:[],loading:!1}}},{data:G,loading:oe}=z(),ke=ne=>{n(ne),s(1)},J=()=>{o(a==="desc"?"asc":"desc"),s(1)},ge=ne=>{const K=A(ne),ce=K.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),De=K.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0});return{date:ce,time:De}},U=ne=>{if(ne.statusName)return ne.statusName;const K=ne.status;switch(K){case"CONFIRMED":return"Confirmada";case"PENDING":return"Pendiente";case"COMPLETED":return"Completada";case"CANCELLED":return"Cancelada";case"RESCHEDULED":return"Reprogramada";case"NO_SHOW":return"No asisti";default:return K}},ie=ne=>{const K=ne.status,ce=U(ne);switch(K){case"CONFIRMED":return i.jsx(Oe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:ce});case"PENDING":return i.jsx(Oe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:ce});case"COMPLETED":return i.jsx(Oe,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:ce});case"CANCELLED":return i.jsx(Oe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:ce});case"RESCHEDULED":return i.jsx(Oe,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:ce});case"NO_SHOW":return i.jsx(Oe,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:ce});default:return i.jsx(Oe,{variant:"outline",children:ce})}},fe=ne=>{y(ne),k(""),f(!0)},B=async()=>{if(p)try{await T.mutateAsync({id:p,cancelReason:x.trim()||void 0}),ut.success("Cita cancelada exitosamente"),f(!1),y(null),k("")}catch(ne){ut.error("Error al cancelar la cita",{description:ne.response?.data?.message||"Por favor, intenta nuevamente"})}},te=ne=>{const K=ne.status;if(K!=="PENDING"&&K!=="CONFIRMED")return!1;const ce=new Date;return!(A(ne.scheduledAt)<ce)},ee=ne=>{u(l===ne?null:ne)},ye=async ne=>{S(ne);try{const K=await Ue.get(`/appointments/${ne}/video/token`);if(K.data&&K.data.token&&K.data.roomName){const{token:ce,roomName:De}=K.data,Fe=`https://live-kit-meet-sable.vercel.app/?token=${encodeURIComponent(ce)}&room=${encodeURIComponent(De)}`;window.open(Fe,"_blank")}else K.data&&K.data.url?window.open(K.data.url,"_blank"):ut.error("No se puede unir a la videollamada",{description:"Faltan datos de la sala de video."})}catch(K){console.error("Error al obtener token de video:",K),ut.error("No se puede unir a la videollamada",{description:K.response?.data?.message||"El doctor an no ha iniciado la sala. Intenta nuevamente en unos momentos."})}finally{S(null)}},Te=ne=>{if(ne.modality?.toLowerCase()!=="online")return{canJoin:!1,reason:"not_online"};const K=new Date,ce=A(ne.scheduledAt),De=new Date(ce.getTime()-300*1e3);return K>=De?{canJoin:!0}:{canJoin:!1,reason:"too_early",minutesUntilStart:Math.ceil((ce.getTime()-K.getTime())/6e4)}};return i.jsxs("div",{className:"min-h-screen bg-background p-6",children:[i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"ghost",onClick:()=>e("/patient-dashboard"),children:i.jsx(is,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mis Citas"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Revisa todas tus consultas programadas"})]})]}),i.jsxs($,{className:"bg-primary hover:bg-primary/90",onClick:()=>e("/nueva-cita"),children:[i.jsx(Do,{className:"h-5 w-5 mr-2"}),"Nueva Cita"]})]}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx($,{variant:t==="upcoming"?"default":"outline",onClick:()=>ke("upcoming"),className:t==="upcoming"?"bg-primary":"",children:"Prximas"}),i.jsx($,{variant:t==="past"?"default":"outline",onClick:()=>ke("past"),className:t==="past"?"bg-primary":"",children:"Pasadas"}),i.jsx($,{variant:t==="cancelled"?"default":"outline",onClick:()=>ke("cancelled"),className:t==="cancelled"?"bg-primary":"",children:"Canceladas"}),i.jsx($,{variant:t==="all"?"default":"outline",onClick:()=>ke("all"),className:t==="all"?"bg-primary":"",children:"Todas"})]}),t==="all"&&i.jsxs($,{variant:"outline",onClick:J,className:"gap-2",children:[i.jsx(f8,{className:"h-4 w-4"}),a==="desc"?"Ms recientes":"Ms antiguas"]})]})})}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"text-xl text-foreground flex items-center justify-between",children:[i.jsxs("span",{children:[t==="all"&&"Todas las Citas",t==="upcoming"&&"Prximas Citas",t==="past"&&"Citas Pasadas",t==="cancelled"&&"Citas Canceladas"]}),!oe&&i.jsxs(Oe,{variant:"secondary",children:[G.length," cita",G.length!==1?"s":""]})]})}),i.jsxs(he,{children:[oe?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-muted-foreground",children:"Cargando citas..."})}):G.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsxs("p",{className:"text-muted-foreground mb-4",children:[t==="all"&&"No tienes citas registradas",t==="upcoming"&&"No tienes citas prximas",t==="past"&&"No tienes citas pasadas",t==="cancelled"&&"No tienes citas canceladas"]}),(t==="upcoming"||t==="all")&&i.jsxs($,{className:"bg-primary hover:bg-primary/90",onClick:()=>e("/nueva-cita"),children:[i.jsx(Do,{className:"h-5 w-5 mr-2"}),"Agendar Nueva Cita"]})]}):i.jsx("div",{className:"space-y-4",children:G.map(ne=>{const{date:K,time:ce}=ge(ne.scheduledAt),De=ne.modality?.toLowerCase()==="online",Fe=l===ne.id;return i.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:De?i.jsx(vi,{className:"h-6 w-6 text-primary"}):i.jsx(Rb,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-lg text-foreground",children:ne.doctor?.name||"Mdico"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:ne.doctor?.specialty||"General"}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Bt,{className:"h-4 w-4"}),i.jsx("span",{children:K})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:ce})]}),ne.durationMin&&i.jsxs("span",{children:[" ",ne.durationMin," min"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[ie(ne),t==="upcoming"&&De&&(()=>{const Xe=Te(ne),He=b===ne.id;return Xe.canJoin?i.jsxs($,{className:"bg-primary hover:bg-primary/90",onClick:()=>ye(ne.id),disabled:He,children:[i.jsx(vi,{className:"h-4 w-4 mr-2"}),He?"Verificando...":"Unirse"]}):Xe.reason==="too_early"?i.jsxs($,{disabled:!0,variant:"outline",className:"cursor-not-allowed",title:"Podrs unirte 5 minutos antes de la cita",children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),Xe.minutesUntilStart,"min"]}):null})(),i.jsx($,{variant:"outline",onClick:()=>ee(ne.id),children:Fe?i.jsxs(i.Fragment,{children:[i.jsx(od,{className:"h-4 w-4 mr-2"}),"Ocultar"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ic,{className:"h-4 w-4 mr-2"}),"Gestionar"]})})]})]}),Fe&&i.jsx("div",{className:"border-t bg-muted/30",children:i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(fs,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"Informacin del Doctor"})]}),i.jsxs("div",{className:"pl-6 space-y-1 text-sm text-muted-foreground",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Nombre:"})," ",ne.doctor?.name||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Especialidad:"})," ",ne.doctor?.specialty||"General"]}),ne.doctor?.email&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Email:"})," ",ne.doctor.email]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(nn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"Detalles de la Cita"})]}),i.jsxs("div",{className:"pl-6 space-y-1 text-sm text-muted-foreground",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Modalidad:"})," ",De?"Videollamada":"Presencial"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Duracin:"})," ",ne.durationMin||30," minutos"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Estado:"})," ",U(ne)]}),ne.appointmentType&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Tipo:"})," ",ne.appointmentType]})]})]}),ne.costCents&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Cu,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"Informacin de Pago"})]}),i.jsx("div",{className:"pl-6 space-y-1 text-sm text-muted-foreground",children:i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Costo:"})," $",(ne.costCents/100).toFixed(2)]})})]}),(ne.notes||ne.cancelReason)&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Oc,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"Notas"})]}),i.jsxs("div",{className:"pl-6 space-y-1 text-sm text-muted-foreground",children:[ne.notes&&i.jsx("p",{className:"text-foreground",children:ne.notes}),ne.cancelReason&&i.jsxs("p",{className:"text-red-600",children:[i.jsx("span",{className:"font-medium",children:"Motivo de cancelacin:"})," ",ne.cancelReason]})]})]})]}),i.jsx("div",{className:"pt-4 border-t flex justify-end gap-3",children:te(ne)&&i.jsxs($,{variant:"destructive",onClick:()=>fe(ne.id),disabled:T.isPending,children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancelar Cita"]})})]})})]},ne.id)})}),t==="all"&&_&&_.totalPages>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",(_.page-1)*_.limit+1," - ",Math.min(_.page*_.limit,_.total)," de ",_.total," citas"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs($,{variant:"outline",size:"sm",onClick:()=>s(ne=>Math.max(1,ne-1)),disabled:r===1,children:[i.jsx(TP,{className:"h-4 w-4"}),"Anterior"]}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,_.totalPages)},(ne,K)=>{let ce;return _.totalPages<=5||r<=3?ce=K+1:r>=_.totalPages-2?ce=_.totalPages-4+K:ce=r-2+K,i.jsx($,{variant:r===ce?"default":"outline",size:"sm",onClick:()=>s(ce),className:r===ce?"bg-primary":"",children:ce},ce)})}),i.jsxs($,{variant:"outline",size:"sm",onClick:()=>s(ne=>Math.min(_.totalPages,ne+1)),disabled:r===_.totalPages,children:["Siguiente",i.jsx(PP,{className:"h-4 w-4"})]})]})]})]})]})]}),i.jsx(ED,{open:h,onOpenChange:f,children:i.jsxs(TD,{children:[i.jsxs(PD,{children:[i.jsx(RD,{children:"Cancelar Cita"}),i.jsx(AD,{children:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]}),i.jsx("div",{className:"space-y-4 py-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"cancel-reason",className:"text-sm font-medium text-foreground",children:"Motivo de cancelacin (opcional)"}),i.jsx(Ye,{id:"cancel-reason",placeholder:"Ej: Conflicto de horario, problemas de salud, etc.",value:x,onChange:ne=>k(ne.target.value),className:"w-full"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Proporcionar un motivo ayuda al mdico a entender mejor tu situacin."})]})}),i.jsxs(_D,{children:[i.jsx($,{variant:"outline",onClick:()=>{f(!1),y(null),k("")},disabled:T.isPending,children:"No, mantener cita"}),i.jsx($,{variant:"destructive",onClick:B,disabled:T.isPending,children:T.isPending?i.jsx(i.Fragment,{children:"Cancelando..."}):i.jsxs(i.Fragment,{children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"S, cancelar cita"]})})]})]})})]})}function zce(){const e=Rt(),{doctorId:t}=xp(),[n,r]=g.useState(null),s="online",a=()=>{const j=new Date,P=j.getFullYear(),T=String(j.getMonth()+1).padStart(2,"0"),I=String(j.getDate()).padStart(2,"0");return`${P}-${T}-${I}`},[o,l]=g.useState(a()),u=j=>{const P=j.replace("Z","");return new Date(P)},f=(()=>{const j=new Date;j.setHours(0,0,0,0);const P=new Date(j);return P.setDate(P.getDate()+30),{startDate:j.toISOString().split("T")[0],endDate:P.toISOString().split("T")[0]}})(),{data:p,isLoading:y,error:x}=Sce(t,f.startDate,f.endDate);console.log("AgendarCitaDoctor - Backend response:",{doctor:p?.doctor,slotsCount:p?.slots?.length||0,slots:p?.slots,selectedDate:o,dateRange:f,currentTime:new Date().toISOString(),currentLocalTime:new Date().toLocaleString("es-CR",{timeZone:"America/Costa_Rica"})});const k=p?.slots.filter(j=>{const P=u(j.startAt),T=new Date(o+"T00:00:00"),I=new Date,_=P.getFullYear()===T.getFullYear()&&P.getMonth()===T.getMonth()&&P.getDate()===T.getDate(),A=P>I;return _&&A})||[],b=Lce(),S=k.reduce((j,P)=>{const T=u(P.startAt).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return j[T]||(j[T]=[]),j[T].push(P),j},{}),N=j=>{r(j)},E=async()=>{if(!(!n||!t))try{await b.mutateAsync({DoctorUserId:Number(t),SlotId:Number(n),Modality:s}),ut.success("Cita agendada exitosamente!",{description:"Puedes ver los detalles en 'Mis Citas'"}),setTimeout(()=>{e("/mis-citas")},1500)}catch(j){ut.error("Error al agendar la cita",{description:j.response?.data?.message||"Por favor, intenta nuevamente"})}};return i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"ghost",onClick:()=>e("/nueva-cita"),children:i.jsx(is,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Seleccionar Horario"}),p?.doctor&&i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Dr. ",p.doctor.name]})]})]}),i.jsx(ue,{children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-foreground",children:"Filtrar por fecha"}),i.jsx(Ye,{type:"date",value:o,onChange:j=>l(j.target.value),min:a()})]}),i.jsx($,{variant:"outline",onClick:()=>l(a()),children:"Hoy"})]})})}),y?i.jsx(ue,{children:i.jsx(he,{className:"p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(rn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-spin"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando horarios disponibles..."})]})})}):x?i.jsx(ue,{children:i.jsx(he,{className:"p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Bt,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600",children:"Error al cargar los horarios"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Por favor, intenta nuevamente"})]})})}):!p?.slots||p.slots.length===0?i.jsx(ue,{children:i.jsx(he,{className:"p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Bt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"No hay horarios disponibles en este momento"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Este doctor no tiene espacios disponibles para los prximos 30 das"}),i.jsx($,{className:"mt-4",variant:"outline",onClick:()=>e("/nueva-cita"),children:"Buscar otro doctor"})]})})}):k.length===0?i.jsx(ue,{children:i.jsx(he,{className:"p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Bt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"No hay horarios disponibles para la fecha seleccionada"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Intenta seleccionar otra fecha"}),i.jsx($,{className:"mt-4",variant:"outline",onClick:()=>l(a()),children:"Ver hoy"})]})})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-4",children:S&&Object.entries(S).map(([j,P])=>i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"text-lg text-foreground capitalize",children:[i.jsx(Bt,{className:"h-5 w-5 inline mr-2"}),j]})}),i.jsx(he,{children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:P.map(T=>{const I=u(T.startAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),_=u(T.endAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),A=n===T.id;return i.jsxs($,{variant:A?"default":"outline",className:`flex flex-col items-center justify-center h-20 ${A?"bg-primary text-white":"hover:bg-primary/10"}`,onClick:()=>N(T.id),children:[i.jsx(Nn,{className:"h-4 w-4 mb-1"}),i.jsx("span",{className:"font-semibold",children:I}),i.jsx("span",{className:"text-xs opacity-80",children:_}),A&&i.jsx(Oo,{className:"h-4 w-4 mt-1"})]},T.id)})})})]},j))}),n&&i.jsx(ue,{className:"border-2 border-primary",children:i.jsxs(he,{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Horario seleccionado"}),i.jsx("p",{className:"text-lg font-semibold text-foreground",children:(()=>{const j=p.slots.find(T=>T.id===n);return j?.startAt?u(j.startAt).toLocaleString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Modalidad de consulta"}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary/10 rounded-lg border border-primary/20",children:[i.jsx(Oe,{className:"bg-primary text-white",children:"En lnea"}),i.jsx("span",{className:"text-sm text-foreground",children:"La consulta se realizar por videollamada"})]})]}),i.jsx($,{className:"w-full bg-primary hover:bg-primary/90",onClick:E,disabled:b.isPending,children:b.isPending?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Agendando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Confirmar Cita"]})})]})})]})]})})}function Bce(){const e=Rt(),[t,n]=g.useState(!1),[r,s]=g.useState(""),[a,o]=g.useState(null),[l,u]=g.useState(""),{data:h,isLoading:f}=HD(),p=Cce(),y=Nce(),x=jce(),k=async()=>{if(!r.trim()){ut.error("El nombre de la especialidad es requerido");return}try{await p.mutateAsync({Name:r.trim()}),ut.success("Especialidad creada exitosamente"),s(""),n(!1)}catch(j){ut.error("Error al crear especialidad",{description:j.response?.data?.message||"Por favor, intenta nuevamente"})}},b=async j=>{if(!l.trim()){ut.error("El nombre de la especialidad es requerido");return}try{await y.mutateAsync({id:j,Name:l.trim()}),ut.success("Especialidad actualizada exitosamente"),o(null),u("")}catch(P){ut.error("Error al actualizar especialidad",{description:P.response?.data?.message||"Por favor, intenta nuevamente"})}},S=async(j,P)=>{if(window.confirm(`Ests seguro de eliminar la especialidad "${P}"?

Nota: No podrs eliminarla si tiene doctores asociados.`))try{await x.mutateAsync(j),ut.success("Especialidad eliminada exitosamente")}catch(T){ut.error("Error al eliminar especialidad",{description:T.response?.data?.message||"Por favor, intenta nuevamente"})}},N=j=>{o(j.id),u(j.name)},E=()=>{o(null),u("")};return i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"ghost",onClick:()=>e("/admin-panel"),children:i.jsx(is,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gestin de Especialidades"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Administra las especialidades mdicas del sistema"})]})]}),i.jsxs($,{className:"bg-primary hover:bg-primary/90",onClick:()=>n(!0),disabled:t,children:[i.jsx(Do,{className:"h-5 w-5 mr-2"}),"Nueva Especialidad"]})]}),t&&i.jsx(ue,{className:"border-2 border-primary",children:i.jsx(he,{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Nombre de la Especialidad"}),i.jsx("input",{type:"text",value:r,onChange:j=>s(j.target.value),placeholder:"Ej: Cardiologa",className:"w-full mt-2 px-4 py-3 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{className:"flex-1 bg-primary hover:bg-primary/90",onClick:k,disabled:p.isPending,children:p.isPending?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Creando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Crear"]})}),i.jsxs($,{variant:"outline",onClick:()=>{n(!1),s("")},disabled:p.isPending,children:[i.jsx(as,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]})})}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"text-xl text-foreground",children:["Especialidades Registradas",h&&i.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",h.length," ",h.length===1?"especialidad":"especialidades",")"]})]})}),i.jsx(he,{children:f?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-spin"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando especialidades..."})]}):!h||h.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-muted-foreground",children:"No hay especialidades registradas"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Crea la primera especialidad usando el botn superior"})]}):i.jsx("div",{className:"space-y-2",children:h.map(j=>i.jsx("div",{className:"flex items-center justify-between p-4 border border-input rounded-lg hover:bg-accent/50 transition-colors",children:a===j.id?i.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[i.jsx("input",{type:"text",value:l,onChange:P=>u(P.target.value),className:"flex-1 px-3 py-2 bg-background border border-input rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0}),i.jsx($,{size:"sm",onClick:()=>b(j.id),disabled:y.isPending,children:y.isPending?i.jsx(rn,{className:"h-4 w-4 animate-spin"}):i.jsx(Ws,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",onClick:E,disabled:y.isPending,children:i.jsx(as,{className:"h-4 w-4"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{className:"bg-blue-50 text-blue-700",children:j.name}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["ID: ",j.id]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{size:"sm",variant:"outline",onClick:()=>N(j),children:i.jsx(jo,{className:"h-4 w-4"})}),i.jsx($,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>S(j.id,j.name),disabled:x.isPending,children:x.isPending?i.jsx(rn,{className:"h-4 w-4 animate-spin"}):i.jsx(Nu,{className:"h-4 w-4"})})]})]})},j.id))})})]})]})})}async function $ce(e,t){const n={};e&&(n.startDate=e),t&&(n.endDate=t);const{data:r}=await Ue.get("/appointments/doctor/by-date",{params:n});return Array.isArray(r)?r:[]}function Vce(){const e=Rt(),t=()=>{const _=new Date,A=_.getFullYear(),O=String(_.getMonth()+1).padStart(2,"0"),M=String(_.getDate()).padStart(2,"0");return`${A}-${O}-${M}`},n=_=>{const A=_.replace("Z","");return new Date(A)},[r,s]=g.useState(t()),[a,o]=g.useState(""),[l,u]=g.useState(null),[h,f]=g.useState(null),{data:p,isLoading:y,refetch:x}=Jt({queryKey:["doctor","appointments","by-date",r],queryFn:()=>$ce(r,r),staleTime:2e4}),k=(p??[]).filter(_=>a.trim()===""||(_.patient?.name||"").toLowerCase().includes(a.toLowerCase())),b=_=>{if(_.statusName)return _.statusName;const A=_.status;switch(A){case"CONFIRMED":return"Confirmada";case"PENDING":return"Pendiente";case"COMPLETED":return"Completada";case"CANCELLED":return"Cancelada";case"NO_SHOW":return"No asisti";default:return A}},S=_=>{const A=_.status,O=b(_);switch(A){case"PENDING":return i.jsx(Oe,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:O});case"CONFIRMED":return i.jsx(Oe,{className:"bg-blue-100 text-blue-800 border-blue-300",children:O});case"COMPLETED":return i.jsx(Oe,{className:"bg-green-100 text-green-800 border-green-300",children:O});case"CANCELLED":return i.jsx(Oe,{className:"bg-red-100 text-red-800 border-red-300",children:O});case"NO_SHOW":return i.jsx(Oe,{className:"bg-gray-100 text-gray-800 border-gray-300",children:O});default:return i.jsx(Oe,{variant:"secondary",children:O})}},N=_=>{switch(_){case"online":return i.jsx(vi,{className:"h-4 w-4"});case"onsite":return i.jsx(Rb,{className:"h-4 w-4"});case"phone":return i.jsx(Ab,{className:"h-4 w-4"});default:return i.jsx(vi,{className:"h-4 w-4"})}},E=_=>{switch(_){case"online":return"Videollamada";case"onsite":return"Presencial";case"phone":return"Telfono";default:return _}},j=async(_,A)=>{try{await Ue.patch(`/appointments/${_}/status`,{Status:A}),ut.success("Estado actualizado exitosamente"),x()}catch(O){console.error("Error al cambiar el estado de la cita:",O),ut.error("Error al actualizar el estado",{description:O.response?.data?.message||"Por favor, intenta nuevamente"})}},P=_=>{u(l===_?null:_)},T=async _=>{f(_);try{const A=await Ue.get(`/appointments/${_}/video/token`);if(A.data&&A.data.token&&A.data.roomName){const{token:O,roomName:M}=A.data,q=`https://live-kit-meet-sable.vercel.app/?token=${encodeURIComponent(O)}&room=${encodeURIComponent(M)}`;window.open(q,"_blank")}else A.data&&A.data.url?window.open(A.data.url,"_blank"):ut.error("No se puede unir a la videollamada",{description:"Faltan datos de la sala de video."})}catch(A){console.error("Error al obtener token de video:",A),ut.error("No se puede unir a la videollamada",{description:A.response?.data?.message||"No se pudo crear la sala de video. Intenta nuevamente."})}finally{f(null)}},I=_=>{if(_.modality?.toLowerCase()!=="online")return{canJoin:!1,reason:"not_online"};if(_.status!=="CONFIRMED")return{canJoin:!1,reason:"not_confirmed"};const A=new Date,O=n(_.scheduledAt),M=new Date(O.getTime()-300*1e3),q=_.durationMin||30,z=new Date(O.getTime()+q*60*1e3);return A<M?{canJoin:!1,reason:"too_early",minutesUntilStart:Math.ceil((M.getTime()-A.getTime())/6e4)}:A>z?{canJoin:!1,reason:"finished"}:{canJoin:!0}};return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",size:"icon",onClick:()=>e("/doctor-dashboard"),children:i.jsx(is,{className:"h-4 w-4"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Gestin de Citas"}),i.jsx("p",{className:"text-muted-foreground",children:"Administra y filtra tus citas mdicas"})]})]})}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(zp,{className:"h-5 w-5"}),"Filtros"]})}),i.jsx(he,{children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fecha"}),i.jsx(Ye,{type:"date",value:r,onChange:_=>s(_.target.value),className:"w-full"})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx($,{variant:"outline",onClick:()=>s(t()),children:"Hoy"}),i.jsx($,{variant:"outline",onClick:()=>{const _=new Date;_.setDate(_.getDate()+1);const A=_.getFullYear(),O=String(_.getMonth()+1).padStart(2,"0"),M=String(_.getDate()).padStart(2,"0");s(`${A}-${O}-${M}`)},children:"Maana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar paciente"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{type:"text",placeholder:"Buscar por nombre del paciente...",value:a,onChange:_=>o(_.target.value),className:"pl-10"})]})]})]})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"h-5 w-5"}),"Citas del ",new Date(r+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),i.jsxs(Oe,{variant:"secondary",children:[k.length," citas"]})]})}),i.jsxs(he,{className:"space-y-4",children:[y&&i.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Cargando citas..."}),!y&&k.length===0&&i.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No hay citas para esta fecha."}),k.map(_=>{const A=l===_.id;return i.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all",children:[i.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fs,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-semibold",children:_.patient?.name||"Paciente sin nombre"}),S(_)]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Nn,{className:"h-4 w-4"}),n(_.scheduledAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[N(_.modality),E(_.modality)]}),i.jsxs("div",{children:[_.durationMin," min"]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[_.modality==="online"&&_.status==="CONFIRMED"&&(()=>{const O=I(_),M=h===_.id;return O.canJoin?i.jsxs($,{size:"sm",className:"bg-primary hover:bg-primary/90",onClick:()=>T(_.id),disabled:M,children:[i.jsx(vi,{className:"h-4 w-4 mr-2"}),M?"Verificando...":"Unirse"]}):O.reason==="too_early"?i.jsxs($,{size:"sm",disabled:!0,variant:"outline",className:"cursor-not-allowed",title:"Podrs unirte 5 minutos antes de la cita",children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),O.minutesUntilStart,"min"]}):null})(),i.jsx($,{size:"sm",variant:"outline",onClick:()=>P(_.id),children:A?i.jsxs(i.Fragment,{children:[i.jsx(od,{className:"h-4 w-4 mr-2"}),"Ocultar"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ic,{className:"h-4 w-4 mr-2"}),"Gestionar"]})})]})]})}),A&&i.jsx("div",{className:"border-t bg-muted/30",children:i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(fs,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"Informacin del Paciente"})]}),i.jsxs("div",{className:"pl-6 space-y-1 text-sm text-muted-foreground",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Nombre:"})," ",_.patient?.name||"No especificado"]}),_.patient?.email&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ll,{className:"h-3 w-3"}),i.jsx("span",{children:_.patient.email})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(nn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"Detalles de la Cita"})]}),i.jsxs("div",{className:"pl-6 space-y-1 text-sm text-muted-foreground",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Modalidad:"})," ",E(_.modality)]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Duracin:"})," ",_.durationMin," minutos"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Estado:"})," ",b(_)]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Hora:"})," ",n(_.scheduledAt).toLocaleString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]})]})]}),i.jsxs("div",{className:"pt-4 border-t",children:[i.jsx("p",{className:"text-sm font-medium mb-3",children:"Gestionar cita"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.status==="PENDING"&&i.jsxs(i.Fragment,{children:[i.jsxs($,{size:"sm",className:"gap-2 bg-green-600 hover:bg-green-700",onClick:()=>j(_.id,"CONFIRMED"),children:[i.jsx(Oo,{className:"h-4 w-4"}),"Aprobar Cita"]}),i.jsxs($,{size:"sm",variant:"destructive",className:"gap-2",onClick:()=>j(_.id,"CANCELLED"),children:[i.jsx(js,{className:"h-4 w-4"}),"Rechazar"]})]}),_.status==="CONFIRMED"&&i.jsxs(i.Fragment,{children:[_.modality==="online"&&(()=>{const O=I(_),M=h===_.id;return O.canJoin?i.jsxs($,{size:"sm",className:"gap-2 bg-primary hover:bg-primary/90",onClick:()=>T(_.id),disabled:M,children:[i.jsx(vi,{className:"h-4 w-4"}),M?"Verificando...":"Unirse a videollamada"]}):O.reason==="too_early"?i.jsxs($,{size:"sm",disabled:!0,variant:"outline",className:"gap-2 cursor-not-allowed",title:"Podrs unirte 5 minutos antes de la cita",children:[i.jsx(Nn,{className:"h-4 w-4"}),O.minutesUntilStart,"min"]}):null})(),i.jsxs($,{size:"sm",className:"gap-2 bg-green-600 hover:bg-green-700",onClick:()=>j(_.id,"COMPLETED"),children:[i.jsx(Oo,{className:"h-4 w-4"}),"Marcar Completada"]}),i.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>j(_.id,"NO_SHOW"),children:[i.jsx(js,{className:"h-4 w-4"}),"Paciente no asisti"]})]}),(_.status==="COMPLETED"||_.status==="CANCELLED"||_.status==="NO_SHOW")&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Esta cita ya ha sido ",_.status==="COMPLETED"?"completada":_.status==="CANCELLED"?"cancelada":"marcada como no asistida","."]})]})]})]})})]},_.id)})]})]})]})})}async function qce(e,t){const n={},{data:r}=await Ue.get("/doctors/me/availability",{params:n});return Array.isArray(r)?r:[]}async function Hce(e){const{data:t}=await Ue.post("/doctors/me/availability",e);return t}async function Wce(e){await Ue.delete(`/availability/${e}`)}function Kce(){const e=Rt(),t=Nr(),n=()=>{const z=new Date,G=z.getFullYear(),oe=String(z.getMonth()+1).padStart(2,"0"),ke=String(z.getDate()).padStart(2,"0");return`${G}-${oe}-${ke}`},r=z=>{const G=z.replace("Z","");return new Date(G)},[s,a]=g.useState(""),[o,l]=g.useState(""),[u,h]=g.useState("30"),[f,p]=g.useState(n()),[y,x]=g.useState(1),k=9,{data:b,isLoading:S}=Jt({queryKey:["availability","mine"],queryFn:()=>qce(),staleTime:3e4}),N=Sr({mutationFn:Hce,onSuccess:()=>{t.invalidateQueries({queryKey:["availability","mine"]}),ut.success("Disponibilidad creada exitosamente"),a(""),l(""),h("30")},onError:z=>{ut.error("Error al crear disponibilidad",{description:z.response?.data?.message||"Por favor, intenta nuevamente"})}}),E=Sr({mutationFn:Wce,onSuccess:()=>{t.invalidateQueries({queryKey:["availability","mine"]}),ut.success("Disponibilidad eliminada")},onError:z=>{ut.error("Error al eliminar disponibilidad",{description:z.response?.data?.message||"Por favor, intenta nuevamente"})}}),j=()=>{if(!s||!o){ut.error("Por favor completa todos los campos");return}const z=new Date(`${s}T${o}:00`),G=new Date(z);G.setMinutes(G.getMinutes()+parseInt(u));const oe=ge=>{const U=ge.getTimezoneOffset();return new Date(ge.getTime()-U*6e4).toISOString()},ke=oe(z),J=oe(G);console.log("Creating slot:",{StartAt:ke,EndAt:J,selectedDate:s,startTime:o,localTime:`${s}T${o}:00`}),N.mutate({StartAt:ke,EndAt:J})},P=z=>{confirm("Ests seguro de eliminar esta disponibilidad?")&&E.mutate(z)},T=(b??[]).filter(z=>{if(!f)return!0;const G=r(z.StartAt),oe=new Date(f+"T00:00:00");return G.getFullYear()===oe.getFullYear()&&G.getMonth()===oe.getMonth()&&G.getDate()===oe.getDate()}).sort((z,G)=>r(z.StartAt).getTime()-r(G.StartAt).getTime()),I=Math.ceil(T.length/k),_=(y-1)*k,A=_+k,O=T.slice(_,A),M=z=>{p(z),x(1)},q=()=>{p(n()),x(1)};return i.jsx("div",{className:"min-h-screen bg-background p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"outline",size:"icon",onClick:()=>e("/doctor-dashboard"),children:i.jsx(is,{className:"h-4 w-4"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Gestin de Disponibilidad"}),i.jsx("p",{className:"text-muted-foreground",children:"Crea y administra tus horarios disponibles para citas"})]})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center gap-2",children:[i.jsx(Do,{className:"h-5 w-5"}),"Crear Nueva Disponibilidad"]})}),i.jsx(he,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fecha"}),i.jsx(Ye,{type:"date",value:s,onChange:z=>a(z.target.value),min:n()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Hora de inicio"}),i.jsx(Ye,{type:"time",value:o,onChange:z=>l(z.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Duracin"}),i.jsxs("select",{value:u,onChange:z=>h(z.target.value),className:"w-full px-3 py-2 bg-background border border-input rounded-md text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[i.jsx("option",{value:"30",children:"30 minutos"}),i.jsx("option",{value:"45",children:"45 minutos"}),i.jsx("option",{value:"60",children:"1 hora"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs($,{onClick:j,disabled:N.isPending,className:"w-full",children:[N.isPending?i.jsx(rn,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Do,{className:"h-4 w-4 mr-2"}),"Crear"]})})]})})]}),i.jsxs(ue,{children:[i.jsx($e,{children:i.jsxs(qe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"h-5 w-5"}),"Mi Disponibilidad"]}),T.length>0&&i.jsxs(Oe,{variant:"secondary",children:[T.length," slot",T.length!==1?"s":""]})]})}),i.jsxs(he,{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pb-4 border-b",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filtrar por fecha"}),i.jsx(Ye,{type:"date",value:f,onChange:z=>M(z.target.value),placeholder:"Selecciona una fecha"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx($,{variant:"outline",onClick:q,children:"Hoy"})})]}),S?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rn,{className:"h-8 w-8 text-muted-foreground mx-auto mb-3 animate-spin"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Cargando disponibilidad..."})]}):!b||b.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground",children:"No tienes disponibilidad creada an"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Crea tu primera disponibilidad usando el formulario de arriba"})]}):T.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground",children:"No hay disponibilidad para la fecha seleccionada"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Intenta seleccionar otra fecha o limpia el filtro"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:O.map(z=>{const G=r(z.StartAt),oe=r(z.EndAt),ke=Math.round((oe.getTime()-G.getTime())/6e4),J=(z.IsBooked===!0||z.AppointmentStatus)&&z.AppointmentStatus!=="CANCELLED";return i.jsx(ue,{className:`border-l-4 ${J?"border-l-blue-500":"border-l-green-500"}`,children:i.jsx(he,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:G.toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"font-medium",children:[G.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})," - ",oe.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs(Oe,{variant:"secondary",children:[ke," minutos"]}),J?i.jsx(Oe,{className:"bg-blue-600 hover:bg-blue-700",children:"Agendada"}):i.jsx(Oe,{className:"bg-green-600 hover:bg-green-700",children:"Disponible"})]})]}),!J&&i.jsx($,{variant:"ghost",size:"icon",onClick:()=>P(z.Id),disabled:E.isPending,children:i.jsx(Nu,{className:"h-4 w-4 text-destructive"})})]})})},z.Id)})}),I>1&&i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6 pt-6 border-t",children:[i.jsx($,{variant:"outline",size:"sm",onClick:()=>x(z=>Math.max(1,z-1)),disabled:y===1,children:"Anterior"}),i.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:I},(z,G)=>G+1).map(z=>i.jsx($,{variant:y===z?"default":"outline",size:"sm",onClick:()=>x(z),className:"w-10",children:z},z))}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>x(z=>Math.min(I,z+1)),disabled:y===I,children:"Siguiente"})]})]})]})]})]})})}const Gce=e=>{const t=e.replace("Z","");return new Date(t)};async function Zce(){try{const e=await Ue.get("/appointments/all",{params:{limit:1e3,order:"desc"}}),t=Array.isArray(e.data?.data)?e.data.data:Array.isArray(e.data)?e.data:[],n=new Map;return t.forEach(s=>{const a=s.patient?.id||s.patient?.Id||s.PatientUserId;let o="Paciente";s.patient?.name?o=s.patient.name:s.patient?.FirstName&&(o=`${s.patient.FirstName} ${s.patient.LastName1||""} ${s.patient.LastName2||""}`.trim());const l=s.patient?.email||s.patient?.Email||"";if(!a)return;const u=s.scheduledAt?Gce(s.scheduledAt):void 0;if(n.has(a)){const h=n.get(a);h.appointmentCount++,u&&(!h.lastAppointmentDate||u>h.lastAppointmentDate)&&(h.lastAppointmentDate=u)}else n.set(a,{name:o,email:l,appointmentCount:1,lastAppointmentDate:u})}),Array.from(n.entries()).map(([s,a])=>({id:s,name:a.name,email:a.email,appointmentCount:a.appointmentCount,lastAppointmentDate:a.lastAppointmentDate?.toISOString()})).sort((s,a)=>s.lastAppointmentDate?a.lastAppointmentDate?new Date(a.lastAppointmentDate).getTime()-new Date(s.lastAppointmentDate).getTime():-1:1)}catch(e){return console.error("Error fetching patients with appointments:",e),[]}}function Jce(){return Jt({queryKey:["doctor","patients-with-appointments"],queryFn:Zce,staleTime:6e4,refetchOnWindowFocus:!1})}function Yce(){const e=jp();if(!e)return null;try{const t=JSON.parse(atob(e.split(".")[1]));return t.sub?String(t.sub):null}catch{return null}}function Qce(){const e=Rt(),[t,n]=g.useState(null),[r,s]=g.useState(null),[a,o]=g.useState(""),l=g.useRef(null),{data:u,isLoading:h}=Jce(),f=Pce(),{data:p,isLoading:y}=WD(r),x=KD(),k=()=>{l.current?.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{k()},[p]);const b=async j=>{n(j),s(null);try{const P=await f.mutateAsync(j);s(P.id)}catch(P){ut.error("Error al cargar la conversacin",{description:P.response?.data?.message||"Por favor, intenta nuevamente"}),n(null)}},S=async()=>{if(!(!a.trim()||!r))try{await x.mutateAsync({conversationId:r,content:a}),o("")}catch(j){ut.error("Error al enviar mensaje",{description:j.response?.data?.message||"Por favor, intenta nuevamente"})}},N=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),S())},E=u?.find(j=>j.id===t);return i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx($,{variant:"ghost",onClick:()=>e(-1),children:i.jsx(is,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mensajes"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Conversaciones con tus pacientes"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(ue,{className:"lg:col-span-1",children:[i.jsx($e,{children:i.jsxs(qe,{className:"text-lg text-foreground",children:["Mis Pacientes",u&&u.length>0&&i.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",u.length,")"]})]})}),i.jsx(he,{className:"space-y-2 max-h-[600px] overflow-y-auto",children:h?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(rn,{className:"h-8 w-8 text-muted-foreground mx-auto mb-3 animate-spin"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Cargando pacientes..."})]}):!u||u.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(fs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"No tienes pacientes an"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Los pacientes aparecern aqu despus de tu primera cita"})]}):u.map(j=>i.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${t===j.id?"bg-primary/10 border-2 border-primary":"bg-accent hover:bg-accent/80 border-2 border-transparent"}`,onClick:()=>b(j.id),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:i.jsx(fs,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm text-foreground truncate",children:j.name}),i.jsx("p",{className:"text-xs text-muted-foreground truncate",children:j.email}),i.jsx("div",{className:"flex items-center gap-2 mt-1",children:i.jsxs(Oe,{variant:"secondary",className:"text-xs",children:[j.appointmentCount," ",j.appointmentCount===1?"cita":"citas"]})})]})]})},j.id))})]}),i.jsxs(ue,{className:"lg:col-span-2",children:[i.jsx($e,{className:"border-b",children:i.jsx(qe,{className:"text-lg text-foreground",children:E?E.name:"Selecciona un paciente"})}),i.jsx(he,{className:"h-[600px] flex flex-col p-0",children:t?f.isPending?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(rn,{className:"h-8 w-8 text-primary animate-spin mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Cargando conversacin..."})]})}):y?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(rn,{className:"h-8 w-8 text-primary animate-spin"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!p||p.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"No hay mensajes an. Enva el primero!"})}):p.map(j=>{const P=Yce(),T=P&&j.senderUserId===P,I=j.translation&&j.translationLanguage;return i.jsx("div",{className:`flex ${T?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[70%] rounded-lg p-3",style:{backgroundColor:T?"#2563eb":"#f3f4f6",color:T?"#ffffff":"#000000"},children:[!T&&i.jsx("p",{className:"text-xs font-semibold mb-1",style:{opacity:.7},children:j.senderName}),i.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",style:{color:"inherit"},children:I?j.translation:j.content}),I&&i.jsx("p",{className:"text-xs mt-2 pt-2 border-t italic whitespace-pre-wrap break-words",style:{color:T?"rgba(255,255,255,0.6)":"rgba(100,100,100,0.6)",borderColor:T?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.2)"},children:j.content}),i.jsx("p",{className:"text-xs mt-1",style:{opacity:.7},children:new Date(j.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})},j.id)}),i.jsx("div",{ref:l})]}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",placeholder:"Escribe un mensaje...",value:a,onChange:j=>o(j.target.value),onKeyPress:N,className:"flex-1 px-4 py-2 bg-background border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),i.jsx($,{onClick:S,disabled:!a.trim()||x.isPending,className:"bg-primary hover:bg-primary/90",children:x.isPending?i.jsx(rn,{className:"h-5 w-5 animate-spin"}):i.jsx(Wu,{className:"h-5 w-5"})})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Oc,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Selecciona un paciente para iniciar una conversacin"})]})})})]})]})]})})}function Xce(){const[e,t]=g.useState(null),[n,r]=g.useState(null),[s,a]=g.useState(!0),o=Rt(),l=Pi(),u=x=>x==="doctor"?"/doctor-dashboard":x==="admin"?"/admin-panel":x==="patient"?"/patient-dashboard":"/",h=async x=>{t(x);try{const k=await Sm();r(k)}catch{}o(u(x))},f=()=>{t(null),r(null),localStorage.removeItem("access_token"),o("/")},p=n?.id?typeof n.id=="string"?Number(n.id):n.id:0,y=n?.fullName||[n?.firstName1,n?.lastName1,n?.lastName2].filter(Boolean).join(" ")||"Paciente";return g.useEffect(()=>{if(!localStorage.getItem("access_token")){a(!1);return}(async()=>{try{const k=await Sm();r(k);const b=String(k.role??"").toUpperCase(),S=b==="DOCTOR"?"doctor":b==="ADMIN"?"admin":"patient";t(S),(l.pathname==="/"||l.pathname==="/login")&&o(u(S),{replace:!0})}catch{localStorage.removeItem("access_token")}finally{a(!1)}})()},[]),s?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:"Cargando..."})}):i.jsxs(RF,{currentUser:e,children:[i.jsx(i6,{position:"top-right",richColors:!0}),i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs(MM,{children:[i.jsx(It,{path:"/",element:i.jsx(AF,{})}),i.jsx(It,{path:"/login",element:i.jsx(Pq,{onLogin:h})}),i.jsx(It,{path:"/forgot-password",element:i.jsx(_q,{})}),i.jsx(It,{path:"/reset-password",element:i.jsx(Iq,{})}),i.jsx(It,{path:"/verify-email",element:i.jsx(Rq,{})}),i.jsx(It,{path:"/patient-dashboard",element:i.jsx(tn,{isAllowed:e==="patient",children:i.jsx(bH,{patientId:p,patientName:y})})}),i.jsx(It,{path:"/doctor-dashboard",element:i.jsx(tn,{isAllowed:e==="doctor",children:i.jsx(Rf,{children:i.jsx(EH,{})})})}),i.jsx(It,{path:"/admin-panel",element:i.jsx(tn,{isAllowed:e==="admin",children:i.jsx(PH,{})})}),i.jsx(It,{path:"/appointments",element:i.jsx(tn,{isAllowed:e!==null,children:e==="doctor"?i.jsx(Rf,{children:i.jsx(Vce,{})}):i.jsx(bN,{})})}),i.jsx(It,{path:"/appointments/:doctorId",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(bN,{})})}),i.jsx(It,{path:"/video-call",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(HH,{})})}),i.jsx(It,{path:"/history",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(CN,{})})}),i.jsx(It,{path:"/prescriptions",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(CN,{})})}),i.jsx(It,{path:"/medical-history",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(PW,{})})}),i.jsx(It,{path:"/medical-records/:recordId",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(_W,{})})}),i.jsx(It,{path:"/verification",element:i.jsx(tn,{isAllowed:e==="doctor",children:i.jsx(OW,{})})}),i.jsx(It,{path:"/video-call/:appointmentId",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(Zte,{})})}),i.jsx(It,{path:"/subscription",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(ene,{})})}),i.jsx(It,{path:"/chat/:conversationId",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(Yne,{})})}),i.jsx(It,{path:"/admin/verification",element:i.jsx(tn,{isAllowed:e==="admin",children:i.jsx(uce,{})})}),i.jsx(It,{path:"/admin/specialties",element:i.jsx(tn,{isAllowed:e==="admin",children:i.jsx(Bce,{})})}),i.jsx(It,{path:"/admin/settings",element:i.jsx(tn,{isAllowed:e==="admin",children:i.jsx(wce,{onLogout:f})})}),i.jsx(It,{path:"/settings",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(xW,{onLogout:f})})}),i.jsx(It,{path:"/payments",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(bW,{})})}),i.jsx(It,{path:"/search-doctors",element:i.jsx(o2,{to:"/appointments",replace:!0})}),i.jsx(It,{path:"/nueva-cita",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(Ece,{})})}),i.jsx(It,{path:"/nueva-cita/:doctorId",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(zce,{})})}),i.jsx(It,{path:"/mensajes",element:i.jsx(tn,{isAllowed:e==="patient",children:i.jsx(Oce,{})})}),i.jsx(It,{path:"/messages",element:i.jsx(tn,{isAllowed:e==="doctor",children:i.jsx(Rf,{children:i.jsx(Qce,{})})})}),i.jsx(It,{path:"/mis-citas",element:i.jsx(tn,{isAllowed:e!==null,children:i.jsx(Uce,{})})}),i.jsx(It,{path:"/availability",element:i.jsx(tn,{isAllowed:e==="doctor",children:i.jsx(Rf,{children:i.jsx(Kce,{})})})}),i.jsx(It,{path:"*",element:i.jsx(wW,{})})]})})]})}W4.createRoot(document.getElementById("root")).render(i.jsx(Ce.StrictMode,{children:i.jsx(aL,{children:i.jsx(UL,{client:YL,children:i.jsx(Xce,{})})})}));
